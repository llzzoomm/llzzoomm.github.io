<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>llzzoomm</title>
  
  <subtitle>德玛西亚</subtitle>
  <link href="https://llzzoomm.github.io/atom.xml" rel="self"/>
  
  <link href="https://llzzoomm.github.io/"/>
  <updated>2023-07-26T12:21:20.146Z</updated>
  <id>https://llzzoomm.github.io/</id>
  
  <author>
    <name>lz</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SpringBoot（十万字）</title>
    <link href="https://llzzoomm.github.io/2023/07/26/springboot100000/"/>
    <id>https://llzzoomm.github.io/2023/07/26/springboot100000/</id>
    <published>2023-07-26T12:22:04.690Z</published>
    <updated>2023-07-26T12:21:20.146Z</updated>
    
    <content type="html"><![CDATA[<p>SpringBoot</p><span id="more"></span><p>​        每个课程单元内容设置不同，目标也不一样，作为学习者如果想达成最佳的学习效果，最好明确自己的学习目标再进行学习，这样目标明确，学习的时候能够更轻松，你就不会在学习的时候纠结如下的问题了。比如学着<font color="#ff0000"><b>基础篇</b></font>在那想，这个东西是个什么原理啊？这个东西是这么用的，那个东西该怎么用啊？因为原理性的内容统一放置到了<font color="#990000"><b>原理篇</b></font>讲解了，应用相关的内容统一放到<font color="#cc0000"><b>应用篇</b></font>里面讲解，你在<font color="#ff0000"><b>基础篇</b></font>阶段纠结也没有用，这一部分不讲这些知识，在<font color="#ff0000"><b>基础篇</b></font>先把SpringBoot的基础使用掌握完再说后面的知识吧。</p><p>​        此外还有一点需要说明的是，目前SpringBoot技术发展速度很快，更新速度也很快，因此后续还会对本套课程进行持续更新，特此在三个课程单元的基础上追加一个<strong>番外篇</strong>。番外篇的设置为了解决如下问题：</p><ul><li>持续更新SpringBoot后续发展出现的新技术</li><li>讲解部分知识点规模较大的支线知识（例如WebFlux）</li><li>扩展非实用性知识，扩展学习者视野</li></ul><p>​        每一个课程单元的学习目标如下，请各位查收，在学习的过程中可以阶段性的给自己提个问题，下面列出来的这些学习目标你是否达成了，可以检验你的学习成果。</p><table><thead><tr><th>课程单元</th><th>学习目标</th></tr></thead><tbody><tr><td><font color="#ff0000"><b>基础篇</b></font></td><td>能够创建SpringBoot工程<br>基于SpringBoot实现ssm/ssmp整合</td></tr><tr><td><font color="#cc0000"><b>应用篇</b></font></td><td>能够掌握SpringBoot程序多环境开发<br>能够基于Linux系统发布SpringBoot工程<br>能够解决线上灵活配置SpringBoot工程的需求<br>能够基于SpringBoot整合任意第三方技术</td></tr><tr><td><font color="#990000"><b>原理篇</b></font></td><td>掌握SpringBoot内部工作流程<br>理解SpringBoot整合第三方技术的原理<br>实现自定义开发整合第三方技术的组件</td></tr><tr><td><strong>番外篇</strong></td><td>掌握SpringBoot整合非常见的第三方技术<br>掌握相同领域的更多的解决方案，并提升同领域方案设计能力</td></tr></tbody></table><p>​        整体课程包含的内容就是这些啦，要想完成前面这些内容的学习，顺利的达成学习目标，有些东西还是要提前和大家说清楚的。SpringBoot课程不像是Java基础，不管你有没有基础，都可以听一听，这个课程还真不行，需要一定的前置知识。下面给大家列表一些前置知识，如果还有不太会的，需要想办法快速补救一下。</p><h3 id="课程前置知识说明"><a href="#课程前置知识说明" class="headerlink" title="课程前置知识说明"></a>课程前置知识说明</h3><table><thead><tr><th>课程单元</th><th>前置知识</th><th>要求</th></tr></thead><tbody><tr><td><font color="#ff0000"><b>基础篇</b></font></td><td>Java基础语法</td><td>面向对象，封装，继承，多态，类与接口，集合，IO，网络编程等</td></tr><tr><td><font color="#ff0000"><b>基础篇</b></font></td><td>Spring与SpringMVC</td><td>知道Spring是用来管理bean，能够基于Restful实现页面请求交互功能</td></tr><tr><td><font color="#ff0000"><b>基础篇</b></font></td><td>Mybatis与Mybatis-Plus</td><td>基于Mybatis和MybatisPlus能够开发出包含基础CRUD功能的标准Dao模块</td></tr><tr><td><font color="#ff0000"><b>基础篇</b></font></td><td>数据库MySQL</td><td>能够读懂基础CRUD功能的SQL语句</td></tr><tr><td><font color="#ff0000"><b>基础篇</b></font></td><td>服务器</td><td>知道服务器与web工程的关系，熟悉web服务器的基础配置</td></tr><tr><td><font color="#ff0000"><b>基础篇</b></font></td><td>maven</td><td>知道maven的依赖关系，知道什么是依赖范围，依赖传递，排除依赖，可选依赖，继承</td></tr><tr><td><font color="#ff0000"><b>基础篇</b></font></td><td>web技术（含vue，ElementUI)</td><td>知道vue如何发送ajax请求，如何获取响应数据，如何进行数据模型双向绑定</td></tr><tr><td><font color="#cc0000"><b>应用篇</b></font></td><td>Linux（CenterOS7）</td><td>熟悉常用的Linux基础指令，熟悉Linux系统目录结构</td></tr><tr><td><font color="#cc0000"><b>应用篇</b></font></td><td>实用开发技术</td><td>缓存：Redis、MongoDB、……<br>消息中间件:RocketMq、RabbitMq、……</td></tr><tr><td><font color="#990000"><b>原理篇</b></font></td><td>Spring</td><td>了解Spring加载bean的各种方式<br>知道Spring容器底层工作原理，能够阅读简单的Spring底层源码</td></tr></tbody></table><p>​        看着略微有点多，其实还好吧，如果个别技术真的不会，在学习课程的时候多用心听就好，基础篇是可以跟着学下来了，后面的实用篇和原理篇就比较难了。比如我要在Linux系统下操作，命令我就直接使用了，然后你看不懂可能学习起来就比较心累了。</p><p>​        课程安排就说到这里了，下面进入到SpringBoot<font color="#ff0000"><b>基础篇</b></font>的学习</p><h1 id="SpringBoot基础篇"><a href="#SpringBoot基础篇" class="headerlink" title="SpringBoot基础篇"></a>SpringBoot基础篇</h1><p>​        在基础篇中，我给学习者的定位是先上手，能够使用SpringBoot搭建基于SpringBoot的web项目开发，所以内容设置较少，主要包含如下内容：</p><ul><li>SpringBoot快速入门</li><li>SpringBoot基础配置</li><li>基于SpringBoot整合SSMP</li></ul><h2 id="JC-1-快速上手SpringBoot"><a href="#JC-1-快速上手SpringBoot" class="headerlink" title="JC-1.快速上手SpringBoot"></a>JC-1.快速上手SpringBoot</h2><p>​        学习任意一项技术，首先要知道这个技术的作用是什么，不然学完以后，你都不知道什么时候使用这个技术，也就是技术对应的应用场景。SpringBoot技术由Pivotal团队研发制作，功能的话简单概括就是加速Spring程序的开发，这个加速要从如下两个方面来说</p><ul><li>Spring程序初始搭建过程</li><li>Spring程序的开发过程</li></ul><p>​    通过上面两个方面的定位，我们可以产生两个模糊的概念：</p><ol><li>SpringBoot开发团队认为原始的Spring程序初始搭建的时候可能有些繁琐，这个过程是可以简化的，那原始的Spring程序初始搭建过程都包含哪些东西了呢？为什么觉得繁琐呢？最基本的Spring程序至少有一个配置文件或配置类，用来描述Spring的配置信息，莫非这个文件都可以不写？此外现在企业级开发使用Spring大部分情况下是做web开发，如果做web开发的话，还要在加载web环境时加载时加载指定的spring配置，这都是最基本的需求了，不写的话怎么知道加载哪个配置文件/配置类呢？那换了SpringBoot技术以后呢，这些还要写吗？谜底稍后揭晓，先卖个关子</li><li>SpringBoot开发团队认为原始的Spring程序开发的过程也有些繁琐，这个过程仍然可以简化。开发过程无外乎使用什么技术，导入对应的jar包（或坐标）然后将这个技术的核心对象交给Spring容器管理，也就是配置成Spring容器管控的bean就可以了。这都是基本操作啊，难道这些东西SpringBoot也能帮我们简化？</li></ol><p>​    带着上面这些疑问我们就着手第一个SpringBoot程序的开发了，看看到底使用SpringBoot技术能简化开发到什么程度。</p><p><font color="#f0f"><b>温馨提示</b></font></p><p>​        如果对Spring程序的基础开发不太懂的小伙伴，看到这里可以弃坑了，下面的内容学习需要具备Spring技术的知识，硬着头皮学不下去的。</p><h3 id="JC-1-1-SpringBoot入门程序制作（一）"><a href="#JC-1-1-SpringBoot入门程序制作（一）" class="headerlink" title="JC-1-1.SpringBoot入门程序制作（一）"></a>JC-1-1.SpringBoot入门程序制作（一）</h3><p>​        下面让我们开始做第一个SpringBoot程序吧，本课程基于Idea2020.3版本制作，使用的Maven版本为3.6.1，JDK版本为1.8。如果你的环境和上述环境不同，可能在操作界面和操作过程中略有不同，只要软件匹配兼容即可（说到这个Idea和Maven，它们两个还真不是什么版本都能搭到一起的，说多了都是泪啊）。</p><p>​        下面使用SpringBoot技术快速构建一个SpringMVC的程序，通过这个过程体会<font color="#ff0000"><b>简化</b></font>二字的含义。</p><p><strong>步骤①</strong>：创建新模块，选择Spring Initializr，并配置模块相关基础信息</p><p><img src="/2023/07/26/springboot100000/image-20211116125259385.png" alt="image-20211116125259385"></p><p>​        <font color="#ff0000"><b>特别关注</b></font>：第3步点击Next时，Idea需要联网状态才可以进入到后面那一页，如果不能正常联网，就无法正确到达右面那个设置页了，会一直<font color="#ff0000"><b>联网</b></font>转转转。</p><p>​        <font color="#ff0000"><b>特别关注</b></font>：第5步选择java版本和你计算机上安装的JDK版本匹配即可，但是最低要求为JDK8或以上版本，推荐使用8或11。</p><p><strong>步骤②</strong>：选择当前模块需要使用的技术集</p><p><img src="/2023/07/26/springboot100000/image-20211116125615728.png" alt="image-20211116125615728"></p><p>​        按照要求，左侧选择web，然后在中间选择Spring Web即可，选完右侧就出现了新的内容项，这就表示勾选成功了。</p><p>​        <font color="#ff0000"><b>关注</b></font>：此处选择的SpringBoot的版本使用默认的就可以了，需要说一点，SpringBoot的版本升级速度很快，可能昨天创建工程的时候默认版本是2.5.4，今天再创建工程默认版本就变成2.5.5了，差别不大，无需过于纠结，并且还可以到配置文件中修改对应的版本。</p><p><strong>步骤③</strong>：开发控制器类</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Rest模式</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping("/books")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> {</span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getById</span><span class="params">()</span>{</span><br><span class="line">        System.out.println(<span class="string">"springboot is running..."</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"springboot is running..."</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        入门案例制作的SpringMVC的控制器基于Rest风格开发，当然此处使用原始格式制作SpringMVC的程序也是没有问题的，上例中的@RestController与@GetMapping注解是基于Restful开发的典型注解。</p><p>​        <font color="#ff0000"><b>关注</b></font>：做到这里SpringBoot程序的最基础的开发已经做完了，现在就可以正常的运行Spring程序了。可能有些小伙伴会有疑惑，Tomcat服务器没有配置，Spring也没有配置，什么都没有配置这就能用吗？这就是SpringBoot技术的强大之处。关于内部工作流程后面再说，先专心学习开发过程。</p><p><strong>步骤④</strong>：运行自动生成的Application类</p><p><img src="/2023/07/26/springboot100000/image-20211116130152452.png" alt="image-20211116130152452"></p><p>​        使用带main方法的java程序的运行形式来运行程序，运行完毕后，控制台输出上述信息。</p><p>​        不难看出，运行的信息中包含了8080的端口，Tomcat这种熟悉的字样，难道这里启动了Tomcat服务器？是的，这里已经启动了。那服务器没有配置，哪里来的呢？后面再说。现在你就可以通过浏览器访问请求的路径，测试功能是否工作正常了。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">访问路径：http:<span class="comment">//localhost:8080/books</span></span><br></pre></td></tr></tbody></table></figure><p>​        是不是感觉很神奇？当前效果其实依赖的底层逻辑还是很复杂的，但是从开发者角度来看，目前只有两个文件展现到了开发者面前。</p><ul><li><p>pom.xml</p><p>这是maven的配置文件，描述了当前工程构建时相应的配置信息。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springboot_01_01_quickstart<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>配置中有两个信息需要关注，一个是parent，也就是当前工程继承了另外一个工程，干什么用的后面再说，还有依赖坐标，干什么用的后面再说。</p></li><li><p>Application类</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>这个类功能很简单，就一句代码，前面运行程序就是运行的这个类。</p></li></ul><p>​       到这里我们可以大胆推测一下，如果上面这两个文件没有的话，SpringBoot肯定没法玩，看来核心就是这两个文件了。由于是制作第一个SpringBoot程序，先不要关注这两个文件的功能，后面详细讲解内部工作流程。</p><p>​       通过上面的制作，我们不难发现，SpringBoot程序简直太好写了，几乎什么都没写，功能就有了，这也是SpringBoot技术为什么现在这么火的原因，和Spring程序相比，SpringBoot程序在开发的过程中各个层面均具有优势。</p><table><thead><tr><th><strong>类配置文件</strong></th><th><strong>Spring</strong></th><th><strong>SpringBoot</strong></th></tr></thead><tbody><tr><td>pom文件中的坐标</td><td><strong>手工添加</strong></td><td><strong>勾选添加</strong></td></tr><tr><td>web3.0配置类</td><td><strong>手工制作</strong></td><td><strong>无</strong></td></tr><tr><td>Spring/SpringMVC配置类</td><td><strong>手工制作</strong></td><td><strong>无</strong></td></tr><tr><td>控制器</td><td><strong>手工制作</strong></td><td><strong>手工制作</strong></td></tr></tbody></table><p>​        一句话总结一下就是<font color="#ff0000"><b>能少写就少写</b></font>，<font color="#ff0000"><b>能不写就不写</b></font>，这就是SpringBoot技术给我们带来的好处，行了，现在你就可以动手做一做SpringBoot程序了，看看效果如何，是否真的帮助你简化开发了。</p><p><strong>总结</strong></p><ol><li>开发SpringBoot程序在Idea工具中基于联网的前提下可以根据向导快速制作</li><li>SpringBoot程序需要依赖JDK，版本要求最低为JDK8</li><li>SpringBoot程序中需要使用某种功能时可以通过勾选的形式选择技术，也可以手工添加对应的要使用的技术（后期讲解）</li><li>运行SpringBoot程序通过运行Application程序进行</li></ol><p><strong>思考</strong></p><p>​        前面制作的时候说过，这个过程必须联网才可以进行，但是有些时候你会遇到一些莫名其妙的问题，比如基于Idea开发时，你会发现你配置了一些坐标，然后Maven下载对应东西的时候死慢死慢的，甚至还会失败。其实这种现象和Idea这款IDE工具有关，万一Idea不能正常访问网络的话，我们是不是就无法制作SpringBoot程序了呢？咱们下一节再说。</p><h3 id="JC-1-2-SpringBoot入门程序制作（二）"><a href="#JC-1-2-SpringBoot入门程序制作（二）" class="headerlink" title="JC-1-2.SpringBoot入门程序制作（二）"></a>JC-1-2.SpringBoot入门程序制作（二）</h3><p>​        如果Idea不能正常联网，这个SpringBoot程序就无法制作了吗？开什么玩笑，世上IDE工具千千万，难道SpringBoot技术还必须基于Idea来做了？这是不可能的。开发SpringBoot程序可以不基于IDE工具进行，在SpringBoot官网中可以直接创建SpringBoot程序。</p><p>​        SpringBoot官网和Spring的官网是在一起的，都是  spring.io  。你可以通过项目一级一级的找到SpringBoot技术的介绍页，然后在页面中间部位找到如下内容</p><img src="/2023/07/26/springboot100000/image-20211122150444816.png" alt="image-20211122150444816" style="zoom: 67%;"><p><strong>步骤①</strong>：点击<strong>Spring Initializr</strong>后进入到创建SpringBoot程序界面，接下来就是输入信息的过程，和在Idea中制作是一样的，只是界面发生了变化，根据自己的要求，在左侧选择对应信息和输入对应的信息。</p><img src="/2023/07/26/springboot100000/image-20211122150608039.png" alt="image-20211122150608039"><p><strong>步骤②</strong>：右侧的<strong>ADD DEPENDENCIES</strong>用于选择使用何种技术，和之前勾选的Spring WEB是在做同一件事，仅仅是界面不同而已，点击后打开网页版的技术选择界面。</p><img src="/2023/07/26/springboot100000/image-20211122161257361.png" alt="image-20211122161257361" style="zoom:50%;"><p><strong>步骤③</strong>：所有信息设置完毕后，点击下面左侧<strong>GENERATE</strong>按钮，生成一个文件包。</p><p><img src="/2023/07/26/springboot100000/image-202111221615480212.png" alt="image-20211122161548022"></p><p><strong>步骤④</strong>：保存后得到一个压缩文件，这个文件就是创建的SpringBoot工程        </p><p><img src="/2023/07/26/springboot100000/image-20211122161709478.png" alt="image-20211122161709478"></p><p><strong>步骤⑤</strong>：解压缩此文件得到工程目录，在Idea中导入即可直接使用，和之前在Idea环境下根据向导创建的工程完全一样，你可以创建一个Controller测试一下当前工程是否可用。</p><p><font color="#f0f"><b>温馨提示</b></font></p><p>​        做到这里其实可以透漏一个小秘密，Idea工具中创建SpringBoot工程其实连接的就是SpringBoot的官网，还句话说这种方式和第一种方式是一模一样的，只不过Idea把界面给整合了一下，读取Spring官网信息，然后展示到Idea界面中而已，可以通过如下信息比对一下</p><p><strong>Idea中创建工程时默认选项</strong></p><img src="/2023/07/26/springboot100000/image-20211122162443035.png" alt="image-20211122162443035" style="zoom: 67%;"><p><strong>SpringBoot官网创建工程时对应的地址</strong></p><p>​        看看SpringBoot官网创建工程的URL地址，是不是和Idea中使用的URL地址是一样的？</p><img src="/2023/07/26/springboot100000/image-20211122162820719.png" alt="image-20211122162820719"><p><strong>总结</strong></p><ol><li><p>打开SpringBoot官网，选择<strong>Quickstart Your Project</strong>中的Spring Initializr。</p><img src="/2023/07/26/springboot100000/image-20211122150444816.png" alt="image-20211122150444816" style="zoom: 67%;"></li><li><p>创建工程。</p><img src="/2023/07/26/springboot100000/image-20211122150608039.png" alt="image-20211122150608039"></li><li><p>保存项目文件。</p><p><img src="/2023/07/26/springboot100000/image-20211122161548022.png" alt="image-20211122161548022"></p></li><li><p>解压项目，通过IDE导入项目后进行编辑使用。</p></li></ol><p><strong>思考</strong></p><p>​        现在创建工程靠的是访问国外的Spring主站，但是互联网信息的访问是可以被约束的，如果一天这个网站你在国内无法访问了，那前面这两种方式就无法创建SpringBoot工程了，这时候又该怎么解决这个问题呢？咱们下一节再说。</p><h3 id="JC-1-3-SpringBoot入门程序制作（三）"><a href="#JC-1-3-SpringBoot入门程序制作（三）" class="headerlink" title="JC-1-3.SpringBoot入门程序制作（三）"></a>JC-1-3.SpringBoot入门程序制作（三）</h3><p>​        前面提到网站如果被限制访问了，该怎么办？开动脑筋想一想，不管是方式一还是方式二其实走的都是同一个路线，就是通过SpringBoot官网创建SpringBoot工程，假如国内有这么一个网站也能提供这样的功能，是不是就解决了呢？必然的嘛，新的问题又来了，国内有提供这样功能的网站吗？还真有，阿里提供了一个，下面问题就简单了，网址告诉我们就OK了，没错，就是这样。</p><p>​        创建工程时，切换选择starter服务路径，然后手工输入阿里云地址即可，地址：<a href="http://start.aliyun.com或https//start.aliyun.com">http://start.aliyun.com或https://start.aliyun.com</a></p><p><img src="/2023/07/26/springboot100000/image-20211122163605950.png" alt="image-20211122163605950"></p><p>​        阿里为了便于自己公司开发使用，特此在依赖坐标中添加了一些阿里自主的技术，也是为了推广自己的技术吧，所以在依赖选择列表中，你有了更多的选择。此外，阿里提供的地址更符合国内开发者的使用习惯，里面有一些SpringBoot官网上没有给出的坐标，大家可以好好看一看。</p><p><img src="/2023/07/26/springboot100000/image-20211122163937408.png" alt="image-20211122163937408"></p><p>​        不过有一点需要说清楚，阿里云地址默认创建的SpringBoot工程版本是<font color="#ff0000"><b>2.4.1</b></font>，所以如果你想更换其他的版本，创建项目后在pom文件中手工修改即可，别忘了刷新一下，加载新版本信息。</p><p>​        <font color="#ff0000"><b>注意</b></font>：阿里云提供的工程创建地址初始化完毕后和使用SpringBoot官网创建出来的工程略有区别，主要是在配置文件的形式上有区别,这个信息在后面讲解SpringBoot程序的执行流程时给大家揭晓。</p><p><strong>总结</strong></p><ol><li>选择start来源为自定义URL</li><li>输入阿里云starter地址</li><li>创建项目</li></ol><p><strong>思考</strong></p><p>​        做到这里我们已经有了三种方式创建SpringBoot工程，但是每种方式都要求你必须能上网才能创建工程。假如有一天，你加入了一个保密级别比较高的项目组，整个项目组没有外网，这个事情是不是就不能做了呢？咱们下一节再说。</p><h3 id="JC-1-4-SpringBoot入门程序制作（四）"><a href="#JC-1-4-SpringBoot入门程序制作（四）" class="headerlink" title="JC-1-4.SpringBoot入门程序制作（四）"></a>JC-1-4.SpringBoot入门程序制作（四）</h3><p>​        不能上网，还想创建SpringBoot工程，能不能做呢？能做，但是你要先问问自己联网和不联网到底差别是什么？这个差别找到以后，你就发现，你把联网要干的事情都提前准备好，就无需联网了。</p><p>​        联网做什么呢？首先SpringBoot工程也是基于Maven构建的，而Maven工程中如果加载一些工程需要使用又不存在的东西时，就要联网去下载。其实SpringBoot工程创建的时候就是要去下载一些必要的组件。如果把这些东西提前准备好呢？是的，就是这样。</p><p>​        下面就手工创建一个SpringBoot工程，如果需要使用的东西提前保障在maven仓库中存在，整个过程就可以不依赖联网环境了。不过咱们已经用3种方式创建了SprongBoot工程了，所以下面也没什么东西需要下载了。</p><p><strong>步骤①</strong>：创建工程时，选择创建普通Maven工程。</p><img src="/2023/07/26/springboot100000/image-20211122165341684.png" alt="image-20211122165341684" style="zoom:50%;"><p><strong>步骤②</strong>：参照标准SpringBoot工程的pom文件，书写自己的pom文件即可。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.itheima<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springboot_01_04_quickstart<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        用什么写什么，不用的都可以不写。当然，现在小伙伴们可能还不知道用什么和不用什么，最简单的就是复制粘贴了，随着后面的学习，你就知道哪些可以省略了。此处我删减了一些目前不是必须的东西，一样能用。核心的内容有两条，一个是继承了一个父工程，另外添加了一个依赖。</p><p><strong>步骤③</strong>：之前运行SpringBoot工程需要一个类，这个缺不了，自己手写一个就行了，建议按照之前的目录结构来创建，先别玩花样，先学走后学跑。类名可以自定义，关联的名称同步修改即可。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        SpringApplication.run(Application.class);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        <font color="#ff0000"><b>关注</b></font>：类上面的注解@SpringBootApplication千万别丢了，这个是核心，后面再介绍。</p><p>​        <font color="#ff0000"><b>关注</b></font>：类名可以自定义，只要保障下面代码中使用的类名和你自己定义的名称一样即可，也就是run方法中的那个class对应的名称。</p><p><strong>步骤④</strong>：下面就可以自己创建一个Controller测试一下是否能用了，和之前没有差别的。</p><p>​        看到这里其实应该能够想明白了，通过向导或者网站创建的SpringBoot工程其实就是帮你写了一些代码，而现在是自己手写，写的内容都一样，仅此而已。</p><p><font color="#f0f"><b>温馨提示</b></font></p><p>​        如果你的计算机上从来没有创建成功过SpringBoot工程，自然也就没有下载过SpringBoot对应的坐标相关的资源，那用手写创建的方式在不联网的情况下肯定该是不能用的。所谓手写，其实就是自己写别人帮你生成的东西，但是引用的坐标对应的资源必须保障maven仓库里面有才行，如果没有，还是要去下载的。</p><p><strong>总结</strong></p><ol><li>创建普通Maven工程</li><li>继承spring-boot-starter-parent</li><li>添加依赖spring-boot-starter-web</li><li>制作引导类Application</li></ol><p>​        到这里已经学习了4种创建SpringBoot工程的方式，其实本质是一样的，都是根据SpringBoot工程的文件格式要求，通过不同时方式生成或者手写得到对应的文件，效果完全一样。</p><h4 id="教你一招：在Idea中隐藏指定文件-文件夹"><a href="#教你一招：在Idea中隐藏指定文件-文件夹" class="headerlink" title="教你一招：在Idea中隐藏指定文件/文件夹"></a>教你一招：在Idea中隐藏指定文件/文件夹</h4><p>​        创建SpringBoot工程时，使用SpringBoot向导也好，阿里云也罢，其实都是为了一个目的，得到一个标准的SpringBoot工程文件结构。这个时候就有新的问题出现了，标准的工程结构中包含了一些未知的文件夹，在开发的时候看起来特别别扭，这一节就来说说这些文件怎么处理。</p><p>​        处理方案无外乎两种，如果你对每一个文件/目录足够了解，有用的留着，没有用的完全可以删除掉。或者不删除，但是看着别扭，就设置文件为看不到就行了。删除不说了，选中后直接Delete掉就好了，这一节说说如何隐藏指定的文件或文件夹信息。</p><p>​        既然是在Idea下做隐藏功能，肯定隶属于Idea的设置，设置方式如下。</p><p><strong>步骤①</strong>：打开设置，【Files】→【Settings】。</p><img src="/2023/07/26/springboot100000/image-20211122173835517.png" alt="image-20211122173835517" style="zoom:80%;"><p><strong>步骤②</strong>：打开文件类型设置界面后，【Editor】→【File Types】→【Ignored Files and Folders】，忽略文件或文件夹显示。</p><img src="/2023/07/26/springboot100000/image-20211122174020028.png" alt="image-20211122174020028" style="zoom: 67%;"><p><strong>步骤③</strong>：添加你要隐藏的文件名称或文件夹名称，可以使用*号通配符，表示任意，设置完毕即可。</p><p>​    到这里就做完了，其实就是Idea的一个小功能</p><p><strong>总结</strong></p><ol><li>Idea中隐藏指定文件或指定类型文件<ol><li>【Files】→【Settings】</li><li>【Editor】→【File Types】→【Ignored Files and Folders】</li><li>输入要隐藏的名称，支持*号通配符</li><li>回车确认添加</li></ol></li></ol><h3 id="JC-1-5-SpringBoot简介"><a href="#JC-1-5-SpringBoot简介" class="headerlink" title="JC-1-5.SpringBoot简介"></a>JC-1-5.SpringBoot简介</h3><p>​        入门案例做完了，这个时候回忆一下咱们之前说的SpringBoot的功能是什么还记得吗？加速Spring程序的开发，现在是否深有体会？再来看SpringBoot技术的设计初衷就很容易理解了。</p><p>​        SpringBoot是由Pivotal团队提供的全新框架，其设计目的是用来<font color="#ff0000"><b>简化Spring应用的初始搭建以及开发过程</b></font>。</p><p>​        都简化了了哪些东西呢？其实就是针对原始的Spring程序制作的两个方面进行了简化：</p><ul><li>Spring程序缺点<ul><li>依赖设置繁琐<ul><li>以前写Spring程序，使用的技术都要自己一个一个的写，现在不需要了，如果做过原始SpringMVC程序的小伙伴应该知道，写SpringMVC程序，最基础的spring-web和spring-webmvc这两个坐标是必须的，就这还不包含你用json啊等等这些坐标，现在呢？一个坐标搞定了。</li></ul></li><li>配置繁琐<ul><li>以前写配置类或者配置文件，然后用什么东西就要自己写加载bean这些东西，现在呢？什么都没写，照样能用。</li></ul></li></ul></li></ul><blockquote><p>回顾</p><p>​    通过上面两个方面的定位，我们可以产生两个模糊的概念：</p><ol><li>SpringBoot开发团队认为原始的Spring程序初始搭建的时候可能有些繁琐，这个过程是可以简化的，那原始的Spring程序初始搭建过程都包含哪些东西了呢？为什么觉得繁琐呢？最基本的Spring程序至少有一个配置文件或配置类，用来描述Spring的配置信息，莫非这个文件都可以不写？此外现在企业级开发使用Spring大部分情况下是做web开发，如果做web开发的话，还要在加载web环境时加载时加载指定的spring配置，这都是最基本的需求了，不写的话怎么知道加载哪个配置文件/配置类呢？那换了SpringBoot技术以后呢，这些还要写吗？谜底稍后揭晓，先卖个关子</li><li>SpringBoot开发团队认为原始的Spring程序开发的过程也有些繁琐，这个过程仍然可以简化。开发过程无外乎使用什么技术，导入对应的jar包（或坐标）然后将这个技术的核心对象交给Spring容器管理，也就是配置成Spring容器管控的bean就可以了。这都是基本操作啊，难道这些东西SpringBoot也能帮我们简化？</li></ol></blockquote><p>​        再来看看前面提出的两个问题，已经有答案了，都简化了，都不用写了，这就是SpringBoot给我们带来的好处。这些简化操作在SpringBoot中有专业的用语，也是SpringBoot程序的核心功能及优点：</p><ul><li>起步依赖（简化依赖配置）<ul><li>依赖配置的书写简化就是靠这个起步依赖达成的。</li></ul></li><li>自动配置（简化常用工程相关配置）<ul><li>配置过于繁琐，使用自动配置就可以做相应的简化，但是内部还是很复杂的，后面具体展开说。</li></ul></li><li>辅助功能（内置服务器，……）<ul><li>除了上面的功能，其实SpringBoot程序还有其他的一些优势，比如我们没有配置Tomcat服务器，但是能正常运行，这是SpringBoot入门程序中一个可以感知到的功能，也是SpringBoot的辅助功能之一。一个辅助功能都能做的这么6，太牛了。</li></ul></li></ul><p>​        下面结合入门程序来说说这些简化操作都在哪些方面进行体现的，一共分为4个方面</p><ul><li>parent</li><li>starter</li><li>引导类</li><li>内嵌tomcat</li></ul><h4 id="parent"><a href="#parent" class="headerlink" title="parent"></a>parent</h4><p>​        SpringBoot关注到开发者在进行开发时，往往对依赖版本的选择具有固定的搭配格式，并且这些依赖版本的选择还不能乱搭配。比如A技术的2.0版，在与B技术进行配合使用时，与B技术的3.5版可以合作在一起工作，但是和B技术的3.7版合作开发使用时就有冲突。其实很多开发者都一直想做一件事情，就是将各种各样的技术配合使用的常见依赖版本进行收集整理，制作出了最合理的依赖版本配置方案，这样使用起来就方便多了。</p><p>​        SpringBoot一看这种情况so easy啊，于是将所有的技术版本的常见使用方案都给开发者整理了出来，以后开发者使用时直接用它提供的版本方案，就不用担心冲突问题了，相当于SpringBoot做了无数个技术版本搭配的列表，这个技术搭配列表的名字叫做<font color="#ff0000"><b>parent</b></font>。</p><p>​        <font color="#ff0000"><b>parent</b></font>自身具有很多个版本，每个<font color="#ff0000"><b>parent</b></font>版本中包含有几百个其他技术的版本号，不同的parent间使用的各种技术的版本号有可能会发生变化。当开发者使用某些技术时，直接使用SpringBoot提供的<font color="#ff0000"><b>parent</b></font>就行了，由<font color="#ff0000"><b>parent</b></font>帮助开发者统一的进行各种技术的版本管理。</p><p>​        比如你现在要使用Spring配合MyBatis开发，没有parent之前怎么做呢？选个Spring的版本，再选个MyBatis的版本，再把这些技术使用时关联的其他技术的版本逐一确定下来。当你Spring的版本发生变化需要切换时，你的MyBatis版本有可能也要跟着切换，关联技术呢？可能都要切换，而且切换后还可能出现其他问题。现在这一切工作都可以交给parent来做了。你无需关注这些技术间的版本冲突问题，你只需要关注你用什么技术就行了，冲突问题由<font color="#ff0000"><b>parent</b></font>负责处理。</p><p>​        有人可能会提出来，万一<font color="#ff0000"><b>parent</b></font>给我导入了一些我不想使用的依赖怎么办？记清楚，这一点很关键，<font color="#ff0000"><b>parent</b></font>仅仅帮我们进行版本管理，它不负责帮你导入坐标，说白了用什么还是你自己定，只不过版本不需要你管理了。整体上来说，<font color="#ff0000"><b>使用parent可以帮助开发者进行版本的统一管理。</b></font></p><p>​        <font color="#ff0000"><b>关注</b></font>：parent定义出来以后，并不是直接使用的，仅仅给了开发者一个说明书，但是并没有实际使用，这个一定要确认清楚。</p><p>​        那SpringBoot又是如何做到这一点的呢？可以查阅SpringBoot的配置源码，看到这些定义。</p><ul><li>项目中的pom.xml中继承了一个坐标</li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><ul><li>打开后可以查阅到其中又继承了一个坐标</li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><ul><li>这个坐标中定义了两组信息</li></ul><p>第一组是各式各样的依赖版本号属性，下面列出依赖版本属性的局部，可以看的出来，定义了若干个技术的依赖版本号。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activemq.version</span>&gt;</span>5.16.3<span class="tag">&lt;/<span class="name">activemq.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aspectj.version</span>&gt;</span>1.9.7<span class="tag">&lt;/<span class="name">aspectj.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">assertj.version</span>&gt;</span>3.19.0<span class="tag">&lt;/<span class="name">assertj.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">commons-codec.version</span>&gt;</span>1.15<span class="tag">&lt;/<span class="name">commons-codec.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">commons-dbcp2.version</span>&gt;</span>2.8.0<span class="tag">&lt;/<span class="name">commons-dbcp2.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">commons-lang3.version</span>&gt;</span>3.12.0<span class="tag">&lt;/<span class="name">commons-lang3.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">commons-pool.version</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">commons-pool.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">commons-pool2.version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">commons-pool2.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2.version</span>&gt;</span>1.4.200<span class="tag">&lt;/<span class="name">h2.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hibernate.version</span>&gt;</span>5.4.32.Final<span class="tag">&lt;/<span class="name">hibernate.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hibernate-validator.version</span>&gt;</span>6.2.0.Final<span class="tag">&lt;/<span class="name">hibernate-validator.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">httpclient.version</span>&gt;</span>4.5.13<span class="tag">&lt;/<span class="name">httpclient.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jackson-bom.version</span>&gt;</span>2.12.4<span class="tag">&lt;/<span class="name">jackson-bom.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">javax-jms.version</span>&gt;</span>2.0.1<span class="tag">&lt;/<span class="name">javax-jms.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">javax-json.version</span>&gt;</span>1.1.4<span class="tag">&lt;/<span class="name">javax-json.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">javax-websocket.version</span>&gt;</span>1.1<span class="tag">&lt;/<span class="name">javax-websocket.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jetty-el.version</span>&gt;</span>9.0.48<span class="tag">&lt;/<span class="name">jetty-el.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">junit.version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">junit.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>第二组是各式各样的依赖坐标信息，可以看出依赖坐标定义中没有具体的依赖版本号，而是引用了第一组信息中定义的依赖版本属性值.</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>${hibernate.version}<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>${junit.version}<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        <font color="#ff0000"><b>关注</b></font>：上面的依赖坐标定义是出现在<dependencymanagement>标签中的，是对引用坐标的依赖管理，并不是实际使用的坐标。因此当你的项目中继承了这组parent信息后，在不使用对应坐标的情况下，前面的这组定义是不会具体导入某个依赖的。</dependencymanagement></p><p>​        <font color="#ff0000"><b>关注</b></font>：因为在maven中继承机会只有一次，上述继承的格式还可以切换成导入的形式进行，并且在阿里云的starter创建工程时就使用了此种形式。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>${spring-boot.version}<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>开发SpringBoot程序要继承spring-boot-starter-parent</li><li>spring-boot-starter-parent中定义了若干个依赖管理</li><li>继承parent模块可以避免多个依赖使用相同技术时出现依赖版本冲突</li><li>继承parent的形式也可以采用引入依赖的形式实现效果</li></ol><p><strong>思考</strong></p><p>​        parent中定义了若干个依赖版本管理，但是也没有使用，那这个设定也就不生效啊，究竟谁在使用这些定义呢？</p><h4 id="starter"><a href="#starter" class="headerlink" title="starter"></a>starter</h4><p>​        SpringBoot关注到实际开发时，开发者对于依赖坐标的使用往往都有一些固定的组合方式，比如使用spring-webmvc就一定要使用spring-web。每次都要固定搭配着写，非常繁琐，而且格式固定，没有任何技术含量。</p><p>​        SpringBoot一看这种情况，看来需要给开发者带来一些帮助了。安排，把所有的技术使用的固定搭配格式都给开发出来，以后你用某个技术，就不用每次写一堆依赖了，还容易写错，我给你做一个东西，代表一堆东西，开发者使用的时候，直接用我做好的这个东西就好了，对于这样的固定技术搭配，SpringBoot给它起了个名字叫做<font color="#ff0000"><b>starter</b></font>。</p><p>​        starter定义了使用某种技术时对于依赖的固定搭配格式，也是一种最佳解决方案，<font color="#ff0000"><b>使用starter可以帮助开发者减少依赖配置</b></font>。</p><p>​        这个东西其实在入门案例里面已经使用过了，入门案例中的web功能就是使用这种方式添加依赖的。可以查阅SpringBoot的配置源码，看到这些定义。</p><ul><li>项目中的pom.xml定义了使用SpringMVC技术，但是并没有写SpringMVC的坐标，而是添加了一个名字中包含starter的依赖</li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><ul><li>在spring-boot-starter-web中又定义了若干个具体依赖的坐标</li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-json<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        之前提到过开发SpringMVC程序需要导入spring-webmvc的坐标和spring整合web开发的坐标，就是上面这组坐标中的最后两个了。</p><p>​        但是我们发现除了这两个坐标，还有其他的坐标。比如第二个，叫做spring-boot-starter-json。看名称就知道，这个是与json有关的坐标了，但是看名字发现和最后两个又不太一样，它的名字中也有starter，打开看看里面有什么？</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-databind<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.datatype<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-datatype-jdk8<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.datatype<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-datatype-jsr310<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.module<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-module-parameter-names<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.12.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        我们可以发现，这个starter中又包含了若干个坐标，其实就是使用SpringMVC开发通常都会使用到Json，使用json又离不开这里面定义的这些坐标，看来还真是方便，SpringBoot把我们开发中使用的东西能用到的都给提前做好了。你仔细看完会发现，里面有一些你没用过的。的确会出现这种过量导入的可能性，没关系，可以通过maven中的排除依赖剔除掉一部分。不过你不管它也没事，大不了就是过量导入呗。</p><p>​    到这里基本上得到了一个信息，使用starter可以帮开发者快速配置依赖关系。以前写依赖3个坐标的，现在写导入一个就搞定了，就是加速依赖配置的。</p><p><strong>starter与parent的区别</strong></p><p>​        朦朦胧胧中感觉starter与parent好像都是帮助我们简化配置的，但是功能又不一样，梳理一下。</p><p>​        <font color="#ff0000"><b>starter</b></font>是一个坐标中定了若干个坐标，以前写多个的，现在写一个，<font color="#ff0000"><b>是用来减少依赖配置的书写量的</b></font>。</p><p>​        <font color="#ff0000"><b>parent</b></font>是定义了几百个依赖版本号，以前写依赖需要自己手工控制版本，现在由SpringBoot统一管理，这样就不存在版本冲突了，<font color="#ff0000"><b>是用来减少依赖冲突的</b></font>。</p><p><strong>实际开发应用方式</strong></p><ul><li><p>实际开发中如果需要用什么技术，先去找有没有这个技术对应的starter</p><ul><li>如果有对应的starter，直接写starter，而且无需指定版本，版本由parent提供</li><li>如果没有对应的starter，手写坐标即可</li></ul></li><li><p>实际开发中如果发现坐标出现了冲突现象，确认你要使用的可行的版本号，使用手工书写的方式添加对应依赖，覆盖SpringBoot提供给我们的配置管理</p><ul><li>方式一：直接写坐标</li><li>方式二：覆盖<properties>中定义的版本号，就是下面这堆东西了，哪个冲突了覆盖哪个就OK了</properties></li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activemq.version</span>&gt;</span>5.16.3<span class="tag">&lt;/<span class="name">activemq.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">aspectj.version</span>&gt;</span>1.9.7<span class="tag">&lt;/<span class="name">aspectj.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">assertj.version</span>&gt;</span>3.19.0<span class="tag">&lt;/<span class="name">assertj.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">commons-codec.version</span>&gt;</span>1.15<span class="tag">&lt;/<span class="name">commons-codec.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">commons-dbcp2.version</span>&gt;</span>2.8.0<span class="tag">&lt;/<span class="name">commons-dbcp2.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">commons-lang3.version</span>&gt;</span>3.12.0<span class="tag">&lt;/<span class="name">commons-lang3.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">commons-pool.version</span>&gt;</span>1.6<span class="tag">&lt;/<span class="name">commons-pool.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">commons-pool2.version</span>&gt;</span>2.9.0<span class="tag">&lt;/<span class="name">commons-pool2.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2.version</span>&gt;</span>1.4.200<span class="tag">&lt;/<span class="name">h2.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hibernate.version</span>&gt;</span>5.4.32.Final<span class="tag">&lt;/<span class="name">hibernate.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hibernate-validator.version</span>&gt;</span>6.2.0.Final<span class="tag">&lt;/<span class="name">hibernate-validator.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">httpclient.version</span>&gt;</span>4.5.13<span class="tag">&lt;/<span class="name">httpclient.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jackson-bom.version</span>&gt;</span>2.12.4<span class="tag">&lt;/<span class="name">jackson-bom.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">javax-jms.version</span>&gt;</span>2.0.1<span class="tag">&lt;/<span class="name">javax-jms.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">javax-json.version</span>&gt;</span>1.1.4<span class="tag">&lt;/<span class="name">javax-json.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">javax-websocket.version</span>&gt;</span>1.1<span class="tag">&lt;/<span class="name">javax-websocket.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">jetty-el.version</span>&gt;</span>9.0.48<span class="tag">&lt;/<span class="name">jetty-el.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">junit.version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">junit.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure></li></ul><p><font color="#f0f"><b>温馨提示</b></font></p><p>​        SpringBoot官方给出了好多个starter的定义，方便我们使用，而且名称都是如下格式</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">命名规则：spring-boot-starter-技术名称</span><br></pre></td></tr></tbody></table></figure><p>​    所以后期见了spring-boot-starter-aaa这样的名字，这就是SpringBoot官方给出的starter定义。那非官方定义的也有吗？有的，具体命名方式到整合技术的章节再说。</p><p><strong>总结</strong></p><ol><li>开发SpringBoot程序需要导入坐标时通常导入对应的starter</li><li>每个不同的starter根据功能不同，通常包含多个依赖坐标</li><li>使用starter可以实现快速配置的效果，达到简化配置的目的</li></ol><h4 id="引导类"><a href="#引导类" class="headerlink" title="引导类"></a>引导类</h4><p>​        配置说完了，我们发现SpringBoot确实帮助我们减少了很多配置工作，下面说一下程序是如何运行的。目前程序运行的入口就是SpringBoot工程创建时自带的那个类，也就是带有main方法的那个类，运行这个类就可以启动SpringBoot工程的运行。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot0101QuickstartApplication</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        SpringApplication.run(Springboot0101QuickstartApplication.class, args);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        SpringBoot本身是为了加速Spring程序的开发的，而Spring程序运行的基础是需要创建Spring容器对象（IoC容器）并将所有的对象放置到Spring容器中管理，也就是一个一个的Bean。现在改用SpringBoot加速开发Spring程序，这个容器还在吗？这个疑问不用说，一定在。其实当前这个类运行后就会产生一个Spring容器对象，并且可以将这个对象保存起来，通过容器对象直接操作Bean。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuickstartApplication</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">ConfigurableApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> SpringApplication.run(QuickstartApplication.class, args);</span><br><span class="line">        <span class="type">BookController</span> <span class="variable">bean</span> <span class="operator">=</span> ctx.getBean(BookController.class);</span><br><span class="line">        System.out.println(<span class="string">"bean======&gt;"</span> + bean);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        通过上述操作不难看出，其实SpringBoot程序启动还是创建了一个Spring容器对象。当前运行的这个类在SpringBoot程序中是所有功能的入口，称为<font color="#ff0000"><b>引导类</b></font>。</p><p>​        作为一个引导类最典型的特征就是当前类上方声明了一个注解<font color="#ff0000"><b>@SpringBootApplication</b></font>。</p><p><strong>总结</strong></p><ol><li>SpringBoot工程提供引导类用来启动程序</li><li>SpringBoot工程启动后创建并初始化Spring容器</li></ol><p><strong>思考</strong></p><p>​        程序现在已经运行了，通过引导类的main方法运行了起来。但是运行java程序不应该是执行完就结束了吗？但是我们现在明显是启动了一个web服务器啊，不然网页怎么能正常访问呢？这个服务器是在哪里写的呢？</p><h4 id="内嵌tomcat"><a href="#内嵌tomcat" class="headerlink" title="内嵌tomcat"></a>内嵌tomcat</h4><p>​        当前我们做的SpringBoot入门案例勾选了Spring-web的功能，并且导入了对应的starter。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        SpringBoot发现，既然你要做web程序，肯定离不开使用web服务器，这样吧，帮人帮到底，送佛送到西，我帮你搞一个web服务器，你要愿意用的，直接使用就好了。SpringBoot又琢磨，提供一种服务器万一不满足开发者需要呢？干脆我再多给你几种选择，你随便切换。万一你不想用我给你提供的，也行，你可以自己搞。</p><p>​        由于这个功能不属于程序的主体功能，可用可不用，于是乎SpringBoot将其定位成辅助功能，别小看这么一个辅助功能，它可是帮我们开发者又减少了好多的设置性工作。</p><p>​        下面就围绕着这个内置的web服务器，也可以说是内置的tomcat服务器来研究几个问题：</p><ol><li>这个服务器在什么位置定义的</li><li>这个服务器是怎么运行的</li><li>这个服务器如果想换怎么换？虽然这个需求很垃圾，搞得开发者会好多web服务器一样，用别人提供好的不香么？非要自己折腾</li></ol><p><strong>内嵌Tomcat定义位置</strong></p><p>​        说到定义的位置，我们就想，如果我们不开发web程序，用的着web服务器吗？肯定用不着啊。那如果这个东西被加入到你的程序中，伴随着什么技术进来的呢？肯定是web相关的功能啊，没错，就是前面导入的web相关的starter做的这件事。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        打开web对应的starter查看导入了哪些东西。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-json<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-webmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        第三个依赖就是tomcat对应的东西了，居然也是一个starter，再打开看看。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>jakarta.annotation<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jakarta.annotation-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-embed-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>9.0.52<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-annotations-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-embed-el<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>9.0.52<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-embed-websocket<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>9.0.52<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-annotations-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        这里面有一个核心的坐标，tomcat-embed-core，叫做tomcat内嵌核心。就是这个东西把tomcat功能引入到了我们的程序中的。目前解决了第一个问题，找到根儿了，谁把tomcat引入到程序中的？spring-boot-starter-web中的spring-boot-starter-tomcat做的。之所以你感觉很奇妙的原因就是，这个东西是默认加入到程序中了，所以感觉很神奇，居然什么都不做，就有了web服务器对应的功能。再来说第二个问题，这个服务器是怎么运行的。</p><p><strong>内嵌Tomcat运行原理</strong></p><p>​        Tomcat服务器是一款软件，而且是一款使用java语言开发的软件，熟悉tomcat的话应该知道tomcat安装目录中保存有很多jar文件。</p><p>​        下面的问题来了，既然是使用java语言开发的，运行的时候肯定符合java程序运行的原理，java程序运行靠的是什么？对象呀，一切皆对象，万物皆对象。那tomcat运行起来呢？也是对象啊。</p><p>​        如果是对象，那Spring容器是用来管理对象的，这个对象能交给Spring容器管理吗？把吗去掉，是个对象都可以交给Spring容器管理，行了，这下通了，tomcat服务器运行其实是以对象的形式在Spring容器中运行的。怪不得我们没有安装这个tomcat但是还能用，闹了白天这东西最后是以一个对象的形式存在，保存在Spring容器中悄悄运行的。具体运行的是什么呢？其实就是上前面提到的那个tomcat内嵌核心。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat.embed<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-embed-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>9.0.52<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>compile<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        那既然是个对象，如果把这个对象从Spring容器中去掉是不是就没有web服务器的功能呢？是这样的，通过依赖排除可以去掉这个web服务器功能。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        上面对web-starter做了一个操作，使用maven的排除依赖去掉了使用tomcat的starter。这下好了，容器中肯定没有这个对象了，重新启动程序可以观察到程序运行了，但是并没有像之前那样运行后是一个一直运行的服务，而是直接停掉了，就是这个原因。</p><p><strong>更换内嵌Tomcat</strong></p><p>​        那根据上面的操作我们思考是否可以换个服务器呢？必须的嘛。根据SpringBoot的工作机制，用什么技术，加入什么依赖就行了。SpringBoot提供了3款内置的服务器：</p><ul><li><p>tomcat(默认)：apache出品，粉丝多，应用面广，负载了若干较重的组件</p></li><li><p>jetty：更轻量级，负载性能远不及tomcat</p></li><li><p>undertow：负载性能勉强跑赢tomcat</p><p>想用哪个，加个坐标就OK。前提是把tomcat排除掉，因为tomcat是默认加载的。</p></li></ul><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jetty<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        现在就已经成功替换了web服务器，核心思想就是用什么加入对应坐标就可以了。如果有starter，优先使用starter。</p><p><strong>总结</strong></p><ol><li>内嵌Tomcat服务器是SpringBoot辅助功能之一</li><li>内嵌Tomcat工作原理是将Tomcat服务器作为对象运行，并将该对象交给Spring容器管理</li><li>变更内嵌服务器思想是去除现有服务器，添加全新的服务器</li></ol><p>​        到这里第一章快速上手SpringBoot就结束了，这一章我们学习了两大块知识</p><ol><li><p>使用了4种方式制作了SpringBoot的入门程序，不管是哪一种，其实内部都是一模一样的</p></li><li><p>学习了入门程序的工作流程，知道什么是parent，什么是starter，这两个东西是怎么配合工作的，以及我们的程序为什么启动起来是一个tomcat服务器等等</p><p>第一章到这里就结束了，再往下学习就要去基于会创建SpringBoot工程的基础上，研究SpringBoot工程的具体细节了。</p></li></ol><h2 id="JC-2-SpringBoot基础配置"><a href="#JC-2-SpringBoot基础配置" class="headerlink" title="JC-2.SpringBoot基础配置"></a>JC-2.SpringBoot基础配置</h2><p>​        入门案例做完了，下面就要研究SpringBoot的用法了。通过入门案例，各位小伙伴能够感知到一个信息，SpringBoot没有具体的功能，它是辅助加快Spring程序的开发效率的。我们发现，现在几乎不用做任何配置功能就有了，确实很好用。但是仔细想想，没有做配置意味着什么？意味着配置已经做好了，不用你自己写了。但是新的问题又来了，如果不想用已经写好的默认配置，该如何干预呢？这就是这一章咱们要研究的问题。</p><p>​        如果想修改默认的配置，这个信息应该写在什么位置呢？目前我们接触的入门案例中一共有3个文件，第一是pom.xml文件，设置项目的依赖，这个没什么好研究的，相关的高级内容咱们到原理篇再说，第二是引导类，这个是执行SpringBoot程序的入口，也不像是做功能配置的地方，其实还有一个信息，就是在resources目录下面有一个空白的文件，叫做application.properties。一看就是个配置文件，咱们这一章就来说说配置文件怎么写，能写什么，怎么覆盖SpringBoot的默认配置修改成自己的配置。</p><p>​    </p><h3 id="JC-2-1-属性配置"><a href="#JC-2-1-属性配置" class="headerlink" title="JC-2-1.属性配置"></a>JC-2-1.属性配置</h3><p>​        SpringBoot通过配置文件application.properties就可以修改默认的配置，那咱们就先找个简单的配置下手，当前访问tomcat的默认端口是8080，好熟悉的味道，但是不便于书写，我们先改成80，通过这个操作来熟悉一下SpringBoot的配置格式是什么样的。</p><p><img src="/2023/07/26/springboot100000/image-20211123165428245.png" alt="image-20211123165428245"></p><p>​        那该如何写呢？properties格式的文件书写规范是key=value</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name</span>=<span class="string">itheima</span></span><br></pre></td></tr></tbody></table></figure><p>​        这个格式肯定是不能颠覆的，那就尝试性的写就行了，改端口，写port。当你输入port后，神奇的事情就发生了，这玩意儿带提示，太好了。</p><img src="/2023/07/26/springboot100000/image-20211123165719091.png" alt="image-20211123165719091" style="zoom:80%;"><p>​        根据提示敲回车，输入80端口，搞定。</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">80</span></span><br></pre></td></tr></tbody></table></figure><p>​        下面就可以直接运行程序，测试效果了。</p><p>​        我们惊奇的发现SpringBoot这玩意儿狠啊，以前修改端口在哪里改？tomcat服务器的配置文件中改，现在呢？SpringBoot专用的配置文件中改，是不是意味着以后所有的配置都可以写在这一个文件中呢？是的，简化开发者配置的书写位置，集中管理。妙啊，妈妈再也不用担心我找不到配置文件了。</p><p>​        其实到这里我们应该得到如下三个信息：</p><ol><li>SpringBoot程序可以在application.properties文件中进行属性配置</li><li>application.properties文件中只要输入要配置的属性关键字就可以根据提示进行设置</li><li>SpringBoot将配置信息集中在一个文件中写，不管你是服务器的配置，还是数据库的配置，总之都写在一起，逃离一个项目十几种配置文件格式的尴尬局面</li></ol><p><strong>总结</strong></p><ol><li>SpringBoot默认配置文件是application.properties</li></ol><p>​        做完了端口的配置，趁热打铁，再做几个配置，目前项目启动时会显示一些日志信息，就来改一改这里面的一些设置。</p><p><strong>关闭运行日志图表（banner)</strong></p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.main.banner-mode</span>=<span class="string">off</span></span><br></pre></td></tr></tbody></table></figure><p><strong>设置运行日志的显示级别</strong></p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging.level.root</span>=<span class="string">debug</span></span><br></pre></td></tr></tbody></table></figure><p>​        你会发现，现在这么搞配置太爽了，以前你做配置怎么做？不同的技术有自己专用的配置文件，文件不同格式也不统一，现在呢？不用东奔西走的找配置文件写配置了，统一格式了，这就是大秦帝国啊，统一六国。SpringBoot比大秦狠，因为未来出现的技术还没出现呢，但是现在已经确认了，配置都写这个文件里面。</p><p>​        我们现在配置了3个信息，但是又有新的问题了。这个配置是随便写的吗？什么都能配？有没有一个东西显示所有能配置的项呢？此外这个配置和什么东西有关呢？会不会因为我写了什么东西以后才可以写什么配置呢？比如我现在没有写数据库相关的东西，能否配置数据呢？一个一个来，先说第一个问题，都能配置什么。</p><p>​        打开SpringBoot的官网，找到SpringBoot官方文档，打开查看附录中的Application Properties就可以获取到对应的配置项了，网址奉上：<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties">https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties</a></p><p>​        能写什么的问题解决了，再来说第二个问题，这个配置项和什么有关。在pom中注释掉导入的spring-boot-starter-web，然后刷新工程，你会发现配置的提示消失了。闹了半天是设定使用了什么技术才能做什么配置。也合理，不然没有使用对应技术，配了也是白配。</p><p><font color="#f0f"><b>温馨提示</b></font></p><p>​        所有的starter中都会依赖下面这个starter，叫做spring-boot-starter。这个starter是所有的SpringBoot的starter的基础依赖，里面定义了SpringBoot相关的基础配置，关于这个starter我们到开发应用篇和原理篇中再深入讲解。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;<span class="number">2.5</span><span class="number">.4</span>&lt;/version&gt;</span><br><span class="line">    &lt;scope&gt;compile&lt;/scope&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>SpringBoot中导入对应starter后，提供对应配置属性</li><li>书写SpringBoot配置采用关键字+提示形式书写</li></ol><h3 id="JC-2-2-配置文件分类"><a href="#JC-2-2-配置文件分类" class="headerlink" title="JC-2-2.配置文件分类"></a>JC-2-2.配置文件分类</h3><p>​        现在已经能够进行SpringBoot相关的配置了，但是properties格式的配置写起来总是觉得看着不舒服，所以就期望存在一种书写起来更简便的配置格式提供给开发者使用。有吗？还真有，SpringBoot除了支持properties格式的配置文件，还支持另外两种格式的配置文件。三种配置文件格式分别如下:</p><ul><li>properties格式</li><li>yml格式</li><li>yaml格式</li></ul><p>​        一看到全新的文件格式，各位小伙伴肯定想，这下又要学习新的语法格式了。怎么说呢？从知识角度来说，要学，从开发角度来说，不用学。为什么呢？因为SpringBoot的配置在Idea工具下有提示啊，跟着提示走就行了。下面列举三种不同文件格式配置相同的属性范例，先了解一下。</p><ul><li>application.properties（properties格式）</li></ul><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">80</span></span><br></pre></td></tr></tbody></table></figure><ul><li>application.yml（yml格式）</li></ul><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">81</span></span><br></pre></td></tr></tbody></table></figure><ul><li>application.yaml（yaml格式）</li></ul><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">82</span></span><br></pre></td></tr></tbody></table></figure><p>​        仔细看会发现yml格式和yaml格式除了文件名后缀不一样，格式完全一样，是这样的，yml和yaml文件格式就是一模一样的，只是文件后缀不同，所以可以合并成一种格式来看。那对于这三种格式来说，以后用哪一种比较多呢？记清楚，以后基本上都是用yml格式的，本课程后面的所有知识都是基于yml格式来制作的，以后在企业开发过程中用这个格式的机会也最多，一定要重点掌握。</p><p><strong>总结</strong></p><ol><li>SpringBoot提供了3种配置文件的格式<ul><li>properties（传统格式/默认格式）</li><li><strong>yml</strong>（主流格式）</li><li>yaml</li></ul></li></ol><p><strong>思考</strong></p><p>​        现在我们已经知道使用三种格式都可以做配置了，好奇宝宝们就有新的灵魂拷问了，万一我三个都写了，他们三个谁说了算呢？打一架吗？</p><h4 id="配置文件优先级"><a href="#配置文件优先级" class="headerlink" title="配置文件优先级"></a>配置文件优先级</h4><p>​        其实三个文件如果共存的话，谁生效说的就是配置文件加载的优先级别。先说一点，虽然以后这种情况很少出现，但是这个知识还是可以学习一下的。我们就让三个配置文件书写同样的信息，比如都配置端口，然后我们让每个文件配置的端口号都不一样，最后启动程序后看启动端口是多少就知道谁的加载优先级比较高了。</p><ul><li>application.properties（properties格式）</li></ul><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">80</span></span><br></pre></td></tr></tbody></table></figure><ul><li>application.yml（yml格式）</li></ul><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">81</span></span><br></pre></td></tr></tbody></table></figure><ul><li>application.yaml（yaml格式）</li></ul><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">82</span></span><br></pre></td></tr></tbody></table></figure><p>​        启动后发现目前的启动端口为80，把80对应的文件删除掉，然后再启动，现在端口又改成了81。现在我们就已经知道了3个文件的加载优先顺序是什么。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">application.properties  &gt;  application.yml  &gt;  application.yaml</span><br></pre></td></tr></tbody></table></figure><p>​        虽然得到了一个知识结论，但是我们实际开发的时候还是要看最终的效果为准。也就是你要的最终效果是什么自己是明确的，上述结论只能帮助你分析结论产生的原因。这个知识了解一下就行了，因为以后同时写多种配置文件格式的情况实在是较少。</p><p>​        最后我们把配置文件内容给修改一下</p><ul><li>application.properties（properties格式）</li></ul><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">80</span></span><br><span class="line"><span class="attr">spring.main.banner-mode</span>=<span class="string">off</span></span><br></pre></td></tr></tbody></table></figure><ul><li>application.yml（yml格式）</li></ul><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">81</span></span><br><span class="line"><span class="attr">logging:</span> </span><br><span class="line">  <span class="attr">level:</span> </span><br><span class="line">    <span class="attr">root:</span> <span class="string">debug</span></span><br></pre></td></tr></tbody></table></figure><ul><li>application.yaml（yaml格式）</li></ul><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">82</span></span><br></pre></td></tr></tbody></table></figure><p>​        我们发现不仅端口生效了，最终显示80，同时其他两条配置也生效了，看来每个配置文件中的项都会生效，只不过如果多个配置文件中有相同类型的配置会优先级高的文件覆盖优先级的文件中的配置。如果配置项不同的话，所有的配置项都会生效。</p><p><strong>总结</strong></p><ol><li>配置文件间的加载优先级    properties（最高）&gt;  yml  &gt;  yaml（最低）</li><li>不同配置文件中相同配置按照加载优先级相互覆盖，不同配置文件中不同配置全部保留 </li></ol><h4 id="教你一招：自动提示功能消失解决方案"><a href="#教你一招：自动提示功能消失解决方案" class="headerlink" title="教你一招：自动提示功能消失解决方案"></a>教你一招：<strong>自动提示功能消失解决方案</strong></h4><p>​        在做程序的过程中，可能有些小伙伴会基于各种各样的原因导致配置文件中没有提示，这个确实很让人头疼，所以下面给大家说一下如果自动提示功能消失了怎么解决。</p><p>​        先要明确一个核心，就是自动提示功能不是SpringBoot技术给我们提供的，是我们在Idea工具下编程，这个编程工具给我们提供的。明白了这一点后，再来说为什么会出现这种现象。其实这个自动提示功能消失的原因还是蛮多的，如果想解决这个问题，就要知道为什么会消失，大体原因有如下2种：</p><ol><li><p>Idea认为你现在写配置的文件不是个配置文件，所以拒绝给你提供提示功能</p></li><li><p>Idea认定你是合理的配置文件，但是Idea加载不到对应的提示信息</p><p>这里我们主要解决第一个现象，第二种现象到原理篇再讲解。第一种现象的解决方式如下：</p></li></ol><p><strong>步骤①</strong>：打开设置，【Files】→【Project Structure…】</p><p><img src="/2023/07/26/springboot100000/image-20211126160548690.png" alt="image-20211126160548690"></p><p><strong>步骤②</strong>：在弹出窗口中左侧选择【Facets】，右侧选中Spring路径下对应的模块名称，也就是你自动提示功能消失的那个模块</p><p><img src="/2023/07/26/springboot100000/image-20211126160726589.png" alt="image-20211126160726589" style="zoom:67%;"><img src="/2023/07/26/springboot100000/image-20211126160844372.png" alt="image-20211126160844372"></p><p><strong>步骤③</strong>：点击Customize Spring Boot按钮，此时可以看到当前模块对应的配置文件是哪些了。如果没有你想要称为配置文件的文件格式，就有可能无法弹出提示</p><p><img src="/2023/07/26/springboot100000/image-20211126160946448.png" alt="image-20211126160946448"><img src="/2023/07/26/springboot100000/image-20211126160954338.png" alt="image-20211126160954338" style="zoom:80%;"></p><p><strong>步骤④</strong>：选择添加配置文件，然后选中要作为配置文件的具体文件就OK了</p><p><img src="/2023/07/26/springboot100000/image-20211126161145082.png" alt="image-20211126161145082" style="zoom:80%;"><img src="/2023/07/26/springboot100000/image-20211126161156324.png" alt="image-20211126161156324" style="zoom: 67%;"></p><p>​        到这里就做完了，其实就是Idea的一个小功能</p><p><img src="/2023/07/26/springboot100000/image-20211126161301699.png" alt="image-20211126161301699"></p><p><strong>总结</strong></p><ol><li><p>指定SpringBoot配置文件</p><ul><li>Setting → Project Structure → Facets</li><li>选中对应项目/工程</li><li>Customize Spring Boot</li><li>选择配置文件</li></ul></li></ol><h3 id="JC-2-3-yaml文件"><a href="#JC-2-3-yaml文件" class="headerlink" title="JC-2-3.yaml文件"></a>JC-2-3.yaml文件</h3><p>​        SpringBoot的配置以后主要使用yml结尾的这种文件格式，并且在书写时可以通过提示的形式加载正确的格式。但是这种文件还是有严格的书写格式要求的。下面就来说一下具体的语法格式。</p><p>​        YAML（YAML Ain’t Markup Language），一种数据序列化格式。具有容易阅读、容易与脚本语言交互、以数据为核心，重数据轻格式的特点。常见的文件扩展名有两种：</p><ul><li><p>.yml格式（主流）</p></li><li><p>.yaml格式</p><p> 具体的语法格式要求如下：</p></li></ul><ol><li>大小写敏感</li><li>属性层级关系使用多行描述，<strong>每行结尾使用冒号结束</strong></li><li>使用缩进表示层级关系，同层级左侧对齐，只允许使用空格（不允许使用Tab键）</li><li>属性值前面添加空格（属性名与属性值之间使用冒号+空格作为分隔）</li><li>#号 表示注释</li></ol><p>​        上述规则不要死记硬背，按照书写习惯慢慢适应，并且在Idea下由于具有提示功能，慢慢适应着写格式就行了。核心的一条规则要记住，<font color="#ff0000"><b>数据前面要加空格与冒号隔开</b></font>。</p><p>​        下面列出常见的数据书写格式，熟悉一下</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">boolean:</span> <span class="literal">TRUE</span>  <span class="comment">#TRUE,true,True,FALSE,false，False均可</span></span><br><span class="line"><span class="attr">float:</span> <span class="number">3.14</span>    <span class="comment">#6.8523015e+5  #支持科学计数法</span></span><br><span class="line"><span class="attr">int:</span> <span class="number">123</span>       <span class="comment">#0b1010_0111_0100_1010_1110    #支持二进制、八进制、十六进制</span></span><br><span class="line"><span class="attr">null:</span> <span class="string">~</span>        <span class="comment">#使用~表示null</span></span><br><span class="line"><span class="attr">string:</span> <span class="string">HelloWorld</span>      <span class="comment">#字符串可以直接书写</span></span><br><span class="line"><span class="attr">string2:</span> <span class="string">"Hello World"</span>  <span class="comment">#可以使用双引号包裹特殊字符</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2018-02-17</span>        <span class="comment">#日期必须使用yyyy-MM-dd格式</span></span><br><span class="line"><span class="attr">datetime:</span> <span class="number">2018-02-17T15:02:31+08:00</span>  <span class="comment">#时间和日期之间使用T连接，最后使用+代表时区</span></span><br></pre></td></tr></tbody></table></figure><p>​        此外，yaml格式中也可以表示数组，在属性名书写位置的下方使用减号作为数据开始符号，每行书写一个数据，减号与数据间空格分隔。</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">subject:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">Java</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">前端</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">大数据</span></span><br><span class="line"><span class="attr">enterprise:</span></span><br><span class="line"><span class="attr">name:</span> <span class="string">itcast</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">16</span></span><br><span class="line">    <span class="attr">subject:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">Java</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">前端</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">大数据</span></span><br><span class="line"><span class="attr">likes:</span> [<span class="string">王者荣耀</span>,<span class="string">刺激战场</span>]<span class="comment">#数组书写缩略格式</span></span><br><span class="line"><span class="attr">users:</span> <span class="comment">#对象数组格式一</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Tom</span></span><br><span class="line">   <span class="attr">age:</span> <span class="number">4</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Jerry</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">5</span></span><br><span class="line"><span class="attr">users:</span> <span class="comment">#对象数组格式二</span></span><br><span class="line">  <span class="bullet">-</span>  </span><br><span class="line">    <span class="attr">name:</span> <span class="string">Tom</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">4</span></span><br><span class="line">  <span class="bullet">-</span>   </span><br><span class="line">    <span class="attr">name:</span> <span class="string">Jerry</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">5</span>    </span><br><span class="line"><span class="attr">users2:</span> [ { <span class="string">name:Tom</span> , <span class="string">age:4</span> } , { <span class="string">name:Jerry</span> , <span class="string">age:5</span> } ]<span class="comment">#对象数组缩略格式</span></span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>yaml语法规则<ul><li>大小写敏感</li><li>属性层级关系使用多行描述，每行结尾使用冒号结束</li><li>使用缩进表示层级关系，同层级左侧对齐，只允许使用空格（不允许使用Tab键）</li><li>属性值前面添加空格（属性名与属性值之间使用冒号+空格作为分隔）</li><li>#号 表示注释</li></ul></li><li>注意属性名冒号后面与数据之间有一个<strong>空格</strong></li><li>字面值、对象数据格式、数组数据格式</li></ol><p><strong>思考</strong></p><p>​        现在我们已经知道了yaml具有严格的数据格式要求，并且已经可以正确的书写yaml文件了，那这些文件书写后其实是在定义一些数据。这些数据是给谁用的呢？大部分是SpringBoot框架内部使用，但是如果我们想配置一些数据自己使用，能不能用呢？答案是可以的，那如何读取yaml文件中的数据呢？咱们下一节再说。</p><h3 id="JC-2-4-yaml数据读取"><a href="#JC-2-4-yaml数据读取" class="headerlink" title="JC-2-4.yaml数据读取"></a>JC-2-4.yaml数据读取</h3><p>​        对于yaml文件中的数据，其实你就可以想象成这就是一个小型的数据库，里面保存有若干数据，每个数据都有一个独立的名字，如果你想读取里面的数据，肯定是支持的，下面就介绍3种读取数据的方式。</p><h4 id="读取单一数据"><a href="#读取单一数据" class="headerlink" title="读取单一数据"></a>读取单一数据</h4><p>​        yaml中保存的单个数据，可以使用Spring中的注解@Value读取单个数据，属性名引用方式：<font color="#ff0000"><b>${一级属性名.二级属性名……}</b></font></p><img src="/2023/07/26/springboot100000/image-20211126180433356.png" alt="image-20211126180433356" style="zoom:80%;"><p>​        记得使用@Value注解时，要将该注解写在某一个指定的Spring管控的bean的属性名上方，这样当bean进行初始化时候就可以读取到对应的单一数据了。</p><p><strong>总结</strong></p><ol><li>使用@Value配合SpEL读取单个数据</li><li>如果数据存在多层级，依次书写层级名称即可</li></ol><h4 id="读取全部数据"><a href="#读取全部数据" class="headerlink" title="读取全部数据"></a>读取全部数据</h4><p>​        读取单一数据可以解决读取数据的问题，但是如果定义的数据量过大，这么一个一个书写肯定会累死人的，SpringBoot提供了一个对象，能够把所有的数据都封装到这一个对象中，这个对象叫做Environment，使用自动装配注解可以将所有的yaml数据封装到这个对象中</p><img src="/2023/07/26/springboot100000/image-20211126180738569.png" alt="image-20211126180738569" style="zoom:80%;"><p>​        数据封装到了Environment对象中，获取属性时，通过Environment的接口操作进行，具体方法是getProperties（String），参数填写属性名即可</p><p><strong>总结</strong></p><ol><li>使用Environment对象封装全部配置信息</li><li>使用@Autowired自动装配数据到Environment对象中</li></ol><h4 id="读取对象数据"><a href="#读取对象数据" class="headerlink" title="读取对象数据"></a>读取对象数据</h4><p>​        单一数据读取书写比较繁琐，全数据读取封装的太厉害了，每次拿数据还要一个一个的getProperties（）,总之用起来都不是很舒服。由于Java是一个面向对象的语言，很多情况下，我们会将一组数据封装成一个对象。SpringBoot也提供了可以将一组yaml对象数据封装一个Java对象的操作</p><p>​        首先定义一个对象，并将该对象纳入Spring管控的范围，也就是定义成一个bean，然后使用注解@ConfigurationProperties指定该对象加载哪一组yaml中配置的信息。</p><img src="/2023/07/26/springboot100000/image-20211126181126382.png" alt="image-20211126181126382" style="zoom:80%;"><p>​        这个@ConfigurationProperties必须告诉他加载的数据前缀是什么，这样指定前缀下的所有属性就封装到这个对象中。记得数据属性名要与对象的变量名一一对应啊，不然没法封装。其实以后如果你要定义一组数据自己使用，就可以先写一个对象，然后定义好属性，下面到配置中根据这个格式书写即可。</p><p>​    <img src="/2023/07/26/springboot100000/image-20211126181423432.png" alt="image-20211126181423432" style="zoom:80%;"></p><p><font color="#f0f"><b>温馨提示</b></font></p><p>​        细心的小伙伴会发现一个问题，自定义的这种数据在yaml文件中书写时没有弹出提示，咱们到原理篇再揭秘如何弹出提示。</p><p><strong>总结</strong></p><ol><li>使用@ConfigurationProperties注解绑定配置信息到封装类中</li><li>封装类需要定义为Spring管理的bean，否则无法进行属性注入</li></ol><h4 id="yaml文件中的数据引用"><a href="#yaml文件中的数据引用" class="headerlink" title="yaml文件中的数据引用"></a>yaml文件中的数据引用</h4><p>​        如果你在书写yaml数据时，经常出现如下现象，比如很多个文件都具有相同的目录前缀</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">center:</span></span><br><span class="line"><span class="attr">dataDir:</span> <span class="string">/usr/local/fire/data</span></span><br><span class="line">    <span class="attr">tmpDir:</span> <span class="string">/usr/local/fire/tmp</span></span><br><span class="line">    <span class="attr">logDir:</span> <span class="string">/usr/local/fire/log</span></span><br><span class="line">    <span class="attr">msgDir:</span> <span class="string">/usr/local/fire/msgDir</span></span><br></pre></td></tr></tbody></table></figure><p>​        或者</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">center:</span></span><br><span class="line"><span class="attr">dataDir:</span> <span class="string">D:/usr/local/fire/data</span></span><br><span class="line">    <span class="attr">tmpDir:</span> <span class="string">D:/usr/local/fire/tmp</span></span><br><span class="line">    <span class="attr">logDir:</span> <span class="string">D:/usr/local/fire/log</span></span><br><span class="line">    <span class="attr">msgDir:</span> <span class="string">D:/usr/local/fire/msgDir</span></span><br></pre></td></tr></tbody></table></figure><p>​        这个时候你可以使用引用格式来定义数据，其实就是搞了个变量名，然后引用变量了，格式如下：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baseDir:</span> <span class="string">/usr/local/fire</span></span><br><span class="line"><span class="attr">center:</span></span><br><span class="line">    <span class="attr">dataDir:</span> <span class="string">${baseDir}/data</span></span><br><span class="line">    <span class="attr">tmpDir:</span> <span class="string">${baseDir}/tmp</span></span><br><span class="line">    <span class="attr">logDir:</span> <span class="string">${baseDir}/log</span></span><br><span class="line">    <span class="attr">msgDir:</span> <span class="string">${baseDir}/msgDir</span></span><br></pre></td></tr></tbody></table></figure><p>​    还有一个注意事项，在书写字符串时，如果需要使用转义字符，需要将数据字符串使用双引号包裹起来</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">lesson:</span> <span class="string">"Spring\tboot\nlesson"</span></span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>在配置文件中可以使用${属性名}方式引用属性值</li><li>如果属性中出现特殊字符，可以使用双引号包裹起来作为字符解析</li></ol><p>​        到这里有关yaml文件的基础使用就先告一段落，实用篇中再继续研究更深入的内容。</p><h2 id="JC-3-基于SpringBoot实现SSMP整合"><a href="#JC-3-基于SpringBoot实现SSMP整合" class="headerlink" title="JC-3.基于SpringBoot实现SSMP整合"></a>JC-3.基于SpringBoot实现SSMP整合</h2><p>​        重头戏来了，SpringBoot之所以好用，就是它能方便快捷的整合其他技术，这一部分咱们就来聊聊一些技术的整合方式，通过这一章的学习，大家能够感受到SpringBoot到底有多酷炫。这一章咱们学习如下技术的整合方式</p><ul><li><p>整合JUnit</p></li><li><p>整合MyBatis</p></li><li><p>整合MyBatis-Plus</p></li><li><p>整合Druid</p><p> 上面这些技术都整合完毕后，我们做一个小案例，也算是学有所用吧。涉及的技术比较多，综合运用一下。</p></li></ul><h3 id="JC-3-1-整合JUnit"><a href="#JC-3-1-整合JUnit" class="headerlink" title="JC-3-1.整合JUnit"></a>JC-3-1.整合JUnit</h3><p>​        SpringBoot技术的定位用于简化开发，再具体点是简化Spring程序的开发。所以在整合任意技术的时候，如果你想直观感触到简化的效果，你必须先知道使用非SpringBoot技术时对应的整合是如何做的，然后再看基于SpringBoot的整合是如何做的，才能比对出来简化在了哪里。</p><p>​        我们先来看一下不使用SpringBoot技术时，Spring整合JUnit的制作方式</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//加载spring整合junit专用的类运行器</span></span><br><span class="line"><span class="meta">@RunWith(SpringJUnit4ClassRunner.class)</span></span><br><span class="line"><span class="comment">//指定对应的配置信息</span></span><br><span class="line"><span class="meta">@ContextConfiguration(classes = SpringConfig.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServiceTestCase</span> {</span><br><span class="line">    <span class="comment">//注入你要测试的对象</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AccountService accountService;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testGetById</span><span class="params">()</span>{</span><br><span class="line">        <span class="comment">//执行要测试的对象对应的方法</span></span><br><span class="line">        System.out.println(accountService.findById(<span class="number">2</span>));</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>​        其中核心代码是前两个注解，第一个注解@RunWith是设置Spring专用的测试类运行器，简单说就是Spring程序执行程序有自己的一套独立的运行程序的方式，不能使用JUnit提供的类运行方式了，必须指定一下，但是格式是固定的，琢磨一下，<font color="#ff0000"><b>每次都指定一样的东西，这个东西写起来没有技术含量啊</b></font>，第二个注解@ContextConfiguration是用来设置Spring核心配置文件或配置类的，简单说就是加载Spring的环境你要告诉Spring具体的环境配置是在哪里写的，虽然每次加载的文件都有可能不同，但是仔细想想，如果文件名是固定的，这个貌似也是一个固定格式。既然<font color="#ff0000"><b>有可能是固定格式，那就有可能每次都写一样的东西，也是一个没有技术含量的内容书写</b></font></p><p>​        SpringBoot就抓住上述两条没有技术含量的内容书写进行开发简化，能走默认值的走默认值，能不写的就不写，具体格式如下</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot04JunitApplicationTests</span> {</span><br><span class="line">    <span class="comment">//注入你要测试的对象</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> {</span><br><span class="line">        <span class="comment">//执行要测试的对象对应的方法</span></span><br><span class="line">        bookDao.save();</span><br><span class="line">        System.out.println(<span class="string">"two..."</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        看看这次简化成什么样了，一个注解就搞定了，而且还没有参数，再体会SpringBoot整合其他技术的优势在哪里，就两个字——<font color="#ff0000"><b>简化</b></font>。使用一个注解@SpringBootTest替换了前面两个注解。至于内部是怎么回事？和之前一样，只不过都走默认值。</p><p>​        这个时候有人就问了，你加载的配置类或者配置文件是哪一个？就是我们前面启动程序使用的引导类。如果想手工指定引导类有两种方式，第一种方式使用属性的形式进行，在注解@SpringBootTest中添加classes属性指定配置类</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest(classes = Springboot04JunitApplication.class)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot04JunitApplicationTests</span> {</span><br><span class="line">    <span class="comment">//注入你要测试的对象</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> {</span><br><span class="line">        <span class="comment">//执行要测试的对象对应的方法</span></span><br><span class="line">        bookDao.save();</span><br><span class="line">        System.out.println(<span class="string">"two..."</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        第二种方式回归原始配置方式，仍然使用@ContextConfiguration注解进行，效果是一样的</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@ContextConfiguration(classes = Springboot04JunitApplication.class)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot04JunitApplicationTests</span> {</span><br><span class="line">    <span class="comment">//注入你要测试的对象</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> {</span><br><span class="line">        <span class="comment">//执行要测试的对象对应的方法</span></span><br><span class="line">        bookDao.save();</span><br><span class="line">        System.out.println(<span class="string">"two..."</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><font color="#f0f"><b>温馨提示</b></font></p><p>​        使用SpringBoot整合JUnit需要保障导入test对应的starter，由于初始化项目时此项是默认导入的，所以此处没有提及，其实和之前学习的内容一样，用什么技术导入对应的starter即可。</p><p><strong>总结</strong></p><ol><li>导入测试对应的starter</li><li>测试类使用@SpringBootTest修饰</li><li>使用自动装配的形式添加要测试的对象</li><li>测试类如果存在于引导类所在包或子包中无需指定引导类</li><li>测试类如果不存在于引导类所在的包或子包中需要通过classes属性指定引导类</li></ol><h3 id="JC-3-2-整合MyBatis"><a href="#JC-3-2-整合MyBatis" class="headerlink" title="JC-3-2.整合MyBatis"></a>JC-3-2.整合MyBatis</h3><p>​        整合完JUnit下面再来说一下整合MyBatis，这个技术是大部分公司都要使用的技术，务必掌握。如果对Spring整合MyBatis不熟悉的小伙伴好好复习一下，下面列举出原始整合的全部内容，以配置类的形式为例进行</p><ul><li><p>导入坐标，MyBatis坐标不能少，Spring整合MyBatis还有自己专用的坐标，此外Spring进行数据库操作的jdbc坐标是必须的，剩下还有mysql驱动坐标，本例中使用了Druid数据源，这个倒是可以不要</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--1.导入mybatis与spring整合的jar包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--导入spring操作数据库必选的包--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.2.10.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>Spring核心配置</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ComponentScan("com.itheima")</span></span><br><span class="line"><span class="meta">@PropertySource("jdbc.properties")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>MyBatis要交给Spring接管的bean</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义mybatis专用的配置类</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisConfig</span> {</span><br><span class="line"><span class="comment">//    定义创建SqlSessionFactory对应的bean</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> SqlSessionFactoryBean <span class="title function_">sqlSessionFactory</span><span class="params">(DataSource dataSource)</span>{</span><br><span class="line">        <span class="comment">//SqlSessionFactoryBean是由mybatis-spring包提供的，专用于整合用的对象</span></span><br><span class="line">        <span class="type">SqlSessionFactoryBean</span> <span class="variable">sfb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBean</span>();</span><br><span class="line">        <span class="comment">//设置数据源替代原始配置中的environments的配置</span></span><br><span class="line">        sfb.setDataSource(dataSource);</span><br><span class="line">        <span class="comment">//设置类型别名替代原始配置中的typeAliases的配置</span></span><br><span class="line">        sfb.setTypeAliasesPackage(<span class="string">"com.itheima.domain"</span>);</span><br><span class="line">        <span class="keyword">return</span> sfb;</span><br><span class="line">    }</span><br><span class="line"><span class="comment">//    定义加载所有的映射配置</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MapperScannerConfigurer <span class="title function_">mapperScannerConfigurer</span><span class="params">()</span>{</span><br><span class="line">        <span class="type">MapperScannerConfigurer</span> <span class="variable">msc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MapperScannerConfigurer</span>();</span><br><span class="line">        msc.setBasePackage(<span class="string">"com.itheima.dao"</span>);</span><br><span class="line">        <span class="keyword">return</span> msc;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>数据源对应的bean，此处使用Druid数据源</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JdbcConfig</span> {</span><br><span class="line">    <span class="meta">@Value("${jdbc.driver}")</span></span><br><span class="line">    <span class="keyword">private</span> String driver;</span><br><span class="line">    <span class="meta">@Value("${jdbc.url}")</span></span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="meta">@Value("${jdbc.username}")</span></span><br><span class="line">    <span class="keyword">private</span> String userName;</span><br><span class="line">    <span class="meta">@Value("${jdbc.password}")</span></span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean("dataSource")</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">()</span>{</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        ds.setDriverClassName(driver);</span><br><span class="line">        ds.setUrl(url);</span><br><span class="line">        ds.setUsername(userName);</span><br><span class="line">        ds.setPassword(password);</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>数据库连接信息（properties格式）</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jdbc.driver</span>=<span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line"><span class="attr">jdbc.url</span>=<span class="string">jdbc:mysql://localhost:3306/spring_db?useSSL=false</span></span><br><span class="line"><span class="attr">jdbc.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">jdbc.password</span>=<span class="string">root</span></span><br></pre></td></tr></tbody></table></figure><p>上述格式基本上是最简格式了，要写的东西还真不少。下面看看SpringBoot整合MyBaits格式</p></li></ul><p><strong>步骤①</strong>：创建模块</p><p><img src="/2023/07/26/springboot100000/image-20211129092156020.png" alt="image-20211129092156020"></p><p><strong>步骤②</strong>：勾选要使用的技术，MyBatis，由于要操作数据库，还要勾选对应数据库</p><p><img src="/2023/07/26/springboot100000/image-20211129092210993.png" alt="image-20211129092210993"></p><p>​    或者手工导入对应技术的starter，和对应数据库的坐标</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--1.导入对应的starter--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤③</strong>：配置数据源相关信息，没有这个信息你连接哪个数据库都不知道</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#2.配置相关信息</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssm_db</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br></pre></td></tr></tbody></table></figure><p>​        结束了，就这么多，没了。有人就很纳闷，这就结束了？对，这就结束了，SpringBoot把配置中所有可能出现的通用配置都简化了。下面写一个MyBatis程序运行需要的Dao（或者Mapper）就可以运行了</p><p><strong>实体类</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> {</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String type;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>映射接口（Dao）</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> {</span><br><span class="line">    <span class="meta">@Select("select * from tbl_book where id = #{id}")</span></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">getById</span><span class="params">(Integer id)</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>测试类</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot05MybatisApplicationTests</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(bookDao.getById(<span class="number">1</span>));</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        完美，开发从此变的就这么简单。再体会一下SpringBoot如何进行第三方技术整合的，是不是很优秀？具体内部的原理到原理篇再展开讲解</p><p>​        <font color="#ff0000"><b>注意</b></font>：当前使用的SpringBoot版本是2.5.4，对应的坐标设置中Mysql驱动使用的是8x版本。使用SpringBoot2.4.3（不含）之前版本会出现一个小BUG，就是MySQL驱动升级到8以后要求强制配置时区，如果不设置会出问题。解决方案很简单，驱动url上面添加上对应设置就行了</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#2.配置相关信息</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br></pre></td></tr></tbody></table></figure><p>​        这里设置的UTC是全球标准时间，你也可以理解为是英国时间，中国处在东八区，需要在这个基础上加上8小时，这样才能和中国地区的时间对应的，也可以修改配置为Asia/Shanghai，同样可以解决这个问题。</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#2.配置相关信息</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br></pre></td></tr></tbody></table></figure><p>​        如果不想每次都设置这个东西，也可以去修改mysql中的配置文件mysql.ini，在mysqld项中添加default-time-zone=+8:00也可以解决这个问题。其实方式方法很多，这里就说这么多吧。</p><p>​        此外在运行程序时还会给出一个提示，说数据库驱动过时的警告，根据提示修改配置即可，弃用<strong>com.mysql.jdbc.Driver</strong>，换用<font color="#ff0000"><b>com.mysql.cj.jdbc.Driver</b></font>。前面的例子中已经更换了驱动了，在此说明一下。</p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Loading class `com.mysql.jdbc.Driver'. This is deprecated. The new driver class is `com.mysql.cj.jdbc.Driver'. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.</span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li><p>整合操作需要勾选MyBatis技术，也就是导入MyBatis对应的starter</p></li><li><p>数据库连接相关信息转换成配置</p></li><li><p>数据库SQL映射需要添加@Mapper被容器识别到</p></li><li><p>MySQL 8.X驱动强制要求设置时区</p><ul><li>修改url，添加serverTimezone设定</li><li>修改MySQL数据库配置</li></ul></li><li><p>驱动类过时，提醒更换为com.mysql.cj.jdbc.Driver</p></li></ol><h3 id="JC-3-3-整合MyBatis-Plus"><a href="#JC-3-3-整合MyBatis-Plus" class="headerlink" title="JC-3-3.整合MyBatis-Plus"></a>JC-3-3.整合MyBatis-Plus</h3><p>​        做完了两种技术的整合了，各位小伙伴要学会总结，我们做这个整合究竟哪些是核心？总结下来就两句话</p><ul><li><p>导入对应技术的starter坐标</p></li><li><p>根据对应技术的要求做配置</p><p>虽然看起来有点虚，但是确实是这个理儿，下面趁热打铁，再换一个技术，看看是不是上面这两步。</p></li></ul><p>​        接下来在MyBatis的基础上再升级一下，整合MyBaitsPlus（简称MP），国人开发的技术，符合中国人开发习惯，谁用谁知道。来吧，一起做整合</p><p><strong>步骤①</strong>：导入对应的starter</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        关于这个坐标，此处要说明一点，之前我们看的starter都是spring-boot-starter-？？？，也就是说都是下面的格式</p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Spring-boot-start-***</span><br></pre></td></tr></tbody></table></figure><p>​    而MyBatis与MyBatisPlus这两个坐标的名字书写比较特殊，是第三方技术名称在前，boot和starter在后。此处简单提一下命名规范，后期原理篇会再详细讲解</p><table><thead><tr><th>starter所属</th><th>命名规则</th><th>示例</th></tr></thead><tbody><tr><td>官方提供</td><td>spring-boot-starter-技术名称</td><td>spring-boot-starter-web <br>spring-boot-starter-test</td></tr><tr><td>第三方提供</td><td>第三方技术名称-spring-boot-starter</td><td>mybatis-spring-boot-starter<br>druid-spring-boot-starter</td></tr><tr><td>第三方提供</td><td>第三方技术名称-boot-starter（第三方技术名称过长，简化命名）</td><td>mybatis-plus-boot-starter</td></tr></tbody></table><p><font color="#f0f"><b>温馨提示</b></font></p><p>​        有些小伙伴在创建项目时想通过勾选的形式找到这个名字，别翻了，没有。截止目前，SpringBoot官网还未收录此坐标，而我们Idea创建模块时读取的是SpringBoot官网的Spring Initializr，所以也没有。如果换用阿里云的url创建项目可以找到对应的坐标。</p><p><strong>步骤②</strong>：配置数据源相关信息</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#2.配置相关信息</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssm_db</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br></pre></td></tr></tbody></table></figure><p>​    没了，就这么多，剩下的就是写MyBaitsPlus的程序了</p><p><strong>映射接口（Dao）</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;Book&gt; {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​    核心在于Dao接口继承了一个BaseMapper的接口，这个接口中帮助开发者预定了若干个常用的API接口，简化了通用API接口的开发工作。</p><img src="/2023/07/26/springboot100000/image-20211129100313919.png" alt="image-20211129100313919" style="zoom:80%;"><p>​    下面就可以写一个测试类进行测试了，此处省略。</p><p><font color="#f0f"><b>温馨提示</b></font></p><p>​        目前数据库的表名定义规则是tbl_模块名称，为了能和实体类相对应，需要做一个配置，相关知识各位小伙伴可以到MyBatisPlus课程中去学习，此处仅给出解决方案。配置application.yml文件，添加如下配置即可，设置所有表名的通用前缀名</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">tbl_</span><span class="comment">#设置所有表的通用前缀名称为tbl_</span></span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>手工添加MyBatis-Plus对应的starter</li><li>数据层接口使用BaseMapper简化开发</li><li>需要使用的第三方技术无法通过勾选确定时，需要手工添加坐标</li></ol><h3 id="JC-3-4-整合Druid"><a href="#JC-3-4-整合Druid" class="headerlink" title="JC-3-4.整合Druid"></a>JC-3-4.整合Druid</h3><p>​        使用SpringBoot整合了3个技术了，发现套路基本相同，导入对应的starter，然后做配置，各位小伙伴需要一直强化这套思想。下面再整合一个技术，继续深入强化此思想。</p><p>​        前面整合MyBatis和MyBatisPlus的时候，使用的数据源对象都是SpringBoot默认的数据源对象，下面我们手工控制一下，自己指定了一个数据源对象，Druid。</p><p>​        在没有指定数据源时，我们的配置如下：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#2.配置相关信息</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=Asia/Shanghai</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br></pre></td></tr></tbody></table></figure><p>​        此时虽然没有指定数据源，但是根据SpringBoot的德行，肯定帮我们选了一个它认为最好的数据源对象，这就是HiKari。通过启动日志可以查看到对应的身影。</p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2021-11-29 09:39:15.202  INFO 12260 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...</span><br><span class="line">2021-11-29 09:39:15.208  WARN 12260 --- [           main] com.zaxxer.hikari.util.DriverDataSource  : Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.</span><br><span class="line">2021-11-29 09:39:15.551  INFO 12260 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.</span><br></pre></td></tr></tbody></table></figure><p>​        上述信息中每一行都有HiKari的身影，如果需要更换数据源，其实只需要两步即可。</p><ol><li><p>导入对应的技术坐标</p></li><li><p>配置使用指定的数据源类型</p><p> 下面就切换一下数据源对象</p></li></ol><p><strong>步骤①</strong>：导入对应的坐标（注意，是坐标，此处不是starter）</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：修改配置，在数据源配置中有一个type属性，专用于指定数据源类型</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br></pre></td></tr></tbody></table></figure><p>​        这里其实要提出一个问题的，目前的数据源配置格式是一个通用格式，不管你换什么数据源都可以用这种形式进行配置。但是新的问题又来了，如果对数据源进行个性化的配置，例如配置数据源对应的连接数量，这个时候就有新的问题了。每个数据源技术对应的配置名称都一样吗？肯定不是啊，各个厂商不可能提前商量好都写一样的名字啊，怎么办？就要使用专用的配置格式了。这个时候上面这种通用格式就不能使用了，怎么办？还能怎么办？按照SpringBoot整合其他技术的通用规则来套啊，导入对应的starter，进行相应的配置即可。</p><p><strong>步骤①</strong>：导入对应的starter</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：修改配置</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">root</span></span><br></pre></td></tr></tbody></table></figure><p>​        注意观察，配置项中，在datasource下面并不是直接配置url这些属性的，而是先配置了一个druid节点，然后再配置的url这些东西。言外之意，url这个属性是druid下面的属性，那你能想到什么？除了这4个常规配置外，还有druid专用的其他配置。通过提示功能可以打开druid相关的配置查阅</p><img src="/2023/07/26/springboot100000/image-20211129112610729.png" alt="image-20211129112610729" style="zoom:80%;"><p>​    与druid相关的配置超过200条以上，这就告诉你，如果想做druid相关的配置，使用这种格式就可以了，这里就不展开描述了，太多了。</p><p>​    这是我们做的第4个技术的整合方案，还是那两句话：<font color="#ff0000"><b>导入对应starter，使用对应配置</b></font>。没了，SpringBoot整合其他技术就这么简单粗暴。</p><p><strong>总结</strong></p><ol><li>整合Druid需要导入Druid对应的starter</li><li>根据Druid提供的配置方式进行配置</li><li>整合第三方技术通用方式<ul><li>导入对应的starter</li><li>根据提供的配置格式，配置非默认值对应的配置项</li></ul></li></ol><h3 id="JC-3-5-SSMP整合综合案例"><a href="#JC-3-5-SSMP整合综合案例" class="headerlink" title="JC-3-5.SSMP整合综合案例"></a>JC-3-5.SSMP整合综合案例</h3><p>​        SpringBoot能够整合的技术太多太多了，对于初学者来说慢慢来，一点点掌握。前面咱们做了4个整合了，下面就通过一个稍微综合一点的案例，将所有知识贯穿起来，同时做一个小功能，体会一下。不过有言在先，这个案例制作的时候，你可能会有这种感觉，说好的SpringBoot整合其他技术的案例，为什么感觉SpringBoot整合其他技术的身影不多呢？因为这东西书写太简单了，简单到瞬间写完，大量的时间做的不是这些整合工作。</p><p>​        先看一下这个案例的最终效果</p><p><strong>主页面</strong></p><p><img src="/2023/07/26/springboot100000/image-20211129113447844.png" alt="image-20211129113447844"></p><p><strong>添加</strong></p><p><img src="/2023/07/26/springboot100000/image-20211129113522459.png" alt="image-20211129113522459"></p><p><strong>删除</strong></p><p><img src="/2023/07/26/springboot100000/image-20211129113550829.png" alt="image-20211129113550829"></p><p><strong>修改</strong></p><p><img src="/2023/07/26/springboot100000/image-20211129113610966.png" alt="image-20211129113610966"></p><p><strong>分页</strong></p><p><img src="/2023/07/26/springboot100000/image-20211129113628969.png" alt="image-20211129113628969"></p><p><strong>条件查询</strong></p><p><img src="/2023/07/26/springboot100000/image-20211129113650369.png" alt="image-20211129113650369"></p><p>​    整体案例中需要采用的技术如下，先了解一下，做到哪一个说哪一个</p><ol><li>实体类开发————使用Lombok快速制作实体类</li><li>Dao开发————整合MyBatisPlus，制作数据层测试</li><li>Service开发————基于MyBatisPlus进行增量开发，制作业务层测试类</li><li>Controller开发————基于Restful开发，使用PostMan测试接口功能</li><li>Controller开发————前后端开发协议制作</li><li>页面开发————基于VUE+ElementUI制作，前后端联调，页面数据处理，页面消息处理<ul><li>列表</li><li>新增</li><li>修改</li><li>删除</li><li>分页</li><li>查询</li></ul></li><li>项目异常处理</li><li>按条件查询————页面功能调整、Controller修正功能、Service修正功能</li></ol><p>​        可以看的出来，东西还是很多的，希望通过这个案例，各位小伙伴能够完成基础开发的技能训练。整体开发过程采用做一层测一层的形式进行，过程完整，战线较长，希望各位能跟紧进度，完成这个小案例的制作。</p><h4 id="0-模块创建"><a href="#0-模块创建" class="headerlink" title="0.模块创建"></a>0.模块创建</h4><p>​        对于这个案例如果按照企业开发的形式进行应该制作后台微服务，前后端分离的开发。</p><img src="/2023/07/26/springboot100000/image-20211129114306062.png" alt="image-20211129114306062" style="zoom:80%;"><p>​        我知道这个对初学的小伙伴要求太高了，咱们简化一下。后台做单体服务器，前端不使用前后端分离的制作了。</p><img src="/2023/07/26/springboot100000/image-20211129114328967.png" alt="image-20211129114328967" style="zoom:80%;"><p>​        一个服务器即充当后台服务调用，又负责前端页面展示，降低学习的门槛。</p><p>​        下面我们创建一个新的模块，加载要使用的技术对应的starter，修改配置文件格式为yml格式，并把web访问端口先设置成80。</p><p><strong>pom.xml</strong></p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>application.yml</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br></pre></td></tr></tbody></table></figure><h4 id="1-实体类开发"><a href="#1-实体类开发" class="headerlink" title="1.实体类开发"></a>1.实体类开发</h4><p>​        本案例对应的模块表结构如下：</p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">-- ----------------------------</span><br><span class="line">-- Table structure for tbl<span class="built_in">_</span>book</span><br><span class="line">-- ----------------------------</span><br><span class="line">DROP TABLE IF EXISTS `tbl<span class="built_in">_</span>book`;</span><br><span class="line">CREATE TABLE `tbl<span class="built_in">_</span>book`  (</span><br><span class="line">  `id` int(11) NOT NULL AUTO<span class="built_in">_</span>INCREMENT,</span><br><span class="line">  `type` varchar(20) CHARACTER SET utf8 COLLATE utf8<span class="built_in">_</span>general<span class="built_in">_</span>ci NULL DEFAULT NULL,</span><br><span class="line">  `name` varchar(50) CHARACTER SET utf8 COLLATE utf8<span class="built_in">_</span>general<span class="built_in">_</span>ci NULL DEFAULT NULL,</span><br><span class="line">  `description` varchar(255) CHARACTER SET utf8 COLLATE utf8<span class="built_in">_</span>general<span class="built_in">_</span>ci NULL DEFAULT NULL,</span><br><span class="line">  PRIMARY KEY (`id`) USING BTREE</span><br><span class="line">) ENGINE = InnoDB AUTO<span class="built_in">_</span>INCREMENT = 51 CHARACTER SET = utf8 COLLATE = utf8<span class="built_in">_</span>general<span class="built_in">_</span>ci ROW<span class="built_in">_</span>FORMAT = Dynamic;</span><br><span class="line"></span><br><span class="line">-- ----------------------------</span><br><span class="line">-- Records of tbl<span class="built_in">_</span>book</span><br><span class="line">-- ----------------------------</span><br><span class="line">INSERT INTO `tbl<span class="built_in">_</span>book` VALUES (1, '计算机理论', 'Spring实战 第5版', 'Spring入门经典教程，深入理解Spring原理技术内幕');</span><br><span class="line">INSERT INTO `tbl<span class="built_in">_</span>book` VALUES (2, '计算机理论', 'Spring 5核心原理与30个类手写实战', '十年沉淀之作，手写Spring精华思想');</span><br><span class="line">INSERT INTO `tbl<span class="built_in">_</span>book` VALUES (3, '计算机理论', 'Spring 5 设计模式', '深入Spring源码剖析Spring源码中蕴含的10大设计模式');</span><br><span class="line">INSERT INTO `tbl<span class="built_in">_</span>book` VALUES (4, '计算机理论', 'Spring MVC+MyBatis开发从入门到项目实战', '全方位解析面向Web应用的轻量级框架，带你成为Spring MVC开发高手');</span><br><span class="line">INSERT INTO `tbl<span class="built_in">_</span>book` VALUES (5, '计算机理论', '轻量级Java Web企业应用实战', '源码级剖析Spring框架，适合已掌握Java基础的读者');</span><br><span class="line">INSERT INTO `tbl<span class="built_in">_</span>book` VALUES (6, '计算机理论', 'Java核心技术 卷I 基础知识（原书第11版）', 'Core Java 第11版，Jolt大奖获奖作品，针对Java SE9、10、11全面更新');</span><br><span class="line">INSERT INTO `tbl<span class="built_in">_</span>book` VALUES (7, '计算机理论', '深入理解Java虚拟机', '5个维度全面剖析JVM，大厂面试知识点全覆盖');</span><br><span class="line">INSERT INTO `tbl<span class="built_in">_</span>book` VALUES (8, '计算机理论', 'Java编程思想（第4版）', 'Java学习必读经典,殿堂级著作！赢得了全球程序员的广泛赞誉');</span><br><span class="line">INSERT INTO `tbl<span class="built_in">_</span>book` VALUES (9, '计算机理论', '零基础学Java（全彩版）', '零基础自学编程的入门图书，由浅入深，详解Java语言的编程思想和核心技术');</span><br><span class="line">INSERT INTO `tbl<span class="built_in">_</span>book` VALUES (10, '市场营销', '直播就该这么做：主播高效沟通实战指南', '李子柒、李佳琦、薇娅成长为网红的秘密都在书中');</span><br><span class="line">INSERT INTO `tbl<span class="built_in">_</span>book` VALUES (11, '市场营销', '直播销讲实战一本通', '和秋叶一起学系列网络营销书籍');</span><br><span class="line">INSERT INTO `tbl<span class="built_in">_</span>book` VALUES (12, '市场营销', '直播带货：淘宝、天猫直播从新手到高手', '一本教你如何玩转直播的书，10堂课轻松实现带货月入3W+');</span><br></pre></td></tr></tbody></table></figure><p>​        根据上述表结构，制作对应的实体类</p><p><strong>实体类</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> {</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String type;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        实体类的开发可以自动通过工具手工生成get/set方法，然后覆盖toString()方法，方便调试，等等。不过这一套操作书写很繁琐，有对应的工具可以帮助我们简化开发，介绍一个小工具，lombok。</p><p>​        Lombok，一个Java类库，提供了一组注解，简化POJO实体类开发，SpringBoot目前默认集成了lombok技术，并提供了对应的版本控制，所以只需要提供对应的坐标即可，在pom.xml中添加lombok的坐标。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        使用lombok可以通过一个注解@Data完成一个实体类对应的getter，setter，toString，equals，hashCode等操作的快速添加</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> {</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String type;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        到这里实体类就做好了，是不是比不使用lombok简化好多，这种工具在Java开发中还有N多，后面遇到了能用的实用开发技术时，在不增加各位小伙伴大量的学习时间的情况下，尽量多给大家介绍一些。</p><p><strong>总结</strong></p><ol><li>实体类制作</li><li>使用lombok简化开发<ul><li>导入lombok无需指定版本，由SpringBoot提供版本</li><li>@Data注解</li></ul></li></ol><h4 id="2-数据层开发——基础CRUD"><a href="#2-数据层开发——基础CRUD" class="headerlink" title="2.数据层开发——基础CRUD"></a>2.数据层开发——基础CRUD</h4><p>​        数据层开发本次使用MyBatisPlus技术，数据源使用前面学习的Druid，学都学了都用上。</p><p><strong>步骤①</strong>：导入MyBatisPlus与Druid对应的starter，当然mysql的驱动不能少</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：配置数据库连接相关的数据源配置</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">root</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤③</strong>：使用MyBatisPlus的标准通用接口BaseMapper加速开发，别忘了@Mapper和泛型的指定</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookDao</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;Book&gt; {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤④</strong>：制作测试类测试结果，这个测试类制作是个好习惯，不过在企业开发中往往都为加速开发跳过此步，且行且珍惜吧</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.LambdaQueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.metadata.IPage;</span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.extension.plugins.pagination.Page;</span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Book;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookDaoTestCase</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetById</span><span class="params">()</span>{</span><br><span class="line">        System.out.println(bookDao.selectById(<span class="number">1</span>));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testSave</span><span class="params">()</span>{</span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">        book.setType(<span class="string">"测试数据123"</span>);</span><br><span class="line">        book.setName(<span class="string">"测试数据123"</span>);</span><br><span class="line">        book.setDescription(<span class="string">"测试数据123"</span>);</span><br><span class="line">        bookDao.insert(book);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span>{</span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">        book.setId(<span class="number">17</span>);</span><br><span class="line">        book.setType(<span class="string">"测试数据abcdefg"</span>);</span><br><span class="line">        book.setName(<span class="string">"测试数据123"</span>);</span><br><span class="line">        book.setDescription(<span class="string">"测试数据123"</span>);</span><br><span class="line">        bookDao.updateById(book);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testDelete</span><span class="params">()</span>{</span><br><span class="line">        bookDao.deleteById(<span class="number">16</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>{</span><br><span class="line">        bookDao.selectList(<span class="literal">null</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><font color="#f0f"><b>温馨提示</b></font></p><p>​        MyBatisPlus技术默认的主键生成策略为雪花算法，生成的主键ID长度较大，和目前的数据库设定规则不相符，需要配置一下使MyBatisPlus使用数据库的主键生成策略，方式嘛还是老一套，做配置。在application.yml中添加对应配置即可，具体如下</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">tbl_</span><span class="comment">#设置表名通用前缀</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span><span class="comment">#设置主键id字段的生成策略为参照数据库设定的策略，当前数据库设置id生成策略为自增</span></span><br></pre></td></tr></tbody></table></figure><h5 id="查看MyBatisPlus运行日志"><a href="#查看MyBatisPlus运行日志" class="headerlink" title="查看MyBatisPlus运行日志"></a>查看MyBatisPlus运行日志</h5><p>​        在进行数据层测试的时候，因为基础的CRUD操作均由MyBatisPlus给我们提供了，所以就出现了一个局面，开发者不需要书写SQL语句了，这样程序运行的时候总有一种感觉，一切的一切都是黑盒的，作为开发者我们啥也不知道就完了。如果程序正常运行还好，如果报错了，这个时候就很崩溃，你甚至都不知道从何下手，因为传递参数、封装SQL语句这些操作完全不是你开发出来的，所以查看执行期运行的SQL语句就成为当务之急。</p><p>​        SpringBoot整合MyBatisPlus的时候充分考虑到了这点，通过配置的形式就可以查阅执行期SQL语句，配置如下</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mybatis-plus:</span></span><br><span class="line">  <span class="attr">global-config:</span></span><br><span class="line">    <span class="attr">db-config:</span></span><br><span class="line">      <span class="attr">table-prefix:</span> <span class="string">tbl_</span></span><br><span class="line">      <span class="attr">id-type:</span> <span class="string">auto</span></span><br><span class="line">  <span class="attr">configuration:</span></span><br><span class="line">    <span class="attr">log-impl:</span> <span class="string">org.apache.ibatis.logging.stdout.StdOutImpl</span></span><br></pre></td></tr></tbody></table></figure><p>​        再来看运行结果，此时就显示了运行期执行SQL的情况。</p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Creating a new SqlSession</span><br><span class="line">SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@2c9a6717] was not registered for synchronization because synchronization is not active</span><br><span class="line">JDBC Connection [com.mysql.cj.jdbc.ConnectionImpl@6ca30b8a] will not be managed by Spring</span><br><span class="line">==&gt;  Preparing: SELECT id,type,name,description FROM tbl<span class="built_in">_</span>book</span><br><span class="line">==&gt; Parameters: </span><br><span class="line">&lt;==    Columns: id, type, name, description</span><br><span class="line">&lt;==        Row: 1, 计算机理论, Spring实战 第5版, Spring入门经典教程，深入理解Spring原理技术内幕</span><br><span class="line">&lt;==        Row: 2, 计算机理论, Spring 5核心原理与30个类手写实战, 十年沉淀之作，手写Spring精华思想</span><br><span class="line">&lt;==        Row: 3, 计算机理论, Spring 5 设计模式, 深入Spring源码剖析Spring源码中蕴含的10大设计模式</span><br><span class="line">&lt;==        Row: 4, 计算机理论, Spring MVC+MyBatis开发从入门到项目实战, 全方位解析面向Web应用的轻量级框架，带你成为Spring MVC开发高手</span><br><span class="line">&lt;==        Row: 5, 计算机理论, 轻量级Java Web企业应用实战, 源码级剖析Spring框架，适合已掌握Java基础的读者</span><br><span class="line">&lt;==        Row: 6, 计算机理论, Java核心技术 卷I 基础知识（原书第11版）, Core Java 第11版，Jolt大奖获奖作品，针对Java SE9、10、11全面更新</span><br><span class="line">&lt;==        Row: 7, 计算机理论, 深入理解Java虚拟机, 5个维度全面剖析JVM，大厂面试知识点全覆盖</span><br><span class="line">&lt;==        Row: 8, 计算机理论, Java编程思想（第4版）, Java学习必读经典,殿堂级著作！赢得了全球程序员的广泛赞誉</span><br><span class="line">&lt;==        Row: 9, 计算机理论, 零基础学Java（全彩版）, 零基础自学编程的入门图书，由浅入深，详解Java语言的编程思想和核心技术</span><br><span class="line">&lt;==        Row: 10, 市场营销, 直播就该这么做：主播高效沟通实战指南, 李子柒、李佳琦、薇娅成长为网红的秘密都在书中</span><br><span class="line">&lt;==        Row: 11, 市场营销, 直播销讲实战一本通, 和秋叶一起学系列网络营销书籍</span><br><span class="line">&lt;==        Row: 12, 市场营销, 直播带货：淘宝、天猫直播从新手到高手, 一本教你如何玩转直播的书，10堂课轻松实现带货月入3W+</span><br><span class="line">&lt;==        Row: 13, 测试类型, 测试数据, 测试描述数据</span><br><span class="line">&lt;==        Row: 14, 测试数据update, 测试数据update, 测试数据update</span><br><span class="line">&lt;==        Row: 15, -----------------, 测试数据123, 测试数据123</span><br><span class="line">&lt;==      Total: 15</span><br></pre></td></tr></tbody></table></figure><p>​        其中清晰的标注了当前执行的SQL语句是什么，携带了什么参数，对应的执行结果是什么，所有信息应有尽有。</p><p>​        此处设置的是日志的显示形式，当前配置的是控制台输出，当然还可以由更多的选择，根据需求切换即可</p><img src="/2023/07/26/springboot100000/image-20211129143207295.png" alt="image-20211129143207295" style="zoom:80%;"><p><strong>总结</strong></p><ol><li><p>手工导入starter坐标（2个），mysql驱动（1个）</p></li><li><p>配置数据源与MyBatisPlus对应的配置</p></li><li><p>开发Dao接口（继承BaseMapper）</p></li><li><p>制作测试类测试Dao功能是否有效</p></li><li><p>使用配置方式开启日志，设置日志输出方式为标准输出即可查阅SQL执行日志</p></li></ol><h4 id="3-数据层开发——分页功能制作"><a href="#3-数据层开发——分页功能制作" class="headerlink" title="3.数据层开发——分页功能制作"></a>3.数据层开发——分页功能制作</h4><p>​        前面仅仅是使用了MyBatisPlus提供的基础CRUD功能，实际上MyBatisPlus给我们提供了几乎所有的基础操作，这一节说一下如何实现数据库端的分页操作。</p><p>​        MyBatisPlus提供的分页操作API如下：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testGetPage</span><span class="params">()</span>{</span><br><span class="line">    <span class="type">IPage</span> <span class="variable">page</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Page</span>(<span class="number">2</span>,<span class="number">5</span>);</span><br><span class="line">    bookDao.selectPage(page, <span class="literal">null</span>);</span><br><span class="line">    System.out.println(page.getCurrent());</span><br><span class="line">    System.out.println(page.getSize());</span><br><span class="line">    System.out.println(page.getTotal());</span><br><span class="line">    System.out.println(page.getPages());</span><br><span class="line">    System.out.println(page.getRecords());</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        其中selectPage方法需要传入一个封装分页数据的对象，可以通过new的形式创建这个对象，当然这个对象也是MyBatisPlus提供的，别选错包了。创建此对象时需要指定两个分页的基本数据</p><ul><li>当前显示第几页</li><li>每页显示几条数据</li></ul><p>​        可以通过创建Page对象时利用构造方法初始化这两个数据。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">IPage</span> <span class="variable">page</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Page</span>(<span class="number">2</span>,<span class="number">5</span>);</span><br></pre></td></tr></tbody></table></figure><p>​        将该对象传入到查询方法selectPage后，可以得到查询结果，但是我们会发现当前操作查询结果返回值仍然是一个IPage对象，这又是怎么回事？</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">IPage</span> <span class="variable">page</span> <span class="operator">=</span> bookDao.selectPage(page, <span class="literal">null</span>);</span><br></pre></td></tr></tbody></table></figure><p>​        原来这个IPage对象中封装了若干个数据，而查询的结果作为IPage对象封装的一个数据存在的，可以理解为查询结果得到后，又塞到了这个IPage对象中，其实还是为了高度的封装，一个IPage描述了分页所有的信息。下面5个操作就是IPage对象中封装的所有信息了。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testGetPage</span><span class="params">()</span>{</span><br><span class="line">    <span class="type">IPage</span> <span class="variable">page</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Page</span>(<span class="number">2</span>,<span class="number">5</span>);</span><br><span class="line">    bookDao.selectPage(page, <span class="literal">null</span>);</span><br><span class="line">    System.out.println(page.getCurrent());<span class="comment">//当前页码值</span></span><br><span class="line">    System.out.println(page.getSize());<span class="comment">//每页显示数</span></span><br><span class="line">    System.out.println(page.getTotal());<span class="comment">//数据总量</span></span><br><span class="line">    System.out.println(page.getPages());<span class="comment">//总页数</span></span><br><span class="line">    System.out.println(page.getRecords());<span class="comment">//详细数据</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        到这里就知道这些数据如何获取了，但是当你去执行这个操作时，你会发现并不像我们分析的这样，实际上这个分页功能当前是无效的。为什么这样呢？这个要源于MyBatisPlus的内部机制。</p><p>​        对于MySQL的分页操作使用limit关键字进行，而并不是所有的数据库都使用limit关键字实现的，这个时候MyBatisPlus为了制作的兼容性强，将分页操作设置为基础查询操作的升级版，你可以理解为IPhone6与IPhone6S-PLUS的关系。</p><p>​        基础操作中有查询全部的功能，而在这个基础上只需要升级一下（PLUS）就可以得到分页操作。所以MyBatisPlus将分页操作做成了一个开关，你用分页功能就把开关开启，不用就不需要开启这个开关。而我们现在没有开启这个开关，所以分页操作是没有的。这个开关是通过MyBatisPlus的拦截器的形式存在的，其中的原理这里不分析了，有兴趣的小伙伴可以学习MyBatisPlus这门课程进行详细解读。具体设置方式如下：</p><p><strong>定义MyBatisPlus拦截器并将其设置为Spring管控的bean</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MPConfig</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span>{</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>());</span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        上述代码第一行是创建MyBatisPlus的拦截器栈，这个时候拦截器栈中没有具体的拦截器，第二行是初始化了分页拦截器，并添加到拦截器栈中。如果后期开发其他功能，需要添加全新的拦截器，按照第二行的格式继续add进去新的拦截器就可以了。</p><p><strong>总结</strong></p><ol><li>使用IPage封装分页数据</li><li>分页操作依赖MyBatisPlus分页拦截器实现功能</li><li>借助MyBatisPlus日志查阅执行SQL语句</li></ol><h4 id="4-数据层开发——条件查询功能制作"><a href="#4-数据层开发——条件查询功能制作" class="headerlink" title="4.数据层开发——条件查询功能制作"></a>4.数据层开发——条件查询功能制作</h4><p>​        除了分页功能，MyBatisPlus还提供有强大的条件查询功能。以往我们写条件查询要自己动态拼写复杂的SQL语句，现在简单了，MyBatisPlus将这些操作都制作成API接口，调用一个又一个的方法就可以实现各种条件的拼装。这里给大家普及一下基本格式，详细的操作还是到MyBatisPlus的课程中查阅吧。</p><p>​        下面的操作就是执行一个模糊匹配对应的操作，由like条件书写变为了like方法的调用。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testGetBy</span><span class="params">()</span>{</span><br><span class="line">    QueryWrapper&lt;Book&gt; qw = <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;();</span><br><span class="line">    qw.like(<span class="string">"name"</span>,<span class="string">"Spring"</span>);</span><br><span class="line">    bookDao.selectList(qw);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        其中第一句QueryWrapper对象是一个用于封装查询条件的对象，该对象可以动态使用API调用的方法添加条件，最终转化成对应的SQL语句。第二句就是一个条件了，需要什么条件，使用QueryWapper对象直接调用对应操作即可。比如做大于小于关系，就可以使用lt或gt方法，等于使用eq方法，等等，此处不做更多的解释了。</p><p>​        这组API使用还是比较简单的，但是关于属性字段名的书写存在着安全隐患，比如查询字段name，当前是以字符串的形态书写的，万一写错，编译器还没有办法发现，只能将问题抛到运行器通过异常堆栈告诉开发者，不太友好。</p><p>​        MyBatisPlus针对字段检查进行了功能升级，全面支持Lambda表达式，就有了下面这组API。由QueryWrapper对象升级为LambdaQueryWrapper对象，这下就避免了上述问题的出现。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testGetBy2</span><span class="params">()</span>{</span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">"1"</span>;</span><br><span class="line">    LambdaQueryWrapper&lt;Book&gt; lqw = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;Book&gt;();</span><br><span class="line">    lqw.like(Book::getName,name);</span><br><span class="line">    bookDao.selectList(lqw);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        为了便于开发者动态拼写SQL，防止将null数据作为条件使用，MyBatisPlus还提供了动态拼装SQL的快捷书写方式。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testGetBy2</span><span class="params">()</span>{</span><br><span class="line">    <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> <span class="string">"1"</span>;</span><br><span class="line">    LambdaQueryWrapper&lt;Book&gt; lqw = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;Book&gt;();</span><br><span class="line">    <span class="comment">//if(name != null) lqw.like(Book::getName,name);//方式一：JAVA代码控制</span></span><br><span class="line">    lqw.like(name != <span class="literal">null</span>,Book::getName,name);<span class="comment">//方式二：API接口提供控制开关</span></span><br><span class="line">    bookDao.selectList(lqw);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        其实就是个格式，没有区别。关于MyBatisPlus的基础操作就说到这里吧，如果这一块知识不太熟悉的小伙伴建议还是完整的学习一下MyBatisPlus的知识吧，这里只是蜻蜓点水的用了几个操作而已。</p><p><strong>总结</strong></p><ol><li><p>使用QueryWrapper对象封装查询条件</p></li><li><p>推荐使用LambdaQueryWrapper对象</p></li><li><p>所有查询操作封装成方法调用</p></li><li><p>查询条件支持动态条件拼装</p></li></ol><h4 id="5-业务层开发"><a href="#5-业务层开发" class="headerlink" title="5.业务层开发"></a>5.业务层开发</h4><p>​        数据层开发告一段落，下面进行业务层开发，其实标准业务层开发很多初学者认为就是调用数据层，怎么说呢？这个理解是没有大问题的，更精准的说法应该是<font color="#ff0000"><b>组织业务逻辑功能，并根据业务需求，对数据持久层发起调用</b></font>。有什么差别呢？目标是为了组织出符合需求的业务逻辑功能，至于调不调用数据层还真不好说，有需求就调用，没有需求就不调用。</p><p>​        一个常识性的知识普及一下，业务层的方法名定义一定要与业务有关，例如登录操作</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">login(String username,String password);</span><br></pre></td></tr></tbody></table></figure><p>​        而数据层的方法名定义一定与业务无关，是一定，不是可能，也不是有可能，例如根据用户名密码查询</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">selectByUserNameAndPassword(String username,String password);</span><br></pre></td></tr></tbody></table></figure><p>​        我们在开发的时候是可以根据完成的工作不同划分成不同职能的开发团队的。比如一个哥们制作数据层，他就可以不知道业务是什么样子，拿到的需求文档要求可能是这样的</p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">接口：传入用户名与密码字段，查询出对应结果，结果是单条数据</span><br><span class="line">接口：传入ID字段，查询出对应结果，结果是单条数据</span><br><span class="line">接口：传入离职字段，查询出对应结果，结果是多条数据</span><br></pre></td></tr></tbody></table></figure><p>​        但是进行业务功能开发的哥们，拿到的需求文档要求差别就很大</p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">接口：传入用户名与密码字段，对用户名字段做长度校验，4-15位，对密码字段做长度校验，8到24位，对密码字段做特殊字符校验，不允许存在空格，查询结果为对象。如果为null，返回BusinessException，封装消息码INFO<span class="built_in">_</span>LOGON<span class="built_in">_</span>USERNAME<span class="built_in">_</span>PASSWORD<span class="built_in">_</span>ERROR</span><br></pre></td></tr></tbody></table></figure><p>​        你比较一下，能是一回事吗？差别太大了，所以说业务层方法定义与数据层方法定义差异化很大，只不过有些入门级的开发者手懒或者没有使用过公司相关的ISO标准化文档而已。</p><p>​        多余的话不说了，咱们做案例就简单制作了，业务层接口定义如下：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">BookService</span> {</span><br><span class="line">    Boolean <span class="title function_">save</span><span class="params">(Book book)</span>;</span><br><span class="line">    Boolean <span class="title function_">update</span><span class="params">(Book book)</span>;</span><br><span class="line">    Boolean <span class="title function_">delete</span><span class="params">(Integer id)</span>;</span><br><span class="line">    Book <span class="title function_">getById</span><span class="params">(Integer id)</span>;</span><br><span class="line">    List&lt;Book&gt; <span class="title function_">getAll</span><span class="params">()</span>;</span><br><span class="line">    IPage&lt;Book&gt; <span class="title function_">getPage</span><span class="params">(<span class="type">int</span> currentPage,<span class="type">int</span> pageSize)</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        业务层实现类如下，转调数据层即可：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">save</span><span class="params">(Book book)</span> {</span><br><span class="line">        <span class="keyword">return</span> bookDao.insert(book) &gt; <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">update</span><span class="params">(Book book)</span> {</span><br><span class="line">        <span class="keyword">return</span> bookDao.updateById(book) &gt; <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">delete</span><span class="params">(Integer id)</span> {</span><br><span class="line">        <span class="keyword">return</span> bookDao.deleteById(id) &gt; <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">getById</span><span class="params">(Integer id)</span> {</span><br><span class="line">        <span class="keyword">return</span> bookDao.selectById(id);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">getAll</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> bookDao.selectList(<span class="literal">null</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> IPage&lt;Book&gt; <span class="title function_">getPage</span><span class="params">(<span class="type">int</span> currentPage, <span class="type">int</span> pageSize)</span> {</span><br><span class="line">        <span class="type">IPage</span> <span class="variable">page</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Page</span>(currentPage,pageSize);</span><br><span class="line">        bookDao.selectPage(page,<span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">return</span> page;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        别忘了对业务层接口进行测试，测试类如下：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceTest</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IBookService bookService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetById</span><span class="params">()</span>{</span><br><span class="line">        System.out.println(bookService.getById(<span class="number">4</span>));</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testSave</span><span class="params">()</span>{</span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">        book.setType(<span class="string">"测试数据123"</span>);</span><br><span class="line">        book.setName(<span class="string">"测试数据123"</span>);</span><br><span class="line">        book.setDescription(<span class="string">"测试数据123"</span>);</span><br><span class="line">        bookService.save(book);</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testUpdate</span><span class="params">()</span>{</span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">        book.setId(<span class="number">17</span>);</span><br><span class="line">        book.setType(<span class="string">"-----------------"</span>);</span><br><span class="line">        book.setName(<span class="string">"测试数据123"</span>);</span><br><span class="line">        book.setDescription(<span class="string">"测试数据123"</span>);</span><br><span class="line">        bookService.updateById(book);</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testDelete</span><span class="params">()</span>{</span><br><span class="line">        bookService.removeById(<span class="number">18</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetAll</span><span class="params">()</span>{</span><br><span class="line">        bookService.list();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testGetPage</span><span class="params">()</span>{</span><br><span class="line">        IPage&lt;Book&gt; page = <span class="keyword">new</span> <span class="title class_">Page</span>&lt;Book&gt;(<span class="number">2</span>,<span class="number">5</span>);</span><br><span class="line">        bookService.page(page);</span><br><span class="line">        System.out.println(page.getCurrent());</span><br><span class="line">        System.out.println(page.getSize());</span><br><span class="line">        System.out.println(page.getTotal());</span><br><span class="line">        System.out.println(page.getPages());</span><br><span class="line">        System.out.println(page.getRecords());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>Service接口名称定义成业务名称，并与Dao接口名称进行区分</li><li>制作测试类测试Service功能是否有效</li></ol><h5 id="业务层快速开发"><a href="#业务层快速开发" class="headerlink" title="业务层快速开发"></a>业务层快速开发</h5><p>​        其实MyBatisPlus技术不仅提供了数据层快速开发方案，业务层MyBatisPlus也给了一个通用接口，个人观点不推荐使用，凑合能用吧，其实就是一个封装+继承的思想，代码给出，实际开发慎用。</p><p>​        业务层接口快速开发</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IBookService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;Book&gt; {</span><br><span class="line">    <span class="comment">//添加非通用操作API接口</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        业务层接口实现类快速开发，关注继承的类需要传入两个泛型，一个是数据层接口，另一个是实体类。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;BookDao, Book&gt; <span class="keyword">implements</span> <span class="title class_">IBookService</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"><span class="comment">//添加非通用操作API</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        如果感觉MyBatisPlus提供的功能不足以支撑你的使用需要（其实是一定不能支撑的，因为需求不可能是通用的），在原始接口基础上接着定义新的API接口就行了，此处不再说太多了，就是自定义自己的操作了，但是不要和已有的API接口名冲突即可。</p><p><strong>总结</strong></p><ol><li>使用通用接口（ISerivce<t>）快速开发Service</t></li><li>使用通用实现类（ServiceImpl&lt;M,T&gt;）快速开发ServiceImpl</li><li>可以在通用接口基础上做功能重载或功能追加</li><li>注意重载时不要覆盖原始操作，避免原始提供的功能丢失</li></ol><h4 id="6-表现层开发"><a href="#6-表现层开发" class="headerlink" title="6.表现层开发"></a>6.表现层开发</h4><p>​        终于做到表现层了，做了这么多都是基础工作。其实你现在回头看看，哪里还有什么SpringBoot的影子？前面1,2步就搞完了。继续完成表现层制作吧，咱们表现层的开发使用基于Restful的表现层接口开发，功能测试通过Postman工具进行。</p><p>​        表现层接口如下:</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping("/books")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController2</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IBookService bookService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Book&gt; <span class="title function_">getAll</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> bookService.list();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> Book book)</span>{</span><br><span class="line">        <span class="keyword">return</span> bookService.save(book);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PutMapping</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">update</span><span class="params">(<span class="meta">@RequestBody</span> Book book)</span>{</span><br><span class="line">        <span class="keyword">return</span> bookService.modify(book);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@DeleteMapping("{id}")</span></span><br><span class="line">    <span class="keyword">public</span> Boolean <span class="title function_">delete</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>{</span><br><span class="line">        <span class="keyword">return</span> bookService.delete(id);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping("{id}")</span></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">getById</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>{</span><br><span class="line">        <span class="keyword">return</span> bookService.getById(id);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping("{currentPage}/{pageSize}")</span></span><br><span class="line">    <span class="keyword">public</span> IPage&lt;Book&gt; <span class="title function_">getPage</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> currentPage,<span class="meta">@PathVariable</span> <span class="type">int</span> pageSize)</span>{</span><br><span class="line">        <span class="keyword">return</span> bookService.getPage(currentPage,pageSize, <span class="literal">null</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        在使用Postman测试时关注提交类型，对应上即可，不然就会报405的错误码了。</p><p><strong>普通GET请求</strong></p><p><img src="/2023/07/26/springboot100000/image-20211129152237371.png" alt="image-20211129152237371"></p><p><strong>PUT请求传递json数据，后台实用@RequestBody接收数据</strong></p><p><img src="/2023/07/26/springboot100000/image-20211129152300177.png" alt="image-20211129152300177"></p><p><strong>GET请求传递路径变量，后台实用@PathVariable接收数据</strong></p><p><img src="/2023/07/26/springboot100000/image-20211129152320073.png" alt="image-20211129152320073"></p><p><strong>总结</strong></p><ol><li>基于Restful制作表现层接口<ul><li>新增：POST</li><li>删除：DELETE</li><li>修改：PUT</li><li>查询：GET</li></ul></li><li>接收参数<ul><li>实体数据：@RequestBody</li><li>路径变量：@PathVariable</li></ul></li></ol><h4 id="7-表现层消息一致性处理"><a href="#7-表现层消息一致性处理" class="headerlink" title="7.表现层消息一致性处理"></a>7.表现层消息一致性处理</h4><p>​        目前我们通过Postman测试后业务层接口功能是通的，但是这样的结果给到前端开发者会出现一个小问题。不同的操作结果所展示的数据格式差异化严重。</p><p>​    <strong>增删改操作结果</strong></p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">true</span><br></pre></td></tr></tbody></table></figure><p>​    <strong>查询单个数据操作结果</strong></p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"id"</span><span class="punctuation">:</span>&nbsp;<span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"type"</span><span class="punctuation">:</span>&nbsp;<span class="string">"计算机理论"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"name"</span><span class="punctuation">:</span>&nbsp;<span class="string">"Spring实战&nbsp;第5版"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"description"</span><span class="punctuation">:</span>&nbsp;<span class="string">"Spring入门经典教程"</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>​    <strong>查询全部数据操作结果</strong></p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"id"</span><span class="punctuation">:</span>&nbsp;<span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"type"</span><span class="punctuation">:</span>&nbsp;<span class="string">"计算机理论"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"name"</span><span class="punctuation">:</span>&nbsp;<span class="string">"Spring实战&nbsp;第5版"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"description"</span><span class="punctuation">:</span>&nbsp;<span class="string">"Spring入门经典教程"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"id"</span><span class="punctuation">:</span>&nbsp;<span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"type"</span><span class="punctuation">:</span>&nbsp;<span class="string">"计算机理论"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"name"</span><span class="punctuation">:</span>&nbsp;<span class="string">"Spring&nbsp;5核心原理与30个类手写实战"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"description"</span><span class="punctuation">:</span>&nbsp;<span class="string">"十年沉淀之作"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></tbody></table></figure><p>​        每种不同操作返回的数据格式都不一样，而且还不知道以后还会有什么格式，这样的结果让前端人员看了是很容易让人崩溃的，必须将所有操作的操作结果数据格式统一起来，需要设计表现层返回结果的模型类，用于后端与前端进行数据格式统一，也称为<strong>前后端数据协议</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">R</span> {</span><br><span class="line">    <span class="keyword">private</span> Boolean flag;</span><br><span class="line">    <span class="keyword">private</span> Object data;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        其中flag用于标识操作是否成功，data用于封装操作数据，现在的数据格式就变了</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"flag"</span><span class="punctuation">:</span>&nbsp;<span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"data"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"id"</span><span class="punctuation">:</span>&nbsp;<span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"type"</span><span class="punctuation">:</span>&nbsp;<span class="string">"计算机理论"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"name"</span><span class="punctuation">:</span>&nbsp;<span class="string">"Spring实战&nbsp;第5版"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"description"</span><span class="punctuation">:</span>&nbsp;<span class="string">"Spring入门经典教程"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>​        表现层开发格式也需要转换一下</p><img src="/2023/07/26/springboot100000/image-20211129153301262.png" alt="image-20211129153301262" style="zoom:80%;"><img src="/2023/07/26/springboot100000/image-20211129153319052.png" alt="image-20211129153319052" style="zoom:80%;"><img src="/2023/07/26/springboot100000/image-20211129153332499.png" alt="image-20211129153332499" style="zoom:80%;"><p>​        结果这么一折腾，全格式统一，现在后端发送给前端的数据格式就统一了，免去了不少前端解析数据的烦恼。</p><p><strong>总结</strong></p><ol><li><p>设计统一的返回值结果类型便于前端开发读取数据</p></li><li><p>返回值结果类型可以根据需求自行设定，没有固定格式</p></li><li><p>返回值结果模型类用于后端与前端进行数据格式统一，也称为前后端数据协议</p></li></ol><h4 id="8-前后端联通性测试"><a href="#8-前后端联通性测试" class="headerlink" title="8.前后端联通性测试"></a>8.前后端联通性测试</h4><p>​        后端的表现层接口开发完毕，就可以进行前端的开发了。</p><p>​        将前端人员开发的页面保存到lresources目录下的static目录中，建议执行maven的clean生命周期，避免缓存的问题出现。</p><p>​    <img src="/2023/07/26/springboot100000/image-20211129153831990.png" alt="image-20211129153831990" style="zoom:67%;"></p><p>​        在进行具体的功能开发之前，先做联通性的测试，通过页面发送异步提交（axios），这一步调试通过后再进行进一步的功能开发。</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//列表</span></span><br><span class="line"><span class="title function_">getAll</span>(<span class="params"></span>) {</span><br><span class="line">axios.<span class="title function_">get</span>(<span class="string">"/books"</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>{</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res.<span class="property">data</span>);</span><br><span class="line">});</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p>​        只要后台代码能够正常工作，前端能够在日志中接收到数据，就证明前后端是通的，也就可以进行下一步的功能开发了。</p><p><strong>总结</strong></p><ol><li>单体项目中页面放置在resources/static目录下</li><li>created钩子函数用于初始化页面时发起调用</li><li>页面使用axios发送异步请求获取数据后确认前后端是否联通</li></ol><h4 id="9-页面基础功能开发"><a href="#9-页面基础功能开发" class="headerlink" title="9.页面基础功能开发"></a>9.页面基础功能开发</h4><h5 id="F-1-列表功能（非分页版）"><a href="#F-1-列表功能（非分页版）" class="headerlink" title="F-1.列表功能（非分页版）"></a>F-1.列表功能（非分页版）</h5><p>​        列表功能主要操作就是加载完数据，将数据展示到页面上，此处要利用VUE的数据模型绑定，发送请求得到数据，然后页面上读取指定数据即可。</p><p>​        <strong>页面数据模型定义</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>:{</span><br><span class="line"><span class="attr">dataList</span>: [],<span class="comment">//当前页要展示的列表数据</span></span><br><span class="line">...</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p>​        异步请求获取数据</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//列表</span></span><br><span class="line"><span class="title function_">getAll</span>(<span class="params"></span>) {</span><br><span class="line">    axios.<span class="title function_">get</span>(<span class="string">"/books"</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>{</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dataList</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span><br><span class="line">    });</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p>​        这样在页面加载时就可以获取到数据，并且由VUE将数据展示到页面上了。</p><p>总结：</p><ol><li>将查询数据返回到页面，利用前端数据绑定进行数据展示</li></ol><h5 id="F-2-添加功能"><a href="#F-2-添加功能" class="headerlink" title="F-2.添加功能"></a>F-2.添加功能</h5><p>​        添加功能用于收集数据的表单是通过一个弹窗展示的，因此在添加操作前首先要进行弹窗的展示，添加后隐藏弹窗即可。因为这个弹窗一直存在，因此当页面加载时首先设置这个弹窗为不可显示状态，需要展示，切换状态即可。</p><p>​        <strong>默认状态</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>:{</span><br><span class="line"><span class="attr">dialogFormVisible</span>: <span class="literal">false</span>,<span class="comment">//添加表单是否可见</span></span><br><span class="line">...</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p>​        <strong>切换为显示状态</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//弹出添加窗口</span></span><br><span class="line"><span class="title function_">handleCreate</span>(<span class="params"></span>) {</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">dialogFormVisible</span> = <span class="literal">true</span>;</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p>​        由于每次添加数据都是使用同一个弹窗录入数据，所以每次操作的痕迹将在下一次操作时展示出来，需要在每次操作之前清理掉上次操作的痕迹。</p><p>​        <strong>定义清理数据操作</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//重置表单</span></span><br><span class="line"><span class="title function_">resetForm</span>(<span class="params"></span>) {</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">formData</span> = {};</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p>​        <strong>切换弹窗状态时清理数据</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//弹出添加窗口</span></span><br><span class="line"><span class="title function_">handleCreate</span>(<span class="params"></span>) {</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dialogFormVisible</span> = <span class="literal">true</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">resetForm</span>();</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p>​        至此准备工作完成，下面就要调用后台完成添加操作了。</p><p>​        <strong>添加操作</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加</span></span><br><span class="line">handleAdd () {</span><br><span class="line">    <span class="comment">//发送异步请求</span></span><br><span class="line">    axios.<span class="title function_">post</span>(<span class="string">"/books"</span>,<span class="variable language_">this</span>.<span class="property">formData</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>{</span><br><span class="line">        <span class="comment">//如果操作成功，关闭弹层，显示数据</span></span><br><span class="line">        <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">flag</span>){</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">dialogFormVisible</span> = <span class="literal">false</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">"添加成功"</span>);</span><br><span class="line">        }<span class="keyword">else</span> {</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">"添加失败"</span>);</span><br><span class="line">        }</span><br><span class="line">    }).<span class="title function_">finally</span>(<span class="function">()=&gt;</span>{</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span><br><span class="line">    });</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><ol><li>将要保存的数据传递到后台，通过post请求的第二个参数传递json数据到后台</li><li>根据返回的操作结果决定下一步操作<ul><li>如何是true就关闭添加窗口，显示添加成功的消息</li><li>如果是false保留添加窗口，显示添加失败的消息</li></ul></li><li>无论添加是否成功，页面均进行刷新，动态加载数据（对getAll操作发起调用）</li></ol><p>​        <strong>取消添加操作</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//取消</span></span><br><span class="line"><span class="title function_">cancel</span>(<span class="params"></span>){</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">dialogFormVisible</span> = <span class="literal">false</span>;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">info</span>(<span class="string">"操作取消"</span>);</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>请求方式使用POST调用后台对应操作</li><li>添加操作结束后动态刷新页面加载数据</li><li>根据操作结果不同，显示对应的提示信息</li><li>弹出添加Div时清除表单数据</li></ol><h5 id="F-3-删除功能"><a href="#F-3-删除功能" class="headerlink" title="F-3.删除功能"></a>F-3.删除功能</h5><p>​        模仿添加操作制作删除功能，差别之处在于删除操作仅传递一个待删除的数据id到后台即可。</p><p>​        <strong>删除操作</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 删除</span></span><br><span class="line"><span class="title function_">handleDelete</span>(<span class="params">row</span>) {</span><br><span class="line">    axios.<span class="title function_">delete</span>(<span class="string">"/books/"</span>+row.<span class="property">id</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>{</span><br><span class="line">        <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">flag</span>){</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">"删除成功"</span>);</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">"删除失败"</span>);</span><br><span class="line">        }</span><br><span class="line">    }).<span class="title function_">finally</span>(<span class="function">()=&gt;</span>{</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span><br><span class="line">    });</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p>​        <strong>删除操作提示信息</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 删除</span></span><br><span class="line"><span class="title function_">handleDelete</span>(<span class="params">row</span>) {</span><br><span class="line">    <span class="comment">//1.弹出提示框</span></span><br><span class="line">    <span class="variable language_">this</span>.$confirm(<span class="string">"此操作永久删除当前数据，是否继续？"</span>,<span class="string">"提示"</span>,{</span><br><span class="line">        <span class="attr">type</span>:<span class="string">'info'</span></span><br><span class="line">    }).<span class="title function_">then</span>(<span class="function">()=&gt;</span>{</span><br><span class="line">        <span class="comment">//2.做删除业务</span></span><br><span class="line">        axios.<span class="title function_">delete</span>(<span class="string">"/books/"</span>+row.<span class="property">id</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>{</span><br><span class="line">       <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">flag</span>){</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">"删除成功"</span>);</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">"删除失败"</span>);</span><br><span class="line">        }</span><br><span class="line">        }).<span class="title function_">finally</span>(<span class="function">()=&gt;</span>{</span><br><span class="line">            <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span><br><span class="line">        });</span><br><span class="line">    }).<span class="title function_">catch</span>(<span class="function">()=&gt;</span>{</span><br><span class="line">        <span class="comment">//3.取消删除</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">info</span>(<span class="string">"取消删除操作"</span>);</span><br><span class="line">    });</span><br><span class="line">}，</span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>请求方式使用Delete调用后台对应操作</li><li>删除操作需要传递当前行数据对应的id值到后台</li><li>删除操作结束后动态刷新页面加载数据</li><li>根据操作结果不同，显示对应的提示信息</li><li>删除操作前弹出提示框避免误操作</li></ol><h5 id="F-4-修改功能"><a href="#F-4-修改功能" class="headerlink" title="F-4.修改功能"></a>F-4.修改功能</h5><p>​        修改功能可以说是列表功能、删除功能与添加功能的合体。几个相似点如下：</p><ol><li><p>页面也需要有一个弹窗用来加载修改的数据，这一点与添加相同，都是要弹窗</p></li><li><p>弹出窗口中要加载待修改的数据，而数据需要通过查询得到，这一点与查询全部相同，都是要查数据</p></li><li><p>查询操作需要将要修改的数据id发送到后台，这一点与删除相同，都是传递id到后台</p></li><li><p>查询得到数据后需要展示到弹窗中，这一点与查询全部相同，都是要通过数据模型绑定展示数据</p></li><li><p>修改数据时需要将被修改的数据传递到后台，这一点与添加相同，都是要传递数据</p><p>所以整体上来看，修改功能就是前面几个功能的大合体</p><p><strong>查询并展示数据</strong></p></li></ol><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//弹出编辑窗口</span></span><br><span class="line"><span class="title function_">handleUpdate</span>(<span class="params">row</span>) {</span><br><span class="line">    axios.<span class="title function_">get</span>(<span class="string">"/books/"</span>+row.<span class="property">id</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>{</span><br><span class="line">        <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">flag</span>){</span><br><span class="line">            <span class="comment">//展示弹层，加载数据</span></span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">formData</span> = res.<span class="property">data</span>.<span class="property">data</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">dialogFormVisible4Edit</span> = <span class="literal">true</span>;</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">"数据同步失败，自动刷新"</span>);</span><br><span class="line">        }</span><br><span class="line">    });</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p>​        <strong>修改操作</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//修改</span></span><br><span class="line"><span class="title function_">handleEdit</span>(<span class="params"></span>) {</span><br><span class="line">    axios.<span class="title function_">put</span>(<span class="string">"/books"</span>,<span class="variable language_">this</span>.<span class="property">formData</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>{</span><br><span class="line">        <span class="comment">//如果操作成功，关闭弹层并刷新页面</span></span><br><span class="line">        <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">flag</span>){</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">dialogFormVisible4Edit</span> = <span class="literal">false</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">"修改成功"</span>);</span><br><span class="line">        }<span class="keyword">else</span> {</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">"修改失败，请重试"</span>);</span><br><span class="line">        }</span><br><span class="line">    }).<span class="title function_">finally</span>(<span class="function">()=&gt;</span>{</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span><br><span class="line">    });</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>加载要修改数据通过传递当前行数据对应的id值到后台查询数据（同删除与查询全部）</li><li>利用前端双向数据绑定将查询到的数据进行回显（同查询全部）</li><li>请求方式使用PUT调用后台对应操作（同新增传递数据）</li><li>修改操作结束后动态刷新页面加载数据（同新增）</li><li>根据操作结果不同，显示对应的提示信息（同新增）</li></ol><p>​    </p><h4 id="10-业务消息一致性处理"><a href="#10-业务消息一致性处理" class="headerlink" title="10.业务消息一致性处理"></a>10.业务消息一致性处理</h4><p>​        目前的功能制作基本上达成了正常使用的情况，什么叫正常使用呢？也就是这个程序不出BUG，如果我们搞一个BUG出来，你会发现程序马上崩溃掉。比如后台手工抛出一个异常，看看前端接收到的数据什么样子。</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"timestamp"</span><span class="punctuation">:</span>&nbsp;<span class="string">"2021-09-15T03:27:31.038+00:00"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"status"</span><span class="punctuation">:</span>&nbsp;<span class="number">500</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"error"</span><span class="punctuation">:</span>&nbsp;<span class="string">"Internal&nbsp;Server&nbsp;Error"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"path"</span><span class="punctuation">:</span>&nbsp;<span class="string">"/books"</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>​        面对这种情况，前端的同学又不会了，这又是什么格式？怎么和之前的格式不一样？</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"flag"</span><span class="punctuation">:</span>&nbsp;<span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"data"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"id"</span><span class="punctuation">:</span>&nbsp;<span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"type"</span><span class="punctuation">:</span>&nbsp;<span class="string">"计算机理论"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"name"</span><span class="punctuation">:</span>&nbsp;<span class="string">"Spring实战&nbsp;第5版"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"description"</span><span class="punctuation">:</span>&nbsp;<span class="string">"Spring入门经典教程"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>​        看来不仅要对正确的操作数据格式做处理，还要对错误的操作数据格式做同样的格式处理。</p><p>​        首先在当前的数据结果中添加消息字段，用来兼容后台出现的操作消息。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">R</span>{</span><br><span class="line">    <span class="keyword">private</span> Boolean flag;</span><br><span class="line">    <span class="keyword">private</span> Object data;</span><br><span class="line">    <span class="keyword">private</span> String msg;<span class="comment">//用于封装消息</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        后台代码也要根据情况做处理，当前是模拟的错误。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">save</span><span class="params">(<span class="meta">@RequestBody</span> Book book)</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="type">Boolean</span> <span class="variable">flag</span> <span class="operator">=</span> bookService.insert(book);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">R</span>(flag , flag ? <span class="string">"添加成功^_^"</span> : <span class="string">"添加失败-_-!"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        然后在表现层做统一的异常处理，使用SpringMVC提供的异常处理器做统一的异常处理。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProjectExceptionAdvice</span> {</span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">doOtherException</span><span class="params">(Exception ex)</span>{</span><br><span class="line">        <span class="comment">//记录日志</span></span><br><span class="line">        <span class="comment">//发送消息给运维</span></span><br><span class="line">        <span class="comment">//发送邮件给开发人员,ex对象发送给开发人员</span></span><br><span class="line">        ex.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">R</span>(<span class="literal">false</span>,<span class="literal">null</span>,<span class="string">"系统错误，请稍后再试！"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        页面上得到数据后，先判定是否有后台传递过来的消息，标志就是当前操作是否成功，如果返回操作结果false，就读取后台传递的消息。</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加</span></span><br><span class="line">handleAdd () {</span><br><span class="line"><span class="comment">//发送ajax请求</span></span><br><span class="line">    axios.<span class="title function_">post</span>(<span class="string">"/books"</span>,<span class="variable language_">this</span>.<span class="property">formData</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>)=&gt;</span>{</span><br><span class="line">        <span class="comment">//如果操作成功，关闭弹层，显示数据</span></span><br><span class="line">        <span class="keyword">if</span>(res.<span class="property">data</span>.<span class="property">flag</span>){</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">dialogFormVisible</span> = <span class="literal">false</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">"添加成功"</span>);</span><br><span class="line">        }<span class="keyword">else</span> {</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(res.<span class="property">data</span>.<span class="property">msg</span>);<span class="comment">//消息来自于后台传递过来，而非固定内容</span></span><br><span class="line">        }</span><br><span class="line">    }).<span class="title function_">finally</span>(<span class="function">()=&gt;</span>{</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span><br><span class="line">    });</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>使用注解@RestControllerAdvice定义SpringMVC异常处理器用来处理异常的</li><li>异常处理器必须被扫描加载，否则无法生效</li><li>表现层返回结果的模型类中添加消息属性用来传递消息到页面</li></ol><p>​    </p><h4 id="11-页面功能开发"><a href="#11-页面功能开发" class="headerlink" title="11.页面功能开发"></a>11.页面功能开发</h4><h5 id="F-5-分页功能"><a href="#F-5-分页功能" class="headerlink" title="F-5.分页功能"></a>F-5.分页功能</h5><p>​        分页功能的制作用于替换前面的查询全部，其中要使用到elementUI提供的分页组件。</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--分页组件--&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pagination-container"</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-pagination</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="attr">class</span>=<span class="string">"pagiantion"</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">@<span class="attr">current-change</span>=<span class="string">"handleCurrentChange"</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="attr">:current-page</span>=<span class="string">"pagination.currentPage"</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="attr">:page-size</span>=<span class="string">"pagination.pageSize"</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="attr">layout</span>=<span class="string">"total, prev, pager, next, jumper"</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="attr">:total</span>=<span class="string">"pagination.total"</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-pagination</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></tbody></table></figure><p>​        为了配合分页组件，封装分页对应的数据模型。</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>:{</span><br><span class="line"><span class="attr">pagination</span>: {</span><br><span class="line"><span class="comment">//分页相关模型数据</span></span><br><span class="line"><span class="attr">currentPage</span>: <span class="number">1</span>,<span class="comment">//当前页码</span></span><br><span class="line"><span class="attr">pageSize</span>:<span class="number">10</span>,<span class="comment">//每页显示的记录数</span></span><br><span class="line"><span class="attr">total</span>:<span class="number">0</span>,<span class="comment">//总记录数</span></span><br><span class="line">}</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p>​        修改查询全部功能为分页查询，通过路径变量传递页码信息参数。</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getAll</span>(<span class="params"></span>) {</span><br><span class="line">    axios.<span class="title function_">get</span>(<span class="string">"/books/"</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">currentPage</span>+<span class="string">"/"</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">pageSize</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">    });</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p>​        后台提供对应的分页功能。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping("/{currentPage}/{pageSize}")</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">getAll</span><span class="params">(<span class="meta">@PathVariable</span> Integer currentPage,<span class="meta">@PathVariable</span> Integer pageSize)</span>{</span><br><span class="line">    IPage&lt;Book&gt; pageBook = bookService.getPage(currentPage, pageSize);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">R</span>(<span class="literal">null</span> != pageBook ,pageBook);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        页面根据分页操作结果读取对应数据，并进行数据模型绑定。</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getAll</span>(<span class="params"></span>) {</span><br><span class="line">    axios.<span class="title function_">get</span>(<span class="string">"/books/"</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">currentPage</span>+<span class="string">"/"</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">pageSize</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">total</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">total</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">currentPage</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">current</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">pagesize</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">size</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dataList</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">records</span>;</span><br><span class="line">    });</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p>​        对切换页码操作设置调用当前分页操作。</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//切换页码</span></span><br><span class="line"><span class="title function_">handleCurrentChange</span>(<span class="params">currentPage</span>) {</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">currentPage</span> = currentPage;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">getAll</span>();</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>使用el分页组件</li><li>定义分页组件绑定的数据模型</li><li>异步调用获取分页数据</li><li>分页数据页面回显</li></ol><h5 id="F-6-删除功能维护"><a href="#F-6-删除功能维护" class="headerlink" title="F-6.删除功能维护"></a>F-6.删除功能维护</h5><p>​        由于使用了分页功能，当最后一页只有一条数据时，删除操作就会出现BUG，最后一页无数据但是独立展示，对分页查询功能进行后台功能维护，如果当前页码值大于最大页码值，重新执行查询。其实这个问题解决方案很多，这里给出比较简单的一种处理方案。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping("{currentPage}/{pageSize}")</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">getPage</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> currentPage,<span class="meta">@PathVariable</span> <span class="type">int</span> pageSize)</span>{</span><br><span class="line">    IPage&lt;Book&gt; page = bookService.getPage(currentPage, pageSize);</span><br><span class="line">    <span class="comment">//如果当前页码值大于了总页码值，那么重新执行查询操作，使用最大页码值作为当前页码值</span></span><br><span class="line">    <span class="keyword">if</span>( currentPage &gt; page.getPages()){</span><br><span class="line">        page = bookService.getPage((<span class="type">int</span>)page.getPages(), pageSize);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">R</span>(<span class="literal">true</span>, page);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h5 id="F-7-条件查询功能"><a href="#F-7-条件查询功能" class="headerlink" title="F-7.条件查询功能"></a>F-7.条件查询功能</h5><p>​        最后一个功能来做条件查询，其实条件查询可以理解为分页查询的时候除了携带分页数据再多带几个数据的查询。这些多带的数据就是查询条件。比较一下不带条件的分页查询与带条件的分页查询差别之处，这个功能就好做了</p><ul><li><p>页面封装的数据：带不带条件影响的仅仅是一次性传递到后台的数据总量，由传递2个分页相关数据转换成2个分页数据加若干个条件</p></li><li><p>后台查询功能：查询时由不带条件，转换成带条件，反正不带条件的时候查询条件对象使用的是null，现在换成具体条件，差别不大</p></li><li><p>查询结果：不管带不带条件，出来的数据只是有数量上的差别，其他都差别，这个可以忽略</p><p>经过上述分析，看来需要在页面发送请求的格式方面做一定的修改，后台的调用数据层操作时发送修改，其他没有区别。</p><p>页面发送请求时，两个分页数据仍然使用路径变量，其他条件采用动态拼装url参数的形式传递。</p><p><strong>页面封装查询条件字段</strong></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pagination: {</span><br><span class="line">//分页相关模型数据</span><br><span class="line">currentPage: 1,//当前页码</span><br><span class="line">pageSize:10,//每页显示的记录数</span><br><span class="line">total:0,//总记录数</span><br><span class="line">name: "",</span><br><span class="line">type: "",</span><br><span class="line">description: ""</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p>页面添加查询条件字段对应的数据模型绑定名称</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"filter-container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">placeholder</span>=<span class="string">"图书类别"</span> <span class="attr">v-model</span>=<span class="string">"pagination.type"</span> <span class="attr">class</span>=<span class="string">"filter-item"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">placeholder</span>=<span class="string">"图书名称"</span> <span class="attr">v-model</span>=<span class="string">"pagination.name"</span> <span class="attr">class</span>=<span class="string">"filter-item"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">placeholder</span>=<span class="string">"图书描述"</span> <span class="attr">v-model</span>=<span class="string">"pagination.description"</span> <span class="attr">class</span>=<span class="string">"filter-item"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">"getAll()"</span> <span class="attr">class</span>=<span class="string">"dalfBut"</span>&gt;</span>查询<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">"primary"</span> <span class="attr">class</span>=<span class="string">"butT"</span> @<span class="attr">click</span>=<span class="string">"handleCreate()"</span>&gt;</span>新建<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>将查询条件组织成url参数，添加到请求url地址中，这里可以借助其他类库快速开发，当前使用手工形式拼接，降低学习要求</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getAll</span>(<span class="params"></span>) {</span><br><span class="line">    <span class="comment">//1.获取查询条件,拼接查询条件</span></span><br><span class="line">    param = <span class="string">"?name="</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">name</span>;</span><br><span class="line">    param += <span class="string">"&amp;type="</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">type</span>;</span><br><span class="line">    param += <span class="string">"&amp;description="</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">description</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">"-----------------"</span>+ param);</span><br><span class="line">    axios.<span class="title function_">get</span>(<span class="string">"/books/"</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">currentPage</span>+<span class="string">"/"</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">pageSize</span>+param).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dataList</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">records</span>;</span><br><span class="line">    });</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure><p>后台代码中定义实体类封查询条件</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping("{currentPage}/{pageSize}")</span></span><br><span class="line"><span class="keyword">public</span> R <span class="title function_">getAll</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> currentPage,<span class="meta">@PathVariable</span> <span class="type">int</span> pageSize,Book book)</span> {</span><br><span class="line">    System.out.println(<span class="string">"参数=====&gt;"</span>+book);</span><br><span class="line">    IPage&lt;Book&gt; pageBook = bookService.getPage(currentPage,pageSize);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">R</span>(<span class="literal">null</span> != pageBook ,pageBook);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>对应业务层接口与实现类进行修正</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IBookService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;Book&gt; {</span><br><span class="line">    IPage&lt;Book&gt; <span class="title function_">getPage</span><span class="params">(Integer currentPage,Integer pageSize,Book queryBook)</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl2</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;BookDao,Book&gt; <span class="keyword">implements</span> <span class="title class_">IBookService</span> {</span><br><span class="line">    <span class="keyword">public</span> IPage&lt;Book&gt; <span class="title function_">getPage</span><span class="params">(Integer currentPage,Integer pageSize,Book queryBook)</span>{</span><br><span class="line">        <span class="type">IPage</span> <span class="variable">page</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Page</span>(currentPage,pageSize);</span><br><span class="line">        LambdaQueryWrapper&lt;Book&gt; lqw = <span class="keyword">new</span> <span class="title class_">LambdaQueryWrapper</span>&lt;Book&gt;();</span><br><span class="line">        lqw.like(Strings.isNotEmpty(queryBook.getName()),Book::getName,queryBook.getName());</span><br><span class="line">        lqw.like(Strings.isNotEmpty(queryBook.getType()),Book::getType,queryBook.getType());</span><br><span class="line">        lqw.like(Strings.isNotEmpty(queryBook.getDescription()),Book::getDescription,queryBook.getDescription());</span><br><span class="line">        <span class="keyword">return</span> bookDao.selectPage(page,lqw);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>页面回显数据</p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">getAll</span>(<span class="params"></span>) {</span><br><span class="line">    <span class="comment">//1.获取查询条件,拼接查询条件</span></span><br><span class="line">    param = <span class="string">"?name="</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">name</span>;</span><br><span class="line">    param += <span class="string">"&amp;type="</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">type</span>;</span><br><span class="line">    param += <span class="string">"&amp;description="</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">description</span>;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">"-----------------"</span>+ param);</span><br><span class="line">    axios.<span class="title function_">get</span>(<span class="string">"/books/"</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">currentPage</span>+<span class="string">"/"</span>+<span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">pageSize</span>+param).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> {</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">total</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">total</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">currentPage</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">current</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">pagination</span>.<span class="property">pagesize</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">size</span>;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">dataList</span> = res.<span class="property">data</span>.<span class="property">data</span>.<span class="property">records</span>;</span><br><span class="line">    });</span><br><span class="line">},</span><br></pre></td></tr></tbody></table></figure></li></ul><p><strong>总结</strong></p><ol><li>定义查询条件数据模型（当前封装到分页数据模型中）</li><li>异步调用分页功能并通过请求参数传递数据到后台</li></ol><h2 id="基础篇完结"><a href="#基础篇完结" class="headerlink" title="基础篇完结"></a>基础篇完结</h2><p>​        基础篇到这里就全部结束了，在基础篇中带着大家学习了如何创建一个SpringBoot工程，然后学习了SpringBoot的基础配置语法格式，接下来对常见的市面上的实用技术做了整合，最后通过一个小的案例对前面学习的内容做了一个综合应用。整体来说就是一个最基本的入门，关于SpringBoot的实际开发其实接触的还是很少的，我们到实用篇和原理篇中继续吧，各位小伙伴，加油学习，再见。</p><h1 id="SpringBoot运维实用篇"><a href="#SpringBoot运维实用篇" class="headerlink" title="SpringBoot运维实用篇"></a>SpringBoot运维实用篇</h1><p>​        基础篇发布以后，看到了很多小伙伴在网上的留言，也帮助超过100位小伙伴解决了一些遇到的问题，并且已经发现了部分问题具有典型性，预计将有些问题在后面篇章的合适位置添加到本套课程中，作为解决方案提供给大家。</p><p>​        从此刻开始，咱们就要进入到实用篇的学习了。实用篇是在基础篇的根基之上，补全SpringBoot的知识图谱。比如在基础篇中只给大家讲了yaml的语法格式，但是具体写yaml文件的时候还有很多实用开发过程中的坑，这些在实用篇中都要进行学习。</p><p>​        实用篇共分为两块内容，分别是运维实用篇和开发实用篇。其实划分的标准是我自己制定的，因为这里面的知识有一些还是比较散的，做两个阶段的划分是为了更好的将同类知识点进行归类，帮助学习者找到知识之间的关联性，这样有助于知识的记忆存储转换，经过一系列的知识反复出现与强化练习，将临时记忆转换成永久性记忆。做课程嘛，不能仅以讲完为目标，要以学习者的学习收获为目标，这也是我这么多年教学秉承的基本理念。</p><p>​        下面就从运维实用篇开始讲，在运维实用篇中，我给学习者的定位是玩转配置，为开发实用篇中做各种技术的整合做好准备工作。与开发实用篇相比，运维实用篇的内容显得略微单薄，并且有部分知识模块在运维实用篇和开发实用篇中都要讲一部分，这些内容都后置到开发实用篇中了。废话不说了，先看看运维实用篇中都包含哪些内容：</p><ul><li>SpringBoot程序的打包与运行</li><li>配置高级</li><li>多环境开发</li><li>日志</li></ul><p>​        下面开启第一部分SpringBoot程序打包与运行的学习</p><h2 id="YW-1-SpringBoot程序的打包与运行"><a href="#YW-1-SpringBoot程序的打包与运行" class="headerlink" title="YW-1.SpringBoot程序的打包与运行"></a>YW-1.SpringBoot程序的打包与运行</h2><p>​        刚开始做开发学习的小伙伴可能在有一个知识上面有错误的认知，我们天天写程序是在Idea下写的，运行也是在Idea下运行的。</p><img src="/2023/07/26/springboot100000/image-20211201091317258.png" alt="image-20211201091317258" style="zoom:67%;"><p>​        但是实际开发完成后，我们的项目是不可能运行在自己的电脑上的。</p><img src="/2023/07/26/springboot100000/image-20211201091341645.png" alt="image-20211201091341645" style="zoom:67%;"><p>​        我们以后制作的程序是运行在专用的服务器上的，简单说就是将你做的程序放在一台独立运行的电脑上，这台电脑要比你开发使用的计算机更专业，并且安全等级各个方面要远超过你现在的电脑。</p><img src="/2023/07/26/springboot100000/image-20211201091502040.png" alt="image-20211201091502040" style="zoom:67%;"><p>​        那我们的程序如何放置在这台专用的电脑上呢，这就要将我们的程序先组织成一个文件，然后将这个文件传输到这台服务器上。这里面就存在两个过程，一个是打包的过程，另一个是运行的过程。</p><p><font color="#f0f"><b>温馨提示</b></font></p><p>​        企业项目上线为了保障环境适配性会采用下面流程发布项目，这里不讨论此过程。</p><ol><li>开发部门使用Git、SVN等版本控制工具上传工程到版本服务器</li><li>服务器使用版本控制工具下载工程</li><li>服务器上使用Maven工具在当前真机环境下重新构建项目</li><li>启动服务</li></ol><p>​        继续说我们的打包和运行过程。所谓打包指将程序转换成一个可执行的文件，所谓运行指不依赖开发环境执行打包产生的文件。上述两个操作都有对应的命令可以快速执行。</p><h3 id="程序打包"><a href="#程序打包" class="headerlink" title="程序打包"></a><strong>程序打包</strong></h3><p>​        SpringBoot程序是基于Maven创建的，在Maven中提供有打包的指令，叫做package。本操作可以在Idea环境下执行。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn <span class="keyword">package</span></span><br></pre></td></tr></tbody></table></figure><p>​        打包后会产生一个与工程名类似的jar文件，其名称是由模块名+版本号+.jar组成的。</p><h3 id="程序运行"><a href="#程序运行" class="headerlink" title="程序运行"></a><strong>程序运行</strong></h3><p>​        程序包打好以后，就可以直接执行了。在程序包所在路径下，执行指令。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar 工程包名.jar</span><br></pre></td></tr></tbody></table></figure><p>​        执行程序打包指令后，程序正常运行，与在Idea下执行程序没有区别。</p><p>​        <font color="#ff0000"><b>特别关注</b></font>：如果你的计算机中没有安装java的jdk环境，是无法正确执行上述操作的，因为程序执行使用的是java指令。</p><p>​        <font color="#ff0000"><b>特别关注</b></font>：在使用向导创建SpringBoot工程时，pom.xml文件中会有如下配置，这一段配置千万不能删除，否则打包后无法正常执行程序。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>SpringBoot工程可以基于java环境下独立运行jar文件启动服务</li><li>SpringBoot工程执行mvn命令package进行打包</li><li>执行jar命令：java –jar 工程名.jar</li></ol><h3 id="SpringBoot程序打包失败处理"><a href="#SpringBoot程序打包失败处理" class="headerlink" title="SpringBoot程序打包失败处理"></a>SpringBoot程序打包失败处理</h3><p>​        有些小伙伴打包以后执行会出现一些问题，导致程序无法正常执行，例如下面的现象</p><img src="/2023/07/26/springboot100000/image-20211201094223991.png" alt="image-20211201094223991" style="zoom:67%;"><p>​        要想搞清楚这个问题就要说说.jar文件的工作机制了，知道了这个东西就知道如何避免此类问题的发生了。</p><p>​        搞java开发平时会接触很多jar包，比如mysql的驱动jar包，而上面我们打包程序后得到的也是一个jar文件。这个时候如果你使用上面的java -jar指令去执行mysql的驱动jar包就会出现上述不可执行的现象，而我们的SpringBoot项目为什么能执行呢？其实是因为打包方式不一样。</p><p>​        在SpringBoot工程的pom.xml中有下面这组配置，这组配置决定了打包出来的程序包是否可以执行。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        我们分别开启这段配置和注释掉这段配置分别执行两次打包，然后观察两次打包后的程序包的差别，共有3处比较明显的特征</p><ul><li>打包后文件的大小不同</li><li>打包后所包含的内容不同</li><li>打包程序中个别文件内容不同</li></ul><p>​        先看第一个现象，文件大小不同。带有配置时打包生成的程序包大小如下：</p><img src="/2023/07/26/springboot100000/image-20211201095610270.png" alt="image-20211201095610270" style="zoom:150%;"><p>​        不难看出，带有配置的程序包体积比不带配置的大了30倍，那这里面都有什么呢？能差这么多？下面看看里面的内容有什么区别。</p><p>​        <img src="/2023/07/26/springboot100000/image-20211201101541267.png" alt="image-20211201101541267" style="zoom:50%;"><img src="/2023/07/26/springboot100000/image-20211201101652868.png" alt="image-20211201101652868" style="zoom:50%;"></p><p>​        我们发现内容也完全不一样，仅有一个目录是一样的，叫做META-INF。打开容量大的程序包中的BOOT-INF目录下的classes目录，我们发现其中的内容居然和容量小的程序包中的内容完全一样。</p><p>​        <img src="/2023/07/26/springboot100000/image-20211201101805569.png" alt="image-20211201101805569" style="zoom:50%;"><img src="/2023/07/26/springboot100000/image-20211201101652868.png" alt="image-20211201101652868" style="zoom:50%;"></p><p>​        原来大的程序包中除了包含小的程序包中的内容，还有别的东西。都有什么呢？回到BOOT-INF目录下，打开lib目录，里面显示了很多个jar文件。</p><p>​        <img src="/2023/07/26/springboot100000/image-20211201102025791.png" alt="image-20211201102025791" style="zoom:50%;"></p><p>​        仔细翻阅不难发现，这些jar文件都是我们制作这个工程时导入的坐标对应的文件。大概可以想明白了，SpringBoot程序为了让自己打包生成的程序可以独立运行，不仅将项目中自己开发的内容进行了打包，还把当前工程运行需要使用的jar包全部打包进来了。为什么这样做呢？就是为了可以独立运行。不依赖程序包外部的任何资源可以独立运行当前程序。这也是为什么大的程序包容量是小的程序包容量的30倍的主要原因。</p><p>​        再看看大程序包还有什么不同之处，在最外层目录包含一个org目录，进入此目录，目录名是org\springframework\boot\loader，在里面可以找到一个<font color="#ff0000"><b>JarLauncher.class</b></font>的文件，先记得这个文件。再看这套目录名，明显是一个Spring的目录名，为什么要把Spring框架的东西打包到这个程序包中呢？不清楚。</p><p>​        回到两个程序包的最外层目录，查看名称相同的文件夹META-INF下都有一个叫做MANIFEST.MF的文件，但是大小不同，打开文件，比较内容区别</p><ul><li><p>小容量文件的MANIFEST.MF</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Manifest-Version: <span class="number">1.0</span></span><br><span class="line">Implementation-Title: springboot_08_ssmp</span><br><span class="line">Implementation-Version: <span class="number">0.0</span><span class="number">.1</span>-SNAPSHOT</span><br><span class="line">Build-Jdk-Spec: <span class="number">1.8</span></span><br><span class="line">Created-By: Maven Jar Plugin <span class="number">3.2</span><span class="number">.0</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>大容量文件的MANIFEST.MF</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Manifest-Version: <span class="number">1.0</span></span><br><span class="line">Spring-Boot-Classpath-Index: BOOT-INF/classpath.idx</span><br><span class="line">Implementation-Title: springboot_08_ssmp</span><br><span class="line">Implementation-Version: <span class="number">0.0</span><span class="number">.1</span>-SNAPSHOT</span><br><span class="line">Spring-Boot-Layers-Index: BOOT-INF/layers.idx</span><br><span class="line">Start-Class: com.itheima.SSMPApplication</span><br><span class="line">Spring-Boot-Classes: BOOT-INF/classes/</span><br><span class="line">Spring-Boot-Lib: BOOT-INF/lib/</span><br><span class="line">Build-Jdk-Spec: <span class="number">1.8</span></span><br><span class="line">Spring-Boot-Version: <span class="number">2.5</span><span class="number">.4</span></span><br><span class="line">Created-By: Maven Jar Plugin <span class="number">3.2</span><span class="number">.0</span></span><br><span class="line">Main-Class: org.springframework.boot.loader.JarLauncher</span><br></pre></td></tr></tbody></table></figure></li></ul><p>​        大文件中明显比小文件中多了几行信息，其中最后一行信息是Main-Class: org.springframework.boot.loader.<font color="#ff0000"><b>JarLauncher</b></font>。这句话什么意思呢？如果使用java -jar执行此程序包，将执行Main-Class属性配置的类，这个类恰巧就是前面看到的那个文件。原来SpringBoot打包程序中出现Spring框架的东西是为这里服务的。而这个org.springframework.boot.loader.<font color="#ff0000"><b>JarLauncher</b></font>类内部要查找Start-Class属性中配置的类，并执行对应的类。这个属性在当前配置中也存在，对应的就是我们的引导类类名。</p><p>​        现在这组设定的作用就搞清楚了</p><ol><li>SpringBoot程序添加配置后会打出一个特殊的包，包含Spring框架部分功能，原始工程内容，原始工程依赖的jar包</li><li>首先读取MANIFEST.MF文件中的Main-Class属性，用来标记执行java -jar命令后运行的类</li><li>JarLauncher类执行时会找到Start-Class属性，也就是启动类类名</li><li>运行启动类时会运行当前工程的内容</li><li>运行当前工程时会使用依赖的jar包，从lib目录中查找</li></ol><p>​        看来SpringBoot打出来了包为了能够独立运行，简直是煞费苦心，将所有需要使用的资源全部都添加到了这个包里。这就是为什么这个jar包能独立运行的原因。</p><p>​        再来看之前的报错信息：</p><img src="/2023/07/26/springboot100000/image-20211201094223991.png" alt="image-20211201094223991" style="zoom:67%;"><p>​        由于打包时没有使用那段配置，结果打包后形成了一个普通的jar包，在MANIFEST.MF文件中也就没有了Main-Class对应的属性了，所以运行时提示找不到主清单属性，这就是报错的原因。</p><p>​        上述内容搞清楚对我们编程意义并不大，但是对各位小伙伴理清楚SpringBoot工程独立运行的机制是有帮助的。其实整体过程主要是带着大家分析，如果以后遇到了类似的问题，多给自己提问，多问一个为什么，兴趣自己就可以独立解决问题了。</p><p><strong>总结</strong></p><ol><li>spring-boot-maven-plugin插件用于将当前程序打包成一个可以独立运行的程序包</li></ol><h3 id="命令行启动常见问题及解决方案"><a href="#命令行启动常见问题及解决方案" class="headerlink" title="命令行启动常见问题及解决方案"></a>命令行启动常见问题及解决方案</h3><p>​        各位小伙伴在DOS环境下启动SpringBoot工程时，可能会遇到端口占用的问题。给大家一组命令，不用深入学习，备用吧。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 查询端口</span><br><span class="line">netstat -ano</span><br><span class="line"># 查询指定端口</span><br><span class="line">netstat -ano |findstr <span class="string">"端口号"</span></span><br><span class="line"># 根据进程PID查询进程名称</span><br><span class="line">tasklist |findstr <span class="string">"进程PID号"</span></span><br><span class="line"># 根据PID杀死任务</span><br><span class="line">taskkill /F /PID <span class="string">"进程PID号"</span></span><br><span class="line"># 根据进程名称杀死任务</span><br><span class="line">taskkill -f -t -im <span class="string">"进程名称"</span></span><br></pre></td></tr></tbody></table></figure><p>​        关于打包与运行程序其实还有一系列的配置和参数，下面的内容中遇到再说，这里先开个头，知道如何打包和运行程序。</p><h3 id="SpringBoot项目快速启动（Linux版）"><a href="#SpringBoot项目快速启动（Linux版）" class="headerlink" title="SpringBoot项目快速启动（Linux版）"></a>SpringBoot项目快速启动（Linux版）</h3><p>​        其实对于Linux系统下的程序运行与Windows系统下的程序运行差别不大，命令还是那组命令，只不过各位小伙伴可能对Linux指令不太熟悉，结果就会导致各种各样的问题发生。比如防火墙如何关闭，IP地址如何查询，JDK如何安装等等。这里不作为重点内容给大家普及了，了解一下整体过程就行了。</p><h2 id="YW-2-配置高级"><a href="#YW-2-配置高级" class="headerlink" title="YW-2.配置高级"></a>YW-2.配置高级</h2><p>​        关于配置在基础篇讲过一部分，基础篇的配置总体上来说就是让各位小伙伴掌握配置的格式。比如配置文件如何写啊，写好的数据如何读取啊，都是基础的语法级知识。在实用篇中就要集中在配置的应用这个方面了，下面就开始配置高级相关内容的第一部分学习，为什么说第一部分，因为在开发实用篇中还有对应的配置高级知识要进行学习。</p><h3 id="YW-2-1-临时属性设置"><a href="#YW-2-1-临时属性设置" class="headerlink" title="YW-2-1.临时属性设置"></a>YW-2-1.临时属性设置</h3><p>​        目前我们的程序包打好了，可以发布了。但是程序包打好以后，里面的配置都已经是固定的了，比如配置了服务器的端口是8080。如果我要启动项目，发现当前我的服务器上已经有应用启动起来并且占用了8080端口，这个时候就尴尬了。难道要重新把打包好的程序修改一下吗？比如我要把打包好的程序启动端口改成80。</p><p><img src="/2023/07/26/springboot100000/image-20211206095113771.png" alt="image-20211206095113771">             <img src="/2023/07/26/springboot100000/image-20211206095524343.png" alt="image-20211206095524343">             <img src="/2023/07/26/springboot100000/image-20211206095101581.png" alt="image-20211206095101581"></p><p>​        SpringBoot提供了灵活的配置方式，如果你发现你的项目中有个别属性需要重新配置，可以使用临时属性的方式快速修改某些配置。方法也特别简单，在启动的时候添加上对应参数就可以了。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java –jar springboot.jar –-server.port=<span class="number">80</span></span><br></pre></td></tr></tbody></table></figure><p>​        上面的命令是启动SpringBoot程序包的命令，在命令输入完毕后，空一格，然后输入两个-号。下面按照属性名=属性值的形式添加对应参数就可以了。记得，这里的格式不是yaml中的书写格式，当属性存在多级名称时，中间使用点分隔，和properties文件中的属性格式完全相同。</p><p>​        如果你发现要修改的属性不止一个，可以按照上述格式继续写，属性与属性之间使用空格分隔。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java –jar springboot.jar –-server.port=<span class="number">80</span> --logging.level.root=debug</span><br></pre></td></tr></tbody></table></figure><h4 id="属性加载优先级"><a href="#属性加载优先级" class="headerlink" title="属性加载优先级"></a><strong>属性加载优先级</strong></h4><p>​        现在我们的程序配置受两个地方控制了，第一配置文件，第二临时属性。并且我们发现临时属性的加载优先级要高于配置文件的。那是否还有其他的配置方式呢？其实是有的，而且还不少，打开官方文档中对应的内容，就可以查看配置读取的优先顺序。地址奉上：<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html">https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config</a></p><img src="/2023/07/26/springboot100000/image-20211206100859236.png" alt="image-20211206100859236" style="zoom:67%;"><p>​        我们可以看到，居然有14种配置的位置，而我们现在使用的是这里面的2个。第3条Config data说的就是使用配置文件，第11条Command line arguments说的就是使用命令行临时参数。而这14种配置的顺序就是SpringBoot加载配置的顺序，言外之意，命令行临时属性比配置文件的加载优先级高，所以这个列表上面的优先级低，下面的优先级高。其实这个东西不用背的，你就记得一点，你最终要什么效果，你自己是知道的，不管这个顺序是怎么个高低排序，开发时一定要配置成你要的顺序为准。这个顺序只是在你想不明白问题的时候帮助你分析罢了。</p><p>​        比如你现在加载了一个user.name属性。结果你发现出来的结果和你想的不一样，那肯定是别的优先级比你高的属性覆盖你的配置属性了，那你就可以看着这个顺序挨个排查。哪个位置有可能覆盖了你的属性。</p><p>​        我在课程评论区看到小伙伴学习基础篇的时候问这个问题了，就是这个原因造成的。在yaml中配置了user.name属性值，然后读取出来的时候居然不是自己的配置值，因为在系统属性中有一个属性叫做user.name，两个相互冲突了。而系统属性的加载优先顺序在上面这个列表中是5号，高于3号，所以SpringBoot最终会加载系统配置属性user.name。</p><p><strong>总结</strong></p><ol><li>使用jar命令启动SpringBoot工程时可以使用临时属性替换配置文件中的属性</li><li>临时属性添加方式：java –jar 工程名.jar –-属性名=值</li><li>多个临时属性之间使用空格分隔</li><li>临时属性必须是当前boot工程支持的属性，否则设置无效</li></ol><h4 id="开发环境中使用临时属性"><a href="#开发环境中使用临时属性" class="headerlink" title="开发环境中使用临时属性"></a>开发环境中使用临时属性</h4><p>​        临时使用目前是有了，但是上线的时候通过命令行输入的临时属性必须是正确的啊，那这些属性配置值我们必须在开发环境中测试好才行。下面说一下开发环境中如何使用临时属性，其实就是Idea界面下如何操作了。</p><p>​        打开SpringBoot引导类的运行界面，在里面找到配置项。其中Program arguments对应的位置就是添加临时属性的，可以加几个试试效果。</p><img src="/2023/07/26/springboot100000/image-20211206101947622.png" alt="image-20211206101947622" style="zoom:80%;"><p>​        做到这里其实可以产生一个思考了，如果对java编程熟悉的小伙伴应该知道，我们运行main方法的时候，如果想使用main方法的参数，也就是下面的args参数，就是在上面这个位置添加的参数。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        原来是这样，通过这个args就可以获取到参数。再来看我们的引导类是如何书写的</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">    SpringApplication.run(SSMPApplication.class,args);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        这个args参数居然传递给了run方法，看来在Idea中配置的临时参数就是通过这个位置传递到我们的程序中的。言外之意，这里如果不用这个args是不是就断开了外部传递临时属性的入口呢？是这样的，我们可以使用下面的调用方式，这样外部临时属性就无法进入到SpringBoot程序中了。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">    SpringApplication.run(SSMPApplication.class);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        或者还可以使用如下格式来玩这个操作，就是将配置不写在配置文件中，直接写成一个字符串数组，传递给程序入口。当然，这种做法并没有什么实际开发意义。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">    String[] arg = <span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">1</span>];</span><br><span class="line">    arg[<span class="number">0</span>] = <span class="string">"--server.port=8082"</span>;</span><br><span class="line">    SpringApplication.run(SSMPApplication.class, arg);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>启动SpringBoot程序时，可以选择是否使用命令行属性为SpringBoot程序传递启动属性</li></ol><p><strong>思考</strong></p><p>​        现在使用临时属性可以在启动项目前临时更改配置了，但是新的问题又出来了。临时属性好用是好用，就是写的多了会很麻烦。比如我现在有个需求，上线的时候使用临时属性配置20个值，这下可麻烦了，能不能搞得简单点，集中管理一下呢？比如说搞个文件，加载指定文件？还真可以。怎么做呢？咱们下一节再说。</p><h3 id="YW-2-2-配置文件分类"><a href="#YW-2-2-配置文件分类" class="headerlink" title="YW-2-2.配置文件分类"></a>YW-2-2.配置文件分类</h3><p>​        SpringBoot提供了配置文件和临时属性的方式来对程序进行配置。前面一直说的是临时属性，这一节要说说配置文件了。其实这个配置文件我们一直在使用，只不过我们用的是SpringBoot提供的4级配置文件中的其中一个级别。4个级别分别是：</p><ul><li>类路径下配置文件（一直使用的是这个，也就是resources目录中的application.yml文件）</li><li>类路径下config目录下配置文件</li><li>程序包所在目录中配置文件</li><li>程序包所在目录中config目录下配置文件</li></ul><p>​        好复杂，一个一个说。其实上述4种文件是提供给你了4种配置文件书写的位置，功能都是一样的，都是做配置的。那大家关心的就是差别了，没错，就是因为位置不同，产生了差异。总体上来说，4种配置文件如果都存在的话，有一个优先级的问题，说白了就是加入4个文件我都有，里面都有一样的配置，谁生效的问题。上面4个文件的加载优先顺序为</p><ol><li>file ：config/application.yml <strong>【最高】</strong></li><li>file ：application.yml</li><li>classpath：config/application.yml</li><li>classpath：application.yml  <strong>【最低】</strong></li></ol><p>​        那为什么设计这种多种呢？说一个最典型的应用吧。</p><ul><li>场景A：你作为一个开发者，你做程序的时候为了方便自己写代码，配置的数据库肯定是连接你自己本机的，咱们使用4这个级别，也就是之前一直用的application.yml。</li><li>场景B：现在项目开发到了一个阶段，要联调测试了，连接的数据库是测试服务器的数据库，肯定要换一组配置吧。你可以选择把你之前的文件中的内容都改了，目前还不麻烦。</li><li>场景C：测试完了，一切OK。你继续写你的代码，你发现你原来写的配置文件被改成测试服务器的内容了，你要再改回来。现在明白了不？场景B中把你的内容都改掉了，你现在要重新改回来，以后呢？改来改去吗？</li></ul><p>​        解决方案很简单，用上面的3这个级别的配置文件就可以快速解决这个问题，再写一个配置就行了。两个配置文件共存，因为config目录中的配置加载优先级比你的高，所以配置项如果和级别4里面的内容相同就覆盖了，这样是不是很简单？</p><p>​        级别1和2什么时候使用呢？程序打包以后就要用这个级别了，管你程序里面配置写的是什么？我的级别高，可以轻松覆盖你，就不用考虑这些配置冲突的问题了。</p><p><strong>总结</strong></p><ol><li><p>配置文件分为4种</p><ul><li>项目类路径配置文件：服务于开发人员本机开发与测试</li><li>项目类路径config目录中配置文件：服务于项目经理整体调控</li><li>工程路径配置文件：服务于运维人员配置涉密线上环境</li><li>工程路径config目录中配置文件：服务于运维经理整体调控</li></ul></li><li><p>多层级配置文件间的属性采用叠加并覆盖的形式作用于程序</p></li></ol><h3 id="YW-2-3-自定义配置文件"><a href="#YW-2-3-自定义配置文件" class="headerlink" title="YW-2-3.自定义配置文件"></a>YW-2-3.自定义配置文件</h3><p>​        之前咱们做配置使用的配置文件都是application.yml，其实这个文件也是可以改名字的，这样方便维护。比如我2020年4月1日搞活动，走了一组配置，2020年5月1日活动取消，恢复原始配置，这个时候只需要重新更换一下配置文件就可以了。但是你总不能在原始配置文件上修改吧，不然搞完活动以后，活动的配置就留不下来了，不利于维护。</p><p>​        自定义配置文件方式有如下两种：</p><p><strong>方式一：使用临时属性设置配置文件名，注意仅仅是名称，不要带扩展名</strong></p><img src="/2023/07/26/springboot100000/image-20211206105548238.png" alt="image-20211206105548238" style="zoom:67%;"><p><strong>方式二：使用临时属性设置配置文件路径，这个是全路径名</strong></p><img src="/2023/07/26/springboot100000/image-20211206105716450.png" alt="image-20211206105716450" style="zoom:67%;"><p>​        也可以设置加载多个配置文件</p><img src="/2023/07/26/springboot100000/image-20211206105750285.png" alt="image-20211206105750285" style="zoom:67%;"><p>​        使用的属性一个是spring.config.name，另一个是spring.config.location，这个一定要区别清楚。</p><p><font color="#f0f"><b>温馨提示</b></font></p><p>​        我们现在研究的都是SpringBoot单体项目，就是单服务器版本。其实企业开发现在更多的是使用基于SpringCloud技术的多服务器项目。这种配置方式和我们现在学习的完全不一样，所有的服务器将不再设置自己的配置文件，而是通过配置中心获取配置，动态加载配置信息。为什么这样做？集中管理。这里不再说这些了，后面再讲这些东西。</p><p><strong>总结</strong></p><ol><li>配置文件可以修改名称，通过启动参数设定</li><li>配置文件可以修改路径，通过启动参数设定</li><li>微服务开发中配置文件通过配置中心进行设置</li></ol><h2 id="YW-3-多环境开发"><a href="#YW-3-多环境开发" class="headerlink" title="YW-3.多环境开发"></a>YW-3.多环境开发</h2><p>​        讲的内容距离线上开发越来越近了，下面说一说多环境开发问题。</p><p>​        什么是多环境？其实就是说你的电脑上写的程序最终要放到别人的服务器上去运行。每个计算机环境不一样，这就是多环境。常见的多环境开发主要兼顾3种环境设置，开发环境——自己用的，测试环境——自己公司用的，生产环境——甲方爸爸用的。因为这是绝对不同的三台电脑，所以环境肯定有所不同，比如连接的数据库不一样，设置的访问端口不一样等等。</p><img src="/2023/07/26/springboot100000/image-20211206110958819.png" alt="image-20211206110958819" style="zoom:67%;"><h3 id="YW-3-1-多环境开发（yaml单一文件版）"><a href="#YW-3-1-多环境开发（yaml单一文件版）" class="headerlink" title="YW-3-1.多环境开发（yaml单一文件版）"></a>YW-3-1.多环境开发（yaml单一文件版）</h3><p>​        那什么是多环境开发？就是针对不同的环境设置不同的配置属性即可。比如你自己开发时，配置你的端口如下：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br></pre></td></tr></tbody></table></figure><p>​        如何想设计两组环境呢？中间使用三个减号分隔开</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">81</span></span><br></pre></td></tr></tbody></table></figure><p>​        如何区分两种环境呢？起名字呗</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span> <span class="string">pro</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">81</span></span><br></pre></td></tr></tbody></table></figure><p>​        那用哪一个呢？设置默认启动哪个就可以了</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span></span><br><span class="line"><span class="attr">active:</span> <span class="string">pro</span><span class="comment"># 启动pro</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span> <span class="string">pro</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">81</span></span><br></pre></td></tr></tbody></table></figure><p>​        就这么简单，再多来一组环境也OK</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span></span><br><span class="line"><span class="attr">active:</span> <span class="string">pro</span><span class="comment"># 启动pro</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span> <span class="string">pro</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span> <span class="string">dev</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">81</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span> <span class="string">test</span></span><br><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">82</span></span><br></pre></td></tr></tbody></table></figure><p>​        其中关于环境名称定义上述格式是过时格式，标准格式如下</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">config:</span></span><br><span class="line">    <span class="attr">activate:</span></span><br><span class="line">        <span class="attr">on-profile:</span> <span class="string">pro</span></span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>多环境开发需要设置若干种常用环境，例如开发、生产、测试环境</li><li>yaml格式中设置多环境使用—区分环境设置边界</li><li>每种环境的区别在于加载的配置属性不同</li><li>启用某种环境时需要指定启动时使用该环境</li></ol><h3 id="YW-3-2-多环境开发（yaml多文件版）"><a href="#YW-3-2-多环境开发（yaml多文件版）" class="headerlink" title="YW-3-2.多环境开发（yaml多文件版）"></a>YW-3-2.多环境开发（yaml多文件版）</h3><p>​        将所有的配置都放在一个配置文件中，尤其是每一个配置应用场景都不一样，这显然不合理，于是就有了将一个配置文件拆分成多个配置文件的想法。拆分后，每个配置文件中写自己的配置，主配置文件中写清楚用哪一个配置文件就好了。</p><p><strong>主配置文件</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span></span><br><span class="line"><span class="attr">active:</span> <span class="string">pro</span><span class="comment"># 启动pro</span></span><br></pre></td></tr></tbody></table></figure><p><strong>环境配置文件</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">80</span></span><br></pre></td></tr></tbody></table></figure><p>​        环境配置文件因为每一个都是配置自己的项，所以连名字都不用写里面了。那问题是如何区分这是哪一组配置呢？使用文件名区分。</p><p><strong>application-pro.yaml</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">80</span></span><br></pre></td></tr></tbody></table></figure><p><strong>application-dev.yaml</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line"><span class="attr">port:</span> <span class="number">81</span></span><br></pre></td></tr></tbody></table></figure><p>​        文件的命名规则为：application-环境名.yml。</p><p>​        在配置文件中，如果某些配置项所有环境都一样，可以将这些项写入到主配置中，只有哪些有区别的项才写入到环境配置文件中。</p><ul><li>主配置文件中设置公共配置（全局）</li><li>环境分类配置文件中常用于设置冲突属性（局部）</li></ul><p><strong>总结</strong></p><ol><li><p>可以使用独立配置文件定义环境属性</p></li><li><p>独立配置文件便于线上系统维护更新并保障系统安全性</p></li></ol><h3 id="YW-3-3-多环境开发（properties多文件版）"><a href="#YW-3-3-多环境开发（properties多文件版）" class="headerlink" title="YW-3-3.多环境开发（properties多文件版）"></a>YW-3-3.多环境开发（properties多文件版）</h3><p>​        SpringBoot最早期提供的配置文件格式是properties格式的，这种格式的多环境配置也了解一下吧。</p><p><strong>主配置文件</strong></p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.profiles.active</span>=<span class="string">pro</span></span><br></pre></td></tr></tbody></table></figure><p><strong>环境配置文件</strong></p><p><strong>application-pro.properties</strong></p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">80</span></span><br></pre></td></tr></tbody></table></figure><p><strong>application-dev.properties</strong></p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="string">81</span></span><br></pre></td></tr></tbody></table></figure><p>​        文件的命名规则为：application-环境名.properties。</p><p><strong>总结</strong></p><ol><li>properties文件多环境配置仅支持多文件格式</li></ol><h3 id="YW-3-4-多环境开发独立配置文件书写技巧"><a href="#YW-3-4-多环境开发独立配置文件书写技巧" class="headerlink" title="YW-3-4.多环境开发独立配置文件书写技巧"></a>YW-3-4.多环境开发独立配置文件书写技巧</h3><p>​        作为程序员在搞配置的时候往往处于一种分久必合合久必分的局面。开始先写一起，后来为了方便维护就拆分。对于多环境开发也是如此，下面给大家说一下如何基于多环境开发做配置独立管理，务必掌握。</p><p><strong>准备工作</strong></p><p>​        将所有的配置根据功能对配置文件中的信息进行拆分，并制作成独立的配置文件，命名规则如下</p><ul><li>application-devDB.yml</li><li>application-devRedis.yml</li><li>application-devMVC.yml</li></ul><p><strong>使用</strong></p><p>​        使用include属性在激活指定环境的情况下，同时对多个环境进行加载使其生效，多个环境间使用逗号分隔</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">devDB,devRedis,devMVC</span></span><br></pre></td></tr></tbody></table></figure><p>​        比较一下，现在相当于加载dev配置时，再加载对应的3组配置，从结构上就很清晰，用了什么，对应的名称是什么</p><p><strong>注意</strong></p><p>​        当主环境dev与其他环境有相同属性时，主环境属性生效；其他环境中有相同属性时，最后加载的环境属性生效</p><p><strong>改良</strong></p><p>​        但是上面的设置也有一个问题，比如我要切换dev环境为pro时，include也要修改。因为include属性只能使用一次，这就比较麻烦了。SpringBoot从2.4版开始使用group属性替代include属性，降低了配置书写量。简单说就是我先写好，你爱用哪个用哪个。</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span></span><br><span class="line">        <span class="attr">group:</span></span><br><span class="line">        <span class="attr">"dev":</span> <span class="string">devDB,devRedis,devMVC</span></span><br><span class="line">      <span class="attr">"pro":</span> <span class="string">proDB,proRedis,proMVC</span></span><br><span class="line">      <span class="attr">"test":</span> <span class="string">testDB,testRedis,testMVC</span></span><br></pre></td></tr></tbody></table></figure><p>​        现在再来看，如果切换dev到pro，只需要改一下是不是就结束了？完美！</p><p><strong>总结</strong></p><ol><li>多环境开发使用group属性设置配置文件分组，便于线上维护管理</li></ol><h3 id="YW-3-5-多环境开发控制"><a href="#YW-3-5-多环境开发控制" class="headerlink" title="YW-3-5.多环境开发控制"></a>YW-3-5.多环境开发控制</h3><p>​        多环境开发到这里基本上说完了，最后说一个冲突问题。就是maven和SpringBoot同时设置多环境的话怎么搞。</p><p>​        要想处理这个冲突问题，你要先理清一个关系，究竟谁在多环境开发中其主导地位。也就是说如果现在都设置了多环境，谁的应该是保留下来的，另一个应该遵从相同的设置。</p><p>​        maven是做什么的？项目构建管理的，最终生成代码包的，SpringBoot是干什么的？简化开发的。简化，又不是其主导作用。最终还是要靠maven来管理整个工程，所以SpringBoot应该听maven的。整个确认后下面就好做了。大体思想如下：</p><ul><li>先在maven环境中设置用什么具体的环境</li><li>在SpringBoot中读取maven设置的环境即可</li></ul><p><strong>maven中设置多环境（使用属性方式区分环境）</strong></p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">profiles</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>env_dev<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">profile.active</span>&gt;</span>dev<span class="tag">&lt;/<span class="name">profile.active</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">activeByDefault</span>&gt;</span>true<span class="tag">&lt;/<span class="name">activeByDefault</span>&gt;</span><span class="comment">&lt;!--默认启动环境--&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">profile</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span>&gt;</span>env_pro<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">profile.active</span>&gt;</span>pro<span class="tag">&lt;/<span class="name">profile.active</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">profile</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">profiles</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>SpringBoot中读取maven设置值</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line"><span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">@profile.active@</span></span><br></pre></td></tr></tbody></table></figure><p>​        上面的@属性名@就是读取maven中配置的属性值的语法格式。</p><p><strong>总结</strong></p><ol><li>当Maven与SpringBoot同时对多环境进行控制时，以Mavn为主，SpringBoot使用@..@占位符读取Maven对应的配置属性值</li><li>基于SpringBoot读取Maven配置属性的前提下，如果在Idea下测试工程时pom.xml每次更新需要手动compile方可生效</li></ol><h2 id="YW-4-日志"><a href="#YW-4-日志" class="headerlink" title="YW-4.日志"></a>YW-4.日志</h2><p>​        运维篇最后一部分我们来聊聊日志，日志大家不陌生，简单介绍一下。日志其实就是记录程序日常运行的信息，主要作用如下：</p><ul><li>编程期调试代码</li><li>运营期记录信息</li><li>记录日常运营重要信息（峰值流量、平均响应时长……）</li><li>记录应用报错信息（错误堆栈）</li><li>记录运维过程数据（扩容、宕机、报警……）</li></ul><p>​        或许各位小伙伴并不习惯于使用日志，没关系，慢慢多用，习惯就好。想进大厂，这是最基本的，别去面试的时候说没用过，完了，没机会了。</p><h4 id="YW-4-1-代码中使用日志工具记录日志"><a href="#YW-4-1-代码中使用日志工具记录日志" class="headerlink" title="YW-4-1.代码中使用日志工具记录日志"></a>YW-4-1.代码中使用日志工具记录日志</h4><p>​        日志的使用格式非常固定，直接上操作步骤：</p><p><strong>步骤①</strong>：添加日志记录操作</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping("/books")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> <span class="keyword">extends</span> <span class="title class_">BaseClass</span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(BookController.class);</span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getById</span><span class="params">()</span>{</span><br><span class="line">        log.debug(<span class="string">"debug..."</span>);</span><br><span class="line">        log.info(<span class="string">"info..."</span>);</span><br><span class="line">        log.warn(<span class="string">"warn..."</span>);</span><br><span class="line">        log.error(<span class="string">"error..."</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"springboot is running...2"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        上述代码中log对象就是用来记录日志的对象，下面的log.debug，log.info这些操作就是写日志的API了。</p><p><strong>步骤②</strong>：设置日志输出级别</p><p>​        日志设置好以后可以根据设置选择哪些参与记录。这里是根据日志的级别来设置的。日志的级别分为6种，分别是：</p><ul><li>TRACE：运行堆栈信息，使用率低</li><li>DEBUG：程序员调试代码使用</li><li>INFO：记录运维过程数据</li><li>WARN：记录运维过程报警数据</li><li>ERROR：记录错误堆栈信息</li><li>FATAL：灾难信息，合并计入ERROR</li></ul><p>​        一般情况下，开发时候使用DEBUG，上线后使用INFO，运维信息记录使用WARN即可。下面就设置一下日志级别：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启debug模式，输出调试信息，常用于检查系统运行状况</span></span><br><span class="line"><span class="attr">debug:</span> <span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure><p>​        这么设置太简单粗暴了，日志系统通常都提供了细粒度的控制</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 开启debug模式，输出调试信息，常用于检查系统运行状况</span></span><br><span class="line"><span class="attr">debug:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置日志级别，root表示根节点，即整体应用日志级别</span></span><br><span class="line"><span class="attr">logging:</span></span><br><span class="line"><span class="attr">level:</span></span><br><span class="line">    <span class="attr">root:</span> <span class="string">debug</span></span><br></pre></td></tr></tbody></table></figure><p>​        还可以再设置更细粒度的控制</p><p><strong>步骤③</strong>：设置日志组，控制指定包对应的日志输出级别，也可以直接控制指定包对应的日志输出级别</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line"><span class="comment"># 设置日志组</span></span><br><span class="line">    <span class="attr">group:</span></span><br><span class="line">    <span class="comment"># 自定义组名，设置当前组中所包含的包</span></span><br><span class="line">        <span class="attr">ebank:</span> <span class="string">com.itheima.controller</span></span><br><span class="line">    <span class="attr">level:</span></span><br><span class="line">    <span class="attr">root:</span> <span class="string">warn</span></span><br><span class="line">        <span class="comment"># 为对应组设置日志级别</span></span><br><span class="line">        <span class="attr">ebank:</span> <span class="string">debug</span></span><br><span class="line">    <span class="comment"># 为对包设置日志级别</span></span><br><span class="line">        <span class="attr">com.itheima.controller:</span> <span class="string">debug</span></span><br></pre></td></tr></tbody></table></figure><p>​        说白了就是总体设置一下，每个包设置一下，如果感觉设置的麻烦，就先把包分个组，对组设置，没了，就这些。</p><p><strong>总结</strong></p><ol><li>日志用于记录开发调试与运维过程消息</li><li>日志的级别共6种，通常使用4种即可，分别是DEBUG，INFO,WARN,ERROR</li><li>可以通过日志组或代码包的形式进行日志显示级别的控制</li></ol><h4 id="教你一招：优化日志对象创建代码"><a href="#教你一招：优化日志对象创建代码" class="headerlink" title="教你一招：优化日志对象创建代码"></a>教你一招：优化日志对象创建代码</h4><p>​        写代码的时候每个类都要写创建日志记录对象，这个可以优化一下，使用前面用过的lombok技术给我们提供的工具类即可。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping("/books")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> <span class="keyword">extends</span> <span class="title class_">BaseClass</span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(BookController.class);<span class="comment">//这一句可以不写了</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        导入lombok后使用注解搞定，日志对象名为log</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span><span class="comment">//这个注解替代了下面那一行</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping("/books")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> <span class="keyword">extends</span> <span class="title class_">BaseClass</span>{</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">log</span> <span class="operator">=</span> LoggerFactory.getLogger(BookController.class);<span class="comment">//这一句可以不写了</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>基于lombok提供的@Slf4j注解为类快速添加日志对象</li></ol><h4 id="YW-4-2-日志输出格式控制"><a href="#YW-4-2-日志输出格式控制" class="headerlink" title="YW-4-2.日志输出格式控制"></a>YW-4-2.日志输出格式控制</h4><p>​        日志已经能够记录了，但是目前记录的格式是SpringBoot给我们提供的，如果想自定义控制就需要自己设置了。先分析一下当前日志的记录格式。</p><p><img src="/2023/07/26/springboot100000/image-20211206123431222.png" alt="image-20211206123431222"></p><p>​        对于单条日志信息来说，日期，触发位置，记录信息是最核心的信息。级别用于做筛选过滤，PID与线程名用于做精准分析。了解这些信息后就可以DIY日志格式了。本课程不做详细的研究，有兴趣的小伙伴可以学习相关的知识。下面给出课程中模拟的官方日志模板的书写格式，便于大家学习。</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line"><span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">console:</span> <span class="string">"%d %clr(%p) --- [%16t] %clr(%-40.40c){cyan} : %m %n"</span></span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>日志输出格式设置规则</li></ol><h4 id="YW-4-3-日志文件"><a href="#YW-4-3-日志文件" class="headerlink" title="YW-4-3.日志文件"></a>YW-4-3.日志文件</h4><p>​        日志信息显示，记录已经控制住了，下面就要说一下日志的转存了。日志不能仅显示在控制台上，要把日志记录到文件中，方便后期维护查阅。</p><p>​        对于日志文件的使用存在各种各样的策略，例如每日记录，分类记录，报警后记录等。这里主要研究日志文件如何记录。</p><p>​        记录日志到文件中格式非常简单，设置日志文件名即可。</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line"><span class="attr">file:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">server.log</span></span><br></pre></td></tr></tbody></table></figure><p>​        虽然使用上述格式可以将日志记录下来了，但是面对线上的复杂情况，一个文件记录肯定是不能够满足运维要求的，通常会每天记录日志文件，同时为了便于维护，还要限制每个日志文件的大小。下面给出日志文件的常用配置方式：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line"><span class="attr">logback:</span></span><br><span class="line">    <span class="attr">rollingpolicy:</span></span><br><span class="line">        <span class="attr">max-file-size:</span> <span class="string">3KB</span></span><br><span class="line">            <span class="attr">file-name-pattern:</span> <span class="string">server.%d{yyyy-MM-dd}.%i.log</span></span><br></pre></td></tr></tbody></table></figure><p>​        以上格式是基于logback日志技术设置每日日志文件的设置格式，要求容量到达3KB以后就转存信息到第二个文件中。文件命名规则中的%d标识日期，%i是一个递增变量，用于区分日志文件。</p><p><strong>总结</strong></p><ol><li>日志记录到文件</li><li>日志文件格式设置</li></ol><h2 id="运维实用篇完结"><a href="#运维实用篇完结" class="headerlink" title="运维实用篇完结"></a>运维实用篇完结</h2><p>​        运维实用篇到这里就要先告一段落了，为什么不说结束呢？因为运维篇中还有一些知识，但是现在讲解过于分散了。所以要把这些知识与开发实用篇的知识结合在一起讲，也是本课程的教学设计的体现。</p><p>​        在整体运维实用篇中带着大家学习了4块内容，首先学习了如何运行SpringBoot程序，也就是程序的打包与运行，接下来对配置进行了升级学习，不再局限在配置文件中进行设置，通过临时属性，外部配置文件对项目的配置进行管控。在多环境开发中给大家介绍了多种多环境开发的格式，其实掌握一种即可，此外还给大家讲了多环境开发的一些技巧以及与maven的冲突解决方案。最后给大家介绍了日志系统，老实说日志这里讲的相当的潦草，因为大部分日志相关的知识都不应该在这门课中学习，这里只是告诉大家如何整合实用而已。</p><p>​        看了各位小伙伴的评论，知道你们再催更，我也在加油，一起努力吧，实用开发篇再会。实用开发篇会提高更新频度，不全部做完给大家更新了，我先把做好的一部分开放出来，随后做完一点就更新一点，额，好吧，就说到这里吧。</p><h1 id="SpringBoot开发实用篇"><a href="#SpringBoot开发实用篇" class="headerlink" title="SpringBoot开发实用篇"></a>SpringBoot开发实用篇</h1><p>​        怀着忐忑的心情，开始了开发实用篇文档的编写。为什么忐忑？特喵的债欠的太多，不知道从何写起。哎，不煽情了，开工。</p><p>​        运维实用篇完结以后，开发实用篇采用日更新的形式发布给各位小伙伴，基本上是每天一集，目前已经发布完毕。看评论区，好多小伙伴在求文档，所以赶紧来补文档，加班加点把开发实用篇的文档刨出来。</p><p>​        开发实用篇中因为牵扯到SpringBoot整合各种各样的技术，由于不是每个小伙伴对各种技术都有所掌握，所以在整合每一个技术之前，都会做一个快速的普及，这样的话内容整个开发实用篇所包含的内容就会比较多。各位小伙伴在学习的时候，如果对某一个技术不是很清楚，可以先跳过对应章节，或者先补充一下技术知识，然后再来看对应的课程。开发实用篇具体包含的内容如下：</p><ul><li>热部署</li><li>配置高级</li><li>测试</li><li>数据层解决方案</li><li>整合第三方技术</li><li>监控</li></ul><p>​        看目录感觉内容量并不是很大，但是在数据层解决方案和整合第三方技术中包含了大量的知识，一点一点慢慢学吧。下面开启第一部分热部署相关知识的学习</p><h2 id="KF-1-热部署"><a href="#KF-1-热部署" class="headerlink" title="KF-1.热部署"></a>KF-1.热部署</h2><p>​        什么是热部署？简单说就是你程序改了，现在要重新启动服务器，嫌麻烦？不用重启，服务器会自己悄悄的把更新后的程序给重新加载一遍，这就是热部署。</p><p>​        热部署的功能是如何实现的呢？这就要分两种情况来说了，非springboot工程和springboot工程的热部署实现方式完全不一样。先说一下原始的非springboot项目是如何实现热部署的。</p><p><strong>非springboot项目热部署实现原理</strong></p><p>​        开发非springboot项目时，我们要制作一个web工程并通过tomcat启动，通常需要先安装tomcat服务器到磁盘中，开发的程序配置发布到安装的tomcat服务器上。如果想实现热部署的效果，这种情况其实有两种做法，一种是在tomcat服务器的配置文件中进行配置，这种做法与你使用什么IDE工具无关，不管你使用eclipse还是idea都行。还有一种做法是通过IDE工具进行配置，比如在idea工具中进行设置，这种形式需要依赖IDE工具，每款IDE工具不同，对应的配置也不太一样。但是核心思想是一样的，就是使用服务器去监控其中加载的应用，发现产生了变化就重新加载一次。</p><p>​        上面所说的非springboot项目实现热部署看上去是一个非常简单的过程，几乎每个小伙伴都能自己写出来。如果你不会写，我给你个最简单的思路，但是实际设计要比这复杂一些。例如启动一个定时任务，任务启动时记录每个文件的大小，以后每5秒比对一下每个文件的大小是否有改变，或者是否有新文件。如果没有改变，放行，如果有改变，刷新当前记录的文件信息，然后重新启动服务器，这就可以实现热部署了。当然，这个过程肯定不能这么做，比如我把一个打印输出的字符串”abc”改成”cba”，比对大小是没有变化的，但是内容缺实变了，所以这么做肯定不行，只是给大家打个比方，而且重启服务器这就是冷启动了，不能算热部署，领会精神吧。</p><p>​        看上去这个过程也没多复杂，在springboot项目中难道还有其他的弯弯绕吗？还真有。</p><p><strong>springboot项目热部署实现原理</strong></p><p>​        基于springboot开发的web工程其实有一个显著的特征，就是tomcat服务器内置了，还记得内嵌服务器吗？服务器是以一个对象的形式在spring容器中运行的。本来我们期望于tomcat服务器加载程序后由tomcat服务器盯着程序，你变化后我就重新启动重新加载，但是现在tomcat和我们的程序是平级的了，都是spring容器中的组件，这下就麻烦了，缺乏了一个直接的管理权，那该怎么做呢？简单，再搞一个程序X在spring容器中盯着你原始开发的程序A不就行了吗？确实，搞一个盯着程序A的程序X就行了，如果你自己开发的程序A变化了，那么程序X就命令tomcat容器重新加载程序A就OK了。并且这样做有一个好处，spring容器中东西不用全部重新加载一遍，只需要重新加载你开发的程序那一部分就可以了，这下效率又高了，挺好。</p><p>​    下面就说说，怎么搞出来这么一个程序X，肯定不是我们自己手写了，springboot早就做好了，搞一个坐标导入进去就行了。</p><h3 id="KF-1-1-手动启动热部署"><a href="#KF-1-1-手动启动热部署" class="headerlink" title="KF-1-1.手动启动热部署"></a>KF-1-1.手动启动热部署</h3><p><strong>步骤①</strong>：导入开发者工具对应的坐标</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：构建项目，可以使用快捷键激活此功能</p><p><img src="/2023/07/26/springboot100000/image-20220222121257218.png" alt="image-20220222121257218"></p><p>​        对应的快捷键一定要记得</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;CTR&gt;L+&lt;F9&gt;</span><br></pre></td></tr></tbody></table></figure><p>​        以上过程就实现了springboot工程的热部署，是不是挺简单的。不过这里需要把底层的工作工程给普及一下。</p><p><strong>重启与重载</strong></p><p>​        一个springboot项目在运行时实际上是分两个过程进行的，根据加载的东西不同，划分成base类加载器与restart类加载器。</p><ul><li>base类加载器：用来加载jar包中的类，jar包中的类和配置文件由于不会发生变化，因此不管加载多少次，加载的内容不会发生变化</li><li>restart类加载器：用来加载开发者自己开发的类、配置文件、页面等信息，这一类文件受开发者影响</li></ul><p>​        当springboot项目启动时，base类加载器执行，加载jar包中的信息后，restart类加载器执行，加载开发者制作的内容。当执行构建项目后，由于jar中的信息不会变化，因此base类加载器无需再次执行，所以仅仅运行restart类加载即可，也就是将开发者自己制作的内容重新加载就行了，这就完成了一次热部署的过程，也可以说热部署的过程实际上是重新加载restart类加载器中的信息。</p><p><strong>总结</strong></p><ol><li>使用开发者工具可以为当前项目开启热部署功能</li><li>使用构建项目操作对工程进行热部署</li></ol><p><strong>思考</strong></p><p>​        上述过程每次进行热部署都需要开发者手工操作，不管是点击按钮还是快捷键都需要开发者手工执行。这种操作的应用场景主要是在开发调试期，并且调试的代码处于不同的文件中，比如服务器启动了，我需要改4个文件中的内容，然后重启，等4个文件都改完了再执行热部署，使用一个快捷键就OK了。但是如果现在开发者要修改的内容就只有一个文件中的少量代码，这个时候代码修改完毕如果能够让程序自己执行热部署功能，就可以减少开发者的操作，也就是自动进行热部署，能这么做吗？是可以的。咱们下一节再说。</p><p>​        </p><h3 id="KF-1-2-自动启动热部署"><a href="#KF-1-2-自动启动热部署" class="headerlink" title="KF-1-2.自动启动热部署"></a>KF-1-2.自动启动热部署</h3><p>​        自动热部署其实就是设计一个开关，打开这个开关后，IDE工具就可以自动热部署。因此这个操作和IDE工具有关，以下以idea为例设置idea中启动热部署</p><p><strong>步骤①</strong>：设置自动构建项目</p><p>​        打开【File】，选择【settings…】,在面板左侧的菜单中找到【Compile】选项，然后勾选【Build project automatically】，意思是自动构建项目</p><p><img src="/2023/07/26/springboot100000/image-20220222123543551.png" alt="image-20220222123543551"></p><p>​        自动构建项目选项勾选后</p><p><strong>步骤②</strong>：允许在程序运行时进行自动构建</p><p>​        使用快捷键【Ctrl】+【Alt】+【Shit】+【/】打开维护面板，选择第1项【Registry…】</p><p><img src="/2023/07/26/springboot100000/image-20220222124006910.png" alt="image-20220222124006910"></p><p>​        在选项中搜索comple，然后勾选对应项即可</p><img src="/2023/07/26/springboot100000/image-20220222124240069.png" alt="image-20220222124240069" style="zoom:80%;"><p>​        这样程序在运行的时候就可以进行自动构建了，实现了热部署的效果。</p><p><font color="#ff0000"><b>关注</b></font>：如果你每敲一个字母，服务器就重新构建一次，这未免有点太频繁了，所以idea设置当idea工具失去焦点5秒后进行热部署。其实就是你从idea工具中切换到其他工具时进行热部署，比如改完程序需要到浏览器上去调试，这个时候idea就自动进行热部署操作。</p><p><strong>总结</strong></p><ol><li>自动热部署要开启自动构建项目</li><li>自动热部署要开启在程序运行时自动构建项目</li></ol><p><strong>思考</strong></p><p>​        现在已经实现了热部署了，但是到企业开发的时候你会发现，为了便于管理，在你的程序目录中除了有代码，还有可能有文档，如果你修改了一下文档，这个时候会进行热部署吗？不管是否进行热部署，这个过程我们需要自己控制才比较合理，那这个东西能控制吗？咱们下一节再说。</p><h3 id="KF-1-3-参与热部署监控的文件范围配置"><a href="#KF-1-3-参与热部署监控的文件范围配置" class="headerlink" title="KF-1-3.参与热部署监控的文件范围配置"></a>KF-1-3.参与热部署监控的文件范围配置</h3><p>​        通过修改项目中的文件，你可以发现其实并不是所有的文件修改都会激活热部署的，原因在于在开发者工具中有一组配置，当满足了配置中的条件后，才会启动热部署，配置中默认不参与热部署的目录信息如下</p><ul><li>/META-INF/maven</li><li>/META-INF/resources</li><li>/resources</li><li>/static</li><li>/public</li><li>/templates</li></ul><p>​        以上目录中的文件如果发生变化，是不参与热部署的。如果想修改配置，可以通过application.yml文件进行设定哪些文件不参与热部署操作</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">devtools:</span></span><br><span class="line">    <span class="attr">restart:</span></span><br><span class="line">      <span class="comment"># 设置不参与热部署的文件或文件夹</span></span><br><span class="line">      <span class="attr">exclude:</span> <span class="string">static/**,public/**,config/application.yml</span></span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>通过配置可以修改不参与热部署的文件或目录</li></ol><p><strong>思考</strong></p><p>​        热部署功能是一个典型的开发阶段使用的功能，到了线上环境运行程序时，这个功能就没有意义了。能否关闭热部署功能呢？咱们下一节再说。</p><h3 id="KF-1-4-关闭热部署"><a href="#KF-1-4-关闭热部署" class="headerlink" title="KF-1-4.关闭热部署"></a>KF-1-4.关闭热部署</h3><p>​        线上环境运行时是不可能使用热部署功能的，所以需要强制关闭此功能，通过配置可以关闭此功能。</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">devtools:</span></span><br><span class="line">    <span class="attr">restart:</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">false</span></span><br></pre></td></tr></tbody></table></figure><p>​        如果当心配置文件层级过多导致相符覆盖最终引起配置失效，可以提高配置的层级，在更高层级中配置关闭热部署。例如在启动容器前通过系统属性设置关闭热部署功能。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SSMPApplication</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        System.setProperty(<span class="string">"spring.devtools.restart.enabled"</span>,<span class="string">"false"</span>);</span><br><span class="line">        SpringApplication.run(SSMPApplication.class);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        其实上述担心略微有点多余，因为线上环境的维护是不可能出现修改代码的操作的，这么做唯一的作用是降低资源消耗，毕竟那双盯着你项目是不是产生变化的眼睛只要闭上了，就不具有热部署功能了，这个开关的作用就是禁用对应功能。</p><p><strong>总结</strong></p><ol><li>通过配置可以关闭热部署功能降低线上程序的资源消耗</li></ol><h2 id="KF-2-配置高级"><a href="#KF-2-配置高级" class="headerlink" title="KF-2.配置高级"></a>KF-2.配置高级</h2><p>​        进入开发实用篇第二章内容，配置高级，其实配置在基础篇讲了一部分，在运维实用篇讲了一部分，这里还要讲，讲的东西有什么区别呢？距离开发过程越来越接近，解决的问题也越来越靠近线上环境，下面就开启本章的学习。</p><h3 id="KF-2-1-ConfigurationProperties"><a href="#KF-2-1-ConfigurationProperties" class="headerlink" title="KF-2-1.@ConfigurationProperties"></a>KF-2-1.@ConfigurationProperties</h3><p>​        在基础篇学习了@ConfigurationProperties注解，此注解的作用是用来为bean绑定属性的。开发者可以在yml配置文件中以对象的格式添加若干属性</p><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">servers:</span></span><br><span class="line">  <span class="attr">ip-address:</span> <span class="number">192.168</span><span class="number">.0</span><span class="number">.1</span> </span><br><span class="line">  <span class="attr">port:</span> <span class="number">2345</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="number">-1</span></span><br></pre></td></tr></tbody></table></figure><p>​        然后再开发一个用来封装数据的实体类，注意要提供属性对应的setter方法</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServerConfig</span> {</span><br><span class="line">    <span class="keyword">private</span> String ipAddress;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> port;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> timeout;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        使用@ConfigurationProperties注解就可以将配置中的属性值关联到开发的模型类上</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = "servers")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServerConfig</span> {</span><br><span class="line">    <span class="keyword">private</span> String ipAddress;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> port;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> timeout;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        这样加载对应bean的时候就可以直接加载配置属性值了。但是目前我们学的都是给自定义的bean使用这种形式加载属性值，如果是第三方的bean呢？能不能用这种形式加载属性值呢？为什么会提出这个疑问？原因就在于当前@ConfigurationProperties注解是写在类定义的上方，而第三方开发的bean源代码不是你自己书写的，你也不可能到源代码中去添加@ConfigurationProperties注解，这种问题该怎么解决呢？下面就来说说这个问题。</p><p>​        使用@ConfigurationProperties注解其实可以为第三方bean加载属性，格式特殊一点而已。</p><p><strong>步骤①</strong>：使用@Bean注解定义第三方bean</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> DruidDataSource <span class="title function_">datasource</span><span class="params">()</span>{</span><br><span class="line">    <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">    <span class="keyword">return</span> ds;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：在yml中定义要绑定的属性，注意datasource此时全小写</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">datasource:</span></span><br><span class="line">  <span class="attr">driverClassName:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤③</strong>：使用@ConfigurationProperties注解为第三方bean进行属性绑定，注意前缀是全小写的datasource</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = "datasource")</span></span><br><span class="line"><span class="keyword">public</span> DruidDataSource <span class="title function_">datasource</span><span class="params">()</span>{</span><br><span class="line">    <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">    <span class="keyword">return</span> ds;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        操作方式完全一样，只不过@ConfigurationProperties注解不仅能添加到类上，还可以添加到方法上，添加到类上是为spring容器管理的当前类的对象绑定属性，添加到方法上是为spring容器管理的当前方法的返回值对象绑定属性，其实本质上都一样。</p><p>​        做到这其实就出现了一个新的问题，目前我们定义bean不是通过类注解定义就是通过@Bean定义，使用@ConfigurationProperties注解可以为bean进行属性绑定，那在一个业务系统中，哪些bean通过注解@ConfigurationProperties去绑定属性了呢？因为这个注解不仅可以写在类上，还可以写在方法上，所以找起来就比较麻烦了。为了解决这个问题，spring给我们提供了一个全新的注解，专门标注使用@ConfigurationProperties注解绑定属性的bean是哪些。这个注解叫做@EnableConfigurationProperties。具体如何使用呢？</p><p><strong>步骤①</strong>：在配置类上开启@EnableConfigurationProperties注解，并标注要使用@ConfigurationProperties注解绑定属性的类</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">@SpringBootApplication</span></span><br><span class="line"><span class="string">@EnableConfigurationProperties(ServerConfig.class)</span></span><br><span class="line"><span class="string">public</span> <span class="string">class</span> <span class="string">Springboot13ConfigurationApplication</span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：在对应的类上直接使用@ConfigurationProperties进行属性绑定</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = "servers")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServerConfig</span> {</span><br><span class="line">    <span class="keyword">private</span> String ipAddress;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> port;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> timeout;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        有人感觉这没区别啊？注意观察，现在绑定属性的ServerConfig类并没有声明@Component注解。当使用@EnableConfigurationProperties注解时，spring会默认将其标注的类定义为bean，因此无需再次声明@Component注解了。</p><p>​        最后再说一个小技巧，使用@ConfigurationProperties注解时，会出现一个提示信息</p><p><img src="/2023/07/26/springboot100000/image-20220222145535749.png" alt="image-20220222145535749"></p><p>​        出现这个提示后只需要添加一个坐标此提醒就消失了</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>使用@ConfigurationProperties可以为使用@Bean声明的第三方bean绑定属性</li><li>当使用@EnableConfigurationProperties声明进行属性绑定的bean后，无需使用@Component注解再次进行bean声明</li></ol><h3 id="KF-2-2-宽松绑定-松散绑定"><a href="#KF-2-2-宽松绑定-松散绑定" class="headerlink" title="KF-2-2.宽松绑定/松散绑定"></a>KF-2-2.宽松绑定/松散绑定</h3><p>​        在进行属性绑定时，可能会遇到如下情况，为了进行标准命名，开发者会将属性名严格按照驼峰命名法书写，在yml配置文件中将datasource修改为dataSource，如下：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dataSource:</span></span><br><span class="line">  <span class="attr">driverClassName:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br></pre></td></tr></tbody></table></figure><p>​        此时程序可以正常运行，然后又将代码中的前缀datasource修改为dataSource，如下：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = "dataSource")</span></span><br><span class="line"><span class="keyword">public</span> DruidDataSource <span class="title function_">datasource</span><span class="params">()</span>{</span><br><span class="line">    <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">    <span class="keyword">return</span> ds;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        此时就发生了编译错误，而且并不是idea工具导致的，运行后依然会出现问题，配置属性名dataSource是无效的</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Configuration property name 'dataSource' is <span class="keyword">not</span> valid:</span><br><span class="line"></span><br><span class="line">    Invalid characters: 'S'</span><br><span class="line"><span class="function">    Bean: <span class="title">datasource</span></span></span><br><span class="line"><span class="function">    <span class="title">Reason</span>: <span class="title">Canonical</span> <span class="title">names</span> <span class="title">should</span> <span class="title">be</span> <span class="title">kebab</span>-<span class="title">case</span> ('-' <span class="title">separated</span>), <span class="title">lowercase</span> <span class="title">alpha</span>-<span class="title">numeric</span> <span class="title">characters</span> <span class="title">and</span> <span class="title">must</span> <span class="title">start</span> <span class="title">with</span> <span class="title">a</span> <span class="title">letter</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Action</span>:</span></span><br><span class="line"><span class="function"><span class="title">Modify</span> '<span class="title">dataSource</span>' <span class="title">so</span> <span class="title">that</span> <span class="title">it</span> <span class="title">conforms</span> <span class="title">to</span> <span class="title">the</span> <span class="title">canonical</span> <span class="title">names</span> <span class="title">requirements</span>.</span></span><br></pre></td></tr></tbody></table></figure><p>​        为什么会出现这种问题，这就要来说一说springboot进行属性绑定时的一个重要知识点了，有关属性名称的宽松绑定，也可以称为宽松绑定。</p><p>​        什么是宽松绑定？实际上是springboot进行编程时人性化设计的一种体现，即配置文件中的命名格式与变量名的命名格式可以进行格式上的最大化兼容。兼容到什么程度呢？几乎主流的命名格式都支持，例如：</p><p>​        在ServerConfig中的ipAddress属性名</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = "servers")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServerConfig</span> {</span><br><span class="line">    <span class="keyword">private</span> String ipAddress;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        可以与下面的配置属性名规则全兼容</p><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">servers:</span></span><br><span class="line">  <span class="attr">ipAddress:</span> <span class="number">192.168</span><span class="number">.0</span><span class="number">.2</span>       <span class="comment"># 驼峰模式</span></span><br><span class="line">  <span class="attr">ip_address:</span> <span class="number">192.168</span><span class="number">.0</span><span class="number">.2</span>      <span class="comment"># 下划线模式</span></span><br><span class="line">  <span class="attr">ip-address:</span> <span class="number">192.168</span><span class="number">.0</span><span class="number">.2</span>      <span class="comment"># 烤肉串模式</span></span><br><span class="line">  <span class="attr">IP_ADDRESS:</span> <span class="number">192.168</span><span class="number">.0</span><span class="number">.2</span>      <span class="comment"># 常量模式</span></span><br></pre></td></tr></tbody></table></figure><p>​        也可以说，以上4种模式最终都可以匹配到ipAddress这个属性名。为什么这样呢？原因就是在进行匹配时，配置中的名称要去掉中划线和下划线后，忽略大小写的情况下去与java代码中的属性名进行忽略大小写的等值匹配，以上4种命名去掉下划线中划线忽略大小写后都是一个词ipaddress，java代码中的属性名忽略大小写后也是ipaddress，这样就可以进行等值匹配了，这就是为什么这4种格式都能匹配成功的原因。不过springboot官方推荐使用烤肉串模式，也就是中划线模式。</p><p>​        到这里我们掌握了一个知识点，就是命名的规范问题。再来看开始出现的编程错误信息</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Configuration property name 'dataSource' is <span class="keyword">not</span> valid:</span><br><span class="line"></span><br><span class="line">    Invalid characters: 'S'</span><br><span class="line"><span class="function">    Bean: <span class="title">datasource</span></span></span><br><span class="line"><span class="function">    <span class="title">Reason</span>: <span class="title">Canonical</span> <span class="title">names</span> <span class="title">should</span> <span class="title">be</span> <span class="title">kebab</span>-<span class="title">case</span> ('-' <span class="title">separated</span>), <span class="title">lowercase</span> <span class="title">alpha</span>-<span class="title">numeric</span> <span class="title">characters</span> <span class="title">and</span> <span class="title">must</span> <span class="title">start</span> <span class="title">with</span> <span class="title">a</span> <span class="title">letter</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Action</span>:</span></span><br><span class="line"><span class="function"><span class="title">Modify</span> '<span class="title">dataSource</span>' <span class="title">so</span> <span class="title">that</span> <span class="title">it</span> <span class="title">conforms</span> <span class="title">to</span> <span class="title">the</span> <span class="title">canonical</span> <span class="title">names</span> <span class="title">requirements</span>.</span></span><br></pre></td></tr></tbody></table></figure><p>​        其中Reason描述了报错的原因，规范的名称应该是烤肉串(kebab)模式(case)，即使用-分隔，使用小写字母数字作为标准字符，且必须以字母开头。然后再看我们写的名称dataSource，就不满足上述要求。闹了半天，在书写前缀时，这个词不是随意支持的，必须使用上述标准。编程写了这么久，基本上编程习惯都养成了，到这里又被springboot教育了，没辙，谁让人家东西好用呢，按照人家的要求写吧。</p><p>​        最后说一句，以上规则仅针对springboot中@ConfigurationProperties注解进行属性绑定时有效，对@Value注解进行属性映射无效。有人就说，那我不用你不就行了？不用，你小看springboot的推广能力了，到原理篇我们看源码时，你会发现内部全是这玩意儿，算了，拿人手短吃人嘴短，认怂吧。</p><p><strong>总结</strong></p><ol><li>@ConfigurationProperties绑定属性时支持属性名宽松绑定，这个宽松体现在属性名的命名规则上</li><li>@Value注解不支持松散绑定规则</li><li>绑定前缀名推荐采用烤肉串命名规则，即使用中划线做分隔符</li></ol><h3 id="KF-2-3-常用计量单位绑定"><a href="#KF-2-3-常用计量单位绑定" class="headerlink" title="KF-2-3.常用计量单位绑定"></a>KF-2-3.常用计量单位绑定</h3><p>​        在前面的配置中，我们书写了如下配置值，其中第三项超时时间timeout描述了服务器操作超时时间，当前值是-1表示永不超时。</p><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">servers:</span></span><br><span class="line">  <span class="attr">ip-address:</span> <span class="number">192.168</span><span class="number">.0</span><span class="number">.1</span> </span><br><span class="line">  <span class="attr">port:</span> <span class="number">2345</span></span><br><span class="line">  <span class="attr">timeout:</span> <span class="number">-1</span></span><br></pre></td></tr></tbody></table></figure><p>​        但是每个人都这个值的理解会产生不同，比如线上服务器完成一次主从备份，配置超时时间240，这个240如果单位是秒就是超时时间4分钟，如果单位是分钟就是超时时间4小时。面对一次线上服务器的主从备份，设置4分钟，简直是开玩笑，别说拷贝过程，备份之前的压缩过程4分钟也搞不定，这个时候问题就来了，怎么解决这个误会？</p><p>​        除了加强约定之外，springboot充分利用了JDK8中提供的全新的用来表示计量单位的新数据类型，从根本上解决这个问题。以下模型类中添加了两个JDK8中新增的类，分别是Duration和DataSize</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = "servers")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServerConfig</span> {</span><br><span class="line">    <span class="meta">@DurationUnit(ChronoUnit.HOURS)</span></span><br><span class="line">    <span class="keyword">private</span> Duration serverTimeOut;</span><br><span class="line">    <span class="meta">@DataSizeUnit(DataUnit.MEGABYTES)</span></span><br><span class="line">    <span class="keyword">private</span> DataSize dataSize;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><strong>Duration</strong>：表示时间间隔，可以通过@DurationUnit注解描述时间单位，例如上例中描述的单位为小时（ChronoUnit.HOURS）</p><p><strong>DataSize</strong>：表示存储空间，可以通过@DataSizeUnit注解描述存储空间单位，例如上例中描述的单位为MB（DataUnit.MEGABYTES）</p><p>​        使用上述两个单位就可以有效避免因沟通不同步或文档不健全导致的信息不对称问题，从根本上解决了问题，避免产生误读。</p><p>Druation常用单位如下：</p><img src="/2023/07/26/springboot100000/image-20220222173911102.png" alt="image-20220222173911102" style="zoom:50%;"><p>DataSize常用单位如下：</p><img src="/2023/07/26/springboot100000/image-20220222174130102.png" alt="image-20220222174130102" style="zoom:67%;"><h3 id="KF-2-4-校验"><a href="#KF-2-4-校验" class="headerlink" title="KF-2-4.校验"></a>KF-2-4.校验</h3><p>​        目前我们在进行属性绑定时可以通过松散绑定规则在书写时放飞自我了，但是在书写时由于无法感知模型类中的数据类型，就会出现类型不匹配的问题，比如代码中需要int类型，配置中给了非法的数值，例如写一个“a”，这种数据肯定无法有效的绑定，还会引发错误。        SpringBoot给出了强大的数据校验功能，可以有效的避免此类问题的发生。在JAVAEE的JSR303规范中给出了具体的数据校验标准，开发者可以根据自己的需要选择对应的校验框架，此处使用Hibernate提供的校验框架来作为实现进行数据校验。书写应用格式非常固定，话不多说，直接上步骤</p><p><strong>步骤①</strong>：开启校验框架</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--1.导入JSR303规范--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.validation<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>validation-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--使用hibernate框架提供的校验器做实现--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.hibernate.validator<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hibernate-validator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：在需要开启校验功能的类上使用注解@Validated开启校验功能</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = "servers")</span></span><br><span class="line"><span class="comment">//开启对当前bean的属性注入校验</span></span><br><span class="line"><span class="meta">@Validated</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServerConfig</span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤③</strong>：对具体的字段设置校验规则</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = "servers")</span></span><br><span class="line"><span class="comment">//开启对当前bean的属性注入校验</span></span><br><span class="line"><span class="meta">@Validated</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServerConfig</span> {</span><br><span class="line">    <span class="comment">//设置具体的规则</span></span><br><span class="line">    <span class="meta">@Max(value = 8888,message = "最大值不能超过8888")</span></span><br><span class="line">    <span class="meta">@Min(value = 202,message = "最小值不能低于202")</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> port;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        通过设置数据格式校验，就可以有效避免非法数据加载，其实使用起来还是挺轻松的，基本上就是一个格式。</p><p><strong>总结</strong></p><ol><li>开启Bean属性校验功能一共3步：导入JSR303与Hibernate校验框架坐标、使用@Validated注解启用校验功能、使用具体校验规则规范数据校验格式</li></ol><h3 id="KF-2-5-数据类型转换"><a href="#KF-2-5-数据类型转换" class="headerlink" title="KF-2-5.数据类型转换"></a>KF-2-5.数据类型转换</h3><p>​        有关spring属性注入的问题到这里基本上就讲完了，但是最近一名开发者向我咨询了一个问题，我觉得需要给各位学习者分享一下。在学习阶段其实我们遇到的问题往往复杂度比较低，单一性比较强，但是到了线上开发时，都是综合性的问题，而这个开发者遇到的问题就是由于bean的属性注入引发的灾难。</p><p>​        先把问题描述一下，这位开发者连接数据库正常操作，但是运行程序后显示的信息是密码错误。</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">java.sql.SQLException: <span class="title">Access</span> <span class="title">denied</span> <span class="title">for</span> <span class="title">user</span> '<span class="title">root</span>'@'<span class="title">localhost</span>' (<span class="title">using</span> <span class="title">password</span>: <span class="title">YES</span>)</span></span><br></pre></td></tr></tbody></table></figure><p>​        其实看到这个报错，几乎所有的学习者都能分辨出来，这是用户名和密码不匹配，就就是密码输入错了，但是问题就在于密码并没有输入错误，这就比较讨厌了。给的报错信息无法帮助你有效的分析问题，甚至会给你带到沟里。如果是初学者，估计这会心态就崩了，我密码没错啊，你怎么能说我有错误呢？来看看用户名密码的配置是如何写的：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">0127</span></span><br></pre></td></tr></tbody></table></figure><p>​        这名开发者的生日是1月27日，所以密码就使用了0127，其实问题就出在这里了。</p><p>​        之前在基础篇讲属性注入时，提到过类型相关的知识，在整数相关知识中有这么一句话，<strong>支持二进制，八进制，十六进制</strong></p><img src="/2023/07/26/springboot100000/image-20220222225748370.png" alt="image-20220222225748370" style="zoom:80%;"><p>​        这个问题就处在这里了，因为0127在开发者眼中是一个字符串“0127”，但是在springboot看来，这就是一个数字，而且是一个八进制的数字。当后台使用String类型接收数据时，如果配置文件中配置了一个整数值，他是先安装整数进行处理，读取后再转换成字符串。巧了，0127撞上了八进制的格式，所以最终以十进制数字87的结果存在了。</p><p>​        这里提两个注意点，第一，字符串标准书写加上引号包裹，养成习惯，第二，遇到0开头的数据多注意吧。</p><p><strong>总结</strong></p><ol><li>yaml文件中对于数字的定义支持进制书写格式，如需使用字符串请使用引号明确标注</li></ol><h2 id="KF-3-测试"><a href="#KF-3-测试" class="headerlink" title="KF-3.测试"></a>KF-3.测试</h2><p>​        说完bean配置相关的内容，下面要对前面讲过的一个知识做加强了，测试。测试是保障程序正确性的唯一屏障，在企业级开发中更是不可缺少，但是由于测试代码往往不产生实际效益，所以一些小型公司并不是很关注，导致一些开发者从小型公司进入中大型公司后，往往这一块比较短板，所以还是要拿出来把这一块知识好好说说，做一名专业的开发人员。</p><h3 id="KF-3-1-加载测试专用属性"><a href="#KF-3-1-加载测试专用属性" class="headerlink" title="KF-3-1.加载测试专用属性"></a>KF-3-1.加载测试专用属性</h3><p>​        测试过程本身并不是一个复杂的过程，但是很多情况下测试时需要模拟一些线上情况，或者模拟一些特殊情况。如果当前环境按照线上环境已经设定好了，例如是下面的配置</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">maxMemory:</span> <span class="string">32GB</span></span><br><span class="line">  <span class="attr">minMemory:</span> <span class="string">16GB</span></span><br></pre></td></tr></tbody></table></figure><p>​        但是你现在想测试对应的兼容性，需要测试如下配置</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">env:</span></span><br><span class="line">  <span class="attr">maxMemory:</span> <span class="string">16GB</span></span><br><span class="line">  <span class="attr">minMemory:</span> <span class="string">8GB</span></span><br></pre></td></tr></tbody></table></figure><p>​        这个时候我们能不能每次测试的时候都去修改源码application.yml中的配置进行测试呢？显然是不行的。每次测试前改过来，每次测试后改回去，这太麻烦了。于是我们就想，需要在测试环境中创建一组临时属性，去覆盖我们源码中设定的属性，这样测试用例就相当于是一个独立的环境，能够独立测试，这样就方便多了。</p><p><strong>临时属性</strong></p><p>​        springboot已经为我们开发者早就想好了这种问题该如何解决，并且提供了对应的功能入口。在测试用例程序中，可以通过对注解@SpringBootTest添加属性来模拟临时属性，具体如下：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//properties属性可以为当前测试用例添加临时的属性配置</span></span><br><span class="line"><span class="meta">@SpringBootTest(properties = {"test.prop=testValue1"})</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PropertiesAndArgsTest</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value("${test.prop}")</span></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testProperties</span><span class="params">()</span>{</span><br><span class="line">        System.out.println(msg);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        使用注解@SpringBootTest的properties属性就可以为当前测试用例添加临时的属性，覆盖源码配置文件中对应的属性值进行测试。</p><p><strong>临时参数</strong></p><p>​        除了上述这种情况，在前面讲解使用命令行启动springboot程序时讲过，通过命令行参数也可以设置属性值。而且线上启动程序时，通常都会添加一些专用的配置信息。作为运维人员他们才不懂java，更不懂这些配置的信息具体格式该怎么写，那如果我们作为开发者提供了对应的书写内容后，能否提前测试一下这些配置信息是否有效呢？当时是可以的，还是通过注解@SpringBootTest的另一个属性来进行设定。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//args属性可以为当前测试用例添加临时的命令行参数</span></span><br><span class="line"><span class="meta">@SpringBootTest(args={"--test.prop=testValue2"})</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PropertiesAndArgsTest</span> {</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Value("${test.prop}")</span></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testProperties</span><span class="params">()</span>{</span><br><span class="line">        System.out.println(msg);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        使用注解@SpringBootTest的args属性就可以为当前测试用例模拟命令行参数并进行测试。</p><p>​        说到这里，好奇宝宝们肯定就有新问题了，如果两者共存呢？其实如果思考一下配置属性与命令行参数的加载优先级，这个结果就不言而喻了。在属性加载的优先级设定中，有明确的优先级设定顺序，还记得下面这个顺序吗？</p><img src="/2023/07/26/springboot100000/image-20211206100859236.png" alt="image-20211206100859236" style="zoom:67%;"><p>​        在这个属性加载优先级的顺序中，明确规定了命令行参数的优先级排序是11，而配置属性的优先级是3，结果不言而喻了，args属性配置优先于properties属性配置加载。</p><p>​        到这里我们就掌握了如果在测试用例中去模拟临时属性的设定。</p><p><strong>总结</strong></p><ol><li>加载测试临时属性可以通过注解@SpringBootTest的properties和args属性进行设定，此设定应用范围仅适用于当前测试用例</li></ol><p><strong>思考</strong></p><p>​        应用于测试环境的临时属性解决了，如果想在测试的时候临时加载一些bean能不做呢？也就是说我测试时，想搞一些独立的bean出来，专门应用于测试环境，能否实现呢？咱们下一节再讲。</p><h3 id="KF-3-2-加载测试专用配置"><a href="#KF-3-2-加载测试专用配置" class="headerlink" title="KF-3-2.加载测试专用配置"></a>KF-3-2.加载测试专用配置</h3><p>​        上一节提出了临时配置一些专用于测试环境的bean的需求，这一节我们就来解决这个问题。</p><p>​        学习过Spring的知识，我们都知道，其实一个spring环境中可以设置若干个配置文件或配置类，若干个配置信息可以同时生效。现在我们的需求就是在测试环境中再添加一个配置类，然后启动测试环境时，生效此配置就行了。其实做法和spring环境中加载多个配置信息的方式完全一样。具体操作步骤如下：</p><p><strong>步骤①</strong>：在测试包test中创建专用的测试环境配置类</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MsgConfig</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">msg</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"bean msg"</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        上述配置仅用于演示当前实验效果，实际开发可不能这么注入String类型的数据</p><p><strong>步骤②</strong>：在启动测试环境时，导入测试环境专用的配置类，使用@Import注解即可实现</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@Import({MsgConfig.class})</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfigurationTest</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> String msg;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testConfiguration</span><span class="params">()</span>{</span><br><span class="line">        System.out.println(msg);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        到这里就通过@Import属性实现了基于开发环境的配置基础上，对配置进行测试环境的追加操作，实现了1+1的配置环境效果。这样我们就可以实现每一个不同的测试用例加载不同的bean的效果，丰富测试用例的编写，同时不影响开发环境的配置。</p><p><strong>总结</strong></p><ol><li>定义测试环境专用的配置类，然后通过@Import注解在具体的测试中导入临时的配置，例如测试用例，方便测试过程，且上述配置不影响其他的测试类环境</li></ol><p><strong>思考</strong></p><p>​        当前我们已经可以实现业务层和数据层的测试，并且通过临时配置，控制每个测试用例加载不同的测试数据。但是实际企业开发不仅要保障业务层与数据层的功能安全有效，也要保障表现层的功能正常。但是我们目的对表现层的测试都是通过postman手工测试的，并没有在打包过程中体现表现层功能被测试通过。能否在测试用例中对表现层进行功能测试呢？还真可以，咱们下一节再讲。</p><h3 id="KF-3-3-Web环境模拟测试"><a href="#KF-3-3-Web环境模拟测试" class="headerlink" title="KF-3-3.Web环境模拟测试"></a>KF-3-3.Web环境模拟测试</h3><p>​        在测试中对表现层功能进行测试需要一个基础和一个功能。所谓的一个基础是运行测试程序时，必须启动web环境，不然没法测试web功能。一个功能是必须在测试程序中具备发送web请求的能力，不然无法实现web功能的测试。所以在测试用例中测试表现层接口这项工作就转换成了两件事，一，如何在测试类中启动web测试，二，如何在测试类中发送web请求。下面一件事一件事进行，先说第一个</p><p><strong>测试类中启动web环境</strong></p><p>​        每一个springboot的测试类上方都会标准@SpringBootTest注解，而注解带有一个属性，叫做webEnvironment。通过该属性就可以设置在测试用例中启动web环境，具体如下：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebTest</span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        测试类中启动web环境时，可以指定启动的Web环境对应的端口，springboot提供了4种设置值，分别如下：</p><img src="/2023/07/26/springboot100000/image-20220223125453317.png" alt="image-20220223125453317" style="zoom:80%;"><ul><li>MOCK：根据当前设置确认是否启动web环境，例如使用了Servlet的API就启动web环境，属于适配性的配置</li><li>DEFINED_PORT：使用自定义的端口作为web服务器端口</li><li>RANDOM_PORT：使用随机端口作为web服务器端口</li><li>NONE：不启动web环境</li></ul><p>​        通过上述配置，现在启动测试程序时就可以正常启用web环境了，建议大家测试时使用RANDOM_PORT，避免代码中因为写死设定引发线上功能打包测试时由于端口冲突导致意外现象的出现。就是说你程序中写了用8080端口，结果线上环境8080端口被占用了，结果你代码中所有写的东西都要改，这就是写死代码的代价。现在你用随机端口就可以测试出来你有没有这种问题的隐患了。</p><p>​        测试环境中的web环境已经搭建好了，下面就可以来解决第二个问题了，如何在程序代码中发送web请求。</p><p><strong>测试类中发送请求</strong></p><p>​        对于测试类中发送请求，其实java的API就提供对应的功能，只不过平时各位小伙伴接触的比较少，所以较为陌生。springboot为了便于开发者进行对应的功能开发，对其又进行了包装，简化了开发步骤，具体操作如下：</p><p><strong>步骤①</strong>：在测试类中开启web虚拟调用功能，通过注解@AutoConfigureMockMvc实现此功能的开启</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)</span></span><br><span class="line"><span class="comment">//开启虚拟MVC调用</span></span><br><span class="line"><span class="meta">@AutoConfigureMockMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebTest</span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：定义发起虚拟调用的对象MockMVC，通过自动装配的形式初始化对象</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)</span></span><br><span class="line"><span class="comment">//开启虚拟MVC调用</span></span><br><span class="line"><span class="meta">@AutoConfigureMockMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebTest</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testWeb</span><span class="params">(<span class="meta">@Autowired</span> MockMvc mvc)</span> {</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤③</strong>：创建一个虚拟请求对象，封装请求的路径，并使用MockMVC对象发送对应请求</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)</span></span><br><span class="line"><span class="comment">//开启虚拟MVC调用</span></span><br><span class="line"><span class="meta">@AutoConfigureMockMvc</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebTest</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testWeb</span><span class="params">(<span class="meta">@Autowired</span> MockMvc mvc)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="comment">//http://localhost:8080/books</span></span><br><span class="line">        <span class="comment">//创建虚拟请求，当前访问/books</span></span><br><span class="line">        <span class="type">MockHttpServletRequestBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> MockMvcRequestBuilders.get(<span class="string">"/books"</span>);</span><br><span class="line">        <span class="comment">//执行对应的请求</span></span><br><span class="line">        mvc.perform(builder);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        执行测试程序，现在就可以正常的发送/books对应的请求了，注意访问路径不要写<a href="http://localhost:8080/books%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%89%8D%E9%9D%A2%E7%9A%84%E6%9C%8D%E5%8A%A1%E5%99%A8IP%E5%9C%B0%E5%9D%80%E5%92%8C%E7%AB%AF%E5%8F%A3%E4%BD%BF%E7%94%A8%E7%9A%84%E6%98%AF%E5%BD%93%E5%89%8D%E8%99%9A%E6%8B%9F%E7%9A%84web%E7%8E%AF%E5%A2%83%EF%BC%8C%E6%97%A0%E9%9C%80%E6%8C%87%E5%AE%9A%EF%BC%8C%E4%BB%85%E6%8C%87%E5%AE%9A%E8%AF%B7%E6%B1%82%E7%9A%84%E5%85%B7%E4%BD%93%E8%B7%AF%E5%BE%84%E5%8D%B3%E5%8F%AF%E3%80%82">http://localhost:8080/books，因为前面的服务器IP地址和端口使用的是当前虚拟的web环境，无需指定，仅指定请求的具体路径即可。</a></p><p><strong>总结</strong></p><ol><li>在测试类中测试web层接口要保障测试类启动时启动web容器，使用@SpringBootTest注解的webEnvironment属性可以虚拟web环境用于测试</li><li>为测试方法注入MockMvc对象，通过MockMvc对象可以发送虚拟请求，模拟web请求调用过程</li></ol><p><strong>思考</strong></p><p>​        目前已经成功的发送了请求，但是还没有起到测试的效果，测试过程必须出现预计值与真实值的比对结果才能确认测试结果是否通过，虚拟请求中能对哪些请求结果进行比对呢？咱们下一节再讲。</p><p><strong>web环境请求结果比对</strong></p><p>​        上一节已经在测试用例中成功的模拟出了web环境，并成功的发送了web请求，本节就来解决发送请求后如何比对发送结果的问题。其实发完请求得到的信息只有一种，就是响应对象。至于响应对象中包含什么，就可以比对什么。常见的比对内容如下：</p><ul><li><p>响应状态匹配</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testStatus</span><span class="params">(<span class="meta">@Autowired</span> MockMvc mvc)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">    <span class="type">MockHttpServletRequestBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> MockMvcRequestBuilders.get(<span class="string">"/books"</span>);</span><br><span class="line">    <span class="type">ResultActions</span> <span class="variable">action</span> <span class="operator">=</span> mvc.perform(builder);</span><br><span class="line">    <span class="comment">//设定预期值 与真实值进行比较，成功测试通过，失败测试失败</span></span><br><span class="line">    <span class="comment">//定义本次调用的预期值</span></span><br><span class="line">    <span class="type">StatusResultMatchers</span> <span class="variable">status</span> <span class="operator">=</span> MockMvcResultMatchers.status();</span><br><span class="line">    <span class="comment">//预计本次调用时成功的：状态200</span></span><br><span class="line">    <span class="type">ResultMatcher</span> <span class="variable">ok</span> <span class="operator">=</span> status.isOk();</span><br><span class="line">    <span class="comment">//添加预计值到本次调用过程中进行匹配</span></span><br><span class="line">    action.andExpect(ok);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>响应体匹配（非json数据格式）</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testBody</span><span class="params">(<span class="meta">@Autowired</span> MockMvc mvc)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">    <span class="type">MockHttpServletRequestBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> MockMvcRequestBuilders.get(<span class="string">"/books"</span>);</span><br><span class="line">    <span class="type">ResultActions</span> <span class="variable">action</span> <span class="operator">=</span> mvc.perform(builder);</span><br><span class="line">    <span class="comment">//设定预期值 与真实值进行比较，成功测试通过，失败测试失败</span></span><br><span class="line">    <span class="comment">//定义本次调用的预期值</span></span><br><span class="line">    <span class="type">ContentResultMatchers</span> <span class="variable">content</span> <span class="operator">=</span> MockMvcResultMatchers.content();</span><br><span class="line">    <span class="type">ResultMatcher</span> <span class="variable">result</span> <span class="operator">=</span> content.string(<span class="string">"springboot2"</span>);</span><br><span class="line">    <span class="comment">//添加预计值到本次调用过程中进行匹配</span></span><br><span class="line">    action.andExpect(result);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>响应体匹配（json数据格式，开发中的主流使用方式）</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testJson</span><span class="params">(<span class="meta">@Autowired</span> MockMvc mvc)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">    <span class="type">MockHttpServletRequestBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> MockMvcRequestBuilders.get(<span class="string">"/books"</span>);</span><br><span class="line">    <span class="type">ResultActions</span> <span class="variable">action</span> <span class="operator">=</span> mvc.perform(builder);</span><br><span class="line">    <span class="comment">//设定预期值 与真实值进行比较，成功测试通过，失败测试失败</span></span><br><span class="line">    <span class="comment">//定义本次调用的预期值</span></span><br><span class="line">    <span class="type">ContentResultMatchers</span> <span class="variable">content</span> <span class="operator">=</span> MockMvcResultMatchers.content();</span><br><span class="line">    <span class="type">ResultMatcher</span> <span class="variable">result</span> <span class="operator">=</span> content.json(<span class="string">"{\"id\":1,\"name\":\"springboot2\",\"type\":\"springboot\"}"</span>);</span><br><span class="line">    <span class="comment">//添加预计值到本次调用过程中进行匹配</span></span><br><span class="line">    action.andExpect(result);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>响应头信息匹配</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testContentType</span><span class="params">(<span class="meta">@Autowired</span> MockMvc mvc)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">    <span class="type">MockHttpServletRequestBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> MockMvcRequestBuilders.get(<span class="string">"/books"</span>);</span><br><span class="line">    <span class="type">ResultActions</span> <span class="variable">action</span> <span class="operator">=</span> mvc.perform(builder);</span><br><span class="line">    <span class="comment">//设定预期值 与真实值进行比较，成功测试通过，失败测试失败</span></span><br><span class="line">    <span class="comment">//定义本次调用的预期值</span></span><br><span class="line">    <span class="type">HeaderResultMatchers</span> <span class="variable">header</span> <span class="operator">=</span> MockMvcResultMatchers.header();</span><br><span class="line">    <span class="type">ResultMatcher</span> <span class="variable">contentType</span> <span class="operator">=</span> header.string(<span class="string">"Content-Type"</span>, <span class="string">"application/json"</span>);</span><br><span class="line">    <span class="comment">//添加预计值到本次调用过程中进行匹配</span></span><br><span class="line">    action.andExpect(contentType);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><p>​        基本上齐了，头信息，正文信息，状态信息都有了，就可以组合出一个完美的响应结果比对结果了。以下范例就是三种信息同时进行匹配校验，也是一个完整的信息匹配过程。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testGetById</span><span class="params">(<span class="meta">@Autowired</span> MockMvc mvc)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">    <span class="type">MockHttpServletRequestBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> MockMvcRequestBuilders.get(<span class="string">"/books"</span>);</span><br><span class="line">    <span class="type">ResultActions</span> <span class="variable">action</span> <span class="operator">=</span> mvc.perform(builder);</span><br><span class="line"></span><br><span class="line">    <span class="type">StatusResultMatchers</span> <span class="variable">status</span> <span class="operator">=</span> MockMvcResultMatchers.status();</span><br><span class="line">    <span class="type">ResultMatcher</span> <span class="variable">ok</span> <span class="operator">=</span> status.isOk();</span><br><span class="line">    action.andExpect(ok);</span><br><span class="line"></span><br><span class="line">    <span class="type">HeaderResultMatchers</span> <span class="variable">header</span> <span class="operator">=</span> MockMvcResultMatchers.header();</span><br><span class="line">    <span class="type">ResultMatcher</span> <span class="variable">contentType</span> <span class="operator">=</span> header.string(<span class="string">"Content-Type"</span>, <span class="string">"application/json"</span>);</span><br><span class="line">    action.andExpect(contentType);</span><br><span class="line"></span><br><span class="line">    <span class="type">ContentResultMatchers</span> <span class="variable">content</span> <span class="operator">=</span> MockMvcResultMatchers.content();</span><br><span class="line">    <span class="type">ResultMatcher</span> <span class="variable">result</span> <span class="operator">=</span> content.json(<span class="string">"{\"id\":1,\"name\":\"springboot\",\"type\":\"springboot\"}"</span>);</span><br><span class="line">    action.andExpect(result);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>web虚拟调用可以对本地虚拟请求的返回响应信息进行比对，分为响应头信息比对、响应体信息比对、响应状态信息比对</li></ol><h3 id="KF-3-4-数据层测试回滚"><a href="#KF-3-4-数据层测试回滚" class="headerlink" title="KF-3-4.数据层测试回滚"></a>KF-3-4.数据层测试回滚</h3><p>​        当前我们的测试程序可以完美的进行表现层、业务层、数据层接口对应的功能测试了，但是测试用例开发完成后，在打包的阶段由于test生命周期属于必须被运行的生命周期，如果跳过会给系统带来极高的安全隐患，所以测试用例必须执行。但是新的问题就呈现了，测试用例如果测试时产生了事务提交就会在测试过程中对数据库数据产生影响，进而产生垃圾数据。这个过程不是我们希望发生的，作为开发者测试用例该运行运行，但是过程中产生的数据不要在我的系统中留痕，这样该如何处理呢？</p><p>​        springboot早就为开发者想到了这个问题，并且针对此问题给出了最简解决方案，在原始测试用例中添加注解@Transactional即可实现当前测试用例的事务不提交。当程序运行后，只要注解@Transactional出现的位置存在注解@SpringBootTest，springboot就会认为这是一个测试程序，无需提交事务，所以也就可以避免事务的提交。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="meta">@Rollback(true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DaoTest</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookService bookService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testSave</span><span class="params">()</span>{</span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">        book.setName(<span class="string">"springboot3"</span>);</span><br><span class="line">        book.setType(<span class="string">"springboot3"</span>);</span><br><span class="line">        book.setDescription(<span class="string">"springboot3"</span>);</span><br><span class="line"></span><br><span class="line">        bookService.save(book);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        如果开发者想提交事务，也可以，再添加一个@RollBack的注解，设置回滚状态为false即可正常提交事务，是不是很方便？springboot在辅助开发者日常工作这一块展现出了惊人的能力，实在太贴心了。</p><p><strong>总结</strong></p><ol><li>在springboot的测试类中通过添加注解@Transactional来阻止测试用例提交事务</li><li>通过注解@Rollback控制springboot测试类执行结果是否提交事务，需要配合注解@Transactional使用</li></ol><p><strong>思考</strong></p><p>​        当前测试程序已经近乎完美了，但是由于测试用例中书写的测试数据属于固定数据，往往失去了测试的意义，开发者可以针对测试用例进行针对性开发，这样就有可能出现测试用例不能完美呈现业务逻辑代码是否真实有效的达成业务目标的现象，解决方案其实很容易想，测试用例的数据只要随机产生就可以了，能实现吗？咱们下一节再讲。</p><h3 id="KF-3-5-测试用例数据设定"><a href="#KF-3-5-测试用例数据设定" class="headerlink" title="KF-3-5.测试用例数据设定"></a>KF-3-5.测试用例数据设定</h3><p>​        对于测试用例的数据固定书写肯定是不合理的，springboot提供了在配置中使用随机值的机制，确保每次运行程序加载的数据都是随机的。具体如下：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">testcase:</span></span><br><span class="line">  <span class="attr">book:</span></span><br><span class="line">    <span class="attr">id:</span> <span class="string">${random.int}</span></span><br><span class="line">    <span class="attr">id2:</span> <span class="string">${random.int(10)}</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">${random.int!5,10!}</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">${random.value}</span></span><br><span class="line">    <span class="attr">uuid:</span> <span class="string">${random.uuid}</span></span><br><span class="line">    <span class="attr">publishTime:</span> <span class="string">${random.long}</span></span><br></pre></td></tr></tbody></table></figure><p>​        当前配置就可以在每次运行程序时创建一组随机数据，避免每次运行时数据都是固定值的尴尬现象发生，有助于测试功能的进行。数据的加载按照之前加载数据的形式，使用@ConfigurationProperties注解即可</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = "testcase.book")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookCase</span> {</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id2;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> type;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String uuid;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> publishTime;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        对于随机值的产生，还有一些小的限定规则，比如产生的数值性数据可以设置范围等，具体如下：</p><img src="/2023/07/26/springboot100000/image-20220223135454862.png" alt="image-20220223135454862" style="zoom:80%;"><ul><li>${random.int}表示随机整数</li><li>${random.int(10)}表示10以内的随机数</li><li>${random.int(10,20)}表示10到20的随机数</li><li>其中()可以是任意字符，例如[]，!!均可</li></ul><p><strong>总结</strong></p><ol><li>使用随机数据可以替换测试用例中书写的固定数据，提高测试用例中的测试数据有效性</li></ol><h2 id="KF-4-数据层解决方案"><a href="#KF-4-数据层解决方案" class="headerlink" title="KF-4.数据层解决方案"></a>KF-4.数据层解决方案</h2><p>​        开发实用篇前三章基本上是开胃菜，从第四章开始，开发实用篇进入到了噩梦难度了，从这里开始，不再是单纯的在springboot内部搞事情了，要涉及到很多相关知识。本章节主要内容都是和数据存储与读取相关，前期学习的知识与数据层有关的技术基本上都围绕在数据库这个层面上，所以本章要讲的第一个大的分支就是SQL解决方案相关的内容，除此之外，数据的来源还可以是非SQL技术相关的数据操作，因此第二部分围绕着NOSQL解决方案讲解。至于什么是NOSQL解决方案，讲到了再说吧。下面就从SQL解决方案说起。</p><h3 id="KF-4-1-SQL"><a href="#KF-4-1-SQL" class="headerlink" title="KF-4-1.SQL"></a>KF-4-1.SQL</h3><p>​        回忆一下之前做SSMP整合的时候数据层解决方案涉及到了哪些技术？MySQL数据库与MyBatisPlus框架，后面又学了Druid数据源的配置，所以现在数据层解决方案可以说是Mysql+Druid+MyBatisPlus。而三个技术分别对应了数据层操作的三个层面：</p><ul><li>数据源技术：Druid</li><li>持久化技术：MyBatisPlus</li><li>数据库技术：MySQL</li></ul><p>​        下面的研究就分为三个层面进行研究，对应上面列出的三个方面，咱们就从第一个数据源技术开始说起。</p><h4 id="数据源技术"><a href="#数据源技术" class="headerlink" title="数据源技术"></a>数据源技术</h4><p>​        目前我们使用的数据源技术是Druid，运行时可以在日志中看到对应的数据源初始化信息，具体如下：</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INFO <span class="number">28600</span> --- [           main] c.a.d.s.b.a.DruidDataSourceAutoConfigure : Init DruidDataSource</span><br><span class="line">INFO <span class="number">28600</span> --- [           main] com.alibaba.druid.pool.DruidDataSource   : {dataSource-<span class="number">1</span>} inited</span><br></pre></td></tr></tbody></table></figure><p>​        如果不使用Druid数据源，程序运行后是什么样子呢？是独立的数据库连接对象还是有其他的连接池技术支持呢？将Druid技术对应的starter去掉再次运行程序可以在日志中找到如下初始化信息：</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INFO <span class="number">31820</span> --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-<span class="number">1</span> - Starting...</span><br><span class="line">INFO <span class="number">31820</span> --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-<span class="number">1</span> - <span class="built_in">Start</span> completed.</span><br></pre></td></tr></tbody></table></figure><p>​        虽然没有DruidDataSource相关的信息了，但是我们发现日志中有HikariDataSource这个信息，就算不懂这是个什么技术，看名字也能看出来，以DataSource结尾的名称，这一定是一个数据源技术。我们又没有手工添加这个技术，这个技术哪里来的呢？这就是这一节要讲的知识，springboot内嵌数据源。</p><p>​        数据层技术是每一个企业级应用程序都会用到的，而其中必定会进行数据库连接的管理。springboot根据开发者的习惯出发，开发者提供了数据源技术，就用你提供的，开发者没有提供，那总不能手工管理一个一个的数据库连接对象啊，怎么办？我给你一个默认的就好了，这样省心又省事，大家都方便。</p><p>​        springboot提供了3款内嵌数据源技术，分别如下：</p><ul><li>HikariCP</li><li>Tomcat提供DataSource</li><li>Commons DBCP</li></ul><p>​        第一种，HikartCP，这是springboot官方推荐的数据源技术，作为默认内置数据源使用。啥意思？你不配置数据源，那就用这个。</p><p>​        第二种，Tomcat提供的DataSource，如果不想用HikartCP，并且使用tomcat作为web服务器进行web程序的开发，使用这个。为什么是Tomcat，不是其他web服务器呢？因为web技术导入starter后，默认使用内嵌tomcat，既然都是默认使用的技术了，那就一用到底，数据源也用它的。有人就提出怎么才能不使用HikartCP用tomcat提供的默认数据源对象呢？把HikartCP技术的坐标排除掉就OK了。</p><p>​        第三种，DBCP，这个使用的条件就更苛刻了，既不使用HikartCP也不使用tomcat的DataSource时，默认给你用这个。</p><p>​        springboot这心操的，也是稀碎啊，就怕你自己管不好连接对象，给你一顿推荐，真是开发界的最强辅助。既然都给你奶上了，那就受用吧，怎么配置使用这些东西呢？之前我们配置druid时使用druid的starter对应的配置如下：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">     <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC</span></span><br><span class="line">      <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">root</span></span><br></pre></td></tr></tbody></table></figure><p>​        换成是默认的数据源HikariCP后，直接吧druid删掉就行了，如下：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br></pre></td></tr></tbody></table></figure><p>​         当然，也可以写上是对hikari做的配置，但是url地址要单独配置，如下：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC</span></span><br><span class="line">    <span class="attr">hikari:</span></span><br><span class="line">      <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">root</span></span><br></pre></td></tr></tbody></table></figure><p>​        这就是配置hikari数据源的方式。如果想对hikari做进一步的配置，可以继续配置其独立的属性。例如：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/ssm_db?serverTimezone=UTC</span></span><br><span class="line">    <span class="attr">hikari:</span></span><br><span class="line">      <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line">      <span class="attr">maximum-pool-size:</span> <span class="number">50</span></span><br></pre></td></tr></tbody></table></figure><p>​        如果不想使用hikari数据源，使用tomcat的数据源或者DBCP配置格式也是一样的。学习到这里，以后我们做数据层时，数据源对象的选择就不再是单一的使用druid数据源技术了，可以根据需要自行选择。</p><p><strong>总结</strong></p><ol><li>springboot技术提供了3种内置的数据源技术，分别是Hikari、tomcat内置数据源、DBCP</li></ol><h4 id="持久化技术"><a href="#持久化技术" class="headerlink" title="持久化技术"></a>持久化技术</h4><p>​        说完数据源解决方案，再来说一下持久化解决方案。springboot充分发挥其最强辅助的特征，给开发者提供了一套现成的数据层技术，叫做JdbcTemplate。其实这个技术不能说是springboot提供的，因为不使用springboot技术，一样能使用它，谁提供的呢？spring技术提供的，所以在springboot技术范畴中，这个技术也是存在的，毕竟springboot技术是加速spring程序开发而创建的。</p><p>​        这个技术其实就是回归到jdbc最原始的编程形式来进行数据层的开发，下面直接上操作步骤：</p><p><strong>步骤①</strong>：导入jdbc对应的坐标，记得是starter</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">&lt;/dependency</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：自动装配JdbcTemplate对象</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot15SqlApplicationTests</span> {</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testJdbcTemplate</span><span class="params">(<span class="meta">@Autowired</span> JdbcTemplate jdbcTemplate)</span>{</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤③</strong>：使用JdbcTemplate实现查询操作（非实体类封装数据的查询操作）</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testJdbcTemplate</span><span class="params">(<span class="meta">@Autowired</span> JdbcTemplate jdbcTemplate)</span>{</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">"select * from tbl_book"</span>;</span><br><span class="line">    List&lt;Map&lt;String, Object&gt;&gt; maps = jdbcTemplate.queryForList(sql);</span><br><span class="line">    System.out.println(maps);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤④</strong>：使用JdbcTemplate实现查询操作（实体类封装数据的查询操作）</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testJdbcTemplate</span><span class="params">(<span class="meta">@Autowired</span> JdbcTemplate jdbcTemplate)</span>{</span><br><span class="line"></span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">"select * from tbl_book"</span>;</span><br><span class="line">    RowMapper&lt;Book&gt; rm = <span class="keyword">new</span> <span class="title class_">RowMapper</span>&lt;Book&gt;() {</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> Book <span class="title function_">mapRow</span><span class="params">(ResultSet rs, <span class="type">int</span> rowNum)</span> <span class="keyword">throws</span> SQLException {</span><br><span class="line">            <span class="type">Book</span> <span class="variable">temp</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">            temp.setId(rs.getInt(<span class="string">"id"</span>));</span><br><span class="line">            temp.setName(rs.getString(<span class="string">"name"</span>));</span><br><span class="line">            temp.setType(rs.getString(<span class="string">"type"</span>));</span><br><span class="line">            temp.setDescription(rs.getString(<span class="string">"description"</span>));</span><br><span class="line">            <span class="keyword">return</span> temp;</span><br><span class="line">        }</span><br><span class="line">    };</span><br><span class="line">    List&lt;Book&gt; list = jdbcTemplate.query(sql, rm);</span><br><span class="line">    System.out.println(list);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤⑤</strong>：使用JdbcTemplate实现增删改操作</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testJdbcTemplateSave</span><span class="params">(<span class="meta">@Autowired</span> JdbcTemplate jdbcTemplate)</span>{</span><br><span class="line">    <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">"insert into tbl_book values(3,'springboot1','springboot2','springboot3')"</span>;</span><br><span class="line">    jdbcTemplate.update(sql);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        如果想对JdbcTemplate对象进行相关配置，可以在yml文件中进行设定，具体如下：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">jdbc:</span></span><br><span class="line">    <span class="attr">template:</span></span><br><span class="line">      <span class="attr">query-timeout:</span> <span class="number">-1</span>   <span class="comment"># 查询超时时间</span></span><br><span class="line">      <span class="attr">max-rows:</span> <span class="number">500</span>       <span class="comment"># 最大行数</span></span><br><span class="line">      <span class="attr">fetch-size:</span> <span class="number">-1</span>      <span class="comment"># 缓存行数</span></span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>SpringBoot内置JdbcTemplate持久化解决方案</li><li>使用JdbcTemplate需要导入spring-boot-starter-jdbc的坐标</li></ol><h4 id="数据库技术"><a href="#数据库技术" class="headerlink" title="数据库技术"></a>数据库技术</h4><p>​        截止到目前，springboot给开发者提供了内置的数据源解决方案和持久化解决方案，在数据层解决方案三件套中还剩下一个数据库，莫非springboot也提供有内置的解决方案？还真有，还不是一个，三个，这一节就来说说内置的数据库解决方案。</p><p>​        springboot提供了3款内置的数据库，分别是</p><ul><li>H2</li><li>HSQL</li><li>Derby</li></ul><p>​        以上三款数据库除了可以独立安装之外，还可以像是tomcat服务器一样，采用内嵌的形式运行在spirngboot容器中。内嵌在容器中运行，那必须是java对象啊，对，这三款数据库底层都是使用java语言开发的。</p><p>​        我们一直使用MySQL数据库就挺好的，为什么有需求用这个呢？原因就在于这三个数据库都可以采用内嵌容器的形式运行，在应用程序运行后，如果我们进行测试工作，此时测试的数据无需存储在磁盘上，但是又要测试使用，内嵌数据库就方便了，运行在内存中，该测试测试，该运行运行，等服务器关闭后，一切烟消云散，多好，省得你维护外部数据库了。这也是内嵌数据库的最大优点，方便进行功能测试。</p><p>​        下面以H2数据库为例讲解如何使用这些内嵌数据库，操作步骤也非常简单，简单才好用嘛</p><p><strong>步骤①</strong>：导入H2数据库对应的坐标，一共2个</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.h2database<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>h2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：将工程设置为web工程，启动工程时启动H2数据库</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤③</strong>：通过配置开启H2数据库控制台访问程序，也可以使用其他的数据库连接软件操作</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">h2:</span></span><br><span class="line">    <span class="attr">console:</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">path:</span> <span class="string">/h2</span></span><br></pre></td></tr></tbody></table></figure><p>​        web端访问路径/h2，访问密码123456，如果访问失败，先配置下列数据源，启动程序运行后再次访问/h2路径就可以正常访问了</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">datasource:</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">jdbc:h2:~/test</span></span><br><span class="line">  <span class="attr">hikari:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">org.h2.Driver</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">sa</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤④</strong>：使用JdbcTemplate或MyBatisPlus技术操作数据库</p><p>（略）</p><p>​        其实我们只是换了一个数据库而已，其他的东西都不受影响。一个重要提醒，别忘了，上线时，把内存级数据库关闭，采用MySQL数据库作为数据持久化方案，关闭方式就是设置enabled属性为false即可。</p><p><strong>总结</strong></p><ol><li>H2内嵌式数据库启动方式，添加坐标，添加配置</li><li>H2数据库线上运行时请务必关闭</li></ol><p>​        到这里SQL相关的数据层解决方案就讲完了，现在的可选技术就丰富的多了。</p><ul><li>数据源技术：Druid、Hikari、tomcat DataSource、DBCP</li><li>持久化技术：MyBatisPlus、MyBatis、JdbcTemplate</li><li>数据库技术：MySQL、H2、HSQL、Derby</li></ul><p>​        现在开发程序时就可以在以上技术中任选一种组织成一套数据库解决方案了。</p><h3 id="KF-4-2-NoSQL"><a href="#KF-4-2-NoSQL" class="headerlink" title="KF-4-2.NoSQL"></a>KF-4-2.NoSQL</h3><p>​        SQL数据层解决方案说完了，下面来说收NoSQL数据层解决方案。这个NoSQL是什么意思呢？从字面来看，No表示否定，NoSQL就是非关系型数据库解决方案，意思就是数据该存存该取取，只是这些数据不放在关系型数据库中了，那放在哪里？自然是一些能够存储数据的其他相关技术中了，比如Redis等。本节讲解的内容就是springboot如何整合这些技术，在springboot官方文档中提供了10种相关技术的整合方案，我们将讲解国内市场上最流行的几款NoSQL数据库整合方案，分别是Redis、MongoDB、ES。</p><p>​        因为每个小伙伴学习这门课程的时候起点不同，为了便于各位学习者更好的学习，每种技术在讲解整合前都会先讲一下安装和基本使用，然后再讲整合。如果对某个技术比较熟悉的小伙伴可以直接跳过安装的学习过程，直接看整合方案即可。此外上述这些技术最佳使用方案都是在Linux服务器上部署，但是考虑到各位小伙伴的学习起点差异过大，所以下面的课程都是以Windows平台作为安装基础讲解，如果想看Linux版软件安装，可以再找到对应技术的学习文档查阅学习。</p><h4 id="SpringBoot整合Redis"><a href="#SpringBoot整合Redis" class="headerlink" title="SpringBoot整合Redis"></a>SpringBoot整合Redis</h4><p>​        Redis是一款采用key-value数据存储格式的内存级NoSQL数据库，重点关注数据存储格式，是key-value格式，也就是键值对的存储形式。与MySQL数据库不同，MySQL数据库有表、有字段、有记录，Redis没有这些东西，就是一个名称对应一个值，并且数据以存储在内存中使用为主。什么叫以存储在内存中为主？其实Redis有它的数据持久化方案，分别是RDB和AOF，但是Redis自身并不是为了数据持久化而生的，主要是在内存中保存数据，加速数据访问的，所以说是一款内存级数据库。</p><p>​        Redis支持多种数据存储格式，比如可以直接存字符串，也可以存一个map集合，list集合，后面会涉及到一些不同格式的数据操作，这个需要先学习一下才能进行整合，所以在基本操作中会介绍一些相关操作。下面就先安装，再操作，最后说整合</p><h5 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h5><p>​        windows版安装包下载地址：<a href="https://github.com/tporadowski/redis/releases">https://github.com/tporadowski/redis/releases</a></p><p>​        下载的安装包有两种形式，一种是一键安装的msi文件，还有一种是解压缩就能使用的zip文件，哪种形式都行，这里就不介绍安装过程了，本课程采用的是msi一键安装的msi文件进行安装的。</p><p>​        啥是msi，其实就是一个文件安装包，不仅安装软件，还帮你把安装软件时需要的功能关联在一起，打包操作。比如如安装序列、创建和设置安装路径、设置系统依赖项、默认设定安装选项和控制安装过程的属性。说简单点就是一站式服务，安装过程一条龙操作一气呵成，就是为小白用户提供的软件安装程序。</p><p>​        安装完毕后会得到如下文件，其中有两个文件对应两个命令，是启动Redis的核心命令，需要再CMD命令行模式执行。</p><img src="/2023/07/26/springboot100000/image-20220224091709173.png" alt="image-20220224091709173" style="zoom: 80%;"><p><strong>启动服务器</strong></p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server.exe redis.windows.conf</span><br></pre></td></tr></tbody></table></figure><p>​        初学者无需调整服务器对外服务端口，默认6379。</p><p><strong>启动客户端</strong></p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli.exe</span><br></pre></td></tr></tbody></table></figure><p>​        如果启动redis服务器失败，可以先启动客户端，然后执行shutdown操作后退出，此时redis服务器就可以正常执行了。</p><h5 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h5><p>​        服务器启动后，使用客户端就可以连接服务器，类似于启动完MySQL数据库，然后启动SQL命令行操作数据库。        </p><p>​        放置一个字符串数据到redis中，先为数据定义一个名称，比如name,age等，然后使用命令set设置数据到redis服务器中即可</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> name itheima</span><br><span class="line"><span class="built_in">set</span> age <span class="number">12</span></span><br></pre></td></tr></tbody></table></figure><p>​        从redis中取出已经放入的数据，根据名称取，就可以得到对应数据。如果没有对应数据就会得到(nil)</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">get name</span><br><span class="line">get age</span><br></pre></td></tr></tbody></table></figure><p>​        以上使用的数据存储是一个名称对应一个值，如果要维护的数据过多，可以使用别的数据存储结构。例如hash，它是一种一个名称下可以存储多个数据的存储模型，并且每个数据也可以有自己的二级存储名称。向hash结构中存储数据格式如下：</p><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hset <span class="selector-tag">a</span> a1 aa1#对外key名称是<span class="selector-tag">a</span>，在名称为<span class="selector-tag">a</span>的存储模型中，a1这个key中保存了数据aa1</span><br><span class="line">hset <span class="selector-tag">a</span> a2 aa2</span><br></pre></td></tr></tbody></table></figure><p>​        获取hash结构中的数据命令如下</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hget a a1#得到aa1</span><br><span class="line">hget a a2#得到aa2</span><br></pre></td></tr></tbody></table></figure><p>​        有关redis的基础操作就普及到这里，需要全面掌握redis技术，请参看相关教程学习。</p><h5 id="整合"><a href="#整合" class="headerlink" title="整合"></a>整合</h5><p>​        在进行整合之前先梳理一下整合的思想，springboot整合任何技术其实就是在springboot中使用对应技术的API。如果两个技术没有交集，就不存在整合的概念了。所谓整合其实就是使用springboot技术去管理其他技术，几个问题是躲不掉的。</p><p>​        第一，需要先导入对应技术的坐标，而整合之后，这些坐标都有了一些变化</p><p>​        第二，任何技术通常都会有一些相关的设置信息，整合之后，这些信息如何写，写在哪是一个问题</p><p>​        第三，没有整合之前操作如果是模式A的话，整合之后如果没有给开发者带来一些便捷操作，那整合将毫无意义，所以整合后操作肯定要简化一些，那对应的操作方式自然也有所不同</p><p>​        按照上面的三个问题去思考springboot整合所有技术是一种通用思想，在整合的过程中会逐步摸索出整合的套路，而且适用性非常强，经过若干种技术的整合后基本上可以总结出一套固定思维。</p><p>​        下面就开始springboot整合redis，操作步骤如下：</p><p><strong>步骤①</strong>：导入springboot整合redis的starter坐标</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        上述坐标可以在创建模块的时候通过勾选的形式进行选择，归属NoSQL分类中</p><img src="/2023/07/26/springboot100000/image-20220224101142220.png" alt="image-20220224101142220" style="zoom:50%;"><p><strong>步骤②</strong>：进行基础配置</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br></pre></td></tr></tbody></table></figure><p>​        操作redis，最基本的信息就是操作哪一台redis服务器，所以服务器地址属于基础配置信息，不可缺少。但是即便你不配置，目前也是可以用的。因为以上两组信息都有默认配置，刚好就是上述配置值。</p><p><strong>步骤③</strong>：使用springboot整合redis的专用客户端接口操作，此处使用的是RedisTemplate</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot16RedisApplicationTests</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate redisTemplate;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">set</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">ValueOperations</span> <span class="variable">ops</span> <span class="operator">=</span> redisTemplate.opsForValue();</span><br><span class="line">        ops.set(<span class="string">"age"</span>,<span class="number">41</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">get</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">ValueOperations</span> <span class="variable">ops</span> <span class="operator">=</span> redisTemplate.opsForValue();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">age</span> <span class="operator">=</span> ops.get(<span class="string">"name"</span>);</span><br><span class="line">        System.out.println(age);</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">hset</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">HashOperations</span> <span class="variable">ops</span> <span class="operator">=</span> redisTemplate.opsForHash();</span><br><span class="line">        ops.put(<span class="string">"info"</span>,<span class="string">"b"</span>,<span class="string">"bb"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">hget</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">HashOperations</span> <span class="variable">ops</span> <span class="operator">=</span> redisTemplate.opsForHash();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">val</span> <span class="operator">=</span> ops.get(<span class="string">"info"</span>, <span class="string">"b"</span>);</span><br><span class="line">        System.out.println(val);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>​        在操作redis时，需要先确认操作何种数据，根据数据种类得到操作接口。例如使用opsForValue()获取string类型的数据操作接口，使用opsForHash()获取hash类型的数据操作接口，剩下的就是调用对应api操作了。各种类型的数据操作接口如下：</p><img src="/2023/07/26/springboot100000/image-20220224103104908.png" alt="image-20220224103104908" style="zoom:80%;"><p><strong>总结</strong></p><ol><li>springboot整合redis步骤<ol><li>导入springboot整合redis的starter坐标</li><li>进行基础配置</li><li>使用springboot整合redis的专用客户端接口RedisTemplate操作</li></ol></li></ol><p><strong>StringRedisTemplate</strong></p><p>​        由于redis内部不提供java对象的存储格式，因此当操作的数据以对象的形式存在时，会进行转码，转换成字符串格式后进行操作。为了方便开发者使用基于字符串为数据的操作，springboot整合redis时提供了专用的API接口StringRedisTemplate，你可以理解为这是RedisTemplate的一种指定数据泛型的操作API。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StringRedisTemplateTest</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StringRedisTemplate stringRedisTemplate;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">get</span><span class="params">()</span>{</span><br><span class="line">        ValueOperations&lt;String, String&gt; ops = stringRedisTemplate.opsForValue();</span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> ops.get(<span class="string">"name"</span>);</span><br><span class="line">        System.out.println(name);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>redis客户端选择</strong></p><pre><code>     springboot整合redis技术提供了多种客户端兼容模式，默认提供的是lettucs客户端技术，也可以根据需要切换成指定客户端技术，例如jedis客户端技术，切换成jedis客户端技术操作步骤如下：</code></pre><p><strong>步骤①</strong>：导入jedis坐标</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        jedis坐标受springboot管理，无需提供版本号</p><p><strong>步骤②</strong>：配置客户端技术类型，设置为jedis</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">    <span class="attr">client-type:</span> <span class="string">jedis</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤③</strong>：根据需要设置对应的配置</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">    <span class="attr">client-type:</span> <span class="string">jedis</span></span><br><span class="line">    <span class="attr">lettuce:</span></span><br><span class="line">      <span class="attr">pool:</span></span><br><span class="line">        <span class="attr">max-active:</span> <span class="number">16</span></span><br><span class="line">    <span class="attr">jedis:</span></span><br><span class="line">      <span class="attr">pool:</span></span><br><span class="line">        <span class="attr">max-active:</span> <span class="number">16</span></span><br></pre></td></tr></tbody></table></figure><p><strong>lettcus与jedis区别</strong></p><ul><li>jedis连接Redis服务器是直连模式，当多线程模式下使用jedis会存在线程安全问题，解决方案可以通过配置连接池使每个连接专用，这样整体性能就大受影响</li><li>lettcus基于Netty框架进行与Redis服务器连接，底层设计中采用StatefulRedisConnection。 StatefulRedisConnection自身是线程安全的，可以保障并发访问安全问题，所以一个连接可以被多线程复用。当然lettcus也支持多连接实例一起工作</li></ul><p><strong>总结</strong></p><ol><li>springboot整合redis提供了StringRedisTemplate对象，以字符串的数据格式操作redis</li><li>如果需要切换redis客户端实现技术，可以通过配置的形式进行</li></ol><h4 id="SpringBoot整合MongoDB"><a href="#SpringBoot整合MongoDB" class="headerlink" title="SpringBoot整合MongoDB"></a>SpringBoot整合MongoDB</h4><p>​        使用Redis技术可以有效的提高数据访问速度，但是由于Redis的数据格式单一性，无法操作结构化数据，当操作对象型的数据时，Redis就显得捉襟见肘。在保障访问速度的情况下，如果想操作结构化数据，看来Redis无法满足要求了，此时需要使用全新的数据存储结束来解决此问题，本节讲解springboot如何整合MongoDB技术。</p><p>​        MongoDB是一个开源、高性能、无模式的文档型数据库，它是NoSQL数据库产品中的一种，是最像关系型数据库的非关系型数据库。</p><p>​        上述描述中几个词，其中对于我们最陌生的词是无模式的。什么叫无模式呢？简单说就是作为一款数据库，没有固定的数据存储结构，第一条数据可能有A、B、C一共3个字段，第二条数据可能有D、E、F也是3个字段，第三条数据可能是A、C、E3个字段，也就是说数据的结构不固定，这就是无模式。有人会说这有什么用啊？灵活，随时变更，不受约束。基于上述特点，MongoDB的应用面也会产生一些变化。以下列出了一些可以使用MongoDB作为数据存储的场景，但是并不是必须使用MongoDB的场景：</p><ul><li>淘宝用户数据<ul><li>存储位置：数据库</li><li>特征：永久性存储，修改频度极低</li></ul></li><li>游戏装备数据、游戏道具数据<ul><li>存储位置：数据库、Mongodb</li><li>特征：永久性存储与临时存储相结合、修改频度较高</li></ul></li><li>直播数据、打赏数据、粉丝数据<ul><li>存储位置：数据库、Mongodb</li><li>特征：永久性存储与临时存储相结合，修改频度极高</li></ul></li><li>物联网数据<ul><li>存储位置：Mongodb</li><li>特征：临时存储，修改频度飞速</li></ul></li></ul><p>​        快速了解一下MongoDB，下面直接开始我们的学习，老规矩，先安装，再操作，最后说整合</p><h5 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h5><p>​        windows版安装包下载地址：<a href="https://www.mongodb.com/try/download">https://www.mongodb.com/try/download</a></p><p>​        下载的安装包也有两种形式，一种是一键安装的msi文件，还有一种是解压缩就能使用的zip文件，哪种形式都行，本课程采用解压缩zip文件进行安装。</p><p>​        解压缩完毕后会得到如下文件，其中bin目录包含了所有mongodb的可执行命令</p><p><img src="/2023/07/26/springboot100000/image-20220224111306933.png" alt="image-20220224111306933"></p><p>​        mongodb在运行时需要指定一个数据存储的目录，所以创建一个数据存储目录，通常放置在安装目录中，此处创建data的目录用来存储数据，具体如下</p><p><img src="/2023/07/26/springboot100000/image-20220224111053408.png" alt="image-20220224111053408"></p><p>​        如果在安装的过程中出现了如下警告信息，就是告诉你，你当前的操作系统缺少了一些系统文件，这个不用担心。</p><img src="/2023/07/26/springboot100000/image-20220224113956882.png" alt="image-20220224113956882" style="zoom:50%;"><p>​        根据下列方案即可解决，在浏览器中搜索提示缺少的名称对应的文件，并下载，将下载的文件拷贝到windows安装目录的system32目录下，然后在命令行中执行regsvr32命令注册此文件。根据下载的文件名不同，执行命令前更改对应名称。</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">regsvr32 vcruntime140_1.dll</span><br></pre></td></tr></tbody></table></figure><p><strong>启动服务器</strong></p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongod --dbpath=..\data\db</span><br></pre></td></tr></tbody></table></figure><p>​        启动服务器时需要指定数据存储位置，通过参数–dbpath进行设置，可以根据需要自行设置数据存储路径。默认服务端口27017。</p><p><strong>启动客户端</strong></p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongo --host=<span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span> --port=<span class="number">27017</span></span><br></pre></td></tr></tbody></table></figure><h5 id="基本操作-1"><a href="#基本操作-1" class="headerlink" title="基本操作"></a>基本操作</h5><p>​        MongoDB虽然是一款数据库，但是它的操作并不是使用SQL语句进行的，因此操作方式各位小伙伴可能比较陌生，好在有一些类似于Navicat的数据库客户端软件，能够便捷的操作MongoDB，先安装一个客户端，再来操作MongoDB。</p><p>​        同类型的软件较多，本次安装的软件时Robo3t，Robot3t是一款绿色软件，无需安装，解压缩即可。解压缩完毕后进入安装目录双击robot3t.exe即可使用。</p><img src="/2023/07/26/springboot100000/image-20220224114911573.png" alt="image-20220224114911573" style="zoom: 33%;"><p>​        打开软件首先要连接MongoDB服务器，选择【File】菜单，选择【Connect…】</p><p><img src="/2023/07/26/springboot100000/image-20220224115202422.png" alt="image-20220224115202422"></p><p>​        进入连接管理界面后，选择左上角的【Create】链接，创建新的连接设置</p><img src="/2023/07/26/springboot100000/image-20220224115254200.png" alt="image-20220224115254200" style="zoom:80%;"><p>​        如果输入设置值即可连接（默认不修改即可连接本机27017端口）</p><p><img src="/2023/07/26/springboot100000/image-20220224115300266.png" alt="image-20220224115300266"></p><p>​        连接成功后在命令输入区域输入命令即可操作MongoDB。</p><p>​        创建数据库：在左侧菜单中使用右键创建，输入数据库名称即可</p><p>​        创建集合：在Collections上使用右键创建，输入集合名称即可，集合等同于数据库中的表的作用</p><p>​        新增文档：（文档是一种类似json格式的数据，初学者可以先把数据理解为就是json数据）    </p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.集合名称.insert/save/insertOne(文档)</span><br></pre></td></tr></tbody></table></figure><p>​        删除文档：</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.集合名称.remove(条件)</span><br></pre></td></tr></tbody></table></figure><p>​        修改文档：</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.集合名称.update(条件，{操作种类:{文档}})</span><br></pre></td></tr></tbody></table></figure><p>​        查询文档：</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">基础查询</span><br><span class="line">查询全部：   db.集合.<span class="built_in">find</span>();</span><br><span class="line">查第一条：   db.集合.findOne()</span><br><span class="line">查询指定数量文档：db.集合.<span class="built_in">find</span>().limit(<span class="number">10</span>)//查<span class="number">10</span>条文档</span><br><span class="line">跳过指定数量文档：db.集合.<span class="built_in">find</span>().skip(<span class="number">20</span>)//跳过<span class="number">20</span>条文档</span><br><span class="line">统计：  db.集合.count()</span><br><span class="line">排序：db.集合.<span class="built_in">sort</span>({age:<span class="number">1</span>})//按age升序排序</span><br><span class="line">投影：db.集合名称.<span class="built_in">find</span>(条件,{name:<span class="number">1</span>,age:<span class="number">1</span>}) //仅保留name与age域</span><br><span class="line"></span><br><span class="line">条件查询</span><br><span class="line">基本格式：db.集合.<span class="built_in">find</span>({条件})</span><br><span class="line">模糊查询：db.集合.<span class="built_in">find</span>({域名:/正则表达式/})  //等同SQL中的like，比like强大，可以执行正则所有规则</span><br><span class="line">条件比较运算：   db.集合.<span class="built_in">find</span>({域名:{$gt:值}})//等同SQL中的数值比较操作，例如：name&gt;<span class="number">18</span></span><br><span class="line">包含查询：db.集合.<span class="built_in">find</span>({域名:{$<span class="keyword">in</span>:[值<span class="number">1</span>，值<span class="number">2</span>]}})//等同于SQL中的<span class="keyword">in</span></span><br><span class="line">条件连接查询：   db.集合.<span class="built_in">find</span>({$and:[{条件<span class="number">1</span>},{条件<span class="number">2</span>}]})   //等同于SQL中的and、or</span><br></pre></td></tr></tbody></table></figure><p>​        有关MongoDB的基础操作就普及到这里，需要全面掌握MongoDB技术，请参看相关教程学习。</p><h5 id="整合-1"><a href="#整合-1" class="headerlink" title="整合"></a>整合</h5><p>​        使用springboot整合MongDB该如何进行呢？其实springboot为什么使用的开发者这么多，就是因为他的套路几乎完全一样。导入坐标，做配置，使用API接口操作。整合Redis如此，整合MongoDB同样如此。</p><p>​        第一，先导入对应技术的整合starter坐标</p><p>​        第二，配置必要信息</p><p>​        第三，使用提供的API操作即可</p><p>​        下面就开始springboot整合MongoDB，操作步骤如下：</p><p><strong>步骤①</strong>：导入springboot整合MongoDB的starter坐标</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-mongodb<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        上述坐标也可以在创建模块的时候通过勾选的形式进行选择，同样归属NoSQL分类中</p><img src="/2023/07/26/springboot100000/image-20220224120721626.png" alt="image-20220224120721626" style="zoom: 67%;"><p><strong>步骤②</strong>：进行基础配置</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">data:</span></span><br><span class="line">    <span class="attr">mongodb:</span></span><br><span class="line">      <span class="attr">uri:</span> <span class="string">mongodb://localhost/itheima</span></span><br></pre></td></tr></tbody></table></figure><p>​        操作MongoDB需要的配置与操作redis一样，最基本的信息都是操作哪一台服务器，区别就是连接的服务器IP地址和端口不同，书写格式不同而已。</p><p><strong>步骤③</strong>：使用springboot整合MongoDB的专用客户端接口MongoTemplate来进行操作</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot17MongodbApplicationTests</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MongoTemplate mongoTemplate;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Book</span>();</span><br><span class="line">        book.setId(<span class="number">2</span>);</span><br><span class="line">        book.setName(<span class="string">"springboot2"</span>);</span><br><span class="line">        book.setType(<span class="string">"springboot2"</span>);</span><br><span class="line">        book.setDescription(<span class="string">"springboot2"</span>);</span><br><span class="line">        mongoTemplate.save(book);</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">find</span><span class="params">()</span>{</span><br><span class="line">        List&lt;Book&gt; all = mongoTemplate.findAll(Book.class);</span><br><span class="line">        System.out.println(all);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        整合工作到这里就做完了，感觉既熟悉也陌生。熟悉的是这个套路，三板斧，就这三招，导坐标做配置用API操作，陌生的是这个技术，里面具体的操作API可能会不熟悉，有关springboot整合MongoDB我们就讲到这里。有兴趣可以继续学习MongoDB的操作，然后再来这里通过编程的形式操作MongoDB。</p><p><strong>总结</strong></p><ol><li>springboot整合MongoDB步骤<ol><li>导入springboot整合MongoDB的starter坐标</li><li>进行基础配置</li><li>使用springboot整合MongoDB的专用客户端接口MongoTemplate操作</li></ol></li></ol><h4 id="SpringBoot整合ES"><a href="#SpringBoot整合ES" class="headerlink" title="SpringBoot整合ES"></a>SpringBoot整合ES</h4><p>​        NoSQL解决方案已经讲完了两种技术的整合了，Redis可以使用内存加载数据并实现数据快速访问，MongoDB可以在内存中存储类似对象的数据并实现数据的快速访问，在企业级开发中对于速度的追求是永无止境的。下面要讲的内容也是一款NoSQL解决方案，只不过他的作用不是为了直接加速数据的读写，而是加速数据的查询的，叫做ES技术。</p><p>​        ES（Elasticsearch）是一个分布式全文搜索引擎，重点是全文搜索。</p><p>​        那什么是全文搜索呢？比如用户要买一本书，以Java为关键字进行搜索，不管是书名中还是书的介绍中，甚至是书的作者名字，只要包含java就作为查询结果返回给用户查看，上述过程就使用了全文搜索技术。搜索的条件不再是仅用于对某一个字段进行比对，而是在一条数据中使用搜索条件去比对更多的字段，只要能匹配上就列入查询结果，这就是全文搜索的目的。而ES技术就是一种可以实现上述效果的技术。</p><p>​        要实现全文搜索的效果，不可能使用数据库中like操作去进行比对，这种效率太低了。ES设计了一种全新的思想，来实现全文搜索。具体操作过程如下：</p><ol><li><p>将被查询的字段的数据全部文本信息进行查分，分成若干个词</p><ul><li>例如“中华人民共和国”就会被拆分成三个词，分别是“中华”、“人民”、“共和国”，此过程有专业术语叫做分词。分词的策略不同，分出的效果不一样，不同的分词策略称为分词器。</li></ul></li><li><p>将分词得到的结果存储起来，对应每条数据的id</p><ul><li><p>例如id为1的数据中名称这一项的值是“中华人民共和国”，那么分词结束后，就会出现“中华”对应id为1，“人民”对应id为1，“共和国”对应id为1</p></li><li><p>例如id为2的数据中名称这一项的值是“人民代表大会“，那么分词结束后，就会出现“人民”对应id为2，“代表”对应id为2，“大会”对应id为2</p></li><li><p>此时就会出现如下对应结果，按照上述形式可以对所有文档进行分词。需要注意分词的过程不是仅对一个字段进行，而是对每一个参与查询的字段都执行，最终结果汇总到一个表格中</p><table><thead><tr><th>分词结果关键字</th><th>对应id</th></tr></thead><tbody><tr><td>中华</td><td>1</td></tr><tr><td>人民</td><td>1,2</td></tr><tr><td>共和国</td><td>1</td></tr><tr><td>代表</td><td>2</td></tr><tr><td>大会</td><td>2</td></tr></tbody></table></li></ul></li><li><p>当进行查询时，如果输入“人民”作为查询条件，可以通过上述表格数据进行比对，得到id值1,2，然后根据id值就可以得到查询的结果数据了。</p></li></ol><p>​        上述过程中分词结果关键字内容每一个都不相同，作用有点类似于数据库中的索引，是用来加速数据查询的。但是数据库中的索引是对某一个字段进行添加索引，而这里的分词结果关键字不是一个完整的字段值，只是一个字段中的其中的一部分内容。并且索引使用时是根据索引内容查找整条数据，全文搜索中的分词结果关键字查询后得到的并不是整条的数据，而是数据的id，要想获得具体数据还要再次查询，因此这里为这种分词结果关键字起了一个全新的名称，叫做<strong>倒排索引</strong>。</p><p>​        通过上述内容的学习，发现使用ES其实准备工作还是挺多的，必须先建立文档的倒排索引，然后才能继续使用。快速了解一下ES的工作原理，下面直接开始我们的学习，老规矩，先安装，再操作，最后说整合。</p><h5 id="安装-2"><a href="#安装-2" class="headerlink" title="安装"></a>安装</h5><p>​        windows版安装包下载地址：<a href="https://www.elastic.co/cn/downloads/elasticsearch">https://</a><a href="https://www.elastic.co/cn/downloads/elasticsearch">www.elastic.co/cn/downloads/elasticsearch</a></p><p>​        下载的安装包是解压缩就能使用的zip文件，解压缩完毕后会得到如下文件</p><p><img src="/2023/07/26/springboot100000/image-20220225132756400.png" alt="image-20220225132756400"></p><ul><li>bin目录：包含所有的可执行命令</li><li>config目录：包含ES服务器使用的配置文件</li><li>jdk目录：此目录中包含了一个完整的jdk工具包，版本17，当ES升级时，使用最新版本的jdk确保不会出现版本支持性不足的问题</li><li>lib目录：包含ES运行的依赖jar文件</li><li>logs目录：包含ES运行后产生的所有日志文件</li><li>modules目录：包含ES软件中所有的功能模块，也是一个一个的jar包。和jar目录不同，jar目录是ES运行期间依赖的jar包，modules是ES软件自己的功能jar包</li><li>plugins目录：包含ES软件安装的插件，默认为空</li></ul><p><strong>启动服务器</strong></p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">elasticsearch.bat</span><br></pre></td></tr></tbody></table></figure><p>​        双击elasticsearch.bat文件即可启动ES服务器，默认服务端口9200。通过浏览器访问<a href="http://localhost:9200看到如下信息视为ES服务器正常启动">http://localhost:9200看到如下信息视为ES服务器正常启动</a></p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  "name" : "CZBK-**********",</span><br><span class="line">  "cluster_name" : "elasticsearch",</span><br><span class="line">  "cluster_uuid" : "j137DSswTPG8U4Yb-<span class="number">0</span>T1Mg",</span><br><span class="line">  "version" : {</span><br><span class="line">    "number" : "<span class="number">7</span>.<span class="number">16</span>.<span class="number">2</span>",</span><br><span class="line">    "build_flavor" : "default",</span><br><span class="line">    "build_type" : "zip",</span><br><span class="line">    "build_hash" : "<span class="number">2</span>b937c44140b6559905130a8650c64dbd0879cfb",</span><br><span class="line">    "build_date" : "<span class="number">2021</span>-<span class="number">12</span>-<span class="number">18</span>T19:<span class="number">42</span>:<span class="number">46</span>.<span class="number">604893745</span>Z",</span><br><span class="line">    "build_snapshot" : false,</span><br><span class="line">    "lucene_version" : "<span class="number">8</span>.<span class="number">10</span>.<span class="number">1</span>",</span><br><span class="line">    "minimum_wire_compatibility_version" : "<span class="number">6</span>.<span class="number">8</span>.<span class="number">0</span>",</span><br><span class="line">    "minimum_index_compatibility_version" : "<span class="number">6</span>.<span class="number">0</span>.<span class="number">0</span>-beta1"</span><br><span class="line">  },</span><br><span class="line">  "tagline" : "You Know, <span class="keyword">for</span> Search"</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h5 id="基本操作-2"><a href="#基本操作-2" class="headerlink" title="基本操作"></a>基本操作</h5><p>​        ES中保存有我们要查询的数据，只不过格式和数据库存储数据格式不同而已。在ES中我们要先创建倒排索引，这个索引的功能又点类似于数据库的表，然后将数据添加到倒排索引中，添加的数据称为文档。所以要进行ES的操作要先创建索引，再添加文档，这样才能进行后续的查询操作。</p><p>​        要操作ES可以通过Rest风格的请求来进行，也就是说发送一个请求就可以执行一个操作。比如新建索引，删除索引这些操作都可以使用发送请求的形式来进行。</p><ul><li><p>创建索引，books是索引名称，下同</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PUT请求http://localhost:<span class="number">9200</span>/books</span><br></pre></td></tr></tbody></table></figure><p>发送请求后，看到如下信息即索引创建成功</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"acknowledged"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"shards_acknowledged"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"index"</span><span class="punctuation">:</span> <span class="string">"books"</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>重复创建已经存在的索引会出现错误信息，reason属性中描述错误原因</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"error"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"root_cause"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">{</span></span><br><span class="line">                <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"resource_already_exists_exception"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"reason"</span><span class="punctuation">:</span> <span class="string">"index [books/VgC_XMVAQmedaiBNSgO2-w] already exists"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"index_uuid"</span><span class="punctuation">:</span> <span class="string">"VgC_XMVAQmedaiBNSgO2-w"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"index"</span><span class="punctuation">:</span> <span class="string">"books"</span></span><br><span class="line">            <span class="punctuation">}</span></span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"resource_already_exists_exception"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"reason"</span><span class="punctuation">:</span> <span class="string">"index [books/VgC_XMVAQmedaiBNSgO2-w] already exists"</span><span class="punctuation">,</span># books索引已经存在</span><br><span class="line">        <span class="attr">"index_uuid"</span><span class="punctuation">:</span> <span class="string">"VgC_XMVAQmedaiBNSgO2-w"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"index"</span><span class="punctuation">:</span> <span class="string">"book"</span></span><br><span class="line">    <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"status"</span><span class="punctuation">:</span> <span class="number">400</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>查询索引</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET请求http://localhost:<span class="number">9200</span>/books</span><br></pre></td></tr></tbody></table></figure><p>查询索引得到索引相关信息，如下</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"book"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"aliases"</span><span class="punctuation">:</span> <span class="punctuation">{</span><span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"mappings"</span><span class="punctuation">:</span> <span class="punctuation">{</span><span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"settings"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"index"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                <span class="attr">"routing"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                    <span class="attr">"allocation"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                        <span class="attr">"include"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                            <span class="attr">"_tier_preference"</span><span class="punctuation">:</span> <span class="string">"data_content"</span></span><br><span class="line">                        <span class="punctuation">}</span></span><br><span class="line">                    <span class="punctuation">}</span></span><br><span class="line">                <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"number_of_shards"</span><span class="punctuation">:</span> <span class="string">"1"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"provided_name"</span><span class="punctuation">:</span> <span class="string">"books"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"creation_date"</span><span class="punctuation">:</span> <span class="string">"1645768584849"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"number_of_replicas"</span><span class="punctuation">:</span> <span class="string">"1"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"uuid"</span><span class="punctuation">:</span> <span class="string">"VgC_XMVAQmedaiBNSgO2-w"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"version"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                    <span class="attr">"created"</span><span class="punctuation">:</span> <span class="string">"7160299"</span></span><br><span class="line">                <span class="punctuation">}</span></span><br><span class="line">            <span class="punctuation">}</span></span><br><span class="line">        <span class="punctuation">}</span></span><br><span class="line">    <span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>如果查询了不存在的索引，会返回错误信息，例如查询名称为book的索引后信息如下</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"error"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"root_cause"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">{</span></span><br><span class="line">                <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"index_not_found_exception"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"reason"</span><span class="punctuation">:</span> <span class="string">"no such index [book]"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"resource.type"</span><span class="punctuation">:</span> <span class="string">"index_or_alias"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"resource.id"</span><span class="punctuation">:</span> <span class="string">"book"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"index_uuid"</span><span class="punctuation">:</span> <span class="string">"_na_"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"index"</span><span class="punctuation">:</span> <span class="string">"book"</span></span><br><span class="line">            <span class="punctuation">}</span></span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"index_not_found_exception"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"reason"</span><span class="punctuation">:</span> <span class="string">"no such index [book]"</span><span class="punctuation">,</span># 没有book索引</span><br><span class="line">        <span class="attr">"resource.type"</span><span class="punctuation">:</span> <span class="string">"index_or_alias"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"resource.id"</span><span class="punctuation">:</span> <span class="string">"book"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"index_uuid"</span><span class="punctuation">:</span> <span class="string">"_na_"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"index"</span><span class="punctuation">:</span> <span class="string">"book"</span></span><br><span class="line">    <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"status"</span><span class="punctuation">:</span> <span class="number">404</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>删除索引</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE请求http://localhost:<span class="number">9200</span>/books</span><br></pre></td></tr></tbody></table></figure><p>删除所有后，给出删除结果</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"acknowledged"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>如果重复删除，会给出错误信息，同样在reason属性中描述具体的错误原因</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"error"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"root_cause"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">{</span></span><br><span class="line">                <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"index_not_found_exception"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"reason"</span><span class="punctuation">:</span> <span class="string">"no such index [books]"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"resource.type"</span><span class="punctuation">:</span> <span class="string">"index_or_alias"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"resource.id"</span><span class="punctuation">:</span> <span class="string">"book"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"index_uuid"</span><span class="punctuation">:</span> <span class="string">"_na_"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"index"</span><span class="punctuation">:</span> <span class="string">"book"</span></span><br><span class="line">            <span class="punctuation">}</span></span><br><span class="line">        <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"index_not_found_exception"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"reason"</span><span class="punctuation">:</span> <span class="string">"no such index [books]"</span><span class="punctuation">,</span># 没有books索引</span><br><span class="line">        <span class="attr">"resource.type"</span><span class="punctuation">:</span> <span class="string">"index_or_alias"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"resource.id"</span><span class="punctuation">:</span> <span class="string">"book"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"index_uuid"</span><span class="punctuation">:</span> <span class="string">"_na_"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"index"</span><span class="punctuation">:</span> <span class="string">"book"</span></span><br><span class="line">    <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"status"</span><span class="punctuation">:</span> <span class="number">404</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>创建索引并指定分词器</p><p>​        前面创建的索引是未指定分词器的，可以在创建索引时添加请求参数，设置分词器。目前国内较为流行的分词器是IK分词器，使用前先在下对应的分词器，然后使用。IK分词器下载地址：<a href="https://github.com/medcl/elasticsearch-analysis-ik/releases">https://github.com/medcl/elasticsearch-analysis-ik/releases</a></p><p>​        分词器下载后解压到ES安装目录的plugins目录中即可，安装分词器后需要重新启动ES服务器。使用IK分词器创建索引格式：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">PUT请求http<span class="punctuation">:</span><span class="comment">//localhost:9200/books</span></span><br><span class="line"></span><br><span class="line">请求参数如下（注意是json格式的参数）</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"mappings"</span><span class="punctuation">:</span><span class="punctuation">{</span>#定义mappings属性，替换创建索引时对应的mappings属性</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"properties"</span><span class="punctuation">:</span><span class="punctuation">{</span>#定义索引中包含的属性设置</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"id"</span><span class="punctuation">:</span><span class="punctuation">{</span>#设置索引中包含id属性</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"type"</span><span class="punctuation">:</span><span class="string">"keyword"</span>#当前属性可以被直接搜索</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"name"</span><span class="punctuation">:</span><span class="punctuation">{</span>#设置索引中包含name属性</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"type"</span><span class="punctuation">:</span><span class="string">"text"</span><span class="punctuation">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#当前属性是文本信息，参与分词&nbsp;&nbsp;</span><br><span class="line">                <span class="attr">"analyzer"</span><span class="punctuation">:</span><span class="string">"ik_max_word"</span><span class="punctuation">,</span>&nbsp;&nbsp;&nbsp;#使用IK分词器进行分词&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br><span class="line">                <span class="attr">"copy_to"</span><span class="punctuation">:</span><span class="string">"all"</span>#分词结果拷贝到all属性中</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"type"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"type"</span><span class="punctuation">:</span><span class="string">"keyword"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"description"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"type"</span><span class="punctuation">:</span><span class="string">"text"</span><span class="punctuation">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br><span class="line">                <span class="attr">"analyzer"</span><span class="punctuation">:</span><span class="string">"ik_max_word"</span><span class="punctuation">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br><span class="line">                <span class="attr">"copy_to"</span><span class="punctuation">:</span><span class="string">"all"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"all"</span><span class="punctuation">:</span><span class="punctuation">{</span>#定义属性，用来描述多个字段的分词结果集合，当前属性可以参与查询</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"type"</span><span class="punctuation">:</span><span class="string">"text"</span><span class="punctuation">,</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br><span class="line">                <span class="attr">"analyzer"</span><span class="punctuation">:</span><span class="string">"ik_max_word"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>​        创建完毕后返回结果和不使用分词器创建索引的结果是一样的，此时可以通过查看索引信息观察到添加的请求参数mappings已经进入到了索引属性中</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"books"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"aliases"</span><span class="punctuation">:</span> <span class="punctuation">{</span><span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"mappings"</span><span class="punctuation">:</span> <span class="punctuation">{</span>#mappings属性已经被替换</span><br><span class="line">            <span class="attr">"properties"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                <span class="attr">"all"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                    <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"text"</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">"analyzer"</span><span class="punctuation">:</span> <span class="string">"ik_max_word"</span></span><br><span class="line">                <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"description"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                    <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"text"</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">"copy_to"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                        <span class="string">"all"</span></span><br><span class="line">                    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">"analyzer"</span><span class="punctuation">:</span> <span class="string">"ik_max_word"</span></span><br><span class="line">                <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"id"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                    <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"keyword"</span></span><br><span class="line">                <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"name"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                    <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"text"</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">"copy_to"</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                        <span class="string">"all"</span></span><br><span class="line">                    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">"analyzer"</span><span class="punctuation">:</span> <span class="string">"ik_max_word"</span></span><br><span class="line">                <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"type"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                    <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"keyword"</span></span><br><span class="line">                <span class="punctuation">}</span></span><br><span class="line">            <span class="punctuation">}</span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"settings"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"index"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                <span class="attr">"routing"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                    <span class="attr">"allocation"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                        <span class="attr">"include"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                            <span class="attr">"_tier_preference"</span><span class="punctuation">:</span> <span class="string">"data_content"</span></span><br><span class="line">                        <span class="punctuation">}</span></span><br><span class="line">                    <span class="punctuation">}</span></span><br><span class="line">                <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"number_of_shards"</span><span class="punctuation">:</span> <span class="string">"1"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"provided_name"</span><span class="punctuation">:</span> <span class="string">"books"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"creation_date"</span><span class="punctuation">:</span> <span class="string">"1645769809521"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"number_of_replicas"</span><span class="punctuation">:</span> <span class="string">"1"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"uuid"</span><span class="punctuation">:</span> <span class="string">"DohYKvr_SZO4KRGmbZYmTQ"</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"version"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                    <span class="attr">"created"</span><span class="punctuation">:</span> <span class="string">"7160299"</span></span><br><span class="line">                <span class="punctuation">}</span></span><br><span class="line">            <span class="punctuation">}</span></span><br><span class="line">        <span class="punctuation">}</span></span><br><span class="line">    <span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure></li></ul><p>目前我们已经有了索引了，但是索引中还没有数据，所以要先添加数据，ES中称数据为文档，下面进行文档操作。</p><ul><li><p>添加文档，有三种方式</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">POST请求http<span class="punctuation">:</span><span class="comment">//localhost:9200/books/_doc#使用系统生成id</span></span><br><span class="line">POST请求http<span class="punctuation">:</span><span class="comment">//localhost:9200/books/_create/1#使用指定id</span></span><br><span class="line">POST请求http<span class="punctuation">:</span><span class="comment">//localhost:9200/books/_doc/1#使用指定id，不存在创建，存在更新（版本递增）</span></span><br><span class="line"></span><br><span class="line">文档通过请求参数传递，数据格式json</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"name"</span><span class="punctuation">:</span><span class="string">"springboot"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"type"</span><span class="punctuation">:</span><span class="string">"springboot"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"description"</span><span class="punctuation">:</span><span class="string">"springboot"</span></span><br><span class="line"><span class="punctuation">}</span>  </span><br></pre></td></tr></tbody></table></figure></li><li><p>查询文档</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">GET请求http<span class="punctuation">:</span><span class="comment">//localhost:9200/books/_doc/1 #查询单个文档 </span></span><br><span class="line">GET请求http<span class="punctuation">:</span><span class="comment">//localhost:9200/books/_search #查询全部文档</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>条件查询</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET请求http<span class="punctuation">:</span><span class="comment">//localhost:9200/books/_search?q=name:springboot# q=查询属性名:查询属性值</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>删除文档</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE请求http<span class="punctuation">:</span><span class="comment">//localhost:9200/books/_doc/1</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>修改文档（全量更新）</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">PUT请求http<span class="punctuation">:</span><span class="comment">//localhost:9200/books/_doc/1</span></span><br><span class="line"></span><br><span class="line">文档通过请求参数传递，数据格式json</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"name"</span><span class="punctuation">:</span><span class="string">"springboot"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"type"</span><span class="punctuation">:</span><span class="string">"springboot"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"description"</span><span class="punctuation">:</span><span class="string">"springboot"</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>修改文档（部分更新）</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">POST请求http<span class="punctuation">:</span><span class="comment">//localhost:9200/books/_update/1</span></span><br><span class="line"></span><br><span class="line">文档通过请求参数传递，数据格式json</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"doc"</span><span class="punctuation">:</span><span class="punctuation">{</span>#部分更新并不是对原始文档进行更新，而是对原始文档对象中的doc属性中的指定属性更新</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;    <span class="attr">"name"</span><span class="punctuation">:</span><span class="string">"springboot"</span>#仅更新提供的属性值，未提供的属性值不参与更新操作</span><br><span class="line">    <span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure></li></ul><h5 id="整合-2"><a href="#整合-2" class="headerlink" title="整合"></a>整合</h5><p>​        使用springboot整合ES该如何进行呢？老规矩，导入坐标，做配置，使用API接口操作。整合Redis如此，整合MongoDB如此，整合ES依然如此。太没有新意了，其实不是没有新意，这就是springboot的强大之处，所有东西都做成相同规则，对开发者来说非常友好。</p><p>​        下面就开始springboot整合ES，操作步骤如下：</p><p><strong>步骤①</strong>：导入springboot整合ES的starter坐标</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-elasticsearch<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：进行基础配置</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">elasticsearch:</span></span><br><span class="line">    <span class="attr">rest:</span></span><br><span class="line">      <span class="attr">uris:</span> <span class="string">http://localhost:9200</span></span><br></pre></td></tr></tbody></table></figure><p>​        配置ES服务器地址，端口9200</p><p><strong>步骤③</strong>：使用springboot整合ES的专用客户端接口ElasticsearchRestTemplate来进行操作</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot18EsApplicationTests</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ElasticsearchRestTemplate template;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        上述操作形式是ES早期的操作方式，使用的客户端被称为Low Level Client，这种客户端操作方式性能方面略显不足，于是ES开发了全新的客户端操作方式，称为High Level Client。高级别客户端与ES版本同步更新，但是springboot最初整合ES的时候使用的是低级别客户端，所以企业开发需要更换成高级别的客户端模式。</p><p>​        下面使用高级别客户端方式进行springboot整合ES，操作步骤如下：</p><p><strong>步骤①</strong>：导入springboot整合ES高级别客户端的坐标，此种形式目前没有对应的starter</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.elasticsearch.client<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>elasticsearch-rest-high-level-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：使用编程的形式设置连接的ES服务器，并获取客户端对象</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot18EsApplicationTests</span> {</span><br><span class="line">    <span class="keyword">private</span> RestHighLevelClient client;</span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">void</span> <span class="title function_">testCreateClient</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">          <span class="type">HttpHost</span> <span class="variable">host</span> <span class="operator">=</span> HttpHost.create(<span class="string">"http://localhost:9200"</span>);</span><br><span class="line">          <span class="type">RestClientBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> RestClient.builder(host);</span><br><span class="line">          client = <span class="keyword">new</span> <span class="title class_">RestHighLevelClient</span>(builder);</span><br><span class="line">  </span><br><span class="line">          client.close();</span><br><span class="line">      }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        配置ES服务器地址与端口9200，记得客户端使用完毕需要手工关闭。由于当前客户端是手工维护的，因此不能通过自动装配的形式加载对象。</p><p><strong>步骤③</strong>：使用客户端对象操作ES，例如创建索引</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot18EsApplicationTests</span> {</span><br><span class="line">    <span class="keyword">private</span> RestHighLevelClient client;</span><br><span class="line">      <span class="meta">@Test</span></span><br><span class="line">      <span class="keyword">void</span> <span class="title function_">testCreateIndex</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">          <span class="type">HttpHost</span> <span class="variable">host</span> <span class="operator">=</span> HttpHost.create(<span class="string">"http://localhost:9200"</span>);</span><br><span class="line">          <span class="type">RestClientBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> RestClient.builder(host);</span><br><span class="line">          client = <span class="keyword">new</span> <span class="title class_">RestHighLevelClient</span>(builder);</span><br><span class="line">          </span><br><span class="line">          <span class="type">CreateIndexRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CreateIndexRequest</span>(<span class="string">"books"</span>);</span><br><span class="line">          client.indices().create(request, RequestOptions.DEFAULT); </span><br><span class="line">          </span><br><span class="line">          client.close();</span><br><span class="line">      }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        高级别客户端操作是通过发送请求的方式完成所有操作的，ES针对各种不同的操作，设定了各式各样的请求对象，上例中创建索引的对象是CreateIndexRequest，其他操作也会有自己专用的Request对象。</p><p>​        当前操作我们发现，无论进行ES何种操作，第一步永远是获取RestHighLevelClient对象，最后一步永远是关闭该对象的连接。在测试中可以使用测试类的特性去帮助开发者一次性的完成上述操作，但是在业务书写时，还需要自行管理。将上述代码格式转换成使用测试类的初始化方法和销毁方法进行客户端对象的维护。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Springboot18EsApplicationTests</span> {</span><br><span class="line">    <span class="meta">@BeforeEach</span><span class="comment">//在测试类中每个操作运行前运行的方法</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setUp</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">HttpHost</span> <span class="variable">host</span> <span class="operator">=</span> HttpHost.create(<span class="string">"http://localhost:9200"</span>);</span><br><span class="line">        <span class="type">RestClientBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> RestClient.builder(host);</span><br><span class="line">        client = <span class="keyword">new</span> <span class="title class_">RestHighLevelClient</span>(builder);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterEach</span><span class="comment">//在测试类中每个操作运行后运行的方法</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">tearDown</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">        client.close();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> RestHighLevelClient client;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">testCreateIndex</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">        <span class="type">CreateIndexRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CreateIndexRequest</span>(<span class="string">"books"</span>);</span><br><span class="line">        client.indices().create(request, RequestOptions.DEFAULT);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        现在的书写简化了很多，也更合理。下面使用上述模式将所有的ES操作执行一遍，测试结果</p><p><strong>创建索引（IK分词器）</strong>：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testCreateIndexByIK</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="type">CreateIndexRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CreateIndexRequest</span>(<span class="string">"books"</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> <span class="string">"{\n"</span> +</span><br><span class="line">            <span class="string">"    \"mappings\":{\n"</span> +</span><br><span class="line">            <span class="string">"        \"properties\":{\n"</span> +</span><br><span class="line">            <span class="string">"            \"id\":{\n"</span> +</span><br><span class="line">            <span class="string">"                \"type\":\"keyword\"\n"</span> +</span><br><span class="line">            <span class="string">"            },\n"</span> +</span><br><span class="line">            <span class="string">"            \"name\":{\n"</span> +</span><br><span class="line">            <span class="string">"                \"type\":\"text\",\n"</span> +</span><br><span class="line">            <span class="string">"                \"analyzer\":\"ik_max_word\",\n"</span> +</span><br><span class="line">            <span class="string">"                \"copy_to\":\"all\"\n"</span> +</span><br><span class="line">            <span class="string">"            },\n"</span> +</span><br><span class="line">            <span class="string">"            \"type\":{\n"</span> +</span><br><span class="line">            <span class="string">"                \"type\":\"keyword\"\n"</span> +</span><br><span class="line">            <span class="string">"            },\n"</span> +</span><br><span class="line">            <span class="string">"            \"description\":{\n"</span> +</span><br><span class="line">            <span class="string">"                \"type\":\"text\",\n"</span> +</span><br><span class="line">            <span class="string">"                \"analyzer\":\"ik_max_word\",\n"</span> +</span><br><span class="line">            <span class="string">"                \"copy_to\":\"all\"\n"</span> +</span><br><span class="line">            <span class="string">"            },\n"</span> +</span><br><span class="line">            <span class="string">"            \"all\":{\n"</span> +</span><br><span class="line">            <span class="string">"                \"type\":\"text\",\n"</span> +</span><br><span class="line">            <span class="string">"                \"analyzer\":\"ik_max_word\"\n"</span> +</span><br><span class="line">            <span class="string">"            }\n"</span> +</span><br><span class="line">            <span class="string">"        }\n"</span> +</span><br><span class="line">            <span class="string">"    }\n"</span> +</span><br><span class="line">            <span class="string">"}"</span>;</span><br><span class="line">    <span class="comment">//设置请求中的参数</span></span><br><span class="line">    request.source(json, XContentType.JSON);</span><br><span class="line">    client.indices().create(request, RequestOptions.DEFAULT);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        IK分词器是通过请求参数的形式进行设置的，设置请求参数使用request对象中的source方法进行设置，至于参数是什么，取决于你的操作种类。当请求中需要参数时，均可使用当前形式进行参数设置。    </p><p><strong>添加文档</strong>：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="comment">//添加文档</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testCreateDoc</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> bookDao.selectById(<span class="number">1</span>);</span><br><span class="line">    <span class="type">IndexRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">IndexRequest</span>(<span class="string">"books"</span>).id(book.getId().toString());</span><br><span class="line">    <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> JSON.toJSONString(book);</span><br><span class="line">    request.source(json,XContentType.JSON);</span><br><span class="line">    client.index(request,RequestOptions.DEFAULT);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        添加文档使用的请求对象是IndexRequest，与创建索引使用的请求对象不同。    </p><p><strong>批量添加文档</strong>：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="comment">//批量添加文档</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testCreateDocAll</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    List&lt;Book&gt; bookList = bookDao.selectList(<span class="literal">null</span>);</span><br><span class="line">    <span class="type">BulkRequest</span> <span class="variable">bulk</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BulkRequest</span>();</span><br><span class="line">    <span class="keyword">for</span> (Book book : bookList) {</span><br><span class="line">        <span class="type">IndexRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">IndexRequest</span>(<span class="string">"books"</span>).id(book.getId().toString());</span><br><span class="line">        <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> JSON.toJSONString(book);</span><br><span class="line">        request.source(json,XContentType.JSON);</span><br><span class="line">        bulk.add(request);</span><br><span class="line">    }</span><br><span class="line">    client.bulk(bulk,RequestOptions.DEFAULT);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        批量做时，先创建一个BulkRequest的对象，可以将该对象理解为是一个保存request对象的容器，将所有的请求都初始化好后，添加到BulkRequest对象中，再使用BulkRequest对象的bulk方法，一次性执行完毕。</p><p><strong>按id查询文档</strong>：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="comment">//按id查询</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testGet</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="type">GetRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GetRequest</span>(<span class="string">"books"</span>,<span class="string">"1"</span>);</span><br><span class="line">    <span class="type">GetResponse</span> <span class="variable">response</span> <span class="operator">=</span> client.get(request, RequestOptions.DEFAULT);</span><br><span class="line">    <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> response.getSourceAsString();</span><br><span class="line">    System.out.println(json);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        根据id查询文档使用的请求对象是GetRequest。</p><p><strong>按条件查询文档</strong>：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="comment">//按条件查询</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testSearch</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="type">SearchRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SearchRequest</span>(<span class="string">"books"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="type">SearchSourceBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SearchSourceBuilder</span>();</span><br><span class="line">    builder.query(QueryBuilders.termQuery(<span class="string">"all"</span>,<span class="string">"spring"</span>));</span><br><span class="line">    request.source(builder);</span><br><span class="line"></span><br><span class="line">    <span class="type">SearchResponse</span> <span class="variable">response</span> <span class="operator">=</span> client.search(request, RequestOptions.DEFAULT);</span><br><span class="line">    <span class="type">SearchHits</span> <span class="variable">hits</span> <span class="operator">=</span> response.getHits();</span><br><span class="line">    <span class="keyword">for</span> (SearchHit hit : hits) {</span><br><span class="line">        <span class="type">String</span> <span class="variable">source</span> <span class="operator">=</span> hit.getSourceAsString();</span><br><span class="line">        <span class="comment">//System.out.println(source);</span></span><br><span class="line">        <span class="type">Book</span> <span class="variable">book</span> <span class="operator">=</span> JSON.parseObject(source, Book.class);</span><br><span class="line">        System.out.println(book);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        按条件查询文档使用的请求对象是SearchRequest，查询时调用SearchRequest对象的termQuery方法，需要给出查询属性名，此处支持使用合并字段，也就是前面定义索引属性时添加的all属性。</p><p>​        springboot整合ES的操作到这里就说完了，与前期进行springboot整合redis和mongodb的差别还是蛮大的，主要原始就是我们没有使用springboot整合ES的客户端对象。至于操作，由于ES操作种类过多，所以显得操作略微有点复杂。有关springboot整合ES就先学习到这里吧。</p><p><strong>总结</strong></p><ol><li>springboot整合ES步骤<ol><li>导入springboot整合ES的High Level Client坐标</li><li>手工管理客户端对象，包括初始化和关闭操作</li><li>使用High Level Client根据操作的种类不同，选择不同的Request对象完成对应操作</li></ol></li></ol><h2 id="KF-5-整合第三方技术"><a href="#KF-5-整合第三方技术" class="headerlink" title="KF-5.整合第三方技术"></a>KF-5.整合第三方技术</h2><p>​        通过第四章的学习，我们领略到了springboot在整合第三方技术时强大的一致性，在第五章中我们要使用springboot继续整合各种各样的第三方技术，通过本章的学习，可以将之前学习的springboot整合第三方技术的思想贯彻到底，还是那三板斧。导坐标、做配置、调API。</p><p>​        springboot能够整合的技术实在是太多了，可以说是万物皆可整。本章将从企业级开发中常用的一些技术作为出发点，对各种各样的技术进行整合。</p><h3 id="KF-5-1-缓存"><a href="#KF-5-1-缓存" class="headerlink" title="KF-5-1.缓存"></a>KF-5-1.缓存</h3><p>​        企业级应用主要作用是信息处理，当需要读取数据时，由于受限于数据库的访问效率，导致整体系统性能偏低。</p><img src="/2023/07/26/springboot100000/image-20220226154148303.png" alt="image-20220226154148303" style="zoom:67%;"><p>​                                                                      应用程序直接与数据库打交道，访问效率低</p><p>​        为了改善上述现象，开发者通常会在应用程序与数据库之间建立一种临时的数据存储机制，该区域中的数据在内存中保存，读写速度较快，可以有效解决数据库访问效率低下的问题。这一块临时存储数据的区域就是缓存。</p><img src="/2023/07/26/springboot100000/image-20220226154233010.png" alt="image-20220226154233010" style="zoom:67%;"><pre><code>                                         使用缓存后，应用程序与缓存打交道，缓存与数据库打交道，数据访问效率提高</code></pre><p>​        缓存是什么？缓存是一种介于数据永久存储介质与应用程序之间的数据临时存储介质，使用缓存可以有效的减少低速数据读取过程的次数（例如磁盘IO），提高系统性能。此外缓存不仅可以用于提高永久性存储介质的数据读取效率，还可以提供临时的数据存储空间。而springboot提供了对市面上几乎所有的缓存技术进行整合的方案，下面就一起开启springboot整合缓存之旅。</p><h4 id="SpringBoot内置缓存解决方案"><a href="#SpringBoot内置缓存解决方案" class="headerlink" title="SpringBoot内置缓存解决方案"></a>SpringBoot内置缓存解决方案</h4><p>​        springboot技术提供有内置的缓存解决方案，可以帮助开发者快速开启缓存技术，并使用缓存技术进行数据的快速操作，例如读取缓存数据和写入数据到缓存。</p><p><strong>步骤①</strong>：导入springboot提供的缓存技术对应的starter</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-cache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：启用缓存，在引导类上方标注注解@EnableCaching配置springboot程序中可以使用缓存</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">//开启缓存功能</span></span><br><span class="line"><span class="meta">@EnableCaching</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot19CacheApplication</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        SpringApplication.run(Springboot19CacheApplication.class, args);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤③</strong>：设置操作的数据是否使用缓存</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Cacheable(value="cacheSpace",key="#id")</span></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">getById</span><span class="params">(Integer id)</span> {</span><br><span class="line">        <span class="keyword">return</span> bookDao.selectById(id);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        在业务方法上面使用注解@Cacheable声明当前方法的返回值放入缓存中，其中要指定缓存的存储位置，以及缓存中保存当前方法返回值对应的名称。上例中value属性描述缓存的存储位置，可以理解为是一个存储空间名，key属性描述了缓存中保存数据的名称，使用#id读取形参中的id值作为缓存名称。</p><p>​        使用@Cacheable注解后，执行当前操作，如果发现对应名称在缓存中没有数据，就正常读取数据，然后放入缓存；如果对应名称在缓存中有数据，就终止当前业务方法执行，直接返回缓存中的数据。</p><h4 id="手机验证码案例"><a href="#手机验证码案例" class="headerlink" title="手机验证码案例"></a>手机验证码案例</h4><p>​        为了便于下面演示各种各样的缓存技术，我们创建一个手机验证码的案例环境，模拟使用缓存保存手机验证码的过程。</p><p>​        手机验证码案例需求如下：</p><ul><li>输入手机号获取验证码，组织文档以短信形式发送给用户（页面模拟）</li><li>输入手机号和验证码验证结果</li></ul><p>​        为了描述上述操作，我们制作两个表现层接口，一个用来模拟发送短信的过程，其实就是根据用户提供的手机号生成一个验证码，然后放入缓存，另一个用来模拟验证码校验的过程，其实就是使用传入的手机号和验证码进行匹配，并返回最终匹配结果。下面直接制作本案例的模拟代码，先以上例中springboot提供的内置缓存技术来完成当前案例的制作。</p><p><strong>步骤①</strong>：导入springboot提供的缓存技术对应的starter</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-cache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：启用缓存，在引导类上方标注注解@EnableCaching配置springboot程序中可以使用缓存</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">//开启缓存功能</span></span><br><span class="line"><span class="meta">@EnableCaching</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot19CacheApplication</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        SpringApplication.run(Springboot19CacheApplication.class, args);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤③</strong>：定义验证码对应的实体类，封装手机号与验证码两个属性</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SMSCode</span> {</span><br><span class="line">    <span class="keyword">private</span> String tele;</span><br><span class="line">    <span class="keyword">private</span> String code;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤④</strong>：定义验证码功能的业务层接口与实现类</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SMSCodeService</span> {</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sendCodeToSMS</span><span class="params">(String tele)</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">checkCode</span><span class="params">(SMSCode smsCode)</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SMSCodeServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">SMSCodeService</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CodeUtils codeUtils;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@CachePut(value = "smsCode", key = "#tele")</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sendCodeToSMS</span><span class="params">(String tele)</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">code</span> <span class="operator">=</span> codeUtils.generator(tele);</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">checkCode</span><span class="params">(SMSCode smsCode)</span> {</span><br><span class="line">        <span class="comment">//取出内存中的验证码与传递过来的验证码比对，如果相同，返回true</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">code</span> <span class="operator">=</span> smsCode.getCode();</span><br><span class="line">        <span class="type">String</span> <span class="variable">cacheCode</span> <span class="operator">=</span> codeUtils.get(smsCode.getTele());</span><br><span class="line">        <span class="keyword">return</span> code.equals(cacheCode);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        获取验证码后，当验证码失效时必须重新获取验证码，因此在获取验证码的功能上不能使用@Cacheable注解，@Cacheable注解是缓存中没有值则放入值，缓存中有值则取值。此处的功能仅仅是生成验证码并放入缓存，并不具有从缓存中取值的功能，因此不能使用@Cacheable注解，应该使用仅具有向缓存中保存数据的功能，使用@CachePut注解即可。</p><p>​        对于校验验证码的功能建议放入工具类中进行。</p><p><strong>步骤⑤</strong>：定义验证码的生成策略与根据手机号读取验证码的功能</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CodeUtils</span> {</span><br><span class="line">    <span class="keyword">private</span> String [] patch = {<span class="string">"000000"</span>,<span class="string">"00000"</span>,<span class="string">"0000"</span>,<span class="string">"000"</span>,<span class="string">"00"</span>,<span class="string">"0"</span>,<span class="string">""</span>};</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">generator</span><span class="params">(String tele)</span>{</span><br><span class="line">        <span class="type">int</span> <span class="variable">hash</span> <span class="operator">=</span> tele.hashCode();</span><br><span class="line">        <span class="type">int</span> <span class="variable">encryption</span> <span class="operator">=</span> <span class="number">20206666</span>;</span><br><span class="line">        <span class="type">long</span> <span class="variable">result</span> <span class="operator">=</span> hash ^ encryption;</span><br><span class="line">        <span class="type">long</span> <span class="variable">nowTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        result = result ^ nowTime;</span><br><span class="line">        <span class="type">long</span> <span class="variable">code</span> <span class="operator">=</span> result % <span class="number">1000000</span>;</span><br><span class="line">        code = code &lt; <span class="number">0</span> ? -code : code;</span><br><span class="line">        <span class="type">String</span> <span class="variable">codeStr</span> <span class="operator">=</span> code + <span class="string">""</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> codeStr.length();</span><br><span class="line">        <span class="keyword">return</span> patch[len] + codeStr;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Cacheable(value = "smsCode",key="#tele")</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">get</span><span class="params">(String tele)</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤⑥</strong>：定义验证码功能的web层接口，一个方法用于提供手机号获取验证码，一个方法用于提供手机号和验证码进行校验</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping("/sms")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SMSCodeController</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SMSCodeService smsCodeService;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCode</span><span class="params">(String tele)</span>{</span><br><span class="line">        <span class="type">String</span> <span class="variable">code</span> <span class="operator">=</span> smsCodeService.sendCodeToSMS(tele);</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    }</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@PostMapping</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">checkCode</span><span class="params">(SMSCode smsCode)</span>{</span><br><span class="line">        <span class="keyword">return</span> smsCodeService.checkCode(smsCode);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="SpringBoot整合Ehcache缓存"><a href="#SpringBoot整合Ehcache缓存" class="headerlink" title="SpringBoot整合Ehcache缓存"></a>SpringBoot整合Ehcache缓存</h4><p>​        手机验证码的案例已经完成了，下面就开始springboot整合各种各样的缓存技术，第一个整合Ehcache技术。Ehcache是一种缓存技术，使用springboot整合Ehcache其实就是变更一下缓存技术的实现方式，话不多说，直接开整</p><p><strong>步骤①</strong>：导入Ehcache的坐标</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>net.sf.ehcache<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        此处为什么不是导入Ehcache的starter，而是导入技术坐标呢？其实springboot整合缓存技术做的是通用格式，不管你整合哪种缓存技术，只是实现变化了，操作方式一样。这也体现出springboot技术的优点，统一同类技术的整合方式。</p><p><strong>步骤②</strong>：配置缓存技术实现使用Ehcache</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">ehcache</span></span><br><span class="line">    <span class="attr">ehcache:</span></span><br><span class="line">      <span class="attr">config:</span> <span class="string">ehcache.xml</span></span><br></pre></td></tr></tbody></table></figure><p>​        配置缓存的类型type为ehcache，此处需要说明一下，当前springboot可以整合的缓存技术中包含有ehcach，所以可以这样书写。其实这个type不可以随便写的，不是随便写一个名称就可以整合的。</p><p>​        由于ehcache的配置有独立的配置文件格式，因此还需要指定ehcache的配置文件，以便于读取相应配置</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">ehcache</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:noNamespaceSchemaLocation</span>=<span class="string">"http://ehcache.org/ehcache.xsd"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">updateCheck</span>=<span class="string">"false"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">diskStore</span> <span class="attr">path</span>=<span class="string">"D:\ehcache"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--默认缓存策略 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- external：是否永久存在，设置为true则不会被清除，此时与timeout冲突，通常设置为false--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- diskPersistent：是否启用磁盘持久化--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- maxElementsInMemory：最大缓存数量--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- overflowToDisk：超过最大缓存数量是否持久化到磁盘--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- timeToIdleSeconds：最大不活动间隔，设置过长缓存容易溢出，设置过短无效果，可用于记录时效性数据，例如验证码--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- timeToLiveSeconds：最大存活时间--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- memoryStoreEvictionPolicy：缓存清除策略--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">defaultCache</span></span></span><br><span class="line"><span class="tag">        <span class="attr">eternal</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">diskPersistent</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">maxElementsInMemory</span>=<span class="string">"1000"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">timeToIdleSeconds</span>=<span class="string">"60"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">timeToLiveSeconds</span>=<span class="string">"60"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">memoryStoreEvictionPolicy</span>=<span class="string">"LRU"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">cache</span></span></span><br><span class="line"><span class="tag">        <span class="attr">name</span>=<span class="string">"smsCode"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">eternal</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">diskPersistent</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">maxElementsInMemory</span>=<span class="string">"1000"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">overflowToDisk</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">timeToIdleSeconds</span>=<span class="string">"10"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">timeToLiveSeconds</span>=<span class="string">"10"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">memoryStoreEvictionPolicy</span>=<span class="string">"LRU"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ehcache</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        注意前面的案例中，设置了数据保存的位置是smsCode</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CachePut(value = "smsCode", key = "#tele")</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">sendCodeToSMS</span><span class="params">(String tele)</span> {</span><br><span class="line">    <span class="type">String</span> <span class="variable">code</span> <span class="operator">=</span> codeUtils.generator(tele);</span><br><span class="line">    <span class="keyword">return</span> code;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        这个设定需要保障ehcache中有一个缓存空间名称叫做smsCode的配置，前后要统一。在企业开发过程中，通过设置不同名称的cache来设定不同的缓存策略，应用于不同的缓存数据。</p><p>​        到这里springboot整合Ehcache就做完了，可以发现一点，原始代码没有任何修改，仅仅是加了一组配置就可以变更缓存供应商了，这也是springboot提供了统一的缓存操作接口的优势，变更实现并不影响原始代码的书写。</p><p><strong>总结</strong></p><ol><li>springboot使用Ehcache作为缓存实现需要导入Ehcache的坐标</li><li>修改设置，配置缓存供应商为ehcache，并提供对应的缓存配置文件</li></ol><p>​        </p><h4 id="SpringBoot整合Redis缓存"><a href="#SpringBoot整合Redis缓存" class="headerlink" title="SpringBoot整合Redis缓存"></a>SpringBoot整合Redis缓存</h4><p>​        上节使用Ehcache替换了springboot内置的缓存技术，其实springboot支持的缓存技术还很多，下面使用redis技术作为缓存解决方案来实现手机验证码案例。</p><p>​        比对使用Ehcache的过程，加坐标，改缓存实现类型为ehcache，做Ehcache的配置。如果还成redis做缓存呢？一模一样，加坐标，改缓存实现类型为redis，做redis的配置。差别之处只有一点，redis的配置可以在yml文件中直接进行配置，无需制作独立的配置文件。</p><p><strong>步骤①</strong>：导入redis的坐标</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：配置缓存技术实现使用redis</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">redis</span></span><br></pre></td></tr></tbody></table></figure><p>​        如果需要对redis作为缓存进行配置，注意不是对原始的redis进行配置，而是配置redis作为缓存使用相关的配置，隶属于spring.cache.redis节点下，注意不要写错位置了。</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">  <span class="attr">cache:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">redis</span></span><br><span class="line">    <span class="attr">redis:</span></span><br><span class="line">      <span class="attr">use-key-prefix:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">key-prefix:</span> <span class="string">sms_</span></span><br><span class="line">      <span class="attr">cache-null-values:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">time-to-live:</span> <span class="string">10s</span></span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>springboot使用redis作为缓存实现需要导入redis的坐标</li><li>修改设置，配置缓存供应商为redis，并提供对应的缓存配置</li></ol><h4 id="SpringBoot整合Memcached缓存"><a href="#SpringBoot整合Memcached缓存" class="headerlink" title="SpringBoot整合Memcached缓存"></a>SpringBoot整合Memcached缓存</h4><p>​        目前我们已经掌握了3种缓存解决方案的配置形式，分别是springboot内置缓存，ehcache和redis，本节研究一下国内比较流行的一款缓存memcached。</p><p>​        按照之前的套路，其实变更缓存并不繁琐，但是springboot并没有支持使用memcached作为其缓存解决方案，也就是说在type属性中没有memcached的配置选项，这里就需要更变一下处理方式了。在整合之前先安装memcached。</p><p><strong>安装</strong></p><p>​        windows版安装包下载地址：<a href="https://www.runoob.com/memcached/window-install-memcached.html">https://www.runoob.com/memcached/window-install-memcached.html</a></p><p>​        下载的安装包是解压缩就能使用的zip文件，解压缩完毕后会得到如下文件</p><p><img src="/2023/07/26/springboot100000/image-20220226174957040.png" alt="image-20220226174957040"></p><p>​        可执行文件只有一个memcached.exe，使用该文件可以将memcached作为系统服务启动，执行此文件时会出现报错信息，如下：</p><img src="/2023/07/26/springboot100000/image-20220226175141986.png" alt="image-20220226175141986" style="zoom:80%;"><p>​        此处出现问题的原因是注册系统服务时需要使用管理员权限，当前账号权限不足导致安装服务失败，切换管理员账号权限启动命令行</p><img src="/2023/07/26/springboot100000/image-20220226175302903.png" alt="image-20220226175302903" style="zoom:80%;"><p>​        然后再次执行安装服务的命令即可，如下：</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">memcached.exe -d install</span><br></pre></td></tr></tbody></table></figure><p>​        服务安装完毕后可以使用命令启动和停止服务，如下：</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">memcached.exe -d <span class="built_in">start</span># 启动服务</span><br><span class="line">memcached.exe -d stop# 停止服务</span><br></pre></td></tr></tbody></table></figure><p>​        也可以在任务管理器中进行服务状态的切换</p><img src="/2023/07/26/springboot100000/image-20220226175441675.png" alt="image-20220226175441675" style="zoom:67%;"><p><strong>变更缓存为Memcached</strong></p><p>​        由于memcached未被springboot收录为缓存解决方案，因此使用memcached需要通过手工硬编码的方式来使用，于是前面的套路都不适用了，需要自己写了。</p><p>​        memcached目前提供有三种客户端技术，分别是Memcached Client for Java、SpyMemcached和Xmemcached，其中性能指标各方面最好的客户端是Xmemcached，本次整合就使用这个作为客户端实现技术了。下面开始使用Xmemcached</p><p><strong>步骤①</strong>：导入xmemcached的坐标</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.googlecode.xmemcached<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>xmemcached<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：配置memcached，制作memcached的配置类</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XMemcachedConfig</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MemcachedClient <span class="title function_">getMemcachedClient</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">        <span class="type">MemcachedClientBuilder</span> <span class="variable">memcachedClientBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XMemcachedClientBuilder</span>(<span class="string">"localhost:11211"</span>);</span><br><span class="line">        <span class="type">MemcachedClient</span> <span class="variable">memcachedClient</span> <span class="operator">=</span> memcachedClientBuilder.build();</span><br><span class="line">        <span class="keyword">return</span> memcachedClient;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        memcached默认对外服务端口11211。</p><p><strong>步骤③</strong>：使用xmemcached客户端操作缓存，注入MemcachedClient对象</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SMSCodeServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">SMSCodeService</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CodeUtils codeUtils;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MemcachedClient memcachedClient;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sendCodeToSMS</span><span class="params">(String tele)</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">code</span> <span class="operator">=</span> codeUtils.generator(tele);</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            memcachedClient.set(tele,<span class="number">10</span>,code);</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">checkCode</span><span class="params">(SMSCode smsCode)</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">code</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            code = memcachedClient.get(smsCode.getTele()).toString();</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> smsCode.getCode().equals(code);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        设置值到缓存中使用set操作，取值使用get操作，其实更符合我们开发者的习惯。</p><p>​        上述代码中对于服务器的配置使用硬编码写死到了代码中，将此数据提取出来，做成独立的配置属性。</p><p><strong>定义配置属性</strong></p><p>​        以下过程采用前期学习的属性配置方式进行，当前操作有助于理解原理篇中的很多知识。</p><ul><li><p>定义配置类，加载必要的配置属性，读取配置文件中memcached节点信息</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = "memcached")</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XMemcachedProperties</span> {</span><br><span class="line">    <span class="keyword">private</span> String servers;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> poolSize;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> opTimeout;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li><li><p>定义memcached节点信息</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">memcached:</span></span><br><span class="line">  <span class="attr">servers:</span> <span class="string">localhost:11211</span></span><br><span class="line">  <span class="attr">poolSize:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">opTimeout:</span> <span class="number">3000</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>在memcached配置类中加载信息</p></li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XMemcachedConfig</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> XMemcachedProperties props;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MemcachedClient <span class="title function_">getMemcachedClient</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">        <span class="type">MemcachedClientBuilder</span> <span class="variable">memcachedClientBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XMemcachedClientBuilder</span>(props.getServers());</span><br><span class="line">        memcachedClientBuilder.setConnectionPoolSize(props.getPoolSize());</span><br><span class="line">        memcachedClientBuilder.setOpTimeout(props.getOpTimeout());</span><br><span class="line">        <span class="type">MemcachedClient</span> <span class="variable">memcachedClient</span> <span class="operator">=</span> memcachedClientBuilder.build();</span><br><span class="line">        <span class="keyword">return</span> memcachedClient;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>memcached安装后需要启动对应服务才可以对外提供缓存功能，安装memcached服务需要基于windows系统管理员权限</li><li>由于springboot没有提供对memcached的缓存整合方案，需要采用手工编码的形式创建xmemcached客户端操作缓存</li><li>导入xmemcached坐标后，创建memcached配置类，注册MemcachedClient对应的bean，用于操作缓存</li><li>初始化MemcachedClient对象所需要使用的属性可以通过自定义配置属性类的形式加载</li></ol><p><strong>思考</strong></p><p>​        到这里已经完成了三种缓存的整合，其中redis和mongodb需要安装独立的服务器，连接时需要输入对应的服务器地址，这种是远程缓存，Ehcache是一个典型的内存级缓存，因为它什么也不用安装，启动后导入jar包就有缓存功能了。这个时候就要问了，能不能这两种缓存一起用呢？咱们下节再说。</p><h4 id="SpringBoot整合jetcache缓存"><a href="#SpringBoot整合jetcache缓存" class="headerlink" title="SpringBoot整合jetcache缓存"></a>SpringBoot整合jetcache缓存</h4><p>​        目前我们使用的缓存都是要么A要么B，能不能AB一起用呢？这一节就解决这个问题。springboot针对缓存的整合仅仅停留在用缓存上面，如果缓存自身不支持同时支持AB一起用，springboot也没办法，所以要想解决AB缓存一起用的问题，就必须找一款缓存能够支持AB两种缓存一起用，有这种缓存吗？还真有，阿里出品，jetcache。</p><p>​        jetcache严格意义上来说，并不是一个缓存解决方案，只能说他算是一个缓存框架，然后把别的缓存放到jetcache中管理，这样就可以支持AB缓存一起用了。并且jetcache参考了springboot整合缓存的思想，整体技术使用方式和springboot的缓存解决方案思想非常类似。下面咱们就先把jetcache用起来，然后再说它里面的一些小的功能。</p><p>​        做之前要先明确一下，jetcache并不是随便拿两个缓存都能拼到一起去的。目前jetcache支持的缓存方案本地缓存支持两种，远程缓存支持两种，分别如下：</p><ul><li>本地缓存（Local）<ul><li>LinkedHashMap</li><li>Caffeine</li></ul></li><li>远程缓存（Remote）<ul><li>Redis</li><li>Tair</li></ul></li></ul><p>​        其实也有人问我，为什么jetcache只支持2+2这么4款缓存呢？阿里研发这个技术其实主要是为了满足自身的使用需要。最初肯定只有1+1种，逐步变化成2+2种。下面就以LinkedHashMap+Redis的方案实现本地与远程缓存方案同时使用。</p><h5 id="纯远程方案"><a href="#纯远程方案" class="headerlink" title="纯远程方案"></a>纯远程方案</h5><p><strong>步骤①</strong>：导入springboot整合jetcache对应的坐标starter，当前坐标默认使用的远程方案是redis</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alicp.jetcache<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jetcache-starter-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：远程方案基本配置</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jetcache:</span></span><br><span class="line">  <span class="attr">remote:</span></span><br><span class="line">    <span class="attr">default:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">redis</span></span><br><span class="line">      <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">      <span class="attr">poolConfig:</span></span><br><span class="line">        <span class="attr">maxTotal:</span> <span class="number">50</span></span><br></pre></td></tr></tbody></table></figure><p>​        其中poolConfig是必配项，否则会报错</p><p><strong>步骤③</strong>：启用缓存，在引导类上方标注注解@EnableCreateCacheAnnotation配置springboot程序中可以使用注解的形式创建缓存</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">//jetcache启用缓存的主开关</span></span><br><span class="line"><span class="meta">@EnableCreateCacheAnnotation</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot20JetCacheApplication</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        SpringApplication.run(Springboot20JetCacheApplication.class, args);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤④</strong>：创建缓存对象Cache，并使用注解@CreateCache标记当前缓存的信息，然后使用Cache对象的API操作缓存，put写缓存，get读缓存。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SMSCodeServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">SMSCodeService</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CodeUtils codeUtils;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@CreateCache(name="jetCache_",expire = 10,timeUnit = TimeUnit.SECONDS)</span></span><br><span class="line">    <span class="keyword">private</span> Cache&lt;String ,String&gt; jetCache;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sendCodeToSMS</span><span class="params">(String tele)</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">code</span> <span class="operator">=</span> codeUtils.generator(tele);</span><br><span class="line">        jetCache.put(tele,code);</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">checkCode</span><span class="params">(SMSCode smsCode)</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">code</span> <span class="operator">=</span> jetCache.get(smsCode.getTele());</span><br><span class="line">        <span class="keyword">return</span> smsCode.getCode().equals(code);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        通过上述jetcache使用远程方案连接redis可以看出，jetcache操作缓存时的接口操作更符合开发者习惯，使用缓存就先获取缓存对象Cache，放数据进去就是put，取数据出来就是get，更加简单易懂。并且jetcache操作缓存时，可以为某个缓存对象设置过期时间，将同类型的数据放入缓存中，方便有效周期的管理。</p><p>​        上述方案中使用的是配置中定义的default缓存，其实这个default是个名字，可以随便写，也可以随便加。例如再添加一种缓存解决方案，参照如下配置进行：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jetcache:</span></span><br><span class="line">  <span class="attr">remote:</span></span><br><span class="line">    <span class="attr">default:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">redis</span></span><br><span class="line">      <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">      <span class="attr">poolConfig:</span></span><br><span class="line">        <span class="attr">maxTotal:</span> <span class="number">50</span></span><br><span class="line">    <span class="attr">sms:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">redis</span></span><br><span class="line">      <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">      <span class="attr">poolConfig:</span></span><br><span class="line">        <span class="attr">maxTotal:</span> <span class="number">50</span></span><br></pre></td></tr></tbody></table></figure><p>​        如果想使用名称是sms的缓存，需要再创建缓存时指定参数area，声明使用对应缓存即可</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SMSCodeServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">SMSCodeService</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CodeUtils codeUtils;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@CreateCache(area="sms",name="jetCache_",expire = 10,timeUnit = TimeUnit.SECONDS)</span></span><br><span class="line">    <span class="keyword">private</span> Cache&lt;String ,String&gt; jetCache;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sendCodeToSMS</span><span class="params">(String tele)</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">code</span> <span class="operator">=</span> codeUtils.generator(tele);</span><br><span class="line">        jetCache.put(tele,code);</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">checkCode</span><span class="params">(SMSCode smsCode)</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">code</span> <span class="operator">=</span> jetCache.get(smsCode.getTele());</span><br><span class="line">        <span class="keyword">return</span> smsCode.getCode().equals(code);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h5 id="纯本地方案"><a href="#纯本地方案" class="headerlink" title="纯本地方案"></a>纯本地方案</h5><p>​        远程方案中，配置中使用remote表示远程，换成local就是本地，只不过类型不一样而已。</p><p><strong>步骤①</strong>：导入springboot整合jetcache对应的坐标starter</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alicp.jetcache<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jetcache-starter-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：本地缓存基本配置</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jetcache:</span></span><br><span class="line">  <span class="attr">local:</span></span><br><span class="line">    <span class="attr">default:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">linkedhashmap</span></span><br><span class="line">      <span class="attr">keyConvertor:</span> <span class="string">fastjson</span></span><br></pre></td></tr></tbody></table></figure><p>​        为了加速数据获取时key的匹配速度，jetcache要求指定key的类型转换器。简单说就是，如果你给了一个Object作为key的话，我先用key的类型转换器给转换成字符串，然后再保存。等到获取数据时，仍然是先使用给定的Object转换成字符串，然后根据字符串匹配。由于jetcache是阿里的技术，这里推荐key的类型转换器使用阿里的fastjson。</p><p><strong>步骤③</strong>：启用缓存</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">//jetcache启用缓存的主开关</span></span><br><span class="line"><span class="meta">@EnableCreateCacheAnnotation</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot20JetCacheApplication</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        SpringApplication.run(Springboot20JetCacheApplication.class, args);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤④</strong>：创建缓存对象Cache时，标注当前使用本地缓存</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SMSCodeServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">SMSCodeService</span> {</span><br><span class="line">    <span class="meta">@CreateCache(name="jetCache_",expire = 1000,timeUnit = TimeUnit.SECONDS,cacheType = CacheType.LOCAL)</span></span><br><span class="line">    <span class="keyword">private</span> Cache&lt;String ,String&gt; jetCache;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sendCodeToSMS</span><span class="params">(String tele)</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">code</span> <span class="operator">=</span> codeUtils.generator(tele);</span><br><span class="line">        jetCache.put(tele,code);</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">checkCode</span><span class="params">(SMSCode smsCode)</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">code</span> <span class="operator">=</span> jetCache.get(smsCode.getTele());</span><br><span class="line">        <span class="keyword">return</span> smsCode.getCode().equals(code);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        cacheType控制当前缓存使用本地缓存还是远程缓存，配置cacheType=CacheType.LOCAL即使用本地缓存。</p><h5 id="本地-远程方案"><a href="#本地-远程方案" class="headerlink" title="本地+远程方案"></a>本地+远程方案</h5><p>​        本地和远程方法都有了，两种方案一起使用如何配置呢？其实就是将两种配置合并到一起就可以了。</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jetcache:</span></span><br><span class="line">  <span class="attr">local:</span></span><br><span class="line">    <span class="attr">default:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">linkedhashmap</span></span><br><span class="line">      <span class="attr">keyConvertor:</span> <span class="string">fastjson</span></span><br><span class="line">  <span class="attr">remote:</span></span><br><span class="line">    <span class="attr">default:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">redis</span></span><br><span class="line">      <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">      <span class="attr">poolConfig:</span></span><br><span class="line">        <span class="attr">maxTotal:</span> <span class="number">50</span></span><br><span class="line">    <span class="attr">sms:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">redis</span></span><br><span class="line">      <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">      <span class="attr">poolConfig:</span></span><br><span class="line">        <span class="attr">maxTotal:</span> <span class="number">50</span></span><br></pre></td></tr></tbody></table></figure><p>​        在创建缓存的时候，配置cacheType为BOTH即则本地缓存与远程缓存同时使用。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SMSCodeServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">SMSCodeService</span> {</span><br><span class="line">    <span class="meta">@CreateCache(name="jetCache_",expire = 1000,timeUnit = TimeUnit.SECONDS,cacheType = CacheType.BOTH)</span></span><br><span class="line">    <span class="keyword">private</span> Cache&lt;String ,String&gt; jetCache;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        cacheType如果不进行配置，默认值是REMOTE，即仅使用远程缓存方案。关于jetcache的配置，参考以下信息</p><table><thead><tr><th>属性</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>jetcache.statIntervalMinutes</td><td>0</td><td>统计间隔，0表示不统计</td></tr><tr><td>jetcache.hiddenPackages</td><td>无</td><td>自动生成name时，隐藏指定的包名前缀</td></tr><tr><td>jetcache.[local|remote].${area}.type</td><td>无</td><td>缓存类型，本地支持linkedhashmap、caffeine，远程支持redis、tair</td></tr><tr><td>jetcache.[local|remote].${area}.keyConvertor</td><td>无</td><td>key转换器，当前仅支持fastjson</td></tr><tr><td>jetcache.[local|remote].${area}.valueEncoder</td><td>java</td><td>仅remote类型的缓存需要指定，可选java和kryo</td></tr><tr><td>jetcache.[local|remote].${area}.valueDecoder</td><td>java</td><td>仅remote类型的缓存需要指定，可选java和kryo</td></tr><tr><td>jetcache.[local|remote].${area}.limit</td><td>100</td><td>仅local类型的缓存需要指定，缓存实例最大元素数</td></tr><tr><td>jetcache.[local|remote].${area}.expireAfterWriteInMillis</td><td>无穷大</td><td>默认过期时间，毫秒单位</td></tr><tr><td>jetcache.local.${area}.expireAfterAccessInMillis</td><td>0</td><td>仅local类型的缓存有效，毫秒单位，最大不活动间隔</td></tr></tbody></table><p>​        以上方案仅支持手工控制缓存，但是springcache方案中的方法缓存特别好用，给一个方法添加一个注解，方法就会自动使用缓存。jetcache也提供了对应的功能，即方法缓存。</p><p><strong>方法缓存</strong></p><p>​        jetcache提供了方法缓存方案，只不过名称变更了而已。在对应的操作接口上方使用注解@Cached即可</p><p><strong>步骤①</strong>：导入springboot整合jetcache对应的坐标starter</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alicp.jetcache<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jetcache-starter-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：配置缓存</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jetcache:</span></span><br><span class="line">  <span class="attr">local:</span></span><br><span class="line">    <span class="attr">default:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">linkedhashmap</span></span><br><span class="line">      <span class="attr">keyConvertor:</span> <span class="string">fastjson</span></span><br><span class="line">  <span class="attr">remote:</span></span><br><span class="line">    <span class="attr">default:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">redis</span></span><br><span class="line">      <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">      <span class="attr">keyConvertor:</span> <span class="string">fastjson</span></span><br><span class="line">      <span class="attr">valueEncode:</span> <span class="string">java</span></span><br><span class="line">      <span class="attr">valueDecode:</span> <span class="string">java</span></span><br><span class="line">      <span class="attr">poolConfig:</span></span><br><span class="line">        <span class="attr">maxTotal:</span> <span class="number">50</span></span><br><span class="line">    <span class="attr">sms:</span></span><br><span class="line">      <span class="attr">type:</span> <span class="string">redis</span></span><br><span class="line">      <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">      <span class="attr">poolConfig:</span></span><br><span class="line">        <span class="attr">maxTotal:</span> <span class="number">50</span></span><br></pre></td></tr></tbody></table></figure><p>​        由于redis缓存中不支持保存对象，因此需要对redis设置当Object类型数据进入到redis中时如何进行类型转换。需要配置keyConvertor表示key的类型转换方式，同时标注value的转换类型方式，值进入redis时是java类型，标注valueEncode为java，值从redis中读取时转换成java，标注valueDecode为java。</p><p>​        注意，为了实现Object类型的值进出redis，需要保障进出redis的Object类型的数据必须实现序列化接口。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Book</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> {</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String type;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤③</strong>：启用缓存时开启方法缓存功能，并配置basePackages，说明在哪些包中开启方法缓存</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">//jetcache启用缓存的主开关</span></span><br><span class="line"><span class="meta">@EnableCreateCacheAnnotation</span></span><br><span class="line"><span class="comment">//开启方法注解缓存</span></span><br><span class="line"><span class="meta">@EnableMethodCache(basePackages = "com.itheima")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot20JetCacheApplication</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        SpringApplication.run(Springboot20JetCacheApplication.class, args);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤④</strong>：使用注解@Cached标注当前方法使用缓存</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">BookService</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@Cached(name="book_",key="#id",expire = 3600,cacheType = CacheType.REMOTE)</span></span><br><span class="line">    <span class="keyword">public</span> Book <span class="title function_">getById</span><span class="params">(Integer id)</span> {</span><br><span class="line">        <span class="keyword">return</span> bookDao.selectById(id);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h5 id="远程方案的数据同步"><a href="#远程方案的数据同步" class="headerlink" title="远程方案的数据同步"></a>远程方案的数据同步</h5><p>​        由于远程方案中redis保存的数据可以被多个客户端共享，这就存在了数据同步问题。jetcache提供了3个注解解决此问题，分别在更新、删除操作时同步缓存数据，和读取缓存时定时刷新数据</p><p><strong>更新缓存</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CacheUpdate(name="book_",key="#book.id",value="#book")</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">update</span><span class="params">(Book book)</span> {</span><br><span class="line">    <span class="keyword">return</span> bookDao.updateById(book) &gt; <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>删除缓存</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CacheInvalidate(name="book_",key = "#id")</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">delete</span><span class="params">(Integer id)</span> {</span><br><span class="line">    <span class="keyword">return</span> bookDao.deleteById(id) &gt; <span class="number">0</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>定时刷新缓存</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Cached(name="book_",key="#id",expire = 3600,cacheType = CacheType.REMOTE)</span></span><br><span class="line"><span class="meta">@CacheRefresh(refresh = 5)</span></span><br><span class="line"><span class="keyword">public</span> Book <span class="title function_">getById</span><span class="params">(Integer id)</span> {</span><br><span class="line">    <span class="keyword">return</span> bookDao.selectById(id);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h5 id="数据报表"><a href="#数据报表" class="headerlink" title="数据报表"></a>数据报表</h5><p>​        jetcache还提供有简单的数据报表功能，帮助开发者快速查看缓存命中信息，只需要添加一个配置即可</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">jetcache:</span></span><br><span class="line">  <span class="attr">statIntervalMinutes:</span> <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure><p>​        设置后，每1分钟在控制台输出缓存数据命中信息</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[DefaultExecutor] c.alicp.jetcache.support.StatInfoLogger  : jetcache stat from <span class="number">2022</span>-<span class="number">02</span>-<span class="number">28</span> <span class="number">09</span>:<span class="number">32</span>:<span class="number">15</span>,<span class="number">892</span> to <span class="number">2022</span>-<span class="number">02</span>-<span class="number">28</span> <span class="number">09</span>:<span class="number">33</span>:<span class="number">00</span>,<span class="number">003</span></span><br><span class="line">cache    |    qps|   rate|   get|    hit|   fail|   expire|   avgLoadTime|   maxLoadTime</span><br><span class="line">---------+-------+-------+------+-------+-------+---------+--------------+--------------</span><br><span class="line">book_    |   <span class="number">0</span>.<span class="number">66</span>| <span class="number">75</span>.<span class="number">86</span>%|    <span class="number">29</span>|     <span class="number">22</span>|      <span class="number">0</span>|        <span class="number">0</span>|          <span class="number">28</span>.<span class="number">0</span>|           <span class="number">188</span></span><br><span class="line">---------+-------+-------+------+-------+-------+---------+--------------+--------------</span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>jetcache是一个类似于springcache的缓存解决方案，自身不具有缓存功能，它提供有本地缓存与远程缓存多级共同使用的缓存解决方案</li><li>jetcache提供的缓存解决方案受限于目前支持的方案，本地缓存支持两种，远程缓存支持两种</li><li>注意数据进入远程缓存时的类型转换问题</li><li>jetcache提供方法缓存，并提供了对应的缓存更新与刷新功能</li><li>jetcache提供有简单的缓存信息命中报表方便开发者即时监控缓存数据命中情况</li></ol><p><strong>思考</strong></p><p>​        jetcache解决了前期使用缓存方案单一的问题，但是仍然不能灵活的选择缓存进行搭配使用，是否存在一种技术可以灵活的搭配各种各样的缓存使用呢？有，咱们下一节再讲。</p><h4 id="SpringBoot整合j2cache缓存"><a href="#SpringBoot整合j2cache缓存" class="headerlink" title="SpringBoot整合j2cache缓存"></a>SpringBoot整合j2cache缓存</h4><p>​        jetcache可以在限定范围内构建多级缓存，但是灵活性不足，不能随意搭配缓存，本节介绍一种可以随意搭配缓存解决方案的缓存整合框架，j2cache。下面就来讲解如何使用这种缓存框架，以Ehcache与redis整合为例：</p><p><strong>步骤①</strong>：导入j2cache、redis、ehcache坐标</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>net.oschina.j2cache<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>j2cache-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.4-release<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>net.oschina.j2cache<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>j2cache-spring-boot2-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.8.0-release<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>net.sf.ehcache<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ehcache<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        j2cache的starter中默认包含了redis坐标，官方推荐使用redis作为二级缓存，因此此处无需导入redis坐标</p><p><strong>步骤②</strong>：配置一级与二级缓存，并配置一二级缓存间数据传递方式，配置书写在名称为j2cache.properties的文件中。如果使用ehcache还需要单独添加ehcache的配置文件</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 1级缓存</span></span><br><span class="line"><span class="string">j2cache.L1.provider_class</span> <span class="string">=</span> <span class="string">ehcache</span></span><br><span class="line"><span class="string">ehcache.configXml</span> <span class="string">=</span> <span class="string">ehcache.xml</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 2级缓存</span></span><br><span class="line"><span class="string">j2cache.L2.provider_class</span> <span class="string">=</span> <span class="string">net.oschina.j2cache.cache.support.redis.SpringRedisProvider</span></span><br><span class="line"><span class="string">j2cache.L2.config_section</span> <span class="string">=</span> <span class="string">redis</span></span><br><span class="line"><span class="string">redis.hosts</span> <span class="string">=</span> <span class="string">localhost:6379</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1级缓存中的数据如何到达二级缓存</span></span><br><span class="line"><span class="string">j2cache.broadcast</span> <span class="string">=</span> <span class="string">net.oschina.j2cache.cache.support.redis.SpringRedisPubSubPolicy</span></span><br></pre></td></tr></tbody></table></figure><p>​        此处配置不能乱配置，需要参照官方给出的配置说明进行。例如1级供应商选择ehcache，供应商名称仅仅是一个ehcache，但是2级供应商选择redis时要写专用的Spring整合Redis的供应商类名SpringRedisProvider，而且这个名称并不是所有的redis包中能提供的，也不是spring包中提供的。因此配置j2cache必须参照官方文档配置，而且还要去找专用的整合包，导入对应坐标才可以使用。</p><p>​        一级与二级缓存最重要的一个配置就是两者之间的数据沟通方式，此类配置也不是随意配置的，并且不同的缓存解决方案提供的数据沟通方式差异化很大，需要查询官方文档进行设置。</p><p><strong>步骤③</strong>：使用缓存</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SMSCodeServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">SMSCodeService</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CodeUtils codeUtils;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CacheChannel cacheChannel;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">sendCodeToSMS</span><span class="params">(String tele)</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">code</span> <span class="operator">=</span> codeUtils.generator(tele);</span><br><span class="line">        cacheChannel.set(<span class="string">"sms"</span>,tele,code);</span><br><span class="line">        <span class="keyword">return</span> code;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">checkCode</span><span class="params">(SMSCode smsCode)</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">code</span> <span class="operator">=</span> cacheChannel.get(<span class="string">"sms"</span>,smsCode.getTele()).asString();</span><br><span class="line">        <span class="keyword">return</span> smsCode.getCode().equals(code);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        j2cache的使用和jetcache比较类似，但是无需开启使用的开关，直接定义缓存对象即可使用，缓存对象名CacheChannel。</p><p>​        j2cache的使用不复杂，配置是j2cache的核心，毕竟是一个整合型的缓存框架。缓存相关的配置过多，可以查阅j2cache-core核心包中的j2cache.properties文件中的说明。如下：</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#J2Cache configuration</span></span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line"><span class="comment"># Cache Broadcast Method</span></span><br><span class="line"><span class="comment"># values:</span></span><br><span class="line"><span class="comment"># jgroups -&gt; use jgroups's multicast</span></span><br><span class="line"><span class="comment"># redis -&gt; use redis publish/subscribe mechanism (using jedis)</span></span><br><span class="line"><span class="comment"># lettuce -&gt; use redis publish/subscribe mechanism (using lettuce, Recommend)</span></span><br><span class="line"><span class="comment"># rabbitmq -&gt; use RabbitMQ publisher/consumer mechanism</span></span><br><span class="line"><span class="comment"># rocketmq -&gt; use RocketMQ publisher/consumer mechanism</span></span><br><span class="line"><span class="comment"># none -&gt; don't notify the other nodes in cluster</span></span><br><span class="line"><span class="comment"># xx.xxxx.xxxx.Xxxxx your own cache broadcast policy classname that implement net.oschina.j2cache.cluster.ClusterPolicy</span></span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line"><span class="attr">j2cache.broadcast</span> = <span class="string">redis</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># jgroups properties</span></span><br><span class="line"><span class="attr">jgroups.channel.name</span> = <span class="string">j2cache</span></span><br><span class="line"><span class="attr">jgroups.configXml</span> = <span class="string">/network.xml</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># RabbitMQ properties</span></span><br><span class="line"><span class="attr">rabbitmq.exchange</span> = <span class="string">j2cache</span></span><br><span class="line"><span class="attr">rabbitmq.host</span> = <span class="string">localhost</span></span><br><span class="line"><span class="attr">rabbitmq.port</span> = <span class="string">5672</span></span><br><span class="line"><span class="attr">rabbitmq.username</span> = <span class="string">guest</span></span><br><span class="line"><span class="attr">rabbitmq.password</span> = <span class="string">guest</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># RocketMQ properties</span></span><br><span class="line"><span class="attr">rocketmq.name</span> = <span class="string">j2cache</span></span><br><span class="line"><span class="attr">rocketmq.topic</span> = <span class="string">j2cache</span></span><br><span class="line"><span class="comment"># use ; to split multi hosts</span></span><br><span class="line"><span class="attr">rocketmq.hosts</span> = <span class="string">127.0.0.1:9876</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line"><span class="comment"># Level 1&amp;2 provider</span></span><br><span class="line"><span class="comment"># values:</span></span><br><span class="line"><span class="comment"># none -&gt; disable this level cache</span></span><br><span class="line"><span class="comment"># ehcache -&gt; use ehcache2 as level 1 cache</span></span><br><span class="line"><span class="comment"># ehcache3 -&gt; use ehcache3 as level 1 cache</span></span><br><span class="line"><span class="comment"># caffeine -&gt; use caffeine as level 1 cache(only in memory)</span></span><br><span class="line"><span class="comment"># redis -&gt; use redis as level 2 cache (using jedis)</span></span><br><span class="line"><span class="comment"># lettuce -&gt; use redis as level 2 cache (using lettuce)</span></span><br><span class="line"><span class="comment"># readonly-redis -&gt; use redis as level 2 cache ,but never write data to it. if use this provider, you must uncomment `j2cache.L2.config_section` to make the redis configurations available.</span></span><br><span class="line"><span class="comment"># memcached -&gt; use memcached as level 2 cache (xmemcached),</span></span><br><span class="line"><span class="comment"># [classname] -&gt; use custom provider</span></span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line"></span><br><span class="line"><span class="attr">j2cache.L1.provider_class</span> = <span class="string">caffeine</span></span><br><span class="line"><span class="attr">j2cache.L2.provider_class</span> = <span class="string">redis</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># When L2 provider isn't `redis`, using `L2.config_section = redis` to read redis configurations</span></span><br><span class="line"><span class="comment"># j2cache.L2.config_section = redis</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># Enable/Disable ttl in redis cache data (if disabled, the object in redis will never expire, default:true)</span></span><br><span class="line"><span class="comment"># NOTICE: redis hash mode (redis.storage = hash) do not support this feature)</span></span><br><span class="line"><span class="attr">j2cache.sync_ttl_to_redis</span> = <span class="string">true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># Whether to cache null objects by default (default false)</span></span><br><span class="line"><span class="attr">j2cache.default_cache_null_object</span> = <span class="string">true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line"><span class="comment"># Cache Serialization Provider</span></span><br><span class="line"><span class="comment"># values:</span></span><br><span class="line"><span class="comment"># fst -&gt; using fast-serialization (recommend)</span></span><br><span class="line"><span class="comment"># kryo -&gt; using kryo serialization</span></span><br><span class="line"><span class="comment"># json -&gt; using fst's json serialization (testing)</span></span><br><span class="line"><span class="comment"># fastjson -&gt; using fastjson serialization (embed non-static class not support)</span></span><br><span class="line"><span class="comment"># java -&gt; java standard</span></span><br><span class="line"><span class="comment"># fse -&gt; using fse serialization</span></span><br><span class="line"><span class="comment"># [classname implements Serializer]</span></span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line"></span><br><span class="line"><span class="attr">j2cache.serialization</span> = <span class="string">json</span></span><br><span class="line"><span class="comment">#json.map.person = net.oschina.j2cache.demo.Person</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line"><span class="comment"># Ehcache configuration</span></span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># ehcache.configXml = /ehcache.xml</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"># ehcache3.configXml = /ehcache3.xml</span></span><br><span class="line"><span class="comment"># ehcache3.defaultHeapSize = 1000</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line"><span class="comment"># Caffeine configuration</span></span><br><span class="line"><span class="comment"># caffeine.region.[name] = size, xxxx[s|m|h|d]</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line"><span class="attr">caffeine.properties</span> = <span class="string">/caffeine.properties</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line"><span class="comment"># Redis connection configuration</span></span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line"><span class="comment"># Redis Cluster Mode</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># single -&gt; single redis server</span></span><br><span class="line"><span class="comment"># sentinel -&gt; master-slaves servers</span></span><br><span class="line"><span class="comment"># cluster -&gt; cluster servers (数据库配置无效，使用 database = 0）</span></span><br><span class="line"><span class="comment"># sharded -&gt; sharded servers  (密码、数据库必须在 hosts 中指定，且连接池配置无效 ; redis://user:password@127.0.0.1:6379/0）</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line"></span><br><span class="line"><span class="attr">redis.mode</span> = <span class="string">single</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#redis storage mode (generic|hash)</span></span><br><span class="line"><span class="attr">redis.storage</span> = <span class="string">generic</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">## redis pub/sub channel name</span></span><br><span class="line"><span class="attr">redis.channel</span> = <span class="string">j2cache</span></span><br><span class="line"><span class="comment">## redis pub/sub server (using redis.hosts when empty)</span></span><br><span class="line"><span class="attr">redis.channel.host</span> =<span class="string"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#cluster name just for sharded</span></span><br><span class="line"><span class="attr">redis.cluster_name</span> = <span class="string">j2cache</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">## redis cache namespace optional, default[empty]</span></span><br><span class="line"><span class="attr">redis.namespace</span> =<span class="string"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">## redis command scan parameter count, default[1000]</span></span><br><span class="line"><span class="comment">#redis.scanCount = 1000</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">## connection</span></span><br><span class="line"><span class="comment"># Separate multiple redis nodes with commas, such as 192.168.0.10:6379,192.168.0.11:6379,192.168.0.12:6379</span></span><br><span class="line"></span><br><span class="line"><span class="attr">redis.hosts</span> = <span class="string">127.0.0.1:6379</span></span><br><span class="line"><span class="attr">redis.timeout</span> = <span class="string">2000</span></span><br><span class="line"><span class="attr">redis.password</span> =<span class="string"></span></span><br><span class="line"><span class="attr">redis.database</span> = <span class="string">0</span></span><br><span class="line"><span class="attr">redis.ssl</span> = <span class="string">false</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">## redis pool properties</span></span><br><span class="line"><span class="attr">redis.maxTotal</span> = <span class="string">100</span></span><br><span class="line"><span class="attr">redis.maxIdle</span> = <span class="string">10</span></span><br><span class="line"><span class="attr">redis.maxWaitMillis</span> = <span class="string">5000</span></span><br><span class="line"><span class="attr">redis.minEvictableIdleTimeMillis</span> = <span class="string">60000</span></span><br><span class="line"><span class="attr">redis.minIdle</span> = <span class="string">1</span></span><br><span class="line"><span class="attr">redis.numTestsPerEvictionRun</span> = <span class="string">10</span></span><br><span class="line"><span class="attr">redis.lifo</span> = <span class="string">false</span></span><br><span class="line"><span class="attr">redis.softMinEvictableIdleTimeMillis</span> = <span class="string">10</span></span><br><span class="line"><span class="attr">redis.testOnBorrow</span> = <span class="string">true</span></span><br><span class="line"><span class="attr">redis.testOnReturn</span> = <span class="string">false</span></span><br><span class="line"><span class="attr">redis.testWhileIdle</span> = <span class="string">true</span></span><br><span class="line"><span class="attr">redis.timeBetweenEvictionRunsMillis</span> = <span class="string">300000</span></span><br><span class="line"><span class="attr">redis.blockWhenExhausted</span> = <span class="string">false</span></span><br><span class="line"><span class="attr">redis.jmxEnabled</span> = <span class="string">false</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line"><span class="comment"># Lettuce scheme</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># redis -&gt; single redis server</span></span><br><span class="line"><span class="comment"># rediss -&gt; single redis server with ssl</span></span><br><span class="line"><span class="comment"># redis-sentinel -&gt; redis sentinel</span></span><br><span class="line"><span class="comment"># redis-cluster -&gt; cluster servers</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line"><span class="comment"># Lettuce Mode</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># single -&gt; single redis server</span></span><br><span class="line"><span class="comment"># sentinel -&gt; master-slaves servers</span></span><br><span class="line"><span class="comment"># cluster -&gt; cluster servers (数据库配置无效，使用 database = 0）</span></span><br><span class="line"><span class="comment"># sharded -&gt; sharded servers  (密码、数据库必须在 hosts 中指定，且连接池配置无效 ; redis://user:password@127.0.0.1:6379/0）</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">## redis command scan parameter count, default[1000]</span></span><br><span class="line"><span class="comment">#lettuce.scanCount = 1000</span></span><br><span class="line"><span class="attr">lettuce.mode</span> = <span class="string">single</span></span><br><span class="line"><span class="attr">lettuce.namespace</span> =<span class="string"></span></span><br><span class="line"><span class="attr">lettuce.storage</span> = <span class="string">hash</span></span><br><span class="line"><span class="attr">lettuce.channel</span> = <span class="string">j2cache</span></span><br><span class="line"><span class="attr">lettuce.scheme</span> = <span class="string">redis</span></span><br><span class="line"><span class="attr">lettuce.hosts</span> = <span class="string">127.0.0.1:6379</span></span><br><span class="line"><span class="attr">lettuce.password</span> =<span class="string"></span></span><br><span class="line"><span class="attr">lettuce.database</span> = <span class="string">0</span></span><br><span class="line"><span class="attr">lettuce.sentinelMasterId</span> =<span class="string"></span></span><br><span class="line"><span class="attr">lettuce.maxTotal</span> = <span class="string">100</span></span><br><span class="line"><span class="attr">lettuce.maxIdle</span> = <span class="string">10</span></span><br><span class="line"><span class="attr">lettuce.minIdle</span> = <span class="string">10</span></span><br><span class="line"><span class="comment"># timeout in milliseconds</span></span><br><span class="line"><span class="attr">lettuce.timeout</span> = <span class="string">10000</span></span><br><span class="line"><span class="comment"># redis cluster topology refresh interval in milliseconds</span></span><br><span class="line"><span class="attr">lettuce.clusterTopologyRefresh</span> = <span class="string">3000</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line"><span class="comment"># memcached server configurations</span></span><br><span class="line"><span class="comment"># refer to https://gitee.com/mirrors/XMemcached</span></span><br><span class="line"><span class="comment">#########################################</span></span><br><span class="line"></span><br><span class="line"><span class="attr">memcached.servers</span> = <span class="string">127.0.0.1:11211</span></span><br><span class="line"><span class="attr">memcached.username</span> =<span class="string"></span></span><br><span class="line"><span class="attr">memcached.password</span> =<span class="string"></span></span><br><span class="line"><span class="attr">memcached.connectionPoolSize</span> = <span class="string">10</span></span><br><span class="line"><span class="attr">memcached.connectTimeout</span> = <span class="string">1000</span></span><br><span class="line"><span class="attr">memcached.failureMode</span> = <span class="string">false</span></span><br><span class="line"><span class="attr">memcached.healSessionInterval</span> = <span class="string">1000</span></span><br><span class="line"><span class="attr">memcached.maxQueuedNoReplyOperations</span> = <span class="string">100</span></span><br><span class="line"><span class="attr">memcached.opTimeout</span> = <span class="string">100</span></span><br><span class="line"><span class="attr">memcached.sanitizeKeys</span> = <span class="string">false</span></span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>j2cache是一个缓存框架，自身不具有缓存功能，它提供多种缓存整合在一起使用的方案</li><li>j2cache需要通过复杂的配置设置各级缓存，以及缓存之间数据交换的方式</li><li>j2cache操作接口通过CacheChannel实现</li></ol><h3 id="KF-5-2-任务"><a href="#KF-5-2-任务" class="headerlink" title="KF-5-2.任务"></a>KF-5-2.任务</h3><p>​        springboot整合第三方技术第二部分我们来说说任务系统，其实这里说的任务系统指的是定时任务。定时任务是企业级开发中必不可少的组成部分，诸如长周期业务数据的计算，例如年度报表，诸如系统脏数据的处理，再比如系统性能监控报告，还有抢购类活动的商品上架，这些都离不开定时任务。本节将介绍两种不同的定时任务技术。</p><h4 id="Quartz"><a href="#Quartz" class="headerlink" title="Quartz"></a>Quartz</h4><p>​        Quartz技术是一个比较成熟的定时任务框架，怎么说呢？有点繁琐，用过的都知道，配置略微复杂。springboot对其进行整合后，简化了一系列的配置，将很多配置采用默认设置，这样开发阶段就简化了很多。再学习springboot整合Quartz前先普及几个Quartz的概念。</p><ul><li>工作（Job）：用于定义具体执行的工作</li><li>工作明细（JobDetail）：用于描述定时工作相关的信息</li><li>触发器（Trigger）：描述了工作明细与调度器的对应关系</li><li>调度器（Scheduler）：用于描述触发工作的执行规则，通常使用cron表达式定义规则</li></ul><p>​        简单说就是你定时干什么事情，这就是工作，工作不可能就是一个简单的方法，还要设置一些明细信息。工作啥时候执行，设置一个调度器，可以简单理解成设置一个工作执行的时间。工作和调度都是独立定义的，它们两个怎么配合到一起呢？用触发器。完了，就这么多。下面开始springboot整合Quartz。</p><p><strong>步骤①</strong>：导入springboot整合Quartz的starter</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-quartz<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：定义任务Bean，按照Quartz的开发规范制作，继承QuartzJobBean</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyQuartz</span> <span class="keyword">extends</span> <span class="title class_">QuartzJobBean</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">executeInternal</span><span class="params">(JobExecutionContext context)</span> <span class="keyword">throws</span> JobExecutionException {</span><br><span class="line">        System.out.println(<span class="string">"quartz task run..."</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤③</strong>：创建Quartz配置类，定义工作明细（JobDetail）与触发器的（Trigger）bean</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QuartzConfig</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> JobDetail <span class="title function_">printJobDetail</span><span class="params">()</span>{</span><br><span class="line">        <span class="comment">//绑定具体的工作</span></span><br><span class="line">        <span class="keyword">return</span> JobBuilder.newJob(MyQuartz.class).storeDurably().build();</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Trigger <span class="title function_">printJobTrigger</span><span class="params">()</span>{</span><br><span class="line">        <span class="type">ScheduleBuilder</span> <span class="variable">schedBuilder</span> <span class="operator">=</span> CronScheduleBuilder.cronSchedule(<span class="string">"0/5 * * * * ?"</span>);</span><br><span class="line">        <span class="comment">//绑定对应的工作明细</span></span><br><span class="line">        <span class="keyword">return</span> TriggerBuilder.newTrigger().forJob(printJobDetail()).withSchedule(schedBuilder).build();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        工作明细中要设置对应的具体工作，使用newJob()操作传入对应的工作任务类型即可。</p><p>​        触发器需要绑定任务，使用forJob()操作传入绑定的工作明细对象。此处可以为工作明细设置名称然后使用名称绑定，也可以直接调用对应方法绑定。触发器中最核心的规则是执行时间，此处使用调度器定义执行时间，执行时间描述方式使用的是cron表达式。有关cron表达式的规则，各位小伙伴可以去参看相关课程学习，略微复杂，而且格式不能乱设置，不是写个格式就能用的，写不好就会出现冲突问题。</p><p><strong>总结</strong></p><ol><li>springboot整合Quartz就是将Quartz对应的核心对象交给spring容器管理，包含两个对象，JobDetail和Trigger对象</li><li>JobDetail对象描述的是工作的执行信息，需要绑定一个QuartzJobBean类型的对象</li><li>Trigger对象定义了一个触发器，需要为其指定绑定的JobDetail是哪个，同时要设置执行周期调度器</li></ol><p><strong>思考</strong></p><p>​        上面的操作看上去不多，但是Quartz将其中的对象划分粒度过细，导致开发的时候有点繁琐，spring针对上述规则进行了简化，开发了自己的任务管理组件——Task，如何用呢？咱们下节再说。</p><h4 id="Task"><a href="#Task" class="headerlink" title="Task"></a>Task</h4><p>​        spring根据定时任务的特征，将定时任务的开发简化到了极致。怎么说呢？要做定时任务总要告诉容器有这功能吧，然后定时执行什么任务直接告诉对应的bean什么时间执行就行了，就这么简单，一起来看怎么做</p><p><strong>步骤①</strong>：开启定时任务功能，在引导类上开启定时任务功能的开关，使用注解@EnableScheduling</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="comment">//开启定时任务功能</span></span><br><span class="line"><span class="meta">@EnableScheduling</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot22TaskApplication</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        SpringApplication.run(Springboot22TaskApplication.class, args);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：定义Bean，在对应要定时执行的操作上方，使用注解@Scheduled定义执行的时间，执行时间的描述方式还是cron表达式</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBean</span> {</span><br><span class="line">    <span class="meta">@Scheduled(cron = "0/1 * * * * ?")</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span>{</span><br><span class="line">        System.out.println(Thread.currentThread().getName()+<span class="string">" :spring task run..."</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        完事，这就完成了定时任务的配置。总体感觉其实什么东西都没少，只不过没有将所有的信息都抽取成bean，而是直接使用注解绑定定时执行任务的事情而已。</p><p>​        如何想对定时任务进行相关配置，可以通过配置文件进行</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">task:</span></span><br><span class="line">   <span class="attr">scheduling:</span></span><br><span class="line">      <span class="attr">pool:</span></span><br><span class="line">       <span class="attr">size:</span> <span class="number">1</span><span class="comment"># 任务调度线程池大小 默认 1</span></span><br><span class="line">      <span class="attr">thread-name-prefix:</span> <span class="string">ssm_</span>      <span class="comment"># 调度线程名称前缀 默认 scheduling-      </span></span><br><span class="line">        <span class="attr">shutdown:</span></span><br><span class="line">          <span class="attr">await-termination:</span> <span class="literal">false</span><span class="comment"># 线程池关闭时等待所有任务完成</span></span><br><span class="line">          <span class="attr">await-termination-period:</span> <span class="string">10s</span><span class="comment"># 调度线程关闭前最大等待时间，确保最后一定关闭</span></span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li><p>spring task需要使用注解@EnableScheduling开启定时任务功能</p></li><li><p>为定时执行的的任务设置执行周期，描述方式cron表达式</p></li></ol><h3 id="KF-5-3-邮件"><a href="#KF-5-3-邮件" class="headerlink" title="KF-5-3.邮件"></a>KF-5-3.邮件</h3><p>​        springboot整合第三方技术第三部分我们来说说邮件系统，发邮件是java程序的基本操作，springboot整合javamail其实就是简化开发。不熟悉邮件的小伙伴可以先学习完javamail的基础操作，再来看这一部分内容才能感触到springboot整合javamail究竟简化了哪些操作。简化的多码？其实不多，差别不大，只是还个格式而已。</p><p>​        学习邮件发送之前先了解3个概念，这些概念规范了邮件操作过程中的标准。</p><ul><li>SMTP（Simple Mail Transfer Protocol）：简单邮件传输协议，用于<strong>发送</strong>电子邮件的传输协议</li><li>POP3（Post Office Protocol - Version 3）：用于<strong>接收</strong>电子邮件的标准协议</li><li>IMAP（Internet Mail Access Protocol）：互联网消息协议，是POP3的替代协议</li></ul><p>​        简单说就是SMPT是发邮件的标准，POP3是收邮件的标准，IMAP是对POP3的升级。我们制作程序中操作邮件，通常是发邮件，所以SMTP是使用的重点，收邮件大部分都是通过邮件客户端完成，所以开发收邮件的代码极少。除非你要读取邮件内容，然后解析，做邮件功能的统一处理。例如HR的邮箱收到求职者的简历，可以读取后统一处理。但是为什么不制作独立的投递简历的系统呢？所以说，好奇怪的需求，因为要想收邮件就要规范发邮件的人的书写格式，这个未免有点强人所难，并且极易收到外部攻击，你不可能使用白名单来收邮件。如果能使用白名单来收邮件然后解析邮件，还不如开发个系统给白名单中的人专用呢，更安全，总之就是鸡肋了。下面就开始学习springboot如何整合javamail发送邮件。</p><h4 id="发送简单邮件"><a href="#发送简单邮件" class="headerlink" title="发送简单邮件"></a>发送简单邮件</h4><p><strong>步骤①</strong>：导入springboot整合javamail的starter</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-mail<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：配置邮箱的登录信息</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">mail:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">smtp.126.com</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">test@126.com</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">test</span></span><br></pre></td></tr></tbody></table></figure><p>​        java程序仅用于发送邮件，邮件的功能还是邮件供应商提供的，所以这里是用别人的邮件服务，要配置对应信息。</p><p>​        host配置的是提供邮件服务的主机协议，当前程序仅用于发送邮件，因此配置的是smtp的协议。</p><p>​        password并不是邮箱账号的登录密码，是邮件供应商提供的一个加密后的密码，也是为了保障系统安全性。不然外部人员通过地址访问下载了配置文件，直接获取到了邮件密码就会有极大的安全隐患。有关该密码的获取每个邮件供应商提供的方式都不一样，此处略过。可以到邮件供应商的设置页面找POP3或IMAP这些关键词找到对应的获取位置。下例仅供参考：</p><p><img src="/2023/07/26/springboot100000/image-20220228111251036.png" alt="image-20220228111251036"></p><p><strong>步骤③</strong>：使用JavaMailSender接口发送邮件</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SendMailServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">SendMailService</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JavaMailSender javaMailSender;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//发送人</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">from</span> <span class="operator">=</span> <span class="string">"test@qq.com"</span>;</span><br><span class="line">    <span class="comment">//接收人</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">to</span> <span class="operator">=</span> <span class="string">"test@126.com"</span>;</span><br><span class="line">    <span class="comment">//标题</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">subject</span> <span class="operator">=</span> <span class="string">"测试邮件"</span>;</span><br><span class="line">    <span class="comment">//正文</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">context</span> <span class="operator">=</span> <span class="string">"测试邮件正文内容"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMail</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">SimpleMailMessage</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleMailMessage</span>();</span><br><span class="line">        message.setFrom(from+<span class="string">"(小甜甜)"</span>);</span><br><span class="line">        message.setTo(to);</span><br><span class="line">        message.setSubject(subject);</span><br><span class="line">        message.setText(context);</span><br><span class="line">        javaMailSender.send(message);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        将发送邮件的必要信息（发件人、收件人、标题、正文）封装到SimpleMailMessage对象中，可以根据规则设置发送人昵称等。</p><h4 id="发送多组件邮件（附件、复杂正文）"><a href="#发送多组件邮件（附件、复杂正文）" class="headerlink" title="发送多组件邮件（附件、复杂正文）"></a>发送多组件邮件（附件、复杂正文）</h4><p>​        发送简单邮件仅需要提供对应的4个基本信息就可以了，如果想发送复杂的邮件，需要更换邮件对象。使用MimeMessage可以发送特殊的邮件。</p><p><strong>发送网页正文邮件</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SendMailServiceImpl2</span> <span class="keyword">implements</span> <span class="title class_">SendMailService</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JavaMailSender javaMailSender;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//发送人</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">from</span> <span class="operator">=</span> <span class="string">"test@qq.com"</span>;</span><br><span class="line">    <span class="comment">//接收人</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">to</span> <span class="operator">=</span> <span class="string">"test@126.com"</span>;</span><br><span class="line">    <span class="comment">//标题</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">subject</span> <span class="operator">=</span> <span class="string">"测试邮件"</span>;</span><br><span class="line">    <span class="comment">//正文</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">context</span> <span class="operator">=</span> <span class="string">"&lt;img src='ABC.JPG'/&gt;&lt;a href='https://www.itcast.cn'&gt;点开有惊喜&lt;/a&gt;"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMail</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="type">MimeMessage</span> <span class="variable">message</span> <span class="operator">=</span> javaMailSender.createMimeMessage();</span><br><span class="line">            <span class="type">MimeMessageHelper</span> <span class="variable">helper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMessageHelper</span>(message);</span><br><span class="line">            helper.setFrom(to+<span class="string">"(小甜甜)"</span>);</span><br><span class="line">            helper.setTo(from);</span><br><span class="line">            helper.setSubject(subject);</span><br><span class="line">            helper.setText(context,<span class="literal">true</span>);<span class="comment">//此处设置正文支持html解析</span></span><br><span class="line"></span><br><span class="line">            javaMailSender.send(message);</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>发送带有附件的邮件</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SendMailServiceImpl2</span> <span class="keyword">implements</span> <span class="title class_">SendMailService</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JavaMailSender javaMailSender;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//发送人</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">from</span> <span class="operator">=</span> <span class="string">"test@qq.com"</span>;</span><br><span class="line">    <span class="comment">//接收人</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">to</span> <span class="operator">=</span> <span class="string">"test@126.com"</span>;</span><br><span class="line">    <span class="comment">//标题</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">subject</span> <span class="operator">=</span> <span class="string">"测试邮件"</span>;</span><br><span class="line">    <span class="comment">//正文</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">context</span> <span class="operator">=</span> <span class="string">"测试邮件正文"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMail</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            <span class="type">MimeMessage</span> <span class="variable">message</span> <span class="operator">=</span> javaMailSender.createMimeMessage();</span><br><span class="line">            <span class="type">MimeMessageHelper</span> <span class="variable">helper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MimeMessageHelper</span>(message,<span class="literal">true</span>);<span class="comment">//此处设置支持附件</span></span><br><span class="line">            helper.setFrom(to+<span class="string">"(小甜甜)"</span>);</span><br><span class="line">            helper.setTo(from);</span><br><span class="line">            helper.setSubject(subject);</span><br><span class="line">            helper.setText(context);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//添加附件</span></span><br><span class="line">            <span class="type">File</span> <span class="variable">f1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">"springboot_23_mail-0.0.1-SNAPSHOT.jar"</span>);</span><br><span class="line">            <span class="type">File</span> <span class="variable">f2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">"resources\\logo.png"</span>);</span><br><span class="line"></span><br><span class="line">            helper.addAttachment(f1.getName(),f1);</span><br><span class="line">            helper.addAttachment(<span class="string">"最靠谱的培训结构.png"</span>,f2);</span><br><span class="line"></span><br><span class="line">            javaMailSender.send(message);</span><br><span class="line">        } <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>springboot整合javamail其实就是简化了发送邮件的客户端对象JavaMailSender的初始化过程，通过配置的形式加载信息简化开发过程</li></ol><h3 id="KF-5-4-消息"><a href="#KF-5-4-消息" class="headerlink" title="KF-5-4.消息"></a>KF-5-4.消息</h3><p>​        springboot整合第三方技术最后一部分我们来说说消息中间件，首先先介绍一下消息的应用。</p><h4 id="消息的概念"><a href="#消息的概念" class="headerlink" title="消息的概念"></a>消息的概念</h4><p>​        从广义角度来说，消息其实就是信息，但是和信息又有所不同。信息通常被定义为一组数据，而消息除了具有数据的特征之外，还有消息的来源与接收的概念。通常发送消息的一方称为消息的生产者，接收消息的一方称为消息的消费者。这样比较后，发现其实消息和信息差别还是很大的。</p><p>​        为什么要设置生产者和消费者呢？这就是要说到消息的意义了。信息通常就是一组数据，但是消息由于有了生产者和消费者，就出现了消息中所包含的信息可以被二次解读，生产者发送消息，可以理解为生产者发送了一个信息，也可以理解为生产者发送了一个命令；消费者接收消息，可以理解为消费者得到了一个信息，也可以理解为消费者得到了一个命令。对比一下我们会发现信息是一个基本数据，而命令则可以关联下一个行为动作，这样就可以理解为基于接收的消息相当于得到了一个行为动作，使用这些行为动作就可以组织成一个业务逻辑，进行进一步的操作。总的来说，消息其实也是一组信息，只是为其赋予了全新的含义，因为有了消息的流动，并且是有方向性的流动，带来了基于流动的行为产生的全新解读。开发者就可以基于消息的这种特殊解，将其换成代码中的指令。</p><p>​        对于消息的理解，初学者总认为消息内部的数据非常复杂，这是一个误区。比如我发送了一个消息，要求接受者翻译发送过去的内容。初学者会认为消息中会包含被翻译的文字，已经本次操作要执行翻译操作而不是打印操作。其实这种现象有点过度解读了，发送的消息中仅仅包含被翻译的文字，但是可以通过控制不同的人接收此消息来确认要做的事情。例如发送被翻译的文字仅到A程序，而A程序只能进行翻译操作，这样就可以发送简单的信息完成复杂的业务了，是通过接收消息的主体不同，进而执行不同的操作，而不会在消息内部定义数据的操作行为，当然如果开发者希望消息中包含操作种类信息也是可以的，只是提出消息的内容可以更简单，更单一。</p><p>​        对于消息的生产者与消费者的工作模式，还可以将消息划分成两种模式，同步消费与异步消息。</p><p>​        所谓同步消息就是生产者发送完消息，等待消费者处理，消费者处理完将结果告知生产者，然后生产者继续向下执行业务。这种模式过于卡生产者的业务执行连续性，在现在的企业级开发中，上述这种业务场景通常不会采用消息的形式进行处理。</p><p>​        所谓异步消息就是生产者发送完消息，无需等待消费者处理完毕，生产者继续向下执行其他动作。比如生产者发送了一个日志信息给日志系统，发送过去以后生产者就向下做其他事情了，无需关注日志系统的执行结果。日志系统根据接收到的日志信息继续进行业务执行，是单纯的记录日志，还是记录日志并报警，这些和生产者无关，这样生产者的业务执行效率就会大幅度提升。并且可以通过添加多个消费者来处理同一个生产者发送的消息来提高系统的高并发性，改善系统工作效率，提高用户体验。一旦某一个消费者由于各种问题宕机了，也不会对业务产生影响，提高了系统的高可用性。</p><p>​        以上简单的介绍了一下消息这种工作模式存在的意义，希望对各位学习者有所帮助。</p><h4 id="Java处理消息的标准规范"><a href="#Java处理消息的标准规范" class="headerlink" title="Java处理消息的标准规范"></a>Java处理消息的标准规范</h4><p>​        目前企业级开发中广泛使用的消息处理技术共三大类，具体如下：</p><ul><li>JMS</li><li>AMQP</li><li>MQTT</li></ul><p>​        为什么是三大类，而不是三个技术呢？因为这些都是规范，就想JDBC技术，是个规范，开发针对规范开发，运行还要靠实现类，例如MySQL提供了JDBC的实现，最终运行靠的还是实现。并且这三类规范都是针对异步消息进行处理的，也符合消息的设计本质，处理异步的业务。对以上三种消息规范做一下普及</p><h5 id="JMS"><a href="#JMS" class="headerlink" title="JMS"></a>JMS</h5><p>​        JMS（Java Message Service）,这是一个规范，作用等同于JDBC规范，提供了与消息服务相关的API接口。</p><p><strong>JMS消息模型</strong></p><p>​        JMS规范中规范了消息有两种模型。分别是<strong>点对点模型</strong>和<strong>发布订阅模型</strong>。</p><p>​        <strong>点对点模型</strong>：peer-2-peer，生产者会将消息发送到一个保存消息的容器中，通常使用队列模型，使用队列保存消息。一个队列的消息只能被一个消费者消费，或未被及时消费导致超时。这种模型下，生产者和消费者是一对一绑定的。</p><p>​        <strong>发布订阅模型</strong>：publish-subscribe，生产者将消息发送到一个保存消息的容器中，也是使用队列模型来保存。但是消息可以被多个消费者消费，生产者和消费者完全独立，相互不需要感知对方的存在。</p><p>​        以上这种分类是从消息的生产和消费过程来进行区分，针对消息所包含的信息不同，还可以进行不同类别的划分。</p><p><strong>JMS消息种类</strong></p><p>​        根据消息中包含的数据种类划分，可以将消息划分成6种消息。</p><ul><li>TextMessage</li><li>MapMessage</li><li>BytesMessage</li><li>StreamMessage</li><li>ObjectMessage</li><li>Message （只有消息头和属性）</li></ul><p>​        JMS主张不同种类的消息，消费方式不同，可以根据使用需要选择不同种类的消息。但是这一点也成为其诟病之处，后面再说。整体上来说，JMS就是典型的保守派，什么都按照J2EE的规范来，做一套规范，定义若干个标准，每个标准下又提供一大批API。目前对JMS规范实现的消息中间件技术还是挺多的，毕竟是皇家御用，肯定有人舔，例如ActiveMQ、Redis、HornetMQ。但是也有一些不太规范的实现，参考JMS的标准设计，但是又不完全满足其规范，例如：RabbitMQ、RocketMQ。</p><h5 id="AMQP"><a href="#AMQP" class="headerlink" title="AMQP"></a>AMQP</h5><p>​        JMS的问世为消息中间件提供了很强大的规范性支撑，但是使用的过程中就开始被人诟病，比如JMS设置的极其复杂的多种类消息处理机制。本来分门别类处理挺好的，为什么会被诟病呢？原因就在于JMS的设计是J2EE规范，站在Java开发的角度思考问题。但是现实往往是复杂度很高的。比如我有一个.NET开发的系统A，有一个Java开发的系统B，现在要从A系统给B系统发业务消息，结果两边数据格式不统一，没法操作。JMS不是可以统一数据格式吗？提供了6种数据种类，总有一款适合你啊。NO，一个都不能用。因为A系统的底层语言不是Java语言开发的，根本不支持那些对象。这就意味着如果想使用现有的业务系统A继续开发已经不可能了，必须推翻重新做使用Java语言开发的A系统。</p><p>​        这时候有人就提出说，你搞那么复杂，整那么多种类干什么？找一种大家都支持的消息数据类型不就解决这个跨平台的问题了吗？大家一想，对啊，于是AMQP孕育而生。</p><p>​        单从上面的说明中其实可以明确感知到，AMQP的出现解决的是消息传递时使用的消息种类的问题，化繁为简，但是其并没有完全推翻JMS的操作API，所以说AMQP仅仅是一种协议，规范了数据传输的格式而已。</p><p>​        AMQP（advanced message queuing protocol）：一种协议（高级消息队列协议，也是消息代理规范），规范了网络交换的数据格式，兼容JMS操作。<br><strong>优点</strong></p><p>​        具有跨平台性，服务器供应商，生产者，消费者可以使用不同的语言来实现</p><p><strong>JMS消息种类</strong></p><p>​        AMQP消息种类：byte[]</p><p>​        AMQP在JMS的消息模型基础上又进行了进一步的扩展，除了点对点和发布订阅的模型，开发了几种全新的消息模型，适应各种各样的消息发送。</p><p><strong>AMQP消息模型</strong></p><ul><li>direct exchange</li><li>fanout exchange</li><li>topic exchange</li><li>headers exchange</li><li>system exchange</li></ul><p>​        目前实现了AMQP协议的消息中间件技术也很多，而且都是较为流行的技术，例如：RabbitMQ、StormMQ、RocketMQ</p><h5 id="MQTT"><a href="#MQTT" class="headerlink" title="MQTT"></a>MQTT</h5><p>​        MQTT（Message Queueing Telemetry Transport）消息队列遥测传输，专为小设备设计，是物联网（IOT）生态系统中主要成分之一。由于与JavaEE企业级开发没有交集，此处不作过多的说明。</p><p>​        除了上述3种J2EE企业级应用中广泛使用的三种异步消息传递技术，还有一种技术也不能忽略，Kafka。</p><h5 id="KafKa"><a href="#KafKa" class="headerlink" title="KafKa"></a>KafKa</h5><p>​        Kafka，一种高吞吐量的分布式发布订阅消息系统，提供实时消息功能。Kafka技术并不是作为消息中间件为主要功能的产品，但是其拥有发布订阅的工作模式，也可以充当消息中间件来使用，而且目前企业级开发中其身影也不少见。</p><p>​        本节内容讲围绕着上述内容中的几种实现方案讲解springboot整合各种各样的消息中间件。由于各种消息中间件必须先安装再使用，下面的内容采用Windows系统安装，降低各位学习者的学习难度，基本套路和之前学习NoSQL解决方案一样，先安装再整合。</p><h4 id="购物订单发送手机短信案例"><a href="#购物订单发送手机短信案例" class="headerlink" title="购物订单发送手机短信案例"></a>购物订单发送手机短信案例</h4><p>​        为了便于下面演示各种各样的消息中间件技术，我们创建一个购物过程生成订单时为用户发送短信的案例环境，模拟使用消息中间件实现发送手机短信的过程。</p><p>​        手机验证码案例需求如下：</p><ul><li><p>执行下单业务时（模拟此过程），调用消息服务，将要发送短信的订单id传递给消息中间件</p></li><li><p>消息处理服务接收到要发送的订单id后输出订单id（模拟发短信）</p><p>由于不涉及数据读写，仅开发业务层与表现层，其中短信处理的业务代码独立开发，代码如下：</p></li></ul><p><strong>订单业务</strong></p><p>​        <strong>业务层接口</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OrderService</span> {</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">order</span><span class="params">(String id)</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        模拟传入订单id，执行下订单业务，参数为虚拟设定，实际应为订单对应的实体类</p><p>​        <strong>业务层实现</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">OrderService</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MessageService messageService;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">order</span><span class="params">(String id)</span> {</span><br><span class="line">        <span class="comment">//一系列操作，包含各种服务调用，处理各种业务</span></span><br><span class="line">        System.out.println(<span class="string">"订单处理开始"</span>);</span><br><span class="line">        <span class="comment">//短信消息处理</span></span><br><span class="line">        messageService.sendMessage(id);</span><br><span class="line">        System.out.println(<span class="string">"订单处理结束"</span>);</span><br><span class="line">        System.out.println();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        业务层转调短信处理的服务MessageService</p><p>​        <strong>表现层服务</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping("/orders")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderController</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OrderService orderService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping("{id}")</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">order</span><span class="params">(<span class="meta">@PathVariable</span> String id)</span>{</span><br><span class="line">        orderService.order(id);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        表现层对外开发接口，传入订单id即可（模拟）</p><p><strong>短信处理业务</strong></p><p>​        <strong>业务层接口</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">MessageService</span> {</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String id)</span>;</span><br><span class="line">    String <span class="title function_">doMessage</span><span class="params">()</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        短信处理业务层接口提供两个操作，发送要处理的订单id到消息中间件，另一个操作目前暂且设计成处理消息，实际消息的处理过程不应该是手动执行，应该是自动执行，到具体实现时再进行设计</p><p>​        <strong>业务层实现</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">MessageService</span> {</span><br><span class="line">    <span class="keyword">private</span> ArrayList&lt;String&gt; msgList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String id)</span> {</span><br><span class="line">        System.out.println(<span class="string">"待发送短信的订单已纳入处理队列，id："</span>+id);</span><br><span class="line">        msgList.add(id);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">doMessage</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> msgList.remove(<span class="number">0</span>);</span><br><span class="line">        System.out.println(<span class="string">"已完成短信发送业务，id："</span>+id);</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        短信处理业务层实现中使用集合先模拟消息队列，观察效果</p><p>​        <strong>表现层服务</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping("/msgs")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageController</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> MessageService messageService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">doMessage</span><span class="params">()</span>{</span><br><span class="line">        <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> messageService.doMessage();</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        短信处理表现层接口暂且开发出一个处理消息的入口，但是此业务是对应业务层中设计的模拟接口，实际业务不需要设计此接口。</p><p>​        下面开启springboot整合各种各样的消息中间件，从严格满足JMS规范的ActiveMQ开始</p><h4 id="SpringBoot整合ActiveMQ"><a href="#SpringBoot整合ActiveMQ" class="headerlink" title="SpringBoot整合ActiveMQ"></a>SpringBoot整合ActiveMQ</h4><p>​        ActiveMQ是MQ产品中的元老级产品，早期标准MQ产品之一，在AMQP协议没有出现之前，占据了消息中间件市场的绝大部分份额，后期因为AMQP系列产品的出现，迅速走弱，目前仅在一些线上运行的产品中出现，新产品开发较少采用。</p><h5 id="安装-3"><a href="#安装-3" class="headerlink" title="安装"></a>安装</h5><p>​        windows版安装包下载地址：<a href="https://activemq.apache.org/components/classic/download/">https://activemq.apache.org/components/classic/download</a><a href="https://activemq.apache.org/components/classic/download/">/</a></p><p>​        下载的安装包是解压缩就能使用的zip文件，解压缩完毕后会得到如下文件</p><p><img src="/2023/07/26/springboot100000/image-20220228160001620.png" alt="image-20220228160001620"></p><p><strong>启动服务器</strong></p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">activemq.bat</span><br></pre></td></tr></tbody></table></figure><p>​        运行bin目录下的win32或win64目录下的activemq.bat命令即可，根据自己的操作系统选择即可，默认对外服务端口61616。</p><p><strong>访问web管理服务</strong></p><p>​        ActiveMQ启动后会启动一个Web控制台服务，可以通过该服务管理ActiveMQ。</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">http://127.0.0.1:8161/</span></span><br></pre></td></tr></tbody></table></figure><p>​        web管理服务默认端口8161，访问后可以打开ActiveMQ的管理界面，如下：</p><img src="/2023/07/26/springboot100000/image-20220228160844972.png" alt="image-20220228160844972" style="zoom:67%;"><p>​        首先输入访问用户名和密码，初始化用户名和密码相同，均为：admin，成功登录后进入管理后台界面，如下：</p><p><img src="/2023/07/26/springboot100000/image-20220228161010401.png" alt="image-20220228161010401"></p><p>​        看到上述界面视为启动ActiveMQ服务成功。</p><p><strong>启动失败</strong></p><p>​        在ActiveMQ启动时要占用多个端口，以下为正常启动信息：</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">wrapper  | --&gt; Wrapper Started as Console</span><br><span class="line">wrapper  | Launching a JVM...</span><br><span class="line">jvm <span class="number">1</span>    | Wrapper (Version <span class="number">3</span>.<span class="number">2</span>.<span class="number">3</span>) http://wrapper.tanukisoftware.org</span><br><span class="line">jvm <span class="number">1</span>    |   Copyright <span class="number">1999</span>-<span class="number">2006</span> Tanuki Software, Inc.  All Rights Reserved.</span><br><span class="line">jvm <span class="number">1</span>    |</span><br><span class="line">jvm <span class="number">1</span>    | Java Runtime: Oracle Corporation <span class="number">1</span>.<span class="number">8</span>.<span class="number">0</span>_172 D:\soft\jdk1.<span class="number">8</span>.<span class="number">0</span>_172\jre</span><br><span class="line">jvm <span class="number">1</span>    |   Heap sizes: current=<span class="number">249344</span>k  free=<span class="number">235037</span>k  max=<span class="number">932352</span>k</span><br><span class="line">jvm <span class="number">1</span>    |     JVM args: -Dactivemq.home=../.. -Dactivemq.base=../.. -Djavax.<span class="built_in">net</span>.ssl.keyStorePassword=password -Djavax.<span class="built_in">net</span>.ssl.trustStorePassword=password -Djavax.<span class="built_in">net</span>.ssl.keyStore=../../conf/broker.ks -Djavax.<span class="built_in">net</span>.ssl.trustStore=../../conf/broker.ts -Dcom.sun.management.jmxremote -Dorg.apache.activemq.UseDedicatedTaskRunner=true -Djava.util.logging.config.file=logging.properties -Dactivemq.conf=../../conf -Dactivemq.data=../../data -Djava.security.auth.login.config=../../conf/login.config -Xmx1024m -Djava.library.<span class="built_in">path</span>=../../bin/win64 -Dwrapper.key=<span class="number">7</span>ySrCD75XhLCpLjd -Dwrapper.port=<span class="number">32000</span> -Dwrapper.jvm.port.min=<span class="number">31000</span> -Dwrapper.jvm.port.max=<span class="number">31999</span> -Dwrapper.pid=<span class="number">9364</span> -Dwrapper.version=<span class="number">3</span>.<span class="number">2</span>.<span class="number">3</span> -Dwrapper.native_library=wrapper -Dwrapper.cpu.timeout=<span class="number">10</span> -Dwrapper.jvmid=<span class="number">1</span></span><br><span class="line">jvm <span class="number">1</span>    | Extensions classpath:</span><br><span class="line">jvm <span class="number">1</span>    |   [..\..\lib,..\..\lib\camel,..\..\lib\optional,..\..\lib\web,..\..\lib\extra]</span><br><span class="line">jvm <span class="number">1</span>    | ACTIVEMQ_HOME: ..\..</span><br><span class="line">jvm <span class="number">1</span>    | ACTIVEMQ_BASE: ..\..</span><br><span class="line">jvm <span class="number">1</span>    | ACTIVEMQ_CONF: ..\..\conf</span><br><span class="line">jvm <span class="number">1</span>    | ACTIVEMQ_DATA: ..\..\data</span><br><span class="line">jvm <span class="number">1</span>    | Loading message broker from: xbean:activemq.xml</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Refreshing org.apache.activemq.xbean.XBeanBrokerFactory$<span class="number">1</span>@<span class="number">5</span>f3ebfe0: startup <span class="built_in">date</span> [Mon Feb <span class="number">28</span> <span class="number">16</span>:<span class="number">07</span>:<span class="number">48</span> CST <span class="number">2022</span>]; root of context hierarchy</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Using Persistence Adapter: KahaDBPersistenceAdapter[D:\soft\activemq\bin\win64\..\..\data\kahadb]</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | KahaDB is version <span class="number">7</span></span><br><span class="line">jvm <span class="number">1</span>    |  INFO | PListStore:[D:\soft\activemq\bin\win64\..\..\data\localhost\tmp_storage] started</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Apache ActiveMQ <span class="number">5</span>.<span class="number">16</span>.<span class="number">3</span> (localhost, ID:CZBK-<span class="number">20210302</span>VL-<span class="number">10434</span>-<span class="number">1646035669595</span>-<span class="number">0</span>:<span class="number">1</span>) is starting</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Listening <span class="keyword">for</span> connections <span class="built_in">at</span>: tcp://CZBK-<span class="number">20210302</span>VL:<span class="number">61616</span>?maximumConnections=<span class="number">1000</span>&amp;wireFormat.maxFrameSize=<span class="number">104857600</span></span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Connector openwire started</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Listening <span class="keyword">for</span> connections <span class="built_in">at</span>: amqp://CZBK-<span class="number">20210302</span>VL:<span class="number">5672</span>?maximumConnections=<span class="number">1000</span>&amp;wireFormat.maxFrameSize=<span class="number">104857600</span></span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Connector amqp started</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Listening <span class="keyword">for</span> connections <span class="built_in">at</span>: stomp://CZBK-<span class="number">20210302</span>VL:<span class="number">61613</span>?maximumConnections=<span class="number">1000</span>&amp;wireFormat.maxFrameSize=<span class="number">104857600</span></span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Connector stomp started</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Listening <span class="keyword">for</span> connections <span class="built_in">at</span>: mqtt://CZBK-<span class="number">20210302</span>VL:<span class="number">1883</span>?maximumConnections=<span class="number">1000</span>&amp;wireFormat.maxFrameSize=<span class="number">104857600</span></span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Connector mqtt started</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Starting Jetty server</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Creating Jetty connector</span><br><span class="line">jvm <span class="number">1</span>    |  WARN | ServletContext@o.e.j.s.ServletContextHandler@<span class="number">7350746</span>f{/,null,STARTING} has uncovered http methods <span class="keyword">for</span> <span class="built_in">path</span>: /</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Listening <span class="keyword">for</span> connections <span class="built_in">at</span> ws://CZBK-<span class="number">20210302</span>VL:<span class="number">61614</span>?maximumConnections=<span class="number">1000</span>&amp;wireFormat.maxFrameSize=<span class="number">104857600</span></span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Connector ws started</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Apache ActiveMQ <span class="number">5</span>.<span class="number">16</span>.<span class="number">3</span> (localhost, ID:CZBK-<span class="number">20210302</span>VL-<span class="number">10434</span>-<span class="number">1646035669595</span>-<span class="number">0</span>:<span class="number">1</span>) started</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | <span class="keyword">For</span> <span class="built_in">help</span> or <span class="built_in">more</span> information please see: http://activemq.apache.org</span><br><span class="line">jvm <span class="number">1</span>    |  WARN | Store limit is <span class="number">102400</span> mb (current store usage is <span class="number">0</span> mb). The data directory: D:\soft\activemq\bin\win64\..\..\data\kahadb only has <span class="number">68936</span> mb of usable space. - resetting to maximum available disk space: <span class="number">68936</span> mb</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | ActiveMQ WebConsole available <span class="built_in">at</span> http://<span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">8161</span>/</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | ActiveMQ Jolokia REST API available <span class="built_in">at</span> http://<span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">8161</span>/api/jolokia/</span><br></pre></td></tr></tbody></table></figure><p>​        其中占用的端口有：61616、5672、61613、1883、61614，如果启动失败，请先管理对应端口即可。以下就是某个端口占用的报错信息，可以从抛出异常的位置看出，启动5672端口时端口被占用，显示java.net.BindException: Address already in use: JVM_Bind。Windows系统中终止端口运行的操作参看<a href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%90%AF%E5%8A%A8%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88">【命令行启动常见问题及解决方案】</a></p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br></pre></td><td class="code"><pre><span class="line">wrapper  | --&gt; Wrapper Started as Console</span><br><span class="line">wrapper  | Launching a JVM...</span><br><span class="line">jvm <span class="number">1</span>    | Wrapper (Version <span class="number">3</span>.<span class="number">2</span>.<span class="number">3</span>) http://wrapper.tanukisoftware.org</span><br><span class="line">jvm <span class="number">1</span>    |   Copyright <span class="number">1999</span>-<span class="number">2006</span> Tanuki Software, Inc.  All Rights Reserved.</span><br><span class="line">jvm <span class="number">1</span>    |</span><br><span class="line">jvm <span class="number">1</span>    | Java Runtime: Oracle Corporation <span class="number">1</span>.<span class="number">8</span>.<span class="number">0</span>_172 D:\soft\jdk1.<span class="number">8</span>.<span class="number">0</span>_172\jre</span><br><span class="line">jvm <span class="number">1</span>    |   Heap sizes: current=<span class="number">249344</span>k  free=<span class="number">235038</span>k  max=<span class="number">932352</span>k</span><br><span class="line">jvm <span class="number">1</span>    |     JVM args: -Dactivemq.home=../.. -Dactivemq.base=../.. -Djavax.<span class="built_in">net</span>.ssl.keyStorePassword=password -Djavax.<span class="built_in">net</span>.ssl.trustStorePassword=password -Djavax.<span class="built_in">net</span>.ssl.keyStore=../../conf/broker.ks -Djavax.<span class="built_in">net</span>.ssl.trustStore=../../conf/broker.ts -Dcom.sun.management.jmxremote -Dorg.apache.activemq.UseDedicatedTaskRunner=true -Djava.util.logging.config.file=logging.properties -Dactivemq.conf=../../conf -Dactivemq.data=../../data -Djava.security.auth.login.config=../../conf/login.config -Xmx1024m -Djava.library.<span class="built_in">path</span>=../../bin/win64 -Dwrapper.key=QPJoy9ZoXeWmmwTS -Dwrapper.port=<span class="number">32000</span> -Dwrapper.jvm.port.min=<span class="number">31000</span> -Dwrapper.jvm.port.max=<span class="number">31999</span> -Dwrapper.pid=<span class="number">14836</span> -Dwrapper.version=<span class="number">3</span>.<span class="number">2</span>.<span class="number">3</span> -Dwrapper.native_library=wrapper -Dwrapper.cpu.timeout=<span class="number">10</span> -Dwrapper.jvmid=<span class="number">1</span></span><br><span class="line">jvm <span class="number">1</span>    | Extensions classpath:</span><br><span class="line">jvm <span class="number">1</span>    |   [..\..\lib,..\..\lib\camel,..\..\lib\optional,..\..\lib\web,..\..\lib\extra]</span><br><span class="line">jvm <span class="number">1</span>    | ACTIVEMQ_HOME: ..\..</span><br><span class="line">jvm <span class="number">1</span>    | ACTIVEMQ_BASE: ..\..</span><br><span class="line">jvm <span class="number">1</span>    | ACTIVEMQ_CONF: ..\..\conf</span><br><span class="line">jvm <span class="number">1</span>    | ACTIVEMQ_DATA: ..\..\data</span><br><span class="line">jvm <span class="number">1</span>    | Loading message broker from: xbean:activemq.xml</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Refreshing org.apache.activemq.xbean.XBeanBrokerFactory$<span class="number">1</span>@<span class="number">2</span>c9392f5: startup <span class="built_in">date</span> [Mon Feb <span class="number">28</span> <span class="number">16</span>:<span class="number">06</span>:<span class="number">16</span> CST <span class="number">2022</span>]; root of context hierarchy</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Using Persistence Adapter: KahaDBPersistenceAdapter[D:\soft\activemq\bin\win64\..\..\data\kahadb]</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | KahaDB is version <span class="number">7</span></span><br><span class="line">jvm <span class="number">1</span>    |  INFO | PListStore:[D:\soft\activemq\bin\win64\..\..\data\localhost\tmp_storage] started</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Apache ActiveMQ <span class="number">5</span>.<span class="number">16</span>.<span class="number">3</span> (localhost, ID:CZBK-<span class="number">20210302</span>VL-<span class="number">10257</span>-<span class="number">1646035577620</span>-<span class="number">0</span>:<span class="number">1</span>) is starting</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Listening <span class="keyword">for</span> connections <span class="built_in">at</span>: tcp://CZBK-<span class="number">20210302</span>VL:<span class="number">61616</span>?maximumConnections=<span class="number">1000</span>&amp;wireFormat.maxFrameSize=<span class="number">104857600</span></span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Connector openwire started</span><br><span class="line">jvm <span class="number">1</span>    | ERROR | Failed to <span class="built_in">start</span> Apache ActiveMQ (localhost, ID:CZBK-<span class="number">20210302</span>VL-<span class="number">10257</span>-<span class="number">1646035577620</span>-<span class="number">0</span>:<span class="number">1</span>)</span><br><span class="line">jvm <span class="number">1</span>    | java.io.IOException: Transport Connector could <span class="keyword">not</span> be registered <span class="keyword">in</span> JMX: java.io.IOException: Failed to bind to server socket: amqp://<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>:<span class="number">5672</span>?maximumConnections=<span class="number">1000</span>&amp;wireFormat.maxFrameSize=<span class="number">104857600</span> due to: java.<span class="built_in">net</span>.BindException: Address already <span class="keyword">in</span> use: JVM_Bind</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.util.IOExceptionSupport.create(IOExceptionSupport.java:<span class="number">28</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.broker.BrokerService.registerConnectorMBean(BrokerService.java:<span class="number">2288</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.broker.BrokerService.startTransportConnector(BrokerService.java:<span class="number">2769</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.broker.BrokerService.startAllConnectors(BrokerService.java:<span class="number">2665</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.broker.BrokerService.doStartBroker(BrokerService.java:<span class="number">780</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.broker.BrokerService.startBroker(BrokerService.java:<span class="number">742</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.broker.BrokerService.<span class="built_in">start</span>(BrokerService.java:<span class="number">645</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.xbean.XBeanBrokerService.afterPropertiesSet(XBeanBrokerService.java:<span class="number">73</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:<span class="number">62</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:<span class="number">43</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> java.lang.reflect.Method.invoke(Method.java:<span class="number">498</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeCustomInitMethod(AbstractAutowireCapableBeanFactory.java:<span class="number">1748</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:<span class="number">1685</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:<span class="number">1615</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:<span class="number">553</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:<span class="number">481</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.springframework.beans.factory.support.AbstractBeanFactory$<span class="number">1</span>.getObject(AbstractBeanFactory.java:<span class="number">312</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:<span class="number">230</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:<span class="number">308</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:<span class="number">197</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:<span class="number">756</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:<span class="number">867</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:<span class="number">542</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.xbean.spring.context.ResourceXmlApplicationContext.&lt;init&gt;(ResourceXmlApplicationContext.java:<span class="number">64</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.xbean.spring.context.ResourceXmlApplicationContext.&lt;init&gt;(ResourceXmlApplicationContext.java:<span class="number">52</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.xbean.XBeanBrokerFactory$<span class="number">1</span>.&lt;init&gt;(XBeanBrokerFactory.java:<span class="number">104</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.xbean.XBeanBrokerFactory.createApplicationContext(XBeanBrokerFactory.java:<span class="number">104</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.xbean.XBeanBrokerFactory.createBroker(XBeanBrokerFactory.java:<span class="number">67</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:<span class="number">71</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:<span class="number">54</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.command.StartCommand.runTask(StartCommand.java:<span class="number">87</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:<span class="number">63</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.command.ShellCommand.runTask(ShellCommand.java:<span class="number">154</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:<span class="number">63</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.command.ShellCommand.main(ShellCommand.java:<span class="number">104</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:<span class="number">62</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:<span class="number">43</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> java.lang.reflect.Method.invoke(Method.java:<span class="number">498</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.Main.runTaskClass(Main.java:<span class="number">262</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.Main.main(Main.java:<span class="number">115</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:<span class="number">62</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:<span class="number">43</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> java.lang.reflect.Method.invoke(Method.java:<span class="number">498</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:<span class="number">240</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> java.lang.Thread.run(Thread.java:<span class="number">748</span>)</span><br><span class="line">jvm <span class="number">1</span>    | Caused by: java.io.IOException: Failed to bind to server socket: amqp://<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>:<span class="number">5672</span>?maximumConnections=<span class="number">1000</span>&amp;wireFormat.maxFrameSize=<span class="number">104857600</span> due to: java.<span class="built_in">net</span>.BindException: Address already <span class="keyword">in</span> use: JVM_Bind</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.util.IOExceptionSupport.create(IOExceptionSupport.java:<span class="number">34</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.transport.tcp.TcpTransportServer.bind(TcpTransportServer.java:<span class="number">146</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.transport.tcp.TcpTransportFactory.doBind(TcpTransportFactory.java:<span class="number">62</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.transport.TransportFactorySupport.bind(TransportFactorySupport.java:<span class="number">40</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.broker.TransportConnector.createTransportServer(TransportConnector.java:<span class="number">335</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.broker.TransportConnector.getServer(TransportConnector.java:<span class="number">145</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.broker.TransportConnector.asManagedConnector(TransportConnector.java:<span class="number">110</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.broker.BrokerService.registerConnectorMBean(BrokerService.java:<span class="number">2283</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      ... <span class="number">46</span> <span class="built_in">more</span></span><br><span class="line">jvm <span class="number">1</span>    | Caused by: java.<span class="built_in">net</span>.BindException: Address already <span class="keyword">in</span> use: JVM_Bind</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> java.<span class="built_in">net</span>.DualStackPlainSocketImpl.bind0(Native Method)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> java.<span class="built_in">net</span>.DualStackPlainSocketImpl.socketBind(DualStackPlainSocketImpl.java:<span class="number">106</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> java.<span class="built_in">net</span>.AbstractPlainSocketImpl.bind(AbstractPlainSocketImpl.java:<span class="number">387</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> java.<span class="built_in">net</span>.PlainSocketImpl.bind(PlainSocketImpl.java:<span class="number">190</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> java.<span class="built_in">net</span>.ServerSocket.bind(ServerSocket.java:<span class="number">375</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> java.<span class="built_in">net</span>.ServerSocket.&lt;init&gt;(ServerSocket.java:<span class="number">237</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> javax.<span class="built_in">net</span>.DefaultServerSocketFactory.createServerSocket(ServerSocketFactory.java:<span class="number">231</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.transport.tcp.TcpTransportServer.bind(TcpTransportServer.java:<span class="number">143</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      ... <span class="number">52</span> <span class="built_in">more</span></span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Apache ActiveMQ <span class="number">5</span>.<span class="number">16</span>.<span class="number">3</span> (localhost, ID:CZBK-<span class="number">20210302</span>VL-<span class="number">10257</span>-<span class="number">1646035577620</span>-<span class="number">0</span>:<span class="number">1</span>) is shutting down</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | socketQueue interrupted - stopping</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Connector openwire stopped</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Could <span class="keyword">not</span> accept connection during shutdown  : null (null)</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Connector amqp stopped</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Connector stomp stopped</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Connector mqtt stopped</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Connector ws stopped</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | PListStore:[D:\soft\activemq\bin\win64\..\..\data\localhost\tmp_storage] stopped</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Stopping async queue tasks</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Stopping async topic tasks</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Stopped KahaDB</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Apache ActiveMQ <span class="number">5</span>.<span class="number">16</span>.<span class="number">3</span> (localhost, ID:CZBK-<span class="number">20210302</span>VL-<span class="number">10257</span>-<span class="number">1646035577620</span>-<span class="number">0</span>:<span class="number">1</span>) uptime <span class="number">0</span>.<span class="number">426</span> seconds</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Apache ActiveMQ <span class="number">5</span>.<span class="number">16</span>.<span class="number">3</span> (localhost, ID:CZBK-<span class="number">20210302</span>VL-<span class="number">10257</span>-<span class="number">1646035577620</span>-<span class="number">0</span>:<span class="number">1</span>) is shutdown</span><br><span class="line">jvm <span class="number">1</span>    |  INFO | Closing org.apache.activemq.xbean.XBeanBrokerFactory$<span class="number">1</span>@<span class="number">2</span>c9392f5: startup <span class="built_in">date</span> [Mon Feb <span class="number">28</span> <span class="number">16</span>:<span class="number">06</span>:<span class="number">16</span> CST <span class="number">2022</span>]; root of context hierarchy</span><br><span class="line">jvm <span class="number">1</span>    |  WARN | Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.apache.activemq.xbean.XBeanBrokerService#<span class="number">0</span>' <span class="keyword">defined</span> <span class="keyword">in</span> class <span class="built_in">path</span> resource [activemq.xml]: Invocation of init method failed; nested exception is java.io.IOException: Transport Connector could <span class="keyword">not</span> be registered <span class="keyword">in</span> JMX: java.io.IOException: Failed to bind to server socket: amqp://<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>:<span class="number">5672</span>?maximumConnections=<span class="number">1000</span>&amp;wireFormat.maxFrameSize=<span class="number">104857600</span> due to: java.<span class="built_in">net</span>.BindException: Address already <span class="keyword">in</span> use: JVM_Bind</span><br><span class="line">jvm <span class="number">1</span>    | ERROR: java.lang.RuntimeException: Failed to execute <span class="built_in">start</span> task. Reason: java.lang.IllegalStateException: BeanFactory <span class="keyword">not</span> initialized or already closed - <span class="keyword">call</span> 'refresh' before accessing beans via the ApplicationContext</span><br><span class="line">jvm <span class="number">1</span>    | java.lang.RuntimeException: Failed to execute <span class="built_in">start</span> task. Reason: java.lang.IllegalStateException: BeanFactory <span class="keyword">not</span> initialized or already closed - <span class="keyword">call</span> 'refresh' before accessing beans via the ApplicationContext</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.command.StartCommand.runTask(StartCommand.java:<span class="number">91</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:<span class="number">63</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.command.ShellCommand.runTask(ShellCommand.java:<span class="number">154</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:<span class="number">63</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.command.ShellCommand.main(ShellCommand.java:<span class="number">104</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:<span class="number">62</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:<span class="number">43</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> java.lang.reflect.Method.invoke(Method.java:<span class="number">498</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.Main.runTaskClass(Main.java:<span class="number">262</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.Main.main(Main.java:<span class="number">115</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:<span class="number">62</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:<span class="number">43</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> java.lang.reflect.Method.invoke(Method.java:<span class="number">498</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:<span class="number">240</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> java.lang.Thread.run(Thread.java:<span class="number">748</span>)</span><br><span class="line">jvm <span class="number">1</span>    | Caused by: java.lang.IllegalStateException: BeanFactory <span class="keyword">not</span> initialized or already closed - <span class="keyword">call</span> 'refresh' before accessing beans via the ApplicationContext</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.springframework.context.support.AbstractRefreshableApplicationContext.getBeanFactory(AbstractRefreshableApplicationContext.java:<span class="number">164</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:<span class="number">1034</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:<span class="number">555</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.xbean.spring.context.ResourceXmlApplicationContext.&lt;init&gt;(ResourceXmlApplicationContext.java:<span class="number">64</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.xbean.spring.context.ResourceXmlApplicationContext.&lt;init&gt;(ResourceXmlApplicationContext.java:<span class="number">52</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.xbean.XBeanBrokerFactory$<span class="number">1</span>.&lt;init&gt;(XBeanBrokerFactory.java:<span class="number">104</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.xbean.XBeanBrokerFactory.createApplicationContext(XBeanBrokerFactory.java:<span class="number">104</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.xbean.XBeanBrokerFactory.createBroker(XBeanBrokerFactory.java:<span class="number">67</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:<span class="number">71</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:<span class="number">54</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.command.StartCommand.runTask(StartCommand.java:<span class="number">87</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      ... <span class="number">16</span> <span class="built_in">more</span></span><br><span class="line">jvm <span class="number">1</span>    | ERROR: java.lang.IllegalStateException: BeanFactory <span class="keyword">not</span> initialized or already closed - <span class="keyword">call</span> 'refresh' before accessing beans via the ApplicationContext</span><br><span class="line">jvm <span class="number">1</span>    | java.lang.IllegalStateException: BeanFactory <span class="keyword">not</span> initialized or already closed - <span class="keyword">call</span> 'refresh' before accessing beans via the ApplicationContext</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.springframework.context.support.AbstractRefreshableApplicationContext.getBeanFactory(AbstractRefreshableApplicationContext.java:<span class="number">164</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:<span class="number">1034</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:<span class="number">555</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.xbean.spring.context.ResourceXmlApplicationContext.&lt;init&gt;(ResourceXmlApplicationContext.java:<span class="number">64</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.xbean.spring.context.ResourceXmlApplicationContext.&lt;init&gt;(ResourceXmlApplicationContext.java:<span class="number">52</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.xbean.XBeanBrokerFactory$<span class="number">1</span>.&lt;init&gt;(XBeanBrokerFactory.java:<span class="number">104</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.xbean.XBeanBrokerFactory.createApplicationContext(XBeanBrokerFactory.java:<span class="number">104</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.xbean.XBeanBrokerFactory.createBroker(XBeanBrokerFactory.java:<span class="number">67</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:<span class="number">71</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.broker.BrokerFactory.createBroker(BrokerFactory.java:<span class="number">54</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.command.StartCommand.runTask(StartCommand.java:<span class="number">87</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:<span class="number">63</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.command.ShellCommand.runTask(ShellCommand.java:<span class="number">154</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.command.AbstractCommand.execute(AbstractCommand.java:<span class="number">63</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.command.ShellCommand.main(ShellCommand.java:<span class="number">104</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:<span class="number">62</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:<span class="number">43</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> java.lang.reflect.Method.invoke(Method.java:<span class="number">498</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.Main.runTaskClass(Main.java:<span class="number">262</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.apache.activemq.console.Main.main(Main.java:<span class="number">115</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:<span class="number">62</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:<span class="number">43</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> java.lang.reflect.Method.invoke(Method.java:<span class="number">498</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:<span class="number">240</span>)</span><br><span class="line">jvm <span class="number">1</span>    |      <span class="built_in">at</span> java.lang.Thread.run(Thread.java:<span class="number">748</span>)</span><br><span class="line">wrapper  | &lt;-- Wrapper Stopped</span><br><span class="line">请按任意键继续. . .</span><br></pre></td></tr></tbody></table></figure><h5 id="整合-3"><a href="#整合-3" class="headerlink" title="整合"></a>整合</h5><p>​        做了这么多springboot整合第三方技术，已经摸到门路了，加坐标，做配置，调接口，直接开工</p><p><strong>步骤①</strong>：导入springboot整合ActiveMQ的starter</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-activemq<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：配置ActiveMQ的服务器地址</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">activemq:</span></span><br><span class="line">    <span class="attr">broker-url:</span> <span class="string">tcp://localhost:61616</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤③</strong>：使用JmsMessagingTemplate操作ActiveMQ</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageServiceActivemqImpl</span> <span class="keyword">implements</span> <span class="title class_">MessageService</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JmsMessagingTemplate messagingTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String id)</span> {</span><br><span class="line">        System.out.println(<span class="string">"待发送短信的订单已纳入处理队列，id："</span>+id);</span><br><span class="line">        messagingTemplate.convertAndSend(<span class="string">"order.queue.id"</span>,id);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">doMessage</span><span class="params">()</span> {</span><br><span class="line">        <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span> messagingTemplate.receiveAndConvert(<span class="string">"order.queue.id"</span>,String.class);</span><br><span class="line">        System.out.println(<span class="string">"已完成短信发送业务，id："</span>+id);</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        发送消息需要先将消息的类型转换成字符串，然后再发送，所以是convertAndSend，定义消息发送的位置，和具体的消息内容，此处使用id作为消息内容。</p><p>​        接收消息需要先将消息接收到，然后再转换成指定的数据类型，所以是receiveAndConvert，接收消息除了提供读取的位置，还要给出转换后的数据的具体类型。</p><p><strong>步骤④</strong>：使用消息监听器在服务器启动后，监听指定位置，当消息出现后，立即消费消息</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageListener</span> {</span><br><span class="line">    <span class="meta">@JmsListener(destination = "order.queue.id")</span></span><br><span class="line">    <span class="meta">@SendTo("order.other.queue.id")</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">receive</span><span class="params">(String id)</span>{</span><br><span class="line">        System.out.println(<span class="string">"已完成短信发送业务，id："</span>+id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"new:"</span>+id;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        使用注解@JmsListener定义当前方法监听ActiveMQ中指定名称的消息队列。</p><p>​        如果当前消息队列处理完还需要继续向下传递当前消息到另一个队列中使用注解@SendTo即可，这样即可构造连续执行的顺序消息队列。</p><p><strong>步骤⑤</strong>：切换消息模型由点对点模型到发布订阅模型，修改jms配置即可</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">activemq:</span></span><br><span class="line">    <span class="attr">broker-url:</span> <span class="string">tcp://localhost:61616</span></span><br><span class="line">  <span class="attr">jms:</span></span><br><span class="line">    <span class="attr">pub-sub-domain:</span> <span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure><p>​        pub-sub-domain默认值为false，即点对点模型，修改为true后就是发布订阅模型。</p><p><strong>总结</strong></p><ol><li>springboot整合ActiveMQ提供了JmsMessagingTemplate对象作为客户端操作消息队列</li><li>操作ActiveMQ需要配置ActiveMQ服务器地址，默认端口61616</li><li>企业开发时通常使用监听器来处理消息队列中的消息，设置监听器使用注解@JmsListener</li><li>配置jms的pub-sub-domain属性可以在点对点模型和发布订阅模型间切换消息模型</li></ol><h4 id="SpringBoot整合RabbitMQ"><a href="#SpringBoot整合RabbitMQ" class="headerlink" title="SpringBoot整合RabbitMQ"></a>SpringBoot整合RabbitMQ</h4><p>​        RabbitMQ是MQ产品中的目前较为流行的产品之一，它遵从AMQP协议。RabbitMQ的底层实现语言使用的是Erlang，所以安装RabbitMQ需要先安装Erlang。</p><p><strong>Erlang安装</strong></p><p>​        windows版安装包下载地址：<a href="https://www.erlang.org/downloads">https</a><a href="https://www.erlang.org/downloads">://www.erlang.org/downloads</a></p><p>​        下载完毕后得到exe安装文件，一键傻瓜式安装，安装完毕需要重启，需要重启，需要重启。</p><p>​        安装的过程中可能会出现依赖Windows组件的提示，根据提示下载安装即可，都是自动执行的，如下：</p><p><img src="/2023/07/26/springboot100000/image-20220228164851551.png" alt="image-20220228164851551"></p><p>​        Erlang安装后需要配置环境变量，否则RabbitMQ将无法找到安装的Erlang。需要配置项如下，作用等同JDK配置环境变量的作用。</p><ul><li>ERLANG_HOME</li><li>PATH</li></ul><h5 id="安装-4"><a href="#安装-4" class="headerlink" title="安装"></a>安装</h5><p>​        windows版安装包下载地址：<a href="https://rabbitmq.com/install-windows.html">https://</a><a href="https://rabbitmq.com/install-windows.html">rabbitmq.com/install-windows.html</a></p><p>​        下载完毕后得到exe安装文件，一键傻瓜式安装，安装完毕后会得到如下文件</p><img src="/2023/07/26/springboot100000/image-20220228165151524.png" alt="image-20220228165151524" style="zoom:67%;"><p><strong>启动服务器</strong></p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rabbitmq-service.bat <span class="built_in">start</span># 启动服务</span><br><span class="line">rabbitmq-service.bat stop# 停止服务</span><br><span class="line">rabbitmqctl status# 查看服务状态</span><br></pre></td></tr></tbody></table></figure><p>​        运行sbin目录下的rabbitmq-service.bat命令即可，start参数表示启动，stop参数表示退出，默认对外服务端口5672。</p><p>​        注意：启动rabbitmq的过程实际上是开启rabbitmq对应的系统服务，需要管理员权限方可执行。</p><p>​        说明：有没有感觉5672的服务端口很熟悉？activemq与rabbitmq有一个端口冲突问题，学习阶段无论操作哪一个？请确保另一个处于关闭状态。</p><p>​        说明：不喜欢命令行的小伙伴可以使用任务管理器中的服务页，找到RabbitMQ服务，使用鼠标右键菜单控制服务的启停。</p><img src="/2023/07/26/springboot100000/image-20220228170147193.png" alt="image-20220228170147193" style="zoom:67%;"><p><strong>访问web管理服务</strong></p><p>​        RabbitMQ也提供有web控制台服务，但是此功能是一个插件，需要先启用才可以使用。</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rabbitmq-plugins.bat list# 查看当前所有插件的运行状态</span><br><span class="line">rabbitmq-plugins.bat enable rabbitmq_management# 启动rabbitmq_management插件</span><br></pre></td></tr></tbody></table></figure><p>​        启动插件后可以在插件运行状态中查看是否运行，运行后通过浏览器即可打开服务后台管理界面</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">http://<span class="title">localhost</span>:15672</span></span><br></pre></td></tr></tbody></table></figure><p>​        web管理服务默认端口15672，访问后可以打开RabbitMQ的管理界面，如下：</p><p><img src="/2023/07/26/springboot100000/image-20220228170504793.png" alt="image-20220228170504793"></p><p>​        首先输入访问用户名和密码，初始化用户名和密码相同，均为：guest，成功登录后进入管理后台界面，如下：</p><p><img src="/2023/07/26/springboot100000/image-20220228170535261.png" alt="image-20220228170535261"></p><h5 id="整合-direct模型"><a href="#整合-direct模型" class="headerlink" title="整合(direct模型)"></a>整合(direct模型)</h5><p>​        RabbitMQ满足AMQP协议，因此不同的消息模型对应的制作不同，先使用最简单的direct模型开发。</p><p><strong>步骤①</strong>：导入springboot整合amqp的starter，amqp协议默认实现为rabbitmq方案</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：配置RabbitMQ的服务器地址</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤③</strong>：初始化直连模式系统设置</p><p>​        由于RabbitMQ不同模型要使用不同的交换机，因此需要先初始化RabbitMQ相关的对象，例如队列，交换机等</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RabbitConfigDirect</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">directQueue</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(<span class="string">"direct_queue"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">directQueue2</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(<span class="string">"direct_queue2"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DirectExchange <span class="title function_">directExchange</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DirectExchange</span>(<span class="string">"directExchange"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">bindingDirect</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(directQueue()).to(directExchange()).with(<span class="string">"direct"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">bindingDirect2</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(directQueue2()).to(directExchange()).with(<span class="string">"direct2"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        队列Queue与直连交换机DirectExchange创建后，还需要绑定他们之间的关系Binding，这样就可以通过交换机操作对应队列。</p><p><strong>步骤④</strong>：使用AmqpTemplate操作RabbitMQ</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageServiceRabbitmqDirectImpl</span> <span class="keyword">implements</span> <span class="title class_">MessageService</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AmqpTemplate amqpTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String id)</span> {</span><br><span class="line">        System.out.println(<span class="string">"待发送短信的订单已纳入处理队列（rabbitmq direct），id："</span>+id);</span><br><span class="line">        amqpTemplate.convertAndSend(<span class="string">"directExchange"</span>,<span class="string">"direct"</span>,id);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        amqp协议中的操作API接口名称看上去和jms规范的操作API接口很相似，但是传递参数差异很大。</p><p><strong>步骤⑤</strong>：使用消息监听器在服务器启动后，监听指定位置，当消息出现后，立即消费消息</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageListener</span> {</span><br><span class="line">    <span class="meta">@RabbitListener(queues = "direct_queue")</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive</span><span class="params">(String id)</span>{</span><br><span class="line">        System.out.println(<span class="string">"已完成短信发送业务(rabbitmq direct)，id："</span>+id);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        使用注解@RabbitListener定义当前方法监听RabbitMQ中指定名称的消息队列。</p><h5 id="整合-topic模型"><a href="#整合-topic模型" class="headerlink" title="整合(topic模型)"></a>整合(topic模型)</h5><p><strong>步骤①</strong>：同上</p><p><strong>步骤②</strong>：同上</p><p><strong>步骤③</strong>：初始化主题模式系统设置</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RabbitConfigTopic</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">topicQueue</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(<span class="string">"topic_queue"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">topicQueue2</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(<span class="string">"topic_queue2"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> TopicExchange <span class="title function_">topicExchange</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">TopicExchange</span>(<span class="string">"topicExchange"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">bindingTopic</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(topicQueue()).to(topicExchange()).with(<span class="string">"topic.*.id"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">bindingTopic2</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(topicQueue2()).to(topicExchange()).with(<span class="string">"topic.orders.*"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        主题模式支持routingKey匹配模式，*表示匹配一个单词，#表示匹配任意内容，这样就可以通过主题交换机将消息分发到不同的队列中，详细内容请参看RabbitMQ系列课程。    </p><table><thead><tr><th><strong>匹配键</strong></th><th><strong>topic.*.*</strong></th><th><strong>topic.#</strong></th></tr></thead><tbody><tr><td>topic.order.id</td><td>true</td><td>true</td></tr><tr><td>order.topic.id</td><td>false</td><td>false</td></tr><tr><td>topic.sm.order.id</td><td>false</td><td>true</td></tr><tr><td>topic.sm.id</td><td>false</td><td>true</td></tr><tr><td>topic.id.order</td><td>true</td><td>true</td></tr><tr><td>topic.id</td><td>false</td><td>true</td></tr><tr><td>topic.order</td><td>false</td><td>true</td></tr></tbody></table><p><strong>步骤④</strong>：使用AmqpTemplate操作RabbitMQ</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageServiceRabbitmqTopicImpl</span> <span class="keyword">implements</span> <span class="title class_">MessageService</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AmqpTemplate amqpTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String id)</span> {</span><br><span class="line">        System.out.println(<span class="string">"待发送短信的订单已纳入处理队列（rabbitmq topic），id："</span>+id);</span><br><span class="line">        amqpTemplate.convertAndSend(<span class="string">"topicExchange"</span>,<span class="string">"topic.orders.id"</span>,id);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        发送消息后，根据当前提供的routingKey与绑定交换机时设定的routingKey进行匹配，规则匹配成功消息才会进入到对应的队列中。</p><p><strong>步骤⑤</strong>：使用消息监听器在服务器启动后，监听指定队列</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageListener</span> {</span><br><span class="line">    <span class="meta">@RabbitListener(queues = "topic_queue")</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive</span><span class="params">(String id)</span>{</span><br><span class="line">        System.out.println(<span class="string">"已完成短信发送业务(rabbitmq topic 1)，id："</span>+id);</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@RabbitListener(queues = "topic_queue2")</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">receive2</span><span class="params">(String id)</span>{</span><br><span class="line">        System.out.println(<span class="string">"已完成短信发送业务(rabbitmq topic 22222222)，id："</span>+id);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        使用注解@RabbitListener定义当前方法监听RabbitMQ中指定名称的消息队列。</p><p><strong>总结</strong></p><ol><li>springboot整合RabbitMQ提供了AmqpTemplate对象作为客户端操作消息队列</li><li>操作ActiveMQ需要配置ActiveMQ服务器地址，默认端口5672</li><li>企业开发时通常使用监听器来处理消息队列中的消息，设置监听器使用注解@RabbitListener</li><li>RabbitMQ有5种消息模型，使用的队列相同，但是交换机不同。交换机不同，对应的消息进入的策略也不同</li></ol><h4 id="SpringBoot整合RocketMQ"><a href="#SpringBoot整合RocketMQ" class="headerlink" title="SpringBoot整合RocketMQ"></a>SpringBoot整合RocketMQ</h4><p>​        RocketMQ由阿里研发，后捐赠给apache基金会，目前是apache基金会顶级项目之一，也是目前市面上的MQ产品中较为流行的产品之一，它遵从AMQP协议。</p><h5 id="安装-5"><a href="#安装-5" class="headerlink" title="安装"></a>安装</h5><p>​        windows版安装包下载地址：<a href="https://rocketmq.apache.org/">https://rocketmq.apache.org</a><a href="https://rocketmq.apache.org/">/</a></p><p>​        下载完毕后得到zip压缩文件，解压缩即可使用，解压后得到如下文件</p><p><img src="/2023/07/26/springboot100000/image-20220228174453471.png" alt="image-20220228174453471"></p><p>​        RocketMQ安装后需要配置环境变量，具体如下：</p><ul><li>ROCKETMQ_HOME</li><li>PATH</li><li>NAMESRV_ADDR （建议）： 127.0.0.1:9876</li></ul><p>​        关于NAMESRV_ADDR对于初学者来说建议配置此项，也可以通过命令设置对应值，操作略显繁琐，建议配置。系统学习RocketMQ知识后即可灵活控制该项。</p><p><strong>RocketMQ工作模式</strong></p><p>​        在RocketMQ中，处理业务的服务器称为broker，生产者与消费者不是直接与broker联系的，而是通过命名服务器进行通信。broker启动后会通知命名服务器自己已经上线，这样命名服务器中就保存有所有的broker信息。当生产者与消费者需要连接broker时，通过命名服务器找到对应的处理业务的broker，因此命名服务器在整套结构中起到一个信息中心的作用。并且broker启动前必须保障命名服务器先启动。</p><img src="/2023/07/26/springboot100000/image-20220228175123790.png" alt="image-20220228175123790" style="zoom:80%;"><p><strong>启动服务器</strong></p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mqnamesrv# 启动命名服务器</span><br><span class="line">mqbroker# 启动broker</span><br></pre></td></tr></tbody></table></figure><p>​        运行bin目录下的mqnamesrv命令即可启动命名服务器，默认对外服务端口9876。</p><p>​        运行bin目录下的mqbroker命令即可启动broker服务器，如果环境变量中没有设置NAMESRV_ADDR则需要在运行mqbroker指令前通过set指令设置NAMESRV_ADDR的值，并且每次开启均需要设置此项。</p><p><strong>测试服务器启动状态</strong></p><p>​        RocketMQ提供有一套测试服务器功能的测试程序，运行bin目录下的tools命令即可使用。</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tools org.apache.rocketmq.example.quickstart.Producer# 生产消息</span><br><span class="line">tools org.apache.rocketmq.example.quickstart.Consumer# 消费消息</span><br></pre></td></tr></tbody></table></figure><h5 id="整合（异步消息）"><a href="#整合（异步消息）" class="headerlink" title="整合（异步消息）"></a>整合（异步消息）</h5><p><strong>步骤①</strong>：导入springboot整合RocketMQ的starter，此坐标不由springboot维护版本</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.rocketmq<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>rocketmq-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：配置RocketMQ的服务器地址</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rocketmq:</span></span><br><span class="line">  <span class="attr">name-server:</span> <span class="string">localhost:9876</span></span><br><span class="line">  <span class="attr">producer:</span></span><br><span class="line">    <span class="attr">group:</span> <span class="string">group_rocketmq</span></span><br></pre></td></tr></tbody></table></figure><p>​        设置默认的生产者消费者所属组group。</p><p><strong>步骤③</strong>：使用RocketMQTemplate操作RocketMQ</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageServiceRocketmqImpl</span> <span class="keyword">implements</span> <span class="title class_">MessageService</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RocketMQTemplate rocketMQTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String id)</span> {</span><br><span class="line">        System.out.println(<span class="string">"待发送短信的订单已纳入处理队列（rocketmq），id："</span>+id);</span><br><span class="line">        <span class="type">SendCallback</span> <span class="variable">callback</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SendCallback</span>() {</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onSuccess</span><span class="params">(SendResult sendResult)</span> {</span><br><span class="line">                System.out.println(<span class="string">"消息发送成功"</span>);</span><br><span class="line">            }</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onException</span><span class="params">(Throwable e)</span> {</span><br><span class="line">                System.out.println(<span class="string">"消息发送失败！！！！！"</span>);</span><br><span class="line">            }</span><br><span class="line">        };</span><br><span class="line">        rocketMQTemplate.asyncSend(<span class="string">"order_id"</span>,id,callback);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>​        使用asyncSend方法发送异步消息。</p><p><strong>步骤④</strong>：使用消息监听器在服务器启动后，监听指定位置，当消息出现后，立即消费消息</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@RocketMQMessageListener(topic = "order_id",consumerGroup = "group_rocketmq")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageListener</span> <span class="keyword">implements</span> <span class="title class_">RocketMQListener</span>&lt;String&gt; {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onMessage</span><span class="params">(String id)</span> {</span><br><span class="line">        System.out.println(<span class="string">"已完成短信发送业务(rocketmq)，id："</span>+id);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        RocketMQ的监听器必须按照标准格式开发，实现RocketMQListener接口，泛型为消息类型。</p><p>​        使用注解@RocketMQMessageListener定义当前类监听RabbitMQ中指定组、指定名称的消息队列。</p><p><strong>总结</strong></p><ol><li>springboot整合RocketMQ使用RocketMQTemplate对象作为客户端操作消息队列</li><li>操作RocketMQ需要配置RocketMQ服务器地址，默认端口9876</li><li>企业开发时通常使用监听器来处理消息队列中的消息，设置监听器使用注解@RocketMQMessageListener</li></ol><h4 id="SpringBoot整合Kafka"><a href="#SpringBoot整合Kafka" class="headerlink" title="SpringBoot整合Kafka"></a>SpringBoot整合Kafka</h4><h5 id="安装-6"><a href="#安装-6" class="headerlink" title="安装"></a>安装</h5><p>​        windows版安装包下载地址：<a href="https://kafka.apache.org/downloads">https://</a><a href="https://kafka.apache.org/downloads">kafka.apache.org/downloads</a></p><p>​        下载完毕后得到tgz压缩文件，使用解压缩软件解压缩即可使用，解压后得到如下文件</p><p><img src="/2023/07/26/springboot100000/image-20220228181442155.png" alt="image-20220228181442155"></p><p>​        建议使用windows版2.8.1版本。</p><p><strong>启动服务器</strong></p><p>​        kafka服务器的功能相当于RocketMQ中的broker，kafka运行还需要一个类似于命名服务器的服务。在kafka安装目录中自带一个类似于命名服务器的工具，叫做zookeeper，它的作用是注册中心，相关知识请到对应课程中学习。</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zookeeper-server-<span class="built_in">start</span>.bat ..\..\config\zookeeper.properties# 启动zookeeper</span><br><span class="line">kafka-server-<span class="built_in">start</span>.bat ..\..\config\server.properties# 启动kafka</span><br></pre></td></tr></tbody></table></figure><p>​        运行bin目录下的windows目录下的zookeeper-server-start命令即可启动注册中心，默认对外服务端口2181。</p><p>​        运行bin目录下的windows目录下的kafka-server-start命令即可启动kafka服务器，默认对外服务端口9092。</p><p><strong>创建主题</strong></p><p>​        和之前操作其他MQ产品相似，kakfa也是基于主题操作，操作之前需要先初始化topic。</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 创建topic</span><br><span class="line">kafka-topics.bat --create --zookeeper localhost:<span class="number">2181</span> --replication-factor <span class="number">1</span> --partitions <span class="number">1</span> --topic itheima</span><br><span class="line"># 查询topic</span><br><span class="line">kafka-topics.bat --zookeeper <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>:<span class="number">2181</span> --list</span><br><span class="line"># 删除topic</span><br><span class="line">kafka-topics.bat --delete --zookeeper localhost:<span class="number">2181</span> --topic itheima</span><br></pre></td></tr></tbody></table></figure><p><strong>测试服务器启动状态</strong></p><p>​        Kafka提供有一套测试服务器功能的测试程序，运行bin目录下的windows目录下的命令即可使用。</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">kafka-console-producer.bat --broker-list localhost:<span class="number">9092</span> --topic itheima# 测试生产消息</span><br><span class="line">kafka-console-consumer.bat --bootstrap-server localhost:<span class="number">9092</span> --topic itheima --from-beginning# 测试消息消费</span><br></pre></td></tr></tbody></table></figure><h5 id="整合-4"><a href="#整合-4" class="headerlink" title="整合"></a>整合</h5><p><strong>步骤①</strong>：导入springboot整合Kafka的starter，此坐标由springboot维护版本</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.kafka<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-kafka<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤②</strong>：配置Kafka的服务器地址</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">kafka:</span></span><br><span class="line">    <span class="attr">bootstrap-servers:</span> <span class="string">localhost:9092</span></span><br><span class="line">    <span class="attr">consumer:</span></span><br><span class="line">      <span class="attr">group-id:</span> <span class="string">order</span></span><br></pre></td></tr></tbody></table></figure><p>​        设置默认的生产者消费者所属组id。</p><p><strong>步骤③</strong>：使用KafkaTemplate操作Kafka</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageServiceKafkaImpl</span> <span class="keyword">implements</span> <span class="title class_">MessageService</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> KafkaTemplate&lt;String,String&gt; kafkaTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">sendMessage</span><span class="params">(String id)</span> {</span><br><span class="line">        System.out.println(<span class="string">"待发送短信的订单已纳入处理队列（kafka），id："</span>+id);</span><br><span class="line">        kafkaTemplate.send(<span class="string">"itheima2022"</span>,id);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        使用send方法发送消息，需要传入topic名称。</p><p><strong>步骤④</strong>：使用消息监听器在服务器启动后，监听指定位置，当消息出现后，立即消费消息</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MessageListener</span> {</span><br><span class="line">    <span class="meta">@KafkaListener(topics = "itheima2022")</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onMessage</span><span class="params">(ConsumerRecord&lt;String,String&gt; record)</span>{</span><br><span class="line">        System.out.println(<span class="string">"已完成短信发送业务(kafka)，id："</span>+record.value());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        使用注解@KafkaListener定义当前方法监听Kafka中指定topic的消息，接收到的消息封装在对象ConsumerRecord中，获取数据从ConsumerRecord对象中获取即可。</p><p><strong>总结</strong></p><ol><li><p>springboot整合Kafka使用KafkaTemplate对象作为客户端操作消息队列</p></li><li><p>操作Kafka需要配置Kafka服务器地址，默认端口9092</p></li><li><p>企业开发时通常使用监听器来处理消息队列中的消息，设置监听器使用注解@KafkaListener。接收消息保存在形参ConsumerRecord对象中</p></li></ol><h2 id="KF-6-监控"><a href="#KF-6-监控" class="headerlink" title="KF-6.监控"></a>KF-6.监控</h2><p>​        在说监控之前，需要回顾一下软件业的发展史。最早的软件完成一些非常简单的功能，代码不多，错误也少。随着软件功能的逐步完善，软件的功能变得越来越复杂，功能不能得到有效的保障，这个阶段出现了针对软件功能的检测，也就是软件测试。伴随着计算机操作系统的逐步升级，软件的运行状态也变得开始让人捉摸不透，出现了不稳定的状况。伴随着计算机网络的发展，程序也从单机状态切换成基于计算机网络的程序，应用于网络的程序开始出现，由于网络的不稳定性，程序的运行状态让使用者更加堪忧。互联网的出现彻底打破了软件的思维模式，随之而来的互联网软件就更加凸显出应对各种各样复杂的网络情况之下的弱小。计算机软件的运行状况已经成为了软件运行的一个大话题，针对软件的运行状况就出现了全新的思维，建立起了初代的软件运行状态监控。</p><p>​        什么是监控？就是通过软件的方式展示另一个软件的运行情况，运行的情况则通过各种各样的指标数据反馈给监控人员。例如网络是否顺畅、服务器是否在运行、程序的功能是否能够整百分百运行成功，内存是否够用，等等等等。</p><p>​        本章要讲解的监控就是对软件的运行情况进行监督，但是springboot程序与非springboot程序的差异还是很大的，为了方便监控软件的开发，springboot提供了一套功能接口，为开发者加速开发过程。</p><h3 id="KF-6-1-监控的意义"><a href="#KF-6-1-监控的意义" class="headerlink" title="KF-6-1.监控的意义"></a>KF-6-1.监控的意义</h3><p>​        对于现代的互联网程序来说，规模越来越大，功能越来越复杂，还要追求更好的客户体验，因此要监控的信息量也就比较大了。由于现在的互联网程序大部分都是基于微服务的程序，一个程序的运行需要若干个服务来保障，因此第一个要监控的指标就是服务是否正常运行，也就是<strong>监控服务状态是否处理宕机状态</strong>。一旦发现某个服务宕机了，必须马上给出对应的解决方案，避免整体应用功能受影响。其次，由于互联网程序服务的客户量是巨大的，当客户的请求在短时间内集中达到服务器后，就会出现各种程序运行指标的波动。比如内存占用严重，请求无法及时响应处理等，这就是第二个要监控的重要指标，<strong>监控服务运行指标</strong>。虽然软件是对外提供用户的访问需求，完成对应功能的，但是后台的运行是否平稳，是否出现了不影响客户使用的功能隐患，这些也是要密切监控的，此时就需要在不停机的情况下，监控系统运行情况，日志是一个不错的手段。如果在众多日志中找到开发者或运维人员所关注的日志信息，简单快速有效的过滤出要看的日志也是监控系统需要考虑的问题，这就是第三个要监控的指标，<strong>监控程序运行日志</strong>。虽然我们期望程序一直平稳运行，但是由于突发情况的出现，例如服务器被攻击、服务器内存溢出等情况造成了服务器宕机，此时当前服务不能满足使用需要，就要将其重启甚至关闭，如果快速控制服务器的启停也是程序运行过程中不可回避的问题，这就是第四个监控项，<strong>管理服务状态</strong>。以上这些仅仅是从大的方面来思考监控这个问题，还有很多的细节点，例如上线了一个新功能，定时提醒用户续费，这种功能不是上线后马上就运行的，但是当前功能是否真的启动，如果快速的查询到这个功能已经开启，这也是监控中要解决的问题，等等。看来监控真的是一项非常重要的工作。</p><p>​        通过上述描述，可以看出监控很重要。那具体的监控要如何开展呢？还要从实际的程序运行角度出发。比如现在有3个服务支撑着一个程序的运行，每个服务都有自己的运行状态。</p><img src="/2023/07/26/springboot100000/image-20220301093704396.png" alt="image-20220301093704396" style="zoom:50%;"><p>​        此时被监控的信息就要在三个不同的程序中去查询并展示，但是三个服务是服务于一个程序的运行的，如果不能合并到一个平台上展示，监控工作量巨大，而且信息对称性差，要不停的在三个监控端查看数据。如果将业务放大成30个，300个，3000个呢？看来必须有一个单独的平台，将多个被监控的服务对应的监控指标信息汇总在一起，这样更利于监控工作的开展。</p><img src="/2023/07/26/springboot100000/image-20220301094001896.png" alt="image-20220301094001896" style="zoom:50%;"><p>​        新的程序专门用来监控，新的问题就出现了，是被监控程序主动上报信息还是监控程序主动获取信息？如果监控程序不能主动获取信息，这就意味着监控程序有可能看到的是很久之前被监控程序上报的信息，万一被监控程序宕机了，监控程序就无法区分究竟是好久没法信息了，还是已经下线了。所以监控程序必须具有主动发起请求获取被监控服务信息的能力。</p><img src="/2023/07/26/springboot100000/image-20220301094259844.png" alt="image-20220301094259844" style="zoom:50%;"><p>​        如果监控程序要监控服务时，主动获取对方的信息。那监控程序如何知道哪些程序被自己监控呢？不可能在监控程序中设置我监控谁，这样互联网上的所有程序岂不是都可以被监控到，这样的话信息安全将无法得到保障。合理的做法只能是在被监控程序启动时上报监控程序，告诉监控程序你可以监控我了。看来需要在被监控程序端做主动上报的操作，这就要求被监控程序中配置对应的监控程序是谁。</p><img src="/2023/07/26/springboot100000/image-20220301094547748.png" alt="image-20220301094547748" style="zoom:50%;"><p>​        被监控程序可以提供各种各样的指标数据给监控程序看，但是每一个指标都代表着公司的机密信息，并不是所有的指标都可以给任何人看的，乃至运维人员，所以对被监控指标的是否开放出来给监控系统看，也需要做详细的设定。</p><p>​        以上描述的整个过程就是一个监控系统的基本流程。</p><p><strong>总结</strong></p><ol><li>监控是一个非常重要的工作，是保障程序正常运行的基础手段</li><li>监控的过程通过一个监控程序进行，它汇总所有被监控的程序的信息集中统一展示</li><li>被监控程序需要主动上报自己被监控，同时要设置哪些指标被监控</li></ol><p><strong>思考</strong></p><p>​        下面就要开始做监控了，新的问题就来了，监控程序怎么做呢？难道要自己写吗？肯定是不现实的，如何进行监控，咱们下节再讲。</p><h3 id="KF-6-2-可视化监控平台"><a href="#KF-6-2-可视化监控平台" class="headerlink" title="KF-6-2.可视化监控平台"></a>KF-6-2.可视化监控平台</h3><p>​        springboot抽取了大部分监控系统的常用指标，提出了监控的总思想。然后就有好心的同志根据监控的总思想，制作了一个通用性很强的监控系统，因为是基于springboot监控的核心思想制作的，所以这个程序被命名为<strong>Spring Boot Admin</strong>。</p><p>​        Spring Boot Admin，这是一个开源社区项目，用于管理和监控SpringBoot应用程序。这个项目中包含有客户端和服务端两部分，而监控平台指的就是服务端。我们做的程序如果需要被监控，将我们做的程序制作成客户端，然后配置服务端地址后，服务端就可以通过HTTP请求的方式从客户端获取对应的信息，并通过UI界面展示对应信息。</p><p>​        下面就来开发这套监控程序，先制作服务端，其实服务端可以理解为是一个web程序，收到一些信息后展示这些信息。</p><p><strong>服务端开发</strong></p><p><strong>步骤①</strong>：导入springboot admin对应的starter，版本与当前使用的springboot版本保持一致，并将其配置成web工程</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>de.codecentric<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-admin-starter-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        上述过程可以通过创建项目时使用勾选的形式完成。</p><img src="/2023/07/26/springboot100000/image-20220301102432817.png" alt="image-20220301102432817" style="zoom:50%;"><p><strong>步骤②</strong>：在引导类上添加注解@EnableAdminServer，声明当前应用启动后作为SpringBootAdmin的服务器使用</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableAdminServer</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Springboot25AdminServerApplication</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        SpringApplication.run(Springboot25AdminServerApplication.class, args);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        做到这里，这个服务器就开发好了，启动后就可以访问当前程序了，界面如下。</p><img src="/2023/07/26/springboot100000/image-20220301103028468.png" alt="image-20220301103028468" style="zoom: 50%;"><p>​        由于目前没有启动任何被监控的程序，所以里面什么信息都没有。下面制作一个被监控的客户端程序。</p><p><strong>客户端开发</strong></p><p>​        客户端程序开发其实和服务端开发思路基本相似，多了一些配置而已。</p><p><strong>步骤①</strong>：导入springboot admin对应的starter，版本与当前使用的springboot版本保持一致，并将其配置成web工程</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>de.codecentric<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-admin-starter-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        上述过程也可以通过创建项目时使用勾选的形式完成，不过一定要小心，端口配置成不一样的，否则会冲突。</p><p><strong>步骤②</strong>：设置当前客户端将信息上传到哪个服务器上，通过yml文件配置</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">boot:</span></span><br><span class="line">    <span class="attr">admin:</span></span><br><span class="line">      <span class="attr">client:</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">http://localhost:8080</span></span><br></pre></td></tr></tbody></table></figure><p>​        做到这里，这个客户端就可以启动了。启动后再次访问服务端程序，界面如下。</p><img src="/2023/07/26/springboot100000/image-20220301103838079.png" alt="image-20220301103838079" style="zoom: 50%;"><p>​        可以看到，当前监控了1个程序，点击进去查看详细信息。</p><img src="/2023/07/26/springboot100000/image-20220301103936386.png" alt="image-20220301103936386" style="zoom: 50%;"><p>​        由于当前没有设置开放哪些信息给监控服务器，所以目前看不到什么有效的信息。下面需要做两组配置就可以看到信息了。</p><ol><li><p>开放指定信息给服务器看</p></li><li><p>允许服务器以HTTP请求的方式获取对应的信息</p><p>配置如下：</p></li></ol><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">80</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">boot:</span></span><br><span class="line">    <span class="attr">admin:</span></span><br><span class="line">      <span class="attr">client:</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">http://localhost:8080</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoint:</span></span><br><span class="line">    <span class="attr">health:</span></span><br><span class="line">      <span class="attr">show-details:</span> <span class="string">always</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">"*"</span></span><br></pre></td></tr></tbody></table></figure><p>​        上述配置对于初学者来说比较容易混淆。简单解释一下，到下一节再做具体的讲解。springbootadmin的客户端默认开放了13组信息给服务器，但是这些信息除了一个之外，其他的信息都不让通过HTTP请求查看。所以你看到的信息基本上就没什么内容了，只能看到一个内容，就是下面的健康信息。</p><img src="/2023/07/26/springboot100000/image-20220301104742563.png" alt="image-20220301104742563" style="zoom: 50%;"><p>​        但是即便如此我们看到健康信息中也没什么内容，原因在于健康信息中有一些信息描述了你当前应用使用了什么技术等信息，如果无脑的对外暴露功能会有安全隐患。通过配置就可以开放所有的健康信息明细查看了。</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoint:</span></span><br><span class="line">    <span class="attr">health:</span></span><br><span class="line">      <span class="attr">show-details:</span> <span class="string">always</span></span><br></pre></td></tr></tbody></table></figure><p>​        健康明细信息如下：</p><img src="/2023/07/26/springboot100000/image-20220301105116554.png" alt="image-20220301105116554" style="zoom: 50%;"><p>​        目前除了健康信息，其他信息都查阅不了。原因在于其他12种信息是默认不提供给服务器通过HTTP请求查阅的，所以需要开启查阅的内容项，使用*表示查阅全部。记得带引号。</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">endpoints:</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">exposure:</span></span><br><span class="line">      <span class="attr">include:</span> <span class="string">"*"</span></span><br></pre></td></tr></tbody></table></figure><p>​        配置后再刷新服务器页面，就可以看到所有的信息了。</p><img src="/2023/07/26/springboot100000/image-20220301105554494.png" alt="image-20220301105554494" style="zoom: 50%;"><p>​        以上界面中展示的信息量就非常大了，包含了13组信息，有性能指标监控，加载的bean列表，加载的系统属性，日志的显示控制等等。</p><p><strong>配置多个客户端</strong></p><p>​        可以通过配置客户端的方式在其他的springboot程序中添加客户端坐标，这样当前服务器就可以监控多个客户端程序了。每个客户端展示不同的监控信息。</p><img src="/2023/07/26/springboot100000/image-20220301110352170.png" alt="image-20220301110352170" style="zoom: 50%;"><p>​        进入监控面板，如果你加载的应用具有功能，在监控面板中可以看到3组信息展示的与之前加载的空工程不一样。</p><ul><li>类加载面板中可以查阅到开发者自定义的类，如左图</li></ul><p>​                        <img src="/2023/07/26/springboot100000/image-20220301161246835.png" alt="image-20220301161246835" style="zoom:33%;"><img src="/2023/07/26/springboot100000/image-20220301161949431.png" alt="image-20220301161949431" style="zoom:33%;"></p><ul><li>映射中可以查阅到当前应用配置的所有请求</li></ul><p>​                        <img src="/2023/07/26/springboot100000/image-20220301161418791.png" alt="image-20220301161418791" style="zoom: 33%;"><img src="/2023/07/26/springboot100000/image-20220301162008737.png" alt="image-20220301162008737" style="zoom:33%;"></p><ul><li>性能指标中可以查阅当前应用独有的请求路径统计数据</li></ul><p>​                        <img src="/2023/07/26/springboot100000/image-20220301161906949.png" alt="image-20220301161906949" style="zoom: 33%;"><img src="/2023/07/26/springboot100000/image-20220301162040670.png" alt="image-20220301162040670" style="zoom: 33%;"></p><p><strong>总结</strong></p><ol><li>开发监控服务端需要导入坐标，然后在引导类上添加注解@EnableAdminServer，并将其配置成web程序即可</li><li>开发被监控的客户端需要导入坐标，然后配置服务端服务器地址，并做开放指标的设定即可</li><li>在监控平台中可以查阅到各种各样被监控的指标，前提是客户端开放了被监控的指标</li></ol><p><strong>思考</strong></p><p>​        之前说过，服务端要想监控客户端，需要主动的获取到对应信息并展示出来。但是目前我们并没有在客户端开发任何新的功能，但是服务端确可以获取监控信息，谁帮我们做的这些功能呢？咱们下一节再讲。</p><h3 id="KF-6-3-监控原理"><a href="#KF-6-3-监控原理" class="headerlink" title="KF-6-3.监控原理"></a>KF-6-3.监控原理</h3><p>​        通过查阅监控中的映射指标，可以看到当前系统中可以运行的所有请求路径，其中大部分路径以/actuator开头</p><img src="/2023/07/26/springboot100000/image-20220301170214076.png" alt="image-20220301170214076" style="zoom: 50%;"><p>​        首先这些请求路径不是开发者自己编写的，其次这个路径代表什么含义呢？既然这个路径可以访问，就可以通过浏览器发送该请求看看究竟可以得到什么信息。</p><p><img src="/2023/07/26/springboot100000/image-20220301170723057.png" alt="image-20220301170723057"></p><p>​        通过发送请求，可以得到一组json信息，如下</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"_links"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"self"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"beans"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator/beans"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"caches-cache"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator/caches/{cache}"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"caches"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator/caches"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"health"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator/health"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"health-path"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator/health/{*path}"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"info"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator/info"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"conditions"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator/conditions"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"shutdown"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator/shutdown"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"configprops"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator/configprops"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"configprops-prefix"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator/configprops/{prefix}"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"env"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator/env"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"env-toMatch"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator/env/{toMatch}"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"loggers"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator/loggers"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"loggers-name"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator/loggers/{name}"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"heapdump"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator/heapdump"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"threaddump"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator/threaddump"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"metrics-requiredMetricName"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator/metrics/{requiredMetricName}"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"metrics"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator/metrics"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"scheduledtasks"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator/scheduledtasks"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"mappings"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"href"</span><span class="punctuation">:</span> <span class="string">"http://localhost:81/actuator/mappings"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"templated"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">        <span class="punctuation">}</span></span><br><span class="line">    <span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>​        其中每一组数据都有一个请求路径，而在这里请求路径中有之前看到过的health，发送此请求又得到了一组信息</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"status"</span><span class="punctuation">:</span> <span class="string">"UP"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"components"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"diskSpace"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"status"</span><span class="punctuation">:</span> <span class="string">"UP"</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">"details"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">                <span class="attr">"total"</span><span class="punctuation">:</span> <span class="number">297042808832</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"free"</span><span class="punctuation">:</span> <span class="number">72284409856</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"threshold"</span><span class="punctuation">:</span> <span class="number">10485760</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">"exists"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">            <span class="punctuation">}</span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"ping"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">            <span class="attr">"status"</span><span class="punctuation">:</span> <span class="string">"UP"</span></span><br><span class="line">        <span class="punctuation">}</span></span><br><span class="line">    <span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>​        当前信息与监控面板中的数据存在着对应关系</p><img src="/2023/07/26/springboot100000/image-20220301171025615.png" alt="image-20220301171025615" style="zoom:50%;"><p>​        原来监控中显示的信息实际上是通过发送请求后得到json数据，然后展示出来。按照上述操作，可以发送更多的以/actuator开头的链接地址，获取更多的数据，这些数据汇总到一起组成了监控平台显示的所有数据。</p><p>​        到这里我们得到了一个核心信息，监控平台中显示的信息实际上是通过对被监控的应用发送请求得到的。那这些请求谁开发的呢？打开被监控应用的pom文件，其中导入了springboot admin的对应的client，在这个资源中导入了一个名称叫做actuator的包。被监控的应用之所以可以对外提供上述请求路径，就是因为添加了这个包。</p><p><img src="/2023/07/26/springboot100000/image-20220301171437817.png" alt="image-20220301171437817"></p><p>​        这个actuator是什么呢？这就是本节要讲的核心内容，监控的端点。</p><p>​        Actuator，可以称为端点，描述了一组监控信息，SpringBootAdmin提供了多个内置端点，通过访问端点就可以获取对应的监控信息，也可以根据需要自定义端点信息。通过发送请求路劲**/actuator<strong>可以访问应用所有端点信息，如果端点中还有明细信息可以发送请求</strong>/actuator/端点名称**来获取详细信息。以下列出了所有端点信息说明：</p><table><thead><tr><th>ID</th><th>描述</th><th>默认启用</th></tr></thead><tbody><tr><td>auditevents</td><td>暴露当前应用程序的审计事件信息。</td><td>是</td></tr><tr><td>beans</td><td>显示应用程序中所有 Spring bean 的完整列表。</td><td>是</td></tr><tr><td>caches</td><td>暴露可用的缓存。</td><td>是</td></tr><tr><td>conditions</td><td>显示在配置和自动配置类上评估的条件以及它们匹配或不匹配的原因。</td><td>是</td></tr><tr><td>configprops</td><td>显示所有 @ConfigurationProperties 的校对清单。</td><td>是</td></tr><tr><td>env</td><td>暴露 Spring ConfigurableEnvironment 中的属性。</td><td>是</td></tr><tr><td>flyway</td><td>显示已应用的 Flyway 数据库迁移。</td><td>是</td></tr><tr><td>health</td><td>显示应用程序健康信息</td><td>是</td></tr><tr><td>httptrace</td><td>显示 HTTP 追踪信息（默认情况下，最后 100 个  HTTP 请求/响应交换）。</td><td>是</td></tr><tr><td>info</td><td>显示应用程序信息。</td><td>是</td></tr><tr><td>integrationgraph</td><td>显示 Spring Integration 图。</td><td>是</td></tr><tr><td>loggers</td><td>显示和修改应用程序中日志记录器的配置。</td><td>是</td></tr><tr><td>liquibase</td><td>显示已应用的 Liquibase 数据库迁移。</td><td>是</td></tr><tr><td>metrics</td><td>显示当前应用程序的指标度量信息。</td><td>是</td></tr><tr><td>mappings</td><td>显示所有 @RequestMapping 路径的整理清单。</td><td>是</td></tr><tr><td>scheduledtasks</td><td>显示应用程序中的调度任务。</td><td>是</td></tr><tr><td>sessions</td><td>允许从 Spring Session 支持的会话存储中检索和删除用户会话。当使用 Spring Session 的响应式 Web 应用程序支持时不可用。</td><td>是</td></tr><tr><td>shutdown</td><td>正常关闭应用程序。</td><td>否</td></tr><tr><td>threaddump</td><td>执行线程 dump。</td><td>是</td></tr><tr><td>heapdump</td><td>返回一个 hprof 堆 dump 文件。</td><td>是</td></tr><tr><td>jolokia</td><td>通过 HTTP 暴露 JMX bean（当  Jolokia 在 classpath 上时，不适用于 WebFlux）。</td><td>是</td></tr><tr><td>logfile</td><td>返回日志文件的内容（如果已设置 logging.file 或 logging.path 属性）。支持使用 HTTP Range 头来检索部分日志文件的内容。</td><td>是</td></tr><tr><td>prometheus</td><td>以可以由 Prometheus 服务器抓取的格式暴露指标。</td><td>是</td></tr></tbody></table><p>​        上述端点每一项代表被监控的指标，如果对外开放则监控平台可以查询到对应的端点信息，如果未开放则无法查询对应的端点信息。通过配置可以设置端点是否对外开放功能。使用enable属性控制端点是否对外开放。其中health端点为默认端点，不能关闭。</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoint:</span></span><br><span class="line">    <span class="attr">health:</span><span class="comment"># 端点名称</span></span><br><span class="line">      <span class="attr">show-details:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">info:</span><span class="comment"># 端点名称</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span><span class="comment"># 是否开放</span></span><br></pre></td></tr></tbody></table></figure><p>​        为了方便开发者快速配置端点，springboot admin设置了13个较为常用的端点作为默认开放的端点，如果需要控制默认开放的端点的开放状态，可以通过配置设置，如下：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">enabled-by-default:</span> <span class="literal">true</span><span class="comment"># 是否开启默认端点，默认值true</span></span><br></pre></td></tr></tbody></table></figure><p>​        上述端点开启后，就可以通过端点对应的路径查看对应的信息了。但是此时还不能通过HTTP请求查询此信息，还需要开启通过HTTP请求查询的端点名称，使用“*”可以简化配置成开放所有端点的WEB端HTTP请求权限。</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">"*"</span></span><br></pre></td></tr></tbody></table></figure><p>​        整体上来说，对于端点的配置有两组信息，一组是endpoints开头的，对所有端点进行配置，一组是endpoint开头的，对具体端点进行配置。</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoint:</span><span class="comment"># 具体端点的配置</span></span><br><span class="line">    <span class="attr">health:</span></span><br><span class="line">      <span class="attr">show-details:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">info:</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">endpoints:</span><span class="comment"># 全部端点的配置</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">"*"</span></span><br><span class="line">    <span class="attr">enabled-by-default:</span> <span class="literal">true</span></span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li><p>被监控客户端通过添加actuator的坐标可以对外提供被访问的端点功能</p></li><li><p>端点功能的开放与关闭可以通过配置进行控制</p></li><li><p>web端默认无法获取所有端点信息，通过配置开放端点功能</p></li></ol><h3 id="KF-6-4-自定义监控指标"><a href="#KF-6-4-自定义监控指标" class="headerlink" title="KF-6-4.自定义监控指标"></a>KF-6-4.自定义监控指标</h3><p>​        端点描述了被监控的信息，除了系统默认的指标，还可以自行添加显示的指标，下面就通过3种不同的端点的指标自定义方式来学习端点信息的二次开发。</p><p><strong>INFO端点</strong></p><p>​        info端点描述了当前应用的基本信息，可以通过两种形式快速配置info端点的信息</p><ul><li><p>配置形式</p><p>在yml文件中通过设置info节点的信息就可以快速配置端点信息</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">info:</span></span><br><span class="line">  <span class="attr">appName:</span> <span class="string">@project.artifactId@</span></span><br><span class="line">  <span class="attr">version:</span> <span class="string">@project.version@</span></span><br><span class="line">  <span class="attr">company:</span> <span class="string">传智教育</span></span><br><span class="line">  <span class="attr">author:</span> <span class="string">itheima</span></span><br></pre></td></tr></tbody></table></figure><p>配置完毕后，对应信息显示在监控平台上</p><img src="/2023/07/26/springboot100000/image-20220301174133248.png" alt="image-20220301174133248" style="zoom:50%;"><p>也可以通过请求端点信息路径获取对应json信息</p><img src="/2023/07/26/springboot100000/image-20220301174241310.png" alt="image-20220301174241310" style="zoom:50%;"></li><li><p>编程形式</p><p>通过配置的形式只能添加固定的数据，如果需要动态数据还可以通过配置bean的方式为info端点添加信息，此信息与配置信息共存</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InfoConfig</span> <span class="keyword">implements</span> <span class="title class_">InfoContributor</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contribute</span><span class="params">(Info.Builder builder)</span> {</span><br><span class="line">        builder.withDetail(<span class="string">"runTime"</span>,System.currentTimeMillis());<span class="comment">//添加单个信息</span></span><br><span class="line">        <span class="type">Map</span> <span class="variable">infoMap</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        infoMap.put(<span class="string">"buildTime"</span>,<span class="string">"2006"</span>);</span><br><span class="line">        builder.withDetails(infoMap);<span class="comment">//添加一组信息</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure></li></ul><p><strong>Health端点</strong></p><p>​        health端点描述当前应用的运行健康指标，即应用的运行是否成功。通过编程的形式可以扩展指标信息。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HealthConfig</span> <span class="keyword">extends</span> <span class="title class_">AbstractHealthIndicator</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doHealthCheck</span><span class="params">(Health.Builder builder)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">condition</span> <span class="operator">=</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span>(condition) {</span><br><span class="line">            builder.status(Status.UP);<span class="comment">//设置运行状态为启动状态</span></span><br><span class="line">            builder.withDetail(<span class="string">"runTime"</span>, System.currentTimeMillis());</span><br><span class="line">            <span class="type">Map</span> <span class="variable">infoMap</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">            infoMap.put(<span class="string">"buildTime"</span>, <span class="string">"2006"</span>);</span><br><span class="line">            builder.withDetails(infoMap);</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            builder.status(Status.OUT_OF_SERVICE);<span class="comment">//设置运行状态为不在服务状态</span></span><br><span class="line">            builder.withDetail(<span class="string">"上线了吗？"</span>,<span class="string">"你做梦"</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        当任意一个组件状态不为UP时，整体应用对外服务状态为非UP状态。</p><img src="/2023/07/26/springboot100000/image-20220301174751845.png" alt="image-20220301174751845" style="zoom:50%;"><p><strong>Metrics端点</strong></p><p>​        metrics端点描述了性能指标，除了系统自带的监控性能指标，还可以自定义性能指标。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;BookDao, Book&gt; <span class="keyword">implements</span> <span class="title class_">IBookService</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> BookDao bookDao;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Counter counter;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BookServiceImpl</span><span class="params">(MeterRegistry meterRegistry)</span>{</span><br><span class="line">        counter = meterRegistry.counter(<span class="string">"用户付费操作次数："</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">delete</span><span class="params">(Integer id)</span> {</span><br><span class="line">        <span class="comment">//每次执行删除业务等同于执行了付费业务</span></span><br><span class="line">        counter.increment();</span><br><span class="line">        <span class="keyword">return</span> bookDao.deleteById(id) &gt; <span class="number">0</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        在性能指标中就出现了自定义的性能指标监控项</p><img src="/2023/07/26/springboot100000/image-20220301175101812.png" alt="image-20220301175101812" style="zoom:50%;"><p><strong>自定义端点</strong></p><p>​        可以根据业务需要自定义端点，方便业务监控</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Endpoint(id="pay",enableByDefault = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PayEndpoint</span> {</span><br><span class="line">    <span class="meta">@ReadOperation</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getPay</span><span class="params">()</span>{</span><br><span class="line">        <span class="type">Map</span> <span class="variable">payMap</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HashMap</span>();</span><br><span class="line">        payMap.put(<span class="string">"level 1"</span>,<span class="string">"300"</span>);</span><br><span class="line">        payMap.put(<span class="string">"level 2"</span>,<span class="string">"291"</span>);</span><br><span class="line">        payMap.put(<span class="string">"level 3"</span>,<span class="string">"666"</span>);</span><br><span class="line">        <span class="keyword">return</span> payMap;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        由于此端点数据spirng boot admin无法预知该如何展示，所以通过界面无法看到此数据，通过HTTP请求路径可以获取到当前端点的信息，但是需要先开启当前端点对外功能，或者设置当前端点为默认开发的端点。</p><img src="/2023/07/26/springboot100000/image-20220301175355482.png" alt="image-20220301175355482" style="zoom:50%;"><p><strong>总结</strong></p><ol><li>端点的指标可以自定义，但是每种不同的指标根据其功能不同，自定义方式不同</li><li>info端点通过配置和编程的方式都可以添加端点指标</li><li>health端点通过编程的方式添加端点指标，需要注意要为对应指标添加启动状态的逻辑设定</li><li>metrics指标通过在业务中添加监控操作设置指标</li><li>可以自定义端点添加更多的指标</li></ol><h2 id="开发实用篇完结"><a href="#开发实用篇完结" class="headerlink" title="开发实用篇完结"></a>开发实用篇完结</h2><p>​        开发实用篇到这里就暂时完结了，在开发实用篇中我们讲解了大量的第三方技术的整合方案，选择的方案都是市面上比较流行的常用方案，还有一些国内流行度较低的方案目前还没讲，留到番外篇中慢慢讲吧。</p><p>​        整体开发实用篇中讲解的内容可以分为两大类知识：实用性知识与经验性知识。</p><p>​        实用性知识就是新知识了，springboot整合各种技术，每种技术整合中都有一些特殊操作，整体来说其实就是三句话。加坐标做配置调接口。经验性知识是对前面两篇中出现的一些知识的补充，在学习基础篇时如果将精力放在这些东西上就有点学偏了，容易钻牛角尖，放到实用开发篇中结合实际开发说一些不常见的但是对系统功能又危害的操作解决方案，提升理解。</p><p>​        开发实用篇做到这里就告一段落，下面就要着手准备原理篇了。市面上很多课程原理篇讲的过于高深莫测，在新手还没明白123的时候就开始讲微积分了，着实让人看了着急。至于原理篇我讲成什么样子？一起期待吧。</p><h1 id="SpringBoot原理篇"><a href="#SpringBoot原理篇" class="headerlink" title="SpringBoot原理篇"></a>SpringBoot原理篇</h1><p>​        在学习前面三篇的时候，好多小伙伴一直在B站评论区嚷嚷着期待原理篇，今天可以正式的宣布了，他来了他来了他脚踏祥云进来了（此处请自行脑补BGM）。</p><p>​        其实从本人的角度出发，看了这么多学习java的小伙伴的学习过程，个人观点，不建议小伙伴过早的去研究技术的原理。原因有二：一，<strong>先应用熟练</strong>，<strong>培养技术应用的条件反射</strong>，然后再学原理。大把的学习者天天还纠结于这里少写一个这，那里少写一个那，程序都跑不下去，要啥原理，要啥自行车。这里要说一句啊，懂不懂啥意思那不叫原理，原理是抽象到顶层设计层面的东西。知道为什么写这句话，知道错误的原因和懂原理是两码事。二， <strong>原理真不是看源码</strong>，源码只能称作原理的落地实现方式，当好的落地实现方式出现后，就会有新旧版本的迭代，底层实现方式也会伴随着更新升级。但是原理不变，只是找到了更好的实现最初目标的路径。一个好的课程，一位好的老师，不会用若干行云里雾里的源代码把学习者带到沟里，然后爬不出来，深陷泥潭。一边沮丧的看着源码，一边舔着老师奉其为大神，这就叫不干人事。原理就应该使用最通俗易懂的语言，把设计思想讲出来，至于看源码，只是因为目前的技术原创人员只想到了当前这种最笨的设计方案，还没有更好的。比如spirng程序，写起来很费劲，springboot出来以后就简单轻松了很多，实现方案变了，原理不变。但凡你想通过下面的课程学习去读懂若干行代码，然后特别装逼的告诉自己，我懂原理了。我只能告诉你，你选了一条成本最高的路线，看源码仅仅是验证原理，源码仅对应程序流程，不对应原理。原理是思想级的，不是代码级的，原理是原本的道理。</p><p>​        springboot技术本身就是为了加速spring程序的开发的，可以大胆的说，springboot技术没有自己的原理层面的设计，仅仅是实现方案进行了改进。将springboot定位成工具，你就不会去想方设法的学习其原理了。就像是将木头分割成若干份，我们可以用斧子，用锯子，用刀，用火烧或者一脚踹断它，这些都是方式方法，而究其本质底层原理是植物纤维的组织方式，研究完这个，你再看前述的各种工具，都是基于这个原理在说如何变更破坏这种植物纤维的方式。所以不要一张嘴说了若干种技术，然后告诉自己，这就是spirngboot的原理。没有的事，springboot作为一款工具，压根就没有原理。我们下面要学习的其实就是spirngboot程序的工作流程。</p><p>​        下面就开始学习原理篇，因为没有想出来特别好的名字，所以还是先称作原理篇吧。原理篇中包含如下内容：</p><ul><li>自动配置工作流程</li><li>自定义starter开发</li><li>springboot程序启动流程</li></ul><p>​        下面开启第一部分自动配置工作流程的学习</p><h2 id="YL-1-自动配置工作流程"><a href="#YL-1-自动配置工作流程" class="headerlink" title="YL-1.自动配置工作流程"></a>YL-1.自动配置工作流程</h2><p>​        自动配置是springboot技术非常好用的核心因素，前面学习了这么多种技术的整合，每一个都离不开自动配置。不过在学习自动配置的时候，需要你对spring容器如何进行bean管理的过程非常熟悉才行，所以这里需要先复习一下有关spring技术中bean加载相关的知识。方式方法很多，逐一快速复习一下，查漏补缺。不过这里需要声明一点，这里列出的bean的加载方式仅仅应用于后面课程的学习，并不是所有的spring加载bean的方式。跟着我的步伐一种一种的复习，他们这些方案之间有千丝万缕的关系，顺着看完，你就懂自动配置是怎么回事了。</p><h3 id="YL-1-1-bean的加载方式"><a href="#YL-1-1-bean的加载方式" class="headerlink" title="YL-1-1.bean的加载方式"></a>YL-1-1.bean的加载方式</h3><p>​        关于bean的加载方式，spring提供了各种各样的形式。因为spring管理bean整体上来说就是由spring维护对象的生命周期，所以bean的加载可以从大的方面划分成2种形式。已知类并交给spring管理，和已知类名并交给spring管理。有什么区别？一个给.class，一个给类名字符串。内部其实都一样，都是通过spring的BeanDefinition对象初始化spring的bean。如果前面这句话看起来有障碍，可以去复习一下spring的相关知识。B站中有我尊敬的满一航老师录制的spring高级课程，链接地址如下，欢迎大家捧场，记得一键三连哦。</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">https://<span class="title">www.bilibili.com</span>/<span class="title">video</span>/<span class="title">BV1P44y1N7QG</span></span></span><br></pre></td></tr></tbody></table></figure><h4 id="方式一：配置文件-lt-bean-gt-标签"><a href="#方式一：配置文件-lt-bean-gt-标签" class="headerlink" title="方式一：配置文件+<bean/>标签"></a>方式一：配置文件+<code>&lt;bean/&gt;</code>标签</h4><p>​        最高端的食材往往只需要最简单的烹饪方法，搞错了，再来。最初级的bean的加载方式其实可以直击spring管控bean的核心思想，就是提供类名，然后spring就可以管理了。所以第一种方式就是给出bean的类名，至于内部嘛就是反射机制加载成class，然后，就没有然后了，拿到了class你就可以搞定一切了。如果这句话听不太懂，请这些小盆友转战java基础高级部分复习一下反射相关知识。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--xml方式声明自己开发的bean--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"cat"</span> <span class="attr">class</span>=<span class="string">"Cat"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"Dog"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--xml方式声明第三方开发的bean--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"dataSource"</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.alibaba.druid.pool.DruidDataSource"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h4 id="方式二：配置文件扫描-注解定义bean"><a href="#方式二：配置文件扫描-注解定义bean" class="headerlink" title="方式二：配置文件扫描+注解定义bean"></a>方式二：配置文件扫描+注解定义bean</h4><p>​        由于方式一种需要将spring管控的bean全部写在xml文件中，对于程序员来说非常不友好，所以就有了第二种方式。哪一个类要受到spring管控加载成bean，就在这个类的上面加一个注解，还可以顺带起一个bean的名字（id）。这里可以使用的注解有@Component以及三个衍生注解@Service、@Controller、@Repository。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component("tom")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Cat</span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Mouse</span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        当然，由于我们无法在第三方提供的技术源代码中去添加上述4个注解，因此当你需要加载第三方开发的bean的时候可以使用下列方式定义注解式的bean。@Bean定义在一个方法上方，当前方法的返回值就可以交给spring管控，记得这个方法所在的类一定要定义在@Component修饰的类中，有人会说不是@Configuration吗？建议把spring注解开发相关课程学习一下，就不会有这个疑问了。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DbConfig</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DruidDataSource <span class="title function_">dataSource</span><span class="params">()</span>{</span><br><span class="line">        <span class="type">DruidDataSource</span> <span class="variable">ds</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">        <span class="keyword">return</span> ds;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        上面提供的仅仅是bean的声明，spring并没有感知到这些东西，像极了上课积极回答问题的你，手举的非常高，可惜老师都没有往你的方向看上一眼。想让spring感知到这些积极的小伙伴，必须设置spring去检查这些类，看他们是否贴标签，想当积极分子。可以通过下列xml配置设置spring去检查哪些包，发现定了对应注解，就将对应的类纳入spring管控范围，声明成bean。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">xsi:schemaLocation</span>=<span class="string">"</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/beans/spring-beans.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context</span></span></span><br><span class="line"><span class="string"><span class="tag">       http://www.springframework.org/schema/context/spring-context.xsd</span></span></span><br><span class="line"><span class="string"><span class="tag">    "</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--指定扫描加载bean的位置--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"com.itheima.bean,com.itheima.config"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        方式二声明bean的方式是目前企业中较为常见的bean的声明方式，但是也有缺点。方式一中，通过一个配置文件，你可以查阅当前spring环境中定义了多少个或者说多少种bean，但是方式二没有任何一个地方可以查阅整体信息，只有当程序运行起来才能感知到加载了多少个bean。</p><h4 id="方式三：注解方式声明配置类"><a href="#方式三：注解方式声明配置类" class="headerlink" title="方式三：注解方式声明配置类"></a>方式三：注解方式声明配置类</h4><p>​        方式二已经完美的简化了bean的声明，以后再也不用写茫茫多的配置信息了。仔细观察xml配置文件，会发现这个文件中只剩了扫描包这句话，于是就有人提出，使用java类替换掉这种固定格式的配置，所以下面这种格式就出现了。严格意义上讲不能算全新的方式，但是由于此种开发形式是企业级开发中的主流形式，所以单独独立出来做成一种方式。嗯……，怎么说呢？方式二和方式三其实差别还是挺大的，番外篇找个时间再聊吧。</p><p>​        定义一个类并使用@ComponentScan替代原始xml配置中的包扫描这个动作，其实功能基本相同。为什么说基本，还是有差别的。先卖个关子吧，番外篇再聊。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ComponentScan({"com.itheima.bean","com.itheima.config"})</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig3</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DogFactoryBean <span class="title function_">dog</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DogFactoryBean</span>();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h5 id="使用FactroyBean接口"><a href="#使用FactroyBean接口" class="headerlink" title="使用FactroyBean接口"></a>使用FactroyBean接口</h5><p>​        补充一个小知识，spring提供了一个接口FactoryBean，也可以用于声明bean，只不过实现了FactoryBean接口的类造出来的对象不是当前类的对象，而是FactoryBean接口泛型指定类型的对象。如下列，造出来的bean并不是DogFactoryBean，而是Dog。有什么用呢？可以在对象初始化前做一些事情，下例中的注释位置就是让你自己去扩展要做的其他事情的。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DogFactoryBean</span> <span class="keyword">implements</span> <span class="title class_">FactoryBean</span>&lt;Dog&gt; {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Dog <span class="title function_">getObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="type">Dog</span> <span class="variable">d</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dog</span>();</span><br><span class="line">        <span class="comment">//.........</span></span><br><span class="line">        <span class="keyword">return</span> d;</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Class&lt;?&gt; getObjectType() {</span><br><span class="line">        <span class="keyword">return</span> Dog.class;</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">isSingleton</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        有人说，注释中的代码写入Dog的构造方法不就行了吗？干嘛这么费劲转一圈，还写个类，还要实现接口，多麻烦啊。还真不一样，你可以理解为Dog是一个抽象后剥离的特别干净的模型，但是实际使用的时候必须进行一系列的初始化动作。只不过根据情况不同，初始化动作不同而已。如果写入Dog，或许初始化动作A当前并不能满足你的需要，这个时候你就要做一个DogB的方案了。然后，就没有然后了，你就要做两个Dog类。当时使用FactoryBean接口就可以完美解决这个问题。</p><p>​        通常实现了FactoryBean接口的类使用@Bean的形式进行加载，当然你也可以使用@Component去声明DogFactoryBean，只要被扫描加载到即可，但是这种格式加载总觉得怪怪的，指向性不是很明确。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ComponentScan({"com.itheima.bean","com.itheima.config"})</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig3</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DogFactoryBean <span class="title function_">dog</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DogFactoryBean</span>();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h5 id="注解格式导入XML格式配置的bean"><a href="#注解格式导入XML格式配置的bean" class="headerlink" title="注解格式导入XML格式配置的bean"></a>注解格式导入XML格式配置的bean</h5><p>​        再补充一个小知识，由于早起开发的系统大部分都是采用xml的形式配置bean，现在的企业级开发基本上不用这种模式了。但是如果你特别幸运，需要基于之前的系统进行二次开发，这就尴尬了。新开发的用注解格式，之前开发的是xml格式。这个时候可不是让你选择用哪种模式的，而是两种要同时使用。spring提供了一个注解可以解决这个问题，@ImportResource，在配置类上直接写上要被融合的xml配置文件名即可，算的上一种兼容性解决方案，没啥实际意义。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ImportResource("applicationContext1.xml")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig32</span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h5 id="proxyBeanMethods属性"><a href="#proxyBeanMethods属性" class="headerlink" title="proxyBeanMethods属性"></a>proxyBeanMethods属性</h5><p>​        前面的例子中用到了@Configuration这个注解，当我们使用AnnotationConfigApplicationContext加载配置类的时候，配置类可以不添加这个注解。但是这个注解有一个更加强大的功能，它可以保障配置类中使用方法创建的bean的唯一性。为@Configuration注解设置proxyBeanMethods属性值为true即可，由于此属性默认值为true，所以很少看见明确书写的，除非想放弃此功能。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration(proxyBeanMethods = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig33</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Cat <span class="title function_">cat</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        下面通过容器再调用上面的cat方法时，得到的就是同一个对象了。注意，必须使用spring容器对象调用此方法才有保持bean唯一性的特性。此特性在很多底层源码中有应用，前面讲MQ时，也应用了此特性，只不过当前没有解释而已。这里算是填个坑吧。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App33</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">ApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig33.class);</span><br><span class="line">        String[] names = ctx.getBeanDefinitionNames();</span><br><span class="line">        <span class="keyword">for</span> (String name : names) {</span><br><span class="line">            System.out.println(name);</span><br><span class="line">        }</span><br><span class="line">        System.out.println(<span class="string">"-------------------------"</span>);</span><br><span class="line">        <span class="type">SpringConfig33</span> <span class="variable">springConfig33</span> <span class="operator">=</span> ctx.getBean(<span class="string">"springConfig33"</span>, SpringConfig33.class);</span><br><span class="line">        System.out.println(springConfig33.cat());</span><br><span class="line">        System.out.println(springConfig33.cat());</span><br><span class="line">        System.out.println(springConfig33.cat());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="方式四：使用-Import注解注入bean"><a href="#方式四：使用-Import注解注入bean" class="headerlink" title="方式四：使用@Import注解注入bean"></a>方式四：使用@Import注解注入bean</h4><p>​        使用扫描的方式加载bean是企业级开发中常见的bean的加载方式，但是由于扫描的时候不仅可以加载到你要的东西，还有可能加载到各种各样的乱七八糟的东西，万一没有控制好得不偿失了。</p><p>​        有人就会奇怪，会有什么问题呢？比如你扫描了com.itheima.service包，后来因为业务需要，又扫描了com.itheima.dao包，你发现com.itheima包下面只有service和dao这两个包，这就简单了，直接扫描com.itheima就行了。但是万万没想到，十天后你加入了一个外部依赖包，里面也有com.itheima包，这下就热闹了，该来的不该来的全来了。</p><p>​        所以我们需要一种精准制导的加载方式，使用@Import注解就可以解决你的问题。它可以加载所有的一切，只需要在注解的参数中写上加载的类对应的.class即可。有人就会觉得，还要自己手写，多麻烦，不如扫描好用。对呀，但是他可以指定加载啊，好的命名规范配合@ComponentScan可以解决很多问题，但是@Import注解拥有其重要的应用场景。有没有想过假如你要加载的bean没有使用@Component修饰呢？这下就无解了，而@Import就无需考虑这个问题。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import({Dog.class,DbConfig.class})</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig4</span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h5 id="使用-Import注解注入配置类"><a href="#使用-Import注解注入配置类" class="headerlink" title="使用@Import注解注入配置类"></a>使用@Import注解注入配置类</h5><p>​        除了加载bean，还可以使用@Import注解加载配置类。其实本质上是一样的，不解释太多了。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Import(DogFactoryBean.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig4</span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="方式五：编程形式注册bean"><a href="#方式五：编程形式注册bean" class="headerlink" title="方式五：编程形式注册bean"></a>方式五：编程形式注册bean</h4><p>​        前面介绍的加载bean的方式都是在容器启动阶段完成bean的加载，下面这种方式就比较特殊了，可以在容器初始化完成后手动加载bean。通过这种方式可以实现编程式控制bean的加载。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App5</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="comment">//上下文容器对象已经初始化完毕后，手工加载bean</span></span><br><span class="line">        ctx.register(Mouse.class);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        其实这种方式坑还是挺多的，比如容器中已经有了某种类型的bean，再加载会不会覆盖呢？这都是要思考和关注的问题。新手慎用。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">App5</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">AnnotationConfigApplicationContext</span> <span class="variable">ctx</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnnotationConfigApplicationContext</span>(SpringConfig.class);</span><br><span class="line">        <span class="comment">//上下文容器对象已经初始化完毕后，手工加载bean</span></span><br><span class="line">        ctx.registerBean(<span class="string">"tom"</span>, Cat.class,<span class="number">0</span>);</span><br><span class="line">        ctx.registerBean(<span class="string">"tom"</span>, Cat.class,<span class="number">1</span>);</span><br><span class="line">        ctx.registerBean(<span class="string">"tom"</span>, Cat.class,<span class="number">2</span>);</span><br><span class="line">        System.out.println(ctx.getBean(Cat.class));</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="方式六：导入实现了ImportSelector接口的类"><a href="#方式六：导入实现了ImportSelector接口的类" class="headerlink" title="方式六：导入实现了ImportSelector接口的类"></a>方式六：导入实现了ImportSelector接口的类</h4><p>​        在方式五种，我们感受了bean的加载可以进行编程化的控制，添加if语句就可以实现bean的加载控制了。但是毕竟是在容器初始化后实现bean的加载控制，那是否可以在容器初始化过程中进行控制呢？答案是必须的。实现ImportSelector接口的类可以设置加载的bean的全路径类名，记得一点，只要能编程就能判定，能判定意味着可以控制程序的运行走向，进而控制一切。</p><p>​        现在又多了一种控制bean加载的方式，或者说是选择bean的方式。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyImportSelector</span> <span class="keyword">implements</span> <span class="title class_">ImportSelector</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String[] selectImports(AnnotationMetadata metadata) {</span><br><span class="line">        <span class="comment">//各种条件的判定，判定完毕后，决定是否装载指定的bean</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> metadata.hasAnnotation(<span class="string">"org.springframework.context.annotation.Configuration"</span>);</span><br><span class="line">        <span class="keyword">if</span>(flag){</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]{<span class="string">"com.itheima.bean.Dog"</span>};</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]{<span class="string">"com.itheima.bean.Cat"</span>};</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h4 id="方式七：导入实现了ImportBeanDefinitionRegistrar接口的类"><a href="#方式七：导入实现了ImportBeanDefinitionRegistrar接口的类" class="headerlink" title="方式七：导入实现了ImportBeanDefinitionRegistrar接口的类"></a>方式七：导入实现了ImportBeanDefinitionRegistrar接口的类</h4><p>​        方式六中提供了给定类全路径类名控制bean加载的形式，如果对spring的bean的加载原理比较熟悉的小伙伴知道，其实bean的加载不是一个简简单单的对象，spring中定义了一个叫做BeanDefinition的东西，它才是控制bean初始化加载的核心。BeanDefinition接口中给出了若干种方法，可以控制bean的相关属性。说个最简单的，创建的对象是单例还是非单例，在BeanDefinition中定义了scope属性就可以控制这个。如果你感觉方式六没有给你开放出足够的对bean的控制操作，那么方式七你值得拥有。我们可以通过定义一个类，然后实现ImportBeanDefinitionRegistrar接口的方式定义bean，并且还可以让你对bean的初始化进行更加细粒度的控制，不过对于新手并不是很友好。忽然给你开放了若干个操作，还真不知道如何下手。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyRegistrar</span> <span class="keyword">implements</span> <span class="title class_">ImportBeanDefinitionRegistrar</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">registerBeanDefinitions</span><span class="params">(AnnotationMetadata metadata, BeanDefinitionRegistry registry)</span> {</span><br><span class="line">        <span class="type">BeanDefinition</span> <span class="variable">beanDefinition</span> <span class="operator">=</span> </span><br><span class="line">            BeanDefinitionBuilder.rootBeanDefinition(BookServiceImpl2.class).getBeanDefinition();</span><br><span class="line">        registry.registerBeanDefinition(<span class="string">"bookService"</span>,beanDefinition);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="方式八：导入实现了BeanDefinitionRegistryPostProcessor接口的类"><a href="#方式八：导入实现了BeanDefinitionRegistryPostProcessor接口的类" class="headerlink" title="方式八：导入实现了BeanDefinitionRegistryPostProcessor接口的类"></a>方式八：导入实现了BeanDefinitionRegistryPostProcessor接口的类</h4><p>​        上述七种方式都是在容器初始化过程中进行bean的加载或者声明，但是这里有一个bug。这么多种方式，它们之间如果有冲突怎么办？谁能有最终裁定权？这是个好问题，当某种类型的bean被接二连三的使用各种方式加载后，在你对所有加载方式的加载顺序没有完全理解清晰之前，你还真不知道最后谁说了算。即便你理清楚了，保不齐和你一起开发的猪队友又添加了一个bean，得嘞，这下就热闹了。</p><p>​        spring挥舞它仲裁者的大刀来了一个致命一击，都别哔哔了，我说了算，BeanDefinitionRegistryPostProcessor，看名字知道，BeanDefinition意思是bean定义，Registry注册的意思，Post后置，Processor处理器，全称bean定义后处理器，干啥的？在所有bean注册都折腾完后，它把最后一道关，说白了，它说了算，这下消停了，它是最后一个运行的。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyPostProcessor</span> <span class="keyword">implements</span> <span class="title class_">BeanDefinitionRegistryPostProcessor</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">postProcessBeanDefinitionRegistry</span><span class="params">(BeanDefinitionRegistry registry)</span> <span class="keyword">throws</span> BeansException {</span><br><span class="line">        <span class="type">BeanDefinition</span> <span class="variable">beanDefinition</span> <span class="operator">=</span> </span><br><span class="line">            BeanDefinitionBuilder.rootBeanDefinition(BookServiceImpl4.class).getBeanDefinition();</span><br><span class="line">        registry.registerBeanDefinition(<span class="string">"bookService"</span>,beanDefinition);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>​        总体上来说，上面介绍了各种各样的bean的注册加载初始化方式，脑子里建立个概念吧，方式很多，spring源码中大量运用各种方式。复习的内容就先说到这里。</p><p><strong>总结</strong></p><ol><li>bean的定义由前期xml配置逐步演化成注解配置，本质是一样的，都是通过反射机制加载类名后创建对象，对象就是spring管控的bean</li><li>@Import注解可以指定加载某一个类作为spring管控的bean，如果被加载的类中还具有@Bean相关的定义，会被一同加载</li><li>spring开放出了若干种可编程控制的bean的初始化方式，通过分支语句由固定的加载bean转成了可以选择bean是否加载或者选择加载哪一种bean</li></ol><h3 id="YL-1-2-bean的加载控制"><a href="#YL-1-2-bean的加载控制" class="headerlink" title="YL-1-2.bean的加载控制"></a>YL-1-2.bean的加载控制</h3><p>​        前面复习bean的加载时，提出了有关加载控制的方式，其中手工注册bean，ImportSelector接口，ImportBeanDefinitionRegistrar接口，BeanDefinitionRegistryPostProcessor接口都可以控制bean的加载，这一节就来说说这些加载控制。</p><p>​        企业级开发中不可能在spring容器中进行bean的饱和式加载的。什么是饱和式加载，就是不管用不用，全部加载。比如jdk中有两万个类，那就加载两万个bean，显然是不合理的，因为你压根就不会使用其中大部分的bean。那合理的加载方式是什么？肯定是必要性加载，就是用什么加载什么。继续思考，加载哪些bean通常受什么影响呢？最容易想的就是你要用什么技术，就加载对应的bean。用什么技术意味着什么？就是加载对应技术的类。所以在spring容器中，通过判定是否加载了某个类来控制某些bean的加载是一种常见操作。下例给出了对应的代码实现，其实思想很简单，先判断一个类的全路径名是否能够成功加载，加载成功说明有这个类，那就干某项具体的工作，否则就干别的工作。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyImportSelector</span> <span class="keyword">implements</span> <span class="title class_">ImportSelector</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String[] selectImports(AnnotationMetadata importingClassMetadata) {</span><br><span class="line">        <span class="keyword">try</span> {</span><br><span class="line">            Class&lt;?&gt; clazz = Class.forName(<span class="string">"com.itheima.bean.Mouse"</span>);</span><br><span class="line">            <span class="keyword">if</span>(clazz != <span class="literal">null</span>) {</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[]{<span class="string">"com.itheima.bean.Cat"</span>};</span><br><span class="line">            }</span><br><span class="line">        } <span class="keyword">catch</span> (ClassNotFoundException e) {</span><br><span class="line"><span class="comment">//            e.printStackTrace();</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">0</span>];</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        通过上述的分析，可以看到此类操作将成为企业级开发中的常见操作，于是springboot将把这些常用操作给我们做了一次封装。这种逻辑判定你开发者就别搞了，我springboot信不过你这种新手开发者，我给你封装一下，做几个注解，你填参数吧，耶，happy。</p><p>​        下例使用@ConditionalOnClass注解实现了当虚拟机中加载了com.itheima.bean.Wolf类时加载对应的bean。比较一下上面的代码和下面的代码，有没有感觉很清爽。其实此类注解还有很多。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(name = "com.itheima.bean.Wolf")</span></span><br><span class="line"><span class="keyword">public</span> Cat <span class="title function_">tom</span><span class="params">()</span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        @ConditionalOnMissingClass注解控制虚拟机中没有加载指定的类才加载对应的bean。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingClass("com.itheima.bean.Dog")</span></span><br><span class="line"><span class="keyword">public</span> Cat <span class="title function_">tom</span><span class="params">()</span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        这种条件还可以做并且的逻辑关系，写2个就是2个条件都成立，写多个就是多个条件都成立。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(name = "com.itheima.bean.Wolf")</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingClass("com.itheima.bean.Mouse")</span></span><br><span class="line"><span class="keyword">public</span> Cat <span class="title function_">tom</span><span class="params">()</span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        除了判定是否加载类，还可以对当前容器类型做判定，下例是判定当前容器环境是否是web环境。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication</span></span><br><span class="line"><span class="keyword">public</span> Cat <span class="title function_">tom</span><span class="params">()</span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        下面是判定容器环境是否是非web环境。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnNotWebApplication</span></span><br><span class="line"><span class="keyword">public</span> Cat <span class="title function_">tom</span><span class="params">()</span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        当然还可以判定是否加载了指定名称的bean，这种有什么用呢？太有用了。比如当前容器中已经提供了jdbcTemplate对应的bean，你还需要再加载一个全新的jdbcTemplate的bean吗？没有必要了嘛。spring说，如果你自己写的话，我就不帮你操这份心了，如果你没写，我再给你提供。自适应，自适应，明白？没有的话就提供给你，有的话就用你自己的，是不是很帅？</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="meta">@ConditionalOnBean(name="jerry")</span></span><br><span class="line"><span class="keyword">public</span> Cat <span class="title function_">tom</span><span class="params">()</span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Cat</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        以下就是判定当前是否加载了mysql的驱动类，如果加载了，我就给你搞一个Druid的数据源对象出来，完美！</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringConfig</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnClass(name="com.mysql.jdbc.Driver")</span></span><br><span class="line">    <span class="keyword">public</span> DruidDataSource <span class="title function_">dataSource</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">DruidDataSource</span>();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        其中springboot的bean加载控制注解还有很多，这里就不一一列举了，最常用的判定条件就是根据类是否加载来进行控制。</p><p><strong>总结</strong></p><ol><li>springboot定义了若干种控制bean加载的条件设置注解，由spring固定加载bean变成了可以根据情况选择性的加载bean</li></ol><h3 id="YL-1-3-bean的依赖属性配置管理"><a href="#YL-1-3-bean的依赖属性配置管理" class="headerlink" title="YL-1-3.bean的依赖属性配置管理"></a>YL-1-3.bean的依赖属性配置管理</h3><p>​        bean的加载及加载控制已经搞完了，下面研究一下bean内部的事情。bean在运行的时候，实现对应的业务逻辑时有可能需要开发者提供一些设置值，有就是属性了。如果使用构造方法将参数固定，灵活性不足，这个时候就可以使用前期学习的bean的属性配置相关的知识进行灵活的配置了。先通过yml配置文件，设置bean运行需要使用的配置信息。</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cartoon:</span></span><br><span class="line">  <span class="attr">cat:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">"图多盖洛"</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">5</span></span><br><span class="line">  <span class="attr">mouse:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">"泰菲"</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure><p>​        然后定义一个封装属性的专用类，加载配置属性，读取对应前缀相关的属性值。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix = "cartoon")</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CartoonProperties</span> {</span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">    <span class="keyword">private</span> Mouse mouse;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        最后在使用的位置注入对应的配置即可。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableConfigurationProperties(CartoonProperties.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CartoonCatAndMouse</span>{</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CartoonProperties cartoonProperties;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        建议在业务类上使用@EnableConfigurationProperties声明bean，这样在不使用这个类的时候，也不会无故加载专用的属性配置类CartoonProperties，减少spring管控的资源数量。</p><p><strong>总结</strong></p><ol><li>bean的运行如果需要外部设置值，建议将设置值封装成专用的属性类* * * * Properties</li><li>设置属性类加载指定前缀的配置信息</li><li>在需要使用属性类的位置通过注解@EnableConfigurationProperties加载bean，而不要直接在属性配置类上定义bean，减少资源加载的数量，因需加载而不要饱和式加载。</li></ol><h3 id="YL-1-4-自动配置原理（工作流程）"><a href="#YL-1-4-自动配置原理（工作流程）" class="headerlink" title="YL-1-4.自动配置原理（工作流程）"></a>YL-1-4.自动配置原理（工作流程）</h3><p>​        经过前面的知识复习，下面终于进入到了本章核心内容的学习，自动配置原理。原理谈不上，就是自动配置的工作流程。</p><p>​        啥叫自动配置呢？简单说就是springboot根据我们开发者的行为猜测你要做什么事情，然后把你要用的bean都给你准备好。听上去是不是很神奇？其实非常简单，前面复习的东西都已经讲完了。springboot咋做到的呢？就是看你导入了什么类，就知道你想干什么了。然后把你有可能要用的bean（注意是有可能）都给你加载好，你直接使用就行了，springboot把所需要的一切工作都做完了。</p><p>​        自动配置的意义就是加速开发效率，将开发者使用某种技术时需要使用的bean根据情况提前加载好，实现自动配置的效果。当然，开发者有可能需要提供必要的参数，比如你要用mysql技术，导入了mysql的坐标，springboot就知道了你要做数据库操作，一系列的数据库操作相关的bean都给你提前声明好，但是你要告诉springboot你到底用哪一个数据库，像什么IP地址啊，端口啊，你不告诉spirngboot，springboot就无法帮你把自动配置相关的工作做完。</p><p>​        而这种思想其实就是在日常的开发过程中根据开发者的习惯慢慢抽取得到了。整体过程分为2个阶段：</p><p>​        <strong>阶段一：准备阶段</strong></p><ol><li><p>springboot的开发人员先大量收集Spring开发者的编程习惯，整理开发过程每一个程序经常使用的技术列表，形成一个<strong>技术集A</strong></p></li><li><p>收集常用技术(<strong>技术集A</strong>)的使用参数，不管你用什么常用设置，我用什么常用设置，统统收集起来整理一下，得到开发过程中每一个技术的常用设置，形成每一个技术对应的<strong>设置集B</strong></p><p><strong>阶段二：加载阶段</strong></p></li><li><p>springboot初始化Spring容器基础环境，读取用户的配置信息，加载用户自定义的bean和导入的其他坐标，形成<strong>初始化环境</strong></p></li><li><p>springboot将<strong>技术集A</strong>包含的所有技术在SpringBoot启动时默认全部加载，这时肯定加载的东西有一些是无效的，没有用的</p></li><li><p>springboot会对<strong>技术集A</strong>中每一个技术约定出启动这个技术对应的条件，并设置成按条件加载，由于开发者导入了一些bean和其他坐标，也就是与<strong>初始化环境</strong>，这个时候就可以根据这个<strong>初始化环境</strong>与springboot的<strong>技术集A</strong>进行比对了，哪个匹配上加载哪个</p></li><li><p>因为有些技术不做配置就无法工作，所以springboot开始对<strong>设置集B</strong>下手了。它统计出各个国家各个行业的开发者使用某个技术时最常用的设置是什么，然后把这些设置作为默认值直接设置好，并告诉开发者当前设置我已经给你搞了一套，你要用可以直接用，这样可以减少开发者配置参数的工作量</p></li><li><p>但是默认配置不一定能解决问题，于是springboot开放修改<strong>设置集B</strong>的接口，可以由开发者根据需要决定是否覆盖默认配置</p></li></ol><p>​        以上这些仅仅是一个思想，落地到代码实现阶段就要好好思考一下怎么实现了。假定我们想自己实现自动配置的功能，都要做哪些工作呢？</p><ul><li>首先指定一个技术X，我们打算让技术X具备自动配置的功能，这个技术X可以是任意功能，这个技术隶属于上面描述的<strong>技术集A</strong></li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CartoonCatAndMouse</span>{</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>然后找出技术X使用过程中的常用配置Y，这个配置隶属于上面表述的<strong>设置集B</strong></li></ul><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cartoon:</span></span><br><span class="line">  <span class="attr">cat:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">"图多盖洛"</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">5</span></span><br><span class="line">  <span class="attr">mouse:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">"泰菲"</span></span><br><span class="line">    <span class="attr">age:</span> <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure><ul><li>将常用配置Y设计出对应的yml配置书写格式，然后定义一个属性类封装对应的配置属性，这个过程其实就是上一节咱们做的bean的依赖属性管理，一模一样</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix = "cartoon")</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CartoonProperties</span> {</span><br><span class="line">    <span class="keyword">private</span> Cat cat;</span><br><span class="line">    <span class="keyword">private</span> Mouse mouse;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>最后做一个配置类，当这个类加载的时候就可以初始化对应的功能bean，并且可以加载到对应的配置</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableConfigurationProperties(CartoonProperties.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CartoonCatAndMouse</span> <span class="keyword">implements</span> <span class="title class_">ApplicationContextAware</span> {</span><br><span class="line">    <span class="keyword">private</span> CartoonProperties cartoonProperties;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ul><li>当然，你也可以为当前自动配置类设置上激活条件，例如使用@CondtionOn* * * * 为其设置加载条件</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConditionalOnClass(name="org.springframework.data.redis.core.RedisOperations")</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(CartoonProperties.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CartoonCatAndMouse</span> <span class="keyword">implements</span> <span class="title class_">ApplicationContextAware</span> {</span><br><span class="line">    <span class="keyword">private</span> CartoonProperties cartoonProperties;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        做到这里都已经做完了，但是遇到了一个全新的问题，如何让springboot启动的时候去加载这个类呢？如果不加载的话，我们做的条件判定，做的属性加载这些全部都失效了。springboot为我们开放了一个配置入口，在配置目录中创建META-INF目录，并创建spring.factories文件，在其中添加设置，说明哪些类要启动自动配置就可以了。</p><figure class="highlight cmd"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># Auto Configure</span><br><span class="line">org.springframework.boot.autoconfigure.EnableAutoConfiguration=\</span><br><span class="line">com.itheima.bean.CartoonCatAndMouse</span><br></pre></td></tr></tbody></table></figure><p>​        其实这个文件就做了一件事，通过这种配置的方式加载了指定的类。转了一圈，就是个普通的bean的加载，和最初使用xml格式加载bean几乎没有区别，格式变了而已。那自动配置的核心究竟是什么呢？自动配置其实是一个小的生态，可以按照如下思想理解：</p><ol><li>自动配置从根本上来说就是一个bean的加载</li><li>通过bean加载条件的控制给开发者一种感觉，自动配置是自适应的，可以根据情况自己判定，但实际上就是最普通的分支语句的应用，这是蒙蔽我们双眼的第一层面纱</li><li>使用bean的时候，如果不设置属性，就有默认值，如果不想用默认值，就可以自己设置，也就是可以修改部分或者全部参数，感觉这个过程好屌，也是一种自适应的形式，其实还是需要使用分支语句来做判断的，这是蒙蔽我们双眼的第二层面纱</li><li>springboot技术提前将大量开发者有可能使用的技术提前做好了，条件也写好了，用的时候你导入了一个坐标，对应技术就可以使用了，其实就是提前帮我们把spring.factories文件写好了，这是蒙蔽我们双眼的第三层面纱</li></ol><p>​        你在不知道自动配置这个知识的情况下，经过上面这一二三，你当然觉得自动配置是一种特别牛的技术，但是一窥究竟后发现，也就那么回事。而且现在springboot程序启动时，在后台偷偷的做了这么多次检测，这么多种情况判定，不用问了，效率一定是非常低的，毕竟它要检测100余种技术是否在你程序中使用。</p><p>​        以上内容是自动配置的工作流程。</p><p><strong>总结</strong></p><ol><li>springboot启动时先加载spring.factories文件中的org.springframework.boot.autoconfigure.EnableAutoConfiguration配置项，将其中配置的所有的类都加载成bean</li><li>在加载bean的时候，bean对应的类定义上都设置有加载条件，因此有可能加载成功，也可能条件检测失败不加载bean</li><li>对于可以正常加载成bean的类，通常会通过@EnableConfigurationProperties注解初始化对应的配置属性类并加载对应的配置</li><li>配置属性类上通常会通过@ConfigurationProperties加载指定前缀的配置，当然这些配置通常都有默认值。如果没有默认值，就强制你必须配置后使用了</li></ol><h3 id="YL-1-5-变更自动配置"><a href="#YL-1-5-变更自动配置" class="headerlink" title="YL-1-5.变更自动配置"></a>YL-1-5.变更自动配置</h3><p>​        知道了自动配置的执行过程，下面就可以根据这个自动配置的流程做一些高级定制了。例如系统默认会加载100多种自动配置的技术，如果我们先手工干预此工程，禁用自动配置是否可行呢？答案一定是可以的。方式还挺多：</p><p><strong>方式一：通过yaml配置设置排除指定的自动配置类</strong></p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">autoconfigure:</span></span><br><span class="line">    <span class="attr">exclude:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration</span></span><br></pre></td></tr></tbody></table></figure><p><strong>方式二：通过注解参数排除自动配置类</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableAutoConfiguration(excludeName = "",exclude = {})</span></span><br></pre></td></tr></tbody></table></figure><p><strong>方式三：排除坐标（应用面较窄）</strong></p><p>如果当前自动配置中包含有更多的自动配置功能，也就是一个套娃的效果。此时可以通过检测条件的控制来管理自动配置是否启动。例如web程序启动时会自动启动tomcat服务器，可以通过排除坐标的方式，让加载tomcat服务器的条件失效。不过需要提醒一点，你把tomcat排除掉，记得再加一种可以运行的服务器。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--web起步依赖环境中，排除Tomcat起步依赖，匹配自动配置条件--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--添加Jetty起步依赖，匹配自动配置条件--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jetty<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>springboot的自动配置并不是必然运行的，可以通过配置的形式干预是否启用对应的自动配置功能</li></ol><h2 id="YL-2-自定义starter开发"><a href="#YL-2-自定义starter开发" class="headerlink" title="YL-2.自定义starter开发"></a>YL-2.自定义starter开发</h2><p>​        自动配置学习完后，我们就可以基于自动配置的特性，开发springboot技术中最引以为傲的功能了，starter。其实通过前期学习，我们发现用什么技术直接导入对应的starter，然后就实现了springboot整合对应技术，再加上一些简单的配置，就可以直接使用了。这种设计方式对开发者非常友好，本章就通过一个案例的制作，开发自定义starter来实现自定义功能的快捷添加。</p><h3 id="YL-2-1-案例：记录系统访客独立IP访问次数"><a href="#YL-2-1-案例：记录系统访客独立IP访问次数" class="headerlink" title="YL-2-1.案例：记录系统访客独立IP访问次数"></a>YL-2-1.案例：记录系统访客独立IP访问次数</h3><p>​        本案例的功能是统计网站独立IP访问次数的功能，并将访问信息在后台持续输出。整体功能是在后台每10秒输出一次监控信息（格式：IP+访问次数） ，当用户访问网站时，对用户的访问行为进行统计。</p><p>​        例如：张三访问网站功能15次，IP地址：192.168.0.135，李四访问网站功能20次，IP地址：61.129.65.248。那么在网站后台就输出如下监控信息，此信息每10秒刷新一次。</p><figure class="highlight tex"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">         IP访问监控</span><br><span class="line">+-----ip-address-----+--num--+</span><br><span class="line">|     192.168.0.135  |   15  |</span><br><span class="line">|     61.129.65.248  |   20  |</span><br><span class="line">+--------------------+-------+</span><br></pre></td></tr></tbody></table></figure><p>​        在进行具体制作之前，先对功能做具体的分析</p><ol><li><p>数据记录在什么位置</p><p>最终记录的数据是一个字符串（IP地址）对应一个数字（访问次数），此处可以选择的数据存储模型可以使用java提供的map模型，也就是key-value的键值对模型，或者具有key-value键值对模型的存储技术，例如redis技术。本案例使用map作为实现方案，有兴趣的小伙伴可以使用redis作为解决方案。</p></li><li><p>统计功能运行位置，因为每次web请求都需要进行统计，因此使用拦截器会是比较好的方案，本案例使用拦截器来实现。不过在制作初期，先使用调用的形式进行测试，等功能完成了，再改成拦截器的实现方案。</p></li><li><p>为了提升统计数据展示的灵活度，为统计功能添加配置项。输出频度，输出的数据格式，统计数据的显示模式均可以通过配置实现调整。</p><ul><li>输出频度，默认10秒</li><li>数据特征：累计数据 / 阶段数据，默认累计数据</li><li>输出格式：详细模式 / 极简模式 </li></ul></li></ol><p>​        在下面的制作中，分成若干个步骤实现。先完成最基本的统计功能的制作，然后开发出统计报表，接下来把所有的配置都设置好，最后将拦截器功能实现，整体功能就做完了。</p><h3 id="YL-2-2-IP计数业务功能开发（自定义starter）"><a href="#YL-2-2-IP计数业务功能开发（自定义starter）" class="headerlink" title="YL-2-2.IP计数业务功能开发（自定义starter）"></a>YL-2-2.IP计数业务功能开发（自定义starter）</h3><p>​        本功能最终要实现的效果是在现有的项目中导入一个starter，对应的功能就添加上了，删除掉对应的starter，功能就消失了，要求功能要与原始项目完全解耦。因此需要开发一个独立的模块，制作对应功能。</p><p><strong>步骤一：创建全新的模块，定义业务功能类</strong></p><p>​        功能类的制作并不复杂，定义一个业务类，声明一个Map对象，用于记录ip访问次数，key是ip地址，value是访问次数</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IpCountService</span> {</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Integer&gt; ipCountMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,Integer&gt;();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        有些小伙伴可能会有疑问，不设置成静态的，如何在每次请求时进行数据共享呢？记得，当前类加载成bean以后是一个单例对象，对象都是单例的，哪里存在多个对象共享变量的问题。</p><p><strong>步骤二：制作统计功能</strong></p><p>​        制作统计操作对应的方法，每次访问后对应ip的记录次数+1。需要分情况处理，如果当前没有对应ip的数据，新增一条数据，否则就修改对应key的值+1即可</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IpCountService</span> {</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Integer&gt; ipCountMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,Integer&gt;();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">count</span><span class="params">()</span>{</span><br><span class="line">        <span class="comment">//每次调用当前操作，就记录当前访问的IP，然后累加访问次数</span></span><br><span class="line">        <span class="comment">//1.获取当前操作的IP地址</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">ip</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//2.根据IP地址从Map取值，并递增</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> ipCountMap.get(ip);</span><br><span class="line">        <span class="keyword">if</span>(count == <span class="literal">null</span>){</span><br><span class="line">            ipCountMap.put(ip,<span class="number">1</span>);</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            ipCountMap.put(ip,count + <span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        因为当前功能最终导入到其他项目中进行，而导入当前功能的项目是一个web项目，可以从容器中直接获取请求对象，因此获取IP地址的操作可以通过自动装配得到请求对象，然后获取对应的访问IP地址。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IpCountService</span> {</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Integer&gt; ipCountMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,Integer&gt;();</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="comment">//当前的request对象的注入工作由使用当前starter的工程提供自动装配</span></span><br><span class="line">    <span class="keyword">private</span> HttpServletRequest httpServletRequest;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">count</span><span class="params">()</span>{</span><br><span class="line">        <span class="comment">//每次调用当前操作，就记录当前访问的IP，然后累加访问次数</span></span><br><span class="line">        <span class="comment">//1.获取当前操作的IP地址</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">ip</span> <span class="operator">=</span> httpServletRequest.getRemoteAddr();</span><br><span class="line">        <span class="comment">//2.根据IP地址从Map取值，并递增</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> ipCountMap.get(ip);</span><br><span class="line">        <span class="keyword">if</span>(count == <span class="literal">null</span>){</span><br><span class="line">            ipCountMap.put(ip,<span class="number">1</span>);</span><br><span class="line">        }<span class="keyword">else</span>{</span><br><span class="line">            ipCountMap.put(ip,count + <span class="number">1</span>);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤三：定义自动配置类</strong></p><p>​        我们需要做到的效果是导入当前模块即开启此功能，因此使用自动配置实现功能的自动装载，需要开发自动配置类在启动项目时加载当前功能。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IpAutoConfiguration</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> IpCountService <span class="title function_">ipCountService</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">IpCountService</span>();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        自动配置类需要在spring.factories文件中做配置方可自动运行。</p><figure class="highlight properties"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Auto Configure</span></span><br><span class="line"><span class="attr">org.springframework.boot.autoconfigure.EnableAutoConfiguration</span>=<span class="string">cn.itcast.autoconfig.IpAutoConfiguration</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤四：在原始项目中模拟调用，测试功能</strong></p><p>​        原始调用项目中导入当前开发的starter</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.itcast<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>ip_spring_boot_starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        推荐选择调用方便的功能做测试，推荐使用分页操作，当然也可以换其他功能位置进行测试。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping("/books")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BookController</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IpCountService ipCountService;</span><br><span class="line">    <span class="meta">@GetMapping("{currentPage}/{pageSize}")</span></span><br><span class="line">    <span class="keyword">public</span> R <span class="title function_">getPage</span><span class="params">(<span class="meta">@PathVariable</span> <span class="type">int</span> currentPage,<span class="meta">@PathVariable</span> <span class="type">int</span> pageSize,Book book)</span>{</span><br><span class="line">        ipCountService.count();</span><br><span class="line">        IPage&lt;Book&gt; page = bookService.getPage(currentPage, pageSize,book);</span><br><span class="line">        <span class="keyword">if</span>( currentPage &gt; page.getPages()){</span><br><span class="line">            page = bookService.getPage((<span class="type">int</span>)page.getPages(), pageSize,book);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">R</span>(<span class="literal">true</span>, page);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><font color="#f0f"><b>温馨提示</b></font></p><p>​        由于当前制作的功能需要在对应的调用位置进行坐标导入，因此必须保障仓库中具有当前开发的功能，所以每次原始代码修改后，需要重新编译并安装到仓库中。为防止问题出现，建议每次安装之前先clean然后install，保障资源进行了更新。切记切记！！</p><p><strong>当前效果</strong></p><p>​        每次调用分页操作后，可以在控制台输出当前访问的IP地址，此功能可以在count操作中添加日志或者输出语句进行测试。</p><h3 id="YL-2-3-定时任务报表开发"><a href="#YL-2-3-定时任务报表开发" class="headerlink" title="YL-2-3.定时任务报表开发"></a>YL-2-3.定时任务报表开发</h3><p>​        当前已经实现了在业务功能类中记录访问数据，但是还没有输出监控的信息到控制台。由于监控信息需要每10秒输出1次，因此需要使用定时器功能。可以选取第三方技术Quartz实现，也可以选择Spring内置的task来完成此功能，此处选用Spring的task作为实现方案。</p><p><strong>步骤一：开启定时任务功能</strong></p><p>​        定时任务功能开启需要在当前功能的总配置中设置，结合现有业务设定，比较合理的位置是设置在自动配置类上。加载自动配置类即启用定时任务功能。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableScheduling</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IpAutoConfiguration</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> IpCountService <span class="title function_">ipCountService</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">IpCountService</span>();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤二：制作显示统计数据功能</strong></p><p>​        定义显示统计功能的操作print()，并设置定时任务，当前设置每5秒运行一次统计数据。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IpCountService</span> {</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Integer&gt; ipCountMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,Integer&gt;();</span><br><span class="line">    <span class="meta">@Scheduled(cron = "0/5 * * * * ?")</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span>{</span><br><span class="line">        System.out.println(<span class="string">"         IP访问监控"</span>);</span><br><span class="line">        System.out.println(<span class="string">"+-----ip-address-----+--num--+"</span>);</span><br><span class="line">        <span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : ipCountMap.entrySet()) {</span><br><span class="line">            <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">value</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line">            System.out.println(String.format(<span class="string">"|%18s  |%5d  |"</span>,key,value));</span><br><span class="line">        }</span><br><span class="line">        System.out.println(<span class="string">"+--------------------+-------+"</span>);</span><br><span class="line">      }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        其中关于统计报表的显示信息拼接可以使用各种形式进行，此处使用String类中的格式化字符串操作进行，学习者可以根据自己的喜好调整实现方案。</p><p><font color="#f0f"><b>温馨提示</b></font></p><p>​        每次运行效果之前先clean然后install，切记切记！！</p><p><strong>当前效果</strong></p><p>​        每次调用分页操作后，可以在控制台看到统计数据，到此基础功能已经开发完毕。</p><h3 id="YL-2-4-使用属性配置设置功能参数"><a href="#YL-2-4-使用属性配置设置功能参数" class="headerlink" title="YL-2-4.使用属性配置设置功能参数"></a>YL-2-4.使用属性配置设置功能参数</h3><p>​        由于当前报表显示的信息格式固定，为提高报表信息显示的灵活性，需要通过yml文件设置参数，控制报表的显示格式。</p><p><strong>步骤一：定义参数格式</strong></p><p>​        设置3个属性，分别用来控制显示周期（cycle），阶段数据是否清空（cycleReset），数据显示格式（model）</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">tools:</span></span><br><span class="line">  <span class="attr">ip:</span></span><br><span class="line">    <span class="attr">cycle:</span> <span class="number">10</span></span><br><span class="line">    <span class="attr">cycleReset:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">model:</span> <span class="string">"detail"</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤二：定义封装参数的属性类，读取配置参数</strong></p><p>​        为防止项目组定义的参数种类过多，产生冲突，通常设置属性前缀会至少使用两级属性作为前缀进行区分。</p><p>​        日志输出模式是在若干个类别选项中选择某一项，对于此种分类性数据建议制作枚举定义分类数据，当然使用字符串也可以。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ConfigurationProperties(prefix = "tools.ip")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IpProperties</span> {</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 日志显示周期</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Long</span> <span class="variable">cycle</span> <span class="operator">=</span> <span class="number">5L</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 是否周期内重置数据</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Boolean</span> <span class="variable">cycleReset</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 日志输出模式  detail：详细模式  simple：极简模式</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">model</span> <span class="operator">=</span> LogModel.DETAIL.value;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">LogModel</span>{</span><br><span class="line">        DETAIL(<span class="string">"detail"</span>),</span><br><span class="line">        SIMPLE(<span class="string">"simple"</span>);</span><br><span class="line">        <span class="keyword">private</span> String value;</span><br><span class="line">        LogModel(String value) {</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">getValue</span><span class="params">()</span> {</span><br><span class="line">            <span class="keyword">return</span> value;</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤三：加载属性类</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableScheduling</span></span><br><span class="line"><span class="meta">@EnableConfigurationProperties(IpProperties.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IpAutoConfiguration</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> IpCountService <span class="title function_">ipCountService</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">IpCountService</span>();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤四：应用配置属性</strong></p><p>​        在应用配置属性的功能类中，使用自动装配加载对应的配置bean，然后使用配置信息做分支处理。</p><p>​        注意：清除数据的功能一定要在输出后运行，否则每次查阅的数据均为空白数据。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IpCountService</span> {</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String,Integer&gt; ipCountMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;String,Integer&gt;();</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IpProperties ipProperties;</span><br><span class="line">    <span class="meta">@Scheduled(cron = "0/5 * * * * ?")</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">if</span>(ipProperties.getModel().equals(IpProperties.LogModel.DETAIL.getValue())){</span><br><span class="line">            System.out.println(<span class="string">"         IP访问监控"</span>);</span><br><span class="line">            System.out.println(<span class="string">"+-----ip-address-----+--num--+"</span>);</span><br><span class="line">            <span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : ipCountMap.entrySet()) {</span><br><span class="line">                <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> entry.getKey();</span><br><span class="line">                <span class="type">Integer</span> <span class="variable">value</span> <span class="operator">=</span> entry.getValue();</span><br><span class="line">                System.out.println(String.format(<span class="string">"|%18s  |%5d  |"</span>,key,value));</span><br><span class="line">            }</span><br><span class="line">            System.out.println(<span class="string">"+--------------------+-------+"</span>);</span><br><span class="line">        }<span class="keyword">else</span> <span class="keyword">if</span>(ipProperties.getModel().equals(IpProperties.LogModel.SIMPLE.getValue())){</span><br><span class="line">            System.out.println(<span class="string">"     IP访问监控"</span>);</span><br><span class="line">            System.out.println(<span class="string">"+-----ip-address-----+"</span>);</span><br><span class="line">            <span class="keyword">for</span> (String key: ipCountMap.keySet()) {</span><br><span class="line">                System.out.println(String.format(<span class="string">"|%18s  |"</span>,key));</span><br><span class="line">            }</span><br><span class="line">            System.out.println(<span class="string">"+--------------------+"</span>);</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">//阶段内统计数据归零</span></span><br><span class="line">        <span class="keyword">if</span>(ipProperties.getCycleReset()){</span><br><span class="line">            ipCountMap.clear();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><font color="#f0f"><b>温馨提示</b></font></p><p>​        每次运行效果之前先clean然后install，切记切记！！</p><p><strong>当前效果</strong></p><p>​        在web程序端可以通过控制yml文件中的配置参数对统计信息进行格式控制。但是数据显示周期还未进行控制。</p><h3 id="YL-2-5-使用属性配置设置定时器参数"><a href="#YL-2-5-使用属性配置设置定时器参数" class="headerlink" title="YL-2-5.使用属性配置设置定时器参数"></a>YL-2-5.使用属性配置设置定时器参数</h3><p>​        在使用属性配置中的显示周期数据时，遇到了一些问题。由于无法在@Scheduled注解上直接使用配置数据，改用曲线救国的方针，放弃使用@EnableConfigurationProperties注解对应的功能，改成最原始的bean定义格式。</p><p><strong>步骤一：@Scheduled注解使用#{}读取bean属性值</strong></p><p>​        此处读取bean名称为ipProperties的bean的cycle属性值</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Scheduled(cron = "0/#{ipProperties.cycle} * * * * ?")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">print</span><span class="params">()</span>{</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤二：属性类定义bean并指定bean的访问名称</strong></p><p>​        如果此处不设置bean的访问名称，spring会使用自己的命名生成器生成bean的长名称，无法实现属性的读取</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component("ipProperties")</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = "tools.ip")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IpProperties</span> {</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤三：弃用@EnableConfigurationProperties注解对应的功能，改为导入bean的形式加载配置属性类</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableScheduling</span></span><br><span class="line"><span class="comment">//@EnableConfigurationProperties(IpProperties.class)</span></span><br><span class="line"><span class="meta">@Import(IpProperties.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IpAutoConfiguration</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> IpCountService <span class="title function_">ipCountService</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">IpCountService</span>();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><font color="#f0f"><b>温馨提示</b></font></p><p>​        每次运行效果之前先clean然后install，切记切记！！</p><p><strong>当前效果</strong></p><p>​        在web程序端可以通过控制yml文件中的配置参数对统计信息的显示周期进行控制</p><h3 id="YL-2-6-拦截器开发"><a href="#YL-2-6-拦截器开发" class="headerlink" title="YL-2-6.拦截器开发"></a>YL-2-6.拦截器开发</h3><p>​        基础功能基本上已经完成了制作，下面进行拦截器的开发。开发时先在web工程中制作，然后将所有功能挪入starter模块中</p><p><strong>步骤一：开发拦截器</strong></p><p>​        使用自动装配加载统计功能的业务类，并在拦截器中调用对应功能</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IpCountInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IpCountService ipCountService;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, </span></span><br><span class="line"><span class="params">                             HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        ipCountService.count();</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤二：配置拦截器</strong></p><p>​        配置mvc拦截器，设置拦截对应的请求路径。此处拦截所有请求，用户可以根据使用需要设置要拦截的请求。甚至可以在此处加载IpCountProperties中的属性，通过配置设置拦截器拦截的请求。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringMvcConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addInterceptors</span><span class="params">(InterceptorRegistry registry)</span> {</span><br><span class="line">        registry.addInterceptor(ipCountInterceptor()).addPathPatterns(<span class="string">"/**"</span>);</span><br><span class="line">    }</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> IpCountInterceptor <span class="title function_">ipCountInterceptor</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">IpCountInterceptor</span>();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><font color="#f0f"><b>温馨提示</b></font></p><p>​        每次运行效果之前先clean然后install，切记切记！！</p><p><strong>当前效果</strong></p><p>​        在web程序端导入对应的starter后功能开启，去掉坐标后功能消失，实现自定义starter的效果。</p><p>​        到此当前案例全部完成，自定义stater的开发其实在第一轮开发中就已经完成了，就是创建独立模块导出独立功能，需要使用的位置导入对应的starter即可。如果是在企业中开发，记得不仅需要将开发完成的starter模块install到自己的本地仓库中，开发完毕后还要deploy到私服上，否则别人就无法使用了。</p><h3 id="YL-2-7-功能性完善——开启yml提示功能"><a href="#YL-2-7-功能性完善——开启yml提示功能" class="headerlink" title="YL-2-7.功能性完善——开启yml提示功能"></a>YL-2-7.功能性完善——开启yml提示功能</h3><p>​        我们在使用springboot的配置属性时，都可以看到提示，尤其是导入了对应的starter后，也会有对应的提示信息出现。但是现在我们的starter没有对应的提示功能，这种设定就非常的不友好，本节解决自定义starter功能如何开启配置提示的问题。</p><p>​        springboot提供有专用的工具实现此功能，仅需要导入下列坐标。</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-configuration-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>​        程序编译后，在META-INF目录中会生成对应的提示文件，然后拷贝生成出的文件到自己开发的META-INF目录中，并对其进行编辑。打开生成的文件，可以看到如下信息。其中groups属性定义了当前配置的提示信息总体描述，当前配置属于哪一个属性封装类，properties属性描述了当前配置中每一个属性的具体设置，包含名称、类型、描述、默认值等信息。hints属性默认是空白的，没有进行设置。hints属性可以参考springboot源码中的制作，设置当前属性封装类专用的提示信息，下例中为日志输出模式属性model设置了两种可选提示信息。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">{</span><br><span class="line">  <span class="string">"groups"</span>: [</span><br><span class="line">    {</span><br><span class="line">      <span class="string">"name"</span>: <span class="string">"tools.ip"</span>,</span><br><span class="line">      <span class="string">"type"</span>: <span class="string">"cn.itcast.properties.IpProperties"</span>,</span><br><span class="line">      <span class="string">"sourceType"</span>: <span class="string">"cn.itcast.properties.IpProperties"</span></span><br><span class="line">    }</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"properties"</span>: [</span><br><span class="line">    {</span><br><span class="line">      <span class="string">"name"</span>: <span class="string">"tools.ip.cycle"</span>,</span><br><span class="line">      <span class="string">"type"</span>: <span class="string">"java.lang.Long"</span>,</span><br><span class="line">      <span class="string">"description"</span>: <span class="string">"日志显示周期"</span>,</span><br><span class="line">      <span class="string">"sourceType"</span>: <span class="string">"cn.itcast.properties.IpProperties"</span>,</span><br><span class="line">      <span class="string">"defaultValue"</span>: <span class="number">5</span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">      <span class="string">"name"</span>: <span class="string">"tools.ip.cycle-reset"</span>,</span><br><span class="line">      <span class="string">"type"</span>: <span class="string">"java.lang.Boolean"</span>,</span><br><span class="line">      <span class="string">"description"</span>: <span class="string">"是否周期内重置数据"</span>,</span><br><span class="line">      <span class="string">"sourceType"</span>: <span class="string">"cn.itcast.properties.IpProperties"</span>,</span><br><span class="line">      <span class="string">"defaultValue"</span>: <span class="literal">false</span></span><br><span class="line">    },</span><br><span class="line">    {</span><br><span class="line">      <span class="string">"name"</span>: <span class="string">"tools.ip.model"</span>,</span><br><span class="line">      <span class="string">"type"</span>: <span class="string">"java.lang.String"</span>,</span><br><span class="line">      <span class="string">"description"</span>: <span class="string">"日志输出模式  detail：详细模式  simple：极简模式"</span>,</span><br><span class="line">      <span class="string">"sourceType"</span>: <span class="string">"cn.itcast.properties.IpProperties"</span></span><br><span class="line">    }</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"hints"</span>: [</span><br><span class="line">    {</span><br><span class="line">      <span class="string">"name"</span>: <span class="string">"tools.ip.model"</span>,</span><br><span class="line">      <span class="string">"values"</span>: [</span><br><span class="line">        {</span><br><span class="line">          <span class="string">"value"</span>: <span class="string">"detail"</span>,</span><br><span class="line">          <span class="string">"description"</span>: <span class="string">"详细模式."</span></span><br><span class="line">        },</span><br><span class="line">        {</span><br><span class="line">          <span class="string">"value"</span>: <span class="string">"simple"</span>,</span><br><span class="line">          <span class="string">"description"</span>: <span class="string">"极简模式."</span></span><br><span class="line">        }</span><br><span class="line">      ]</span><br><span class="line">    }</span><br><span class="line">  ]</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>总结</strong></p><ol><li>自定义starter其实就是做一个独立的功能模块，核心技术是利用自动配置的效果在加载模块后加载对应的功能</li><li>通常会为自定义starter的自动配置功能添加足够的条件控制，而不会做成100%加载对功能的效果</li><li>本例中使用map保存数据，如果换用redis方案，在starter开发模块中就要导入redis对应的starter</li><li>对于配置属性务必开启提示功能，否则使用者无法感知配置应该如何书写</li></ol><h2 id="YL-3-SpringBoot程序启动流程解析"><a href="#YL-3-SpringBoot程序启动流程解析" class="headerlink" title="YL-3.SpringBoot程序启动流程解析"></a>YL-3.SpringBoot程序启动流程解析</h2><p>​        原理篇学习到这里即将结束，最后一章说一下springboot程序的启动流程。对于springboot技术来说，它用于加速spring程序的开发，核心本质还是spring程序的运行，所以于其说是springboot程序的启动流程，不如说是springboot对spring程序的启动流程做了哪些更改。</p><p>​        其实不管是springboot程序还是spring程序，启动过程本质上都是在做容器的初始化，并将对应的bean初始化出来放入容器。在spring环境中，每个bean的初始化都要开发者自己添加设置，但是切换成springboot程序后，自动配置功能的添加帮助开发者提前预设了很多bean的初始化过程，加上各种各样的参数设置，使得整体初始化过程显得略微复杂，但是核心本质还是在做一件事，初始化容器。作为开发者只要搞清楚springboot提供了哪些参数设置的环节，同时初始化容器的过程中都做了哪些事情就行了。</p><p>​        springboot初始化的参数根据参数的提供方，划分成如下3个大类，每个大类的参数又被封装了各种各样的对象，具体如下：</p><ul><li>环境属性（Environment）</li><li>系统配置（spring.factories）</li><li>参数（Arguments、application.properties）</li></ul><p>​        以下通过代码流向介绍了springboot程序启动时每一环节做的具体事情。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">Springboot30StartupApplication【<span class="number">10</span>】-&gt;SpringApplication.run(Springboot30StartupApplication.class, args);</span><br><span class="line">    SpringApplication【<span class="number">1332</span>】-&gt;<span class="keyword">return</span> run(<span class="keyword">new</span> <span class="title class_">Class</span>&lt;?&gt;[] { primarySource }, args);</span><br><span class="line">        SpringApplication【<span class="number">1343</span>】-&gt;<span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SpringApplication</span>(primarySources).run(args);</span><br><span class="line">            SpringApplication【<span class="number">1343</span>】-&gt;SpringApplication(primarySources)</span><br><span class="line">            # 加载各种配置信息，初始化各种配置对象</span><br><span class="line">                SpringApplication【<span class="number">266</span>】-&gt;<span class="built_in">this</span>(<span class="literal">null</span>, primarySources);</span><br><span class="line">                    SpringApplication【<span class="number">280</span>】-&gt;<span class="keyword">public</span> <span class="title function_">SpringApplication</span><span class="params">(ResourceLoader resourceLoader, Class&lt;?&gt;... primarySources)</span></span><br><span class="line">                        SpringApplication【<span class="number">281</span>】-&gt;<span class="built_in">this</span>.resourceLoader = resourceLoader;</span><br><span class="line">                        # 初始化资源加载器</span><br><span class="line">                        SpringApplication【<span class="number">283</span>】-&gt;<span class="built_in">this</span>.primarySources = <span class="keyword">new</span> <span class="title class_">LinkedHashSet</span>&lt;&gt;(Arrays.asList(primarySources));</span><br><span class="line">                        # 初始化配置类的类名信息（格式转换）</span><br><span class="line">                        SpringApplication【<span class="number">284</span>】-&gt;<span class="built_in">this</span>.webApplicationType = WebApplicationType.deduceFromClasspath();</span><br><span class="line">                        # 确认当前容器加载的类型</span><br><span class="line">                        SpringApplication【<span class="number">285</span>】-&gt;<span class="built_in">this</span>.bootstrapRegistryInitializers = getBootstrapRegistryInitializersFromSpringFactories();</span><br><span class="line">                        # 获取系统配置引导信息</span><br><span class="line">                        SpringApplication【<span class="number">286</span>】-&gt;setInitializers((Collection) getSpringFactoriesInstances(ApplicationContextInitializer.class));</span><br><span class="line">                        # 获取ApplicationContextInitializer.class对应的实例</span><br><span class="line">                        SpringApplication【<span class="number">287</span>】-&gt;setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class));</span><br><span class="line">                        # 初始化监听器，对初始化过程及运行过程进行干预</span><br><span class="line">                        SpringApplication【<span class="number">288</span>】-&gt;<span class="built_in">this</span>.mainApplicationClass = deduceMainApplicationClass();</span><br><span class="line">                        # 初始化了引导类类名信息，备用</span><br><span class="line">            SpringApplication【<span class="number">1343</span>】-&gt;<span class="keyword">new</span> <span class="title class_">SpringApplication</span>(primarySources).run(args)</span><br><span class="line">            # 初始化容器，得到ApplicationContext对象</span><br><span class="line">                SpringApplication【<span class="number">323</span>】-&gt;<span class="type">StopWatch</span> <span class="variable">stopWatch</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StopWatch</span>();</span><br><span class="line">                # 设置计时器</span><br><span class="line">                SpringApplication【<span class="number">324</span>】-&gt;stopWatch.start();</span><br><span class="line">                # 计时开始</span><br><span class="line">                SpringApplication【<span class="number">325</span>】-&gt;<span class="type">DefaultBootstrapContext</span> <span class="variable">bootstrapContext</span> <span class="operator">=</span> createBootstrapContext();</span><br><span class="line">                # 系统引导信息对应的上下文对象</span><br><span class="line">                SpringApplication【<span class="number">327</span>】-&gt;configureHeadlessProperty();</span><br><span class="line">                # 模拟输入输出信号，避免出现因缺少外设导致的信号传输失败，进而引发错误（模拟显示器，键盘，鼠标...）</span><br><span class="line">                    java.awt.headless=<span class="literal">true</span></span><br><span class="line">                SpringApplication【<span class="number">328</span>】-&gt;<span class="type">SpringApplicationRunListeners</span> <span class="variable">listeners</span> <span class="operator">=</span> getRunListeners(args);</span><br><span class="line">                # 获取当前注册的所有监听器</span><br><span class="line">                SpringApplication【<span class="number">329</span>】-&gt;listeners.starting(bootstrapContext, <span class="built_in">this</span>.mainApplicationClass);</span><br><span class="line">                # 监听器执行了对应的操作步骤</span><br><span class="line">                SpringApplication【<span class="number">331</span>】-&gt;<span class="type">ApplicationArguments</span> <span class="variable">applicationArguments</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultApplicationArguments</span>(args);</span><br><span class="line">                # 获取参数</span><br><span class="line">                SpringApplication【<span class="number">333</span>】-&gt;<span class="type">ConfigurableEnvironment</span> <span class="variable">environment</span> <span class="operator">=</span> prepareEnvironment(listeners, bootstrapContext, applicationArguments);</span><br><span class="line">                # 将前期读取的数据加载成了一个环境对象，用来描述信息</span><br><span class="line">                SpringApplication【<span class="number">333</span>】-&gt;configureIgnoreBeanInfo(environment);</span><br><span class="line">                # 做了一个配置，备用</span><br><span class="line">                SpringApplication【<span class="number">334</span>】-&gt;<span class="type">Banner</span> <span class="variable">printedBanner</span> <span class="operator">=</span> printBanner(environment);</span><br><span class="line">                # 初始化logo</span><br><span class="line">                SpringApplication【<span class="number">335</span>】-&gt;context = createApplicationContext();</span><br><span class="line">                # 创建容器对象，根据前期配置的容器类型进行判定并创建</span><br><span class="line">                SpringApplication【<span class="number">363</span>】-&gt;context.setApplicationStartup(<span class="built_in">this</span>.applicationStartup);</span><br><span class="line">                # 设置启动模式</span><br><span class="line">                SpringApplication【<span class="number">337</span>】-&gt;prepareContext(bootstrapContext, context, environment, listeners, applicationArguments, printedBanner);</span><br><span class="line">                # 对容器进行设置，参数来源于前期的设定</span><br><span class="line">                SpringApplication【<span class="number">338</span>】-&gt;refreshContext(context);</span><br><span class="line">                # 刷新容器环境</span><br><span class="line">                SpringApplication【<span class="number">339</span>】-&gt;afterRefresh(context, applicationArguments);</span><br><span class="line">                # 刷新完毕后做后处理</span><br><span class="line">                SpringApplication【<span class="number">340</span>】-&gt;stopWatch.stop();</span><br><span class="line">                # 计时结束</span><br><span class="line">                SpringApplication【<span class="number">341</span>】-&gt;<span class="keyword">if</span> (<span class="built_in">this</span>.logStartupInfo) {</span><br><span class="line">                # 判定是否记录启动时间的日志</span><br><span class="line">                SpringApplication【<span class="number">342</span>】-&gt;    <span class="keyword">new</span> <span class="title class_">StartupInfoLogger</span>(<span class="built_in">this</span>.mainApplicationClass).logStarted(getApplicationLog(), stopWatch);</span><br><span class="line">                # 创建日志对应的对象，输出日志信息，包含启动时间</span><br><span class="line">                SpringApplication【<span class="number">344</span>】-&gt;listeners.started(context);</span><br><span class="line">                # 监听器执行了对应的操作步骤</span><br><span class="line">                SpringApplication【<span class="number">345</span>】-&gt;callRunners(context, applicationArguments);</span><br><span class="line">                # 调用运行器</span><br><span class="line">                SpringApplication【<span class="number">353</span>】-&gt;listeners.running(context);</span><br><span class="line">                # 监听器执行了对应的操作步骤</span><br></pre></td></tr></tbody></table></figure><p>​        上述过程描述了springboot程序启动过程中做的所有的事情，这个时候好奇宝宝们就会提出一个问题。如果想干预springboot的启动过程，比如自定义一个数据库环境检测的程序，该如何将这个过程加入springboot的启动流程呢？</p><p>​        遇到这样的问题，大部分技术是这样设计的，设计若干个标准接口，对应程序中的所有标准过程。当你想干预某个过程时，实现接口就行了。例如spring技术中bean的生命周期管理就是采用标准接口进行的。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Abc</span> <span class="keyword">implements</span> <span class="title class_">InitializingBean</span>, DisposableBean {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="comment">//销毁操作</span></span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterPropertiesSet</span><span class="params">()</span> <span class="keyword">throws</span> Exception {</span><br><span class="line">        <span class="comment">//初始化操作</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        springboot启动过程由于存在着大量的过程阶段，如果设计接口就要设计十余个标准接口，这样对开发者不友好，同时整体过程管理分散，十余个过程各自为政，管理难度大，过程过于松散。那springboot如何解决这个问题呢？它采用了一种最原始的设计模式来解决这个问题，这就是监听器模式，使用监听器来解决这个问题。</p><p>​        springboot将自身的启动过程比喻成一个大的事件，该事件是由若干个小的事件组成的。例如：</p><ul><li>org.springframework.boot.context.event.ApplicationStartingEvent<ul><li>应用启动事件，在应用运行但未进行任何处理时，将发送 ApplicationStartingEvent</li></ul></li><li>org.springframework.boot.context.event.ApplicationEnvironmentPreparedEvent<ul><li>环境准备事件，当Environment被使用，且上下文创建之前，将发送 ApplicationEnvironmentPreparedEvent</li></ul></li><li>org.springframework.boot.context.event.ApplicationContextInitializedEvent<ul><li>上下文初始化事件</li></ul></li><li>org.springframework.boot.context.event.ApplicationPreparedEvent<ul><li>应用准备事件，在开始刷新之前，bean定义被加载之后发送 ApplicationPreparedEvent</li></ul></li><li>org.springframework.context.event.ContextRefreshedEvent<ul><li>上下文刷新事件</li></ul></li><li>org.springframework.boot.context.event.ApplicationStartedEvent<ul><li>应用启动完成事件，在上下文刷新之后且所有的应用和命令行运行器被调用之前发送 ApplicationStartedEvent</li></ul></li><li>org.springframework.boot.context.event.ApplicationReadyEvent<ul><li>应用准备就绪事件，在应用程序和命令行运行器被调用之后，将发出 ApplicationReadyEvent，用于通知应用已经准备处理请求</li></ul></li><li>org.springframework.context.event.ContextClosedEvent（上下文关闭事件，对应容器关闭）</li></ul><p>​        上述列出的仅仅是部分事件，当应用启动后走到某一个过程点时，监听器监听到某个事件触发，就会执行对应的事件。除了系统内置的事件处理，用户还可以根据需要自定义开发当前事件触发时要做的其他动作。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设定监听器，在应用启动开始事件时进行功能追加</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyListener</span> <span class="keyword">implements</span> <span class="title class_">ApplicationListener</span>&lt;ApplicationStartingEvent&gt; {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onApplicationEvent</span><span class="params">(ApplicationStartingEvent event)</span> {</span><br><span class="line"><span class="comment">//自定义事件处理逻辑</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>​        按照上述方案处理，用户就可以干预springboot启动过程的所有工作节点，设置自己的业务系统中独有的功能点。</p><p><strong>总结</strong></p><ol><li>springboot启动流程是先初始化容器需要的各种配置，并加载成各种对象，初始化容器时读取这些对象，创建容器</li><li>整体流程采用事件监听的机制进行过程控制，开发者可以根据需要自行扩展，添加对应的监听器绑定具体事件，就可以在事件触发位置执行开发者的业务代码</li></ol><h2 id="原理篇完结"><a href="#原理篇完结" class="headerlink" title="原理篇完结"></a>原理篇完结</h2><p>​        原理篇到这里就要结束了，springboot2整套课程的基础篇、实用篇和原理篇就全部讲完了。至于后面的番外篇由于受B站视频上传总量不得超过200个视频的约束，番外篇的内容不会在当前课程中发布了，会重新定义一个课程继续发布，至于具体时间，暂时还无法给到各位小伙伴。</p><p>​        原理篇个人感觉略微有点偷懒，怎么说呢？学习原理篇需要的前置铺垫知识太多，比如最后一节讲到启动流程时，看到reflush方法时我就想现在在看这套课程的小伙伴是否真的懂这个过程呢？但是如果把这些东西都讲了，那估计要补充的知识就太多了，就是将spring的很多知识加入到这里面重新讲解了，会出现喧宾夺主的现象。很纠结，( ´•︵•` )</p><p>​        课程做到这里就要和各位小伙伴先say顾拜了，感谢各位小伙伴的支持，也欢迎各位小伙伴持续关注黑马程序员出品的各种视频教程。黑马程序员的每位老师做课程都是认真的，都是为了各位致力于IT研发事业的小伙伴能够学习之路上少遇沟沟坎坎，顺利到达成功的彼岸。</p><p>​        番外篇，さようなら！ 안녕히 계십시오！แล้วเจอกัน！До свидания ！خداحافظ ！</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;SpringBoot&lt;/p&gt;</summary>
    
    
    
    <category term="SpringBoot" scheme="https://llzzoomm.github.io/categories/SpringBoot/"/>
    
    
    <category term="SpringBoot" scheme="https://llzzoomm.github.io/tags/SpringBoot/"/>
    
  </entry>
  
  <entry>
    <title>MySQL面</title>
    <link href="https://llzzoomm.github.io/2023/07/25/mysql-mian/"/>
    <id>https://llzzoomm.github.io/2023/07/25/mysql-mian/</id>
    <published>2023-07-25T13:38:13.438Z</published>
    <updated>2023-07-25T13:37:46.779Z</updated>
    
    <content type="html"><![CDATA[<h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><span id="more"></span><h3 id="1-索引的基本原理"><a href="#1-索引的基本原理" class="headerlink" title="1.索引的基本原理"></a>1.索引的基本原理</h3><ul><li>索引用来快速的寻找那些具有特定值的记录，如果没有索引就要遍历整个表</li><li>索引的原理就是把无序的数据变成有序的数据<ul><li>把创建了索引的列的内容进行排序</li><li>对排序结果生成倒排表</li><li>在倒排表上拼上数据地址链</li><li>在查询数据时，先找到倒排表内容，再找数据地址链，然后再查询到具体数据</li></ul></li></ul><h3 id=""><a href="#" class="headerlink" title=""></a></h3>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;MySQL&quot;&gt;&lt;a href=&quot;#MySQL&quot; class=&quot;headerlink&quot; title=&quot;MySQL&quot;&gt;&lt;/a&gt;MySQL&lt;/h2&gt;</summary>
    
    
    
    <category term="面" scheme="https://llzzoomm.github.io/categories/%E9%9D%A2/"/>
    
    
    <category term="面" scheme="https://llzzoomm.github.io/tags/%E9%9D%A2/"/>
    
  </entry>
  
  <entry>
    <title>Spring系列</title>
    <link href="https://llzzoomm.github.io/2023/07/25/spring-xi-lie/"/>
    <id>https://llzzoomm.github.io/2023/07/25/spring-xi-lie/</id>
    <published>2023-07-25T13:33:57.515Z</published>
    <updated>2023-07-25T13:36:41.989Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1><span id="more"></span><h3 id="1-如何实现一个IOC容器"><a href="#1-如何实现一个IOC容器" class="headerlink" title="1.如何实现一个IOC容器"></a>1.如何实现一个IOC容器</h3><ul><li>配置文件配置包扫描路径</li><li>递归包扫描获取.class文件</li><li>反射、确定需要交给IOC管理的类</li><li>对需要注入的类进行依赖注入<ul><li>配置文件中指定需要扫描的包路径</li><li>定义一些注解，分别表示访问控制层、数据业务层、数据持久层、依赖注入注解、获取配置文件注解</li><li>从配置文件中获取需要扫描的包路径、获取到当前路径下的文件信息和文件夹信息，将当前路径下的所有.class文件放入set集合中进行存储</li><li>遍历这个set集合，获取在类上有指定注解的类，并将其交给IOC容器，定义一个安全的map用来存储这些对象</li><li>遍历这个IOC容器，获取到每一个实例，看是否有依赖其他类的实例，然后进行递归注入</li></ul></li></ul><h3 id="2-Spring是什么"><a href="#2-Spring是什么" class="headerlink" title="2.Spring是什么"></a>2.Spring是什么</h3><ul><li>轻量级的J2EE框架。他是一个容器框架，用来装javaBean,中间层框架，可以起一个连接作用，让我们的企业开发更快更简洁</li><li>Spring是一个轻量级用来控制反转（IOC）和面向切面（AOP）的容器框架<ul><li>无论是大小还是开销，Spring都是轻量的</li><li>通过控制反转达到松耦合的目的</li><li>提供了面向切面编程的丰富支持，允许通过分离应用的业务逻辑和系统级服务进行内聚性的开发</li></ul></li></ul><h3 id="3-谈谈你对AOP的理解"><a href="#3-谈谈你对AOP的理解" class="headerlink" title="3.谈谈你对AOP的理解"></a>3.谈谈你对AOP的理解</h3><ul><li>将一个程序中的交叉业务（安全，事务，日志等），封装成一个切面，然后注入到目标对象中去，AOP可以对某些对象或某些对象的功能进行增强，比如对象中的方法进行增强，比如某些方法执行前做些什么，执行后做些什么</li><li>在OOP设计中，具有大量的重复代码，不利于各个模块的重复使用</li></ul><h3 id="4-谈谈你对IOC的理解"><a href="#4-谈谈你对IOC的理解" class="headerlink" title="4.谈谈你对IOC的理解"></a>4.谈谈你对IOC的理解</h3><ul><li><p>容器概念</p></li><li><p>控制反转</p><ul><li>对象A依赖对象B,当A需要使用B时，主动调用或者主动创建，主动权在自己手中，当使用到控制反转时，需要使用则由IOC主动创建对象B给对象A，主动权变了，这就是控制反转</li><li>全部对象的控制权都上交给了IOC，IOC成为了系统的核心，起到了类似粘合剂的作用</li></ul></li><li><p>依赖注入</p><ul><li>依赖注入是实现IOC容器的方法，IOC运行状态时，动态的将依赖注入到对象中</li></ul></li></ul><h3 id="5-BeanFactory和ApplicationContext有什么区别"><a href="#5-BeanFactory和ApplicationContext有什么区别" class="headerlink" title="5.BeanFactory和ApplicationContext有什么区别"></a>5.BeanFactory和ApplicationContext有什么区别</h3><p>ApplicationContext是BeanFactory的子接口，因此其提供了更完整的功能</p><ul><li>BeanFactory采用的是延迟加载的方式来注入Bean,既只有在使用到某个Bean的时候才会调用（getBean()方法），才会对该Bean加载实例化，这样就不能发现一些潜在的Spring配置问题</li><li>ApplicationContext采用的是一次性加载Bean,这样容器启动的时候就能看到Spring中存在的配置错误，并且确保当需要使用的时候已经创建好了，可以直接使用，不用等待</li><li>相对于BeanFactory，ApplicationContext唯一的不足就是占用内容空间，当Bean较多时，程序启动就会较慢</li><li>BeanFactory通常用编程创建，ApplicationContext通常使用声明创建，例如ContextLoader</li><li>他们都支持BeanPostProcessor、BeanFoctoryPostProcessor，但是BeanFactory是手动注册，ApplicationContext是自动注册</li></ul><h3 id="6-描述Spring-Bean的生命周期"><a href="#6-描述Spring-Bean的生命周期" class="headerlink" title="6.描述Spring Bean的生命周期"></a>6.描述Spring Bean的生命周期</h3><ol><li>解析类得到BeanDefiniton</li><li>如果有多个构造方法，推断使用哪个构造方法</li><li>确定构造方法，进行实例化对象</li><li>在实例化的对象加入@Autowired注解的属性进行属性填充</li><li>回调Aware方法</li><li>调用BeanPostProcesser的初始化前的方法</li><li>调用初始化方法</li><li>调用BeanPostProcesser初始化后的方法，在这里会进行AOP</li><li>如果当前创建的Bean是单例就会放入到单例池</li><li>使用Bean</li><li>Spring容器关闭时调用DisposableBean中的destory()方法</li></ol><h3 id="7-解释Spring支持的几种Bean的作用域"><a href="#7-解释Spring支持的几种Bean的作用域" class="headerlink" title="7.解释Spring支持的几种Bean的作用域"></a>7.解释Spring支持的几种Bean的作用域</h3><ul><li>singleton:默认，每个容器中只有一个Bean实例，单例的模式由BeanFactory自身来维护，该对象的生命周期和Spring IOC容器一致（但只有在第一次被注入时才会创建）</li><li>prototype: 为每一个Bean请求提供实例，在每次注入时都会创建一个新的对象</li><li>request: Bean被定义为每一个Http请求中创建一个单例对象，也就是单个请求都会复用这一个单例对象</li><li>session:确保每一个session中有一个实例对象，当session过期时，也随之失效</li><li>application:Bean被定义在一个servletContext的生命周期中，复用一个对象</li><li>webSocket:Bean被定义子webSocket生命周期中复用一个对象</li><li>global-session: 全局作用域与servlet中的session作用域效果相同</li></ul><h3 id="8-Spring框架中单例Bean是线程安全的吗"><a href="#8-Spring框架中单例Bean是线程安全的吗" class="headerlink" title="8.Spring框架中单例Bean是线程安全的吗"></a>8.Spring框架中单例Bean是线程安全的吗</h3><ul><li><p>Spring中的Bean默认是单例的，框架并没有对Bean进行多线程的封装处理</p></li><li><p>如果Bean是有状态的就必须要开发人员自己来进行线程安全的保证，最简单的方法就是修改作用域，把singleton改为prototype这样每次请求Bean就都会访问一个新的Bean就能保证线程安全了</p><ul><li>有状态就是有数据存储功能</li><li>无状态就是没有数据存储</li></ul></li><li><p>不要在Bean中声明有状态的实例变量或类变量，如果必须如此就使用ThreadLocal使变量变为线程私有，如果需要被多个线程共享就需要使用到synchronized、lock、CAS等线程同步方法了</p></li></ul><h3 id="9-Spring框架中用到了哪些设计模式"><a href="#9-Spring框架中用到了哪些设计模式" class="headerlink" title="9.Spring框架中用到了哪些设计模式"></a>9.Spring框架中用到了哪些设计模式</h3><ul><li><p>简单工厂</p><ul><li>由一个工厂类根据传入的参数，动态的决定应该创建那个产品类</li><li>Spring中的BeanFactory就是简单工厂模式的体现，根据传入的标识来获得Bean对象，但是是在传入前创建还是传入后创建，根据具体情况来定</li></ul></li><li><p>工厂方法</p><ul><li>实现了FactoryBean接口的Bean是一类叫做factory的bean</li></ul></li><li><p>单例模式</p><ul><li>保证一个类只有一个实例，并提供一个访问他全局访问点</li><li>Spring对单例的实现，只完成了上面后半句，既提供了全局访问点BeanFactory.但没有从构造器级别去控制单例，这是因为Spring管理的是任意的java对象</li></ul></li><li><p>适配器模式</p><ul><li>Spring定义了一个适配器接口，使得每一个Controller都有一种对应的适配器实现类，让适配器代替Controller执行相应的方法，这样在拓展Controller时只需要增加一个适配器类就完成了SpringMVC的拓展了</li></ul></li><li><p>装饰器模式</p><ul><li>动态的给类增加某些工能，比生成子类更加灵活</li><li>在Spring的类名上有两种体现，一个是Decorator，一个是wrapper</li></ul></li><li><p>动态代理</p><ul><li>切面在应用运行的时候被织入，一般情况下，在织入切面时，AOP容器会动态的为目标对象创建一个代理对象，SpringAOP就是以这种方式织入切面</li><li>织入：把切面应用到目标对象并创建新的代理对象的过程</li></ul></li><li><p>观察者模式</p><ul><li>Spring的事件驱动模型使用得就是观察者模式，常用的地方是listener的实现</li></ul></li><li><p>策略模式</p><ul><li>资源访问Resource接口，该接口提供了强大的资源访问能力，大量使用了该接口访问底层接口</li></ul></li><li><p>模板方法</p><ul><li>父类定义了骨架，某些特定方法由子类实现</li><li>最大的好处，代码复用，减少重复代码</li></ul></li></ul><h3 id="10-Spring事务的实现方式和原理以及隔离级别"><a href="#10-Spring事务的实现方式和原理以及隔离级别" class="headerlink" title="10.Spring事务的实现方式和原理以及隔离级别"></a>10.Spring事务的实现方式和原理以及隔离级别</h3><ul><li><p>在Spring中有两种实现方式，一种是编程式，一种则是声明式的</p></li><li><p>@transactional就是声明式的</p></li><li><p>首先事务是数据库层面的，Spring只是做了一些扩展，提供了一些让程序员更方便操作事务的方法</p></li><li><p>在一个方法上加入了Transactional注解之后，Spring会基于这个类生成一个代理对象，会将这个代理对象作为一个Bean，当在使用这个代理对象的方法时，如果这个方法上存在该注解，那么代理逻辑会先把自动提交事务改成false,如果没有出现异常，则提交事务，反之回滚</p></li><li><p>Spring中事务隔离级别就是数据库隔离级别</p><ul><li>read uncommitted(未提交读)</li><li>read committed(提交读，不可重复读)</li><li>repeatable read(可重复读)</li><li>serializable（可串行化）<ul><li>当数据库隔离级别和Spring隔离级别不同时，以Spring配置为准，如果Spring配置的隔离级别数据库不支持，效果取决于数据库</li></ul></li></ul></li></ul><h3 id="11-Spring事务传播机制"><a href="#11-Spring事务传播机制" class="headerlink" title="11.Spring事务传播机制"></a>11.Spring事务传播机制</h3><p>多个事务方法相互调用时，事务如何在这些方法间传播</p><blockquote><p>方法A是一个事务的方法，方法A执行过程中调用了方法B，那么方法B有无事务以及方法B对事务的要求不同都 会对方法A的事务具体执行造成影响，同时方法A的事务对方法B的事务执行也有影响，这种影响具体是什么就 由两个方法所定义的事务传播类型所决定。</p></blockquote><ul><li>REQUIRED(Spring默认的事务传播类型)：如果当前没有事务则自己创建一个，如果有则加入这个事务</li><li>SUPPORTS:当前存在事务则加入事务，没有则以非事务方法执行</li><li>MANDATORY(mandatory):当前有则加入，没有则抛出异常</li><li>REQUIRES_NEW:创建一个新的事务，如果存在当前事务，则将该事务挂起</li><li>NOT_SUPPORTED:以非事务方法执行，如果当前存在事务，则挂起当前事务</li><li>NEVER:不使用事务，如果当前事务存在，则抛出事务</li><li>NESTED:如果当前事务存在则镶套事务中运行，否则和REQUIRED一样</li></ul><h3 id="12-Spring事务什么时候失效"><a href="#12-Spring事务什么时候失效" class="headerlink" title="12.Spring事务什么时候失效"></a>12.Spring事务什么时候失效</h3><p>Spring事务的原理是SpringAOP,进行了切面增强，那么失效的根本原因就是这个AOP不起作用了，常见的情况有以下几种</p><ul><li><p>发生自调用，类里面的this调用本类的方法（This通常省略），此时这个this不是代理类的，而是UserService对象本身解决方法就是把这个this变成UserService的代理</p></li><li><p>方法不是public的</p><blockquote><p>@Transactional只能用在public方法上，否则事务会失效，如果一定要在非public方法上，可以开启Aspectj代理模式</p></blockquote></li><li><p>数据库不支持事务</p></li><li><p>没有被Spring管理</p></li><li><p>异常被吃掉，事务没有回滚（或者是抛出的异常没有被定义，默认为RuntimeException）</p></li></ul><h3 id="13-什么是Bean的自动装配，有哪些形式"><a href="#13-什么是Bean的自动装配，有哪些形式" class="headerlink" title="13.什么是Bean的自动装配，有哪些形式"></a>13.什么是Bean的自动装配，有哪些形式</h3><p>开启自动装配只需要在XML配置文件，配置Autowire属性</p><blockquote><bean id="cutomer" class="com.xxx.xxx.Customer" autowire=""></bean></blockquote><p>autowire属性有五种装配方式</p><ul><li>no 缺省情况下是通过ref属性手动配置</li></ul><blockquote><p>手动装配：以value或ref的方式明确指定属性值都是手动装配。 需要通过‘ref’属性来连接bean。</p></blockquote><ul><li><p>byName通过Bean的属性名称自动装配</p><blockquote><p>Cutomer的属性名称是person，Spring会将bean id为person的bean通过setter方法进行自动装 配。</p><bean id="cutomer" class="com.xxx.xxx.Cutomer" autowire="byName"><bean id="person" class="com.xxx.xxx.Person"></bean></bean></blockquote></li><li><p>byType根据Bean的类型自动装配</p></li><li><p>constructor-类似byType，不过是应用于构造器的参数。如果一个bean与构造器参数的类型形 同，则进行自动装配，否则导致异常。</p></li><li><p>autodetect如果有默认的构造器，则通过constructor方式进行自动装配，否则使用byType方式装配</p></li></ul><p>@Autowired自动装配Bean,可以在字段名，setter方法，构造函数上使用</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Spring&quot;&gt;&lt;a href=&quot;#Spring&quot; class=&quot;headerlink&quot; title=&quot;Spring&quot;&gt;&lt;/a&gt;Spring&lt;/h1&gt;</summary>
    
    
    
    <category term="面" scheme="https://llzzoomm.github.io/categories/%E9%9D%A2/"/>
    
    
    <category term="面" scheme="https://llzzoomm.github.io/tags/%E9%9D%A2/"/>
    
  </entry>
  
  <entry>
    <title>Java基础面</title>
    <link href="https://llzzoomm.github.io/2023/07/25/java-ji-chu-mian/"/>
    <id>https://llzzoomm.github.io/2023/07/25/java-ji-chu-mian/</id>
    <published>2023-07-25T13:33:57.514Z</published>
    <updated>2023-07-25T13:35:44.382Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Java基础"><a href="#Java基础" class="headerlink" title="Java基础"></a>Java基础</h2><span id="more"></span><h3 id="1-的作用"><a href="#1-的作用" class="headerlink" title="1.==的作用"></a>1.==的作用</h3><ul><li><p>基本类型，比较具体的值</p></li><li><p>引用类型，比较地址值</p></li></ul><h3 id="2-equals的作用"><a href="#2-equals的作用" class="headerlink" title="2.equals的作用"></a>2.equals的作用</h3><ul><li><p>Object类中默认的是== ，但是会重写</p></li><li><p>String类中比较字符串是否相同，区分大小写。</p></li></ul><h3 id="3-字符串常用API"><a href="#3-字符串常用API" class="headerlink" title="3.字符串常用API"></a>3.字符串常用API</h3><p>将take字符串中的TMD用***替代，</p><p>take.replace(“TMD”，”***”);</p><p>将take字符串进行截取，从0到3截取</p><p>take.substring(0, 3);</p><p>将take字符串一个一个遍历出来，</p><p>take.charAr(i)；</p><h3 id="4-什么是面向对象"><a href="#4-什么是面向对象" class="headerlink" title="4.什么是面向对象"></a>4.什么是面向对象</h3><ul><li>面向对象相对于面向过程，是两种不同的处理问题方式</li><li>面向过程，关注一件事情的步骤和顺序，比较直接高效高效</li><li>面向对象关注一件事情的所有参与者（对象），各自做什么，注重可复用，维护，拓展。</li></ul><h3 id="5-1-封装"><a href="#5-1-封装" class="headerlink" title="5.1 封装"></a>5.1 封装</h3><ul><li>封装的意义，明确标识出允许外部使用的成员函数和数据源内部细节对外部调用透明</li><li>外部调用无需修改或者关心内部实现</li></ul><h3 id="5-2-继承"><a href="#5-2-继承" class="headerlink" title="5.2 继承"></a>5.2 继承</h3><ul><li>子类继承父类的方法，子类和父类共性的方法或属性，可以直接用父类的，不需要自己定义，只需要个性化扩展</li></ul><h3 id="5-3-多态"><a href="#5-3-多态" class="headerlink" title="5.3 多态"></a>5.3 多态</h3><ul><li>基于对象所属类的不同，外部对同一个方法的调用，实际执行的逻辑不同</li><li>继承，方法重写，父类引用指向子类对象，不可以调用子类特有的方法</li></ul><h3 id="6-JDK-JRE-JVM"><a href="#6-JDK-JRE-JVM" class="headerlink" title="6.JDK,JRE,JVM"></a>6.JDK,JRE,JVM</h3><ul><li>JDK java开发工具</li><li>JRE Java运行时环境</li><li>JVM java虚拟机</li><li>JDK包括JRE 和java工具</li><li>JRE包含bin(JVM)、lib(类库)</li></ul><h3 id="7-hashCode-和equals"><a href="#7-hashCode-和equals" class="headerlink" title="7.hashCode()和equals()"></a>7.hashCode()和equals()</h3><ul><li><p>hashCode()的作用是获取哈希码，也成为散列码</p></li><li><p>哈希码的作用是在哈希表中确定具体的位置</p></li><li><p>hashCode()定义在Object类里，所有的类都含有hashCode()</p></li><li><p>哈希表存储的是键值对对象，可以根据哈希码快速的确定位置</p></li><li><p>根据hashCode()讲述为什么hashSet里面存储的对象是不重复的</p><ul><li>hash会根据hashCode()获取的哈希码，找到该对象的位置，然后判断这个位置是否有值，没有值则插入</li><li>如果有值则调用equals方法判断这两个值是否相同，如果相同则该对象插入失败，如果不同则重新散列到其他位置</li><li>这样减少了equals的比较次数，提高了执行效率</li></ul></li><li><p>hashCode()的默认行为是对堆上的对象产生独特值。如果没有重写hashCode()，则该class的两个 对象无论如何都不会相等（即使这两个对象指向相同的数据）</p></li></ul><h3 id="8-final"><a href="#8-final" class="headerlink" title="8.final"></a>8.final</h3><ul><li>修饰类表示这个类不可以被继承</li><li>修饰方法该方法不能被重写，但能重载</li><li>修饰变量被赋值后就不能再被修改</li></ul><h4 id="（1）修饰成员变量"><a href="#（1）修饰成员变量" class="headerlink" title="（1）修饰成员变量"></a>（1）修饰成员变量</h4><ul><li>final修饰的类变量，只能在静态代码块或者声明是指定初始值（final static int a = 0）</li><li>final修饰的成员变量，只能在非静态代码块或者声明时或者构造器中指定初始值（final int b = 0）</li></ul><h4 id="（2）修饰局部变量"><a href="#（2）修饰局部变量" class="headerlink" title="（2）修饰局部变量"></a>（2）修饰局部变量</h4><ul><li>局部变量系统不会指定默认值，只可以由程序员指定默认值，声明时不一定需要赋值，但是只能被赋值一次</li></ul><h4 id="（3）修饰基本类型和引用类型"><a href="#（3）修饰基本类型和引用类型" class="headerlink" title="（3）修饰基本类型和引用类型"></a>（3）修饰基本类型和引用类型</h4><ul><li>基本类型被赋值后不可修改</li><li>引用类型被赋值后便不能再指向其他的对象，但是引用的值是可以改变的</li></ul><h4 id="（4）为什么局部内部类和匿名内部类只能访问final修饰的局部变量"><a href="#（4）为什么局部内部类和匿名内部类只能访问final修饰的局部变量" class="headerlink" title="（4）为什么局部内部类和匿名内部类只能访问final修饰的局部变量"></a>（4）为什么局部内部类和匿名内部类只能访问final修饰的局部变量</h4><ul><li>首先内部类和外部类的是同一个级别，外部类的生命周期结束不代表内部类的生命周期结束</li><li>内部类只有当没有对象使用时才会结束</li><li>当内部类调用局部变量时，如果外部类已经销毁那么局部类也没了，所以将局部变量复制了一份作为内部类对象</li><li>但是这个时候这两个变量的值不一定相同</li><li>所有就需要使用final修饰，用来确保内部类调用的变量是一致的</li></ul><h3 id="9-String、StringBuffer、StringBuilder"><a href="#9-String、StringBuffer、StringBuilder" class="headerlink" title="9.String、StringBuffer、StringBuilder"></a>9.String、StringBuffer、StringBuilder</h3><ul><li>String是不可变的，由final修饰，每次操作都会产生一个新的String对象</li><li>StringBuffer是线程安全的由synchronized修饰</li><li>StringBuilder线程不安全</li><li>性能StringBuilder&gt;StringBuiffer&gt;String</li></ul><h3 id="10-重载和重写的区别"><a href="#10-重载和重写的区别" class="headerlink" title="10.重载和重写的区别"></a>10.重载和重写的区别</h3><ul><li>重载发生在同一个类中，方法名必须相同，参数的顺序、数量、类型不同，返回值和访问修饰符可以不同，发生在编译时</li><li>重写发生在父子类中，方法名、参数列表必须相同，返回值的范围小于或等于父类，抛出异常范围小于或等于父类，修饰符大于或等于父类</li></ul><h3 id="11-接口和实现类的区别"><a href="#11-接口和实现类的区别" class="headerlink" title="11.接口和实现类的区别"></a>11.接口和实现类的区别</h3><ul><li>抽象类可以含有普通方法，而接口只能有public abstract方法</li><li>接口可以多实现，而继承只能继承一个</li><li>抽象类中的成员变量可以是多种类型的，而接口中只能是public static final类型 </li></ul><p>接口的设计目的是约束类的行为，可以强制不同的类具有不同的行为，但是如何实现可以不一样</p><p>抽象类的设计目的是提高代码的复用，父类和子类通用的方法可以继承，不一样的方法就单独实现</p><p>使用场景：当你关注一个事物的本质时用抽象类，关注操作时用接口</p><p>抽象类的功能远超接口，但是定义抽象类的代价高因为一个类只能继承一个类，那么就得将父子类的共识全部写出，</p><p>虽然接口的功能较弱，但是是针对动作的描述，而且一个类可多实现接口</p><h3 id="12-List和set的区别"><a href="#12-List和set的区别" class="headerlink" title="12.List和set的区别"></a>12.List和set的区别</h3><ul><li>List可重复，有序，根据进入的顺序保存，可以含有多个null对象，可以使用Iterator取出，再逐一遍历，也可以使用get(index)取出</li><li>set不可重复，无序，只能含有一个null对象，只能使用Iterator取出，再逐一遍历.</li></ul><h3 id="13-ArrayList和linkedList的区别"><a href="#13-ArrayList和linkedList的区别" class="headerlink" title="13.ArrayList和linkedList的区别"></a>13.ArrayList和linkedList的区别</h3><ul><li>ArrayList基于动态数组，存储在连续的内存，适合下标访问（随机访问），扩容机制：因为数组长度固定，超出长度需要重新创建数组，将老数组拷贝到新数组中，如果不是尾部插入数组还会使得都数组都移动，使用尾插法并指定初始容量可以极大地节省性能</li><li>LinkedList基于链表存储，可以存储在分散的内存，适合做数据插入和删除，不适合查询：需要逐一遍历</li><li>遍历LinkedList必须使用Iterator不能使用for因为for每次都会重新遍历,极大地消耗性能</li><li>不要尝试使用indexOf等返回元素索引，并利用其进行遍历，使用indexOf遍历list,当结果为空时会重新遍历整个列表</li></ul><h3 id="14-hashMap和hashTable的区别，底层实现原理是什么"><a href="#14-hashMap和hashTable的区别，底层实现原理是什么" class="headerlink" title="14.hashMap和hashTable的区别，底层实现原理是什么"></a>14.hashMap和hashTable的区别，底层实现原理是什么</h3><p>区别：</p><ul><li>hashMap没有synchronized修饰，线程不安全，hashTable线程安全</li><li>hashMap允许key和value为null,hashTable不允许</li></ul><p>底层实现：</p><ul><li>数组＋链表实现</li><li>jdk8开始链表高度大于8，数组长度大于64自动转变为红黑树，元素以内部类node结点存在</li><li>长度低于6将红黑树转回列表</li></ul><h3 id="15-ConcurrentHashMap简介"><a href="#15-ConcurrentHashMap简介" class="headerlink" title="15.ConcurrentHashMap简介"></a>15.ConcurrentHashMap简介</h3><ul><li>ConcurrentHashMap性对于hashMap是线程安全的，在多线程高并发的情况下常常用到</li><li>JDK1.8的实现已经抛弃了Segment分段锁机制，利用CAS+Synchronized来保证并发更新的安全，采用的数据结构（数组+链表+[红黑树]）</li></ul><h3 id="16-什么是字节码，使用字节码的好处是什么"><a href="#16-什么是字节码，使用字节码的好处是什么" class="headerlink" title="16.什么是字节码，使用字节码的好处是什么"></a>16.什么是字节码，使用字节码的好处是什么</h3><p>Java中的解释器和编译器</p><ul><li>Java中引入了虚拟机的概念，既在程序编译之后会生成字节码文件，该字节码文件供虚拟机访问，然后虚拟机解释执行该字节码文件转变成目标机器能识别的机器码，这也就解释了Java解释和编译并存的特点</li></ul><p>字节码的好处</p><ul><li>在一定程度上解决了传统解释型语言执行效率低的问题，同时又保留了解释型语言易移植性的特点</li><li>所以java语言运行效率高，只要编译了字节码文件，到其他目标机器上运行，不需要重新编译就可以运行</li></ul><h3 id="17-Java中的异常体系"><a href="#17-Java中的异常体系" class="headerlink" title="17.Java中的异常体系"></a>17.Java中的异常体系</h3><ul><li>Java中所有的异常都来源于顶级父类Throwable</li><li>Throwable有两个子类分别是Exception和Error</li><li>Error是程序无法解决的错误，一旦发生程序就会终止</li><li>Exception不要导致程序终止，又分为RunTimeException运行时异常，会导致当前线程执行失败。CheckedException检查时异常发生在编译阶段会导致编译不通过</li></ul><h3 id="18-Java类加载器"><a href="#18-Java类加载器" class="headerlink" title="18.Java类加载器"></a>18.Java类加载器</h3><p>JDK自带三个类加载器分别是BootStrapClassLoader、ExtClassLoader、AppClassLoader</p><ul><li>BootStrapClassLoader是ExtClassLoader的父类加载%JAVA_HOME%/bin下的jar包和class文件</li><li>ExtClassLoader是AppClassLoader的父类加载%JAVA_HOME%/bin/ext下的jar包和class文件</li><li>AppClassLoader是自定义加载器的父类，负责加载classPath下的类文件</li><li>继承ClassLoader实现自定义加载器类</li></ul><h3 id="19-双亲委托模型"><a href="#19-双亲委托模型" class="headerlink" title="19.双亲委托模型"></a>19.双亲委托模型</h3><p><img src="/2023/07/25/java-ji-chu-mian/Users\32191\AppData\Roaming\Typora\typora-user-images\image-20230724160954295.png" alt="image-20230724160954295"></p><p>向上查找缓存，向下查找加载路径</p><p>好处</p><ul><li>主要是为了安全性，避免自己编写的类覆盖掉核心类比如：String</li><li>也防止了类的重复记载，因为JVM区分不同的类，不仅仅是根据类名，相同的class文件由不同的类加载器加载就是不同的类</li></ul><h3 id="20-GC如何判断对象可以被回收"><a href="#20-GC如何判断对象可以被回收" class="headerlink" title="20.GC如何判断对象可以被回收"></a>20.GC如何判断对象可以被回收</h3><p>有两种方式</p><ul><li>引用计数法，每个对象有一个引用计数属性，新增引用+1，释放引用-1，当为0时回收</li><li>可达性分析法：GC Roots开始向下搜索，搜索所走过的路径称为引用链，当没有引用链时判断对象是可回收的</li></ul>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;Java基础&quot;&gt;&lt;a href=&quot;#Java基础&quot; class=&quot;headerlink&quot; title=&quot;Java基础&quot;&gt;&lt;/a&gt;Java基础&lt;/h2&gt;</summary>
    
    
    
    <category term="面" scheme="https://llzzoomm.github.io/categories/%E9%9D%A2/"/>
    
    
    <category term="面" scheme="https://llzzoomm.github.io/tags/%E9%9D%A2/"/>
    
  </entry>
  
  <entry>
    <title>线程并发相关</title>
    <link href="https://llzzoomm.github.io/2023/07/25/xian-cheng-bing-fa-xiang-guan/"/>
    <id>https://llzzoomm.github.io/2023/07/25/xian-cheng-bing-fa-xiang-guan/</id>
    <published>2023-07-25T13:33:57.512Z</published>
    <updated>2023-07-25T13:36:12.070Z</updated>
    
    <content type="html"><![CDATA[<h2 id="线程并发相关"><a href="#线程并发相关" class="headerlink" title="线程并发相关"></a>线程并发相关</h2><span id="more"></span><h3 id="1-线程的生命周期，线程有哪几种状态"><a href="#1-线程的生命周期，线程有哪几种状态" class="headerlink" title="1.线程的生命周期，线程有哪几种状态"></a>1.线程的生命周期，线程有哪几种状态</h3><ul><li><p>线程有新建、就绪、运行、阻塞、死亡五种状态</p></li><li><p>其中阻塞有三种</p><ol><li>等待阻塞：线程执行wait()方法，该线程会释放占用的资源，JVM会将该线程放入等待池中，不会自动唤醒，必须依靠其他线程调用notify或者notifyAll方法才行，wait是Object类的方法</li><li>同步阻塞：运行的线程获取某个对象的同步锁时，如果该同步锁被其他的线程占用，则JVM会把该线程放入锁池</li><li>其他阻塞：运行的线程执行sleep方法或者join方法，或者发出IO请求时，JVM会把该线程置于阻塞状态，当这些方法终止，会把线程重新转入就绪状态</li></ol></li><li><p>就绪状态：当线程对象创建后，其他线程调用start()方法，线程进入可运行状态，等待获取CPU使用权</p></li><li><p>死亡状态：当线程出现异常退出run()方法，或程序终止时，该线程的生命周期也就结束了</p></li></ul><h3 id="2-sleep-、wait-、join-、yield-方法的区别"><a href="#2-sleep-、wait-、join-、yield-方法的区别" class="headerlink" title="2.sleep()、wait()、join()、yield()方法的区别"></a>2.sleep()、wait()、join()、yield()方法的区别</h3><ul><li><p>锁池</p><ol><li>所有需要竞争同步锁的线程都会放在锁池里面</li></ol></li><li><p>等待池</p><ol><li>当我们调用wait()方法之后，线程就会进入等待池，等待池的线程不会竞争同步锁。只有调用了notify和notifyAll方法的线程才能竞同步锁，notify()是随机选出一个线程放到线程池</li></ol></li><li><p>sleep()是Thread类的静态本地方法，wait()是Object类的方法</p></li><li><p>sleep()不会释放lock,wait()会释放,而且会加入到等待队列</p></li><li><p>sleep()不依赖同步器关键字synchronized，不需要被唤醒，一般用于当前线程休眠，或者轮询暂停操作会让出cpu执行时间，并强制上下文转换</p></li><li><p>wait()依赖同步器关键字synchronized，需要被唤醒，多用于多线程之间的通信，wait()后可能有再次竞争到锁执行的机会</p></li><li><p>yield()方法之后线程进入就绪状态，马上释放了cpu的执行权，但是依然保留了cpu的执行资格</p></li><li><p>join()执行后线程就如阻塞状态，例如在线程B中调用线程A的join（），那线程B会进入到阻塞队 列，直到线程A结束或中断线程</p></li></ul><h3 id="3-对线程安全的理解"><a href="#3-对线程安全的理解" class="headerlink" title="3.对线程安全的理解"></a>3.对线程安全的理解</h3><p>线程安全应该是内存安全，堆内存是共享的，可以被所有的线程访问</p><ul><li>如果多个线程调用访问一个对象，不用进行同步控制或者其他的协调操作，调用这个对象的行为都可以获得正确的结果，我们就说这个线程是安全的<ul><li>堆内存是每个线程和进程共有空间，分为局部堆和全局堆，全局堆是没有分配到空间，局部堆是用户分配的空间</li><li>堆在操作系统对进程初始化时分配，运行过程中也可以向系统中要额外的堆，但是用完了要还给操作系统，不然就是内存泄露</li><li>栈内存是每个线程独有的，保存其运行状态和局部自动变量</li></ul></li></ul><h3 id="4-Thread和Runnable的区别"><a href="#4-Thread和Runnable的区别" class="headerlink" title="4.Thread和Runnable的区别"></a>4.Thread和Runnable的区别</h3><p>他们本质上是继承关系，没有可比性，无论使用哪个方法都是先new Thread,然后执行run(),如果是复杂线程需求用Thread，如果是简单的执行一个线程方法用Runnable</p><h3 id="5-对守护线程的理解"><a href="#5-对守护线程的理解" class="headerlink" title="5.对守护线程的理解"></a>5.对守护线程的理解</h3><ul><li><p>守护线程是为了守护所有非守护线程，是他们的保姆</p></li><li><p>守护线程的终止自身无法控制</p></li><li><p>他的生死无关重要但却依赖整个进程而运行</p></li><li><p>应用场景</p><ul><li>来为其他线程提供服务的情况</li><li>在任何情况下，当程序结束这个线程仍正常并且立刻结束就可以当做守护线程使用，不能用于去访问固有资源</li></ul></li><li><p>Java自带的线程池，会将守护线程转换为用户线程，所以如果要使用后台线程就不能用java的线程池</p></li></ul><h3 id="6-ThreadLocal的原理和使用场景"><a href="#6-ThreadLocal的原理和使用场景" class="headerlink" title="6.ThreadLocal的原理和使用场景"></a>6.ThreadLocal的原理和使用场景</h3><ul><li>每一个Thread对象都含有一个ThreadLocalMap类型的 threadLocals成员变量，而这个变量里面存储着本线程所有的threadLocal对象和其对应的值</li><li>ThreadLocalMap是由一个个entry对象构成</li><li>由于每一个线程都有一个私有的ThreadLocalMap容器，这些容器相互独立，而且互不影响，因此不存在线程安全问题，不需要使用同步机制来保证多条线程访问容器的互斥性</li><li>应用场景<ul><li>在使用对象跨层传递的时候，可以避免ThreadLocal的多次传递，打破层次间的约束</li><li>线程间的数据隔离</li><li>进行事务操作，用于存储线程事务信息</li><li>数据库连接，session会话管理</li></ul></li></ul><h3 id="7-ThreadLocal内存泄露原因，如何避免"><a href="#7-ThreadLocal内存泄露原因，如何避免" class="headerlink" title="7.ThreadLocal内存泄露原因，如何避免"></a>7.ThreadLocal内存泄露原因，如何避免</h3><ul><li>内存泄露就是当线程申请内存资源之后，无法释放已申请的内存的，一次内存泄露的危害可以忽略，但是多次内存泄露之后，内存也迟早会用完</li><li>不再被使用的对象或变量仍占用内存不被回收，就是内存泄露</li><li>强引用就是普遍的new引用，一个对象具有强引用，就不会被内存回收，当内存空间不足，JVM宁愿抛出异常，程序终止，也不会回收此类对象</li><li>弱引用就是当JVM进行垃圾回收时，无论内存是否充足，都会先回收被弱引用的关联对象</li><li>ThreadLocal内存泄露的根本原因是ThreadLocalMap的生命周期和Thread一样长，如果没有手动删除对应的key就会导致内存泄露，而不是因为弱引用</li><li>ThreadLocal的正确使用方法<ul><li>每次使用完都调用ThreadLocal的remove()清除数据</li><li>将ThreadLocal的变量声明成private satatic，这样就会一直存在ThrealLocal的强引用，也就能通过ThreadLocal的弱引用访问到entry的value值，进而清除掉</li></ul></li></ul><h3 id="8-并行、并发、串行的区别"><a href="#8-并行、并发、串行的区别" class="headerlink" title="8.并行、并发、串行的区别"></a>8.并行、并发、串行的区别</h3><ul><li>串行不存在时间重叠，一件事情一件事情的接着做，前一个任务没搞定，后一个任务只能等着</li><li>并行存在时间重叠，同一时间做多件事情，互不干扰同时执行</li><li>并发允许两个任务互相干扰，同一时间点只有一个任务执行，交替执行</li></ul><h3 id="9-并发的三大特征"><a href="#9-并发的三大特征" class="headerlink" title="9.并发的三大特征"></a>9.并发的三大特征</h3><ul><li>原子性</li><li>可见性</li><li>有序性</li></ul><h3 id="10-volatile"><a href="#10-volatile" class="headerlink" title="10.volatile"></a>10.volatile</h3><ul><li>使用volatile关键字可以强制将修改的值立即写入主存</li><li>volatile关键字，当线程二进行修改时，会导致线程一的缓存变量缓存行失效</li><li>由于线程一的缓存失效，所以当线程需要使用时，就会去主存访问</li><li>volatile不能保证线程安全</li></ul><h3 id="11-为什么使用线程池，解释线程池的参数"><a href="#11-为什么使用线程池，解释线程池的参数" class="headerlink" title="11.为什么使用线程池，解释线程池的参数"></a>11.为什么使用线程池，解释线程池的参数</h3><ul><li>提高响应速度；当有任务进来就直接有线程可以使用</li><li>降低资源消耗；节省了创建线程和销毁线程的性能</li><li>提高线程的可管理性；线程是稀缺资源，统一调优分配监控</li><li>线程池参数<ul><li>corePoolSize,核心线程数，这类线程是常驻线程，正常情况下创建的工作线程数</li><li>maxinumPoolSize最大线程数，和核心线程数对应，当核心线程不够用时，就会创建新的线程，但是最大线程数不会超过最大线程数</li><li>keepAliveTime、unit表示超出核心线程数的线程能空闲存活时间，可以用setKeepAliveTime设置空闲时间</li><li>workQueue用来存放待处理任务，当核心线程用完时，还有任务就会放入待处理任务，当处理区任务存满时就会开始创建新的线程</li><li>ThreadFactory线程工厂，默认的线程工厂创建的是优先级相同的线程，而且不会有守护线程，所以一般都是自定义线程工厂</li><li>Handler任务拒绝策略，有两种情况，调用shutdown等方法关闭线程池后，线程池提交任务就会拒绝，另一种就是达到最大线程数之后已经没有线程来处理新提交的任务时，也会拒绝</li></ul></li></ul><h3 id="12-简述线程池处理流程"><a href="#12-简述线程池处理流程" class="headerlink" title="12.简述线程池处理流程"></a>12.简述线程池处理流程</h3><p>线程池执行任务，判断核心线程是否已满，未满则创建，已满则判断任务队列是否已满，未满则放入队列，已满则判断最大线程池是否已满，未满则创建新的临时线程执行，已满则任务拒绝策略，拒接任务</p><p><img src="/2023/07/25/xian-cheng-bing-fa-xiang-guan/Users\32191\AppData\Roaming\Typora\typora-user-images\image-20230725111934115.png" alt="image-20230725111934115"></p><h3 id="13-线程池中阻塞队列的作用，为什么是先添加队列而不是创建最大线程"><a href="#13-线程池中阻塞队列的作用，为什么是先添加队列而不是创建最大线程" class="headerlink" title="13.线程池中阻塞队列的作用，为什么是先添加队列而不是创建最大线程"></a>13.线程池中阻塞队列的作用，为什么是先添加队列而不是创建最大线程</h3><ul><li><p>一般队列只能保证作为一个有限长度的缓冲区，如果超出了有效长度，就无法保留当前任务了，阻塞队列可以通过阻塞，保留住当前想要继续进入队列的任务</p><ul><li>阻塞队列自带阻塞和唤醒功能，不需要额为处理</li></ul></li><li><p>在创建新的线程时，是需要重新获得全局锁的，这个时候其他的就得阻塞了，影响了整体效率</p><ul><li>就好比一个企业里面有10个（core）正式工的名额，最多招10个正式工，要是任务超过正式工人数 （task &gt; core）的情况下，工厂领导（线程池）不是首先扩招工人，还是这10人，但是任务可以稍微积 压一下，即先放到队列去（代价低）。10个正式工慢慢干，迟早会干完的，要是任务还在继续增加，超 过正式工的加班忍耐极限了（队列满了），就的招外包帮忙了（注意是临时工）要是正式工加上外包还 是不能完成任务，那新来的任务就会被领导拒绝了（线程池的拒绝策略）。</li></ul></li></ul><h3 id="14-线程池中线程复用原理"><a href="#14-线程池中线程复用原理" class="headerlink" title="14.线程池中线程复用原理"></a>14.线程池中线程复用原理</h3><ul><li>线程池将线程和任务解耦，线程是线程，任务是任务，摆脱了之前用Thread创建一个线程必须对应一个任务的限制</li><li>在线程池中，可以不断的从阻塞队列中获取新任务执行，其原理在于对Thread进行了封装，每次任务结束并不是每次都再调用start()方法重新创建线程，而是让每个线程去执行一个“循环任务”，不断检查是否有任务需要执行，如果有就执行，也就是调用run()方法；</li></ul>]]></content>
    
    
    <summary type="html">&lt;h2 id=&quot;线程并发相关&quot;&gt;&lt;a href=&quot;#线程并发相关&quot; class=&quot;headerlink&quot; title=&quot;线程并发相关&quot;&gt;&lt;/a&gt;线程并发相关&lt;/h2&gt;</summary>
    
    
    
    <category term="面" scheme="https://llzzoomm.github.io/categories/%E9%9D%A2/"/>
    
    
    <category term="面" scheme="https://llzzoomm.github.io/tags/%E9%9D%A2/"/>
    
  </entry>
  
  <entry>
    <title>分布式搜索引擎02</title>
    <link href="https://llzzoomm.github.io/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/"/>
    <id>https://llzzoomm.github.io/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/</id>
    <published>2023-07-20T11:31:50.973Z</published>
    <updated>2023-07-20T11:30:45.935Z</updated>
    
    <content type="html"><![CDATA[<h1 id="分布式搜索引擎02"><a href="#分布式搜索引擎02" class="headerlink" title="分布式搜索引擎02"></a>分布式搜索引擎02</h1><span id="more"></span><h1 id="1-DSL查询文档"><a href="#1-DSL查询文档" class="headerlink" title="1.DSL查询文档"></a>1.DSL查询文档</h1><p>elasticsearch的查询依然是基于JSON风格的DSL来实现的。</p><h2 id="1-1-DSL查询分类"><a href="#1-1-DSL查询分类" class="headerlink" title="1.1.DSL查询分类"></a>1.1.DSL查询分类</h2><p>Elasticsearch提供了基于JSON的DSL（<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html">Domain Specific Language</a>）来定义查询。常见的查询类型包括：</p><ul><li><p><strong>查询所有</strong>：查询出所有数据，一般测试用。例如：match_all</p></li><li><p><strong>全文检索（full text）查询</strong>：利用分词器对用户输入内容分词，然后去倒排索引库中匹配。例如：</p><ul><li>match_query</li><li>multi_match_query</li></ul></li><li><p><strong>精确查询</strong>：根据精确词条值查找数据，一般是查找keyword、数值、日期、boolean等类型字段。例如：</p><ul><li>ids</li><li>range</li><li>term</li></ul></li><li><p><strong>地理（geo）查询</strong>：根据经纬度查询。例如：</p><ul><li>geo_distance</li><li>geo_bounding_box</li></ul></li><li><p><strong>复合（compound）查询</strong>：复合查询可以将上述各种查询条件组合起来，合并查询条件。例如：</p><ul><li>bool</li><li>function_score</li></ul></li></ul><p>查询的语法基本一致：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET&nbsp;/indexName/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"query"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"查询类型"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"查询条件"</span><span class="punctuation">:</span>&nbsp;<span class="string">"条件值"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>我们以查询所有为例，其中：</p><ul><li>查询类型为match_all</li><li>没有查询条件</li></ul><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 查询所有</span></span><br><span class="line">GET&nbsp;/indexName/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"query"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"match_all"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">    <span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>其它查询无非就是<strong>查询类型</strong>、<strong>查询条件</strong>的变化。</p><h2 id="1-2-全文检索查询"><a href="#1-2-全文检索查询" class="headerlink" title="1.2.全文检索查询"></a>1.2.全文检索查询</h2><h3 id="1-2-1-使用场景"><a href="#1-2-1-使用场景" class="headerlink" title="1.2.1.使用场景"></a>1.2.1.使用场景</h3><p>全文检索查询的基本流程如下：</p><ul><li>对用户搜索的内容做分词，得到词条</li><li>根据词条去倒排索引库中匹配，得到文档id</li><li>根据文档id找到文档，返回给用户</li></ul><p>比较常用的场景包括：</p><ul><li>商城的输入框搜索</li><li>百度输入框搜索</li></ul><p>例如京东：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721165326938.png" alt="image-20210721165326938"></p><p>因为是拿着词条去匹配，因此参与搜索的字段也必须是可分词的text类型的字段。</p><h3 id="1-2-2-基本语法"><a href="#1-2-2-基本语法" class="headerlink" title="1.2.2.基本语法"></a>1.2.2.基本语法</h3><p>常见的全文检索查询包括：</p><ul><li>match查询：单字段查询</li><li>multi_match查询：多字段查询，任意一个字段符合条件就算符合查询条件</li></ul><p>match查询语法如下：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">GET&nbsp;/indexName/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"query"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"match"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"FIELD"</span><span class="punctuation">:</span>&nbsp;<span class="string">"TEXT"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>mulit_match语法如下：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">GET&nbsp;/indexName/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"query"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"multi_match"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"query"</span><span class="punctuation">:</span>&nbsp;<span class="string">"TEXT"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"fields"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">[</span><span class="string">"FIELD1"</span><span class="punctuation">,</span>&nbsp;<span class="string">" FIELD12"</span><span class="punctuation">]</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><h3 id="1-2-3-示例"><a href="#1-2-3-示例" class="headerlink" title="1.2.3.示例"></a>1.2.3.示例</h3><p>match查询示例：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721170455419.png" alt="image-20210721170455419"></p><p>multi_match查询示例：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721170720691.png" alt="image-20210721170720691"></p><p>可以看到，两种查询结果是一样的，为什么？</p><p>因为我们将brand、name、business值都利用copy_to复制到了all字段中。因此你根据三个字段搜索，和根据all字段搜索效果当然一样了。</p><p>但是，搜索字段越多，对查询性能影响越大，因此建议采用copy_to，然后单字段查询的方式。</p><h3 id="1-2-4-总结"><a href="#1-2-4-总结" class="headerlink" title="1.2.4.总结"></a>1.2.4.总结</h3><p>match和multi_match的区别是什么？</p><ul><li>match：根据一个字段查询</li><li>multi_match：根据多个字段查询，参与查询字段越多，查询性能越差</li></ul><h2 id="1-3-精准查询"><a href="#1-3-精准查询" class="headerlink" title="1.3.精准查询"></a>1.3.精准查询</h2><p>精确查询一般是查找keyword、数值、日期、boolean等类型字段。所以<strong>不会</strong>对搜索条件分词。常见的有：</p><ul><li>term：根据词条精确值查询</li><li>range：根据值的范围查询</li></ul><h3 id="1-3-1-term查询"><a href="#1-3-1-term查询" class="headerlink" title="1.3.1.term查询"></a>1.3.1.term查询</h3><p>因为精确查询的字段搜是不分词的字段，因此查询的条件也必须是<strong>不分词</strong>的词条。查询时，用户输入的内容跟自动值完全匹配时才认为符合条件。如果用户输入的内容过多，反而搜索不到数据。</p><p>语法说明：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&nbsp;term查询</span></span><br><span class="line">GET&nbsp;/indexName/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"query"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"term"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"FIELD"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"value"</span><span class="punctuation">:</span>&nbsp;<span class="string">"VALUE"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>示例：</p><p>当我搜索的是精确词条时，能正确查询出结果：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721171655308.png" alt="image-20210721171655308"></p><p>但是，当我搜索的内容不是词条，而是多个词语形成的短语时，反而搜索不到：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721171838378.png" alt="image-20210721171838378"></p><h3 id="1-3-2-range查询"><a href="#1-3-2-range查询" class="headerlink" title="1.3.2.range查询"></a>1.3.2.range查询</h3><p>范围查询，一般应用在对数值类型做范围过滤的时候。比如做价格范围过滤。</p><p>基本语法：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&nbsp;range查询</span></span><br><span class="line">GET&nbsp;/indexName/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"query"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"range"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"FIELD"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"gte"</span><span class="punctuation">:</span>&nbsp;<span class="number">10</span><span class="punctuation">,</span> <span class="comment">// 这里的gte代表大于等于，gt则代表大于</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"lte"</span><span class="punctuation">:</span>&nbsp;<span class="number">20</span> <span class="comment">// lte代表小于等于，lt则代表小于</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>示例：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721172307172.png" alt="image-20210721172307172"></p><h3 id="1-3-3-总结"><a href="#1-3-3-总结" class="headerlink" title="1.3.3.总结"></a>1.3.3.总结</h3><p>精确查询常见的有哪些？</p><ul><li>term查询：根据词条精确匹配，一般搜索keyword类型、数值类型、布尔类型、日期类型字段</li><li>range查询：根据数值范围查询，可以是数值、日期的范围</li></ul><h2 id="1-4-地理坐标查询"><a href="#1-4-地理坐标查询" class="headerlink" title="1.4.地理坐标查询"></a>1.4.地理坐标查询</h2><p>所谓的地理坐标查询，其实就是根据经纬度查询，官方文档：<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/geo-queries.html">https://www.elastic.co/guide/en/elasticsearch/reference/current/geo-queries.html</a></p><p>常见的使用场景包括：</p><ul><li>携程：搜索我附近的酒店</li><li>滴滴：搜索我附近的出租车</li><li>微信：搜索我附近的人</li></ul><p>附近的酒店：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721172645103.png" alt="image-20210721172645103"> </p><p>附近的车：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721172654880.png" alt="image-20210721172654880"> </p><h3 id="1-4-1-矩形范围查询"><a href="#1-4-1-矩形范围查询" class="headerlink" title="1.4.1.矩形范围查询"></a>1.4.1.矩形范围查询</h3><p>矩形范围查询，也就是geo_bounding_box查询，查询坐标落在某个矩形范围的所有文档：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/DKV9HZbVS6.gif" alt="DKV9HZbVS6"></p><p>查询时，需要指定矩形的<strong>左上</strong>、<strong>右下</strong>两个点的坐标，然后画出一个矩形，落在该矩形内的都是符合条件的点。</p><p>语法如下：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&nbsp;geo_bounding_box查询</span></span><br><span class="line">GET&nbsp;/indexName/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"query"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"geo_bounding_box"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"FIELD"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"top_left"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span> <span class="comment">// 左上点</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"lat"</span><span class="punctuation">:</span>&nbsp;<span class="number">31.1</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"lon"</span><span class="punctuation">:</span>&nbsp;<span class="number">121.5</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"bottom_right"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span> <span class="comment">// 右下点</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"lat"</span><span class="punctuation">:</span>&nbsp;<span class="number">30.9</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"lon"</span><span class="punctuation">:</span>&nbsp;<span class="number">121.7</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>这种并不符合“附近的人”这样的需求，所以我们就不做了。</p><h3 id="1-4-2-附近查询"><a href="#1-4-2-附近查询" class="headerlink" title="1.4.2.附近查询"></a>1.4.2.附近查询</h3><p>附近查询，也叫做距离查询（geo_distance）：查询到指定中心点小于某个距离值的所有文档。</p><p>换句话来说，在地图上找一个点作为圆心，以指定距离为半径，画一个圆，落在圆内的坐标都算符合条件：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/vZrdKAh19C.gif" alt="vZrdKAh19C"></p><p>语法说明：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&nbsp;geo_distance 查询</span></span><br><span class="line">GET&nbsp;/indexName/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"query"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"geo_distance"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"distance"</span><span class="punctuation">:</span>&nbsp;<span class="string">"15km"</span><span class="punctuation">,</span> <span class="comment">// 半径</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"FIELD"</span><span class="punctuation">:</span>&nbsp;<span class="string">"31.21,121.5"</span> <span class="comment">// 圆心</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>示例：</p><p>我们先搜索陆家嘴附近15km的酒店：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721175443234.png" alt="image-20210721175443234"></p><p>发现共有47家酒店。</p><p>然后把半径缩短到3公里：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721182031475.png" alt="image-20210721182031475"></p><p>可以发现，搜索到的酒店数量减少到了5家。</p><h2 id="1-5-复合查询"><a href="#1-5-复合查询" class="headerlink" title="1.5.复合查询"></a>1.5.复合查询</h2><p>复合（compound）查询：复合查询可以将其它简单查询组合起来，实现更复杂的搜索逻辑。常见的有两种：</p><ul><li>fuction score：算分函数查询，可以控制文档相关性算分，控制文档排名</li><li>bool query：布尔查询，利用逻辑关系组合多个其它的查询，实现复杂搜索</li></ul><h3 id="1-5-1-相关性算分"><a href="#1-5-1-相关性算分" class="headerlink" title="1.5.1.相关性算分"></a>1.5.1.相关性算分</h3><p>当我们利用match查询时，文档结果会根据与搜索词条的关联度打分（_score），返回结果时按照分值降序排列。</p><p>例如，我们搜索 “虹桥如家”，结果如下：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"_score"</span>&nbsp;<span class="punctuation">:</span>&nbsp;<span class="number">17.850193</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"_source"</span>&nbsp;<span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"name"</span>&nbsp;<span class="punctuation">:</span>&nbsp;<span class="string">"虹桥如家酒店真不错"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"_score"</span>&nbsp;<span class="punctuation">:</span>&nbsp;<span class="number">12.259849</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"_source"</span>&nbsp;<span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"name"</span>&nbsp;<span class="punctuation">:</span>&nbsp;<span class="string">"外滩如家酒店真不错"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"_score"</span>&nbsp;<span class="punctuation">:</span>&nbsp;<span class="number">11.91091</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"_source"</span>&nbsp;<span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"name"</span>&nbsp;<span class="punctuation">:</span>&nbsp;<span class="string">"迪士尼如家酒店真不错"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></tbody></table></figure><p>在elasticsearch中，早期使用的打分算法是TF-IDF算法，公式如下：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721190152134.png" alt="image-20210721190152134"></p><p>在后来的5.1版本升级中，elasticsearch将算法改进为BM25算法，公式如下：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721190416214.png" alt="image-20210721190416214"></p><p>TF-IDF算法有一各缺陷，就是词条频率越高，文档得分也会越高，单个词条对文档影响较大。而BM25则会让单个词条的算分有一个上限，曲线更加平滑：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721190907320.png" alt="image-20210721190907320"></p><p>小结：elasticsearch会根据词条和文档的相关度做打分，算法由两种：</p><ul><li>TF-IDF算法</li><li>BM25算法，elasticsearch5.1版本后采用的算法</li></ul><h3 id="1-5-2-算分函数查询"><a href="#1-5-2-算分函数查询" class="headerlink" title="1.5.2.算分函数查询"></a>1.5.2.算分函数查询</h3><p>根据相关度打分是比较合理的需求，但<strong>合理的不一定是产品经理需要</strong>的。</p><p>以百度为例，你搜索的结果中，并不是相关度越高排名越靠前，而是谁掏的钱多排名就越靠前。如图：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721191144560.png" alt="image-20210721191144560"></p><p>要想认为控制相关性算分，就需要利用elasticsearch中的function score 查询了。</p><h4 id="1）语法说明"><a href="#1）语法说明" class="headerlink" title="1）语法说明"></a>1）语法说明</h4><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721191544750.png" alt="image-20210721191544750"></p><p>function score 查询中包含四部分内容：</p><ul><li><strong>原始查询</strong>条件：query部分，基于这个条件搜索文档，并且基于BM25算法给文档打分，<strong>原始算分</strong>（query score)</li><li><strong>过滤条件</strong>：filter部分，符合该条件的文档才会重新算分</li><li><strong>算分函数</strong>：符合filter条件的文档要根据这个函数做运算，得到的<strong>函数算分</strong>（function score），有四种函数<ul><li>weight：函数结果是常量</li><li>field_value_factor：以文档中的某个字段值作为函数结果</li><li>random_score：以随机数作为函数结果</li><li>script_score：自定义算分函数算法</li></ul></li><li><strong>运算模式</strong>：算分函数的结果、原始查询的相关性算分，两者之间的运算方式，包括：<ul><li>multiply：相乘</li><li>replace：用function score替换query score</li><li>其它，例如：sum、avg、max、min</li></ul></li></ul><p>function score的运行流程如下：</p><ul><li>1）根据<strong>原始条件</strong>查询搜索文档，并且计算相关性算分，称为<strong>原始算分</strong>（query score）</li><li>2）根据<strong>过滤条件</strong>，过滤文档</li><li>3）符合<strong>过滤条件</strong>的文档，基于<strong>算分函数</strong>运算，得到<strong>函数算分</strong>（function score）</li><li>4）将<strong>原始算分</strong>（query score）和<strong>函数算分</strong>（function score）基于<strong>运算模式</strong>做运算，得到最终结果，作为相关性算分。</li></ul><p>因此，其中的关键点是：</p><ul><li>过滤条件：决定哪些文档的算分被修改</li><li>算分函数：决定函数算分的算法</li><li>运算模式：决定最终算分结果</li></ul><h4 id="2）示例"><a href="#2）示例" class="headerlink" title="2）示例"></a>2）示例</h4><p>需求：给“如家”这个品牌的酒店排名靠前一些</p><p>翻译一下这个需求，转换为之前说的四个要点：</p><ul><li>原始条件：不确定，可以任意变化</li><li>过滤条件：brand = “如家”</li><li>算分函数：可以简单粗暴，直接给固定的算分结果，weight</li><li>运算模式：比如求和</li></ul><p>因此最终的DSL语句如下：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">GET&nbsp;/hotel/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"query"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"function_score"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"query"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span>  .... <span class="punctuation">}</span><span class="punctuation">,</span> <span class="comment">// 原始查询，可以是任意条件</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"functions"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">[</span>&nbsp;<span class="comment">//&nbsp;算分函数</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"filter"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span>&nbsp;<span class="comment">//&nbsp;满足的条件，品牌必须是如家</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"term"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"brand"</span><span class="punctuation">:</span>&nbsp;<span class="string">"如家"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"weight"</span><span class="punctuation">:</span>&nbsp;<span class="number">2</span>&nbsp;<span class="comment">//&nbsp;算分权重为2</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"boost_mode"</span><span class="punctuation">:</span> <span class="string">"sum"</span> <span class="comment">// 加权模式，求和</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>测试，在未添加算分函数时，如家得分如下：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721193152520.png" alt="image-20210721193152520"></p><p>添加了算分函数后，如家得分就提升了：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721193458182.png" alt="image-20210721193458182"></p><h4 id="3）小结"><a href="#3）小结" class="headerlink" title="3）小结"></a>3）小结</h4><p>function score query定义的三要素是什么？</p><ul><li>过滤条件：哪些文档要加分</li><li>算分函数：如何计算function score</li><li>加权方式：function score 与 query score如何运算</li></ul><h3 id="1-5-3-布尔查询"><a href="#1-5-3-布尔查询" class="headerlink" title="1.5.3.布尔查询"></a>1.5.3.布尔查询</h3><p>布尔查询是一个或多个查询子句的组合，每一个子句就是一个<strong>子查询</strong>。子查询的组合方式有：</p><ul><li>must：必须匹配每个子查询，类似“与”</li><li>should：选择性匹配子查询，类似“或”</li><li>must_not：必须不匹配，<strong>不参与算分</strong>，类似“非”</li><li>filter：必须匹配，<strong>不参与算分</strong></li></ul><p>比如在搜索酒店时，除了关键字搜索外，我们还可能根据品牌、价格、城市等字段做过滤：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721193822848.png" alt="image-20210721193822848"></p><p>每一个不同的字段，其查询的条件、方式都不一样，必须是多个不同的查询，而要组合这些查询，就必须用bool查询了。</p><p>需要注意的是，搜索时，参与<strong>打分的字段越多，查询的性能也越差</strong>。因此这种多条件查询时，建议这样做：</p><ul><li>搜索框的关键字搜索，是全文检索查询，使用must查询，参与算分</li><li>其它过滤条件，采用filter查询。不参与算分</li></ul><h4 id="1）语法示例："><a href="#1）语法示例：" class="headerlink" title="1）语法示例："></a>1）语法示例：</h4><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">GET&nbsp;/hotel/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"query"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"bool"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"must"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">[</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">{</span><span class="attr">"term"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span><span class="attr">"city"</span><span class="punctuation">:</span>&nbsp;<span class="string">"上海"</span>&nbsp;<span class="punctuation">}</span><span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"should"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">[</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">{</span><span class="attr">"term"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span><span class="attr">"brand"</span><span class="punctuation">:</span>&nbsp;<span class="string">"皇冠假日"</span>&nbsp;<span class="punctuation">}</span><span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">{</span><span class="attr">"term"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span><span class="attr">"brand"</span><span class="punctuation">:</span>&nbsp;<span class="string">"华美达"</span>&nbsp;<span class="punctuation">}</span><span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"must_not"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">[</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">{</span>&nbsp;<span class="attr">"range"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span>&nbsp;<span class="attr">"price"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span>&nbsp;<span class="attr">"lte"</span><span class="punctuation">:</span>&nbsp;<span class="number">500</span>&nbsp;<span class="punctuation">}</span>&nbsp;<span class="punctuation">}</span><span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"filter"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">[</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">{</span>&nbsp;<span class="attr">"range"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span><span class="attr">"score"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span>&nbsp;<span class="attr">"gte"</span><span class="punctuation">:</span>&nbsp;<span class="number">45</span>&nbsp;<span class="punctuation">}</span>&nbsp;<span class="punctuation">}</span><span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">]</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><h4 id="2）示例-1"><a href="#2）示例-1" class="headerlink" title="2）示例"></a>2）示例</h4><p>需求：搜索名字包含“如家”，价格不高于400，在坐标31.21,121.5周围10km范围内的酒店。</p><p>分析：</p><ul><li>名称搜索，属于全文检索查询，应该参与算分。放到must中</li><li>价格不高于400，用range查询，属于过滤条件，不参与算分。放到must_not中</li><li>周围10km范围内，用geo_distance查询，属于过滤条件，不参与算分。放到filter中</li></ul><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721194744183.png" alt="image-20210721194744183"></p><h4 id="3）小结-1"><a href="#3）小结-1" class="headerlink" title="3）小结"></a>3）小结</h4><p>bool查询有几种逻辑关系？</p><ul><li>must：必须匹配的条件，可以理解为“与”</li><li>should：选择性匹配的条件，可以理解为“或”</li><li>must_not：必须不匹配的条件，不参与打分</li><li>filter：必须匹配的条件，不参与打分</li></ul><h1 id="2-搜索结果处理"><a href="#2-搜索结果处理" class="headerlink" title="2.搜索结果处理"></a>2.搜索结果处理</h1><p>搜索的结果可以按照用户指定的方式去处理或展示。</p><h2 id="2-1-排序"><a href="#2-1-排序" class="headerlink" title="2.1.排序"></a>2.1.排序</h2><p>elasticsearch默认是根据相关度算分（_score）来排序，但是也支持自定义方式对搜索<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/sort-search-results.html">结果排序</a>。可以排序字段类型有：keyword类型、数值类型、地理坐标类型、日期类型等。</p><h3 id="2-1-1-普通字段排序"><a href="#2-1-1-普通字段排序" class="headerlink" title="2.1.1.普通字段排序"></a>2.1.1.普通字段排序</h3><p>keyword、数值、日期类型排序的语法基本一致。</p><p><strong>语法</strong>：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">GET&nbsp;/indexName/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"query"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"match_all"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span><span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"sort"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">[</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"FIELD"</span><span class="punctuation">:</span>&nbsp;<span class="string">"desc"</span>&nbsp;&nbsp;<span class="comment">//&nbsp;排序字段、排序方式ASC、DESC</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>排序条件是一个数组，也就是可以写多个排序条件。按照声明的顺序，当第一个条件相等时，再按照第二个条件排序，以此类推</p><p><strong>示例</strong>：</p><p>需求描述：酒店数据按照用户评价（score)降序排序，评价相同的按照价格(price)升序排序</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721195728306.png" alt="image-20210721195728306"></p><h3 id="2-1-2-地理坐标排序"><a href="#2-1-2-地理坐标排序" class="headerlink" title="2.1.2.地理坐标排序"></a>2.1.2.地理坐标排序</h3><p>地理坐标排序略有不同。</p><p><strong>语法说明</strong>：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">GET&nbsp;/indexName/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"query"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"match_all"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span><span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"sort"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">[</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"_geo_distance"</span>&nbsp;<span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"FIELD"</span>&nbsp;<span class="punctuation">:</span>&nbsp;<span class="string">"纬度，经度"</span><span class="punctuation">,</span> <span class="comment">// 文档中geo_point类型的字段名、目标坐标点</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"order"</span>&nbsp;<span class="punctuation">:</span>&nbsp;<span class="string">"asc"</span><span class="punctuation">,</span> <span class="comment">// 排序方式</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"unit"</span>&nbsp;<span class="punctuation">:</span>&nbsp;<span class="string">"km"</span> <span class="comment">// 排序的距离单位</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>这个查询的含义是：</p><ul><li>指定一个坐标，作为目标点</li><li>计算每一个文档中，指定字段（必须是geo_point类型）的坐标 到目标点的距离是多少</li><li>根据距离排序</li></ul><p><strong>示例：</strong></p><p>需求描述：实现对酒店数据按照到你的位置坐标的距离升序排序</p><p>提示：获取你的位置的经纬度的方式：<a href="https://lbs.amap.com/demo/jsapi-v2/example/map/click-to-get-lnglat/">https://lbs.amap.com/demo/jsapi-v2/example/map/click-to-get-lnglat/</a></p><p>假设我的位置是：31.034661，121.612282，寻找我周围距离最近的酒店。</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721200214690.png" alt="image-20210721200214690"></p><h2 id="2-2-分页"><a href="#2-2-分页" class="headerlink" title="2.2.分页"></a>2.2.分页</h2><p>elasticsearch 默认情况下只返回top10的数据。而如果要查询更多数据就需要修改分页参数了。elasticsearch中通过修改from、size参数来控制要返回的分页结果：</p><ul><li>from：从第几个文档开始</li><li>size：总共查询几个文档</li></ul><p>类似于mysql中的<code>limit ?, ?</code></p><h3 id="2-2-1-基本的分页"><a href="#2-2-1-基本的分页" class="headerlink" title="2.2.1.基本的分页"></a>2.2.1.基本的分页</h3><p>分页的基本语法如下：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">GET&nbsp;/hotel/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"query"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"match_all"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span><span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"from"</span><span class="punctuation">:</span>&nbsp;<span class="number">0</span><span class="punctuation">,</span>&nbsp;<span class="comment">//&nbsp;分页开始的位置，默认为0</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"size"</span><span class="punctuation">:</span>&nbsp;<span class="number">10</span><span class="punctuation">,</span>&nbsp;<span class="comment">//&nbsp;期望获取的文档总数</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"sort"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">[</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">{</span><span class="attr">"price"</span><span class="punctuation">:</span>&nbsp;<span class="string">"asc"</span><span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><h3 id="2-2-2-深度分页问题"><a href="#2-2-2-深度分页问题" class="headerlink" title="2.2.2.深度分页问题"></a>2.2.2.深度分页问题</h3><p>现在，我要查询990~1000的数据，查询逻辑要这么写：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">GET&nbsp;/hotel/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"query"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"match_all"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span><span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"from"</span><span class="punctuation">:</span>&nbsp;<span class="number">990</span><span class="punctuation">,</span>&nbsp;<span class="comment">//&nbsp;分页开始的位置，默认为0</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"size"</span><span class="punctuation">:</span>&nbsp;<span class="number">10</span><span class="punctuation">,</span>&nbsp;<span class="comment">//&nbsp;期望获取的文档总数</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"sort"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">[</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">{</span><span class="attr">"price"</span><span class="punctuation">:</span>&nbsp;<span class="string">"asc"</span><span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>这里是查询990开始的数据，也就是 第990~第1000条 数据。</p><p>不过，elasticsearch内部分页时，必须先查询 0~1000条，然后截取其中的990 ~ 1000的这10条：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721200643029.png" alt="image-20210721200643029"></p><p>查询TOP1000，如果es是单点模式，这并无太大影响。</p><p>但是elasticsearch将来一定是集群，例如我集群有5个节点，我要查询TOP1000的数据，并不是每个节点查询200条就可以了。</p><p>因为节点A的TOP200，在另一个节点可能排到10000名以外了。</p><p>因此要想获取整个集群的TOP1000，必须先查询出每个节点的TOP1000，汇总结果后，重新排名，重新截取TOP1000。</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721201003229.png" alt="image-20210721201003229"></p><p>那如果我要查询9900~10000的数据呢？是不是要先查询TOP10000呢？那每个节点都要查询10000条？汇总到内存中？</p><p>当查询分页深度较大时，汇总数据过多，对内存和CPU会产生非常大的压力，因此elasticsearch会禁止from+ size 超过10000的请求。</p><p>针对深度分页，ES提供了两种解决方案，<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/paginate-search-results.html">官方文档</a>：</p><ul><li>search after：分页时需要排序，原理是从上一次的排序值开始，查询下一页数据。官方推荐使用的方式。</li><li>scroll：原理将排序后的文档id形成快照，保存在内存。官方已经不推荐使用。</li></ul><h3 id="2-2-3-小结"><a href="#2-2-3-小结" class="headerlink" title="2.2.3.小结"></a>2.2.3.小结</h3><p>分页查询的常见实现方案以及优缺点：</p><ul><li><p><code>from + size</code>：</p><ul><li>优点：支持随机翻页</li><li>缺点：深度分页问题，默认查询上限（from + size）是10000</li><li>场景：百度、京东、谷歌、淘宝这样的随机翻页搜索</li></ul></li><li><p><code>after search</code>：</p><ul><li>优点：没有查询上限（单次查询的size不超过10000）</li><li>缺点：只能向后逐页查询，不支持随机翻页</li><li>场景：没有随机翻页需求的搜索，例如手机向下滚动翻页</li></ul></li><li><p><code>scroll</code>：</p><ul><li>优点：没有查询上限（单次查询的size不超过10000）</li><li>缺点：会有额外内存消耗，并且搜索结果是非实时的</li><li>场景：海量数据的获取和迁移。从ES7.1开始不推荐，建议用 after search方案。</li></ul></li></ul><h2 id="2-3-高亮"><a href="#2-3-高亮" class="headerlink" title="2.3.高亮"></a>2.3.高亮</h2><h3 id="2-3-1-高亮原理"><a href="#2-3-1-高亮原理" class="headerlink" title="2.3.1.高亮原理"></a>2.3.1.高亮原理</h3><p>什么是高亮显示呢？</p><p>我们在百度，京东搜索时，关键字会变成红色，比较醒目，这叫高亮显示：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721202705030.png" alt="image-20210721202705030"></p><p>高亮显示的实现分为两步：</p><ul><li>1）给文档中的所有关键字都添加一个标签，例如<code>&lt;em&gt;</code>标签</li><li>2）页面给<code>&lt;em&gt;</code>标签编写CSS样式</li></ul><h3 id="2-3-2-实现高亮"><a href="#2-3-2-实现高亮" class="headerlink" title="2.3.2.实现高亮"></a>2.3.2.实现高亮</h3><p><strong>高亮的语法</strong>：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">GET&nbsp;/hotel/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"query"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"match"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"FIELD"</span><span class="punctuation">:</span>&nbsp;<span class="string">"TEXT"</span> <span class="comment">// 查询条件，高亮一定要使用全文检索查询</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"highlight"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"fields"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span>&nbsp;<span class="comment">//&nbsp;指定要高亮的字段</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"FIELD"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"pre_tags"</span><span class="punctuation">:</span>&nbsp;<span class="string">"&lt;em&gt;"</span><span class="punctuation">,</span>&nbsp;&nbsp;<span class="comment">//&nbsp;用来标记高亮字段的前置标签</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"post_tags"</span><span class="punctuation">:</span>&nbsp;<span class="string">"&lt;/em&gt;"</span>&nbsp;<span class="comment">//&nbsp;用来标记高亮字段的后置标签</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p><strong>注意：</strong></p><ul><li>高亮是对关键字高亮，因此<strong>搜索条件必须带有关键字</strong>，而不能是范围这样的查询。</li><li>默认情况下，<strong>高亮的字段，必须与搜索指定的字段一致</strong>，否则无法高亮</li><li>如果要对非搜索字段高亮，则需要添加一个属性：required_field_match=false</li></ul><p><strong>示例</strong>：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721203349633.png" alt="image-20210721203349633"></p><h2 id="2-4-总结"><a href="#2-4-总结" class="headerlink" title="2.4.总结"></a>2.4.总结</h2><p>查询的DSL是一个大的JSON对象，包含下列属性：</p><ul><li>query：查询条件</li><li>from和size：分页条件</li><li>sort：排序条件</li><li>highlight：高亮条件</li></ul><p>示例：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721203657850.png" alt="image-20210721203657850"></p><h1 id="3-RestClient查询文档"><a href="#3-RestClient查询文档" class="headerlink" title="3.RestClient查询文档"></a>3.RestClient查询文档</h1><p>文档的查询同样适用昨天学习的 RestHighLevelClient对象，基本步骤包括：</p><ul><li>1）准备Request对象</li><li>2）准备请求参数</li><li>3）发起请求</li><li>4）解析响应</li></ul><h2 id="3-1-快速入门"><a href="#3-1-快速入门" class="headerlink" title="3.1.快速入门"></a>3.1.快速入门</h2><p>我们以match_all查询为例</p><h3 id="3-1-1-发起查询请求"><a href="#3-1-1-发起查询请求" class="headerlink" title="3.1.1.发起查询请求"></a>3.1.1.发起查询请求</h3><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721203950559.png" alt="image-20210721203950559"></p><p>代码解读：</p><ul><li><p>第一步，创建<code>SearchRequest</code>对象，指定索引库名</p></li><li><p>第二步，利用<code>request.source()</code>构建DSL，DSL中可以包含查询、分页、排序、高亮等</p><ul><li><code>query()</code>：代表查询条件，利用<code>QueryBuilders.matchAllQuery()</code>构建一个match_all查询的DSL</li></ul></li><li><p>第三步，利用client.search()发送请求，得到响应</p></li></ul><p>这里关键的API有两个，一个是<code>request.source()</code>，其中包含了查询、排序、分页、高亮等所有功能：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721215640790.png" alt="image-20210721215640790"></p><p>另一个是<code>QueryBuilders</code>，其中包含match、term、function_score、bool等各种查询：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721215729236.png" alt="image-20210721215729236"></p><h3 id="3-1-2-解析响应"><a href="#3-1-2-解析响应" class="headerlink" title="3.1.2.解析响应"></a>3.1.2.解析响应</h3><p>响应结果的解析：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721214221057.png" alt="image-20210721214221057"></p><p>elasticsearch返回的结果是一个JSON字符串，结构包含：</p><ul><li><code>hits</code>：命中的结果<ul><li><code>total</code>：总条数，其中的value是具体的总条数值</li><li><code>max_score</code>：所有结果中得分最高的文档的相关性算分</li><li><code>hits</code>：搜索结果的文档数组，其中的每个文档都是一个json对象<ul><li><code>_source</code>：文档中的原始数据，也是json对象</li></ul></li></ul></li></ul><p>因此，我们解析响应结果，就是逐层解析JSON字符串，流程如下：</p><ul><li><code>SearchHits</code>：通过response.getHits()获取，就是JSON中的最外层的hits，代表命中的结果<ul><li><code>SearchHits#getTotalHits().value</code>：获取总条数信息</li><li><code>SearchHits#getHits()</code>：获取SearchHit数组，也就是文档数组<ul><li><code>SearchHit#getSourceAsString()</code>：获取文档结果中的_source，也就是原始的json文档数据</li></ul></li></ul></li></ul><h3 id="3-1-3-完整代码"><a href="#3-1-3-完整代码" class="headerlink" title="3.1.3.完整代码"></a>3.1.3.完整代码</h3><p>完整代码如下：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testMatchAll</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="comment">// 1.准备Request</span></span><br><span class="line">    <span class="type">SearchRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SearchRequest</span>(<span class="string">"hotel"</span>);</span><br><span class="line">    <span class="comment">// 2.准备DSL</span></span><br><span class="line">    request.source()</span><br><span class="line">        .query(QueryBuilders.matchAllQuery());</span><br><span class="line">    <span class="comment">// 3.发送请求</span></span><br><span class="line">    <span class="type">SearchResponse</span> <span class="variable">response</span> <span class="operator">=</span> client.search(request, RequestOptions.DEFAULT);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4.解析响应</span></span><br><span class="line">    handleResponse(response);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">handleResponse</span><span class="params">(SearchResponse response)</span> {</span><br><span class="line">    <span class="comment">// 4.解析响应</span></span><br><span class="line">    <span class="type">SearchHits</span> <span class="variable">searchHits</span> <span class="operator">=</span> response.getHits();</span><br><span class="line">    <span class="comment">// 4.1.获取总条数</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">total</span> <span class="operator">=</span> searchHits.getTotalHits().value;</span><br><span class="line">    System.out.println(<span class="string">"共搜索到"</span> + total + <span class="string">"条数据"</span>);</span><br><span class="line">    <span class="comment">// 4.2.文档数组</span></span><br><span class="line">    SearchHit[] hits = searchHits.getHits();</span><br><span class="line">    <span class="comment">// 4.3.遍历</span></span><br><span class="line">    <span class="keyword">for</span> (SearchHit hit : hits) {</span><br><span class="line">        <span class="comment">// 获取文档source</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> hit.getSourceAsString();</span><br><span class="line">        <span class="comment">// 反序列化</span></span><br><span class="line">        <span class="type">HotelDoc</span> <span class="variable">hotelDoc</span> <span class="operator">=</span> JSON.parseObject(json, HotelDoc.class);</span><br><span class="line">        System.out.println(<span class="string">"hotelDoc = "</span> + hotelDoc);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3-1-4-小结"><a href="#3-1-4-小结" class="headerlink" title="3.1.4.小结"></a>3.1.4.小结</h3><p>查询的基本步骤是：</p><ol><li><p>创建SearchRequest对象</p></li><li><p>准备Request.source()，也就是DSL。</p><p>① QueryBuilders来构建查询条件</p><p>② 传入Request.source() 的 query() 方法</p></li><li><p>发送请求，得到结果</p></li><li><p>解析结果（参考JSON结果，从外到内，逐层解析）</p></li></ol><h2 id="3-2-match查询"><a href="#3-2-match查询" class="headerlink" title="3.2.match查询"></a>3.2.match查询</h2><p>全文检索的match和multi_match查询与match_all的API基本一致。差别是查询条件，也就是query的部分。</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721215923060.png" alt="image-20210721215923060"> </p><p>因此，Java代码上的差异主要是request.source().query()中的参数了。同样是利用QueryBuilders提供的方法：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721215843099.png" alt="image-20210721215843099"> </p><p>而结果解析代码则完全一致，可以抽取并共享。</p><p>完整代码如下：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testMatch</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="comment">// 1.准备Request</span></span><br><span class="line">    <span class="type">SearchRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SearchRequest</span>(<span class="string">"hotel"</span>);</span><br><span class="line">    <span class="comment">// 2.准备DSL</span></span><br><span class="line">    request.source()</span><br><span class="line">        .query(QueryBuilders.matchQuery(<span class="string">"all"</span>, <span class="string">"如家"</span>));</span><br><span class="line">    <span class="comment">// 3.发送请求</span></span><br><span class="line">    <span class="type">SearchResponse</span> <span class="variable">response</span> <span class="operator">=</span> client.search(request, RequestOptions.DEFAULT);</span><br><span class="line">    <span class="comment">// 4.解析响应</span></span><br><span class="line">    handleResponse(response);</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="3-3-精确查询"><a href="#3-3-精确查询" class="headerlink" title="3.3.精确查询"></a>3.3.精确查询</h2><p>精确查询主要是两者：</p><ul><li>term：词条精确匹配</li><li>range：范围查询</li></ul><p>与之前的查询相比，差异同样在查询条件，其它都一样。</p><p>查询条件构造的API如下：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721220305140.png" alt="image-20210721220305140"> </p><h2 id="3-4-布尔查询"><a href="#3-4-布尔查询" class="headerlink" title="3.4.布尔查询"></a>3.4.布尔查询</h2><p>布尔查询是用must、must_not、filter等方式组合其它查询，代码示例如下：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721220927286.png" alt="image-20210721220927286"></p><p>可以看到，API与其它查询的差别同样是在查询条件的构建，QueryBuilders，结果解析等其他代码完全不变。</p><p>完整代码如下：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testBool</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="comment">// 1.准备Request</span></span><br><span class="line">    <span class="type">SearchRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SearchRequest</span>(<span class="string">"hotel"</span>);</span><br><span class="line">    <span class="comment">// 2.准备DSL</span></span><br><span class="line">    <span class="comment">// 2.1.准备BooleanQuery</span></span><br><span class="line">    <span class="type">BoolQueryBuilder</span> <span class="variable">boolQuery</span> <span class="operator">=</span> QueryBuilders.boolQuery();</span><br><span class="line">    <span class="comment">// 2.2.添加term</span></span><br><span class="line">    boolQuery.must(QueryBuilders.termQuery(<span class="string">"city"</span>, <span class="string">"杭州"</span>));</span><br><span class="line">    <span class="comment">// 2.3.添加range</span></span><br><span class="line">    boolQuery.filter(QueryBuilders.rangeQuery(<span class="string">"price"</span>).lte(<span class="number">250</span>));</span><br><span class="line"></span><br><span class="line">    request.source().query(boolQuery);</span><br><span class="line">    <span class="comment">// 3.发送请求</span></span><br><span class="line">    <span class="type">SearchResponse</span> <span class="variable">response</span> <span class="operator">=</span> client.search(request, RequestOptions.DEFAULT);</span><br><span class="line">    <span class="comment">// 4.解析响应</span></span><br><span class="line">    handleResponse(response);</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="3-5-排序、分页"><a href="#3-5-排序、分页" class="headerlink" title="3.5.排序、分页"></a>3.5.排序、分页</h2><p>搜索结果的排序和分页是与query同级的参数，因此同样是使用request.source()来设置。</p><p>对应的API如下：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721221121266.png" alt="image-20210721221121266"></p><p>完整代码示例：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testPageAndSort</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="comment">// 页码，每页大小</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">page</span> <span class="operator">=</span> <span class="number">1</span>, size = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.准备Request</span></span><br><span class="line">    <span class="type">SearchRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SearchRequest</span>(<span class="string">"hotel"</span>);</span><br><span class="line">    <span class="comment">// 2.准备DSL</span></span><br><span class="line">    <span class="comment">// 2.1.query</span></span><br><span class="line">    request.source().query(QueryBuilders.matchAllQuery());</span><br><span class="line">    <span class="comment">// 2.2.排序 sort</span></span><br><span class="line">    request.source().sort(<span class="string">"price"</span>, SortOrder.ASC);</span><br><span class="line">    <span class="comment">// 2.3.分页 from、size</span></span><br><span class="line">    request.source().from((page - <span class="number">1</span>) * size).size(<span class="number">5</span>);</span><br><span class="line">    <span class="comment">// 3.发送请求</span></span><br><span class="line">    <span class="type">SearchResponse</span> <span class="variable">response</span> <span class="operator">=</span> client.search(request, RequestOptions.DEFAULT);</span><br><span class="line">    <span class="comment">// 4.解析响应</span></span><br><span class="line">    handleResponse(response);</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="3-6-高亮"><a href="#3-6-高亮" class="headerlink" title="3.6.高亮"></a>3.6.高亮</h2><p>高亮的代码与之前代码差异较大，有两点：</p><ul><li>查询的DSL：其中除了查询条件，还需要添加高亮条件，同样是与query同级。</li><li>结果解析：结果除了要解析_source文档数据，还要解析高亮结果</li></ul><h3 id="3-6-1-高亮请求构建"><a href="#3-6-1-高亮请求构建" class="headerlink" title="3.6.1.高亮请求构建"></a>3.6.1.高亮请求构建</h3><p>高亮请求的构建API如下：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721221744883.png" alt="image-20210721221744883"></p><p>上述代码省略了查询条件部分，但是大家不要忘了：高亮查询必须使用全文检索查询，并且要有搜索关键字，将来才可以对关键字高亮。</p><p>完整代码如下：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testHighlight</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="comment">// 1.准备Request</span></span><br><span class="line">    <span class="type">SearchRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SearchRequest</span>(<span class="string">"hotel"</span>);</span><br><span class="line">    <span class="comment">// 2.准备DSL</span></span><br><span class="line">    <span class="comment">// 2.1.query</span></span><br><span class="line">    request.source().query(QueryBuilders.matchQuery(<span class="string">"all"</span>, <span class="string">"如家"</span>));</span><br><span class="line">    <span class="comment">// 2.2.高亮</span></span><br><span class="line">    request.source().highlighter(<span class="keyword">new</span> <span class="title class_">HighlightBuilder</span>().field(<span class="string">"name"</span>).requireFieldMatch(<span class="literal">false</span>));</span><br><span class="line">    <span class="comment">// 3.发送请求</span></span><br><span class="line">    <span class="type">SearchResponse</span> <span class="variable">response</span> <span class="operator">=</span> client.search(request, RequestOptions.DEFAULT);</span><br><span class="line">    <span class="comment">// 4.解析响应</span></span><br><span class="line">    handleResponse(response);</span><br><span class="line"></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3-6-2-高亮结果解析"><a href="#3-6-2-高亮结果解析" class="headerlink" title="3.6.2.高亮结果解析"></a>3.6.2.高亮结果解析</h3><p>高亮的结果与查询的文档结果默认是分离的，并不在一起。</p><p>因此解析高亮的代码需要额外处理：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721222057212.png" alt="image-20210721222057212"></p><p>代码解读：</p><ul><li>第一步：从结果中获取source。hit.getSourceAsString()，这部分是非高亮结果，json字符串。还需要反序列为HotelDoc对象</li><li>第二步：获取高亮结果。hit.getHighlightFields()，返回值是一个Map，key是高亮字段名称，值是HighlightField对象，代表高亮值</li><li>第三步：从map中根据高亮字段名称，获取高亮字段值对象HighlightField</li><li>第四步：从HighlightField中获取Fragments，并且转为字符串。这部分就是真正的高亮字符串了</li><li>第五步：用高亮的结果替换HotelDoc中的非高亮结果</li></ul><p>完整代码如下：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">handleResponse</span><span class="params">(SearchResponse response)</span> {</span><br><span class="line">    <span class="comment">// 4.解析响应</span></span><br><span class="line">    <span class="type">SearchHits</span> <span class="variable">searchHits</span> <span class="operator">=</span> response.getHits();</span><br><span class="line">    <span class="comment">// 4.1.获取总条数</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">total</span> <span class="operator">=</span> searchHits.getTotalHits().value;</span><br><span class="line">    System.out.println(<span class="string">"共搜索到"</span> + total + <span class="string">"条数据"</span>);</span><br><span class="line">    <span class="comment">// 4.2.文档数组</span></span><br><span class="line">    SearchHit[] hits = searchHits.getHits();</span><br><span class="line">    <span class="comment">// 4.3.遍历</span></span><br><span class="line">    <span class="keyword">for</span> (SearchHit hit : hits) {</span><br><span class="line">        <span class="comment">// 获取文档source</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> hit.getSourceAsString();</span><br><span class="line">        <span class="comment">// 反序列化</span></span><br><span class="line">        <span class="type">HotelDoc</span> <span class="variable">hotelDoc</span> <span class="operator">=</span> JSON.parseObject(json, HotelDoc.class);</span><br><span class="line">        <span class="comment">// 获取高亮结果</span></span><br><span class="line">        Map&lt;String, HighlightField&gt; highlightFields = hit.getHighlightFields();</span><br><span class="line">        <span class="keyword">if</span> (!CollectionUtils.isEmpty(highlightFields)) {</span><br><span class="line">            <span class="comment">// 根据字段名获取高亮结果</span></span><br><span class="line">            <span class="type">HighlightField</span> <span class="variable">highlightField</span> <span class="operator">=</span> highlightFields.get(<span class="string">"name"</span>);</span><br><span class="line">            <span class="keyword">if</span> (highlightField != <span class="literal">null</span>) {</span><br><span class="line">                <span class="comment">// 获取高亮值</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> highlightField.getFragments()[<span class="number">0</span>].string();</span><br><span class="line">                <span class="comment">// 覆盖非高亮结果</span></span><br><span class="line">                hotelDoc.setName(name);</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        System.out.println(<span class="string">"hotelDoc = "</span> + hotelDoc);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h1 id="4-黑马旅游案例"><a href="#4-黑马旅游案例" class="headerlink" title="4.黑马旅游案例"></a>4.黑马旅游案例</h1><p>下面，我们通过黑马旅游的案例来实战演练下之前学习的知识。</p><p>我们实现四部分功能：</p><ul><li>酒店搜索和分页</li><li>酒店结果过滤</li><li>我周边的酒店</li><li>酒店竞价排名</li></ul><p>启动我们提供的hotel-demo项目，其默认端口是8089，访问<a href="http://localhost:8090，就能看到项目页面了：">http://localhost:8090，就能看到项目页面了：</a></p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721223159598.png" alt="image-20210721223159598"></p><h2 id="4-1-酒店搜索和分页"><a href="#4-1-酒店搜索和分页" class="headerlink" title="4.1.酒店搜索和分页"></a>4.1.酒店搜索和分页</h2><p>案例需求：实现黑马旅游的酒店搜索功能，完成关键字搜索和分页</p><h3 id="4-1-1-需求分析"><a href="#4-1-1-需求分析" class="headerlink" title="4.1.1.需求分析"></a>4.1.1.需求分析</h3><p>在项目的首页，有一个大大的搜索框，还有分页按钮：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721223859419.png" alt="image-20210721223859419"></p><p>点击搜索按钮，可以看到浏览器控制台发出了请求：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721224033789.png" alt="image-20210721224033789"></p><p>请求参数如下：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721224112708.png" alt="image-20210721224112708"></p><p>由此可以知道，我们这个请求的信息如下：</p><ul><li>请求方式：POST</li><li>请求路径：/hotel/list</li><li>请求参数：JSON对象，包含4个字段：<ul><li>key：搜索关键字</li><li>page：页码</li><li>size：每页大小</li><li>sortBy：排序，目前暂不实现</li></ul></li><li>返回值：分页查询，需要返回分页结果PageResult，包含两个属性：<ul><li><code>total</code>：总条数</li><li><code>List&lt;HotelDoc&gt;</code>：当前页的数据</li></ul></li></ul><p>因此，我们实现业务的流程如下：</p><ul><li>步骤一：定义实体类，接收请求参数的JSON对象</li><li>步骤二：编写controller，接收页面的请求</li><li>步骤三：编写业务实现，利用RestHighLevelClient实现搜索、分页</li></ul><h3 id="4-1-2-定义实体类"><a href="#4-1-2-定义实体类" class="headerlink" title="4.1.2.定义实体类"></a>4.1.2.定义实体类</h3><p>实体类有两个，一个是前端的请求参数实体，一个是服务端应该返回的响应结果实体。</p><p>1）请求参数</p><p>前端请求的json结构如下：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"key"</span><span class="punctuation">:</span> <span class="string">"搜索关键字"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"page"</span><span class="punctuation">:</span> <span class="number">1</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"size"</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"sortBy"</span><span class="punctuation">:</span> <span class="string">"default"</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>因此，我们在<code>cn.itcast.hotel.pojo</code>包下定义一个实体类：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.hotel.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestParams</span> {</span><br><span class="line">    <span class="keyword">private</span> String key;</span><br><span class="line">    <span class="keyword">private</span> Integer page;</span><br><span class="line">    <span class="keyword">private</span> Integer size;</span><br><span class="line">    <span class="keyword">private</span> String sortBy;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>2）返回值</p><p>分页查询，需要返回分页结果PageResult，包含两个属性：</p><ul><li><code>total</code>：总条数</li><li><code>List&lt;HotelDoc&gt;</code>：当前页的数据</li></ul><p>因此，我们在<code>cn.itcast.hotel.pojo</code>中定义返回结果：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.hotel.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageResult</span> {</span><br><span class="line">    <span class="keyword">private</span> Long total;</span><br><span class="line">    <span class="keyword">private</span> List&lt;HotelDoc&gt; hotels;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PageResult</span><span class="params">()</span> {</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">PageResult</span><span class="params">(Long total, List&lt;HotelDoc&gt; hotels)</span> {</span><br><span class="line">        <span class="built_in">this</span>.total = total;</span><br><span class="line">        <span class="built_in">this</span>.hotels = hotels;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="4-1-3-定义controller"><a href="#4-1-3-定义controller" class="headerlink" title="4.1.3.定义controller"></a>4.1.3.定义controller</h3><p>定义一个HotelController，声明查询接口，满足下列要求：</p><ul><li>请求方式：Post</li><li>请求路径：/hotel/list</li><li>请求参数：对象，类型为RequestParam</li><li>返回值：PageResult，包含两个属性<ul><li><code>Long total</code>：总条数</li><li><code>List&lt;HotelDoc&gt; hotels</code>：酒店数据</li></ul></li></ul><p>因此，我们在<code>cn.itcast.hotel.web</code>中定义HotelController：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping("/hotel")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HotelController</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IHotelService hotelService;</span><br><span class="line"><span class="comment">// 搜索酒店数据</span></span><br><span class="line">    <span class="meta">@PostMapping("/list")</span></span><br><span class="line">    <span class="keyword">public</span> PageResult <span class="title function_">search</span><span class="params">(<span class="meta">@RequestBody</span> RequestParams params)</span>{</span><br><span class="line">        <span class="keyword">return</span> hotelService.search(params);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="4-1-4-实现搜索业务"><a href="#4-1-4-实现搜索业务" class="headerlink" title="4.1.4.实现搜索业务"></a>4.1.4.实现搜索业务</h3><p>我们在controller调用了IHotelService，并没有实现该方法，因此下面我们就在IHotelService中定义方法，并且去实现业务逻辑。</p><p>1）在<code>cn.itcast.hotel.service</code>中的<code>IHotelService</code>接口中定义一个方法：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 根据关键字搜索酒店信息</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> params 请求参数对象，包含用户输入的关键字 </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> 酒店文档列表</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">PageResult <span class="title function_">search</span><span class="params">(RequestParams params)</span>;</span><br></pre></td></tr></tbody></table></figure><p>2）实现搜索业务，肯定离不开RestHighLevelClient，我们需要把它注册到Spring中作为一个Bean。在<code>cn.itcast.hotel</code>中的<code>HotelDemoApplication</code>中声明这个Bean：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> RestHighLevelClient <span class="title function_">client</span><span class="params">()</span>{</span><br><span class="line">    <span class="keyword">return</span>  <span class="keyword">new</span> <span class="title class_">RestHighLevelClient</span>(RestClient.builder(</span><br><span class="line">        HttpHost.create(<span class="string">"http://192.168.150.101:9200"</span>)</span><br><span class="line">    ));</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>3）在<code>cn.itcast.hotel.service.impl</code>中的<code>HotelService</code>中实现search方法：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> PageResult <span class="title function_">search</span><span class="params">(RequestParams params)</span> {</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        <span class="comment">// 1.准备Request</span></span><br><span class="line">        <span class="type">SearchRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SearchRequest</span>(<span class="string">"hotel"</span>);</span><br><span class="line">        <span class="comment">// 2.准备DSL</span></span><br><span class="line">        <span class="comment">// 2.1.query</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> params.getKey();</span><br><span class="line">        <span class="keyword">if</span> (key == <span class="literal">null</span> || <span class="string">""</span>.equals(key)) {</span><br><span class="line">            boolQuery.must(QueryBuilders.matchAllQuery());</span><br><span class="line">        } <span class="keyword">else</span> {</span><br><span class="line">            boolQuery.must(QueryBuilders.matchQuery(<span class="string">"all"</span>, key));</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.2.分页</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">page</span> <span class="operator">=</span> params.getPage();</span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> params.getSize();</span><br><span class="line">        request.source().from((page - <span class="number">1</span>) * size).size(size);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.发送请求</span></span><br><span class="line">        <span class="type">SearchResponse</span> <span class="variable">response</span> <span class="operator">=</span> client.search(request, RequestOptions.DEFAULT);</span><br><span class="line">        <span class="comment">// 4.解析响应</span></span><br><span class="line">        <span class="keyword">return</span> handleResponse(response);</span><br><span class="line">    } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结果解析</span></span><br><span class="line"><span class="keyword">private</span> PageResult <span class="title function_">handleResponse</span><span class="params">(SearchResponse response)</span> {</span><br><span class="line">    <span class="comment">// 4.解析响应</span></span><br><span class="line">    <span class="type">SearchHits</span> <span class="variable">searchHits</span> <span class="operator">=</span> response.getHits();</span><br><span class="line">    <span class="comment">// 4.1.获取总条数</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">total</span> <span class="operator">=</span> searchHits.getTotalHits().value;</span><br><span class="line">    <span class="comment">// 4.2.文档数组</span></span><br><span class="line">    SearchHit[] hits = searchHits.getHits();</span><br><span class="line">    <span class="comment">// 4.3.遍历</span></span><br><span class="line">    List&lt;HotelDoc&gt; hotels = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (SearchHit hit : hits) {</span><br><span class="line">        <span class="comment">// 获取文档source</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> hit.getSourceAsString();</span><br><span class="line">        <span class="comment">// 反序列化</span></span><br><span class="line">        <span class="type">HotelDoc</span> <span class="variable">hotelDoc</span> <span class="operator">=</span> JSON.parseObject(json, HotelDoc.class);</span><br><span class="line"><span class="comment">// 放入集合</span></span><br><span class="line">        hotels.add(hotelDoc);</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 4.4.封装返回</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">PageResult</span>(total, hotels);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="4-2-酒店结果过滤"><a href="#4-2-酒店结果过滤" class="headerlink" title="4.2.酒店结果过滤"></a>4.2.酒店结果过滤</h2><p>需求：添加品牌、城市、星级、价格等过滤功能</p><h3 id="4-2-1-需求分析"><a href="#4-2-1-需求分析" class="headerlink" title="4.2.1.需求分析"></a>4.2.1.需求分析</h3><p>在页面搜索框下面，会有一些过滤项：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210722091940726.png" alt="image-20210722091940726"></p><p>传递的参数如图：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210722092051994.png" alt="image-20210722092051994"> </p><p>包含的过滤条件有：</p><ul><li>brand：品牌值</li><li>city：城市</li><li>minPrice~maxPrice：价格范围</li><li>starName：星级</li></ul><p>我们需要做两件事情：</p><ul><li>修改请求参数的对象RequestParams，接收上述参数</li><li>修改业务逻辑，在搜索条件之外，添加一些过滤条件</li></ul><h3 id="4-2-2-修改实体类"><a href="#4-2-2-修改实体类" class="headerlink" title="4.2.2.修改实体类"></a>4.2.2.修改实体类</h3><p>修改在<code>cn.itcast.hotel.pojo</code>包下的实体类RequestParams：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestParams</span> {</span><br><span class="line">    <span class="keyword">private</span> String key;</span><br><span class="line">    <span class="keyword">private</span> Integer page;</span><br><span class="line">    <span class="keyword">private</span> Integer size;</span><br><span class="line">    <span class="keyword">private</span> String sortBy;</span><br><span class="line">    <span class="comment">// 下面是新增的过滤条件参数</span></span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    <span class="keyword">private</span> String brand;</span><br><span class="line">    <span class="keyword">private</span> String starName;</span><br><span class="line">    <span class="keyword">private</span> Integer minPrice;</span><br><span class="line">    <span class="keyword">private</span> Integer maxPrice;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="4-2-3-修改搜索业务"><a href="#4-2-3-修改搜索业务" class="headerlink" title="4.2.3.修改搜索业务"></a>4.2.3.修改搜索业务</h3><p>在HotelService的search方法中，只有一个地方需要修改：requet.source().query( … )其中的查询条件。</p><p>在之前的业务中，只有match查询，根据关键字搜索，现在要添加条件过滤，包括：</p><ul><li>品牌过滤：是keyword类型，用term查询</li><li>星级过滤：是keyword类型，用term查询</li><li>价格过滤：是数值类型，用range查询</li><li>城市过滤：是keyword类型，用term查询</li></ul><p>多个查询条件组合，肯定是boolean查询来组合：</p><ul><li>关键字搜索放到must中，参与算分</li><li>其它过滤条件放到filter中，不参与算分</li></ul><p>因为条件构建的逻辑比较复杂，这里先封装为一个函数：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210722092935453.png" alt="image-20210722092935453"></p><p>buildBasicQuery的代码如下：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">buildBasicQuery</span><span class="params">(RequestParams params, SearchRequest request)</span> {</span><br><span class="line">    <span class="comment">// 1.构建BooleanQuery</span></span><br><span class="line">    <span class="type">BoolQueryBuilder</span> <span class="variable">boolQuery</span> <span class="operator">=</span> QueryBuilders.boolQuery();</span><br><span class="line">    <span class="comment">// 2.关键字搜索</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> params.getKey();</span><br><span class="line">    <span class="keyword">if</span> (key == <span class="literal">null</span> || <span class="string">""</span>.equals(key)) {</span><br><span class="line">        boolQuery.must(QueryBuilders.matchAllQuery());</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        boolQuery.must(QueryBuilders.matchQuery(<span class="string">"all"</span>, key));</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 3.城市条件</span></span><br><span class="line">    <span class="keyword">if</span> (params.getCity() != <span class="literal">null</span> &amp;&amp; !params.getCity().equals(<span class="string">""</span>)) {</span><br><span class="line">        boolQuery.filter(QueryBuilders.termQuery(<span class="string">"city"</span>, params.getCity()));</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 4.品牌条件</span></span><br><span class="line">    <span class="keyword">if</span> (params.getBrand() != <span class="literal">null</span> &amp;&amp; !params.getBrand().equals(<span class="string">""</span>)) {</span><br><span class="line">        boolQuery.filter(QueryBuilders.termQuery(<span class="string">"brand"</span>, params.getBrand()));</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 5.星级条件</span></span><br><span class="line">    <span class="keyword">if</span> (params.getStarName() != <span class="literal">null</span> &amp;&amp; !params.getStarName().equals(<span class="string">""</span>)) {</span><br><span class="line">        boolQuery.filter(QueryBuilders.termQuery(<span class="string">"starName"</span>, params.getStarName()));</span><br><span class="line">    }</span><br><span class="line"><span class="comment">// 6.价格</span></span><br><span class="line">    <span class="keyword">if</span> (params.getMinPrice() != <span class="literal">null</span> &amp;&amp; params.getMaxPrice() != <span class="literal">null</span>) {</span><br><span class="line">        boolQuery.filter(QueryBuilders</span><br><span class="line">                         .rangeQuery(<span class="string">"price"</span>)</span><br><span class="line">                         .gte(params.getMinPrice())</span><br><span class="line">                         .lte(params.getMaxPrice())</span><br><span class="line">                        );</span><br><span class="line">    }</span><br><span class="line"><span class="comment">// 7.放入source</span></span><br><span class="line">    request.source().query(boolQuery);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="4-3-我周边的酒店"><a href="#4-3-我周边的酒店" class="headerlink" title="4.3.我周边的酒店"></a>4.3.我周边的酒店</h2><p>需求：我附近的酒店</p><h3 id="4-3-1-需求分析"><a href="#4-3-1-需求分析" class="headerlink" title="4.3.1.需求分析"></a>4.3.1.需求分析</h3><p>在酒店列表页的右侧，有一个小地图，点击地图的定位按钮，地图会找到你所在的位置：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210722093414542.png" alt="image-20210722093414542"> </p><p>并且，在前端会发起查询请求，将你的坐标发送到服务端：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210722093642382.png" alt="image-20210722093642382"> </p><p>我们要做的事情就是基于这个location坐标，然后按照距离对周围酒店排序。实现思路如下：</p><ul><li>修改RequestParams参数，接收location字段</li><li>修改search方法业务逻辑，如果location有值，添加根据geo_distance排序的功能</li></ul><h3 id="4-3-2-修改实体类"><a href="#4-3-2-修改实体类" class="headerlink" title="4.3.2.修改实体类"></a>4.3.2.修改实体类</h3><p>修改在<code>cn.itcast.hotel.pojo</code>包下的实体类RequestParams：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.hotel.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RequestParams</span> {</span><br><span class="line">    <span class="keyword">private</span> String key;</span><br><span class="line">    <span class="keyword">private</span> Integer page;</span><br><span class="line">    <span class="keyword">private</span> Integer size;</span><br><span class="line">    <span class="keyword">private</span> String sortBy;</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    <span class="keyword">private</span> String brand;</span><br><span class="line">    <span class="keyword">private</span> String starName;</span><br><span class="line">    <span class="keyword">private</span> Integer minPrice;</span><br><span class="line">    <span class="keyword">private</span> Integer maxPrice;</span><br><span class="line">    <span class="comment">// 我当前的地理坐标</span></span><br><span class="line">    <span class="keyword">private</span> String location;</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="4-3-3-距离排序API"><a href="#4-3-3-距离排序API" class="headerlink" title="4.3.3.距离排序API"></a>4.3.3.距离排序API</h3><p>我们以前学习过排序功能，包括两种：</p><ul><li>普通字段排序</li><li>地理坐标排序</li></ul><p>我们只讲了普通字段排序对应的java写法。地理坐标排序只学过DSL语法，如下：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">GET&nbsp;/indexName/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"query"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"match_all"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span><span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line"> &nbsp;<span class="attr">"sort"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">[</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"price"</span><span class="punctuation">:</span>&nbsp;<span class="string">"asc"</span>&nbsp;&nbsp;</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"_geo_distance"</span>&nbsp;<span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"FIELD"</span>&nbsp;<span class="punctuation">:</span>&nbsp;<span class="string">"纬度，经度"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"order"</span>&nbsp;<span class="punctuation">:</span>&nbsp;<span class="string">"asc"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"unit"</span>&nbsp;<span class="punctuation">:</span>&nbsp;<span class="string">"km"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>对应的java代码示例：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210722095227059.png" alt="image-20210722095227059"></p><h3 id="4-3-4-添加距离排序"><a href="#4-3-4-添加距离排序" class="headerlink" title="4.3.4.添加距离排序"></a>4.3.4.添加距离排序</h3><p>在<code>cn.itcast.hotel.service.impl</code>的<code>HotelService</code>的<code>search</code>方法中，添加一个排序功能：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210722095902314.png" alt="image-20210722095902314"></p><p>完整代码：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> PageResult <span class="title function_">search</span><span class="params">(RequestParams params)</span> {</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        <span class="comment">// 1.准备Request</span></span><br><span class="line">        <span class="type">SearchRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SearchRequest</span>(<span class="string">"hotel"</span>);</span><br><span class="line">        <span class="comment">// 2.准备DSL</span></span><br><span class="line">        <span class="comment">// 2.1.query</span></span><br><span class="line">        buildBasicQuery(params, request);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.2.分页</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">page</span> <span class="operator">=</span> params.getPage();</span><br><span class="line">        <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> params.getSize();</span><br><span class="line">        request.source().from((page - <span class="number">1</span>) * size).size(size);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.3.排序</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">location</span> <span class="operator">=</span> params.getLocation();</span><br><span class="line">        <span class="keyword">if</span> (location != <span class="literal">null</span> &amp;&amp; !location.equals(<span class="string">""</span>)) {</span><br><span class="line">            request.source().sort(SortBuilders</span><br><span class="line">                                  .geoDistanceSort(<span class="string">"location"</span>, <span class="keyword">new</span> <span class="title class_">GeoPoint</span>(location))</span><br><span class="line">                                  .order(SortOrder.ASC)</span><br><span class="line">                                  .unit(DistanceUnit.KILOMETERS)</span><br><span class="line">                                 );</span><br><span class="line">        }</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.发送请求</span></span><br><span class="line">        <span class="type">SearchResponse</span> <span class="variable">response</span> <span class="operator">=</span> client.search(request, RequestOptions.DEFAULT);</span><br><span class="line">        <span class="comment">// 4.解析响应</span></span><br><span class="line">        <span class="keyword">return</span> handleResponse(response);</span><br><span class="line">    } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="4-3-5-排序距离显示"><a href="#4-3-5-排序距离显示" class="headerlink" title="4.3.5.排序距离显示"></a>4.3.5.排序距离显示</h3><p>重启服务后，测试我的酒店功能：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210722100040674.png" alt="image-20210722100040674"></p><p>发现确实可以实现对我附近酒店的排序，不过并没有看到酒店到底距离我多远，这该怎么办？</p><p>排序完成后，页面还要获取我附近每个酒店的具体<strong>距离</strong>值，这个值在响应结果中是独立的：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210722095648542.png" alt="image-20210722095648542"></p><p>因此，我们在结果解析阶段，除了解析source部分以外，还要得到sort部分，也就是排序的距离，然后放到响应结果中。</p><p>我们要做两件事：</p><ul><li>修改HotelDoc，添加排序距离字段，用于页面显示</li><li>修改HotelService类中的handleResponse方法，添加对sort值的获取</li></ul><p>1）修改HotelDoc类，添加距离字段</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.hotel.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HotelDoc</span> {</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> Integer price;</span><br><span class="line">    <span class="keyword">private</span> Integer score;</span><br><span class="line">    <span class="keyword">private</span> String brand;</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    <span class="keyword">private</span> String starName;</span><br><span class="line">    <span class="keyword">private</span> String business;</span><br><span class="line">    <span class="keyword">private</span> String location;</span><br><span class="line">    <span class="keyword">private</span> String pic;</span><br><span class="line">    <span class="comment">// 排序时的 距离值</span></span><br><span class="line">    <span class="keyword">private</span> Object distance;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HotelDoc</span><span class="params">(Hotel hotel)</span> {</span><br><span class="line">        <span class="built_in">this</span>.id = hotel.getId();</span><br><span class="line">        <span class="built_in">this</span>.name = hotel.getName();</span><br><span class="line">        <span class="built_in">this</span>.address = hotel.getAddress();</span><br><span class="line">        <span class="built_in">this</span>.price = hotel.getPrice();</span><br><span class="line">        <span class="built_in">this</span>.score = hotel.getScore();</span><br><span class="line">        <span class="built_in">this</span>.brand = hotel.getBrand();</span><br><span class="line">        <span class="built_in">this</span>.city = hotel.getCity();</span><br><span class="line">        <span class="built_in">this</span>.starName = hotel.getStarName();</span><br><span class="line">        <span class="built_in">this</span>.business = hotel.getBusiness();</span><br><span class="line">        <span class="built_in">this</span>.location = hotel.getLatitude() + <span class="string">", "</span> + hotel.getLongitude();</span><br><span class="line">        <span class="built_in">this</span>.pic = hotel.getPic();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>2）修改HotelService中的handleResponse方法</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210722100613966.png" alt="image-20210722100613966"></p><p>重启后测试，发现页面能成功显示距离了：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210722100838604.png" alt="image-20210722100838604"></p><h2 id="4-4-酒店竞价排名"><a href="#4-4-酒店竞价排名" class="headerlink" title="4.4.酒店竞价排名"></a>4.4.酒店竞价排名</h2><p>需求：让指定的酒店在搜索结果中排名置顶</p><h3 id="4-4-1-需求分析"><a href="#4-4-1-需求分析" class="headerlink" title="4.4.1.需求分析"></a>4.4.1.需求分析</h3><p>要让指定酒店在搜索结果中排名置顶，效果如图：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210722100947292.png" alt="image-20210722100947292"></p><p>页面会给指定的酒店添加<strong>广告</strong>标记。</p><p>那怎样才能让指定的酒店排名置顶呢？</p><p>我们之前学习过的function_score查询可以影响算分，算分高了，自然排名也就高了。而function_score包含3个要素：</p><ul><li>过滤条件：哪些文档要加分</li><li>算分函数：如何计算function score</li><li>加权方式：function score 与 query score如何运算</li></ul><p>这里的需求是：让<strong>指定酒店</strong>排名靠前。因此我们需要给这些酒店添加一个标记，这样在过滤条件中就可以<strong>根据这个标记来判断，是否要提高算分</strong>。</p><p>比如，我们给酒店添加一个字段：isAD，Boolean类型：</p><ul><li>true：是广告</li><li>false：不是广告</li></ul><p>这样function_score包含3个要素就很好确定了：</p><ul><li>过滤条件：判断isAD 是否为true</li><li>算分函数：我们可以用最简单暴力的weight，固定加权值</li><li>加权方式：可以用默认的相乘，大大提高算分</li></ul><p>因此，业务的实现步骤包括：</p><ol><li><p>给HotelDoc类添加isAD字段，Boolean类型</p></li><li><p>挑选几个你喜欢的酒店，给它的文档数据添加isAD字段，值为true</p></li><li><p>修改search方法，添加function score功能，给isAD值为true的酒店增加权重</p></li></ol><h3 id="4-4-2-修改HotelDoc实体"><a href="#4-4-2-修改HotelDoc实体" class="headerlink" title="4.4.2.修改HotelDoc实体"></a>4.4.2.修改HotelDoc实体</h3><p>给<code>cn.itcast.hotel.pojo</code>包下的HotelDoc类添加isAD字段：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210722101908062.png" alt="image-20210722101908062"></p><h3 id="4-4-3-添加广告标记"><a href="#4-4-3-添加广告标记" class="headerlink" title="4.4.3.添加广告标记"></a>4.4.3.添加广告标记</h3><p>接下来，我们挑几个酒店，添加isAD字段，设置为true：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">POST /hotel/_update/<span class="number">1902197537</span></span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"doc"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"isAD"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br><span class="line">POST /hotel/_update/<span class="number">2056126831</span></span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"doc"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"isAD"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br><span class="line">POST /hotel/_update/<span class="number">1989806195</span></span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"doc"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"isAD"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br><span class="line">POST /hotel/_update/<span class="number">2056105938</span></span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"doc"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"isAD"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><h3 id="4-4-4-添加算分函数查询"><a href="#4-4-4-添加算分函数查询" class="headerlink" title="4.4.4.添加算分函数查询"></a>4.4.4.添加算分函数查询</h3><p>接下来我们就要修改查询条件了。之前是用的boolean 查询，现在要改成function_socre查询。</p><p>function_score查询结构如下：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210721191544750.png" alt="image-20210721191544750"></p><p>对应的JavaAPI如下：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-02/image-20210722102850818.png" alt="image-20210722102850818"></p><p>我们可以将之前写的boolean查询作为<strong>原始查询</strong>条件放到query中，接下来就是添加<strong>过滤条件</strong>、<strong>算分函数</strong>、<strong>加权模式</strong>了。所以原来的代码依然可以沿用。</p><p>修改<code>cn.itcast.hotel.service.impl</code>包下的<code>HotelService</code>类中的<code>buildBasicQuery</code>方法，添加算分函数查询：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">buildBasicQuery</span><span class="params">(RequestParams params, SearchRequest request)</span> {</span><br><span class="line">    <span class="comment">// 1.构建BooleanQuery</span></span><br><span class="line">    <span class="type">BoolQueryBuilder</span> <span class="variable">boolQuery</span> <span class="operator">=</span> QueryBuilders.boolQuery();</span><br><span class="line">    <span class="comment">// 关键字搜索</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> params.getKey();</span><br><span class="line">    <span class="keyword">if</span> (key == <span class="literal">null</span> || <span class="string">""</span>.equals(key)) {</span><br><span class="line">        boolQuery.must(QueryBuilders.matchAllQuery());</span><br><span class="line">    } <span class="keyword">else</span> {</span><br><span class="line">        boolQuery.must(QueryBuilders.matchQuery(<span class="string">"all"</span>, key));</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 城市条件</span></span><br><span class="line">    <span class="keyword">if</span> (params.getCity() != <span class="literal">null</span> &amp;&amp; !params.getCity().equals(<span class="string">""</span>)) {</span><br><span class="line">        boolQuery.filter(QueryBuilders.termQuery(<span class="string">"city"</span>, params.getCity()));</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 品牌条件</span></span><br><span class="line">    <span class="keyword">if</span> (params.getBrand() != <span class="literal">null</span> &amp;&amp; !params.getBrand().equals(<span class="string">""</span>)) {</span><br><span class="line">        boolQuery.filter(QueryBuilders.termQuery(<span class="string">"brand"</span>, params.getBrand()));</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 星级条件</span></span><br><span class="line">    <span class="keyword">if</span> (params.getStarName() != <span class="literal">null</span> &amp;&amp; !params.getStarName().equals(<span class="string">""</span>)) {</span><br><span class="line">        boolQuery.filter(QueryBuilders.termQuery(<span class="string">"starName"</span>, params.getStarName()));</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 价格</span></span><br><span class="line">    <span class="keyword">if</span> (params.getMinPrice() != <span class="literal">null</span> &amp;&amp; params.getMaxPrice() != <span class="literal">null</span>) {</span><br><span class="line">        boolQuery.filter(QueryBuilders</span><br><span class="line">                         .rangeQuery(<span class="string">"price"</span>)</span><br><span class="line">                         .gte(params.getMinPrice())</span><br><span class="line">                         .lte(params.getMaxPrice())</span><br><span class="line">                        );</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.算分控制</span></span><br><span class="line">    <span class="type">FunctionScoreQueryBuilder</span> <span class="variable">functionScoreQuery</span> <span class="operator">=</span></span><br><span class="line">        QueryBuilders.functionScoreQuery(</span><br><span class="line">        <span class="comment">// 原始查询，相关性算分的查询</span></span><br><span class="line">        boolQuery,</span><br><span class="line">        <span class="comment">// function score的数组</span></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">FunctionScoreQueryBuilder</span>.FilterFunctionBuilder[]{</span><br><span class="line">            <span class="comment">// 其中的一个function score 元素</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">FunctionScoreQueryBuilder</span>.FilterFunctionBuilder(</span><br><span class="line">                <span class="comment">// 过滤条件</span></span><br><span class="line">                QueryBuilders.termQuery(<span class="string">"isAD"</span>, <span class="literal">true</span>),</span><br><span class="line">                <span class="comment">// 算分函数</span></span><br><span class="line">                ScoreFunctionBuilders.weightFactorFunction(<span class="number">10</span>)</span><br><span class="line">            )</span><br><span class="line">        });</span><br><span class="line">    request.source().query(functionScoreQuery);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;分布式搜索引擎02&quot;&gt;&lt;a href=&quot;#分布式搜索引擎02&quot; class=&quot;headerlink&quot; title=&quot;分布式搜索引擎02&quot;&gt;&lt;/a&gt;分布式搜索引擎02&lt;/h1&gt;</summary>
    
    
    
    <category term="SpringCloud" scheme="https://llzzoomm.github.io/categories/SpringCloud/"/>
    
    
    <category term="SpringCloud" scheme="https://llzzoomm.github.io/tags/SpringCloud/"/>
    
  </entry>
  
  <entry>
    <title>SpringCloud02</title>
    <link href="https://llzzoomm.github.io/2023/07/20/springcloud-shi-yong-pian-02/"/>
    <id>https://llzzoomm.github.io/2023/07/20/springcloud-shi-yong-pian-02/</id>
    <published>2023-07-20T11:31:50.971Z</published>
    <updated>2023-07-20T11:29:13.033Z</updated>
    
    <content type="html"><![CDATA[<h1 id="SpringCloud02"><a href="#SpringCloud02" class="headerlink" title="SpringCloud02"></a>SpringCloud02</h1><span id="more"></span><h1 id="1-Nacos配置管理"><a href="#1-Nacos配置管理" class="headerlink" title="1.Nacos配置管理"></a>1.Nacos配置管理</h1><p>Nacos除了可以做注册中心，同样可以做配置管理来使用。</p><h2 id="1-1-统一配置管理"><a href="#1-1-统一配置管理" class="headerlink" title="1.1.统一配置管理"></a>1.1.统一配置管理</h2><p>当微服务部署的实例越来越多，达到数十、数百时，逐个修改微服务配置就会让人抓狂，而且很容易出错。我们需要一种统一配置管理方案，可以集中管理所有实例的配置。</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714164426792.png" alt="image-20210714164426792"></p><p>Nacos一方面可以将配置集中管理，另一方可以在配置变更时，及时通知微服务，实现配置的热更新。</p><h3 id="1-1-1-在nacos中添加配置文件"><a href="#1-1-1-在nacos中添加配置文件" class="headerlink" title="1.1.1.在nacos中添加配置文件"></a>1.1.1.在nacos中添加配置文件</h3><p>如何在nacos中管理配置呢？</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714164742924.png" alt="image-20210714164742924"></p><p>然后在弹出的表单中，填写配置信息：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714164856664.png" alt="image-20210714164856664"></p><blockquote><p>注意：项目的核心配置，需要热更新的配置才有放到nacos管理的必要。基本不会变更的一些配置还是保存在微服务本地比较好。</p></blockquote><h3 id="1-1-2-从微服务拉取配置"><a href="#1-1-2-从微服务拉取配置" class="headerlink" title="1.1.2.从微服务拉取配置"></a>1.1.2.从微服务拉取配置</h3><p>微服务要拉取nacos中管理的配置，并且与本地的application.yml配置合并，才能完成项目启动。</p><p>但如果尚未读取application.yml，又如何得知nacos地址呢？</p><p>因此spring引入了一种新的配置文件：bootstrap.yaml文件，会在application.yml之前被读取，流程如下：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/L0iFYNF.png" alt="img"></p><p>1）引入nacos-config依赖</p><p>首先，在user-service服务中，引入nacos-config的客户端依赖：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--nacos配置管理依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-config<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>2）添加bootstrap.yaml</p><p>然后，在user-service中添加一个bootstrap.yaml文件，内容如下：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">userservice</span> <span class="comment"># 服务名称</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span> <span class="comment">#开发环境，这里是dev </span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">localhost:8848</span> <span class="comment"># Nacos地址</span></span><br><span class="line">      <span class="attr">config:</span></span><br><span class="line">        <span class="attr">file-extension:</span> <span class="string">yaml</span> <span class="comment"># 文件后缀名</span></span><br></pre></td></tr></tbody></table></figure><p>这里会根据spring.cloud.nacos.server-addr获取nacos地址，再根据</p><p><code>${spring.application.name}-${spring.profiles.active}.${spring.cloud.nacos.config.file-extension}</code>作为文件id，来读取配置。</p><p>本例中，就是去读取<code>userservice-dev.yaml</code>：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714170845901.png" alt="image-20210714170845901"></p><p>3）读取nacos配置</p><p>在user-service中的UserController中添加业务逻辑，读取pattern.dateformat配置：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714170337448.png" alt="image-20210714170337448"></p><p>完整代码：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.user.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.itcast.user.pojo.User;</span><br><span class="line"><span class="keyword">import</span> cn.itcast.user.service.UserService;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.time.format.DateTimeFormatter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping("/user")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value("${pattern.dateformat}")</span></span><br><span class="line">    <span class="keyword">private</span> String dateformat;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@GetMapping("now")</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">now</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> LocalDateTime.now().format(DateTimeFormatter.ofPattern(dateformat));</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// ...略</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>在页面访问，可以看到效果：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714170449612.png" alt="image-20210714170449612"></p><h2 id="1-2-配置热更新"><a href="#1-2-配置热更新" class="headerlink" title="1.2.配置热更新"></a>1.2.配置热更新</h2><p>我们最终的目的，是修改nacos中的配置后，微服务中无需重启即可让配置生效，也就是<strong>配置热更新</strong>。</p><p>要实现配置热更新，可以使用两种方式：</p><h3 id="1-2-1-方式一"><a href="#1-2-1-方式一" class="headerlink" title="1.2.1.方式一"></a>1.2.1.方式一</h3><p>在@Value注入的变量所在类上添加注解@RefreshScope：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714171036335.png" alt="image-20210714171036335"></p><h3 id="1-2-2-方式二"><a href="#1-2-2-方式二" class="headerlink" title="1.2.2.方式二"></a>1.2.2.方式二</h3><p>使用@ConfigurationProperties注解代替@Value注解。</p><p>在user-service服务中，添加一个类，读取patterrn.dateformat属性：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.user.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = "pattern")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PatternProperties</span> {</span><br><span class="line">    <span class="keyword">private</span> String dateformat;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>在UserController中使用这个类代替@Value：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714171316124.png" alt="image-20210714171316124"></p><p>完整代码：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.user.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.itcast.user.config.PatternProperties;</span><br><span class="line"><span class="keyword">import</span> cn.itcast.user.pojo.User;</span><br><span class="line"><span class="keyword">import</span> cn.itcast.user.service.UserService;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.time.format.DateTimeFormatter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping("/user")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> PatternProperties patternProperties;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping("now")</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">now</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> LocalDateTime.now().format(DateTimeFormatter.ofPattern(patternProperties.getDateformat()));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 略</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="1-3-配置共享"><a href="#1-3-配置共享" class="headerlink" title="1.3.配置共享"></a>1.3.配置共享</h2><p>其实微服务启动时，会去nacos读取多个配置文件，例如：</p><ul><li><p><code>[spring.application.name]-[spring.profiles.active].yaml</code>，例如：userservice-dev.yaml</p></li><li><p><code>[spring.application.name].yaml</code>，例如：userservice.yaml</p></li></ul><p>而<code>[spring.application.name].yaml</code>不包含环境，因此可以被多个环境共享。</p><p>下面我们通过案例来测试配置共享</p><h3 id="1）添加一个环境共享配置"><a href="#1）添加一个环境共享配置" class="headerlink" title="1）添加一个环境共享配置"></a>1）添加一个环境共享配置</h3><p>我们在nacos中添加一个userservice.yaml文件：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714173233650.png" alt="image-20210714173233650"></p><h3 id="2）在user-service中读取共享配置"><a href="#2）在user-service中读取共享配置" class="headerlink" title="2）在user-service中读取共享配置"></a>2）在user-service中读取共享配置</h3><p>在user-service服务中，修改PatternProperties类，读取新添加的属性：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714173324231.png" alt="image-20210714173324231"></p><p>在user-service服务中，修改UserController，添加一个方法：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714173721309.png" alt="image-20210714173721309"></p><h3 id="3）运行两个UserApplication，使用不同的profile"><a href="#3）运行两个UserApplication，使用不同的profile" class="headerlink" title="3）运行两个UserApplication，使用不同的profile"></a>3）运行两个UserApplication，使用不同的profile</h3><p>修改UserApplication2这个启动项，改变其profile值：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714173538538.png" alt="image-20210714173538538"></p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714173519963.png" alt="image-20210714173519963"></p><p>这样，UserApplication(8081)使用的profile是dev，UserApplication2(8082)使用的profile是test。</p><p>启动UserApplication和UserApplication2</p><p>访问<a href="http://localhost:8081/user/prop%EF%BC%8C%E7%BB%93%E6%9E%9C%EF%BC%9A">http://localhost:8081/user/prop，结果：</a></p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714174313344.png" alt="image-20210714174313344"></p><p>访问<a href="http://localhost:8082/user/prop%EF%BC%8C%E7%BB%93%E6%9E%9C%EF%BC%9A">http://localhost:8082/user/prop，结果：</a></p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714174424818.png" alt="image-20210714174424818"></p><p>可以看出来，不管是dev，还是test环境，都读取到了envSharedValue这个属性的值。</p><h3 id="4）配置共享的优先级"><a href="#4）配置共享的优先级" class="headerlink" title="4）配置共享的优先级"></a>4）配置共享的优先级</h3><p>当nacos、服务本地同时出现相同属性时，优先级有高低之分：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714174623557.png" alt="image-20210714174623557"></p><h2 id="1-4-搭建Nacos集群"><a href="#1-4-搭建Nacos集群" class="headerlink" title="1.4.搭建Nacos集群"></a>1.4.搭建Nacos集群</h2><p>Nacos生产环境下一定要部署为集群状态，部署方式参考课前资料中的文档：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714174728042.png" alt="image-20210714174728042"></p><h1 id="2-Feign远程调用"><a href="#2-Feign远程调用" class="headerlink" title="2.Feign远程调用"></a>2.Feign远程调用</h1><p>先来看我们以前利用RestTemplate发起远程调用的代码：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714174814204.png" alt="image-20210714174814204"></p><p>存在下面的问题：</p><p>•代码可读性差，编程体验不统一</p><p>•参数复杂URL难以维护</p><p>Feign是一个声明式的http客户端，官方地址：<a href="https://github.com/OpenFeign/feign">https://github.com/OpenFeign/feign</a></p><p>其作用就是帮助我们优雅的实现http请求的发送，解决上面提到的问题。</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714174918088.png" alt="image-20210714174918088"></p><h2 id="2-1-Feign替代RestTemplate"><a href="#2-1-Feign替代RestTemplate" class="headerlink" title="2.1.Feign替代RestTemplate"></a>2.1.Feign替代RestTemplate</h2><p>Fegin的使用步骤如下：</p><h3 id="1）引入依赖"><a href="#1）引入依赖" class="headerlink" title="1）引入依赖"></a>1）引入依赖</h3><p>我们在order-service服务的pom文件中引入feign的依赖：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="2）添加注解"><a href="#2）添加注解" class="headerlink" title="2）添加注解"></a>2）添加注解</h3><p>在order-service的启动类添加注解开启Feign的功能：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714175102524.png" alt="image-20210714175102524"></p><h3 id="3）编写Feign的客户端"><a href="#3）编写Feign的客户端" class="headerlink" title="3）编写Feign的客户端"></a>3）编写Feign的客户端</h3><p>在order-service中新建一个接口，内容如下：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.order.client;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.itcast.order.pojo.User;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.openfeign.FeignClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PathVariable;</span><br><span class="line"></span><br><span class="line"><span class="meta">@FeignClient("userservice")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserClient</span> {</span><br><span class="line">    <span class="meta">@GetMapping("/user/{id}")</span></span><br><span class="line">    User <span class="title function_">findById</span><span class="params">(<span class="meta">@PathVariable("id")</span> Long id)</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>这个客户端主要是基于SpringMVC的注解来声明远程调用的信息，比如：</p><ul><li>服务名称：userservice</li><li>请求方式：GET</li><li>请求路径：/user/{id}</li><li>请求参数：Long id</li><li>返回值类型：User</li></ul><p>这样，Feign就可以帮助我们发送http请求，无需自己使用RestTemplate来发送了。</p><h3 id="4）测试"><a href="#4）测试" class="headerlink" title="4）测试"></a>4）测试</h3><p>修改order-service中的OrderService类中的queryOrderById方法，使用Feign客户端代替RestTemplate：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714175415087.png" alt="image-20210714175415087"></p><p>是不是看起来优雅多了。</p><h3 id="5）总结"><a href="#5）总结" class="headerlink" title="5）总结"></a>5）总结</h3><p>使用Feign的步骤：</p><p>① 引入依赖</p><p>② 添加@EnableFeignClients注解</p><p>③ 编写FeignClient接口</p><p>④ 使用FeignClient中定义的方法代替RestTemplate</p><h2 id="2-2-自定义配置"><a href="#2-2-自定义配置" class="headerlink" title="2.2.自定义配置"></a>2.2.自定义配置</h2><p>Feign可以支持很多的自定义配置，如下表所示：</p><table><thead><tr><th>类型</th><th>作用</th><th>说明</th></tr></thead><tbody><tr><td><strong>feign.Logger.Level</strong></td><td>修改日志级别</td><td>包含四种不同的级别：NONE、BASIC、HEADERS、FULL</td></tr><tr><td>feign.codec.Decoder</td><td>响应结果的解析器</td><td>http远程调用的结果做解析，例如解析json字符串为java对象</td></tr><tr><td>feign.codec.Encoder</td><td>请求参数编码</td><td>将请求参数编码，便于通过http请求发送</td></tr><tr><td>feign. Contract</td><td>支持的注解格式</td><td>默认是SpringMVC的注解</td></tr><tr><td>feign. Retryer</td><td>失败重试机制</td><td>请求失败的重试机制，默认是没有，不过会使用Ribbon的重试</td></tr></tbody></table><p>一般情况下，默认值就能满足我们使用，如果要自定义时，只需要创建自定义的@Bean覆盖默认Bean即可。</p><p>下面以日志为例来演示如何自定义配置。</p><h3 id="2-2-1-配置文件方式"><a href="#2-2-1-配置文件方式" class="headerlink" title="2.2.1.配置文件方式"></a>2.2.1.配置文件方式</h3><p>基于配置文件修改feign的日志级别可以针对单个服务：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span>  </span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">config:</span> </span><br><span class="line">      <span class="attr">userservice:</span> <span class="comment"># 针对某个微服务的配置</span></span><br><span class="line">        <span class="attr">loggerLevel:</span> <span class="string">FULL</span> <span class="comment">#  日志级别 </span></span><br></pre></td></tr></tbody></table></figure><p>也可以针对所有服务：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span>  </span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">config:</span> </span><br><span class="line">      <span class="attr">default:</span> <span class="comment"># 这里用default就是全局配置，如果是写服务名称，则是针对某个微服务的配置</span></span><br><span class="line">        <span class="attr">loggerLevel:</span> <span class="string">FULL</span> <span class="comment">#  日志级别 </span></span><br></pre></td></tr></tbody></table></figure><p>而日志的级别分为四种：</p><ul><li>NONE：不记录任何日志信息，这是默认值。</li><li>BASIC：仅记录请求的方法，URL以及响应状态码和执行时间</li><li>HEADERS：在BASIC的基础上，额外记录了请求和响应的头信息</li><li>FULL：记录所有请求和响应的明细，包括头信息、请求体、元数据。</li></ul><h3 id="2-2-2-Java代码方式"><a href="#2-2-2-Java代码方式" class="headerlink" title="2.2.2.Java代码方式"></a>2.2.2.Java代码方式</h3><p>也可以基于Java代码来修改日志级别，先声明一个类，然后声明一个Logger.Level的对象：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DefaultFeignConfiguration</span>  {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Logger.Level <span class="title function_">feignLogLevel</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> Logger.Level.BASIC; <span class="comment">// 日志级别为BASIC</span></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>如果要<strong>全局生效</strong>，将其放到启动类的@EnableFeignClients这个注解中：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableFeignClients(defaultConfiguration = DefaultFeignConfiguration .class)</span> </span><br></pre></td></tr></tbody></table></figure><p>如果是<strong>局部生效</strong>，则把它放到对应的@FeignClient这个注解中：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(value = "userservice", configuration = DefaultFeignConfiguration .class)</span> </span><br></pre></td></tr></tbody></table></figure><h2 id="2-3-Feign使用优化"><a href="#2-3-Feign使用优化" class="headerlink" title="2.3.Feign使用优化"></a>2.3.Feign使用优化</h2><p>Feign底层发起http请求，依赖于其它的框架。其底层客户端实现包括：</p><p>•URLConnection：默认实现，不支持连接池</p><p>•Apache HttpClient ：支持连接池</p><p>•OKHttp：支持连接池</p><p>因此提高Feign的性能主要手段就是使用<strong>连接池</strong>代替默认的URLConnection。</p><p>这里我们用Apache的HttpClient来演示。</p><p>1）引入依赖</p><p>在order-service的pom文件中引入Apache的HttpClient依赖：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--httpClient的依赖 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.github.openfeign<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>feign-httpclient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>2）配置连接池</p><p>在order-service的application.yml中添加配置：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">feign:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">config:</span></span><br><span class="line">      <span class="attr">default:</span> <span class="comment"># default全局的配置</span></span><br><span class="line">        <span class="attr">loggerLevel:</span> <span class="string">BASIC</span> <span class="comment"># 日志级别，BASIC就是基本的请求和响应信息</span></span><br><span class="line">  <span class="attr">httpclient:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># 开启feign对HttpClient的支持</span></span><br><span class="line">    <span class="attr">max-connections:</span> <span class="number">200</span> <span class="comment"># 最大的连接数</span></span><br><span class="line">    <span class="attr">max-connections-per-route:</span> <span class="number">50</span> <span class="comment"># 每个路径的最大连接数</span></span><br></pre></td></tr></tbody></table></figure><p>接下来，在FeignClientFactoryBean中的loadBalance方法中打断点：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714185925910.png" alt="image-20210714185925910"></p><p>Debug方式启动order-service服务，可以看到这里的client，底层就是Apache HttpClient：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714190041542.png" alt="image-20210714190041542"></p><p>总结，Feign的优化：</p><p>1.日志级别尽量用basic</p><p>2.使用HttpClient或OKHttp代替URLConnection</p><p>①  引入feign-httpClient依赖</p><p>②  配置文件开启httpClient功能，设置连接池参数</p><h2 id="2-4-最佳实践"><a href="#2-4-最佳实践" class="headerlink" title="2.4.最佳实践"></a>2.4.最佳实践</h2><p>所谓最近实践，就是使用过程中总结的经验，最好的一种使用方式。</p><p>自习观察可以发现，Feign的客户端与服务提供者的controller代码非常相似：</p><p>feign客户端：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714190542730.png" alt="image-20210714190542730"></p><p>UserController：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714190528450.png" alt="image-20210714190528450"></p><p>有没有一种办法简化这种重复的代码编写呢？</p><h3 id="2-4-1-继承方式"><a href="#2-4-1-继承方式" class="headerlink" title="2.4.1.继承方式"></a>2.4.1.继承方式</h3><p>一样的代码可以通过继承来共享：</p><p>1）定义一个API接口，利用定义方法，并基于SpringMVC注解做声明。</p><p>2）Feign客户端和Controller都集成改接口</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714190640857.png" alt="image-20210714190640857"></p><p>优点：</p><ul><li>简单</li><li>实现了代码共享</li></ul><p>缺点：</p><ul><li><p>服务提供方、服务消费方紧耦合</p></li><li><p>参数列表中的注解映射并不会继承，因此Controller中必须再次声明方法、参数列表、注解</p></li></ul><h3 id="2-4-2-抽取方式"><a href="#2-4-2-抽取方式" class="headerlink" title="2.4.2.抽取方式"></a>2.4.2.抽取方式</h3><p>将Feign的Client抽取为独立模块，并且把接口有关的POJO、默认的Feign配置都放到这个模块中，提供给所有消费者使用。</p><p>例如，将UserClient、User、Feign的默认配置都抽取到一个feign-api包中，所有微服务引用该依赖包，即可直接使用。</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714214041796.png" alt="image-20210714214041796"></p><h3 id="2-4-3-实现基于抽取的最佳实践"><a href="#2-4-3-实现基于抽取的最佳实践" class="headerlink" title="2.4.3.实现基于抽取的最佳实践"></a>2.4.3.实现基于抽取的最佳实践</h3><h4 id="1）抽取"><a href="#1）抽取" class="headerlink" title="1）抽取"></a>1）抽取</h4><p>首先创建一个module，命名为feign-api：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714204557771.png" alt="image-20210714204557771"></p><p>项目结构：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714204656214.png" alt="image-20210714204656214"></p><p>在feign-api中然后引入feign的starter依赖</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-openfeign<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>然后，order-service中编写的UserClient、User、DefaultFeignConfiguration都复制到feign-api项目中</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714205221970.png" alt="image-20210714205221970"></p><h4 id="2）在order-service中使用feign-api"><a href="#2）在order-service中使用feign-api" class="headerlink" title="2）在order-service中使用feign-api"></a>2）在order-service中使用feign-api</h4><p>首先，删除order-service中的UserClient、User、DefaultFeignConfiguration等类或接口。</p><p>在order-service的pom文件中中引入feign-api的依赖：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.itcast.demo<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>feign-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>修改order-service中的所有与上述三个组件有关的导包部分，改成导入feign-api中的包</p><h4 id="3）重启测试"><a href="#3）重启测试" class="headerlink" title="3）重启测试"></a>3）重启测试</h4><p>重启后，发现服务报错了：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714205623048.png" alt="image-20210714205623048"></p><p>这是因为UserClient现在在cn.itcast.feign.clients包下，</p><p>而order-service的@EnableFeignClients注解是在cn.itcast.order包下，不在同一个包，无法扫描到UserClient。</p><h4 id="4）解决扫描包问题"><a href="#4）解决扫描包问题" class="headerlink" title="4）解决扫描包问题"></a>4）解决扫描包问题</h4><p>方式一：</p><p>指定Feign应该扫描的包：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableFeignClients(basePackages = "cn.itcast.feign.clients")</span></span><br></pre></td></tr></tbody></table></figure><p>方式二：</p><p>指定需要加载的Client接口：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableFeignClients(clients = {UserClient.class})</span></span><br></pre></td></tr></tbody></table></figure><h1 id="3-Gateway服务网关"><a href="#3-Gateway服务网关" class="headerlink" title="3.Gateway服务网关"></a>3.Gateway服务网关</h1><p>Spring Cloud Gateway 是 Spring Cloud 的一个全新项目，该项目是基于 Spring 5.0，Spring Boot 2.0 和 Project Reactor 等响应式编程和事件流技术开发的网关，它旨在为微服务架构提供一种简单有效的统一的 API 路由管理方式。</p><h2 id="3-1-为什么需要网关"><a href="#3-1-为什么需要网关" class="headerlink" title="3.1.为什么需要网关"></a>3.1.为什么需要网关</h2><p>Gateway网关是我们服务的守门神，所有微服务的统一入口。</p><p>网关的<strong>核心功能特性</strong>：</p><ul><li>请求路由</li><li>权限控制</li><li>限流</li></ul><p>架构图：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714210131152.png" alt="image-20210714210131152"></p><p><strong>权限控制</strong>：网关作为微服务入口，需要校验用户是是否有请求资格，如果没有则进行拦截。</p><p><strong>路由和负载均衡</strong>：一切请求都必须先经过gateway，但网关不处理业务，而是根据某种规则，把请求转发到某个微服务，这个过程叫做路由。当然路由的目标服务有多个时，还需要做负载均衡。</p><p><strong>限流</strong>：当请求流量过高时，在网关中按照下流的微服务能够接受的速度来放行请求，避免服务压力过大。</p><p>在SpringCloud中网关的实现包括两种：</p><ul><li>gateway</li><li>zuul</li></ul><p>Zuul是基于Servlet的实现，属于阻塞式编程。而SpringCloudGateway则是基于Spring5中提供的WebFlux，属于响应式编程的实现，具备更好的性能。</p><h2 id="3-2-gateway快速入门"><a href="#3-2-gateway快速入门" class="headerlink" title="3.2.gateway快速入门"></a>3.2.gateway快速入门</h2><p>下面，我们就演示下网关的基本路由功能。基本步骤如下：</p><ol><li>创建SpringBoot工程gateway，引入网关依赖</li><li>编写启动类</li><li>编写基础配置和路由规则</li><li>启动网关服务进行测试</li></ol><h3 id="1）创建gateway服务，引入依赖"><a href="#1）创建gateway服务，引入依赖" class="headerlink" title="1）创建gateway服务，引入依赖"></a>1）创建gateway服务，引入依赖</h3><p>创建服务：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714210919458.png" alt="image-20210714210919458"></p><p>引入依赖：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--网关--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-gateway<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--nacos服务发现依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="2）编写启动类"><a href="#2）编写启动类" class="headerlink" title="2）编写启动类"></a>2）编写启动类</h3><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.gateway;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GatewayApplication</span> {</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">SpringApplication.run(GatewayApplication.class, args);</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3）编写基础配置和路由规则"><a href="#3）编写基础配置和路由规则" class="headerlink" title="3）编写基础配置和路由规则"></a>3）编写基础配置和路由规则</h3><p>创建application.yml文件，内容如下：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">10010</span> <span class="comment"># 网关端口</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">gateway</span> <span class="comment"># 服务名称</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">localhost:8848</span> <span class="comment"># nacos地址</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span> <span class="comment"># 网关路由配置</span></span><br><span class="line">        <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service</span> <span class="comment"># 路由id，自定义，只要唯一即可</span></span><br><span class="line">          <span class="comment"># uri: http://127.0.0.1:8081 # 路由的目标地址 http就是固定地址</span></span><br><span class="line">          <span class="attr">uri:</span> <span class="string">lb://userservice</span> <span class="comment"># 路由的目标地址 lb就是负载均衡，后面跟服务名称</span></span><br><span class="line">          <span class="attr">predicates:</span> <span class="comment"># 路由断言，也就是判断请求是否符合路由规则的条件</span></span><br><span class="line">            <span class="bullet">-</span> <span class="string">Path=/user/**</span> <span class="comment"># 这个是按照路径匹配，只要以/user/开头就符合要求</span></span><br></pre></td></tr></tbody></table></figure><p>我们将符合<code>Path</code> 规则的一切请求，都代理到 <code>uri</code>参数指定的地址。</p><p>本例中，我们将 <code>/user/**</code>开头的请求，代理到<code>lb://userservice</code>，lb是负载均衡，根据服务名拉取服务列表，实现负载均衡。</p><h3 id="4）重启测试"><a href="#4）重启测试" class="headerlink" title="4）重启测试"></a>4）重启测试</h3><p>重启网关，访问<a href="http://localhost:10010/user/1%E6%97%B6%EF%BC%8C%E7%AC%A6%E5%90%88%60/user/**%60%E8%A7%84%E5%88%99%EF%BC%8C%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91%E5%88%B0uri%EF%BC%9Ahttp://userservice/user/1%EF%BC%8C%E5%BE%97%E5%88%B0%E4%BA%86%E7%BB%93%E6%9E%9C%EF%BC%9A">http://localhost:10010/user/1时，符合`/user/**`规则，请求转发到uri：http://userservice/user/1，得到了结果：</a></p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714211908341.png" alt="image-20210714211908341"></p><h3 id="5）网关路由的流程图"><a href="#5）网关路由的流程图" class="headerlink" title="5）网关路由的流程图"></a>5）网关路由的流程图</h3><p>整个访问的流程如下：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714211742956.png" alt="image-20210714211742956"></p><p>总结：</p><p>网关搭建步骤：</p><ol><li><p>创建项目，引入nacos服务发现和gateway依赖</p></li><li><p>配置application.yml，包括服务基本信息、nacos地址、路由</p></li></ol><p>路由配置包括：</p><ol><li><p>路由id：路由的唯一标示</p></li><li><p>路由目标（uri）：路由的目标地址，http代表固定地址，lb代表根据服务名负载均衡</p></li><li><p>路由断言（predicates）：判断路由的规则，</p></li><li><p>路由过滤器（filters）：对请求或响应做处理</p></li></ol><p>接下来，就重点来学习路由断言和路由过滤器的详细知识</p><h2 id="3-3-断言工厂"><a href="#3-3-断言工厂" class="headerlink" title="3.3.断言工厂"></a>3.3.断言工厂</h2><p>我们在配置文件中写的断言规则只是字符串，这些字符串会被Predicate Factory读取并处理，转变为路由判断的条件</p><p>例如Path=/user/**是按照路径匹配，这个规则是由</p><p><code>org.springframework.cloud.gateway.handler.predicate.PathRoutePredicateFactory</code>类来</p><p>处理的，像这样的断言工厂在SpringCloudGateway还有十几个:</p><table><thead><tr><th><strong>名称</strong></th><th><strong>说明</strong></th><th><strong>示例</strong></th></tr></thead><tbody><tr><td>After</td><td>是某个时间点后的请求</td><td>-  After=2037-01-20T17:42:47.789-07:00[America/Denver]</td></tr><tr><td>Before</td><td>是某个时间点之前的请求</td><td>-  Before=2031-04-13T15:14:47.433+08:00[Asia/Shanghai]</td></tr><tr><td>Between</td><td>是某两个时间点之前的请求</td><td>-  Between=2037-01-20T17:42:47.789-07:00[America/Denver],  2037-01-21T17:42:47.789-07:00[America/Denver]</td></tr><tr><td>Cookie</td><td>请求必须包含某些cookie</td><td>- Cookie=chocolate, ch.p</td></tr><tr><td>Header</td><td>请求必须包含某些header</td><td>- Header=X-Request-Id, \d+</td></tr><tr><td>Host</td><td>请求必须是访问某个host（域名）</td><td>-  Host=<strong>.somehost.org,</strong>.anotherhost.org</td></tr><tr><td>Method</td><td>请求方式必须是指定方式</td><td>- Method=GET,POST</td></tr><tr><td>Path</td><td>请求路径必须符合指定规则</td><td>- Path=/red/{segment},/blue/**</td></tr><tr><td>Query</td><td>请求参数必须包含指定参数</td><td>- Query=name, Jack或者-  Query=name</td></tr><tr><td>RemoteAddr</td><td>请求者的ip必须是指定范围</td><td>- RemoteAddr=192.168.1.1/24</td></tr><tr><td>Weight</td><td>权重处理</td><td></td></tr></tbody></table><p>我们只需要掌握Path这种路由工程就可以了。</p><h2 id="3-4-过滤器工厂"><a href="#3-4-过滤器工厂" class="headerlink" title="3.4.过滤器工厂"></a>3.4.过滤器工厂</h2><p>GatewayFilter是网关中提供的一种过滤器，可以对进入网关的请求和微服务返回的响应做处理：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714212312871.png" alt="image-20210714212312871"></p><h3 id="3-4-1-路由过滤器的种类"><a href="#3-4-1-路由过滤器的种类" class="headerlink" title="3.4.1.路由过滤器的种类"></a>3.4.1.路由过滤器的种类</h3><p>Spring提供了31种不同的路由过滤器工厂。例如：</p><table><thead><tr><th><strong>名称</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>AddRequestHeader</td><td>给当前请求添加一个请求头</td></tr><tr><td>RemoveRequestHeader</td><td>移除请求中的一个请求头</td></tr><tr><td>AddResponseHeader</td><td>给响应结果中添加一个响应头</td></tr><tr><td>RemoveResponseHeader</td><td>从响应结果中移除有一个响应头</td></tr><tr><td>RequestRateLimiter</td><td>限制请求的流量</td></tr></tbody></table><h3 id="3-4-2-请求头过滤器"><a href="#3-4-2-请求头过滤器" class="headerlink" title="3.4.2.请求头过滤器"></a>3.4.2.请求头过滤器</h3><p>下面我们以AddRequestHeader 为例来讲解。</p><blockquote><p><strong>需求</strong>：给所有进入userservice的请求添加一个请求头：Truth=itcast is freaking awesome!</p></blockquote><p>只需要修改gateway服务的application.yml文件，添加路由过滤即可：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service</span> </span><br><span class="line">        <span class="attr">uri:</span> <span class="string">lb://userservice</span> </span><br><span class="line">        <span class="attr">predicates:</span> </span><br><span class="line">        <span class="bullet">-</span> <span class="string">Path=/user/**</span> </span><br><span class="line">        <span class="attr">filters:</span> <span class="comment"># 过滤器</span></span><br><span class="line">        <span class="bullet">-</span> <span class="string">AddRequestHeader=Truth,</span> <span class="string">Itcast</span> <span class="string">is</span> <span class="string">freaking</span> <span class="string">awesome!</span> <span class="comment"># 添加请求头</span></span><br></pre></td></tr></tbody></table></figure><p>当前过滤器写在userservice路由下，因此仅仅对访问userservice的请求有效。</p><h3 id="3-4-3-默认过滤器"><a href="#3-4-3-默认过滤器" class="headerlink" title="3.4.3.默认过滤器"></a>3.4.3.默认过滤器</h3><p>如果要对所有的路由都生效，则可以将过滤器工厂写到default下。格式如下：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">routes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">id:</span> <span class="string">user-service</span> </span><br><span class="line">        <span class="attr">uri:</span> <span class="string">lb://userservice</span> </span><br><span class="line">        <span class="attr">predicates:</span> </span><br><span class="line">        <span class="bullet">-</span> <span class="string">Path=/user/**</span></span><br><span class="line">      <span class="attr">default-filters:</span> <span class="comment"># 默认过滤项</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">AddRequestHeader=Truth,</span> <span class="string">Itcast</span> <span class="string">is</span> <span class="string">freaking</span> <span class="string">awesome!</span> </span><br></pre></td></tr></tbody></table></figure><h3 id="3-4-4-总结"><a href="#3-4-4-总结" class="headerlink" title="3.4.4.总结"></a>3.4.4.总结</h3><p>过滤器的作用是什么？</p><p>① 对路由的请求或响应做加工处理，比如添加请求头</p><p>② 配置在路由下的过滤器只对当前路由的请求生效</p><p>defaultFilters的作用是什么？</p><p>① 对所有路由都生效的过滤器</p><h2 id="3-5-全局过滤器"><a href="#3-5-全局过滤器" class="headerlink" title="3.5.全局过滤器"></a>3.5.全局过滤器</h2><p>上一节学习的过滤器，网关提供了31种，但每一种过滤器的作用都是固定的。如果我们希望拦截请求，做自己的业务逻辑则没办法实现。</p><h3 id="3-5-1-全局过滤器作用"><a href="#3-5-1-全局过滤器作用" class="headerlink" title="3.5.1.全局过滤器作用"></a>3.5.1.全局过滤器作用</h3><p>全局过滤器的作用也是处理一切进入网关的请求和微服务响应，与GatewayFilter的作用一样。区别在于GatewayFilter通过配置定义，处理逻辑是固定的；而GlobalFilter的逻辑需要自己写代码实现。</p><p>定义方式是实现GlobalFilter接口。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">GlobalFilter</span> {</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  处理当前请求，有必要的话通过{<span class="doctag">@link</span> GatewayFilterChain}将请求交给下一个过滤器处理</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> exchange 请求上下文，里面可以获取Request、Response等信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> chain 用来把请求委托给下一个过滤器 </span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> {<span class="doctag">@code</span> Mono&lt;Void&gt;} 返回标示当前过滤器业务结束</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    Mono&lt;Void&gt; <span class="title function_">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>在filter中编写自定义逻辑，可以实现下列功能：</p><ul><li>登录状态判断</li><li>权限校验</li><li>请求限流等</li></ul><h3 id="3-5-2-自定义全局过滤器"><a href="#3-5-2-自定义全局过滤器" class="headerlink" title="3.5.2.自定义全局过滤器"></a>3.5.2.自定义全局过滤器</h3><p>需求：定义全局过滤器，拦截请求，判断请求的参数是否满足下面条件：</p><ul><li><p>参数中是否有authorization，</p></li><li><p>authorization参数值是否为admin</p></li></ul><p>如果同时满足则放行，否则拦截</p><p>实现：</p><p>在gateway中定义一个过滤器：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.gateway.filters;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.gateway.filter.GatewayFilterChain;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.gateway.filter.GlobalFilter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.annotation.Order;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.server.ServerWebExchange;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Mono;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Order(-1)</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AuthorizeFilter</span> <span class="keyword">implements</span> <span class="title class_">GlobalFilter</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Mono&lt;Void&gt; <span class="title function_">filter</span><span class="params">(ServerWebExchange exchange, GatewayFilterChain chain)</span> {</span><br><span class="line">        <span class="comment">// 1.获取请求参数</span></span><br><span class="line">        MultiValueMap&lt;String, String&gt; params = exchange.getRequest().getQueryParams();</span><br><span class="line">        <span class="comment">// 2.获取authorization参数</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">auth</span> <span class="operator">=</span> params.getFirst(<span class="string">"authorization"</span>);</span><br><span class="line">        <span class="comment">// 3.校验</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"admin"</span>.equals(auth)) {</span><br><span class="line">            <span class="comment">// 放行</span></span><br><span class="line">            <span class="keyword">return</span> chain.filter(exchange);</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// 4.拦截</span></span><br><span class="line">        <span class="comment">// 4.1.禁止访问，设置状态码</span></span><br><span class="line">        exchange.getResponse().setStatusCode(HttpStatus.FORBIDDEN);</span><br><span class="line">        <span class="comment">// 4.2.结束处理</span></span><br><span class="line">        <span class="keyword">return</span> exchange.getResponse().setComplete();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3-5-3-过滤器执行顺序"><a href="#3-5-3-过滤器执行顺序" class="headerlink" title="3.5.3.过滤器执行顺序"></a>3.5.3.过滤器执行顺序</h3><p>请求进入网关会碰到三类过滤器：当前路由的过滤器、DefaultFilter、GlobalFilter</p><p>请求路由后，会将当前路由过滤器和DefaultFilter、GlobalFilter，合并到一个过滤器链（集合）中，排序后依次执行每个过滤器：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714214228409.png" alt="image-20210714214228409"></p><p>排序的规则是什么呢？</p><ul><li>每一个过滤器都必须指定一个int类型的order值，<strong>order值越小，优先级越高，执行顺序越靠前</strong>。</li><li>GlobalFilter通过实现Ordered接口，或者添加@Order注解来指定order值，由我们自己指定</li><li>路由过滤器和defaultFilter的order由Spring指定，默认是按照声明顺序从1递增。</li><li>当过滤器的order值一样时，会按照 defaultFilter &gt; 路由过滤器 &gt; GlobalFilter的顺序执行。</li></ul><p>详细内容，可以查看源码：</p><p><code>org.springframework.cloud.gateway.route.RouteDefinitionRouteLocator#getFilters()</code>方法是先加载defaultFilters，然后再加载某个route的filters，然后合并。</p><p><code>org.springframework.cloud.gateway.handler.FilteringWebHandler#handle()</code>方法会加载全局过滤器，与前面的过滤器合并后根据order排序，组织过滤器链</p><h2 id="3-6-跨域问题"><a href="#3-6-跨域问题" class="headerlink" title="3.6.跨域问题"></a>3.6.跨域问题</h2><h3 id="3-6-1-什么是跨域问题"><a href="#3-6-1-什么是跨域问题" class="headerlink" title="3.6.1.什么是跨域问题"></a>3.6.1.什么是跨域问题</h3><p>跨域：域名不一致就是跨域，主要包括：</p><ul><li><p>域名不同： <a href="http://www.taobao.com/">www.taobao.com</a> 和 <a href="http://www.taobao.org/">www.taobao.org</a> 和 <a href="http://www.jd.com/">www.jd.com</a> 和 miaosha.jd.com</p></li><li><p>域名相同，端口不同：localhost:8080和localhost8081</p></li></ul><p>跨域问题：浏览器禁止请求的发起者与服务端发生跨域ajax请求，请求被浏览器拦截的问题</p><p>解决方案：CORS，这个以前应该学习过，这里不再赘述了。不知道的小伙伴可以查看<a href="https://www.ruanyifeng.com/blog/2016/04/cors.html">https://www.ruanyifeng.com/blog/2016/04/cors.html</a></p><h3 id="3-6-2-模拟跨域问题"><a href="#3-6-2-模拟跨域问题" class="headerlink" title="3.6.2.模拟跨域问题"></a>3.6.2.模拟跨域问题</h3><p>找到课前资料的页面文件：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714215713563.png" alt="image-20210714215713563"></p><p>放入tomcat或者nginx这样的web服务器中，启动并访问。</p><p>可以在浏览器控制台看到下面的错误：</p><p><img src="/2023/07/20/springcloud-shi-yong-pian-02/image-20210714215832675.png" alt="image-20210714215832675"></p><p>从localhost:8090访问localhost:10010，端口不同，显然是跨域的请求。</p><h3 id="3-6-3-解决跨域问题"><a href="#3-6-3-解决跨域问题" class="headerlink" title="3.6.3.解决跨域问题"></a>3.6.3.解决跨域问题</h3><p>在gateway服务的application.yml文件中，添加下面的配置：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="comment"># 。。。</span></span><br><span class="line">      <span class="attr">globalcors:</span> <span class="comment"># 全局的跨域处理</span></span><br><span class="line">        <span class="attr">add-to-simple-url-handler-mapping:</span> <span class="literal">true</span> <span class="comment"># 解决options请求被拦截问题</span></span><br><span class="line">        <span class="attr">corsConfigurations:</span></span><br><span class="line">          <span class="string">'[/**]'</span><span class="string">:</span></span><br><span class="line">            <span class="attr">allowedOrigins:</span> <span class="comment"># 允许哪些网站的跨域请求 </span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">"http://localhost:8090"</span></span><br><span class="line">            <span class="attr">allowedMethods:</span> <span class="comment"># 允许的跨域ajax的请求方式</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">"GET"</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">"POST"</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">"DELETE"</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">"PUT"</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">"OPTIONS"</span></span><br><span class="line">            <span class="attr">allowedHeaders:</span> <span class="string">"*"</span> <span class="comment"># 允许在请求中携带的头信息</span></span><br><span class="line">            <span class="attr">allowCredentials:</span> <span class="literal">true</span> <span class="comment"># 是否允许携带cookie</span></span><br><span class="line">            <span class="attr">maxAge:</span> <span class="number">360000</span> <span class="comment"># 这次跨域检测的有效期</span></span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;SpringCloud02&quot;&gt;&lt;a href=&quot;#SpringCloud02&quot; class=&quot;headerlink&quot; title=&quot;SpringCloud02&quot;&gt;&lt;/a&gt;SpringCloud02&lt;/h1&gt;</summary>
    
    
    
    <category term="SpringCloud" scheme="https://llzzoomm.github.io/categories/SpringCloud/"/>
    
    
    <category term="SpringCloud" scheme="https://llzzoomm.github.io/tags/SpringCloud/"/>
    
  </entry>
  
  <entry>
    <title>分布式搜索引擎01</title>
    <link href="https://llzzoomm.github.io/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/"/>
    <id>https://llzzoomm.github.io/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/</id>
    <published>2023-07-20T11:31:50.971Z</published>
    <updated>2023-07-20T11:29:59.105Z</updated>
    
    <content type="html"><![CDATA[<h1 id="分布式搜索引擎01"><a href="#分布式搜索引擎01" class="headerlink" title="分布式搜索引擎01"></a>分布式搜索引擎01</h1><span id="more"></span><p>– elasticsearch基础</p><h1 id="1-初识elasticsearch"><a href="#1-初识elasticsearch" class="headerlink" title="1.初识elasticsearch"></a>1.初识elasticsearch</h1><h2 id="1-1-了解ES"><a href="#1-1-了解ES" class="headerlink" title="1.1.了解ES"></a>1.1.了解ES</h2><h3 id="1-1-1-elasticsearch的作用"><a href="#1-1-1-elasticsearch的作用" class="headerlink" title="1.1.1.elasticsearch的作用"></a>1.1.1.elasticsearch的作用</h3><p>elasticsearch是一款非常强大的开源搜索引擎，具备非常多强大功能，可以帮助我们从海量数据中快速找到需要的内容</p><p>例如：</p><ul><li><p>在GitHub搜索代码</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720193623245.png" alt="image-20210720193623245"></p></li><li><p>在电商网站搜索商品</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720193633483.png" alt="image-20210720193633483"></p></li><li><p>在百度搜索答案</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720193641907.png" alt="image-20210720193641907"></p></li><li><p>在打车软件搜索附近的车</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720193648044.png" alt="image-20210720193648044"></p></li></ul><h3 id="1-1-2-ELK技术栈"><a href="#1-1-2-ELK技术栈" class="headerlink" title="1.1.2.ELK技术栈"></a>1.1.2.ELK技术栈</h3><p>elasticsearch结合kibana、Logstash、Beats，也就是elastic stack（ELK）。被广泛应用在日志数据分析、实时监控等领域：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720194008781.png" alt="image-20210720194008781"></p><p>而elasticsearch是elastic stack的核心，负责存储、搜索、分析数据。</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720194230265.png" alt="image-20210720194230265"></p><h3 id="1-1-3-elasticsearch和lucene"><a href="#1-1-3-elasticsearch和lucene" class="headerlink" title="1.1.3.elasticsearch和lucene"></a>1.1.3.elasticsearch和lucene</h3><p>elasticsearch底层是基于<strong>lucene</strong>来实现的。</p><p><strong>Lucene</strong>是一个Java语言的搜索引擎类库，是Apache公司的顶级项目，由DougCutting于1999年研发。官网地址：<a href="https://lucene.apache.org/">https://lucene.apache.org/</a> 。</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720194547780.png" alt="image-20210720194547780"></p><p><strong>elasticsearch</strong>的发展历史：</p><ul><li>2004年Shay Banon基于Lucene开发了Compass</li><li>2010年Shay Banon 重写了Compass，取名为Elasticsearch。</li></ul><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720195001221.png" alt="image-20210720195001221"></p><h3 id="1-1-4-为什么不是其他搜索技术？"><a href="#1-1-4-为什么不是其他搜索技术？" class="headerlink" title="1.1.4.为什么不是其他搜索技术？"></a>1.1.4.为什么不是其他搜索技术？</h3><p>目前比较知名的搜索引擎技术排名：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720195142535.png" alt="image-20210720195142535"></p><p>虽然在早期，Apache Solr是最主要的搜索引擎技术，但随着发展elasticsearch已经渐渐超越了Solr，独占鳌头：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720195306484.png" alt="image-20210720195306484"></p><h3 id="1-1-5-总结"><a href="#1-1-5-总结" class="headerlink" title="1.1.5.总结"></a>1.1.5.总结</h3><p>什么是elasticsearch？</p><ul><li>一个开源的分布式搜索引擎，可以用来实现搜索、日志统计、分析、系统监控等功能</li></ul><p>什么是elastic stack（ELK）？</p><ul><li>是以elasticsearch为核心的技术栈，包括beats、Logstash、kibana、elasticsearch</li></ul><p>什么是Lucene？</p><ul><li>是Apache的开源搜索引擎类库，提供了搜索引擎的核心API</li></ul><h2 id="1-2-倒排索引"><a href="#1-2-倒排索引" class="headerlink" title="1.2.倒排索引"></a>1.2.倒排索引</h2><p>倒排索引的概念是基于MySQL这样的正向索引而言的。</p><h3 id="1-2-1-正向索引"><a href="#1-2-1-正向索引" class="headerlink" title="1.2.1.正向索引"></a>1.2.1.正向索引</h3><p>那么什么是正向索引呢？例如给下表（tb_goods）中的id创建索引：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720195531539.png" alt="image-20210720195531539"></p><p>如果是根据id查询，那么直接走索引，查询速度非常快。</p><p>但如果是基于title做模糊查询，只能是逐行扫描数据，流程如下：</p><p>1）用户搜索数据，条件是title符合<code>"%手机%"</code></p><p>2）逐行获取数据，比如id为1的数据</p><p>3）判断数据中的title是否符合用户搜索条件</p><p>4）如果符合则放入结果集，不符合则丢弃。回到步骤1</p><p>逐行扫描，也就是全表扫描，随着数据量增加，其查询效率也会越来越低。当数据量达到数百万时，就是一场灾难。</p><h3 id="1-2-2-倒排索引"><a href="#1-2-2-倒排索引" class="headerlink" title="1.2.2.倒排索引"></a>1.2.2.倒排索引</h3><p>倒排索引中有两个非常重要的概念：</p><ul><li>文档（<code>Document</code>）：用来搜索的数据，其中的每一条数据就是一个文档。例如一个网页、一个商品信息</li><li>词条（<code>Term</code>）：对文档数据或用户搜索数据，利用某种算法分词，得到的具备含义的词语就是词条。例如：我是中国人，就可以分为：我、是、中国人、中国、国人这样的几个词条</li></ul><p><strong>创建倒排索引</strong>是对正向索引的一种特殊处理，流程如下：</p><ul><li>将每一个文档的数据利用算法分词，得到一个个词条</li><li>创建表，每行数据包括词条、词条所在文档id、位置等信息</li><li>因为词条唯一性，可以给词条创建索引，例如hash表结构索引</li></ul><p>如图：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720200457207.png" alt="image-20210720200457207"></p><p>倒排索引的<strong>搜索流程</strong>如下（以搜索”华为手机”为例）：</p><p>1）用户输入条件<code>"华为手机"</code>进行搜索。</p><p>2）对用户输入内容<strong>分词</strong>，得到词条：<code>华为</code>、<code>手机</code>。</p><p>3）拿着词条在倒排索引中查找，可以得到包含词条的文档id：1、2、3。</p><p>4）拿着文档id到正向索引中查找具体文档。</p><p>如图：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720201115192.png" alt="image-20210720201115192"></p><p>虽然要先查询倒排索引，再查询倒排索引，但是无论是词条、还是文档id都建立了索引，查询速度非常快！无需全表扫描。</p><h3 id="1-2-3-正向和倒排"><a href="#1-2-3-正向和倒排" class="headerlink" title="1.2.3.正向和倒排"></a>1.2.3.正向和倒排</h3><p>那么为什么一个叫做正向索引，一个叫做倒排索引呢？</p><ul><li><p><strong>正向索引</strong>是最传统的，根据id索引的方式。但根据词条查询时，必须先逐条获取每个文档，然后判断文档中是否包含所需要的词条，是<strong>根据文档找词条的过程</strong>。</p></li><li><p>而<strong>倒排索引</strong>则相反，是先找到用户要搜索的词条，根据词条得到保护词条的文档的id，然后根据id获取文档。是<strong>根据词条找文档的过程</strong>。</p></li></ul><p>是不是恰好反过来了？</p><p>那么两者方式的优缺点是什么呢？</p><p><strong>正向索引</strong>：</p><ul><li>优点：<ul><li>可以给多个字段创建索引</li><li>根据索引字段搜索、排序速度非常快</li></ul></li><li>缺点：<ul><li>根据非索引字段，或者索引字段中的部分词条查找时，只能全表扫描。</li></ul></li></ul><p><strong>倒排索引</strong>：</p><ul><li>优点：<ul><li>根据词条搜索、模糊搜索时，速度非常快</li></ul></li><li>缺点：<ul><li>只能给词条创建索引，而不是字段</li><li>无法根据字段做排序</li></ul></li></ul><h2 id="1-3-es的一些概念"><a href="#1-3-es的一些概念" class="headerlink" title="1.3.es的一些概念"></a>1.3.es的一些概念</h2><p>elasticsearch中有很多独有的概念，与mysql中略有差别，但也有相似之处。</p><h3 id="1-3-1-文档和字段"><a href="#1-3-1-文档和字段" class="headerlink" title="1.3.1.文档和字段"></a>1.3.1.文档和字段</h3><p>elasticsearch是面向<strong>文档（Document）</strong>存储的，可以是数据库中的一条商品数据，一个订单信息。文档数据会被序列化为json格式后存储在elasticsearch中：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720202707797.png" alt="image-20210720202707797"></p><p>而Json文档中往往包含很多的<strong>字段（Field）</strong>，类似于数据库中的列。</p><h3 id="1-3-2-索引和映射"><a href="#1-3-2-索引和映射" class="headerlink" title="1.3.2.索引和映射"></a>1.3.2.索引和映射</h3><p><strong>索引（Index）</strong>，就是相同类型的文档的集合。</p><p>例如：</p><ul><li>所有用户文档，就可以组织在一起，称为用户的索引；</li><li>所有商品的文档，可以组织在一起，称为商品的索引；</li><li>所有订单的文档，可以组织在一起，称为订单的索引；</li></ul><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720203022172.png" alt="image-20210720203022172"></p><p>因此，我们可以把索引当做是数据库中的表。</p><p>数据库的表会有约束信息，用来定义表的结构、字段的名称、类型等信息。因此，索引库中就有<strong>映射（mapping）</strong>，是索引中文档的字段约束信息，类似表的结构约束。</p><h3 id="1-3-3-mysql与elasticsearch"><a href="#1-3-3-mysql与elasticsearch" class="headerlink" title="1.3.3.mysql与elasticsearch"></a>1.3.3.mysql与elasticsearch</h3><p>我们统一的把mysql与elasticsearch的概念做一下对比：</p><table><thead><tr><th><strong>MySQL</strong></th><th><strong>Elasticsearch</strong></th><th><strong>说明</strong></th></tr></thead><tbody><tr><td>Table</td><td>Index</td><td>索引(index)，就是文档的集合，类似数据库的表(table)</td></tr><tr><td>Row</td><td>Document</td><td>文档（Document），就是一条条的数据，类似数据库中的行（Row），文档都是JSON格式</td></tr><tr><td>Column</td><td>Field</td><td>字段（Field），就是JSON文档中的字段，类似数据库中的列（Column）</td></tr><tr><td>Schema</td><td>Mapping</td><td>Mapping（映射）是索引中文档的约束，例如字段类型约束。类似数据库的表结构（Schema）</td></tr><tr><td>SQL</td><td>DSL</td><td>DSL是elasticsearch提供的JSON风格的请求语句，用来操作elasticsearch，实现CRUD</td></tr></tbody></table><p>是不是说，我们学习了elasticsearch就不再需要mysql了呢？</p><p>并不是如此，两者各自有自己的擅长支出：</p><ul><li><p>Mysql：擅长事务类型操作，可以确保数据的安全和一致性</p></li><li><p>Elasticsearch：擅长海量数据的搜索、分析、计算</p></li></ul><p>因此在企业中，往往是两者结合使用：</p><ul><li>对安全性要求较高的写操作，使用mysql实现</li><li>对查询性能要求较高的搜索需求，使用elasticsearch实现</li><li>两者再基于某种方式，实现数据的同步，保证一致性</li></ul><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720203534945.png" alt="image-20210720203534945"></p><h2 id="1-4-安装es、kibana"><a href="#1-4-安装es、kibana" class="headerlink" title="1.4.安装es、kibana"></a>1.4.安装es、kibana</h2><h3 id="1-4-1-安装"><a href="#1-4-1-安装" class="headerlink" title="1.4.1.安装"></a>1.4.1.安装</h3><p>参考课前资料：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720203805350.png" alt="image-20210720203805350"> </p><h3 id="1-4-2-分词器"><a href="#1-4-2-分词器" class="headerlink" title="1.4.2.分词器"></a>1.4.2.分词器</h3><p>参考课前资料：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720203805350.png" alt="image-20210720203805350"> </p><h3 id="1-4-3-总结"><a href="#1-4-3-总结" class="headerlink" title="1.4.3.总结"></a>1.4.3.总结</h3><p>分词器的作用是什么？</p><ul><li>创建倒排索引时对文档分词</li><li>用户搜索时，对输入的内容分词</li></ul><p>IK分词器有几种模式？</p><ul><li>ik_smart：智能切分，粗粒度</li><li>ik_max_word：最细切分，细粒度</li></ul><p>IK分词器如何拓展词条？如何停用词条？</p><ul><li>利用config目录的IkAnalyzer.cfg.xml文件添加拓展词典和停用词典</li><li>在词典中添加拓展词条或者停用词条</li></ul><h1 id="2-索引库操作"><a href="#2-索引库操作" class="headerlink" title="2.索引库操作"></a>2.索引库操作</h1><p>索引库就类似数据库表，mapping映射就类似表的结构。</p><p>我们要向es中存储数据，必须先创建“库”和“表”。</p><h2 id="2-1-mapping映射属性"><a href="#2-1-mapping映射属性" class="headerlink" title="2.1.mapping映射属性"></a>2.1.mapping映射属性</h2><p>mapping是对索引库中文档的约束，常见的mapping属性包括：</p><ul><li>type：字段数据类型，常见的简单类型有：<ul><li>字符串：text（可分词的文本）、keyword（精确值，例如：品牌、国家、ip地址）</li><li>数值：long、integer、short、byte、double、float、</li><li>布尔：boolean</li><li>日期：date</li><li>对象：object</li></ul></li><li>index：是否创建索引，默认为true</li><li>analyzer：使用哪种分词器</li><li>properties：该字段的子字段</li></ul><p>例如下面的json文档：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"age"</span><span class="punctuation">:</span>&nbsp;<span class="number">21</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"weight"</span><span class="punctuation">:</span>&nbsp;<span class="number">52.1</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"isMarried"</span><span class="punctuation">:</span>&nbsp;<span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"info"</span><span class="punctuation">:</span>&nbsp;<span class="string">"黑马程序员Java讲师"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"email"</span><span class="punctuation">:</span>&nbsp;<span class="string">"zy@itcast.cn"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"score"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">[</span><span class="number">99.1</span><span class="punctuation">,</span> <span class="number">99.5</span><span class="punctuation">,</span> <span class="number">98.9</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"name"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"firstName"</span><span class="punctuation">:</span>&nbsp;<span class="string">"云"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"lastName"</span><span class="punctuation">:</span>&nbsp;<span class="string">"赵"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>对应的每个字段映射（mapping）：</p><ul><li>age：类型为 integer；参与搜索，因此需要index为true；无需分词器</li><li>weight：类型为float；参与搜索，因此需要index为true；无需分词器</li><li>isMarried：类型为boolean；参与搜索，因此需要index为true；无需分词器</li><li>info：类型为字符串，需要分词，因此是text；参与搜索，因此需要index为true；分词器可以用ik_smart</li><li>email：类型为字符串，但是不需要分词，因此是keyword；不参与搜索，因此需要index为false；无需分词器</li><li>score：虽然是数组，但是我们只看元素的类型，类型为float；参与搜索，因此需要index为true；无需分词器</li><li>name：类型为object，需要定义多个子属性<ul><li>name.firstName；类型为字符串，但是不需要分词，因此是keyword；参与搜索，因此需要index为true；无需分词器</li><li>name.lastName；类型为字符串，但是不需要分词，因此是keyword；参与搜索，因此需要index为true；无需分词器</li></ul></li></ul><h2 id="2-2-索引库的CRUD"><a href="#2-2-索引库的CRUD" class="headerlink" title="2.2.索引库的CRUD"></a>2.2.索引库的CRUD</h2><p>这里我们统一使用Kibana编写DSL的方式来演示。</p><h3 id="2-2-1-创建索引库和映射"><a href="#2-2-1-创建索引库和映射" class="headerlink" title="2.2.1.创建索引库和映射"></a>2.2.1.创建索引库和映射</h3><h4 id="基本语法："><a href="#基本语法：" class="headerlink" title="基本语法："></a>基本语法：</h4><ul><li>请求方式：PUT</li><li>请求路径：/索引库名，可以自定义</li><li>请求参数：mapping映射</li></ul><p>格式：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">PUT&nbsp;/索引库名称</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"mappings"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"properties"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"字段名"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"type"</span><span class="punctuation">:</span>&nbsp;<span class="string">"text"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"analyzer"</span><span class="punctuation">:</span>&nbsp;<span class="string">"ik_smart"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"字段名2"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"type"</span><span class="punctuation">:</span>&nbsp;<span class="string">"keyword"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"index"</span><span class="punctuation">:</span>&nbsp;<span class="string">"false"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"字段名3"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"properties"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"子字段"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"type"</span><span class="punctuation">:</span>&nbsp;<span class="string">"keyword"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="comment">// ...略</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><h4 id="示例："><a href="#示例：" class="headerlink" title="示例："></a>示例：</h4><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">PUT&nbsp;/heima</span><br><span class="line">{</span><br><span class="line">&nbsp;&nbsp;<span class="string">"mappings"</span>:&nbsp;{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"properties"</span>:&nbsp;{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"info"</span>:{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"type"</span>:&nbsp;<span class="string">"text"</span>,</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"analyzer"</span>:&nbsp;<span class="string">"ik_smart"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"email"</span>:{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"type"</span>:&nbsp;<span class="string">"keyword"</span>,</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"index"</span>:&nbsp;<span class="string">"falsae"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"name"</span>:{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"properties"</span>:&nbsp;{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"firstName"</span>:&nbsp;{</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"type"</span>:&nbsp;<span class="string">"keyword"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},</span><br><span class="line">      // ... 略</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;}</span><br><span class="line">&nbsp;&nbsp;}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="2-2-2-查询索引库"><a href="#2-2-2-查询索引库" class="headerlink" title="2.2.2.查询索引库"></a>2.2.2.查询索引库</h3><p><strong>基本语法</strong>：</p><ul><li><p>请求方式：GET</p></li><li><p>请求路径：/索引库名</p></li><li><p>请求参数：无</p></li></ul><p><strong>格式</strong>：</p><figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">GET</span> /索引库名</span><br></pre></td></tr></tbody></table></figure><p><strong>示例</strong>：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720211019329.png" alt="image-20210720211019329"></p><h3 id="2-2-3-修改索引库"><a href="#2-2-3-修改索引库" class="headerlink" title="2.2.3.修改索引库"></a>2.2.3.修改索引库</h3><p>倒排索引结构虽然不复杂，但是一旦数据结构改变（比如改变了分词器），就需要重新创建倒排索引，这简直是灾难。因此索引库<strong>一旦创建，无法修改mapping</strong>。</p><p>虽然无法修改mapping中已有的字段，但是却允许添加新的字段到mapping中，因为不会对倒排索引产生影响。</p><p><strong>语法说明</strong>：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">PUT&nbsp;/索引库名/_mapping</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"properties"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"新字段名"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"type"</span><span class="punctuation">:</span>&nbsp;<span class="string">"integer"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p><strong>示例</strong>：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720212357390.png" alt="image-20210720212357390"></p><h3 id="2-2-4-删除索引库"><a href="#2-2-4-删除索引库" class="headerlink" title="2.2.4.删除索引库"></a>2.2.4.删除索引库</h3><p><strong>语法：</strong></p><ul><li><p>请求方式：DELETE</p></li><li><p>请求路径：/索引库名</p></li><li><p>请求参数：无</p></li></ul><p><strong>格式：</strong></p><figure class="highlight gauss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> /索引库名</span><br></pre></td></tr></tbody></table></figure><p>在kibana中测试：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720212123420.png" alt="image-20210720212123420"></p><h3 id="2-2-5-总结"><a href="#2-2-5-总结" class="headerlink" title="2.2.5.总结"></a>2.2.5.总结</h3><p>索引库操作有哪些？</p><ul><li>创建索引库：PUT /索引库名</li><li>查询索引库：GET /索引库名</li><li>删除索引库：DELETE /索引库名</li><li>添加字段：PUT /索引库名/_mapping</li></ul><h1 id="3-文档操作"><a href="#3-文档操作" class="headerlink" title="3.文档操作"></a>3.文档操作</h1><h2 id="3-1-新增文档"><a href="#3-1-新增文档" class="headerlink" title="3.1.新增文档"></a>3.1.新增文档</h2><p><strong>语法：</strong></p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">POST&nbsp;/索引库名/_doc/文档id</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"字段1"</span><span class="punctuation">:</span>&nbsp;<span class="string">"值1"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"字段2"</span><span class="punctuation">:</span>&nbsp;<span class="string">"值2"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"字段3"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"子属性1"</span><span class="punctuation">:</span>&nbsp;<span class="string">"值3"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"子属性2"</span><span class="punctuation">:</span>&nbsp;<span class="string">"值4"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p><strong>示例：</strong></p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">POST&nbsp;/heima/_doc/<span class="number">1</span></span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"info"</span><span class="punctuation">:</span>&nbsp;<span class="string">"黑马程序员Java讲师"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"email"</span><span class="punctuation">:</span>&nbsp;<span class="string">"zy@itcast.cn"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"name"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"firstName"</span><span class="punctuation">:</span>&nbsp;<span class="string">"云"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"lastName"</span><span class="punctuation">:</span>&nbsp;<span class="string">"赵"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p><strong>响应：</strong></p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720212933362.png" alt="image-20210720212933362"></p><h2 id="3-2-查询文档"><a href="#3-2-查询文档" class="headerlink" title="3.2.查询文档"></a>3.2.查询文档</h2><p>根据rest风格，新增是post，查询应该是get，不过查询一般都需要条件，这里我们把文档id带上。</p><p><strong>语法：</strong></p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /<span class="punctuation">{</span>索引库名称<span class="punctuation">}</span>/_doc/<span class="punctuation">{</span>id<span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p><strong>通过kibana查看数据：</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">GET</span> /heima/_doc/<span class="number">1</span></span><br></pre></td></tr></tbody></table></figure><p><strong>查看结果：</strong></p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720213345003.png" alt="image-20210720213345003"></p><h2 id="3-3-删除文档"><a href="#3-3-删除文档" class="headerlink" title="3.3.删除文档"></a>3.3.删除文档</h2><p>删除使用DELETE请求，同样，需要根据id进行删除：</p><p><strong>语法：</strong></p><figure class="highlight js"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable constant_">DELETE</span> /{索引库名}/_doc/id值</span><br></pre></td></tr></tbody></table></figure><p><strong>示例：</strong></p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 根据id删除数据</span><br><span class="line">DELETE /heima/_doc/<span class="number">1</span></span><br></pre></td></tr></tbody></table></figure><p><strong>结果：</strong></p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720213634918.png" alt="image-20210720213634918"></p><h2 id="3-4-修改文档"><a href="#3-4-修改文档" class="headerlink" title="3.4.修改文档"></a>3.4.修改文档</h2><p>修改有两种方式：</p><ul><li>全量修改：直接覆盖原来的文档</li><li>增量修改：修改文档中的部分字段</li></ul><h3 id="3-4-1-全量修改"><a href="#3-4-1-全量修改" class="headerlink" title="3.4.1.全量修改"></a>3.4.1.全量修改</h3><p>全量修改是覆盖原来的文档，其本质是：</p><ul><li>根据指定的id删除文档</li><li>新增一个相同id的文档</li></ul><p><strong>注意</strong>：如果根据id删除时，id不存在，第二步的新增也会执行，也就从修改变成了新增操作了。</p><p><strong>语法：</strong></p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">PUT&nbsp;/<span class="punctuation">{</span>索引库名<span class="punctuation">}</span>/_doc/文档id</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"字段1"</span><span class="punctuation">:</span>&nbsp;<span class="string">"值1"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"字段2"</span><span class="punctuation">:</span>&nbsp;<span class="string">"值2"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="comment">// ... 略</span></span><br><span class="line"><span class="punctuation">}</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><strong>示例：</strong></p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">PUT&nbsp;/heima/_doc/<span class="number">1</span></span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"info"</span><span class="punctuation">:</span>&nbsp;<span class="string">"黑马程序员高级Java讲师"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"email"</span><span class="punctuation">:</span>&nbsp;<span class="string">"zy@itcast.cn"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"name"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"firstName"</span><span class="punctuation">:</span>&nbsp;<span class="string">"云"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"lastName"</span><span class="punctuation">:</span>&nbsp;<span class="string">"赵"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><h3 id="3-4-2-增量修改"><a href="#3-4-2-增量修改" class="headerlink" title="3.4.2.增量修改"></a>3.4.2.增量修改</h3><p>增量修改是只修改指定id匹配的文档中的部分字段。</p><p><strong>语法：</strong></p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">POST&nbsp;/<span class="punctuation">{</span>索引库名<span class="punctuation">}</span>/_update/文档id</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"doc"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">         <span class="attr">"字段名"</span><span class="punctuation">:</span>&nbsp;<span class="string">"新的值"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p><strong>示例：</strong></p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">POST&nbsp;/heima/_update/<span class="number">1</span></span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"doc"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"email"</span><span class="punctuation">:</span>&nbsp;<span class="string">"ZhaoYun@itcast.cn"</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><h2 id="3-5-总结"><a href="#3-5-总结" class="headerlink" title="3.5.总结"></a>3.5.总结</h2><p>文档操作有哪些？</p><ul><li>创建文档：POST /{索引库名}/_doc/文档id   { json文档 }</li><li>查询文档：GET /{索引库名}/_doc/文档id</li><li>删除文档：DELETE /{索引库名}/_doc/文档id</li><li>修改文档：<ul><li>全量修改：PUT /{索引库名}/_doc/文档id { json文档 }</li><li>增量修改：POST /{索引库名}/_update/文档id { “doc”: {字段}}</li></ul></li></ul><h1 id="4-RestAPI"><a href="#4-RestAPI" class="headerlink" title="4.RestAPI"></a>4.RestAPI</h1><p>ES官方提供了各种不同语言的客户端，用来操作ES。这些客户端的本质就是组装DSL语句，通过http请求发送给ES。官方文档地址：<a href="https://www.elastic.co/guide/en/elasticsearch/client/index.html">https://www.elastic.co/guide/en/elasticsearch/client/index.html</a></p><p>其中的Java Rest Client又包括两种：</p><ul><li>Java Low Level Rest Client</li><li>Java High Level Rest Client</li></ul><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720214555863.png" alt="image-20210720214555863"></p><p>我们学习的是Java HighLevel Rest Client客户端API</p><h2 id="4-0-导入Demo工程"><a href="#4-0-导入Demo工程" class="headerlink" title="4.0.导入Demo工程"></a>4.0.导入Demo工程</h2><h3 id="4-0-1-导入数据"><a href="#4-0-1-导入数据" class="headerlink" title="4.0.1.导入数据"></a>4.0.1.导入数据</h3><p>首先导入课前资料提供的数据库数据：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720220400297.png" alt="image-20210720220400297"> </p><p>数据结构如下：</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span>&nbsp;<span class="keyword">TABLE</span>&nbsp;`tb_hotel`&nbsp;(</span><br><span class="line">&nbsp;&nbsp;`id`&nbsp;<span class="type">bigint</span>(<span class="number">20</span>)&nbsp;<span class="keyword">NOT</span>&nbsp;<span class="keyword">NULL</span>&nbsp;COMMENT&nbsp;<span class="string">'酒店id'</span>,</span><br><span class="line">&nbsp;&nbsp;`name`&nbsp;<span class="type">varchar</span>(<span class="number">255</span>)&nbsp;<span class="keyword">NOT</span>&nbsp;<span class="keyword">NULL</span>&nbsp;COMMENT&nbsp;<span class="string">'酒店名称；例：7天酒店'</span>,</span><br><span class="line">&nbsp;&nbsp;`address`&nbsp;<span class="type">varchar</span>(<span class="number">255</span>)&nbsp;<span class="keyword">NOT</span>&nbsp;<span class="keyword">NULL</span>&nbsp;COMMENT&nbsp;<span class="string">'酒店地址；例：航头路'</span>,</span><br><span class="line">&nbsp;&nbsp;`price`&nbsp;<span class="type">int</span>(<span class="number">10</span>)&nbsp;<span class="keyword">NOT</span>&nbsp;<span class="keyword">NULL</span>&nbsp;COMMENT&nbsp;<span class="string">'酒店价格；例：329'</span>,</span><br><span class="line">&nbsp;&nbsp;`score`&nbsp;<span class="type">int</span>(<span class="number">2</span>)&nbsp;<span class="keyword">NOT</span>&nbsp;<span class="keyword">NULL</span>&nbsp;COMMENT&nbsp;<span class="string">'酒店评分；例：45，就是4.5分'</span>,</span><br><span class="line">&nbsp;&nbsp;`brand`&nbsp;<span class="type">varchar</span>(<span class="number">32</span>)&nbsp;<span class="keyword">NOT</span>&nbsp;<span class="keyword">NULL</span>&nbsp;COMMENT&nbsp;<span class="string">'酒店品牌；例：如家'</span>,</span><br><span class="line">&nbsp;&nbsp;`city`&nbsp;<span class="type">varchar</span>(<span class="number">32</span>)&nbsp;<span class="keyword">NOT</span>&nbsp;<span class="keyword">NULL</span>&nbsp;COMMENT&nbsp;<span class="string">'所在城市；例：上海'</span>,</span><br><span class="line">&nbsp;&nbsp;`star_name`&nbsp;<span class="type">varchar</span>(<span class="number">16</span>)&nbsp;<span class="keyword">DEFAULT</span>&nbsp;<span class="keyword">NULL</span>&nbsp;COMMENT&nbsp;<span class="string">'酒店星级，从低到高分别是：1星到5星，1钻到5钻'</span>,</span><br><span class="line">&nbsp;&nbsp;`business`&nbsp;<span class="type">varchar</span>(<span class="number">255</span>)&nbsp;<span class="keyword">DEFAULT</span>&nbsp;<span class="keyword">NULL</span>&nbsp;COMMENT&nbsp;<span class="string">'商圈；例：虹桥'</span>,</span><br><span class="line">&nbsp;&nbsp;`latitude`&nbsp;<span class="type">varchar</span>(<span class="number">32</span>)&nbsp;<span class="keyword">NOT</span>&nbsp;<span class="keyword">NULL</span>&nbsp;COMMENT&nbsp;<span class="string">'纬度；例：31.2497'</span>,</span><br><span class="line">&nbsp;&nbsp;`longitude`&nbsp;<span class="type">varchar</span>(<span class="number">32</span>)&nbsp;<span class="keyword">NOT</span>&nbsp;<span class="keyword">NULL</span>&nbsp;COMMENT&nbsp;<span class="string">'经度；例：120.3925'</span>,</span><br><span class="line">&nbsp;&nbsp;`pic`&nbsp;<span class="type">varchar</span>(<span class="number">255</span>)&nbsp;<span class="keyword">DEFAULT</span>&nbsp;<span class="keyword">NULL</span>&nbsp;COMMENT&nbsp;<span class="string">'酒店图片；例:/img/1.jpg'</span>,</span><br><span class="line">&nbsp;&nbsp;<span class="keyword">PRIMARY</span>&nbsp;KEY&nbsp;(`id`)</span><br><span class="line">)&nbsp;ENGINE<span class="operator">=</span>InnoDB&nbsp;<span class="keyword">DEFAULT</span>&nbsp;CHARSET<span class="operator">=</span>utf8mb4;</span><br></pre></td></tr></tbody></table></figure><h3 id="4-0-2-导入项目"><a href="#4-0-2-导入项目" class="headerlink" title="4.0.2.导入项目"></a>4.0.2.导入项目</h3><p>然后导入课前资料提供的项目:</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720220503411.png" alt="image-20210720220503411"> </p><p>项目结构如图：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720220647541.png" alt="image-20210720220647541"></p><h3 id="4-0-3-mapping映射分析"><a href="#4-0-3-mapping映射分析" class="headerlink" title="4.0.3.mapping映射分析"></a>4.0.3.mapping映射分析</h3><p>创建索引库，最关键的是mapping映射，而mapping映射要考虑的信息包括：</p><ul><li>字段名</li><li>字段数据类型</li><li>是否参与搜索</li><li>是否需要分词</li><li>如果分词，分词器是什么？</li></ul><p>其中：</p><ul><li>字段名、字段数据类型，可以参考数据表结构的名称和类型</li><li>是否参与搜索要分析业务来判断，例如图片地址，就无需参与搜索</li><li>是否分词呢要看内容，内容如果是一个整体就无需分词，反之则要分词</li><li>分词器，我们可以统一使用ik_max_word</li></ul><p>来看下酒店数据的索引库结构:</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">PUT /hotel</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">  <span class="attr">"mappings"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"properties"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">      <span class="attr">"id"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"keyword"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"name"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"text"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"analyzer"</span><span class="punctuation">:</span> <span class="string">"ik_max_word"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"copy_to"</span><span class="punctuation">:</span> <span class="string">"all"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"address"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"keyword"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"index"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"price"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"integer"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"score"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"integer"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"brand"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"keyword"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"copy_to"</span><span class="punctuation">:</span> <span class="string">"all"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"city"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"keyword"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"copy_to"</span><span class="punctuation">:</span> <span class="string">"all"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"starName"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"keyword"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"business"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"keyword"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"location"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"geo_point"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"pic"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"keyword"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"index"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"all"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"text"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"analyzer"</span><span class="punctuation">:</span> <span class="string">"ik_max_word"</span></span><br><span class="line">      <span class="punctuation">}</span></span><br><span class="line">    <span class="punctuation">}</span></span><br><span class="line">  <span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>几个特殊字段说明：</p><ul><li>location：地理坐标，里面包含精度、纬度</li><li>all：一个组合字段，其目的是将多字段的值 利用copy_to合并，提供给用户搜索</li></ul><p>地理坐标说明：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720222110126.png" alt="image-20210720222110126"></p><p>copy_to说明：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720222221516.png" alt="image-20210720222221516"></p><h3 id="4-0-4-初始化RestClient"><a href="#4-0-4-初始化RestClient" class="headerlink" title="4.0.4.初始化RestClient"></a>4.0.4.初始化RestClient</h3><p>在elasticsearch提供的API中，与elasticsearch一切交互都封装在一个名为RestHighLevelClient的类中，必须先完成这个对象的初始化，建立与elasticsearch的连接。</p><p>分为三步：</p><p>1）引入es的RestHighLevelClient依赖：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.elasticsearch.client<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>elasticsearch-rest-high-level-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>2）因为SpringBoot默认的ES版本是7.6.2，所以我们需要覆盖默认的ES版本：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">elasticsearch.version</span>&gt;</span>7.12.1<span class="tag">&lt;/<span class="name">elasticsearch.version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>3）初始化RestHighLevelClient：</p><p>初始化的代码如下：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">RestHighLevelClient</span> <span class="variable">client</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RestHighLevelClient</span>(RestClient.builder(</span><br><span class="line">        HttpHost.create(<span class="string">"http://192.168.150.101:9200"</span>)</span><br><span class="line">));</span><br></pre></td></tr></tbody></table></figure><p>这里为了单元测试方便，我们创建一个测试类HotelIndexTest，然后将初始化的代码编写在@BeforeEach方法中：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.hotel;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpHost;</span><br><span class="line"><span class="keyword">import</span> org.elasticsearch.client.RestHighLevelClient;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.AfterEach;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.BeforeEach;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HotelIndexTest</span> {</span><br><span class="line">    <span class="keyword">private</span> RestHighLevelClient client;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BeforeEach</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setUp</span><span class="params">()</span> {</span><br><span class="line">        <span class="built_in">this</span>.client = <span class="keyword">new</span> <span class="title class_">RestHighLevelClient</span>(RestClient.builder(</span><br><span class="line">                HttpHost.create(<span class="string">"http://192.168.150.101:9200"</span>)</span><br><span class="line">        ));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterEach</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">tearDown</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">        <span class="built_in">this</span>.client.close();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="4-1-创建索引库"><a href="#4-1-创建索引库" class="headerlink" title="4.1.创建索引库"></a>4.1.创建索引库</h2><h3 id="4-1-1-代码解读"><a href="#4-1-1-代码解读" class="headerlink" title="4.1.1.代码解读"></a>4.1.1.代码解读</h3><p>创建索引库的API如下：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720223049408.png" alt="image-20210720223049408"></p><p>代码分为三步：</p><ul><li>1）创建Request对象。因为是创建索引库的操作，因此Request是CreateIndexRequest。</li><li>2）添加请求参数，其实就是DSL的JSON参数部分。因为json字符串很长，这里是定义了静态字符串常量MAPPING_TEMPLATE，让代码看起来更加优雅。</li><li>3）发送请求，client.indices()方法的返回值是IndicesClient类型，封装了所有与索引库操作有关的方法。</li></ul><h3 id="4-1-2-完整示例"><a href="#4-1-2-完整示例" class="headerlink" title="4.1.2.完整示例"></a>4.1.2.完整示例</h3><p>在hotel-demo的cn.itcast.hotel.constants包下，创建一个类，定义mapping映射的JSON字符串常量：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.hotel.constants;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HotelConstants</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">MAPPING_TEMPLATE</span> <span class="operator">=</span> <span class="string">"{\n"</span> +</span><br><span class="line">            <span class="string">"  \"mappings\": {\n"</span> +</span><br><span class="line">            <span class="string">"    \"properties\": {\n"</span> +</span><br><span class="line">            <span class="string">"      \"id\": {\n"</span> +</span><br><span class="line">            <span class="string">"        \"type\": \"keyword\"\n"</span> +</span><br><span class="line">            <span class="string">"      },\n"</span> +</span><br><span class="line">            <span class="string">"      \"name\":{\n"</span> +</span><br><span class="line">            <span class="string">"        \"type\": \"text\",\n"</span> +</span><br><span class="line">            <span class="string">"        \"analyzer\": \"ik_max_word\",\n"</span> +</span><br><span class="line">            <span class="string">"        \"copy_to\": \"all\"\n"</span> +</span><br><span class="line">            <span class="string">"      },\n"</span> +</span><br><span class="line">            <span class="string">"      \"address\":{\n"</span> +</span><br><span class="line">            <span class="string">"        \"type\": \"keyword\",\n"</span> +</span><br><span class="line">            <span class="string">"        \"index\": false\n"</span> +</span><br><span class="line">            <span class="string">"      },\n"</span> +</span><br><span class="line">            <span class="string">"      \"price\":{\n"</span> +</span><br><span class="line">            <span class="string">"        \"type\": \"integer\"\n"</span> +</span><br><span class="line">            <span class="string">"      },\n"</span> +</span><br><span class="line">            <span class="string">"      \"score\":{\n"</span> +</span><br><span class="line">            <span class="string">"        \"type\": \"integer\"\n"</span> +</span><br><span class="line">            <span class="string">"      },\n"</span> +</span><br><span class="line">            <span class="string">"      \"brand\":{\n"</span> +</span><br><span class="line">            <span class="string">"        \"type\": \"keyword\",\n"</span> +</span><br><span class="line">            <span class="string">"        \"copy_to\": \"all\"\n"</span> +</span><br><span class="line">            <span class="string">"      },\n"</span> +</span><br><span class="line">            <span class="string">"      \"city\":{\n"</span> +</span><br><span class="line">            <span class="string">"        \"type\": \"keyword\",\n"</span> +</span><br><span class="line">            <span class="string">"        \"copy_to\": \"all\"\n"</span> +</span><br><span class="line">            <span class="string">"      },\n"</span> +</span><br><span class="line">            <span class="string">"      \"starName\":{\n"</span> +</span><br><span class="line">            <span class="string">"        \"type\": \"keyword\"\n"</span> +</span><br><span class="line">            <span class="string">"      },\n"</span> +</span><br><span class="line">            <span class="string">"      \"business\":{\n"</span> +</span><br><span class="line">            <span class="string">"        \"type\": \"keyword\"\n"</span> +</span><br><span class="line">            <span class="string">"      },\n"</span> +</span><br><span class="line">            <span class="string">"      \"location\":{\n"</span> +</span><br><span class="line">            <span class="string">"        \"type\": \"geo_point\"\n"</span> +</span><br><span class="line">            <span class="string">"      },\n"</span> +</span><br><span class="line">            <span class="string">"      \"pic\":{\n"</span> +</span><br><span class="line">            <span class="string">"        \"type\": \"keyword\",\n"</span> +</span><br><span class="line">            <span class="string">"        \"index\": false\n"</span> +</span><br><span class="line">            <span class="string">"      },\n"</span> +</span><br><span class="line">            <span class="string">"      \"all\":{\n"</span> +</span><br><span class="line">            <span class="string">"        \"type\": \"text\",\n"</span> +</span><br><span class="line">            <span class="string">"        \"analyzer\": \"ik_max_word\"\n"</span> +</span><br><span class="line">            <span class="string">"      }\n"</span> +</span><br><span class="line">            <span class="string">"    }\n"</span> +</span><br><span class="line">            <span class="string">"  }\n"</span> +</span><br><span class="line">            <span class="string">"}"</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>在hotel-demo中的HotelIndexTest测试类中，编写单元测试，实现创建索引：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">createHotelIndex</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="comment">// 1.创建Request对象</span></span><br><span class="line">    <span class="type">CreateIndexRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CreateIndexRequest</span>(<span class="string">"hotel"</span>);</span><br><span class="line">    <span class="comment">// 2.准备请求的参数：DSL语句</span></span><br><span class="line">    request.source(MAPPING_TEMPLATE, XContentType.JSON);</span><br><span class="line">    <span class="comment">// 3.发送请求</span></span><br><span class="line">    client.indices().create(request, RequestOptions.DEFAULT);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="4-2-删除索引库"><a href="#4-2-删除索引库" class="headerlink" title="4.2.删除索引库"></a>4.2.删除索引库</h2><p>删除索引库的DSL语句非常简单：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE /hotel</span><br></pre></td></tr></tbody></table></figure><p>与创建索引库相比：</p><ul><li>请求方式从PUT变为DELTE</li><li>请求路径不变</li><li>无请求参数</li></ul><p>所以代码的差异，注意体现在Request对象上。依然是三步走：</p><ul><li>1）创建Request对象。这次是DeleteIndexRequest对象</li><li>2）准备参数。这里是无参</li><li>3）发送请求。改用delete方法</li></ul><p>在hotel-demo中的HotelIndexTest测试类中，编写单元测试，实现删除索引：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testDeleteHotelIndex</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="comment">// 1.创建Request对象</span></span><br><span class="line">    <span class="type">DeleteIndexRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DeleteIndexRequest</span>(<span class="string">"hotel"</span>);</span><br><span class="line">    <span class="comment">// 2.发送请求</span></span><br><span class="line">    client.indices().delete(request, RequestOptions.DEFAULT);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="4-3-判断索引库是否存在"><a href="#4-3-判断索引库是否存在" class="headerlink" title="4.3.判断索引库是否存在"></a>4.3.判断索引库是否存在</h2><p>判断索引库是否存在，本质就是查询，对应的DSL是：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /hotel</span><br></pre></td></tr></tbody></table></figure><p>因此与删除的Java代码流程是类似的。依然是三步走：</p><ul><li>1）创建Request对象。这次是GetIndexRequest对象</li><li>2）准备参数。这里是无参</li><li>3）发送请求。改用exists方法</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testExistsHotelIndex</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="comment">// 1.创建Request对象</span></span><br><span class="line">    <span class="type">GetIndexRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GetIndexRequest</span>(<span class="string">"hotel"</span>);</span><br><span class="line">    <span class="comment">// 2.发送请求</span></span><br><span class="line">    <span class="type">boolean</span> <span class="variable">exists</span> <span class="operator">=</span> client.indices().exists(request, RequestOptions.DEFAULT);</span><br><span class="line">    <span class="comment">// 3.输出</span></span><br><span class="line">    System.err.println(exists ? <span class="string">"索引库已经存在！"</span> : <span class="string">"索引库不存在！"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="4-4-总结"><a href="#4-4-总结" class="headerlink" title="4.4.总结"></a>4.4.总结</h2><p>JavaRestClient操作elasticsearch的流程基本类似。核心是client.indices()方法来获取索引库的操作对象。</p><p>索引库操作的基本步骤：</p><ul><li>初始化RestHighLevelClient</li><li>创建XxxIndexRequest。XXX是Create、Get、Delete</li><li>准备DSL（ Create时需要，其它是无参）</li><li>发送请求。调用RestHighLevelClient#indices().xxx()方法，xxx是create、exists、delete</li></ul><h1 id="5-RestClient操作文档"><a href="#5-RestClient操作文档" class="headerlink" title="5.RestClient操作文档"></a>5.RestClient操作文档</h1><p>为了与索引库操作分离，我们再次参加一个测试类，做两件事情：</p><ul><li>初始化RestHighLevelClient</li><li>我们的酒店数据在数据库，需要利用IHotelService去查询，所以注入这个接口</li></ul><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.hotel;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.itcast.hotel.pojo.Hotel;</span><br><span class="line"><span class="keyword">import</span> cn.itcast.hotel.service.IHotelService;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.AfterEach;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.BeforeEach;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HotelDocumentTest</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IHotelService hotelService;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> RestHighLevelClient client;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BeforeEach</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setUp</span><span class="params">()</span> {</span><br><span class="line">        <span class="built_in">this</span>.client = <span class="keyword">new</span> <span class="title class_">RestHighLevelClient</span>(RestClient.builder(</span><br><span class="line">                HttpHost.create(<span class="string">"http://192.168.150.101:9200"</span>)</span><br><span class="line">        ));</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterEach</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">tearDown</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">        <span class="built_in">this</span>.client.close();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h2 id="5-1-新增文档"><a href="#5-1-新增文档" class="headerlink" title="5.1.新增文档"></a>5.1.新增文档</h2><p>我们要将数据库的酒店数据查询出来，写入elasticsearch中。</p><h3 id="5-1-1-索引库实体类"><a href="#5-1-1-索引库实体类" class="headerlink" title="5.1.1.索引库实体类"></a>5.1.1.索引库实体类</h3><p>数据库查询后的结果是一个Hotel类型的对象。结构如下：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@TableName("tb_hotel")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Hotel</span> {</span><br><span class="line">    <span class="meta">@TableId(type = IdType.INPUT)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> Integer price;</span><br><span class="line">    <span class="keyword">private</span> Integer score;</span><br><span class="line">    <span class="keyword">private</span> String brand;</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    <span class="keyword">private</span> String starName;</span><br><span class="line">    <span class="keyword">private</span> String business;</span><br><span class="line">    <span class="keyword">private</span> String longitude;</span><br><span class="line">    <span class="keyword">private</span> String latitude;</span><br><span class="line">    <span class="keyword">private</span> String pic;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>与我们的索引库结构存在差异：</p><ul><li>longitude和latitude需要合并为location</li></ul><p>因此，我们需要定义一个新的类型，与索引库结构吻合：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.hotel.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HotelDoc</span> {</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> Integer price;</span><br><span class="line">    <span class="keyword">private</span> Integer score;</span><br><span class="line">    <span class="keyword">private</span> String brand;</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    <span class="keyword">private</span> String starName;</span><br><span class="line">    <span class="keyword">private</span> String business;</span><br><span class="line">    <span class="keyword">private</span> String location;</span><br><span class="line">    <span class="keyword">private</span> String pic;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HotelDoc</span><span class="params">(Hotel hotel)</span> {</span><br><span class="line">        <span class="built_in">this</span>.id = hotel.getId();</span><br><span class="line">        <span class="built_in">this</span>.name = hotel.getName();</span><br><span class="line">        <span class="built_in">this</span>.address = hotel.getAddress();</span><br><span class="line">        <span class="built_in">this</span>.price = hotel.getPrice();</span><br><span class="line">        <span class="built_in">this</span>.score = hotel.getScore();</span><br><span class="line">        <span class="built_in">this</span>.brand = hotel.getBrand();</span><br><span class="line">        <span class="built_in">this</span>.city = hotel.getCity();</span><br><span class="line">        <span class="built_in">this</span>.starName = hotel.getStarName();</span><br><span class="line">        <span class="built_in">this</span>.business = hotel.getBusiness();</span><br><span class="line">        <span class="built_in">this</span>.location = hotel.getLatitude() + <span class="string">", "</span> + hotel.getLongitude();</span><br><span class="line">        <span class="built_in">this</span>.pic = hotel.getPic();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><h3 id="5-1-2-语法说明"><a href="#5-1-2-语法说明" class="headerlink" title="5.1.2.语法说明"></a>5.1.2.语法说明</h3><p>新增文档的DSL语句如下：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">POST /<span class="punctuation">{</span>索引库名<span class="punctuation">}</span>/_doc/<span class="number">1</span></span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"name"</span><span class="punctuation">:</span> <span class="string">"Jack"</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">"age"</span><span class="punctuation">:</span> <span class="number">21</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>对应的java代码如图：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720230027240.png" alt="image-20210720230027240"></p><p>可以看到与创建索引库类似，同样是三步走：</p><ul><li>1）创建Request对象</li><li>2）准备请求参数，也就是DSL中的JSON文档</li><li>3）发送请求</li></ul><p>变化的地方在于，这里直接使用client.xxx()的API，不再需要client.indices()了。</p><h3 id="5-1-3-完整代码"><a href="#5-1-3-完整代码" class="headerlink" title="5.1.3.完整代码"></a>5.1.3.完整代码</h3><p>我们导入酒店数据，基本流程一致，但是需要考虑几点变化：</p><ul><li>酒店数据来自于数据库，我们需要先查询出来，得到hotel对象</li><li>hotel对象需要转为HotelDoc对象</li><li>HotelDoc需要序列化为json格式</li></ul><p>因此，代码整体步骤如下：</p><ul><li>1）根据id查询酒店数据Hotel</li><li>2）将Hotel封装为HotelDoc</li><li>3）将HotelDoc序列化为JSON</li><li>4）创建IndexRequest，指定索引库名和id</li><li>5）准备请求参数，也就是JSON文档</li><li>6）发送请求</li></ul><p>在hotel-demo的HotelDocumentTest测试类中，编写单元测试：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testAddDocument</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="comment">// 1.根据id查询酒店数据</span></span><br><span class="line">    <span class="type">Hotel</span> <span class="variable">hotel</span> <span class="operator">=</span> hotelService.getById(<span class="number">61083L</span>);</span><br><span class="line">    <span class="comment">// 2.转换为文档类型</span></span><br><span class="line">    <span class="type">HotelDoc</span> <span class="variable">hotelDoc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HotelDoc</span>(hotel);</span><br><span class="line">    <span class="comment">// 3.将HotelDoc转json</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> JSON.toJSONString(hotelDoc);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.准备Request对象</span></span><br><span class="line">    <span class="type">IndexRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">IndexRequest</span>(<span class="string">"hotel"</span>).id(hotelDoc.getId().toString());</span><br><span class="line">    <span class="comment">// 2.准备Json文档</span></span><br><span class="line">    request.source(json, XContentType.JSON);</span><br><span class="line">    <span class="comment">// 3.发送请求</span></span><br><span class="line">    client.index(request, RequestOptions.DEFAULT);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="5-2-查询文档"><a href="#5-2-查询文档" class="headerlink" title="5.2.查询文档"></a>5.2.查询文档</h2><h3 id="5-2-1-语法说明"><a href="#5-2-1-语法说明" class="headerlink" title="5.2.1.语法说明"></a>5.2.1.语法说明</h3><p>查询的DSL语句如下：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /hotel/_doc/<span class="punctuation">{</span>id<span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>非常简单，因此代码大概分两步：</p><ul><li>准备Request对象</li><li>发送请求</li></ul><p>不过查询的目的是得到结果，解析为HotelDoc，因此难点是结果的解析。完整代码如下：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720230811674.png" alt="image-20210720230811674"></p><p>可以看到，结果是一个JSON，其中文档放在一个<code>_source</code>属性中，因此解析就是拿到<code>_source</code>，反序列化为Java对象即可。</p><p>与之前类似，也是三步走：</p><ul><li>1）准备Request对象。这次是查询，所以是GetRequest</li><li>2）发送请求，得到结果。因为是查询，这里调用client.get()方法</li><li>3）解析结果，就是对JSON做反序列化</li></ul><h3 id="5-2-2-完整代码"><a href="#5-2-2-完整代码" class="headerlink" title="5.2.2.完整代码"></a>5.2.2.完整代码</h3><p>在hotel-demo的HotelDocumentTest测试类中，编写单元测试：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testGetDocumentById</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="comment">// 1.准备Request</span></span><br><span class="line">    <span class="type">GetRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GetRequest</span>(<span class="string">"hotel"</span>, <span class="string">"61082"</span>);</span><br><span class="line">    <span class="comment">// 2.发送请求，得到响应</span></span><br><span class="line">    <span class="type">GetResponse</span> <span class="variable">response</span> <span class="operator">=</span> client.get(request, RequestOptions.DEFAULT);</span><br><span class="line">    <span class="comment">// 3.解析响应结果</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">json</span> <span class="operator">=</span> response.getSourceAsString();</span><br><span class="line"></span><br><span class="line">    <span class="type">HotelDoc</span> <span class="variable">hotelDoc</span> <span class="operator">=</span> JSON.parseObject(json, HotelDoc.class);</span><br><span class="line">    System.out.println(hotelDoc);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="5-3-删除文档"><a href="#5-3-删除文档" class="headerlink" title="5.3.删除文档"></a>5.3.删除文档</h2><p>删除的DSL为是这样的：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DELETE /hotel/_doc/<span class="punctuation">{</span>id<span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>与查询相比，仅仅是请求方式从DELETE变成GET，可以想象Java代码应该依然是三步走：</p><ul><li>1）准备Request对象，因为是删除，这次是DeleteRequest对象。要指定索引库名和id</li><li>2）准备参数，无参</li><li>3）发送请求。因为是删除，所以是client.delete()方法</li></ul><p>在hotel-demo的HotelDocumentTest测试类中，编写单元测试：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testDeleteDocument</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="comment">// 1.准备Request</span></span><br><span class="line">    <span class="type">DeleteRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DeleteRequest</span>(<span class="string">"hotel"</span>, <span class="string">"61083"</span>);</span><br><span class="line">    <span class="comment">// 2.发送请求</span></span><br><span class="line">    client.delete(request, RequestOptions.DEFAULT);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="5-4-修改文档"><a href="#5-4-修改文档" class="headerlink" title="5.4.修改文档"></a>5.4.修改文档</h2><h3 id="5-4-1-语法说明"><a href="#5-4-1-语法说明" class="headerlink" title="5.4.1.语法说明"></a>5.4.1.语法说明</h3><p>修改我们讲过两种方式：</p><ul><li>全量修改：本质是先根据id删除，再新增</li><li>增量修改：修改文档中的指定字段值</li></ul><p>在RestClient的API中，全量修改与新增的API完全一致，判断依据是ID：</p><ul><li>如果新增时，ID已经存在，则修改</li><li>如果新增时，ID不存在，则新增</li></ul><p>这里不再赘述，我们主要关注增量修改。</p><p>代码示例如图：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720231040875.png" alt="image-20210720231040875"></p><p>与之前类似，也是三步走：</p><ul><li>1）准备Request对象。这次是修改，所以是UpdateRequest</li><li>2）准备参数。也就是JSON文档，里面包含要修改的字段</li><li>3）更新文档。这里调用client.update()方法</li></ul><h3 id="5-4-2-完整代码"><a href="#5-4-2-完整代码" class="headerlink" title="5.4.2.完整代码"></a>5.4.2.完整代码</h3><p>在hotel-demo的HotelDocumentTest测试类中，编写单元测试：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testUpdateDocument</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="comment">// 1.准备Request</span></span><br><span class="line">    <span class="type">UpdateRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UpdateRequest</span>(<span class="string">"hotel"</span>, <span class="string">"61083"</span>);</span><br><span class="line">    <span class="comment">// 2.准备请求参数</span></span><br><span class="line">    request.doc(</span><br><span class="line">        <span class="string">"price"</span>, <span class="string">"952"</span>,</span><br><span class="line">        <span class="string">"starName"</span>, <span class="string">"四钻"</span></span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// 3.发送请求</span></span><br><span class="line">    client.update(request, RequestOptions.DEFAULT);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="5-5-批量导入文档"><a href="#5-5-批量导入文档" class="headerlink" title="5.5.批量导入文档"></a>5.5.批量导入文档</h2><p>案例需求：利用BulkRequest批量将数据库数据导入到索引库中。</p><p>步骤如下：</p><ul><li><p>利用mybatis-plus查询酒店数据</p></li><li><p>将查询到的酒店数据（Hotel）转换为文档类型数据（HotelDoc）</p></li><li><p>利用JavaRestClient中的BulkRequest批处理，实现批量新增文档</p></li></ul><h3 id="5-5-1-语法说明"><a href="#5-5-1-语法说明" class="headerlink" title="5.5.1.语法说明"></a>5.5.1.语法说明</h3><p>批量处理BulkRequest，其本质就是将多个普通的CRUD请求组合在一起发送。</p><p>其中提供了一个add方法，用来添加其他请求：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720232105943.png" alt="image-20210720232105943"></p><p>可以看到，能添加的请求包括：</p><ul><li>IndexRequest，也就是新增</li><li>UpdateRequest，也就是修改</li><li>DeleteRequest，也就是删除</li></ul><p>因此Bulk中添加了多个IndexRequest，就是批量新增功能了。示例：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-01/image-20210720232431383.png" alt="image-20210720232431383"></p><p>其实还是三步走：</p><ul><li>1）创建Request对象。这里是BulkRequest</li><li>2）准备参数。批处理的参数，就是其它Request对象，这里就是多个IndexRequest</li><li>3）发起请求。这里是批处理，调用的方法为client.bulk()方法</li></ul><p>我们在导入酒店数据时，将上述代码改造成for循环处理即可。</p><h3 id="5-5-2-完整代码"><a href="#5-5-2-完整代码" class="headerlink" title="5.5.2.完整代码"></a>5.5.2.完整代码</h3><p>在hotel-demo的HotelDocumentTest测试类中，编写单元测试：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testBulkRequest</span><span class="params">()</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">    <span class="comment">// 批量查询酒店数据</span></span><br><span class="line">    List&lt;Hotel&gt; hotels = hotelService.list();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.创建Request</span></span><br><span class="line">    <span class="type">BulkRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BulkRequest</span>();</span><br><span class="line">    <span class="comment">// 2.准备参数，添加多个新增的Request</span></span><br><span class="line">    <span class="keyword">for</span> (Hotel hotel : hotels) {</span><br><span class="line">        <span class="comment">// 2.1.转换为文档类型HotelDoc</span></span><br><span class="line">        <span class="type">HotelDoc</span> <span class="variable">hotelDoc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HotelDoc</span>(hotel);</span><br><span class="line">        <span class="comment">// 2.2.创建新增文档的Request对象</span></span><br><span class="line">        request.add(<span class="keyword">new</span> <span class="title class_">IndexRequest</span>(<span class="string">"hotel"</span>)</span><br><span class="line">                    .id(hotelDoc.getId().toString())</span><br><span class="line">                    .source(JSON.toJSONString(hotelDoc), XContentType.JSON));</span><br><span class="line">    }</span><br><span class="line">    <span class="comment">// 3.发送请求</span></span><br><span class="line">    client.bulk(request, RequestOptions.DEFAULT);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="5-6-小结"><a href="#5-6-小结" class="headerlink" title="5.6.小结"></a>5.6.小结</h2><p>文档操作的基本步骤：</p><ul><li>初始化RestHighLevelClient</li><li>创建XxxRequest。XXX是Index、Get、Update、Delete、Bulk</li><li>准备参数（Index、Update、Bulk时需要）</li><li>发送请求。调用RestHighLevelClient#.xxx()方法，xxx是index、get、update、delete、bulk</li><li>解析结果（Get时需要）</li></ul>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;分布式搜索引擎01&quot;&gt;&lt;a href=&quot;#分布式搜索引擎01&quot; class=&quot;headerlink&quot; title=&quot;分布式搜索引擎01&quot;&gt;&lt;/a&gt;分布式搜索引擎01&lt;/h1&gt;</summary>
    
    
    
    <category term="SpringCloud" scheme="https://llzzoomm.github.io/categories/SpringCloud/"/>
    
    
    <category term="SpringCloud" scheme="https://llzzoomm.github.io/tags/SpringCloud/"/>
    
  </entry>
  
  <entry>
    <title>SpringCloud01</title>
    <link href="https://llzzoomm.github.io/2023/07/20/springcloud01/"/>
    <id>https://llzzoomm.github.io/2023/07/20/springcloud01/</id>
    <published>2023-07-20T11:31:50.970Z</published>
    <updated>2023-07-20T11:28:34.669Z</updated>
    
    <content type="html"><![CDATA[<h1 id="SpringCloud01"><a href="#SpringCloud01" class="headerlink" title="SpringCloud01"></a>SpringCloud01</h1><span id="more"></span><h1 id="1-认识微服务"><a href="#1-认识微服务" class="headerlink" title="1.认识微服务"></a>1.认识微服务</h1><p>随着互联网行业的发展，对服务的要求也越来越高，服务架构也从单体架构逐渐演变为现在流行的微服务架构。这些架构之间有怎样的差别呢？</p><h2 id="1-0-学习目标"><a href="#1-0-学习目标" class="headerlink" title="1.0.学习目标"></a>1.0.学习目标</h2><p>了解微服务架构的优缺点</p><h2 id="1-1-单体架构"><a href="#1-1-单体架构" class="headerlink" title="1.1.单体架构"></a>1.1.单体架构</h2><p><strong>单体架构</strong>：将业务的所有功能集中在一个项目中开发，打成一个包部署。</p><p><img src="/2023/07/20/springcloud01/image-20210713202807818.png" alt="image-20210713202807818"></p><p>单体架构的优缺点如下：</p><p><strong>优点：</strong></p><ul><li>架构简单</li><li>部署成本低</li></ul><p><strong>缺点：</strong></p><ul><li>耦合度高（维护困难、升级困难）</li></ul><h2 id="1-2-分布式架构"><a href="#1-2-分布式架构" class="headerlink" title="1.2.分布式架构"></a>1.2.分布式架构</h2><p><strong>分布式架构</strong>：根据业务功能对系统做拆分，每个业务功能模块作为独立项目开发，称为一个服务。</p><p><img src="/2023/07/20/springcloud01/image-20210713203124797.png" alt="image-20210713203124797"></p><p>分布式架构的优缺点：</p><p><strong>优点：</strong></p><ul><li>降低服务耦合</li><li>有利于服务升级和拓展</li></ul><p><strong>缺点：</strong></p><ul><li>服务调用关系错综复杂</li></ul><p>分布式架构虽然降低了服务耦合，但是服务拆分时也有很多问题需要思考：</p><ul><li>服务拆分的粒度如何界定？</li><li>服务之间如何调用？</li><li>服务的调用关系如何管理？</li></ul><p>人们需要制定一套行之有效的标准来约束分布式架构。</p><h2 id="1-3-微服务"><a href="#1-3-微服务" class="headerlink" title="1.3.微服务"></a>1.3.微服务</h2><p>微服务的架构特征：</p><ul><li>单一职责：微服务拆分粒度更小，每一个服务都对应唯一的业务能力，做到单一职责</li><li>自治：团队独立、技术独立、数据独立，独立部署和交付</li><li>面向服务：服务提供统一标准的接口，与语言和技术无关</li><li>隔离性强：服务调用做好隔离、容错、降级，避免出现级联问题</li></ul><p><img src="/2023/07/20/springcloud01/image-20210713203753373.png" alt="image-20210713203753373"></p><p>微服务的上述特性其实是在给分布式架构制定一个标准，进一步降低服务之间的耦合度，提供服务的独立性和灵活性。做到高内聚，低耦合。</p><p>因此，可以认为<strong>微服务</strong>是一种经过良好架构设计的<strong>分布式架构方案</strong> 。</p><p>但方案该怎么落地？选用什么样的技术栈？全球的互联网公司都在积极尝试自己的微服务落地方案。</p><p>其中在Java领域最引人注目的就是SpringCloud提供的方案了。</p><h2 id="1-4-SpringCloud"><a href="#1-4-SpringCloud" class="headerlink" title="1.4.SpringCloud"></a>1.4.SpringCloud</h2><p>SpringCloud是目前国内使用最广泛的微服务框架。官网地址：<a href="https://spring.io/projects/spring-cloud%E3%80%82">https://spring.io/projects/spring-cloud。</a></p><p>SpringCloud集成了各种微服务功能组件，并基于SpringBoot实现了这些组件的自动装配，从而提供了良好的开箱即用体验。</p><p>其中常见的组件包括：</p><p><img src="/2023/07/20/springcloud01/image-20210713204155887.png" alt="image-20210713204155887"></p><p>另外，SpringCloud底层是依赖于SpringBoot的，并且有版本的兼容关系，如下：</p><p><img src="/2023/07/20/springcloud01/image-20210713205003790.png" alt="image-20210713205003790"></p><p>我们课堂学习的版本是 Hoxton.SR10，因此对应的SpringBoot版本是2.3.x版本。</p><h2 id="1-5-总结"><a href="#1-5-总结" class="headerlink" title="1.5.总结"></a>1.5.总结</h2><ul><li><p>单体架构：简单方便，高度耦合，扩展性差，适合小型项目。例如：学生管理系统</p></li><li><p>分布式架构：松耦合，扩展性好，但架构复杂，难度大。适合大型互联网项目，例如：京东、淘宝</p></li><li><p>微服务：一种良好的分布式架构方案</p><p>①优点：拆分粒度更小、服务更独立、耦合度更低</p><p>②缺点：架构非常复杂，运维、监控、部署难度提高</p></li><li><p>SpringCloud是微服务架构的一站式解决方案，集成了各种优秀微服务功能组件</p></li></ul><h1 id="2-服务拆分和远程调用"><a href="#2-服务拆分和远程调用" class="headerlink" title="2.服务拆分和远程调用"></a>2.服务拆分和远程调用</h1><p>任何分布式架构都离不开服务的拆分，微服务也是一样。</p><h2 id="2-1-服务拆分原则"><a href="#2-1-服务拆分原则" class="headerlink" title="2.1.服务拆分原则"></a>2.1.服务拆分原则</h2><p>这里我总结了微服务拆分时的几个原则：</p><ul><li>不同微服务，不要重复开发相同业务</li><li>微服务数据独立，不要访问其它微服务的数据库</li><li>微服务可以将自己的业务暴露为接口，供其它微服务调用</li></ul><p><img src="/2023/07/20/springcloud01/image-20210713210800950.png" alt="image-20210713210800950"></p><h2 id="2-2-服务拆分示例"><a href="#2-2-服务拆分示例" class="headerlink" title="2.2.服务拆分示例"></a>2.2.服务拆分示例</h2><p>以课前资料中的微服务cloud-demo为例，其结构如下：</p><p><img src="/2023/07/20/springcloud01/image-20210713211009593.png" alt="image-20210713211009593"></p><p>cloud-demo：父工程，管理依赖</p><ul><li>order-service：订单微服务，负责订单相关业务</li><li>user-service：用户微服务，负责用户相关业务</li></ul><p>要求：</p><ul><li>订单微服务和用户微服务都必须有各自的数据库，相互独立</li><li>订单服务和用户服务都对外暴露Restful的接口</li><li>订单服务如果需要查询用户信息，只能调用用户服务的Restful接口，不能查询用户数据库</li></ul><h3 id="2-2-1-导入Sql语句"><a href="#2-2-1-导入Sql语句" class="headerlink" title="2.2.1.导入Sql语句"></a>2.2.1.导入Sql语句</h3><p>首先，将课前资料提供的<code>cloud-order.sql</code>和<code>cloud-user.sql</code>导入到mysql中：</p><p><img src="/2023/07/20/springcloud01/image-20210713211417049.png" alt="image-20210713211417049"></p><p>cloud-user表中初始数据如下：</p><p><img src="/2023/07/20/springcloud01/image-20210713211550169.png" alt="image-20210713211550169"></p><p>cloud-order表中初始数据如下：</p><p><img src="/2023/07/20/springcloud01/image-20210713211657319.png" alt="image-20210713211657319"></p><p>cloud-order表中持有cloud-user表中的id字段。</p><h3 id="2-2-2-导入demo工程"><a href="#2-2-2-导入demo工程" class="headerlink" title="2.2.2.导入demo工程"></a>2.2.2.导入demo工程</h3><p>用IDEA导入课前资料提供的Demo：</p><p><img src="/2023/07/20/springcloud01/image-20210713211814094.png" alt="image-20210713211814094"></p><p>项目结构如下：</p><p><img src="/2023/07/20/springcloud01/image-20210713212656887.png" alt="image-20210713212656887"></p><p>导入后，会在IDEA右下角出现弹窗：</p><p><img src="/2023/07/20/springcloud01/image-20210713212349272.png" alt="image-20210713212349272"></p><p>点击弹窗，然后按下图选择：</p><p><img src="/2023/07/20/springcloud01/image-20210713212336185.png" alt="image-20210713212336185"></p><p>会出现这样的菜单：</p><p><img src="/2023/07/20/springcloud01/image-20210713212513324.png" alt="image-20210713212513324"></p><p>配置下项目使用的JDK：</p><p><img src="/2023/07/20/springcloud01/image-20210713220736408.png" alt="image-20210713220736408"></p><h2 id="2-3-实现远程调用案例"><a href="#2-3-实现远程调用案例" class="headerlink" title="2.3.实现远程调用案例"></a>2.3.实现远程调用案例</h2><p>在order-service服务中，有一个根据id查询订单的接口：</p><p><img src="/2023/07/20/springcloud01/image-20210713212749575.png" alt="image-20210713212749575"></p><p>根据id查询订单，返回值是Order对象，如图：</p><p><img src="/2023/07/20/springcloud01/image-20210713212901725.png" alt="image-20210713212901725"></p><p>其中的user为null</p><p>在user-service中有一个根据id查询用户的接口：</p><p><img src="/2023/07/20/springcloud01/image-20210713213146089.png" alt="image-20210713213146089"></p><p>查询的结果如图：</p><p><img src="/2023/07/20/springcloud01/image-20210713213213075.png" alt="image-20210713213213075"></p><h3 id="2-3-1-案例需求："><a href="#2-3-1-案例需求：" class="headerlink" title="2.3.1.案例需求："></a>2.3.1.案例需求：</h3><p>修改order-service中的根据id查询订单业务，要求在查询订单的同时，根据订单中包含的userId查询出用户信息，一起返回。</p><p><img src="/2023/07/20/springcloud01/image-20210713213312278.png" alt="image-20210713213312278"></p><p>因此，我们需要在order-service中 向user-service发起一个http的请求，调用<a href="http://localhost:8081/user/%7BuserId%7D%E8%BF%99%E4%B8%AA%E6%8E%A5%E5%8F%A3%E3%80%82">http://localhost:8081/user/{userId}这个接口。</a></p><p>大概的步骤是这样的：</p><ul><li>注册一个RestTemplate的实例到Spring容器</li><li>修改order-service服务中的OrderService类中的queryOrderById方法，根据Order对象中的userId查询User</li><li>将查询的User填充到Order对象，一起返回</li></ul><h3 id="2-3-2-注册RestTemplate"><a href="#2-3-2-注册RestTemplate" class="headerlink" title="2.3.2.注册RestTemplate"></a>2.3.2.注册RestTemplate</h3><p>首先，我们在order-service服务中的OrderApplication启动类中，注册RestTemplate实例：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.order;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mybatis.spring.annotation.MapperScan;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.client.RestTemplate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@MapperScan("cn.itcast.order.mapper")</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OrderApplication</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        SpringApplication.run(OrderApplication.class, args);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RestTemplate <span class="title function_">restTemplate</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RestTemplate</span>();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="2-3-3-实现远程调用"><a href="#2-3-3-实现远程调用" class="headerlink" title="2.3.3.实现远程调用"></a>2.3.3.实现远程调用</h3><p>修改order-service服务中的cn.itcast.order.service包下的OrderService类中的queryOrderById方法：</p><p><img src="/2023/07/20/springcloud01/image-20210713213959569.png" alt="image-20210713213959569"></p><h2 id="2-4-提供者与消费者"><a href="#2-4-提供者与消费者" class="headerlink" title="2.4.提供者与消费者"></a>2.4.提供者与消费者</h2><p>在服务调用关系中，会有两个不同的角色：</p><p><strong>服务提供者</strong>：一次业务中，被其它微服务调用的服务。（提供接口给其它微服务）</p><p><strong>服务消费者</strong>：一次业务中，调用其它微服务的服务。（调用其它微服务提供的接口）</p><p><img src="/2023/07/20/springcloud01/image-20210713214404481.png" alt="image-20210713214404481"></p><p>但是，服务提供者与服务消费者的角色并不是绝对的，而是相对于业务而言。</p><p>如果服务A调用了服务B，而服务B又调用了服务C，服务B的角色是什么？</p><ul><li>对于A调用B的业务而言：A是服务消费者，B是服务提供者</li><li>对于B调用C的业务而言：B是服务消费者，C是服务提供者</li></ul><p>因此，服务B既可以是服务提供者，也可以是服务消费者。</p><h1 id="3-Eureka注册中心"><a href="#3-Eureka注册中心" class="headerlink" title="3.Eureka注册中心"></a>3.Eureka注册中心</h1><p>假如我们的服务提供者user-service部署了多个实例，如图：</p><p><img src="/2023/07/20/springcloud01/image-20210713214925388.png" alt="image-20210713214925388"></p><p>大家思考几个问题：</p><ul><li>order-service在发起远程调用的时候，该如何得知user-service实例的ip地址和端口？</li><li>有多个user-service实例地址，order-service调用时该如何选择？</li><li>order-service如何得知某个user-service实例是否依然健康，是不是已经宕机？</li></ul><h2 id="3-1-Eureka的结构和作用"><a href="#3-1-Eureka的结构和作用" class="headerlink" title="3.1.Eureka的结构和作用"></a>3.1.Eureka的结构和作用</h2><p>这些问题都需要利用SpringCloud中的注册中心来解决，其中最广为人知的注册中心就是Eureka，其结构如下：</p><p><img src="/2023/07/20/springcloud01/image-20210713220104956.png" alt="image-20210713220104956"></p><p>回答之前的各个问题。</p><p>问题1：order-service如何得知user-service实例地址？</p><p>获取地址信息的流程如下：</p><ul><li>user-service服务实例启动后，将自己的信息注册到eureka-server（Eureka服务端）。这个叫服务注册</li><li>eureka-server保存服务名称到服务实例地址列表的映射关系</li><li>order-service根据服务名称，拉取实例地址列表。这个叫服务发现或服务拉取</li></ul><p>问题2：order-service如何从多个user-service实例中选择具体的实例？</p><ul><li>order-service从实例列表中利用负载均衡算法选中一个实例地址</li><li>向该实例地址发起远程调用</li></ul><p>问题3：order-service如何得知某个user-service实例是否依然健康，是不是已经宕机？</p><ul><li>user-service会每隔一段时间（默认30秒）向eureka-server发起请求，报告自己状态，称为心跳</li><li>当超过一定时间没有发送心跳时，eureka-server会认为微服务实例故障，将该实例从服务列表中剔除</li><li>order-service拉取服务时，就能将故障实例排除了</li></ul><blockquote><p>注意：一个微服务，既可以是服务提供者，又可以是服务消费者，因此eureka将服务注册、服务发现等功能统一封装到了eureka-client端</p></blockquote><p>因此，接下来我们动手实践的步骤包括：</p><p><img src="/2023/07/20/springcloud01/image-20210713220509769.png" alt="image-20210713220509769"></p><h2 id="3-2-搭建eureka-server"><a href="#3-2-搭建eureka-server" class="headerlink" title="3.2.搭建eureka-server"></a>3.2.搭建eureka-server</h2><p>首先大家注册中心服务端：eureka-server，这必须是一个独立的微服务</p><h3 id="3-2-1-创建eureka-server服务"><a href="#3-2-1-创建eureka-server服务" class="headerlink" title="3.2.1.创建eureka-server服务"></a>3.2.1.创建eureka-server服务</h3><p>在cloud-demo父工程下，创建一个子模块：</p><p><img src="/2023/07/20/springcloud01/image-20210713220605881.png" alt="image-20210713220605881"></p><p>填写模块信息：</p><p><img src="/2023/07/20/springcloud01/image-20210713220857396.png" alt="image-20210713220857396"></p><p>然后填写服务信息：</p><p><img src="/2023/07/20/springcloud01/image-20210713221339022.png" alt="image-20210713221339022"></p><h3 id="3-2-2-引入eureka依赖"><a href="#3-2-2-引入eureka依赖" class="headerlink" title="3.2.2.引入eureka依赖"></a>3.2.2.引入eureka依赖</h3><p>引入SpringCloud为eureka提供的starter依赖：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="3-2-3-编写启动类"><a href="#3-2-3-编写启动类" class="headerlink" title="3.2.3.编写启动类"></a>3.2.3.编写启动类</h3><p>给eureka-server服务编写一个启动类，一定要添加一个@EnableEurekaServer注解，开启eureka的注册中心功能：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.eureka;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaServer</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EurekaApplication</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        SpringApplication.run(EurekaApplication.class, args);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3-2-4-编写配置文件"><a href="#3-2-4-编写配置文件" class="headerlink" title="3.2.4.编写配置文件"></a>3.2.4.编写配置文件</h3><p>编写一个application.yml文件，内容如下：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">10086</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">eureka-server</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span> </span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://127.0.0.1:10086/eureka</span></span><br></pre></td></tr></tbody></table></figure><h3 id="3-2-5-启动服务"><a href="#3-2-5-启动服务" class="headerlink" title="3.2.5.启动服务"></a>3.2.5.启动服务</h3><p>启动微服务，然后在浏览器访问：<a href="http://127.0.0.1:10086/">http://127.0.0.1:10086</a></p><p>看到下面结果应该是成功了：</p><p><img src="/2023/07/20/springcloud01/image-20210713222157190.png" alt="image-20210713222157190"></p><h2 id="3-3-服务注册"><a href="#3-3-服务注册" class="headerlink" title="3.3.服务注册"></a>3.3.服务注册</h2><p>下面，我们将user-service注册到eureka-server中去。</p><h3 id="1）引入依赖"><a href="#1）引入依赖" class="headerlink" title="1）引入依赖"></a>1）引入依赖</h3><p>在user-service的pom文件中，引入下面的eureka-client依赖：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="2）配置文件"><a href="#2）配置文件" class="headerlink" title="2）配置文件"></a>2）配置文件</h3><p>在user-service中，修改application.yml文件，添加服务名称、eureka地址：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">userservice</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://127.0.0.1:10086/eureka</span></span><br></pre></td></tr></tbody></table></figure><h3 id="3）启动多个user-service实例"><a href="#3）启动多个user-service实例" class="headerlink" title="3）启动多个user-service实例"></a>3）启动多个user-service实例</h3><p>为了演示一个服务有多个实例的场景，我们添加一个SpringBoot的启动配置，再启动一个user-service。</p><p>首先，复制原来的user-service启动配置：</p><p><img src="/2023/07/20/springcloud01/image-20210713222656562.png" alt="image-20210713222656562"></p><p>然后，在弹出的窗口中，填写信息：</p><p><img src="/2023/07/20/springcloud01/image-20210713222757702.png" alt="image-20210713222757702"></p><p>现在，SpringBoot窗口会出现两个user-service启动配置：</p><p><img src="/2023/07/20/springcloud01/image-20210713222841951.png" alt="image-20210713222841951"></p><p>不过，第一个是8081端口，第二个是8082端口。</p><p>启动两个user-service实例：</p><p><img src="/2023/07/20/springcloud01/image-20210713223041491.png" alt="image-20210713223041491"></p><p>查看eureka-server管理页面：</p><p><img src="/2023/07/20/springcloud01/image-20210713223150650.png" alt="image-20210713223150650"></p><h2 id="3-4-服务发现"><a href="#3-4-服务发现" class="headerlink" title="3.4.服务发现"></a>3.4.服务发现</h2><p>下面，我们将order-service的逻辑修改：向eureka-server拉取user-service的信息，实现服务发现。</p><h3 id="1）引入依赖-1"><a href="#1）引入依赖-1" class="headerlink" title="1）引入依赖"></a>1）引入依赖</h3><p>之前说过，服务发现、服务注册统一都封装在eureka-client依赖，因此这一步与服务注册时一致。</p><p>在order-service的pom文件中，引入下面的eureka-client依赖：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="2）配置文件-1"><a href="#2）配置文件-1" class="headerlink" title="2）配置文件"></a>2）配置文件</h3><p>服务发现也需要知道eureka地址，因此第二步与服务注册一致，都是配置eureka信息：</p><p>在order-service中，修改application.yml文件，添加服务名称、eureka地址：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">orderservice</span></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://127.0.0.1:10086/eureka</span></span><br></pre></td></tr></tbody></table></figure><h3 id="3）服务拉取和负载均衡"><a href="#3）服务拉取和负载均衡" class="headerlink" title="3）服务拉取和负载均衡"></a>3）服务拉取和负载均衡</h3><p>最后，我们要去eureka-server中拉取user-service服务的实例列表，并且实现负载均衡。</p><p>不过这些动作不用我们去做，只需要添加一些注解即可。</p><p>在order-service的OrderApplication中，给RestTemplate这个Bean添加一个@LoadBalanced注解：</p><p><img src="/2023/07/20/springcloud01/image-20210713224049419.png" alt="image-20210713224049419"></p><p>修改order-service服务中的cn.itcast.order.service包下的OrderService类中的queryOrderById方法。修改访问的url路径，用服务名代替ip、端口：</p><p><img src="/2023/07/20/springcloud01/image-20210713224245731.png" alt="image-20210713224245731"></p><p>spring会自动帮助我们从eureka-server端，根据userservice这个服务名称，获取实例列表，而后完成负载均衡。</p><h1 id="4-Ribbon负载均衡"><a href="#4-Ribbon负载均衡" class="headerlink" title="4.Ribbon负载均衡"></a>4.Ribbon负载均衡</h1><p>上一节中，我们添加了@LoadBalanced注解，即可实现负载均衡功能，这是什么原理呢？</p><h2 id="4-1-负载均衡原理"><a href="#4-1-负载均衡原理" class="headerlink" title="4.1.负载均衡原理"></a>4.1.负载均衡原理</h2><p>SpringCloud底层其实是利用了一个名为Ribbon的组件，来实现负载均衡功能的。</p><p><img src="/2023/07/20/springcloud01/image-20210713224517686.png" alt="image-20210713224517686"></p><p>那么我们发出的请求明明是<a href="http://userservice/user/1%EF%BC%8C%E6%80%8E%E4%B9%88%E5%8F%98%E6%88%90%E4%BA%86http://localhost:8081%E7%9A%84%E5%91%A2%EF%BC%9F">http://userservice/user/1，怎么变成了http://localhost:8081的呢？</a></p><h2 id="4-2-源码跟踪"><a href="#4-2-源码跟踪" class="headerlink" title="4.2.源码跟踪"></a>4.2.源码跟踪</h2><p>为什么我们只输入了service名称就可以访问了呢？之前还要获取ip和端口。</p><p>显然有人帮我们根据service名称，获取到了服务实例的ip和端口。它就是<code>LoadBalancerInterceptor</code>，这个类会在对RestTemplate的请求进行拦截，然后从Eureka根据服务id获取服务列表，随后利用负载均衡算法得到真实的服务地址信息，替换服务id。</p><p>我们进行源码跟踪：</p><h3 id="1）LoadBalancerIntercepor"><a href="#1）LoadBalancerIntercepor" class="headerlink" title="1）LoadBalancerIntercepor"></a>1）LoadBalancerIntercepor</h3><p><img src="/2023/07/20/springcloud01/1525620483637.png" alt="1525620483637"></p><p>可以看到这里的intercept方法，拦截了用户的HttpRequest请求，然后做了几件事：</p><ul><li><code>request.getURI()</code>：获取请求uri，本例中就是 <a href="http://user-service/user/8">http://user-service/user/8</a></li><li><code>originalUri.getHost()</code>：获取uri路径的主机名，其实就是服务id，<code>user-service</code></li><li><code>this.loadBalancer.execute()</code>：处理服务id，和用户请求。</li></ul><p>这里的<code>this.loadBalancer</code>是<code>LoadBalancerClient</code>类型，我们继续跟入。</p><h3 id="2）LoadBalancerClient"><a href="#2）LoadBalancerClient" class="headerlink" title="2）LoadBalancerClient"></a>2）LoadBalancerClient</h3><p>继续跟入execute方法：</p><p><img src="/2023/07/20/springcloud01/1525620787090.png" alt="1525620787090"></p><p>代码是这样的：</p><ul><li>getLoadBalancer(serviceId)：根据服务id获取ILoadBalancer，而ILoadBalancer会拿着服务id去eureka中获取服务列表并保存起来。</li><li>getServer(loadBalancer)：利用内置的负载均衡算法，从服务列表中选择一个。本例中，可以看到获取了8082端口的服务</li></ul><p>放行后，再次访问并跟踪，发现获取的是8081：</p><p> <img src="/2023/07/20/springcloud01/1525620835911.png" alt="1525620835911"></p><p>果然实现了负载均衡。</p><h3 id="3）负载均衡策略IRule"><a href="#3）负载均衡策略IRule" class="headerlink" title="3）负载均衡策略IRule"></a>3）负载均衡策略IRule</h3><p>在刚才的代码中，可以看到获取服务使通过一个<code>getServer</code>方法来做负载均衡:</p><p> <img src="/2023/07/20/springcloud01/1525620835911.png" alt="1525620835911"></p><p>我们继续跟入：</p><p><img src="/2023/07/20/springcloud01/1544361421671.png" alt="1544361421671"></p><p>继续跟踪源码chooseServer方法，发现这么一段代码：</p><p> <img src="/2023/07/20/springcloud01/1525622652849.png" alt="1525622652849"></p><p>我们看看这个rule是谁：</p><p> <img src="/2023/07/20/springcloud01/1525622699666.png" alt="1525622699666"></p><p>这里的rule默认值是一个<code>RoundRobinRule</code>，看类的介绍：</p><p> <img src="/2023/07/20/springcloud01/1525622754316.png" alt="1525622754316"></p><p>这不就是轮询的意思嘛。</p><p>到这里，整个负载均衡的流程我们就清楚了。</p><h3 id="4）总结"><a href="#4）总结" class="headerlink" title="4）总结"></a>4）总结</h3><p>SpringCloudRibbon的底层采用了一个拦截器，拦截了RestTemplate发出的请求，对地址做了修改。用一幅图来总结一下：</p><p><img src="/2023/07/20/springcloud01/image-20210713224724673.png" alt="image-20210713224724673"></p><p>基本流程如下：</p><ul><li>拦截我们的RestTemplate请求<a href="http://userservice/user/1">http://userservice/user/1</a></li><li>RibbonLoadBalancerClient会从请求url中获取服务名称，也就是user-service</li><li>DynamicServerListLoadBalancer根据user-service到eureka拉取服务列表</li><li>eureka返回列表，localhost:8081、localhost:8082</li><li>IRule利用内置负载均衡规则，从列表中选择一个，例如localhost:8081</li><li>RibbonLoadBalancerClient修改请求地址，用localhost:8081替代userservice，得到<a href="http://localhost:8081/user/1%EF%BC%8C%E5%8F%91%E8%B5%B7%E7%9C%9F%E5%AE%9E%E8%AF%B7%E6%B1%82">http://localhost:8081/user/1，发起真实请求</a></li></ul><h2 id="4-3-负载均衡策略"><a href="#4-3-负载均衡策略" class="headerlink" title="4.3.负载均衡策略"></a>4.3.负载均衡策略</h2><h3 id="4-3-1-负载均衡策略"><a href="#4-3-1-负载均衡策略" class="headerlink" title="4.3.1.负载均衡策略"></a>4.3.1.负载均衡策略</h3><p>负载均衡的规则都定义在IRule接口中，而IRule有很多不同的实现类：</p><p><img src="/2023/07/20/springcloud01/image-20210713225653000.png" alt="image-20210713225653000"></p><p>不同规则的含义如下：</p><table><thead><tr><th><strong>内置负载均衡规则类</strong></th><th><strong>规则描述</strong></th></tr></thead><tbody><tr><td>RoundRobinRule</td><td>简单轮询服务列表来选择服务器。它是Ribbon默认的负载均衡规则。</td></tr><tr><td>AvailabilityFilteringRule</td><td>对以下两种服务器进行忽略：   （1）在默认情况下，这台服务器如果3次连接失败，这台服务器就会被设置为“短路”状态。短路状态将持续30秒，如果再次连接失败，短路的持续时间就会几何级地增加。  （2）并发数过高的服务器。如果一个服务器的并发连接数过高，配置了AvailabilityFilteringRule规则的客户端也会将其忽略。并发连接数的上限，可以由客户端的<clientname>.<clientconfignamespace>.ActiveConnectionsLimit属性进行配置。</clientconfignamespace></clientname></td></tr><tr><td>WeightedResponseTimeRule</td><td>为每一个服务器赋予一个权重值。服务器响应时间越长，这个服务器的权重就越小。这个规则会随机选择服务器，这个权重值会影响服务器的选择。</td></tr><tr><td><strong>ZoneAvoidanceRule</strong></td><td>以区域可用的服务器为基础进行服务器的选择。使用Zone对服务器进行分类，这个Zone可以理解为一个机房、一个机架等。而后再对Zone内的多个服务做轮询。</td></tr><tr><td>BestAvailableRule</td><td>忽略那些短路的服务器，并选择并发数较低的服务器。</td></tr><tr><td>RandomRule</td><td>随机选择一个可用的服务器。</td></tr><tr><td>RetryRule</td><td>重试机制的选择逻辑</td></tr></tbody></table><p>默认的实现就是ZoneAvoidanceRule，是一种轮询方案</p><h3 id="4-3-2-自定义负载均衡策略"><a href="#4-3-2-自定义负载均衡策略" class="headerlink" title="4.3.2.自定义负载均衡策略"></a>4.3.2.自定义负载均衡策略</h3><p>通过定义IRule实现可以修改负载均衡规则，有两种方式：</p><ol><li>代码方式：在order-service中的OrderApplication类中，定义一个新的IRule：</li></ol><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> IRule <span class="title function_">randomRule</span><span class="params">()</span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">RandomRule</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><ol start="2"><li>配置文件方式：在order-service的application.yml文件中，添加新的配置也可以修改规则：</li></ol><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">userservice:</span> <span class="comment"># 给某个微服务配置负载均衡规则，这里是userservice服务</span></span><br><span class="line">  <span class="attr">ribbon:</span></span><br><span class="line">    <span class="attr">NFLoadBalancerRuleClassName:</span> <span class="string">com.netflix.loadbalancer.RandomRule</span> <span class="comment"># 负载均衡规则 </span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>注意</strong>，一般用默认的负载均衡规则，不做修改。</p></blockquote><h2 id="4-4-饥饿加载"><a href="#4-4-饥饿加载" class="headerlink" title="4.4.饥饿加载"></a>4.4.饥饿加载</h2><p>Ribbon默认是采用懒加载，即第一次访问时才会去创建LoadBalanceClient，请求时间会很长。</p><p>而饥饿加载则会在项目启动时创建，降低第一次访问的耗时，通过下面配置开启饥饿加载：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">ribbon:</span></span><br><span class="line">  <span class="attr">eager-load:</span></span><br><span class="line">    <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">clients:</span> <span class="string">userservice</span></span><br></pre></td></tr></tbody></table></figure><h1 id="5-Nacos注册中心"><a href="#5-Nacos注册中心" class="headerlink" title="5.Nacos注册中心"></a>5.Nacos注册中心</h1><p>国内公司一般都推崇阿里巴巴的技术，比如注册中心，SpringCloudAlibaba也推出了一个名为Nacos的注册中心。</p><h2 id="5-1-认识和安装Nacos"><a href="#5-1-认识和安装Nacos" class="headerlink" title="5.1.认识和安装Nacos"></a>5.1.认识和安装Nacos</h2><p><a href="https://nacos.io/">Nacos</a>是阿里巴巴的产品，现在是<a href="https://spring.io/projects/spring-cloud">SpringCloud</a>中的一个组件。相比<a href="https://github.com/Netflix/eureka">Eureka</a>功能更加丰富，在国内受欢迎程度较高。</p><p><img src="/2023/07/20/springcloud01/image-20210713230444308.png" alt="image-20210713230444308"></p><p>安装方式可以参考课前资料《Nacos安装指南.md》</p><h2 id="5-2-服务注册到nacos"><a href="#5-2-服务注册到nacos" class="headerlink" title="5.2.服务注册到nacos"></a>5.2.服务注册到nacos</h2><p>Nacos是SpringCloudAlibaba的组件，而SpringCloudAlibaba也遵循SpringCloud中定义的服务注册、服务发现规范。因此使用Nacos和使用Eureka对于微服务来说，并没有太大区别。</p><p>主要差异在于：</p><ul><li>依赖不同</li><li>服务地址不同</li></ul><h3 id="1）引入依赖-2"><a href="#1）引入依赖-2" class="headerlink" title="1）引入依赖"></a>1）引入依赖</h3><p>在cloud-demo父工程的pom文件中的<code>&lt;dependencyManagement&gt;</code>中引入SpringCloudAlibaba的依赖：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.6.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>然后在user-service和order-service中的pom文件中引入nacos-discovery依赖：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>注意</strong>：不要忘了注释掉eureka的依赖。</p></blockquote><h3 id="2）配置nacos地址"><a href="#2）配置nacos地址" class="headerlink" title="2）配置nacos地址"></a>2）配置nacos地址</h3><p>在user-service和order-service的application.yml中添加nacos地址：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">localhost:8848</span></span><br></pre></td></tr></tbody></table></figure><blockquote><p><strong>注意</strong>：不要忘了注释掉eureka的地址</p></blockquote><h3 id="3）重启"><a href="#3）重启" class="headerlink" title="3）重启"></a>3）重启</h3><p>重启微服务后，登录nacos管理页面，可以看到微服务信息：</p><p><img src="/2023/07/20/springcloud01/image-20210713231439607.png" alt="image-20210713231439607"></p><h2 id="5-3-服务分级存储模型"><a href="#5-3-服务分级存储模型" class="headerlink" title="5.3.服务分级存储模型"></a>5.3.服务分级存储模型</h2><p>一个<strong>服务</strong>可以有多个<strong>实例</strong>，例如我们的user-service，可以有:</p><ul><li>127.0.0.1:8081</li><li>127.0.0.1:8082</li><li>127.0.0.1:8083</li></ul><p>假如这些实例分布于全国各地的不同机房，例如：</p><ul><li>127.0.0.1:8081，在上海机房</li><li>127.0.0.1:8082，在上海机房</li><li>127.0.0.1:8083，在杭州机房</li></ul><p>Nacos就将同一机房内的实例 划分为一个<strong>集群</strong>。</p><p>也就是说，user-service是服务，一个服务可以包含多个集群，如杭州、上海，每个集群下可以有多个实例，形成分级模型，如图：</p><p><img src="/2023/07/20/springcloud01/image-20210713232522531.png" alt="image-20210713232522531"></p><p>微服务互相访问时，应该尽可能访问同集群实例，因为本地访问速度更快。当本集群内不可用时，才访问其它集群。例如：</p><p><img src="/2023/07/20/springcloud01/image-20210713232658928.png" alt="image-20210713232658928"></p><p>杭州机房内的order-service应该优先访问同机房的user-service。</p><h3 id="5-3-1-给user-service配置集群"><a href="#5-3-1-给user-service配置集群" class="headerlink" title="5.3.1.给user-service配置集群"></a>5.3.1.给user-service配置集群</h3><p>修改user-service的application.yml文件，添加集群配置：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">localhost:8848</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">cluster-name:</span> <span class="string">HZ</span> <span class="comment"># 集群名称</span></span><br></pre></td></tr></tbody></table></figure><p>重启两个user-service实例后，我们可以在nacos控制台看到下面结果：</p><p><img src="/2023/07/20/springcloud01/image-20210713232916215.png" alt="image-20210713232916215"></p><p>我们再次复制一个user-service启动配置，添加属性：</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-Dserver.port=8083 -Dspring.cloud.nacos.discovery.cluster-name=SH</span><br></pre></td></tr></tbody></table></figure><p>配置如图所示：</p><p><img src="/2023/07/20/springcloud01/image-20210713233528982.png" alt="image-20210713233528982"></p><p>启动UserApplication3后再次查看nacos控制台：</p><p><img src="/2023/07/20/springcloud01/image-20210713233727923.png" alt="image-20210713233727923"></p><h3 id="5-3-2-同集群优先的负载均衡"><a href="#5-3-2-同集群优先的负载均衡" class="headerlink" title="5.3.2.同集群优先的负载均衡"></a>5.3.2.同集群优先的负载均衡</h3><p>默认的<code>ZoneAvoidanceRule</code>并不能实现根据同集群优先来实现负载均衡。</p><p>因此Nacos中提供了一个<code>NacosRule</code>的实现，可以优先从同集群中挑选实例。</p><p>1）给order-service配置集群信息</p><p>修改order-service的application.yml文件，添加集群配置：</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">spring:</span><br><span class="line">  cloud:</span><br><span class="line">    nacos:</span><br><span class="line">      server-addr: localhost:8848</span><br><span class="line">      discovery:</span><br><span class="line">        cluster-name: HZ <span class="comment"># 集群名称</span></span><br></pre></td></tr></tbody></table></figure><p>2）修改负载均衡规则</p><p>修改order-service的application.yml文件，修改负载均衡规则：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">userservice:</span></span><br><span class="line">  <span class="attr">ribbon:</span></span><br><span class="line">    <span class="attr">NFLoadBalancerRuleClassName:</span> <span class="string">com.alibaba.cloud.nacos.ribbon.NacosRule</span> <span class="comment"># 负载均衡规则 </span></span><br></pre></td></tr></tbody></table></figure><h2 id="5-4-权重配置"><a href="#5-4-权重配置" class="headerlink" title="5.4.权重配置"></a>5.4.权重配置</h2><p>实际部署中会出现这样的场景：</p><p>服务器设备性能有差异，部分实例所在机器性能较好，另一些较差，我们希望性能好的机器承担更多的用户请求。</p><p>但默认情况下NacosRule是同集群内随机挑选，不会考虑机器的性能问题。</p><p>因此，Nacos提供了权重配置来控制访问频率，权重越大则访问频率越高。</p><p>在nacos控制台，找到user-service的实例列表，点击编辑，即可修改权重：</p><p><img src="/2023/07/20/springcloud01/image-20210713235133225.png" alt="image-20210713235133225"></p><p>在弹出的编辑窗口，修改权重：</p><p><img src="/2023/07/20/springcloud01/image-20210713235235219.png" alt="image-20210713235235219"></p><blockquote><p><strong>注意</strong>：如果权重修改为0，则该实例永远不会被访问</p></blockquote><h2 id="5-5-环境隔离"><a href="#5-5-环境隔离" class="headerlink" title="5.5.环境隔离"></a>5.5.环境隔离</h2><p>Nacos提供了namespace来实现环境隔离功能。</p><ul><li>nacos中可以有多个namespace</li><li>namespace下可以有group、service等</li><li>不同namespace之间相互隔离，例如不同namespace的服务互相不可见</li></ul><p><img src="/2023/07/20/springcloud01/image-20210714000101516.png" alt="image-20210714000101516"></p><h3 id="5-5-1-创建namespace"><a href="#5-5-1-创建namespace" class="headerlink" title="5.5.1.创建namespace"></a>5.5.1.创建namespace</h3><p>默认情况下，所有service、data、group都在同一个namespace，名为public：</p><p><img src="/2023/07/20/springcloud01/image-20210714000414781.png" alt="image-20210714000414781"></p><p>我们可以点击页面新增按钮，添加一个namespace：</p><p><img src="/2023/07/20/springcloud01/image-20210714000440143.png" alt="image-20210714000440143"></p><p>然后，填写表单：</p><p><img src="/2023/07/20/springcloud01/image-20210714000505928.png" alt="image-20210714000505928"></p><p>就能在页面看到一个新的namespace：</p><p><img src="/2023/07/20/springcloud01/image-20210714000522913.png" alt="image-20210714000522913"></p><h3 id="5-5-2-给微服务配置namespace"><a href="#5-5-2-给微服务配置namespace" class="headerlink" title="5.5.2.给微服务配置namespace"></a>5.5.2.给微服务配置namespace</h3><p>给微服务配置namespace只能通过修改配置来实现。</p><p>例如，修改order-service的application.yml文件：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">localhost:8848</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">cluster-name:</span> <span class="string">HZ</span></span><br><span class="line">        <span class="attr">namespace:</span> <span class="string">492a7d5d-237b-46a1-a99a-fa8e98e4b0f9</span> <span class="comment"># 命名空间，填ID</span></span><br></pre></td></tr></tbody></table></figure><p>重启order-service后，访问控制台，可以看到下面的结果：</p><p><img src="/2023/07/20/springcloud01/image-20210714000830703.png" alt="image-20210714000830703"></p><p><img src="/2023/07/20/springcloud01/image-20210714000837140.png" alt="image-20210714000837140"></p><p>此时访问order-service，因为namespace不同，会导致找不到userservice，控制台会报错：</p><p><img src="/2023/07/20/springcloud01/image-20210714000941256.png" alt="image-20210714000941256"></p><h2 id="5-6-Nacos与Eureka的区别"><a href="#5-6-Nacos与Eureka的区别" class="headerlink" title="5.6.Nacos与Eureka的区别"></a>5.6.Nacos与Eureka的区别</h2><p>Nacos的服务实例分为两种l类型：</p><ul><li><p>临时实例：如果实例宕机超过一定时间，会从服务列表剔除，默认的类型。</p></li><li><p>非临时实例：如果实例宕机，不会从服务列表剔除，也可以叫永久实例。</p></li></ul><p>配置一个服务实例为永久实例：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">discovery:</span></span><br><span class="line">        <span class="attr">ephemeral:</span> <span class="literal">false</span> <span class="comment"># 设置为非临时实例</span></span><br></pre></td></tr></tbody></table></figure><p>Nacos和Eureka整体结构类似，服务注册、服务拉取、心跳等待，但是也存在一些差异：</p><p><img src="/2023/07/20/springcloud01/image-20210714001728017.png" alt="image-20210714001728017"></p><ul><li><p>Nacos与eureka的共同点</p><ul><li>都支持服务注册和服务拉取</li><li>都支持服务提供者心跳方式做健康检测</li></ul></li><li><p>Nacos与Eureka的区别</p><ul><li>Nacos支持服务端主动检测提供者状态：临时实例采用心跳模式，非临时实例采用主动检测模式</li><li>临时实例心跳不正常会被剔除，非临时实例则不会被剔除</li><li>Nacos支持服务列表变更的消息推送模式，服务列表更新更及时</li><li>Nacos集群默认采用AP方式，当集群中存在非临时实例时，采用CP模式；Eureka采用AP方式</li></ul></li></ul>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;SpringCloud01&quot;&gt;&lt;a href=&quot;#SpringCloud01&quot; class=&quot;headerlink&quot; title=&quot;SpringCloud01&quot;&gt;&lt;/a&gt;SpringCloud01&lt;/h1&gt;</summary>
    
    
    
    <category term="SpringCloud" scheme="https://llzzoomm.github.io/categories/SpringCloud/"/>
    
    
    <category term="SpringCloud" scheme="https://llzzoomm.github.io/tags/SpringCloud/"/>
    
  </entry>
  
  <entry>
    <title>RabbitMQ</title>
    <link href="https://llzzoomm.github.io/2023/07/20/rabbitmq/"/>
    <id>https://llzzoomm.github.io/2023/07/20/rabbitmq/</id>
    <published>2023-07-20T11:31:50.969Z</published>
    <updated>2023-07-20T11:27:54.244Z</updated>
    
    <content type="html"><![CDATA[<h1 id="RabbitMQ"><a href="#RabbitMQ" class="headerlink" title="RabbitMQ"></a>RabbitMQ</h1><span id="more"></span><h1 id="1-初识MQ"><a href="#1-初识MQ" class="headerlink" title="1.初识MQ"></a>1.初识MQ</h1><h2 id="1-1-同步和异步通讯"><a href="#1-1-同步和异步通讯" class="headerlink" title="1.1.同步和异步通讯"></a>1.1.同步和异步通讯</h2><p>微服务间通讯有同步和异步两种方式：</p><p>同步通讯：就像打电话，需要实时响应。</p><p>异步通讯：就像发邮件，不需要马上回复。</p><p><img src="/2023/07/20/rabbitmq/image-20210717161939695.png" alt="image-20210717161939695"></p><p>两种方式各有优劣，打电话可以立即得到响应，但是你却不能跟多个人同时通话。发送邮件可以同时与多个人收发邮件，但是往往响应会有延迟。</p><h3 id="1-1-1-同步通讯"><a href="#1-1-1-同步通讯" class="headerlink" title="1.1.1.同步通讯"></a>1.1.1.同步通讯</h3><p>我们之前学习的Feign调用就属于同步方式，虽然调用可以实时得到结果，但存在下面的问题：</p><p><img src="/2023/07/20/rabbitmq/image-20210717162004285.png" alt="image-20210717162004285"></p><p>总结：</p><p>同步调用的优点：</p><ul><li>时效性较强，可以立即得到结果</li></ul><p>同步调用的问题：</p><ul><li>耦合度高</li><li>性能和吞吐能力下降</li><li>有额外的资源消耗</li><li>有级联失败问题</li></ul><h3 id="1-1-2-异步通讯"><a href="#1-1-2-异步通讯" class="headerlink" title="1.1.2.异步通讯"></a>1.1.2.异步通讯</h3><p>异步调用则可以避免上述问题：</p><p>我们以购买商品为例，用户支付后需要调用订单服务完成订单状态修改，调用物流服务，从仓库分配响应的库存并准备发货。</p><p>在事件模式中，支付服务是事件发布者（publisher），在支付完成后只需要发布一个支付成功的事件（event），事件中带上订单id。</p><p>订单服务和物流服务是事件订阅者（Consumer），订阅支付成功的事件，监听到事件后完成自己业务即可。</p><p>为了解除事件发布者与订阅者之间的耦合，两者并不是直接通信，而是有一个中间人（Broker）。发布者发布事件到Broker，不关心谁来订阅事件。订阅者从Broker订阅事件，不关心谁发来的消息。</p><p><img src="/2023/07/20/rabbitmq/image-20210422095356088.png" alt="image-20210422095356088"></p><p>Broker 是一个像数据总线一样的东西，所有的服务要接收数据和发送数据都发到这个总线上，这个总线就像协议一样，让服务间的通讯变得标准和可控。</p><p>好处：</p><ul><li><p>吞吐量提升：无需等待订阅者处理完成，响应更快速</p></li><li><p>故障隔离：服务没有直接调用，不存在级联失败问题</p></li><li><p>调用间没有阻塞，不会造成无效的资源占用</p></li><li><p>耦合度极低，每个服务都可以灵活插拔，可替换</p></li><li><p>流量削峰：不管发布事件的流量波动多大，都由Broker接收，订阅者可以按照自己的速度去处理事件</p></li></ul><p>缺点：</p><ul><li>架构复杂了，业务没有明显的流程线，不好管理</li><li>需要依赖于Broker的可靠、安全、性能</li></ul><p>好在现在开源软件或云平台上 Broker 的软件是非常成熟的，比较常见的一种就是我们今天要学习的MQ技术。</p><h2 id="1-2-技术对比："><a href="#1-2-技术对比：" class="headerlink" title="1.2.技术对比："></a>1.2.技术对比：</h2><p>MQ，中文是消息队列（MessageQueue），字面来看就是存放消息的队列。也就是事件驱动架构中的Broker。</p><p>比较常见的MQ实现：</p><ul><li>ActiveMQ</li><li>RabbitMQ</li><li>RocketMQ</li><li>Kafka</li></ul><p>几种常见MQ的对比：</p><table><thead><tr><th></th><th><strong>RabbitMQ</strong></th><th><strong>ActiveMQ</strong></th><th><strong>RocketMQ</strong></th><th><strong>Kafka</strong></th></tr></thead><tbody><tr><td>公司/社区</td><td>Rabbit</td><td>Apache</td><td>阿里</td><td>Apache</td></tr><tr><td>开发语言</td><td>Erlang</td><td>Java</td><td>Java</td><td>Scala&amp;Java</td></tr><tr><td>协议支持</td><td>AMQP，XMPP，SMTP，STOMP</td><td>OpenWire,STOMP，REST,XMPP,AMQP</td><td>自定义协议</td><td>自定义协议</td></tr><tr><td>可用性</td><td>高</td><td>一般</td><td>高</td><td>高</td></tr><tr><td>单机吞吐量</td><td>一般</td><td>差</td><td>高</td><td>非常高</td></tr><tr><td>消息延迟</td><td>微秒级</td><td>毫秒级</td><td>毫秒级</td><td>毫秒以内</td></tr><tr><td>消息可靠性</td><td>高</td><td>一般</td><td>高</td><td>一般</td></tr></tbody></table><p>追求可用性：Kafka、 RocketMQ 、RabbitMQ</p><p>追求可靠性：RabbitMQ、RocketMQ</p><p>追求吞吐能力：RocketMQ、Kafka</p><p>追求消息低延迟：RabbitMQ、Kafka</p><h1 id="2-快速入门"><a href="#2-快速入门" class="headerlink" title="2.快速入门"></a>2.快速入门</h1><h2 id="2-1-安装RabbitMQ"><a href="#2-1-安装RabbitMQ" class="headerlink" title="2.1.安装RabbitMQ"></a>2.1.安装RabbitMQ</h2><p>安装RabbitMQ，参考课前资料：</p><p><img src="/2023/07/20/rabbitmq/image-20210717162628635.png" alt="image-20210717162628635"></p><p>MQ的基本结构：</p><p><img src="/2023/07/20/rabbitmq/image-20210717162752376.png" alt="image-20210717162752376"></p><p>RabbitMQ中的一些角色：</p><ul><li>publisher：生产者</li><li>consumer：消费者</li><li>exchange个：交换机，负责消息路由</li><li>queue：队列，存储消息</li><li>virtualHost：虚拟主机，隔离不同租户的exchange、queue、消息的隔离</li></ul><h2 id="2-2-RabbitMQ消息模型"><a href="#2-2-RabbitMQ消息模型" class="headerlink" title="2.2.RabbitMQ消息模型"></a>2.2.RabbitMQ消息模型</h2><p>RabbitMQ官方提供了5个不同的Demo示例，对应了不同的消息模型：</p><p><img src="/2023/07/20/rabbitmq/image-20210717163332646.png" alt="image-20210717163332646"></p><h2 id="2-3-导入Demo工程"><a href="#2-3-导入Demo工程" class="headerlink" title="2.3.导入Demo工程"></a>2.3.导入Demo工程</h2><p>课前资料提供了一个Demo工程，mq-demo:</p><p><img src="/2023/07/20/rabbitmq/image-20210717163253264.png" alt="image-20210717163253264"></p><p>导入后可以看到结构如下：</p><p><img src="/2023/07/20/rabbitmq/image-20210717163604330.png" alt="image-20210717163604330"></p><p>包括三部分：</p><ul><li>mq-demo：父工程，管理项目依赖</li><li>publisher：消息的发送者</li><li>consumer：消息的消费者</li></ul><h2 id="2-4-入门案例"><a href="#2-4-入门案例" class="headerlink" title="2.4.入门案例"></a>2.4.入门案例</h2><p>简单队列模式的模型图：</p><p> <img src="/2023/07/20/rabbitmq/image-20210717163434647.png" alt="image-20210717163434647"></p><p>官方的HelloWorld是基于最基础的消息队列模型来实现的，只包括三个角色：</p><ul><li>publisher：消息发布者，将消息发送到队列queue</li><li>queue：消息队列，负责接受并缓存消息</li><li>consumer：订阅队列，处理队列中的消息</li></ul><h3 id="2-4-1-publisher实现"><a href="#2-4-1-publisher实现" class="headerlink" title="2.4.1.publisher实现"></a>2.4.1.publisher实现</h3><p>思路：</p><ul><li>建立连接</li><li>创建Channel</li><li>声明队列</li><li>发送消息</li><li>关闭连接和channel</li></ul><p>代码实现：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.mq.helloworld;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.rabbitmq.client.Channel;</span><br><span class="line"><span class="keyword">import</span> com.rabbitmq.client.Connection;</span><br><span class="line"><span class="keyword">import</span> com.rabbitmq.client.ConnectionFactory;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeoutException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PublisherTest</span> {</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSendMessage</span><span class="params">()</span> <span class="keyword">throws</span> IOException, TimeoutException {</span><br><span class="line">        <span class="comment">// 1.建立连接</span></span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        <span class="comment">// 1.1.设置连接参数，分别是：主机名、端口号、vhost、用户名、密码</span></span><br><span class="line">        factory.setHost(<span class="string">"192.168.150.101"</span>);</span><br><span class="line">        factory.setPort(<span class="number">5672</span>);</span><br><span class="line">        factory.setVirtualHost(<span class="string">"/"</span>);</span><br><span class="line">        factory.setUsername(<span class="string">"itcast"</span>);</span><br><span class="line">        factory.setPassword(<span class="string">"123321"</span>);</span><br><span class="line">        <span class="comment">// 1.2.建立连接</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> factory.newConnection();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.创建通道Channel</span></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.创建队列</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> <span class="string">"simple.queue"</span>;</span><br><span class="line">        channel.queueDeclare(queueName, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.发送消息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">"hello, rabbitmq!"</span>;</span><br><span class="line">        channel.basicPublish(<span class="string">""</span>, queueName, <span class="literal">null</span>, message.getBytes());</span><br><span class="line">        System.out.println(<span class="string">"发送消息成功：【"</span> + message + <span class="string">"】"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5.关闭通道和连接</span></span><br><span class="line">        channel.close();</span><br><span class="line">        connection.close();</span><br><span class="line"></span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="2-4-2-consumer实现"><a href="#2-4-2-consumer实现" class="headerlink" title="2.4.2.consumer实现"></a>2.4.2.consumer实现</h3><p>代码思路：</p><ul><li>建立连接</li><li>创建Channel</li><li>声明队列</li><li>订阅消息</li></ul><p>代码实现：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.mq.helloworld;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.rabbitmq.client.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeoutException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConsumerTest</span> {</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, TimeoutException {</span><br><span class="line">        <span class="comment">// 1.建立连接</span></span><br><span class="line">        <span class="type">ConnectionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ConnectionFactory</span>();</span><br><span class="line">        <span class="comment">// 1.1.设置连接参数，分别是：主机名、端口号、vhost、用户名、密码</span></span><br><span class="line">        factory.setHost(<span class="string">"192.168.150.101"</span>);</span><br><span class="line">        factory.setPort(<span class="number">5672</span>);</span><br><span class="line">        factory.setVirtualHost(<span class="string">"/"</span>);</span><br><span class="line">        factory.setUsername(<span class="string">"itcast"</span>);</span><br><span class="line">        factory.setPassword(<span class="string">"123321"</span>);</span><br><span class="line">        <span class="comment">// 1.2.建立连接</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> factory.newConnection();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2.创建通道Channel</span></span><br><span class="line">        <span class="type">Channel</span> <span class="variable">channel</span> <span class="operator">=</span> connection.createChannel();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.创建队列</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> <span class="string">"simple.queue"</span>;</span><br><span class="line">        channel.queueDeclare(queueName, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4.订阅消息</span></span><br><span class="line">        channel.basicConsume(queueName, <span class="literal">true</span>, <span class="keyword">new</span> <span class="title class_">DefaultConsumer</span>(channel){</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleDelivery</span><span class="params">(String consumerTag, Envelope envelope,</span></span><br><span class="line"><span class="params">                                       AMQP.BasicProperties properties, <span class="type">byte</span>[] body)</span> <span class="keyword">throws</span> IOException {</span><br><span class="line">                <span class="comment">// 5.处理消息</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(body);</span><br><span class="line">                System.out.println(<span class="string">"接收到消息：【"</span> + message + <span class="string">"】"</span>);</span><br><span class="line">            }</span><br><span class="line">        });</span><br><span class="line">        System.out.println(<span class="string">"等待接收消息。。。。"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="2-5-总结"><a href="#2-5-总结" class="headerlink" title="2.5.总结"></a>2.5.总结</h2><p>基本消息队列的消息发送流程：</p><ol><li><p>建立connection</p></li><li><p>创建channel</p></li><li><p>利用channel声明队列</p></li><li><p>利用channel向队列发送消息</p></li></ol><p>基本消息队列的消息接收流程：</p><ol><li><p>建立connection</p></li><li><p>创建channel</p></li><li><p>利用channel声明队列</p></li><li><p>定义consumer的消费行为handleDelivery()</p></li><li><p>利用channel将消费者与队列绑定</p></li></ol><h1 id="3-SpringAMQP"><a href="#3-SpringAMQP" class="headerlink" title="3.SpringAMQP"></a>3.SpringAMQP</h1><p>SpringAMQP是基于RabbitMQ封装的一套模板，并且还利用SpringBoot对其实现了自动装配，使用起来非常方便。</p><p>SpringAmqp的官方地址：<a href="https://spring.io/projects/spring-amqp">https://spring.io/projects/spring-amqp</a></p><p><img src="/2023/07/20/rabbitmq/image-20210717164024967.png" alt="image-20210717164024967"></p><p><img src="/2023/07/20/rabbitmq/image-20210717164038678.png" alt="image-20210717164038678"></p><p>SpringAMQP提供了三个功能：</p><ul><li>自动声明队列、交换机及其绑定关系</li><li>基于注解的监听器模式，异步接收消息</li><li>封装了RabbitTemplate工具，用于发送消息 </li></ul><h2 id="3-1-Basic-Queue-简单队列模型"><a href="#3-1-Basic-Queue-简单队列模型" class="headerlink" title="3.1.Basic Queue 简单队列模型"></a>3.1.Basic Queue 简单队列模型</h2><p>在父工程mq-demo中引入依赖</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--AMQP依赖，包含RabbitMQ--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h3 id="3-1-1-消息发送"><a href="#3-1-1-消息发送" class="headerlink" title="3.1.1.消息发送"></a>3.1.1.消息发送</h3><p>首先配置MQ地址，在publisher服务的application.yml中添加配置：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.150</span><span class="number">.101</span> <span class="comment"># 主机名</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span> <span class="comment"># 端口</span></span><br><span class="line">    <span class="attr">virtual-host:</span> <span class="string">/</span> <span class="comment"># 虚拟主机</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">itcast</span> <span class="comment"># 用户名</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123321</span> <span class="comment"># 密码</span></span><br></pre></td></tr></tbody></table></figure><p>然后在publisher服务中编写测试类SpringAmqpTest，并利用RabbitTemplate实现消息发送：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.mq.spring;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.core.RabbitTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringAmqpTest</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RabbitTemplate rabbitTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSimpleQueue</span><span class="params">()</span> {</span><br><span class="line">        <span class="comment">// 队列名称</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> <span class="string">"simple.queue"</span>;</span><br><span class="line">        <span class="comment">// 消息</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">"hello, spring amqp!"</span>;</span><br><span class="line">        <span class="comment">// 发送消息</span></span><br><span class="line">        rabbitTemplate.convertAndSend(queueName, message);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3-1-2-消息接收"><a href="#3-1-2-消息接收" class="headerlink" title="3.1.2.消息接收"></a>3.1.2.消息接收</h3><p>首先配置MQ地址，在consumer服务的application.yml中添加配置：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">192.168</span><span class="number">.150</span><span class="number">.101</span> <span class="comment"># 主机名</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">5672</span> <span class="comment"># 端口</span></span><br><span class="line">    <span class="attr">virtual-host:</span> <span class="string">/</span> <span class="comment"># 虚拟主机</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">itcast</span> <span class="comment"># 用户名</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123321</span> <span class="comment"># 密码</span></span><br></pre></td></tr></tbody></table></figure><p>然后在consumer服务的<code>cn.itcast.mq.listener</code>包中新建一个类SpringRabbitListener，代码如下：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.mq.listener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.annotation.RabbitListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringRabbitListener</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RabbitListener(queues = "simple.queue")</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenSimpleQueueMessage</span><span class="params">(String msg)</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">        System.out.println(<span class="string">"spring 消费者接收到消息：【"</span> + msg + <span class="string">"】"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3-1-3-测试"><a href="#3-1-3-测试" class="headerlink" title="3.1.3.测试"></a>3.1.3.测试</h3><p>启动consumer服务，然后在publisher服务中运行测试代码，发送MQ消息</p><h2 id="3-2-WorkQueue"><a href="#3-2-WorkQueue" class="headerlink" title="3.2.WorkQueue"></a>3.2.WorkQueue</h2><p>Work queues，也被称为（Task queues），任务模型。简单来说就是<strong>让多个消费者绑定到一个队列，共同消费队列中的消息</strong>。</p><p><img src="/2023/07/20/rabbitmq/image-20210717164238910.png" alt="image-20210717164238910"></p><p>当消息处理比较耗时的时候，可能生产消息的速度会远远大于消息的消费速度。长此以往，消息就会堆积越来越多，无法及时处理。</p><p>此时就可以使用work 模型，多个消费者共同处理消息处理，速度就能大大提高了。</p><h3 id="3-2-1-消息发送"><a href="#3-2-1-消息发送" class="headerlink" title="3.2.1.消息发送"></a>3.2.1.消息发送</h3><p>这次我们循环发送，模拟大量消息堆积现象。</p><p>在publisher服务中的SpringAmqpTest类中添加一个测试方法：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * workQueue</span></span><br><span class="line"><span class="comment">     * 向队列中不停发送消息，模拟消息堆积。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testWorkQueue</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">    <span class="comment">// 队列名称</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">queueName</span> <span class="operator">=</span> <span class="string">"simple.queue"</span>;</span><br><span class="line">    <span class="comment">// 消息</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">"hello, message_"</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) {</span><br><span class="line">        <span class="comment">// 发送消息</span></span><br><span class="line">        rabbitTemplate.convertAndSend(queueName, message + i);</span><br><span class="line">        Thread.sleep(<span class="number">20</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3-2-2-消息接收"><a href="#3-2-2-消息接收" class="headerlink" title="3.2.2.消息接收"></a>3.2.2.消息接收</h3><p>要模拟多个消费者绑定同一个队列，我们在consumer服务的SpringRabbitListener中添加2个新的方法：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RabbitListener(queues = "simple.queue")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenWorkQueue1</span><span class="params">(String msg)</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">    System.out.println(<span class="string">"消费者1接收到消息：【"</span> + msg + <span class="string">"】"</span> + LocalTime.now());</span><br><span class="line">    Thread.sleep(<span class="number">20</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@RabbitListener(queues = "simple.queue")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenWorkQueue2</span><span class="params">(String msg)</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">    System.err.println(<span class="string">"消费者2........接收到消息：【"</span> + msg + <span class="string">"】"</span> + LocalTime.now());</span><br><span class="line">    Thread.sleep(<span class="number">200</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>注意到这个消费者sleep了1000秒，模拟任务耗时。</p><h3 id="3-2-3-测试"><a href="#3-2-3-测试" class="headerlink" title="3.2.3.测试"></a>3.2.3.测试</h3><p>启动ConsumerApplication后，在执行publisher服务中刚刚编写的发送测试方法testWorkQueue。</p><p>可以看到消费者1很快完成了自己的25条消息。消费者2却在缓慢的处理自己的25条消息。</p><p>也就是说消息是平均分配给每个消费者，并没有考虑到消费者的处理能力。这样显然是有问题的。</p><h3 id="3-2-4-能者多劳"><a href="#3-2-4-能者多劳" class="headerlink" title="3.2.4.能者多劳"></a>3.2.4.能者多劳</h3><p>在spring中有一个简单的配置，可以解决这个问题。我们修改consumer服务的application.yml文件，添加配置：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">rabbitmq:</span></span><br><span class="line">    <span class="attr">listener:</span></span><br><span class="line">      <span class="attr">simple:</span></span><br><span class="line">        <span class="attr">prefetch:</span> <span class="number">1</span> <span class="comment"># 每次只能获取一条消息，处理完成才能获取下一个消息</span></span><br></pre></td></tr></tbody></table></figure><h3 id="3-2-5-总结"><a href="#3-2-5-总结" class="headerlink" title="3.2.5.总结"></a>3.2.5.总结</h3><p>Work模型的使用：</p><ul><li>多个消费者绑定到一个队列，同一条消息只会被一个消费者处理</li><li>通过设置prefetch来控制消费者预取的消息数量</li></ul><h2 id="3-3-发布-订阅"><a href="#3-3-发布-订阅" class="headerlink" title="3.3.发布/订阅"></a>3.3.发布/订阅</h2><p>发布订阅的模型如图：</p><p><img src="/2023/07/20/rabbitmq/image-20210717165309625.png" alt="image-20210717165309625"></p><p>可以看到，在订阅模型中，多了一个exchange角色，而且过程略有变化：</p><ul><li>Publisher：生产者，也就是要发送消息的程序，但是不再发送到队列中，而是发给X（交换机）</li><li>Exchange：交换机，图中的X。一方面，接收生产者发送的消息。另一方面，知道如何处理消息，例如递交给某个特别队列、递交给所有队列、或是将消息丢弃。到底如何操作，取决于Exchange的类型。Exchange有以下3种类型：<ul><li>Fanout：广播，将消息交给所有绑定到交换机的队列</li><li>Direct：定向，把消息交给符合指定routing key 的队列</li><li>Topic：通配符，把消息交给符合routing pattern（路由模式） 的队列</li></ul></li><li>Consumer：消费者，与以前一样，订阅队列，没有变化</li><li>Queue：消息队列也与以前一样，接收消息、缓存消息。</li></ul><p><strong>Exchange（交换机）只负责转发消息，不具备存储消息的能力</strong>，因此如果没有任何队列与Exchange绑定，或者没有符合路由规则的队列，那么消息会丢失！</p><h2 id="3-4-Fanout"><a href="#3-4-Fanout" class="headerlink" title="3.4.Fanout"></a>3.4.Fanout</h2><p>Fanout，英文翻译是扇出，我觉得在MQ中叫广播更合适。</p><p><img src="/2023/07/20/rabbitmq/image-20210717165438225.png" alt="image-20210717165438225"></p><p>在广播模式下，消息发送流程是这样的：</p><ul><li>1）  可以有多个队列</li><li>2）  每个队列都要绑定到Exchange（交换机）</li><li>3）  生产者发送的消息，只能发送到交换机，交换机来决定要发给哪个队列，生产者无法决定</li><li>4）  交换机把消息发送给绑定过的所有队列</li><li>5）  订阅队列的消费者都能拿到消息</li></ul><p>我们的计划是这样的：</p><ul><li>创建一个交换机 itcast.fanout，类型是Fanout</li><li>创建两个队列fanout.queue1和fanout.queue2，绑定到交换机itcast.fanout</li></ul><p><img src="/2023/07/20/rabbitmq/image-20210717165509466.png" alt="image-20210717165509466"></p><h3 id="3-4-1-声明队列和交换机"><a href="#3-4-1-声明队列和交换机" class="headerlink" title="3.4.1.声明队列和交换机"></a>3.4.1.声明队列和交换机</h3><p>Spring提供了一个接口Exchange，来表示所有不同类型的交换机：</p><p><img src="/2023/07/20/rabbitmq/image-20210717165552676.png" alt="image-20210717165552676"></p><p>在consumer中创建一个类，声明队列和交换机：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.mq.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.Binding;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.BindingBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.FanoutExchange;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.Queue;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FanoutConfig</span> {</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 声明交换机</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Fanout类型交换机</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> FanoutExchange <span class="title function_">fanoutExchange</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">FanoutExchange</span>(<span class="string">"itcast.fanout"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 第1个队列</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">fanoutQueue1</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(<span class="string">"fanout.queue1"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 绑定队列和交换机</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">bindingQueue1</span><span class="params">(Queue fanoutQueue1, FanoutExchange fanoutExchange)</span>{</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(fanoutQueue1).to(fanoutExchange);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 第2个队列</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">fanoutQueue2</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(<span class="string">"fanout.queue2"</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 绑定队列和交换机</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">bindingQueue2</span><span class="params">(Queue fanoutQueue2, FanoutExchange fanoutExchange)</span>{</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(fanoutQueue2).to(fanoutExchange);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3-4-2-消息发送"><a href="#3-4-2-消息发送" class="headerlink" title="3.4.2.消息发送"></a>3.4.2.消息发送</h3><p>在publisher服务的SpringAmqpTest类中添加测试方法：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFanoutExchange</span><span class="params">()</span> {</span><br><span class="line">    <span class="comment">// 队列名称</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">exchangeName</span> <span class="operator">=</span> <span class="string">"itcast.fanout"</span>;</span><br><span class="line">    <span class="comment">// 消息</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">"hello, everyone!"</span>;</span><br><span class="line">    rabbitTemplate.convertAndSend(exchangeName, <span class="string">""</span>, message);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3-4-3-消息接收"><a href="#3-4-3-消息接收" class="headerlink" title="3.4.3.消息接收"></a>3.4.3.消息接收</h3><p>在consumer服务的SpringRabbitListener中添加两个方法，作为消费者：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RabbitListener(queues = "fanout.queue1")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenFanoutQueue1</span><span class="params">(String msg)</span> {</span><br><span class="line">    System.out.println(<span class="string">"消费者1接收到Fanout消息：【"</span> + msg + <span class="string">"】"</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@RabbitListener(queues = "fanout.queue2")</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenFanoutQueue2</span><span class="params">(String msg)</span> {</span><br><span class="line">    System.out.println(<span class="string">"消费者2接收到Fanout消息：【"</span> + msg + <span class="string">"】"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3-4-4-总结"><a href="#3-4-4-总结" class="headerlink" title="3.4.4.总结"></a>3.4.4.总结</h3><p>交换机的作用是什么？</p><ul><li>接收publisher发送的消息</li><li>将消息按照规则路由到与之绑定的队列</li><li>不能缓存消息，路由失败，消息丢失</li><li>FanoutExchange的会将消息路由到每个绑定的队列</li></ul><p>声明队列、交换机、绑定关系的Bean是什么？</p><ul><li>Queue</li><li>FanoutExchange</li><li>Binding</li></ul><h2 id="3-5-Direct"><a href="#3-5-Direct" class="headerlink" title="3.5.Direct"></a>3.5.Direct</h2><p>在Fanout模式中，一条消息，会被所有订阅的队列都消费。但是，在某些场景下，我们希望不同的消息被不同的队列消费。这时就要用到Direct类型的Exchange。</p><p><img src="/2023/07/20/rabbitmq/image-20210717170041447.png" alt="image-20210717170041447"></p><p> 在Direct模型下：</p><ul><li>队列与交换机的绑定，不能是任意绑定了，而是要指定一个<code>RoutingKey</code>（路由key）</li><li>消息的发送方在 向 Exchange发送消息时，也必须指定消息的 <code>RoutingKey</code>。</li><li>Exchange不再把消息交给每一个绑定的队列，而是根据消息的<code>Routing Key</code>进行判断，只有队列的<code>Routingkey</code>与消息的 <code>Routing key</code>完全一致，才会接收到消息</li></ul><p><strong>案例需求如下</strong>：</p><ol><li><p>利用@RabbitListener声明Exchange、Queue、RoutingKey</p></li><li><p>在consumer服务中，编写两个消费者方法，分别监听direct.queue1和direct.queue2</p></li><li><p>在publisher中编写测试方法，向itcast. direct发送消息</p></li></ol><p><img src="/2023/07/20/rabbitmq/image-20210717170223317.png" alt="image-20210717170223317"></p><h3 id="3-5-1-基于注解声明队列和交换机"><a href="#3-5-1-基于注解声明队列和交换机" class="headerlink" title="3.5.1.基于注解声明队列和交换机"></a>3.5.1.基于注解声明队列和交换机</h3><p>基于@Bean的方式声明队列和交换机比较麻烦，Spring还提供了基于注解方式来声明。</p><p>在consumer的SpringRabbitListener中添加两个消费者，同时基于注解来声明队列和交换机：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RabbitListener(bindings = @QueueBinding(</span></span><br><span class="line"><span class="meta">    value = @Queue(name = "direct.queue1"),</span></span><br><span class="line"><span class="meta">    exchange = @Exchange(name = "itcast.direct", type = ExchangeTypes.DIRECT),</span></span><br><span class="line"><span class="meta">    key = {"red", "blue"}</span></span><br><span class="line"><span class="meta">))</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenDirectQueue1</span><span class="params">(String msg)</span>{</span><br><span class="line">    System.out.println(<span class="string">"消费者接收到direct.queue1的消息：【"</span> + msg + <span class="string">"】"</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@RabbitListener(bindings = @QueueBinding(</span></span><br><span class="line"><span class="meta">    value = @Queue(name = "direct.queue2"),</span></span><br><span class="line"><span class="meta">    exchange = @Exchange(name = "itcast.direct", type = ExchangeTypes.DIRECT),</span></span><br><span class="line"><span class="meta">    key = {"red", "yellow"}</span></span><br><span class="line"><span class="meta">))</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenDirectQueue2</span><span class="params">(String msg)</span>{</span><br><span class="line">    System.out.println(<span class="string">"消费者接收到direct.queue2的消息：【"</span> + msg + <span class="string">"】"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3-5-2-消息发送"><a href="#3-5-2-消息发送" class="headerlink" title="3.5.2.消息发送"></a>3.5.2.消息发送</h3><p>在publisher服务的SpringAmqpTest类中添加测试方法：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSendDirectExchange</span><span class="params">()</span> {</span><br><span class="line">    <span class="comment">// 交换机名称</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">exchangeName</span> <span class="operator">=</span> <span class="string">"itcast.direct"</span>;</span><br><span class="line">    <span class="comment">// 消息</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">"红色警报！日本乱排核废水，导致海洋生物变异，惊现哥斯拉！"</span>;</span><br><span class="line">    <span class="comment">// 发送消息</span></span><br><span class="line">    rabbitTemplate.convertAndSend(exchangeName, <span class="string">"red"</span>, message);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3-5-3-总结"><a href="#3-5-3-总结" class="headerlink" title="3.5.3.总结"></a>3.5.3.总结</h3><p>描述下Direct交换机与Fanout交换机的差异？</p><ul><li>Fanout交换机将消息路由给每一个与之绑定的队列</li><li>Direct交换机根据RoutingKey判断路由给哪个队列</li><li>如果多个队列具有相同的RoutingKey，则与Fanout功能类似</li></ul><p>基于@RabbitListener注解声明队列和交换机有哪些常见注解？</p><ul><li>@Queue</li><li>@Exchange</li></ul><h2 id="3-6-Topic"><a href="#3-6-Topic" class="headerlink" title="3.6.Topic"></a>3.6.Topic</h2><h3 id="3-6-1-说明"><a href="#3-6-1-说明" class="headerlink" title="3.6.1.说明"></a>3.6.1.说明</h3><p><code>Topic</code>类型的<code>Exchange</code>与<code>Direct</code>相比，都是可以根据<code>RoutingKey</code>把消息路由到不同的队列。只不过<code>Topic</code>类型<code>Exchange</code>可以让队列在绑定<code>Routing key</code> 的时候使用通配符！</p><p><code>Routingkey</code> 一般都是有一个或多个单词组成，多个单词之间以”.”分割，例如： <code>item.insert</code></p><p> 通配符规则：</p><p><code>#</code>：匹配一个或多个词</p><p><code>*</code>：匹配不多不少恰好1个词</p><p>举例：</p><p><code>item.#</code>：能够匹配<code>item.spu.insert</code> 或者 <code>item.spu</code></p><p><code>item.*</code>：只能匹配<code>item.spu</code></p><p>​     </p><p>图示：</p><p> <img src="/2023/07/20/rabbitmq/image-20210717170705380.png" alt="image-20210717170705380"></p><p>解释：</p><ul><li>Queue1：绑定的是<code>china.#</code> ，因此凡是以 <code>china.</code>开头的<code>routing key</code> 都会被匹配到。包括china.news和china.weather</li><li>Queue2：绑定的是<code>#.news</code> ，因此凡是以 <code>.news</code>结尾的 <code>routing key</code> 都会被匹配。包括china.news和japan.news</li></ul><p>案例需求：</p><p>实现思路如下：</p><ol><li><p>并利用@RabbitListener声明Exchange、Queue、RoutingKey</p></li><li><p>在consumer服务中，编写两个消费者方法，分别监听topic.queue1和topic.queue2</p></li><li><p>在publisher中编写测试方法，向itcast. topic发送消息</p></li></ol><p><img src="/2023/07/20/rabbitmq/image-20210717170829229.png" alt="image-20210717170829229"></p><h3 id="3-6-2-消息发送"><a href="#3-6-2-消息发送" class="headerlink" title="3.6.2.消息发送"></a>3.6.2.消息发送</h3><p>在publisher服务的SpringAmqpTest类中添加测试方法：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * topicExchange</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSendTopicExchange</span><span class="params">()</span> {</span><br><span class="line">    <span class="comment">// 交换机名称</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">exchangeName</span> <span class="operator">=</span> <span class="string">"itcast.topic"</span>;</span><br><span class="line">    <span class="comment">// 消息</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">message</span> <span class="operator">=</span> <span class="string">"喜报！孙悟空大战哥斯拉，胜!"</span>;</span><br><span class="line">    <span class="comment">// 发送消息</span></span><br><span class="line">    rabbitTemplate.convertAndSend(exchangeName, <span class="string">"china.news"</span>, message);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3-6-3-消息接收"><a href="#3-6-3-消息接收" class="headerlink" title="3.6.3.消息接收"></a>3.6.3.消息接收</h3><p>在consumer服务的SpringRabbitListener中添加方法：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RabbitListener(bindings = @QueueBinding(</span></span><br><span class="line"><span class="meta">    value = @Queue(name = "topic.queue1"),</span></span><br><span class="line"><span class="meta">    exchange = @Exchange(name = "itcast.topic", type = ExchangeTypes.TOPIC),</span></span><br><span class="line"><span class="meta">    key = "china.#"</span></span><br><span class="line"><span class="meta">))</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenTopicQueue1</span><span class="params">(String msg)</span>{</span><br><span class="line">    System.out.println(<span class="string">"消费者接收到topic.queue1的消息：【"</span> + msg + <span class="string">"】"</span>);</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@RabbitListener(bindings = @QueueBinding(</span></span><br><span class="line"><span class="meta">    value = @Queue(name = "topic.queue2"),</span></span><br><span class="line"><span class="meta">    exchange = @Exchange(name = "itcast.topic", type = ExchangeTypes.TOPIC),</span></span><br><span class="line"><span class="meta">    key = "#.news"</span></span><br><span class="line"><span class="meta">))</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenTopicQueue2</span><span class="params">(String msg)</span>{</span><br><span class="line">    System.out.println(<span class="string">"消费者接收到topic.queue2的消息：【"</span> + msg + <span class="string">"】"</span>);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3-6-4-总结"><a href="#3-6-4-总结" class="headerlink" title="3.6.4.总结"></a>3.6.4.总结</h3><p>描述下Direct交换机与Topic交换机的差异？</p><ul><li>Topic交换机接收的消息RoutingKey必须是多个单词，以 <code>**.**</code> 分割</li><li>Topic交换机与队列绑定时的bindingKey可以指定通配符</li><li><code>#</code>：代表0个或多个词</li><li><code>*</code>：代表1个词</li></ul><h2 id="3-7-消息转换器"><a href="#3-7-消息转换器" class="headerlink" title="3.7.消息转换器"></a>3.7.消息转换器</h2><p>之前说过，Spring会把你发送的消息序列化为字节发送给MQ，接收消息的时候，还会把字节反序列化为Java对象。</p><p><img src="/2023/07/20/rabbitmq/image-20200525170410401.png" alt="image-20200525170410401"></p><p>只不过，默认情况下Spring采用的序列化方式是JDK序列化。众所周知，JDK序列化存在下列问题：</p><ul><li>数据体积过大</li><li>有安全漏洞</li><li>可读性差</li></ul><p>我们来测试一下。</p><h3 id="3-7-1-测试默认转换器"><a href="#3-7-1-测试默认转换器" class="headerlink" title="3.7.1.测试默认转换器"></a>3.7.1.测试默认转换器</h3><p>我们修改消息发送的代码，发送一个Map对象：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSendMap</span><span class="params">()</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line">    <span class="comment">// 准备消息</span></span><br><span class="line">    Map&lt;String,Object&gt; msg = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    msg.put(<span class="string">"name"</span>, <span class="string">"Jack"</span>);</span><br><span class="line">    msg.put(<span class="string">"age"</span>, <span class="number">21</span>);</span><br><span class="line">    <span class="comment">// 发送消息</span></span><br><span class="line">    rabbitTemplate.convertAndSend(<span class="string">"simple.queue"</span>,<span class="string">""</span>, msg);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>停止consumer服务</p><p>发送消息后查看控制台：</p><p><img src="/2023/07/20/rabbitmq/image-20210422232835363.png" alt="image-20210422232835363"></p><h3 id="3-7-2-配置JSON转换器"><a href="#3-7-2-配置JSON转换器" class="headerlink" title="3.7.2.配置JSON转换器"></a>3.7.2.配置JSON转换器</h3><p>显然，JDK序列化方式并不合适。我们希望消息体的体积更小、可读性更高，因此可以使用JSON方式来做序列化和反序列化。</p><p>在publisher和consumer两个服务中都引入依赖：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.fasterxml.jackson.dataformat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jackson-dataformat-xml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.9.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>配置消息转换器。</p><p>在启动类中添加一个Bean即可：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="keyword">public</span> MessageConverter <span class="title function_">jsonMessageConverter</span><span class="params">()</span>{</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Jackson2JsonMessageConverter</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;RabbitMQ&quot;&gt;&lt;a href=&quot;#RabbitMQ&quot; class=&quot;headerlink&quot; title=&quot;RabbitMQ&quot;&gt;&lt;/a&gt;RabbitMQ&lt;/h1&gt;</summary>
    
    
    
    <category term="SpringCloud" scheme="https://llzzoomm.github.io/categories/SpringCloud/"/>
    
    
    <category term="SpringCloud" scheme="https://llzzoomm.github.io/tags/SpringCloud/"/>
    
  </entry>
  
  <entry>
    <title>Docker</title>
    <link href="https://llzzoomm.github.io/2023/07/20/docker-shi-yong-pian/"/>
    <id>https://llzzoomm.github.io/2023/07/20/docker-shi-yong-pian/</id>
    <published>2023-07-20T11:31:50.967Z</published>
    <updated>2023-07-20T11:26:50.524Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h1><span id="more"></span><h1 id="1-初识Docker"><a href="#1-初识Docker" class="headerlink" title="1.初识Docker"></a>1.初识Docker</h1><h2 id="1-1-什么是Docker"><a href="#1-1-什么是Docker" class="headerlink" title="1.1.什么是Docker"></a>1.1.什么是Docker</h2><p>微服务虽然具备各种各样的优势，但服务的拆分通用给部署带来了很大的麻烦。</p><ul><li>分布式系统中，依赖的组件非常多，不同组件之间部署时往往会产生一些冲突。</li><li>在数百上千台服务中重复部署，环境不一定一致，会遇到各种问题</li></ul><h3 id="1-1-1-应用部署的环境问题"><a href="#1-1-1-应用部署的环境问题" class="headerlink" title="1.1.1.应用部署的环境问题"></a>1.1.1.应用部署的环境问题</h3><p>大型项目组件较多，运行环境也较为复杂，部署时会碰到一些问题：</p><ul><li><p>依赖关系复杂，容易出现兼容性问题</p></li><li><p>开发、测试、生产环境有差异</p></li></ul><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731141907366.png" alt="image-20210731141907366"></p><p>例如一个项目中，部署时需要依赖于node.js、Redis、RabbitMQ、MySQL等，这些服务部署时所需要的函数库、依赖项各不相同，甚至会有冲突。给部署带来了极大的困难。</p><h3 id="1-1-2-Docker解决依赖兼容问题"><a href="#1-1-2-Docker解决依赖兼容问题" class="headerlink" title="1.1.2.Docker解决依赖兼容问题"></a>1.1.2.Docker解决依赖兼容问题</h3><p>而Docker确巧妙的解决了这些问题，Docker是如何实现的呢？</p><p>Docker为了解决依赖的兼容问题的，采用了两个手段：</p><ul><li><p>将应用的Libs（函数库）、Deps（依赖）、配置与应用一起打包</p></li><li><p>将每个应用放到一个隔离<strong>容器</strong>去运行，避免互相干扰</p></li></ul><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731142219735.png" alt="image-20210731142219735"></p><p>这样打包好的应用包中，既包含应用本身，也保护应用所需要的Libs、Deps，无需再操作系统上安装这些，自然就不存在不同应用之间的兼容问题了。</p><p>虽然解决了不同应用的兼容问题，但是开发、测试等环境会存在差异，操作系统版本也会有差异，怎么解决这些问题呢？</p><h3 id="1-1-3-Docker解决操作系统环境差异"><a href="#1-1-3-Docker解决操作系统环境差异" class="headerlink" title="1.1.3.Docker解决操作系统环境差异"></a>1.1.3.Docker解决操作系统环境差异</h3><p>要解决不同操作系统环境差异问题，必须先了解操作系统结构。以一个Ubuntu操作系统为例，结构如下：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731143401460.png" alt="image-20210731143401460"></p><p>结构包括：</p><ul><li>计算机硬件：例如CPU、内存、磁盘等</li><li>系统内核：所有Linux发行版的内核都是Linux，例如CentOS、Ubuntu、Fedora等。内核可以与计算机硬件交互，对外提供<strong>内核指令</strong>，用于操作计算机硬件。</li><li>系统应用：操作系统本身提供的应用、函数库。这些函数库是对内核指令的封装，使用更加方便。</li></ul><p>应用于计算机交互的流程如下：</p><p>1）应用调用操作系统应用（函数库），实现各种功能</p><p>2）系统函数库是对内核指令集的封装，会调用内核指令</p><p>3）内核指令操作计算机硬件</p><p>Ubuntu和CentOSpringBoot都是基于Linux内核，无非是系统应用不同，提供的函数库有差异：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731144304990.png" alt="image-20210731144304990"></p><p>此时，如果将一个Ubuntu版本的MySQL应用安装到CentOS系统，MySQL在调用Ubuntu函数库时，会发现找不到或者不匹配，就会报错了：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731144458680.png" alt="image-20210731144458680"></p><p>Docker如何解决不同系统环境的问题？</p><ul><li>Docker将用户程序与所需要调用的系统(比如Ubuntu)函数库一起打包</li><li>Docker运行到不同操作系统时，直接基于打包的函数库，借助于操作系统的Linux内核来运行</li></ul><p>如图：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731144820638.png" alt="image-20210731144820638"></p><h3 id="1-1-4-小结"><a href="#1-1-4-小结" class="headerlink" title="1.1.4.小结"></a>1.1.4.小结</h3><p>Docker如何解决大型项目依赖关系复杂，不同组件依赖的兼容性问题？</p><ul><li>Docker允许开发中将应用、依赖、函数库、配置一起<strong>打包</strong>，形成可移植镜像</li><li>Docker应用运行在容器中，使用沙箱机制，相互<strong>隔离</strong></li></ul><p>Docker如何解决开发、测试、生产环境有差异的问题？</p><ul><li>Docker镜像中包含完整运行环境，包括系统函数库，仅依赖系统的Linux内核，因此可以在任意Linux操作系统上运行</li></ul><p>Docker是一个快速交付应用、运行应用的技术，具备下列优势：</p><ul><li>可以将程序及其依赖、运行环境一起打包为一个镜像，可以迁移到任意Linux操作系统</li><li>运行时利用沙箱机制形成隔离容器，各个应用互不干扰</li><li>启动、移除都可以通过一行命令完成，方便快捷</li></ul><h2 id="1-2-Docker和虚拟机的区别"><a href="#1-2-Docker和虚拟机的区别" class="headerlink" title="1.2.Docker和虚拟机的区别"></a>1.2.Docker和虚拟机的区别</h2><p>Docker可以让一个应用在任何操作系统中非常方便的运行。而以前我们接触的虚拟机，也能在一个操作系统中，运行另外一个操作系统，保护系统中的任何应用。</p><p>两者有什么差异呢？</p><p><strong>虚拟机</strong>（virtual machine）是在操作系统中<strong>模拟</strong>硬件设备，然后运行另一个操作系统，比如在 Windows 系统里面运行 Ubuntu 系统，这样就可以运行任意的Ubuntu应用了。</p><p><strong>Docker</strong>仅仅是封装函数库，并没有模拟完整的操作系统，如图：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731145914960.png" alt="image-20210731145914960"></p><p>对比来看：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731152243765.png" alt="image-20210731152243765"></p><p>小结：</p><p>Docker和虚拟机的差异：</p><ul><li><p>docker是一个系统进程；虚拟机是在操作系统中的操作系统</p></li><li><p>docker体积小、启动速度快、性能好；虚拟机体积大、启动速度慢、性能一般</p></li></ul><h2 id="1-3-Docker架构"><a href="#1-3-Docker架构" class="headerlink" title="1.3.Docker架构"></a>1.3.Docker架构</h2><h3 id="1-3-1-镜像和容器"><a href="#1-3-1-镜像和容器" class="headerlink" title="1.3.1.镜像和容器"></a>1.3.1.镜像和容器</h3><p>Docker中有几个重要的概念：</p><p><strong>镜像（Image）</strong>：Docker将应用程序及其所需的依赖、函数库、环境、配置等文件打包在一起，称为镜像。</p><p><strong>容器（Container）</strong>：镜像中的应用程序运行后形成的进程就是<strong>容器</strong>，只是Docker会给容器进程做隔离，对外不可见。</p><p>一切应用最终都是代码组成，都是硬盘中的一个个的字节形成的<strong>文件</strong>。只有运行时，才会加载到内存，形成进程。</p><p>而<strong>镜像</strong>，就是把一个应用在硬盘上的文件、及其运行环境、部分系统函数库文件一起打包形成的文件包。这个文件包是只读的。</p><p><strong>容器</strong>呢，就是将这些文件中编写的程序、函数加载到内存中允许，形成进程，只不过要隔离起来。因此一个镜像可以启动多次，形成多个容器进程。</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731153059464.png" alt="image-20210731153059464"></p><p>例如你下载了一个QQ，如果我们将QQ在磁盘上的运行<strong>文件</strong>及其运行的操作系统依赖打包，形成QQ镜像。然后你可以启动多次，双开、甚至三开QQ，跟多个妹子聊天。</p><h3 id="1-3-2-DockerHub"><a href="#1-3-2-DockerHub" class="headerlink" title="1.3.2.DockerHub"></a>1.3.2.DockerHub</h3><p>开源应用程序非常多，打包这些应用往往是重复的劳动。为了避免这些重复劳动，人们就会将自己打包的应用镜像，例如Redis、MySQL镜像放到网络上，共享使用，就像GitHub的代码共享一样。</p><ul><li><p>DockerHub：DockerHub是一个官方的Docker镜像的托管平台。这样的平台称为Docker Registry。</p></li><li><p>国内也有类似于DockerHub 的公开服务，比如 <a href="https://c.163yun.com/hub">网易云镜像服务</a>、<a href="https://cr.console.aliyun.com/">阿里云镜像库</a>等。</p></li></ul><p>我们一方面可以将自己的镜像共享到DockerHub，另一方面也可以从DockerHub拉取镜像：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731153743354.png" alt="image-20210731153743354"></p><h3 id="1-3-3-Docker架构"><a href="#1-3-3-Docker架构" class="headerlink" title="1.3.3.Docker架构"></a>1.3.3.Docker架构</h3><p>我们要使用Docker来操作镜像、容器，就必须要安装Docker。</p><p>Docker是一个CS架构的程序，由两部分组成：</p><ul><li><p>服务端(server)：Docker守护进程，负责处理Docker指令，管理镜像、容器等</p></li><li><p>客户端(client)：通过命令或RestAPI向Docker服务端发送指令。可以在本地或远程向服务端发送指令。</p></li></ul><p>如图：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731154257653.png" alt="image-20210731154257653"></p><h3 id="1-3-4-小结"><a href="#1-3-4-小结" class="headerlink" title="1.3.4.小结"></a>1.3.4.小结</h3><p>镜像：</p><ul><li>将应用程序及其依赖、环境、配置打包在一起</li></ul><p>容器：</p><ul><li>镜像运行起来就是容器，一个镜像可以运行多个容器</li></ul><p>Docker结构：</p><ul><li><p>服务端：接收命令或远程请求，操作镜像或容器</p></li><li><p>客户端：发送命令或者请求到Docker服务端</p></li></ul><p>DockerHub：</p><ul><li>一个镜像托管的服务器，类似的还有阿里云镜像服务，统称为DockerRegistry</li></ul><h2 id="1-4-安装Docker"><a href="#1-4-安装Docker" class="headerlink" title="1.4.安装Docker"></a>1.4.安装Docker</h2><p>企业部署一般都是采用Linux操作系统，而其中又数CentOS发行版占比最多，因此我们在CentOS下安装Docker。参考课前资料中的文档：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731155002425.png" alt="image-20210731155002425"></p><h1 id="2-Docker的基本操作"><a href="#2-Docker的基本操作" class="headerlink" title="2.Docker的基本操作"></a>2.Docker的基本操作</h1><h2 id="2-1-镜像操作"><a href="#2-1-镜像操作" class="headerlink" title="2.1.镜像操作"></a>2.1.镜像操作</h2><h3 id="2-1-1-镜像名称"><a href="#2-1-1-镜像名称" class="headerlink" title="2.1.1.镜像名称"></a>2.1.1.镜像名称</h3><p>首先来看下镜像的名称组成：</p><ul><li>镜名称一般分两部分组成：[repository]:[tag]。</li><li>在没有指定tag时，默认是latest，代表最新版本的镜像</li></ul><p>如图：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731155141362.png" alt="image-20210731155141362"></p><p>这里的mysql就是repository，5.7就是tag，合一起就是镜像名称，代表5.7版本的MySQL镜像。</p><h3 id="2-1-2-镜像命令"><a href="#2-1-2-镜像命令" class="headerlink" title="2.1.2.镜像命令"></a>2.1.2.镜像命令</h3><p>常见的镜像操作命令如图：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731155649535.png" alt="image-20210731155649535"></p><h3 id="2-1-3-案例1-拉取、查看镜像"><a href="#2-1-3-案例1-拉取、查看镜像" class="headerlink" title="2.1.3.案例1-拉取、查看镜像"></a>2.1.3.案例1-拉取、查看镜像</h3><p>需求：从DockerHub中拉取一个nginx镜像并查看</p><p>1）首先去镜像仓库搜索nginx镜像，比如<a href="https://hub.docker.com/">DockerHub</a>:</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731155844368.png" alt="image-20210731155844368"></p><p>2）根据查看到的镜像名称，拉取自己需要的镜像，通过命令：docker pull nginx</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731155856199.png" alt="image-20210731155856199"></p><p>3）通过命令：docker images 查看拉取到的镜像</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731155903037.png" alt="image-20210731155903037"></p><h3 id="2-1-4-案例2-保存、导入镜像"><a href="#2-1-4-案例2-保存、导入镜像" class="headerlink" title="2.1.4.案例2-保存、导入镜像"></a>2.1.4.案例2-保存、导入镜像</h3><p>需求：利用docker save将nginx镜像导出磁盘，然后再通过load加载回来</p><p>1）利用docker xx –help命令查看docker save和docker load的语法</p><p>例如，查看save命令用法，可以输入命令：</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker save --<span class="built_in">help</span></span><br></pre></td></tr></tbody></table></figure><p>结果：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731161104732.png" alt="image-20210731161104732"></p><p>命令格式：</p><figure class="highlight shell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker save -o [保存的目标文件名称] [镜像名称]</span><br></pre></td></tr></tbody></table></figure><p>2）使用docker save导出镜像到磁盘 </p><p>运行命令：</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker save -o nginx.tar nginx:latest</span><br></pre></td></tr></tbody></table></figure><p>结果如图：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731161354344.png" alt="image-20210731161354344"></p><p>3）使用docker load加载镜像</p><p>先删除本地的nginx镜像：</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi nginx:latest</span><br></pre></td></tr></tbody></table></figure><p>然后运行命令，加载本地文件：</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker load -i nginx.tar</span><br></pre></td></tr></tbody></table></figure><p>结果：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731161746245.png" alt="image-20210731161746245"></p><h3 id="2-1-5-练习"><a href="#2-1-5-练习" class="headerlink" title="2.1.5.练习"></a>2.1.5.练习</h3><p>需求：去DockerHub搜索并拉取一个Redis镜像</p><p>目标：</p><p>1）去DockerHub搜索Redis镜像</p><p>2）查看Redis镜像的名称和版本</p><p>3）利用docker pull命令拉取镜像</p><p>4）利用docker save命令将 redis:latest打包为一个redis.tar包</p><p>5）利用docker rmi 删除本地的redis:latest</p><p>6）利用docker load 重新加载 redis.tar文件</p><h2 id="2-2-容器操作"><a href="#2-2-容器操作" class="headerlink" title="2.2.容器操作"></a>2.2.容器操作</h2><h3 id="2-2-1-容器相关命令"><a href="#2-2-1-容器相关命令" class="headerlink" title="2.2.1.容器相关命令"></a>2.2.1.容器相关命令</h3><p>容器操作的命令如图：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731161950495.png" alt="image-20210731161950495"></p><p>容器保护三个状态：</p><ul><li>运行：进程正常运行</li><li>暂停：进程暂停，CPU不再运行，并不释放内存</li><li>停止：进程终止，回收进程占用的内存、CPU等资源</li></ul><p>其中：</p><ul><li><p>docker run：创建并运行一个容器，处于运行状态</p></li><li><p>docker pause：让一个运行的容器暂停</p></li><li><p>docker unpause：让一个容器从暂停状态恢复运行</p></li><li><p>docker stop：停止一个运行的容器</p></li><li><p>docker start：让一个停止的容器再次运行</p></li><li><p>docker rm：删除一个容器</p></li></ul><h3 id="2-2-2-案例-创建并运行一个容器"><a href="#2-2-2-案例-创建并运行一个容器" class="headerlink" title="2.2.2.案例-创建并运行一个容器"></a>2.2.2.案例-创建并运行一个容器</h3><p>创建并运行nginx容器的命令：</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name containerName -p 80:80 -d nginx</span><br></pre></td></tr></tbody></table></figure><p>命令解读：</p><ul><li>docker run ：创建并运行一个容器</li><li>–name : 给容器起一个名字，比如叫做mn</li><li>-p ：将宿主机端口与容器端口映射，冒号左侧是宿主机端口，右侧是容器端口</li><li>-d：后台运行容器</li><li>nginx：镜像名称，例如nginx</li></ul><p>这里的<code>-p</code>参数，是将容器端口映射到宿主机端口。</p><p>默认情况下，容器是隔离环境，我们直接访问宿主机的80端口，肯定访问不到容器中的nginx。</p><p>现在，将容器的80与宿主机的80关联起来，当我们访问宿主机的80端口时，就会被映射到容器的80，这样就能访问到nginx了：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731163255863.png" alt="image-20210731163255863"></p><h3 id="2-2-3-案例-进入容器，修改文件"><a href="#2-2-3-案例-进入容器，修改文件" class="headerlink" title="2.2.3.案例-进入容器，修改文件"></a>2.2.3.案例-进入容器，修改文件</h3><p><strong>需求</strong>：进入Nginx容器，修改HTML文件内容，添加“传智教育欢迎您”</p><p><strong>提示</strong>：进入容器要用到docker exec命令。</p><p><strong>步骤</strong>：</p><p>1）进入容器。进入我们刚刚创建的nginx容器的命令为：</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it mn bash</span><br></pre></td></tr></tbody></table></figure><p>命令解读：</p><ul><li><p>docker exec ：进入容器内部，执行一个命令</p></li><li><p>-it : 给当前进入的容器创建一个标准输入、输出终端，允许我们与容器交互</p></li><li><p>mn ：要进入的容器的名称</p></li><li><p>bash：进入容器后执行的命令，bash是一个linux终端交互命令</p></li></ul><p>2）进入nginx的HTML所在目录 /usr/share/nginx/html</p><p>容器内部会模拟一个独立的Linux文件系统，看起来如同一个linux服务器一样：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731164159811.png" alt="image-20210731164159811"></p><p>nginx的环境、配置、运行文件全部都在这个文件系统中，包括我们要修改的html文件。</p><p>查看DockerHub网站中的nginx页面，可以知道nginx的html目录位置在<code>/usr/share/nginx/html</code></p><p>我们执行命令，进入该目录：</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/share/nginx/html</span><br></pre></td></tr></tbody></table></figure><p> 查看目录下文件：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731164455818.png" alt="image-20210731164455818"></p><p>3）修改index.html的内容</p><p>容器内没有vi命令，无法直接修改，我们用下面的命令来修改：</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i -e <span class="string">'s#Welcome to nginx#传智教育欢迎您#g'</span> -e <span class="string">'s#&lt;head&gt;#&lt;head&gt;&lt;meta charset="utf-8"&gt;#g'</span> index.html</span><br></pre></td></tr></tbody></table></figure><p>在浏览器访问自己的虚拟机地址，例如我的是：<a href="http://192.168.150.101，即可看到结果：">http://192.168.150.101，即可看到结果：</a></p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731164717604.png" alt="image-20210731164717604"></p><h3 id="2-2-4-小结"><a href="#2-2-4-小结" class="headerlink" title="2.2.4.小结"></a>2.2.4.小结</h3><p>docker run命令的常见参数有哪些？</p><ul><li>–name：指定容器名称</li><li>-p：指定端口映射</li><li>-d：让容器后台运行</li></ul><p>查看容器日志的命令：</p><ul><li>docker logs</li><li>添加 -f 参数可以持续查看日志</li></ul><p>查看容器状态：</p><ul><li>docker ps</li><li>docker ps -a 查看所有容器，包括已经停止的</li></ul><h2 id="2-3-数据卷（容器数据管理）"><a href="#2-3-数据卷（容器数据管理）" class="headerlink" title="2.3.数据卷（容器数据管理）"></a>2.3.数据卷（容器数据管理）</h2><p>在之前的nginx案例中，修改nginx的html页面时，需要进入nginx内部。并且因为没有编辑器，修改文件也很麻烦。</p><p>这就是因为容器与数据（容器内文件）耦合带来的后果。</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731172440275.png" alt="image-20210731172440275"></p><p>要解决这个问题，必须将数据与容器解耦，这就要用到数据卷了。</p><h3 id="2-3-1-什么是数据卷"><a href="#2-3-1-什么是数据卷" class="headerlink" title="2.3.1.什么是数据卷"></a>2.3.1.什么是数据卷</h3><p><strong>数据卷（volume）</strong>是一个虚拟目录，指向宿主机文件系统中的某个目录。</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731173541846.png" alt="image-20210731173541846"></p><p>一旦完成数据卷挂载，对容器的一切操作都会作用在数据卷对应的宿主机目录了。</p><p>这样，我们操作宿主机的/var/lib/docker/volumes/html目录，就等于操作容器内的/usr/share/nginx/html目录了</p><h3 id="2-3-2-数据集操作命令"><a href="#2-3-2-数据集操作命令" class="headerlink" title="2.3.2.数据集操作命令"></a>2.3.2.数据集操作命令</h3><p>数据卷操作的基本语法如下：</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume [COMMAND]</span><br></pre></td></tr></tbody></table></figure><p>docker volume命令是数据卷操作，根据命令后跟随的command来确定下一步的操作：</p><ul><li>create 创建一个volume</li><li>inspect 显示一个或多个volume的信息</li><li>ls 列出所有的volume</li><li>prune 删除未使用的volume</li><li>rm 删除一个或多个指定的volume</li></ul><h3 id="2-3-3-创建和查看数据卷"><a href="#2-3-3-创建和查看数据卷" class="headerlink" title="2.3.3.创建和查看数据卷"></a>2.3.3.创建和查看数据卷</h3><p><strong>需求</strong>：创建一个数据卷，并查看数据卷在宿主机的目录位置</p><p>① 创建数据卷</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume create html</span><br></pre></td></tr></tbody></table></figure><p>② 查看所有数据</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume <span class="built_in">ls</span></span><br></pre></td></tr></tbody></table></figure><p>结果：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731173746910.png" alt="image-20210731173746910"></p><p>③ 查看数据卷详细信息卷</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker volume inspect html</span><br></pre></td></tr></tbody></table></figure><p>结果：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731173809877.png" alt="image-20210731173809877"></p><p>可以看到，我们创建的html这个数据卷关联的宿主机目录为<code>/var/lib/docker/volumes/html/_data</code>目录。</p><p><strong>小结</strong>：</p><p>数据卷的作用：</p><ul><li>将容器与数据分离，解耦合，方便操作容器内数据，保证数据安全</li></ul><p>数据卷操作：</p><ul><li>docker volume create：创建数据卷</li><li>docker volume ls：查看所有数据卷</li><li>docker volume inspect：查看数据卷详细信息，包括关联的宿主机目录位置</li><li>docker volume rm：删除指定数据卷</li><li>docker volume prune：删除所有未使用的数据卷</li></ul><h3 id="2-3-4-挂载数据卷"><a href="#2-3-4-挂载数据卷" class="headerlink" title="2.3.4.挂载数据卷"></a>2.3.4.挂载数据卷</h3><p>我们在创建容器时，可以通过 -v 参数来挂载一个数据卷到某个容器内目录，命令格式如下：</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker run \</span><br><span class="line">  --name mn \</span><br><span class="line">  -v html:/root/html \</span><br><span class="line">  -p 8080:80</span><br><span class="line">  nginx \</span><br></pre></td></tr></tbody></table></figure><p>这里的-v就是挂载数据卷的命令：</p><ul><li><code>-v html:/root/htm</code> ：把html数据卷挂载到容器内的/root/html这个目录中</li></ul><h3 id="2-3-5-案例-给nginx挂载数据卷"><a href="#2-3-5-案例-给nginx挂载数据卷" class="headerlink" title="2.3.5.案例-给nginx挂载数据卷"></a>2.3.5.案例-给nginx挂载数据卷</h3><p><strong>需求</strong>：创建一个nginx容器，修改容器内的html目录内的index.html内容</p><p><strong>分析</strong>：上个案例中，我们进入nginx容器内部，已经知道nginx的html目录所在位置/usr/share/nginx/html ，我们需要把这个目录挂载到html这个数据卷上，方便操作其中的内容。</p><p><strong>提示</strong>：运行容器时使用 -v 参数挂载数据卷</p><p>步骤：</p><p>① 创建容器并挂载数据卷到容器内的HTML目录</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name mn -v html:/usr/share/nginx/html -p 80:80 -d nginx</span><br></pre></td></tr></tbody></table></figure><p>② 进入html数据卷所在位置，并修改HTML内容</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看html数据卷的位置</span></span><br><span class="line">docker volume inspect html</span><br><span class="line"><span class="comment"># 进入该目录</span></span><br><span class="line"><span class="built_in">cd</span> /var/lib/docker/volumes/html/_data</span><br><span class="line"><span class="comment"># 修改文件</span></span><br><span class="line">vi index.html</span><br></pre></td></tr></tbody></table></figure><h3 id="2-3-6-案例-给MySQL挂载本地目录"><a href="#2-3-6-案例-给MySQL挂载本地目录" class="headerlink" title="2.3.6.案例-给MySQL挂载本地目录"></a>2.3.6.案例-给MySQL挂载本地目录</h3><p>容器不仅仅可以挂载数据卷，也可以直接挂载到宿主机目录上。关联关系如下：</p><ul><li>带数据卷模式：宿主机目录 –&gt; 数据卷 —&gt; 容器内目录</li><li>直接挂载模式：宿主机目录 —&gt; 容器内目录</li></ul><p>如图：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731175155453.png" alt="image-20210731175155453"></p><p><strong>语法</strong>：</p><p>目录挂载与数据卷挂载的语法是类似的：</p><ul><li>-v [宿主机目录]:[容器内目录]</li><li>-v [宿主机文件]:[容器内文件]</li></ul><p><strong>需求</strong>：创建并运行一个MySQL容器，将宿主机目录直接挂载到容器</p><p>实现思路如下：</p><p>1）在将课前资料中的mysql.tar文件上传到虚拟机，通过load命令加载为镜像</p><p>2）创建目录/tmp/mysql/data</p><p>3）创建目录/tmp/mysql/conf，将课前资料提供的hmy.cnf文件上传到/tmp/mysql/conf</p><p>4）去DockerHub查阅资料，创建并运行MySQL容器，要求：</p><p>① 挂载/tmp/mysql/data到mysql容器内数据存储目录</p><p>② 挂载/tmp/mysql/conf/hmy.cnf到mysql容器的配置文件</p><p>③ 设置MySQL密码</p><h3 id="2-3-7-小结"><a href="#2-3-7-小结" class="headerlink" title="2.3.7.小结"></a>2.3.7.小结</h3><p>docker run的命令中通过 -v 参数挂载文件或目录到容器中：</p><ul><li>-v volume名称:容器内目录</li><li>-v 宿主机文件:容器内文</li><li>-v 宿主机目录:容器内目录</li></ul><p>数据卷挂载与目录直接挂载的</p><ul><li>数据卷挂载耦合度低，由docker来管理目录，但是目录较深，不好找</li><li>目录挂载耦合度高，需要我们自己管理目录，不过目录容易寻找查看</li></ul><h1 id="3-Dockerfile自定义镜像"><a href="#3-Dockerfile自定义镜像" class="headerlink" title="3.Dockerfile自定义镜像"></a>3.Dockerfile自定义镜像</h1><p>常见的镜像在DockerHub就能找到，但是我们自己写的项目就必须自己构建镜像了。</p><p>而要自定义镜像，就必须先了解镜像的结构才行。</p><h2 id="3-1-镜像结构"><a href="#3-1-镜像结构" class="headerlink" title="3.1.镜像结构"></a>3.1.镜像结构</h2><p>镜像是将应用程序及其需要的系统函数库、环境、配置、依赖打包而成。</p><p>我们以MySQL为例，来看看镜像的组成结构：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731175806273.png" alt="image-20210731175806273"></p><p>简单来说，镜像就是在系统函数库、运行环境基础上，添加应用程序文件、配置文件、依赖文件等组合，然后编写好启动脚本打包在一起形成的文件。</p><p>我们要构建镜像，其实就是实现上述打包的过程。</p><h2 id="3-2-Dockerfile语法"><a href="#3-2-Dockerfile语法" class="headerlink" title="3.2.Dockerfile语法"></a>3.2.Dockerfile语法</h2><p>构建自定义的镜像时，并不需要一个个文件去拷贝，打包。</p><p>我们只需要告诉Docker，我们的镜像的组成，需要哪些BaseImage、需要拷贝什么文件、需要安装什么依赖、启动脚本是什么，将来Docker会帮助我们构建镜像。</p><p>而描述上述信息的文件就是Dockerfile文件。</p><p><strong>Dockerfile</strong>就是一个文本文件，其中包含一个个的**指令(Instruction)**，用指令来说明要执行什么操作来构建镜像。每一个指令都会形成一层Layer。</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731180321133.png" alt="image-20210731180321133"></p><p>更新详细语法说明，请参考官网文档： <a href="https://docs.docker.com/engine/reference/builder">https://docs.docker.com/engine/reference/builder</a></p><h2 id="3-3-构建Java项目"><a href="#3-3-构建Java项目" class="headerlink" title="3.3.构建Java项目"></a>3.3.构建Java项目</h2><h3 id="3-3-1-基于Ubuntu构建Java项目"><a href="#3-3-1-基于Ubuntu构建Java项目" class="headerlink" title="3.3.1.基于Ubuntu构建Java项目"></a>3.3.1.基于Ubuntu构建Java项目</h3><p>需求：基于Ubuntu镜像构建一个新镜像，运行一个java项目</p><ul><li><p>步骤1：新建一个空文件夹docker-demo</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210801101207444.png" alt="image-20210801101207444"></p></li><li><p>步骤2：拷贝课前资料中的docker-demo.jar文件到docker-demo这个目录</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210801101314816.png" alt="image-20210801101314816"></p></li><li><p>步骤3：拷贝课前资料中的jdk8.tar.gz文件到docker-demo这个目录</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210801101410200.png" alt="image-20210801101410200"></p></li><li><p>步骤4：拷贝课前资料提供的Dockerfile到docker-demo这个目录</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210801101455590.png" alt="image-20210801101455590"></p><p>其中的内容如下：</p><figure class="highlight dockerfile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定基础镜像</span></span><br><span class="line"><span class="keyword">FROM</span> ubuntu:<span class="number">16.04</span></span><br><span class="line"><span class="comment"># 配置环境变量，JDK的安装目录</span></span><br><span class="line"><span class="keyword">ENV</span> JAVA_DIR=/usr/local</span><br><span class="line"></span><br><span class="line"><span class="comment"># 拷贝jdk和java项目的包</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ./jdk8.tar.gz <span class="variable">$JAVA_DIR</span>/</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ./docker-demo.jar /tmp/app.jar</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装JDK</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">cd</span> <span class="variable">$JAVA_DIR</span> \</span></span><br><span class="line"><span class="language-bash"> &amp;&amp; tar -xf ./jdk8.tar.gz \</span></span><br><span class="line"><span class="language-bash"> &amp;&amp; <span class="built_in">mv</span> ./jdk1.8.0_144 ./java8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 配置环境变量</span></span><br><span class="line"><span class="keyword">ENV</span> JAVA_HOME=$JAVA_DIR/java8</span><br><span class="line"><span class="keyword">ENV</span> PATH=$PATH:$JAVA_HOME/bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 暴露端口</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8090</span></span><br><span class="line"><span class="comment"># 入口，java项目的启动命令</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> java -jar /tmp/app.jar</span></span><br></pre></td></tr></tbody></table></figure></li><li><p>步骤5：进入docker-demo</p><p>将准备好的docker-demo上传到虚拟机任意目录，然后进入docker-demo目录下</p></li><li><p>步骤6：运行命令：</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -t javaweb:1.0 .</span><br></pre></td></tr></tbody></table></figure></li></ul><p>最后访问 <a href="http://192.168.150.101:8090/hello/count%EF%BC%8C%E5%85%B6%E4%B8%AD%E7%9A%84ip%E6%94%B9%E6%88%90%E4%BD%A0%E7%9A%84%E8%99%9A%E6%8B%9F%E6%9C%BAip">http://192.168.150.101:8090/hello/count，其中的ip改成你的虚拟机ip</a></p><h3 id="3-3-2-基于java8构建Java项目"><a href="#3-3-2-基于java8构建Java项目" class="headerlink" title="3.3.2.基于java8构建Java项目"></a>3.3.2.基于java8构建Java项目</h3><p>虽然我们可以基于Ubuntu基础镜像，添加任意自己需要的安装包，构建镜像，但是却比较麻烦。所以大多数情况下，我们都可以在一些安装了部分软件的基础镜像上做改造。</p><p>例如，构建java项目的镜像，可以在已经准备了JDK的基础镜像基础上构建。</p><p>需求：基于java:8-alpine镜像，将一个Java项目构建为镜像</p><p>实现思路如下：</p><ul><li><p>① 新建一个空的目录，然后在目录中新建一个文件，命名为Dockerfile</p></li><li><p>② 拷贝课前资料提供的docker-demo.jar到这个目录中</p></li><li><p>③ 编写Dockerfile文件：</p><ul><li><p>a ）基于java:8-alpine作为基础镜像</p></li><li><p>b ）将app.jar拷贝到镜像中</p></li><li><p>c ）暴露端口</p></li><li><p>d ）编写入口ENTRYPOINT</p><p>内容如下：</p><figure class="highlight dockerfile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> java:<span class="number">8</span>-alpine</span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ./app.jar /tmp/app.jar</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8090</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> java -jar /tmp/app.jar</span></span><br></pre></td></tr></tbody></table></figure></li></ul></li><li><p>④ 使用docker build命令构建镜像</p></li><li><p>⑤ 使用docker run创建容器并运行</p></li></ul><h2 id="3-4-小结"><a href="#3-4-小结" class="headerlink" title="3.4.小结"></a>3.4.小结</h2><p>小结：</p><ol><li><p>Dockerfile的本质是一个文件，通过指令描述镜像的构建过程</p></li><li><p>Dockerfile的第一行必须是FROM，从一个基础镜像来构建</p></li><li><p>基础镜像可以是基本操作系统，如Ubuntu。也可以是其他人制作好的镜像，例如：java:8-alpine</p></li></ol><h1 id="4-Docker-Compose"><a href="#4-Docker-Compose" class="headerlink" title="4.Docker-Compose"></a>4.Docker-Compose</h1><p>Docker Compose可以基于Compose文件帮我们快速的部署分布式应用，而无需手动一个个创建和运行容器！</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731180921742.png" alt="image-20210731180921742"></p><h2 id="4-1-初识DockerCompose"><a href="#4-1-初识DockerCompose" class="headerlink" title="4.1.初识DockerCompose"></a>4.1.初识DockerCompose</h2><p>Compose文件是一个文本文件，通过指令定义集群中的每个容器如何运行。格式如下：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">version<span class="punctuation">:</span>&nbsp;<span class="string">"3.8"</span></span><br><span class="line"> services<span class="punctuation">:</span></span><br><span class="line">&nbsp;&nbsp;mysql<span class="punctuation">:</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;image<span class="punctuation">:</span>&nbsp;mysql<span class="punctuation">:</span><span class="number">5.7</span><span class="number">.25</span></span><br><span class="line">    environment<span class="punctuation">:</span></span><br><span class="line">     MYSQL_ROOT_PASSWORD<span class="punctuation">:</span> <span class="number">123</span> </span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;volumes<span class="punctuation">:</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="string">"/tmp/mysql/data:/var/lib/mysql"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="string">"/tmp/mysql/conf/hmy.cnf:/etc/mysql/conf.d/hmy.cnf"</span></span><br><span class="line">&nbsp;&nbsp;web<span class="punctuation">:</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;build<span class="punctuation">:</span>&nbsp;.</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;ports<span class="punctuation">:</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="string">"8090:8090"</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p>上面的Compose文件就描述一个项目，其中包含两个容器：</p><ul><li>mysql：一个基于<code>mysql:5.7.25</code>镜像构建的容器，并且挂载了两个目录</li><li>web：一个基于<code>docker build</code>临时构建的镜像容器，映射端口时8090</li></ul><p>DockerCompose的详细语法参考官网：<a href="https://docs.docker.com/compose/compose-file/">https://docs.docker.com/compose/compose-file/</a></p><p>其实DockerCompose文件可以看做是将多个docker run命令写到一个文件，只是语法稍有差异。</p><h2 id="4-2-安装DockerCompose"><a href="#4-2-安装DockerCompose" class="headerlink" title="4.2.安装DockerCompose"></a>4.2.安装DockerCompose</h2><p>参考课前资料</p><h2 id="4-3-部署微服务集群"><a href="#4-3-部署微服务集群" class="headerlink" title="4.3.部署微服务集群"></a>4.3.部署微服务集群</h2><p><strong>需求</strong>：将之前学习的cloud-demo微服务集群利用DockerCompose部署</p><p><strong>实现思路</strong>：</p><p>① 查看课前资料提供的cloud-demo文件夹，里面已经编写好了docker-compose文件</p><p>② 修改自己的cloud-demo项目，将数据库、nacos地址都命名为docker-compose中的服务名</p><p>③ 使用maven打包工具，将项目中的每个微服务都打包为app.jar</p><p>④ 将打包好的app.jar拷贝到cloud-demo中的每一个对应的子目录中</p><p>⑤ 将cloud-demo上传至虚拟机，利用 docker-compose up -d 来部署</p><h3 id="4-3-1-compose文件"><a href="#4-3-1-compose文件" class="headerlink" title="4.3.1.compose文件"></a>4.3.1.compose文件</h3><p>查看课前资料提供的cloud-demo文件夹，里面已经编写好了docker-compose文件，而且每个微服务都准备了一个独立的目录：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210731181341330.png" alt="image-20210731181341330"></p><p>内容如下：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3.2"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">nacos:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">nacos/nacos-server</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MODE:</span> <span class="string">standalone</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">"8848:8848"</span></span><br><span class="line">  <span class="attr">mysql:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">mysql:5.7.25</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">      <span class="attr">MYSQL_ROOT_PASSWORD:</span> <span class="number">123</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">"$PWD/mysql/data:/var/lib/mysql"</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">"$PWD/mysql/conf:/etc/mysql/conf.d/"</span></span><br><span class="line">  <span class="attr">userservice:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">./user-service</span></span><br><span class="line">  <span class="attr">orderservice:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">./order-service</span></span><br><span class="line">  <span class="attr">gateway:</span></span><br><span class="line">    <span class="attr">build:</span> <span class="string">./gateway</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">"10010:10010"</span></span><br></pre></td></tr></tbody></table></figure><p>可以看到，其中包含5个service服务：</p><ul><li><code>nacos</code>：作为注册中心和配置中心<ul><li><code>image: nacos/nacos-server</code>： 基于nacos/nacos-server镜像构建</li><li><code>environment</code>：环境变量<ul><li><code>MODE: standalone</code>：单点模式启动</li></ul></li><li><code>ports</code>：端口映射，这里暴露了8848端口</li></ul></li><li><code>mysql</code>：数据库<ul><li><code>image: mysql:5.7.25</code>：镜像版本是mysql:5.7.25</li><li><code>environment</code>：环境变量<ul><li><code>MYSQL_ROOT_PASSWORD: 123</code>：设置数据库root账户的密码为123</li></ul></li><li><code>volumes</code>：数据卷挂载，这里挂载了mysql的data、conf目录，其中有我提前准备好的数据</li></ul></li><li><code>userservice</code>、<code>orderservice</code>、<code>gateway</code>：都是基于Dockerfile临时构建的</li></ul><p>查看mysql目录，可以看到其中已经准备好了cloud_order、cloud_user表：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210801095205034.png" alt="image-20210801095205034"></p><p>查看微服务目录，可以看到都包含Dockerfile文件：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210801095320586.png" alt="image-20210801095320586"></p><p>内容如下：</p><figure class="highlight dockerfile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> java:<span class="number">8</span>-alpine</span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> ./app.jar /tmp/app.jar</span></span><br><span class="line"><span class="keyword">ENTRYPOINT</span><span class="language-bash"> java -jar /tmp/app.jar</span></span><br></pre></td></tr></tbody></table></figure><h3 id="4-3-2-修改微服务配置"><a href="#4-3-2-修改微服务配置" class="headerlink" title="4.3.2.修改微服务配置"></a>4.3.2.修改微服务配置</h3><p>因为微服务将来要部署为docker容器，而容器之间互联不是通过IP地址，而是通过容器名。这里我们将order-service、user-service、gateway服务的mysql、nacos地址都修改为基于容器名的访问。</p><p>如下所示：</p><figure class="highlight yaml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://mysql:3306/cloud_order?useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">orderservice</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">nacos:</span></span><br><span class="line">      <span class="attr">server-addr:</span> <span class="string">nacos:8848</span> <span class="comment"># nacos服务地址</span></span><br></pre></td></tr></tbody></table></figure><h3 id="4-3-3-打包"><a href="#4-3-3-打包" class="headerlink" title="4.3.3.打包"></a>4.3.3.打包</h3><p>接下来需要将我们的每个微服务都打包。因为之前查看到Dockerfile中的jar包名称都是app.jar，因此我们的每个微服务都需要用这个名称。</p><p>可以通过修改pom.xml中的打包名称来实现，每个微服务都需要修改：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 服务打包的最终名称 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">finalName</span>&gt;</span>app<span class="tag">&lt;/<span class="name">finalName</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>打包后：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210801095951030.png" alt="image-20210801095951030"></p><h3 id="4-3-4-拷贝jar包到部署目录"><a href="#4-3-4-拷贝jar包到部署目录" class="headerlink" title="4.3.4.拷贝jar包到部署目录"></a>4.3.4.拷贝jar包到部署目录</h3><p>编译打包好的app.jar文件，需要放到Dockerfile的同级目录中。注意：每个微服务的app.jar放到与服务名称对应的目录，别搞错了。</p><p>user-service：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210801100201253.png" alt="image-20210801100201253"></p><p>order-service：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210801100231495.png" alt="image-20210801100231495"></p><p>gateway：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210801100308102.png" alt="image-20210801100308102"></p><h3 id="4-3-5-部署"><a href="#4-3-5-部署" class="headerlink" title="4.3.5.部署"></a>4.3.5.部署</h3><p>最后，我们需要将文件整个cloud-demo文件夹上传到虚拟机中，理由DockerCompose部署。</p><p>上传到任意目录：</p><p><img src="/2023/07/20/docker-shi-yong-pian/image-20210801100955653.png" alt="image-20210801100955653"></p><p>部署：</p><p>进入cloud-demo目录，然后运行下面的命令：</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose up -d</span><br></pre></td></tr></tbody></table></figure><h1 id="5-Docker镜像仓库"><a href="#5-Docker镜像仓库" class="headerlink" title="5.Docker镜像仓库"></a>5.Docker镜像仓库</h1><h2 id="5-1-搭建私有镜像仓库"><a href="#5-1-搭建私有镜像仓库" class="headerlink" title="5.1.搭建私有镜像仓库"></a>5.1.搭建私有镜像仓库</h2><p>参考课前资料《CentOS7安装Docker.md》</p><h2 id="5-2-推送、拉取镜像"><a href="#5-2-推送、拉取镜像" class="headerlink" title="5.2.推送、拉取镜像"></a>5.2.推送、拉取镜像</h2><p>推送镜像到私有镜像服务必须先tag，步骤如下：</p><p>① 重新tag本地镜像，名称前缀为私有仓库的地址：192.168.150.101:8080/</p> <figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag nginx:latest 192.168.150.101:8080/nginx:1.0 </span><br></pre></td></tr></tbody></table></figure><p>② 推送镜像</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push 192.168.150.101:8080/nginx:1.0 </span><br></pre></td></tr></tbody></table></figure><p>③ 拉取镜像</p><figure class="highlight sh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull 192.168.150.101:8080/nginx:1.0 </span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;Docker&quot;&gt;&lt;a href=&quot;#Docker&quot; class=&quot;headerlink&quot; title=&quot;Docker&quot;&gt;&lt;/a&gt;Docker&lt;/h1&gt;</summary>
    
    
    
    <category term="SpringCloud" scheme="https://llzzoomm.github.io/categories/SpringCloud/"/>
    
    
    <category term="SpringCloud" scheme="https://llzzoomm.github.io/tags/SpringCloud/"/>
    
  </entry>
  
  <entry>
    <title>分布式搜索引擎03</title>
    <link href="https://llzzoomm.github.io/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/"/>
    <id>https://llzzoomm.github.io/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/</id>
    <published>2023-07-20T11:31:50.497Z</published>
    <updated>2023-07-20T11:31:30.329Z</updated>
    
    <content type="html"><![CDATA[<h1 id="分布式搜索引擎03"><a href="#分布式搜索引擎03" class="headerlink" title="分布式搜索引擎03"></a>分布式搜索引擎03</h1><span id="more"></span><h1 id=""><a href="#" class="headerlink" title=""></a></h1><h1 id="1-数据聚合"><a href="#1-数据聚合" class="headerlink" title="1.数据聚合"></a>1.数据聚合</h1><p>**<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations.html">聚合（</a><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations.html">aggregations</a><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations.html">）</a>**可以让我们极其方便的实现对数据的统计、分析、运算。例如：</p><ul><li>什么品牌的手机最受欢迎？</li><li>这些手机的平均价格、最高价格、最低价格？</li><li>这些手机每月的销售情况如何？</li></ul><p>实现这些统计功能的比数据库的sql要方便的多，而且查询速度非常快，可以实现近实时搜索效果。</p><h2 id="1-1-聚合的种类"><a href="#1-1-聚合的种类" class="headerlink" title="1.1.聚合的种类"></a>1.1.聚合的种类</h2><p>聚合常见的有三类：</p><ul><li><p><strong>桶（Bucket）</strong>聚合：用来对文档做分组</p><ul><li>TermAggregation：按照文档字段值分组，例如按照品牌值分组、按照国家分组</li><li>Date Histogram：按照日期阶梯分组，例如一周为一组，或者一月为一组</li></ul></li><li><p><strong>度量（Metric）</strong>聚合：用以计算一些值，比如：最大值、最小值、平均值等</p><ul><li>Avg：求平均值</li><li>Max：求最大值</li><li>Min：求最小值</li><li>Stats：同时求max、min、avg、sum等</li></ul></li><li><p><strong>管道（pipeline）</strong>聚合：其它聚合的结果为基础做聚合</p></li></ul><blockquote><p><strong>注意：</strong>参加聚合的字段必须是keyword、日期、数值、布尔类型</p></blockquote><h2 id="1-2-DSL实现聚合"><a href="#1-2-DSL实现聚合" class="headerlink" title="1.2.DSL实现聚合"></a>1.2.DSL实现聚合</h2><p>现在，我们要统计所有数据中的酒店品牌有几种，其实就是按照品牌对数据分组。此时可以根据酒店品牌的名称做聚合，也就是Bucket聚合。</p><h3 id="1-2-1-Bucket聚合语法"><a href="#1-2-1-Bucket聚合语法" class="headerlink" title="1.2.1.Bucket聚合语法"></a>1.2.1.Bucket聚合语法</h3><p>语法如下：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">GET&nbsp;/hotel/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"size"</span><span class="punctuation">:</span>&nbsp;<span class="number">0</span><span class="punctuation">,</span>&nbsp;&nbsp;<span class="comment">//&nbsp;设置size为0，结果中不包含文档，只包含聚合结果</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"aggs"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span>&nbsp;<span class="comment">//&nbsp;定义聚合</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"brandAgg"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span>&nbsp;<span class="comment">//给聚合起个名字</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"terms"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span>&nbsp;<span class="comment">//&nbsp;聚合的类型，按照品牌值聚合，所以选择term</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"field"</span><span class="punctuation">:</span>&nbsp;<span class="string">"brand"</span><span class="punctuation">,</span>&nbsp;<span class="comment">//&nbsp;参与聚合的字段</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"size"</span><span class="punctuation">:</span>&nbsp;<span class="number">20</span>&nbsp;<span class="comment">//&nbsp;希望获取的聚合结果数量</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>结果如图：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723171948228.png" alt="image-20210723171948228"></p><h3 id="1-2-2-聚合结果排序"><a href="#1-2-2-聚合结果排序" class="headerlink" title="1.2.2.聚合结果排序"></a>1.2.2.聚合结果排序</h3><p>默认情况下，Bucket聚合会统计Bucket内的文档数量，记为_count，并且按照_count降序排序。</p><p>我们可以指定order属性，自定义聚合的排序方式：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">GET&nbsp;/hotel/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"size"</span><span class="punctuation">:</span>&nbsp;<span class="number">0</span><span class="punctuation">,</span>&nbsp;</span><br><span class="line">&nbsp;&nbsp;<span class="attr">"aggs"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"brandAgg"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"terms"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"field"</span><span class="punctuation">:</span>&nbsp;<span class="string">"brand"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"order"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"_count"</span><span class="punctuation">:</span>&nbsp;<span class="string">"asc"</span> <span class="comment">//&nbsp;按照_count升序排列</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"size"</span><span class="punctuation">:</span>&nbsp;<span class="number">20</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><h3 id="1-2-3-限定聚合范围"><a href="#1-2-3-限定聚合范围" class="headerlink" title="1.2.3.限定聚合范围"></a>1.2.3.限定聚合范围</h3><p>默认情况下，Bucket聚合是对索引库的所有文档做聚合，但真实场景下，用户会输入搜索条件，因此聚合必须是对搜索结果聚合。那么聚合必须添加限定条件。</p><p>我们可以限定要聚合的文档范围，只要添加query条件即可：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">GET&nbsp;/hotel/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"query"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"range"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"price"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"lte"</span><span class="punctuation">:</span>&nbsp;<span class="number">200</span> <span class="comment">// 只对200元以下的文档聚合</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span>&nbsp;</span><br><span class="line">&nbsp;&nbsp;<span class="attr">"size"</span><span class="punctuation">:</span>&nbsp;<span class="number">0</span><span class="punctuation">,</span>&nbsp;</span><br><span class="line">&nbsp;&nbsp;<span class="attr">"aggs"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"brandAgg"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"terms"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"field"</span><span class="punctuation">:</span>&nbsp;<span class="string">"brand"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"size"</span><span class="punctuation">:</span>&nbsp;<span class="number">20</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>这次，聚合得到的品牌明显变少了：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723172404836.png" alt="image-20210723172404836"></p><h3 id="1-2-4-Metric聚合语法"><a href="#1-2-4-Metric聚合语法" class="headerlink" title="1.2.4.Metric聚合语法"></a>1.2.4.Metric聚合语法</h3><p>上节课，我们对酒店按照品牌分组，形成了一个个桶。现在我们需要对桶内的酒店做运算，获取每个品牌的用户评分的min、max、avg等值。</p><p>这就要用到Metric聚合了，例如stat聚合：就可以获取min、max、avg等结果。</p><p>语法如下：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">GET&nbsp;/hotel/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"size"</span><span class="punctuation">:</span>&nbsp;<span class="number">0</span><span class="punctuation">,</span>&nbsp;</span><br><span class="line">&nbsp;&nbsp;<span class="attr">"aggs"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"brandAgg"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span>&nbsp;</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"terms"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span>&nbsp;</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"field"</span><span class="punctuation">:</span>&nbsp;<span class="string">"brand"</span><span class="punctuation">,</span>&nbsp;</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"size"</span><span class="punctuation">:</span>&nbsp;<span class="number">20</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"aggs"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span>&nbsp;<span class="comment">//&nbsp;是brands聚合的子聚合，也就是分组后对每组分别计算</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"score_stats"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span>&nbsp;<span class="comment">//&nbsp;聚合名称</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"stats"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span>&nbsp;<span class="comment">//&nbsp;聚合类型，这里stats可以计算min、max、avg等</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"field"</span><span class="punctuation">:</span>&nbsp;<span class="string">"score"</span>&nbsp;<span class="comment">//&nbsp;聚合字段，这里是score</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>这次的score_stats聚合是在brandAgg的聚合内部嵌套的子聚合。因为我们需要在每个桶分别计算。</p><p>另外，我们还可以给聚合结果做个排序，例如按照每个桶的酒店平均分做排序：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723172917636.png" alt="image-20210723172917636"></p><h3 id="1-2-5-小结"><a href="#1-2-5-小结" class="headerlink" title="1.2.5.小结"></a>1.2.5.小结</h3><p>aggs代表聚合，与query同级，此时query的作用是？</p><ul><li>限定聚合的的文档范围</li></ul><p>聚合必须的三要素：</p><ul><li>聚合名称</li><li>聚合类型</li><li>聚合字段</li></ul><p>聚合可配置属性有：</p><ul><li>size：指定聚合结果数量</li><li>order：指定聚合结果排序方式</li><li>field：指定聚合字段</li></ul><h2 id="1-3-RestAPI实现聚合"><a href="#1-3-RestAPI实现聚合" class="headerlink" title="1.3.RestAPI实现聚合"></a>1.3.RestAPI实现聚合</h2><h3 id="1-3-1-API语法"><a href="#1-3-1-API语法" class="headerlink" title="1.3.1.API语法"></a>1.3.1.API语法</h3><p>聚合条件与query条件同级别，因此需要使用request.source()来指定聚合条件。</p><p>聚合条件的语法：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723173057733.png" alt="image-20210723173057733"></p><p>聚合的结果也与查询结果不同，API也比较特殊。不过同样是JSON逐层解析：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723173215728.png" alt="image-20210723173215728"></p><h3 id="1-3-2-业务需求"><a href="#1-3-2-业务需求" class="headerlink" title="1.3.2.业务需求"></a>1.3.2.业务需求</h3><p>需求：搜索页面的品牌、城市等信息不应该是在页面写死，而是通过聚合索引库中的酒店数据得来的：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723192605566.png" alt="image-20210723192605566"></p><p>分析：</p><p>目前，页面的城市列表、星级列表、品牌列表都是写死的，并不会随着搜索结果的变化而变化。但是用户搜索条件改变时，搜索结果会跟着变化。</p><p>例如：用户搜索“东方明珠”，那搜索的酒店肯定是在上海东方明珠附近，因此，城市只能是上海，此时城市列表中就不应该显示北京、深圳、杭州这些信息了。</p><p>也就是说，搜索结果中包含哪些城市，页面就应该列出哪些城市；搜索结果中包含哪些品牌，页面就应该列出哪些品牌。</p><p>如何得知搜索结果中包含哪些品牌？如何得知搜索结果中包含哪些城市？</p><p>使用聚合功能，利用Bucket聚合，对搜索结果中的文档基于品牌分组、基于城市分组，就能得知包含哪些品牌、哪些城市了。</p><p>因为是对搜索结果聚合，因此聚合是<strong>限定范围的聚合</strong>，也就是说聚合的限定条件跟搜索文档的条件一致。</p><p>查看浏览器可以发现，前端其实已经发出了这样的一个请求：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723193730799.png" alt="image-20210723193730799"></p><p>请求<strong>参数与搜索文档的参数完全一致</strong>。</p><p>返回值类型就是页面要展示的最终结果：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723203915982.png" alt="image-20210723203915982"></p><p>结果是一个Map结构：</p><ul><li>key是字符串，城市、星级、品牌、价格</li><li>value是集合，例如多个城市的名称</li></ul><h3 id="1-3-3-业务实现"><a href="#1-3-3-业务实现" class="headerlink" title="1.3.3.业务实现"></a>1.3.3.业务实现</h3><p>在<code>cn.itcast.hotel.web</code>包的<code>HotelController</code>中添加一个方法，遵循下面的要求：</p><ul><li>请求方式：<code>POST</code></li><li>请求路径：<code>/hotel/filters</code></li><li>请求参数：<code>RequestParams</code>，与搜索文档的参数一致</li><li>返回值类型：<code>Map&lt;String, List&lt;String&gt;&gt;</code></li></ul><p>代码：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping("filters")</span></span><br><span class="line"><span class="keyword">public</span> Map&lt;String, List&lt;String&gt;&gt; <span class="title function_">getFilters</span><span class="params">(<span class="meta">@RequestBody</span> RequestParams params)</span>{</span><br><span class="line">    <span class="keyword">return</span> hotelService.getFilters(params);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>这里调用了IHotelService中的getFilters方法，尚未实现。</p><p>在<code>cn.itcast.hotel.service.IHotelService</code>中定义新方法：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, List&lt;String&gt;&gt; <span class="title function_">filters</span><span class="params">(RequestParams params)</span>;</span><br></pre></td></tr></tbody></table></figure><p>在<code>cn.itcast.hotel.service.impl.HotelService</code>中实现该方法：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> Map&lt;String, List&lt;String&gt;&gt; <span class="title function_">filters</span><span class="params">(RequestParams params)</span> {</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        <span class="comment">// 1.准备Request</span></span><br><span class="line">        <span class="type">SearchRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SearchRequest</span>(<span class="string">"hotel"</span>);</span><br><span class="line">        <span class="comment">// 2.准备DSL</span></span><br><span class="line">        <span class="comment">// 2.1.query</span></span><br><span class="line">        buildBasicQuery(params, request);</span><br><span class="line">        <span class="comment">// 2.2.设置size</span></span><br><span class="line">        request.source().size(<span class="number">0</span>);</span><br><span class="line">        <span class="comment">// 2.3.聚合</span></span><br><span class="line">        buildAggregation(request);</span><br><span class="line">        <span class="comment">// 3.发出请求</span></span><br><span class="line">        <span class="type">SearchResponse</span> <span class="variable">response</span> <span class="operator">=</span> client.search(request, RequestOptions.DEFAULT);</span><br><span class="line">        <span class="comment">// 4.解析结果</span></span><br><span class="line">        Map&lt;String, List&lt;String&gt;&gt; result = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="type">Aggregations</span> <span class="variable">aggregations</span> <span class="operator">=</span> response.getAggregations();</span><br><span class="line">        <span class="comment">// 4.1.根据品牌名称，获取品牌结果</span></span><br><span class="line">        List&lt;String&gt; brandList = getAggByName(aggregations, <span class="string">"brandAgg"</span>);</span><br><span class="line">        result.put(<span class="string">"品牌"</span>, brandList);</span><br><span class="line">        <span class="comment">// 4.2.根据品牌名称，获取品牌结果</span></span><br><span class="line">        List&lt;String&gt; cityList = getAggByName(aggregations, <span class="string">"cityAgg"</span>);</span><br><span class="line">        result.put(<span class="string">"城市"</span>, cityList);</span><br><span class="line">        <span class="comment">// 4.3.根据品牌名称，获取品牌结果</span></span><br><span class="line">        List&lt;String&gt; starList = getAggByName(aggregations, <span class="string">"starAgg"</span>);</span><br><span class="line">        result.put(<span class="string">"星级"</span>, starList);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">buildAggregation</span><span class="params">(SearchRequest request)</span> {</span><br><span class="line">    request.source().aggregation(AggregationBuilders</span><br><span class="line">                                 .terms(<span class="string">"brandAgg"</span>)</span><br><span class="line">                                 .field(<span class="string">"brand"</span>)</span><br><span class="line">                                 .size(<span class="number">100</span>)</span><br><span class="line">                                );</span><br><span class="line">    request.source().aggregation(AggregationBuilders</span><br><span class="line">                                 .terms(<span class="string">"cityAgg"</span>)</span><br><span class="line">                                 .field(<span class="string">"city"</span>)</span><br><span class="line">                                 .size(<span class="number">100</span>)</span><br><span class="line">                                );</span><br><span class="line">    request.source().aggregation(AggregationBuilders</span><br><span class="line">                                 .terms(<span class="string">"starAgg"</span>)</span><br><span class="line">                                 .field(<span class="string">"starName"</span>)</span><br><span class="line">                                 .size(<span class="number">100</span>)</span><br><span class="line">                                );</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> List&lt;String&gt; <span class="title function_">getAggByName</span><span class="params">(Aggregations aggregations, String aggName)</span> {</span><br><span class="line">    <span class="comment">// 4.1.根据聚合名称获取聚合结果</span></span><br><span class="line">    <span class="type">Terms</span> <span class="variable">brandTerms</span> <span class="operator">=</span> aggregations.get(aggName);</span><br><span class="line">    <span class="comment">// 4.2.获取buckets</span></span><br><span class="line">    List&lt;? <span class="keyword">extends</span> <span class="title class_">Terms</span>.Bucket&gt; buckets = brandTerms.getBuckets();</span><br><span class="line">    <span class="comment">// 4.3.遍历</span></span><br><span class="line">    List&lt;String&gt; brandList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (Terms.Bucket bucket : buckets) {</span><br><span class="line">        <span class="comment">// 4.4.获取key</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> bucket.getKeyAsString();</span><br><span class="line">        brandList.add(key);</span><br><span class="line">    }</span><br><span class="line">    <span class="keyword">return</span> brandList;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h1 id="2-自动补全"><a href="#2-自动补全" class="headerlink" title="2.自动补全"></a>2.自动补全</h1><p>当用户在搜索框输入字符时，我们应该提示出与该字符有关的搜索项，如图：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723204936367.png" alt="image-20210723204936367"></p><p>这种根据用户输入的字母，提示完整词条的功能，就是自动补全了。</p><p>因为需要根据拼音字母来推断，因此要用到拼音分词功能。</p><h2 id="2-1-拼音分词器"><a href="#2-1-拼音分词器" class="headerlink" title="2.1.拼音分词器"></a>2.1.拼音分词器</h2><p>要实现根据字母做补全，就必须对文档按照拼音分词。在GitHub上恰好有elasticsearch的拼音分词插件。地址：<a href="https://github.com/medcl/elasticsearch-analysis-pinyin">https://github.com/medcl/elasticsearch-analysis-pinyin</a></p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723205932746.png" alt="image-20210723205932746"></p><p>课前资料中也提供了拼音分词器的安装包：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723205722303.png" alt="image-20210723205722303"> </p><p>安装方式与IK分词器一样，分三步：</p><p>​    ①解压</p><p>​    ②上传到虚拟机中，elasticsearch的plugin目录</p><p>​    ③重启elasticsearch</p><p>​    ④测试</p><p>详细安装步骤可以参考IK分词器的安装过程。</p><p>测试用法如下：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">POST&nbsp;/_analyze</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"text"</span><span class="punctuation">:</span>&nbsp;<span class="string">"如家酒店还不错"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"analyzer"</span><span class="punctuation">:</span>&nbsp;<span class="string">"pinyin"</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>结果：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723210126506.png" alt="image-20210723210126506"> </p><h2 id="2-2-自定义分词器"><a href="#2-2-自定义分词器" class="headerlink" title="2.2.自定义分词器"></a>2.2.自定义分词器</h2><p>默认的拼音分词器会将每个汉字单独分为拼音，而我们希望的是每个词条形成一组拼音，需要对拼音分词器做个性化定制，形成自定义分词器。</p><p>elasticsearch中分词器（analyzer）的组成包含三部分：</p><ul><li>character filters：在tokenizer之前对文本进行处理。例如删除字符、替换字符</li><li>tokenizer：将文本按照一定的规则切割成词条（term）。例如keyword，就是不分词；还有ik_smart</li><li>tokenizer filter：将tokenizer输出的词条做进一步处理。例如大小写转换、同义词处理、拼音处理等</li></ul><p>文档分词时会依次由这三部分来处理文档：</p><p>   <img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723210427878.png" alt="image-20210723210427878"></p><p>声明自定义分词器的语法如下：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">PUT&nbsp;/test</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"settings"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"analysis"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"analyzer"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span>&nbsp;<span class="comment">//&nbsp;自定义分词器</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"my_analyzer"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span>&nbsp;&nbsp;<span class="comment">//&nbsp;分词器名称</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"tokenizer"</span><span class="punctuation">:</span>&nbsp;<span class="string">"ik_max_word"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"filter"</span><span class="punctuation">:</span>&nbsp;<span class="string">"py"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"filter"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span>&nbsp;<span class="comment">//&nbsp;自定义tokenizer&nbsp;filter</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"py"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span>&nbsp;<span class="comment">//&nbsp;过滤器名称</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"type"</span><span class="punctuation">:</span>&nbsp;<span class="string">"pinyin"</span><span class="punctuation">,</span>&nbsp;<span class="comment">//&nbsp;过滤器类型，这里是pinyin</span></span><br><span class="line">  <span class="attr">"keep_full_pinyin"</span><span class="punctuation">:</span>&nbsp;<span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"keep_joined_full_pinyin"</span><span class="punctuation">:</span>&nbsp;<span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"keep_original"</span><span class="punctuation">:</span>&nbsp;<span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"limit_first_letter_length"</span><span class="punctuation">:</span>&nbsp;<span class="number">16</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"remove_duplicated_term"</span><span class="punctuation">:</span>&nbsp;<span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"none_chinese_pinyin_tokenize"</span><span class="punctuation">:</span>&nbsp;<span class="literal"><span class="keyword">false</span></span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"mappings"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"properties"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"name"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"type"</span><span class="punctuation">:</span>&nbsp;<span class="string">"text"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"analyzer"</span><span class="punctuation">:</span>&nbsp;<span class="string">"my_analyzer"</span><span class="punctuation">,</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"search_analyzer"</span><span class="punctuation">:</span>&nbsp;<span class="string">"ik_smart"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>测试：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723211829150.png" alt="image-20210723211829150"></p><p>总结：</p><p>如何使用拼音分词器？</p><ul><li><p>①下载pinyin分词器</p></li><li><p>②解压并放到elasticsearch的plugin目录</p></li><li><p>③重启即可</p></li></ul><p>如何自定义分词器？</p><ul><li><p>①创建索引库时，在settings中配置，可以包含三部分</p></li><li><p>②character filter</p></li><li><p>③tokenizer</p></li><li><p>④filter</p></li></ul><p>拼音分词器注意事项？</p><ul><li>为了避免搜索到同音字，搜索时不要使用拼音分词器</li></ul><h2 id="2-3-自动补全查询"><a href="#2-3-自动补全查询" class="headerlink" title="2.3.自动补全查询"></a>2.3.自动补全查询</h2><p>elasticsearch提供了<a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.6/search-suggesters.html">Completion Suggester</a>查询来实现自动补全功能。这个查询会匹配以用户输入内容开头的词条并返回。为了提高补全查询的效率，对于文档中字段的类型有一些约束：</p><ul><li><p>参与补全查询的字段必须是completion类型。</p></li><li><p>字段的内容一般是用来补全的多个词条形成的数组。</p></li></ul><p>比如，一个这样的索引库：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&nbsp;创建索引库</span></span><br><span class="line">PUT&nbsp;test</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"mappings"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"properties"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"title"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"type"</span><span class="punctuation">:</span>&nbsp;<span class="string">"completion"</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>然后插入下面的数据：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 示例数据</span></span><br><span class="line">POST&nbsp;test/_doc</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"title"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">[</span><span class="string">"Sony"</span><span class="punctuation">,</span>&nbsp;<span class="string">"WH-1000XM3"</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">}</span></span><br><span class="line">POST&nbsp;test/_doc</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"title"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">[</span><span class="string">"SK-II"</span><span class="punctuation">,</span>&nbsp;<span class="string">"PITERA"</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">}</span></span><br><span class="line">POST&nbsp;test/_doc</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"title"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">[</span><span class="string">"Nintendo"</span><span class="punctuation">,</span>&nbsp;<span class="string">"switch"</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><p>查询的DSL语句如下：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&nbsp;自动补全查询</span></span><br><span class="line">GET&nbsp;/test/_search</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;<span class="attr">"suggest"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"title_suggest"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"text"</span><span class="punctuation">:</span>&nbsp;<span class="string">"s"</span><span class="punctuation">,</span>&nbsp;<span class="comment">//&nbsp;关键字</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"completion"</span><span class="punctuation">:</span>&nbsp;<span class="punctuation">{</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"field"</span><span class="punctuation">:</span>&nbsp;<span class="string">"title"</span><span class="punctuation">,</span>&nbsp;<span class="comment">//&nbsp;补全查询的字段</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"skip_duplicates"</span><span class="punctuation">:</span>&nbsp;<span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span>&nbsp;<span class="comment">//&nbsp;跳过重复的</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="attr">"size"</span><span class="punctuation">:</span>&nbsp;<span class="number">10</span>&nbsp;<span class="comment">//&nbsp;获取前10条结果</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line">&nbsp;&nbsp;<span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><h2 id="2-4-实现酒店搜索框自动补全"><a href="#2-4-实现酒店搜索框自动补全" class="headerlink" title="2.4.实现酒店搜索框自动补全"></a>2.4.实现酒店搜索框自动补全</h2><p>现在，我们的hotel索引库还没有设置拼音分词器，需要修改索引库中的配置。但是我们知道索引库是无法修改的，只能删除然后重新创建。</p><p>另外，我们需要添加一个字段，用来做自动补全，将brand、suggestion、city等都放进去，作为自动补全的提示。</p><p>因此，总结一下，我们需要做的事情包括：</p><ol><li><p>修改hotel索引库结构，设置自定义拼音分词器</p></li><li><p>修改索引库的name、all字段，使用自定义分词器</p></li><li><p>索引库添加一个新字段suggestion，类型为completion类型，使用自定义的分词器</p></li><li><p>给HotelDoc类添加suggestion字段，内容包含brand、business</p></li><li><p>重新导入数据到hotel库</p></li></ol><h3 id="2-4-1-修改酒店映射结构"><a href="#2-4-1-修改酒店映射结构" class="headerlink" title="2.4.1.修改酒店映射结构"></a>2.4.1.修改酒店映射结构</h3><p>代码如下：</p><figure class="highlight json"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 酒店数据索引库</span></span><br><span class="line">PUT /hotel</span><br><span class="line"><span class="punctuation">{</span></span><br><span class="line">  <span class="attr">"settings"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"analysis"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">      <span class="attr">"analyzer"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"text_anlyzer"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">          <span class="attr">"tokenizer"</span><span class="punctuation">:</span> <span class="string">"ik_max_word"</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">"filter"</span><span class="punctuation">:</span> <span class="string">"py"</span></span><br><span class="line">        <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"completion_analyzer"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">          <span class="attr">"tokenizer"</span><span class="punctuation">:</span> <span class="string">"keyword"</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">"filter"</span><span class="punctuation">:</span> <span class="string">"py"</span></span><br><span class="line">        <span class="punctuation">}</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"filter"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"py"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">          <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"pinyin"</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">"keep_full_pinyin"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">"keep_joined_full_pinyin"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">"keep_original"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">"limit_first_letter_length"</span><span class="punctuation">:</span> <span class="number">16</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">"remove_duplicated_term"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">"none_chinese_pinyin_tokenize"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">        <span class="punctuation">}</span></span><br><span class="line">      <span class="punctuation">}</span></span><br><span class="line">    <span class="punctuation">}</span></span><br><span class="line">  <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">"mappings"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">    <span class="attr">"properties"</span><span class="punctuation">:</span> <span class="punctuation">{</span></span><br><span class="line">      <span class="attr">"id"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"keyword"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"name"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"text"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"analyzer"</span><span class="punctuation">:</span> <span class="string">"text_anlyzer"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"search_analyzer"</span><span class="punctuation">:</span> <span class="string">"ik_smart"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"copy_to"</span><span class="punctuation">:</span> <span class="string">"all"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"address"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"keyword"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"index"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"price"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"integer"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"score"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"integer"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"brand"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"keyword"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"copy_to"</span><span class="punctuation">:</span> <span class="string">"all"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"city"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"keyword"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"starName"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"keyword"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"business"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"keyword"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"copy_to"</span><span class="punctuation">:</span> <span class="string">"all"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"location"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"geo_point"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"pic"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"keyword"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"index"</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"all"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">        <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"text"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"analyzer"</span><span class="punctuation">:</span> <span class="string">"text_anlyzer"</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">"search_analyzer"</span><span class="punctuation">:</span> <span class="string">"ik_smart"</span></span><br><span class="line">      <span class="punctuation">}</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">"suggestion"</span><span class="punctuation">:</span><span class="punctuation">{</span></span><br><span class="line">          <span class="attr">"type"</span><span class="punctuation">:</span> <span class="string">"completion"</span><span class="punctuation">,</span></span><br><span class="line">          <span class="attr">"analyzer"</span><span class="punctuation">:</span> <span class="string">"completion_analyzer"</span></span><br><span class="line">      <span class="punctuation">}</span></span><br><span class="line">    <span class="punctuation">}</span></span><br><span class="line">  <span class="punctuation">}</span></span><br><span class="line"><span class="punctuation">}</span></span><br></pre></td></tr></tbody></table></figure><h3 id="2-4-2-修改HotelDoc实体"><a href="#2-4-2-修改HotelDoc实体" class="headerlink" title="2.4.2.修改HotelDoc实体"></a>2.4.2.修改HotelDoc实体</h3><p>HotelDoc中要添加一个字段，用来做自动补全，内容可以是酒店品牌、城市、商圈等信息。按照自动补全字段的要求，最好是这些字段的数组。</p><p>因此我们在HotelDoc中添加一个suggestion字段，类型为<code>List&lt;String&gt;</code>，然后将brand、city、business等信息放到里面。</p><p>代码如下：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.hotel.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.Collections;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HotelDoc</span> {</span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String address;</span><br><span class="line">    <span class="keyword">private</span> Integer price;</span><br><span class="line">    <span class="keyword">private</span> Integer score;</span><br><span class="line">    <span class="keyword">private</span> String brand;</span><br><span class="line">    <span class="keyword">private</span> String city;</span><br><span class="line">    <span class="keyword">private</span> String starName;</span><br><span class="line">    <span class="keyword">private</span> String business;</span><br><span class="line">    <span class="keyword">private</span> String location;</span><br><span class="line">    <span class="keyword">private</span> String pic;</span><br><span class="line">    <span class="keyword">private</span> Object distance;</span><br><span class="line">    <span class="keyword">private</span> Boolean isAD;</span><br><span class="line">    <span class="keyword">private</span> List&lt;String&gt; suggestion;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">HotelDoc</span><span class="params">(Hotel hotel)</span> {</span><br><span class="line">        <span class="built_in">this</span>.id = hotel.getId();</span><br><span class="line">        <span class="built_in">this</span>.name = hotel.getName();</span><br><span class="line">        <span class="built_in">this</span>.address = hotel.getAddress();</span><br><span class="line">        <span class="built_in">this</span>.price = hotel.getPrice();</span><br><span class="line">        <span class="built_in">this</span>.score = hotel.getScore();</span><br><span class="line">        <span class="built_in">this</span>.brand = hotel.getBrand();</span><br><span class="line">        <span class="built_in">this</span>.city = hotel.getCity();</span><br><span class="line">        <span class="built_in">this</span>.starName = hotel.getStarName();</span><br><span class="line">        <span class="built_in">this</span>.business = hotel.getBusiness();</span><br><span class="line">        <span class="built_in">this</span>.location = hotel.getLatitude() + <span class="string">", "</span> + hotel.getLongitude();</span><br><span class="line">        <span class="built_in">this</span>.pic = hotel.getPic();</span><br><span class="line">        <span class="comment">// 组装suggestion</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">this</span>.business.contains(<span class="string">"/"</span>)){</span><br><span class="line">            <span class="comment">// business有多个值，需要切割</span></span><br><span class="line">            String[] arr = <span class="built_in">this</span>.business.split(<span class="string">"/"</span>);</span><br><span class="line">            <span class="comment">// 添加元素</span></span><br><span class="line">            <span class="built_in">this</span>.suggestion = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            <span class="built_in">this</span>.suggestion.add(<span class="built_in">this</span>.brand);</span><br><span class="line">            Collections.addAll(<span class="built_in">this</span>.suggestion, arr);</span><br><span class="line">        }<span class="keyword">else</span> {</span><br><span class="line">            <span class="built_in">this</span>.suggestion = Arrays.asList(<span class="built_in">this</span>.brand, <span class="built_in">this</span>.business);</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="2-4-3-重新导入"><a href="#2-4-3-重新导入" class="headerlink" title="2.4.3.重新导入"></a>2.4.3.重新导入</h3><p>重新执行之前编写的导入数据功能，可以看到新的酒店数据中包含了suggestion：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723213546183.png" alt="image-20210723213546183"></p><h3 id="2-4-4-自动补全查询的JavaAPI"><a href="#2-4-4-自动补全查询的JavaAPI" class="headerlink" title="2.4.4.自动补全查询的JavaAPI"></a>2.4.4.自动补全查询的JavaAPI</h3><p>之前我们学习了自动补全查询的DSL，而没有学习对应的JavaAPI，这里给出一个示例：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723213759922.png" alt="image-20210723213759922"></p><p>而自动补全的结果也比较特殊，解析的代码如下：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723213917524.png" alt="image-20210723213917524"></p><h3 id="2-4-5-实现搜索框自动补全"><a href="#2-4-5-实现搜索框自动补全" class="headerlink" title="2.4.5.实现搜索框自动补全"></a>2.4.5.实现搜索框自动补全</h3><p>查看前端页面，可以发现当我们在输入框键入时，前端会发起ajax请求：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723214021062.png" alt="image-20210723214021062"></p><p>返回值是补全词条的集合，类型为<code>List&lt;String&gt;</code></p><p>1）在<code>cn.itcast.hotel.web</code>包下的<code>HotelController</code>中添加新接口，接收新的请求：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping("suggestion")</span></span><br><span class="line"><span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getSuggestions</span><span class="params">(<span class="meta">@RequestParam("key")</span> String prefix)</span> {</span><br><span class="line">    <span class="keyword">return</span> hotelService.getSuggestions(prefix);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>2）在<code>cn.itcast.hotel.service</code>包下的<code>IhotelService</code>中添加方法：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; <span class="title function_">getSuggestions</span><span class="params">(String prefix)</span>;</span><br></pre></td></tr></tbody></table></figure><p>3）在<code>cn.itcast.hotel.service.impl.HotelService</code>中实现该方法：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> List&lt;String&gt; <span class="title function_">getSuggestions</span><span class="params">(String prefix)</span> {</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        <span class="comment">// 1.准备Request</span></span><br><span class="line">        <span class="type">SearchRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SearchRequest</span>(<span class="string">"hotel"</span>);</span><br><span class="line">        <span class="comment">// 2.准备DSL</span></span><br><span class="line">        request.source().suggest(<span class="keyword">new</span> <span class="title class_">SuggestBuilder</span>().addSuggestion(</span><br><span class="line">            <span class="string">"suggestions"</span>,</span><br><span class="line">            SuggestBuilders.completionSuggestion(<span class="string">"suggestion"</span>)</span><br><span class="line">            .prefix(prefix)</span><br><span class="line">            .skipDuplicates(<span class="literal">true</span>)</span><br><span class="line">            .size(<span class="number">10</span>)</span><br><span class="line">        ));</span><br><span class="line">        <span class="comment">// 3.发起请求</span></span><br><span class="line">        <span class="type">SearchResponse</span> <span class="variable">response</span> <span class="operator">=</span> client.search(request, RequestOptions.DEFAULT);</span><br><span class="line">        <span class="comment">// 4.解析结果</span></span><br><span class="line">        <span class="type">Suggest</span> <span class="variable">suggest</span> <span class="operator">=</span> response.getSuggest();</span><br><span class="line">        <span class="comment">// 4.1.根据补全查询名称，获取补全结果</span></span><br><span class="line">        <span class="type">CompletionSuggestion</span> <span class="variable">suggestions</span> <span class="operator">=</span> suggest.getSuggestion(<span class="string">"suggestions"</span>);</span><br><span class="line">        <span class="comment">// 4.2.获取options</span></span><br><span class="line">        List&lt;CompletionSuggestion.Entry.Option&gt; options = suggestions.getOptions();</span><br><span class="line">        <span class="comment">// 4.3.遍历</span></span><br><span class="line">        List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(options.size());</span><br><span class="line">        <span class="keyword">for</span> (CompletionSuggestion.Entry.Option option : options) {</span><br><span class="line">            <span class="type">String</span> <span class="variable">text</span> <span class="operator">=</span> option.getText().toString();</span><br><span class="line">            list.add(text);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h1 id="3-数据同步"><a href="#3-数据同步" class="headerlink" title="3.数据同步"></a>3.数据同步</h1><p>elasticsearch中的酒店数据来自于mysql数据库，因此mysql数据发生改变时，elasticsearch也必须跟着改变，这个就是elasticsearch与mysql之间的<strong>数据同步</strong>。</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723214758392.png" alt="image-20210723214758392"></p><h2 id="3-1-思路分析"><a href="#3-1-思路分析" class="headerlink" title="3.1.思路分析"></a>3.1.思路分析</h2><p>常见的数据同步方案有三种：</p><ul><li>同步调用</li><li>异步通知</li><li>监听binlog</li></ul><h3 id="3-1-1-同步调用"><a href="#3-1-1-同步调用" class="headerlink" title="3.1.1.同步调用"></a>3.1.1.同步调用</h3><p>方案一：同步调用</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723214931869.png" alt="image-20210723214931869"></p><p>基本步骤如下：</p><ul><li>hotel-demo对外提供接口，用来修改elasticsearch中的数据</li><li>酒店管理服务在完成数据库操作后，直接调用hotel-demo提供的接口，</li></ul><h3 id="3-1-2-异步通知"><a href="#3-1-2-异步通知" class="headerlink" title="3.1.2.异步通知"></a>3.1.2.异步通知</h3><p>方案二：异步通知</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723215140735.png" alt="image-20210723215140735"></p><p>流程如下：</p><ul><li>hotel-admin对mysql数据库数据完成增、删、改后，发送MQ消息</li><li>hotel-demo监听MQ，接收到消息后完成elasticsearch数据修改</li></ul><h3 id="3-1-3-监听binlog"><a href="#3-1-3-监听binlog" class="headerlink" title="3.1.3.监听binlog"></a>3.1.3.监听binlog</h3><p>方案三：监听binlog</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723215518541.png" alt="image-20210723215518541"></p><p>流程如下：</p><ul><li>给mysql开启binlog功能</li><li>mysql完成增、删、改操作都会记录在binlog中</li><li>hotel-demo基于canal监听binlog变化，实时更新elasticsearch中的内容</li></ul><h3 id="3-1-4-选择"><a href="#3-1-4-选择" class="headerlink" title="3.1.4.选择"></a>3.1.4.选择</h3><p>方式一：同步调用</p><ul><li>优点：实现简单，粗暴</li><li>缺点：业务耦合度高</li></ul><p>方式二：异步通知</p><ul><li>优点：低耦合，实现难度一般</li><li>缺点：依赖mq的可靠性</li></ul><p>方式三：监听binlog</p><ul><li>优点：完全解除服务间耦合</li><li>缺点：开启binlog增加数据库负担、实现复杂度高</li></ul><h2 id="3-2-实现数据同步"><a href="#3-2-实现数据同步" class="headerlink" title="3.2.实现数据同步"></a>3.2.实现数据同步</h2><h3 id="3-2-1-思路"><a href="#3-2-1-思路" class="headerlink" title="3.2.1.思路"></a>3.2.1.思路</h3><p>利用课前资料提供的hotel-admin项目作为酒店管理的微服务。当酒店数据发生增、删、改时，要求对elasticsearch中数据也要完成相同操作。</p><p>步骤：</p><ul><li><p>导入课前资料提供的hotel-admin项目，启动并测试酒店数据的CRUD</p></li><li><p>声明exchange、queue、RoutingKey</p></li><li><p>在hotel-admin中的增、删、改业务中完成消息发送</p></li><li><p>在hotel-demo中完成消息监听，并更新elasticsearch中数据</p></li><li><p>启动并测试数据同步功能</p></li></ul><h3 id="3-2-2-导入demo"><a href="#3-2-2-导入demo" class="headerlink" title="3.2.2.导入demo"></a>3.2.2.导入demo</h3><p>导入课前资料提供的hotel-admin项目：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723220237930.png" alt="image-20210723220237930"></p><p>运行后，访问 <a href="http://localhost:8099/">http://localhost:8099</a></p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723220354464.png" alt="image-20210723220354464"></p><p>其中包含了酒店的CRUD功能：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723220511090.png" alt="image-20210723220511090"></p><h3 id="3-2-3-声明交换机、队列"><a href="#3-2-3-声明交换机、队列" class="headerlink" title="3.2.3.声明交换机、队列"></a>3.2.3.声明交换机、队列</h3><p>MQ结构如图：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723215850307.png" alt="image-20210723215850307"></p><h4 id="1）引入依赖"><a href="#1）引入依赖" class="headerlink" title="1）引入依赖"></a>1）引入依赖</h4><p>在hotel-admin、hotel-demo中引入rabbitmq的依赖：</p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--amqp--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-amqp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><h4 id="2）声明队列交换机名称"><a href="#2）声明队列交换机名称" class="headerlink" title="2）声明队列交换机名称"></a>2）声明队列交换机名称</h4><p>在hotel-admin和hotel-demo中的<code>cn.itcast.hotel.constatnts</code>包下新建一个类<code>MqConstants</code>：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.hotel.constatnts;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MqConstants</span> {</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 交换机</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">HOTEL_EXCHANGE</span> <span class="operator">=</span> <span class="string">"hotel.topic"</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 监听新增和修改的队列</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">HOTEL_INSERT_QUEUE</span> <span class="operator">=</span> <span class="string">"hotel.insert.queue"</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 监听删除的队列</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">HOTEL_DELETE_QUEUE</span> <span class="operator">=</span> <span class="string">"hotel.delete.queue"</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 新增或修改的RoutingKey</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">HOTEL_INSERT_KEY</span> <span class="operator">=</span> <span class="string">"hotel.insert"</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除的RoutingKey</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="type">String</span> <span class="variable">HOTEL_DELETE_KEY</span> <span class="operator">=</span> <span class="string">"hotel.delete"</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h4 id="3）声明队列交换机"><a href="#3）声明队列交换机" class="headerlink" title="3）声明队列交换机"></a>3）声明队列交换机</h4><p>在hotel-demo中，定义配置类，声明队列、交换机：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.hotel.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.itcast.hotel.constants.MqConstants;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.Binding;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.BindingBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.Queue;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.core.TopicExchange;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MqConfig</span> {</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> TopicExchange <span class="title function_">topicExchange</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">TopicExchange</span>(MqConstants.HOTEL_EXCHANGE, <span class="literal">true</span>, <span class="literal">false</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">insertQueue</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(MqConstants.HOTEL_INSERT_QUEUE, <span class="literal">true</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Queue <span class="title function_">deleteQueue</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Queue</span>(MqConstants.HOTEL_DELETE_QUEUE, <span class="literal">true</span>);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">insertQueueBinding</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(insertQueue()).to(topicExchange()).with(MqConstants.HOTEL_INSERT_KEY);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Binding <span class="title function_">deleteQueueBinding</span><span class="params">()</span>{</span><br><span class="line">        <span class="keyword">return</span> BindingBuilder.bind(deleteQueue()).to(topicExchange()).with(MqConstants.HOTEL_DELETE_KEY);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="3-2-4-发送MQ消息"><a href="#3-2-4-发送MQ消息" class="headerlink" title="3.2.4.发送MQ消息"></a>3.2.4.发送MQ消息</h3><p>在hotel-admin中的增、删、改业务中分别发送MQ消息：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723221843816.png" alt="image-20210723221843816"></p><h3 id="3-2-5-接收MQ消息"><a href="#3-2-5-接收MQ消息" class="headerlink" title="3.2.5.接收MQ消息"></a>3.2.5.接收MQ消息</h3><p>hotel-demo接收到MQ消息要做的事情包括：</p><ul><li>新增消息：根据传递的hotel的id查询hotel信息，然后新增一条数据到索引库</li><li>删除消息：根据传递的hotel的id删除索引库中的一条数据</li></ul><p>1）首先在hotel-demo的<code>cn.itcast.hotel.service</code>包下的<code>IHotelService</code>中新增新增、删除业务</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Long id)</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">insertById</span><span class="params">(Long id)</span>;</span><br></pre></td></tr></tbody></table></figure><p>2）给hotel-demo中的<code>cn.itcast.hotel.service.impl</code>包下的HotelService中实现业务：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Long id)</span> {</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        <span class="comment">// 1.准备Request</span></span><br><span class="line">        <span class="type">DeleteRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DeleteRequest</span>(<span class="string">"hotel"</span>, id.toString());</span><br><span class="line">        <span class="comment">// 2.发送请求</span></span><br><span class="line">        client.delete(request, RequestOptions.DEFAULT);</span><br><span class="line">    } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insertById</span><span class="params">(Long id)</span> {</span><br><span class="line">    <span class="keyword">try</span> {</span><br><span class="line">        <span class="comment">// 0.根据id查询酒店数据</span></span><br><span class="line">        <span class="type">Hotel</span> <span class="variable">hotel</span> <span class="operator">=</span> getById(id);</span><br><span class="line">        <span class="comment">// 转换为文档类型</span></span><br><span class="line">        <span class="type">HotelDoc</span> <span class="variable">hotelDoc</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HotelDoc</span>(hotel);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 1.准备Request对象</span></span><br><span class="line">        <span class="type">IndexRequest</span> <span class="variable">request</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">IndexRequest</span>(<span class="string">"hotel"</span>).id(hotel.getId().toString());</span><br><span class="line">        <span class="comment">// 2.准备Json文档</span></span><br><span class="line">        request.source(JSON.toJSONString(hotelDoc), XContentType.JSON);</span><br><span class="line">        <span class="comment">// 3.发送请求</span></span><br><span class="line">        client.index(request, RequestOptions.DEFAULT);</span><br><span class="line">    } <span class="keyword">catch</span> (IOException e) {</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>3）编写监听器</p><p>在hotel-demo中的<code>cn.itcast.hotel.mq</code>包新增一个类：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.hotel.mq;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.itcast.hotel.constants.MqConstants;</span><br><span class="line"><span class="keyword">import</span> cn.itcast.hotel.service.IHotelService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.amqp.rabbit.annotation.RabbitListener;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HotelListener</span> {</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IHotelService hotelService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 监听酒店新增或修改的业务</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id 酒店id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RabbitListener(queues = MqConstants.HOTEL_INSERT_QUEUE)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenHotelInsertOrUpdate</span><span class="params">(Long id)</span>{</span><br><span class="line">        hotelService.insertById(id);</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 监听酒店删除的业务</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> id 酒店id</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RabbitListener(queues = MqConstants.HOTEL_DELETE_QUEUE)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">listenHotelDelete</span><span class="params">(Long id)</span>{</span><br><span class="line">        hotelService.deleteById(id);</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h1 id="4-集群"><a href="#4-集群" class="headerlink" title="4.集群"></a>4.集群</h1><p>单机的elasticsearch做数据存储，必然面临两个问题：海量数据存储问题、单点故障问题。</p><ul><li>海量数据存储问题：将索引库从逻辑上拆分为N个分片（shard），存储到多个节点</li><li>单点故障问题：将分片数据在不同节点备份（replica ）</li></ul><p><strong>ES集群相关概念</strong>:</p><ul><li><p>集群（cluster）：一组拥有共同的 cluster name 的 节点。</p></li><li><p><font color="red">节点（node)</font>   ：集群中的一个 Elasticearch 实例</p></li><li><p><font color="red">分片（shard）</font>：索引可以被拆分为不同的部分进行存储，称为分片。在集群环境下，一个索引的不同分片可以拆分到不同的节点中</p><p>解决问题：数据量太大，单点存储量有限的问题。</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20200104124440086-5602723.png" alt="image-20200104124440086"></p><blockquote><p>此处，我们把数据分成3片：shard0、shard1、shard2</p></blockquote></li><li><p>主分片（Primary shard）：相对于副本分片的定义。</p></li><li><p>副本分片（Replica shard）每个主分片可以有一个或者多个副本，数据和主分片一样。</p><p>​    </p></li></ul><p>数据备份可以保证高可用，但是每个分片备份一份，所需要的节点数量就会翻一倍，成本实在是太高了！</p><p>为了在高可用和成本间寻求平衡，我们可以这样做：</p><ul><li>首先对数据分片，存储到不同节点</li><li>然后对每个分片进行备份，放到对方节点，完成互相备份</li></ul><p>这样可以大大减少所需要的服务节点数量，如图，我们以3分片，每个分片备份一份为例：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20200104124551912.png" alt="image-20200104124551912"></p><p>现在，每个分片都有1个备份，存储在3个节点：</p><ul><li>node0：保存了分片0和1</li><li>node1：保存了分片0和2</li><li>node2：保存了分片1和2</li></ul><h2 id="4-1-搭建ES集群"><a href="#4-1-搭建ES集群" class="headerlink" title="4.1.搭建ES集群"></a>4.1.搭建ES集群</h2><p>参考课前资料的文档：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723222732427.png" alt="image-20210723222732427"> </p><p>其中的第四章节：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723222812619.png" alt="image-20210723222812619"> </p><h2 id="4-2-集群脑裂问题"><a href="#4-2-集群脑裂问题" class="headerlink" title="4.2.集群脑裂问题"></a>4.2.集群脑裂问题</h2><h3 id="4-2-1-集群职责划分"><a href="#4-2-1-集群职责划分" class="headerlink" title="4.2.1.集群职责划分"></a>4.2.1.集群职责划分</h3><p>elasticsearch中集群节点有不同的职责划分：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723223008967.png" alt="image-20210723223008967"></p><p>默认情况下，集群中的任何一个节点都同时具备上述四种角色。</p><p>但是真实的集群一定要将集群职责分离：</p><ul><li>master节点：对CPU要求高，但是内存要求第</li><li>data节点：对CPU和内存要求都高</li><li>coordinating节点：对网络带宽、CPU要求高</li></ul><p>职责分离可以让我们根据不同节点的需求分配不同的硬件去部署。而且避免业务之间的互相干扰。</p><p>一个典型的es集群职责划分如图：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723223629142.png" alt="image-20210723223629142"></p><h3 id="4-2-2-脑裂问题"><a href="#4-2-2-脑裂问题" class="headerlink" title="4.2.2.脑裂问题"></a>4.2.2.脑裂问题</h3><p>脑裂是因为集群中的节点失联导致的。</p><p>例如一个集群中，主节点与其它节点失联：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723223804995.png" alt="image-20210723223804995"></p><p>此时，node2和node3认为node1宕机，就会重新选主：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723223845754.png" alt="image-20210723223845754"></p><p>当node3当选后，集群继续对外提供服务，node2和node3自成集群，node1自成集群，两个集群数据不同步，出现数据差异。</p><p>当网络恢复后，因为集群中有两个master节点，集群状态的不一致，出现脑裂的情况：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723224000555.png" alt="image-20210723224000555"></p><p>解决脑裂的方案是，要求选票超过 ( eligible节点数量 + 1 ）/ 2 才能当选为主，因此eligible节点数量最好是奇数。对应配置项是discovery.zen.minimum_master_nodes，在es7.0以后，已经成为默认配置，因此一般不会发生脑裂问题</p><p>例如：3个节点形成的集群，选票必须超过 （3 + 1） / 2 ，也就是2票。node3得到node2和node3的选票，当选为主。node1只有自己1票，没有当选。集群中依然只有1个主节点，没有出现脑裂。</p><h3 id="4-2-3-小结"><a href="#4-2-3-小结" class="headerlink" title="4.2.3.小结"></a>4.2.3.小结</h3><p>master eligible节点的作用是什么？</p><ul><li>参与集群选主</li><li>主节点可以管理集群状态、管理分片信息、处理创建和删除索引库的请求</li></ul><p>data节点的作用是什么？</p><ul><li>数据的CRUD</li></ul><p>coordinator节点的作用是什么？</p><ul><li><p>路由请求到其它节点</p></li><li><p>合并查询到的结果，返回给用户</p></li></ul><h2 id="4-3-集群分布式存储"><a href="#4-3-集群分布式存储" class="headerlink" title="4.3.集群分布式存储"></a>4.3.集群分布式存储</h2><p>当新增文档时，应该保存到不同分片，保证数据均衡，那么coordinating node如何确定数据该存储到哪个分片呢？</p><h3 id="4-3-1-分片存储测试"><a href="#4-3-1-分片存储测试" class="headerlink" title="4.3.1.分片存储测试"></a>4.3.1.分片存储测试</h3><p>插入三条数据：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723225006058.png" alt="image-20210723225006058"></p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723225034637.png" alt="image-20210723225034637"></p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723225112029.png" alt="image-20210723225112029"></p><p>测试可以看到，三条数据分别在不同分片：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723225227928.png" alt="image-20210723225227928"></p><p>结果：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723225342120.png" alt="image-20210723225342120"></p><h3 id="4-3-2-分片存储原理"><a href="#4-3-2-分片存储原理" class="headerlink" title="4.3.2.分片存储原理"></a>4.3.2.分片存储原理</h3><p>elasticsearch会通过hash算法来计算文档应该存储到哪个分片：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723224354904.png" alt="image-20210723224354904"></p><p>说明：</p><ul><li>_routing默认是文档的id</li><li>算法与分片数量有关，因此索引库一旦创建，分片数量不能修改！</li></ul><p>新增文档的流程如下：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723225436084.png" alt="image-20210723225436084"></p><p>解读：</p><ul><li>1）新增一个id=1的文档</li><li>2）对id做hash运算，假如得到的是2，则应该存储到shard-2</li><li>3）shard-2的主分片在node3节点，将数据路由到node3</li><li>4）保存文档</li><li>5）同步给shard-2的副本replica-2，在node2节点</li><li>6）返回结果给coordinating-node节点</li></ul><h2 id="4-4-集群分布式查询"><a href="#4-4-集群分布式查询" class="headerlink" title="4.4.集群分布式查询"></a>4.4.集群分布式查询</h2><p>elasticsearch的查询分成两个阶段：</p><ul><li><p>scatter phase：分散阶段，coordinating node会把请求分发到每一个分片</p></li><li><p>gather phase：聚集阶段，coordinating node汇总data node的搜索结果，并处理为最终结果集返回给用户</p></li></ul><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723225809848.png" alt="image-20210723225809848"></p><h2 id="4-5-集群故障转移"><a href="#4-5-集群故障转移" class="headerlink" title="4.5.集群故障转移"></a>4.5.集群故障转移</h2><p>集群的master节点会监控集群中的节点状态，如果发现有节点宕机，会立即将宕机节点的分片数据迁移到其它节点，确保数据安全，这个叫做故障转移。</p><p>1）例如一个集群结构如图：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723225945963.png" alt="image-20210723225945963"></p><p>现在，node1是主节点，其它两个节点是从节点。</p><p>2）突然，node1发生了故障：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723230020574.png" alt="image-20210723230020574"></p><p>宕机后的第一件事，需要重新选主，例如选中了node2：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723230055974.png" alt="image-20210723230055974"></p><p>node2成为主节点后，会检测集群监控状态，发现：shard-1、shard-0没有副本节点。因此需要将node1上的数据迁移到node2、node3：</p><p><img src="/2023/07/20/fen-bu-shi-sou-suo-yin-qing-03/image-20210723230216642.png" alt="image-20210723230216642"></p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;分布式搜索引擎03&quot;&gt;&lt;a href=&quot;#分布式搜索引擎03&quot; class=&quot;headerlink&quot; title=&quot;分布式搜索引擎03&quot;&gt;&lt;/a&gt;分布式搜索引擎03&lt;/h1&gt;</summary>
    
    
    
    <category term="SpringCloud" scheme="https://llzzoomm.github.io/categories/SpringCloud/"/>
    
    
    <category term="SpringCloud" scheme="https://llzzoomm.github.io/tags/SpringCloud/"/>
    
  </entry>
  
  <entry>
    <title>Redis</title>
    <link href="https://llzzoomm.github.io/2023/07/11/redis/"/>
    <id>https://llzzoomm.github.io/2023/07/11/redis/</id>
    <published>2023-07-11T11:32:04.806Z</published>
    <updated>2023-07-11T11:38:37.684Z</updated>
    
    <content type="html"><![CDATA[<h1 id="学习目标"><a href="#学习目标" class="headerlink" title="学习目标"></a>学习目标</h1><span id="more"></span><p>1&gt;了解NoSQL概念</p><p>2&gt;了解Redis概念，定位，优点，缺点</p><p>3&gt;掌握Redis常用五大类型</p><p>4&gt;掌握Redis Key 与Value值设计</p><p>5&gt;掌握Redis全局命令</p><p>6&gt;掌握Redis 安全与事务操作</p><p>7&gt;了解Redis持久化策略</p><p>8&gt;了解Redis内存淘汰机制与过期Key清理</p><p>9&gt;掌握Java集成Redis操作</p><p>10&gt;完成综合案例设计与实现</p><h1 id="认识-Redis"><a href="#认识-Redis" class="headerlink" title="认识 Redis"></a>认识 Redis</h1><h2 id="数据库分类"><a href="#数据库分类" class="headerlink" title="数据库分类"></a>数据库分类</h2><p>目前数据库分：关系型数据库与非关系型数据库</p><p>常用的关系型数据库： Oracle，<strong>MySQL</strong>，SqlServer，DB2</p><p>常用的非关系数据库：<strong>Redis</strong>，MongoDB，ElasticSearch， Hbase，Neo4j</p><p>那啥是非关系数据库呢？此处涉及到新名词：NoSQL</p><p><strong>NoSQL</strong>最常见的解释是“non-relational”， “Not Only SQL”也被很多人接受。NoSQL仅仅是一个概念，泛指非关系型的数据库，区别于关系数据库，它们不保证关系数据的ACID特性。详情见：百度百科：<a href="https://baike.baidu.com/item/NoSQL/8828247?fr=aladdin">https://baike.baidu.com/item/NoSQL/8828247?fr=aladdin</a></p><p>经典案例</p><p><img src="/2023/07/11/redis/%E9%98%BF%E9%87%8C%E5%B9%B6%E5%8F%91.jpg" alt="阿里并发">*</p><h2 id="NoSQL分类"><a href="#NoSQL分类" class="headerlink" title="NoSQL分类"></a>NoSQL分类</h2><p><img src="/2023/07/11/redis/image-20220829191301206.png" alt="image-20220829191301206">*</p><h2 id="什么是Redis"><a href="#什么是Redis" class="headerlink" title="什么是Redis"></a>什么是Redis</h2><h3 id="Redis简介"><a href="#Redis简介" class="headerlink" title="Redis简介"></a>Redis简介</h3><p>是以key-value形式存储,和传统的关系型数据库不一样.不一定遵循传统数据库的一些基本要求.(非关系型的,分布式的,开源的,水平可拓展的)</p><p>优点:<br>    <strong>对数据高并发读写</strong>(直接是内存中进行读写的)<br>    对海量数据的高效率存储和访问<br>    对数据的可拓展性和高可用性.<br>    <strong>单线程操作</strong>,每个操作都是原子操作,没有并发相关问题(redis 6)</p><p>缺点:<br>    redis(ACID处理非常简单)<br>    无法做太复杂的关系数据库模型</p><p><img src="/2023/07/11/redis/image-20220829191453155.png" alt="image-20220829191453155">*</p><h3 id="谁在用Redis"><a href="#谁在用Redis" class="headerlink" title="谁在用Redis"></a>谁在用Redis</h3><p>比较著名的公司有：<br>github、blizzard、stackoverflow、flickr</p><p>国内<br>新浪微博（全球最大的redis集群）【2017】<br>    2200+亿 commands/day 5000亿Read/day 500亿Write/day<br>    18TB+ Memory<br>    500+ Servers in 6 IDC 2000+instances<br>淘宝<br>腾讯微博</p><h3 id="怎么学redis"><a href="#怎么学redis" class="headerlink" title="怎么学redis"></a>怎么学redis</h3><p>redis在线入门 ： <a href="http://try.redis.io/">http://try.redis.io/</a><br>redis 中文资料站： <a href="http://www.redis.cn/">http://www.redis.cn/</a><br><a href="https://www.runoob.com/redis/redis-tutorial.html">https://www.runoob.com/redis/redis-tutorial.html</a></p><h3 id="Redis的安装"><a href="#Redis的安装" class="headerlink" title="Redis的安装"></a>Redis的安装</h3><p>题外话：</p><p>Redis是使用C写的程序，目前主流在Linux操作系统，官方不提供Window版，最新的Redis版：Redis7.x</p><p>官网下载：<a href="https://redis.io/download/">https://redis.io/download/</a></p><p>Redis 的Window版是微软公司自行移植的，目前最新版：Redis-x64-3.2.100</p><p>window版：<a href="https://github.com/microsoftarchive/redis/releases/tag/win-3.2.100">https://github.com/microsoftarchive/redis/releases/tag/win-3.2.100</a></p><p>新版控的同学：</p><p>1&gt;购买阿里云Redis</p><p><a href="https://www.aliyun.com/minisite/goods?taskPkg=amb618all&amp;pkgSid=442814&amp;recordId=4183761&amp;userCode=sd4xtwwm">https://www.aliyun.com/minisite/goods?taskPkg=amb618all&amp;pkgSid=442814&amp;recordId=4183761&amp;userCode=sd4xtwwm</a></p><p>2&gt;购买阿里云ECS</p><p>购买服务器，自己搭建最新版的Redis</p><p>3&gt;安装虚拟机：Linux，再安装最新版Redis</p><p>这个，项目三讲Linux操作系统时再教。</p><h4 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a><strong>服务端</strong></h4><p>版本：Redis-x64-3.2.100.msi</p><p>傻瓜式安装,下一步,下一步就可以了</p><p><strong>注意：添加到环境变量中</strong></p><p><img src="/2023/07/11/redis/32fe25ef354f50b88cb9ec6edc4afa32929c18dc.jpg" alt="img">*</p><p><strong>注意：默认端口</strong></p><p><img src="/2023/07/11/redis/1f9feadca039131f886b976ce275f2c4ed990adc.jpg" alt="Windowsä¸å®è£Redisæå¡">*</p><p><strong>注意：最大内存</strong></p><p><img src="/2023/07/11/redis/486884883913e8e5b969e909352f477047187ddc.jpg" alt="Windowsä¸å®è£Redisæå¡">*</p><p><strong>测试是否成功</strong></p><p><img src="/2023/07/11/redis/image-20220829193133720.png" alt="image-20220829193133720">*</p><p><img src="/2023/07/11/redis/image-20220829193150712.png" alt="image-20220829193150712">*</p><h4 id="客户端–redisclient"><a href="#客户端–redisclient" class="headerlink" title="客户端–redisclient"></a><strong>客户端</strong>–redisclient</h4><p>打开CMD命令框，输入命令：<strong>java -jar  redisclient.jar</strong></p><p><img src="/2023/07/11/redis/image-20220829192445744.png" alt="image-20220829192445744"></p><h4 id="客户端–RedisDesktopClient"><a href="#客户端–RedisDesktopClient" class="headerlink" title="客户端–RedisDesktopClient"></a><strong>客户端</strong>–RedisDesktopClient</h4><p><img src="/2023/07/11/redis/image-20220829192521886.png" alt="image-20220829192521886"></p><h4 id="客户端–rdm"><a href="#客户端–rdm" class="headerlink" title="客户端–rdm"></a><strong>客户端</strong>–rdm</h4><p><img src="/2023/07/11/redis/image-20220829192607349.png" alt="image-20220829192607349"></p><h1 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h1><h2 id="概况"><a href="#概况" class="headerlink" title="概况"></a>概况</h2><p>Redis支持的存储数据类型有很多：</p><p>常用：<strong>string</strong>（字符串），<strong>hash</strong>（哈希），<strong>list</strong>（列表），<strong>set</strong>（集合）及<strong>zset</strong>(sorted set：有序集合)</p><p>不常用：HyperLogLog，Bitmap(位图)，Bloom Filter(布隆过滤器)，Geospatial(地理位置) ，Module(模块)， Streams(流信息)</p><p>此处重点讲解常用的类型。</p><p><strong>命令格式</strong></p><p>类型命令    key       参数数据</p><p>   set           name    dafei</p><p><strong>操作建议</strong></p><p>Redis操作有点类似Java的Map集合，都是key-value形式存储数据，在学习过程中，可以进行类比。</p><p>另外Redis中的key大部分为String类型，value值根据缓存数据结构可以选用：string，hash，list，set，zset等类型。</p><p><strong>注意：下面讲的各种类型，表述的是缓存数据的value类型。</strong></p><h2 id="String类型"><a href="#String类型" class="headerlink" title="String类型"></a>String类型</h2><p>String类型包含多种类型的特殊类型，并且是二进制安全的，其值可以是数值，可以是字符串，也可以是二进制数据。</p><p>类似Java中：<strong>Map&lt;String,  String/Number&gt;  map</strong></p><p>在Redis内容数据存储结构：</p><p><img src="/2023/07/11/redis/image-20220829195054925.png" alt="image-20220829195054925">*</p><h3 id="常用的命令"><a href="#常用的命令" class="headerlink" title="常用的命令"></a><strong>常用的命令</strong></h3><table><thead><tr><th>命令格式</th><th>功能</th><th>案例</th></tr></thead><tbody><tr><td>set key value</td><td>将key-value缓存redis中</td><td>set name dafei</td></tr><tr><td>get key</td><td>从redis中获取key对应value值</td><td>get name</td></tr><tr><td>incr key</td><td>将key对应value值 + 1</td><td>incr age</td></tr><tr><td>decr key</td><td>将key对应value值-1</td><td>decr age</td></tr><tr><td>setex key seconds value</td><td>将key-value缓存到redis中，seconds 秒后失效</td><td>setex  sex  10  man</td></tr><tr><td>ttl key</td><td>查看key存活时间</td><td>ttl sex</td></tr><tr><td>del  key</td><td>从redis中删除key</td><td>del name</td></tr><tr><td>setnx key value</td><td>如果key已经存，不做任何操作，如果key不存，直接添加</td><td>setnx  name xiaofei</td></tr></tbody></table><h3 id="非常用命令"><a href="#非常用命令" class="headerlink" title="非常用命令"></a><strong>非常用命令</strong></h3><table><thead><tr><th>命令格式</th><th>功能</th><th>案例</th></tr></thead><tbody><tr><td>incrby key increment</td><td>给key对应值加increment</td><td>incrby age 10</td></tr><tr><td>mset k1 v1 k2 v2….</td><td>批量添加k1v1 k2v2 key value对</td><td>mset name dafei age 18</td></tr><tr><td>mget k1  k2….</td><td>批量获取k1, k2的值</td><td>mget name  age</td></tr><tr><td>append key  value</td><td>在key对应的value值中拼+value</td><td>append name yes</td></tr><tr><td>setrange key  offset  value</td><td>修改key对应的value值,替换为指定value,冲offset索引位置开始</td><td>setrange name 2   xx</td></tr></tbody></table><h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><p>1&gt;计数器</p><p>如：视频播放数系统就是使用redis作为视频播放数计数的基础组件。</p><p><strong>incr  viewnum 1</strong></p><p>2&gt;共享session</p><p>出于负载均衡的考虑，分布式服务会将用户信息的访问均衡到不同服务器上，用户刷新一次访问可能会需要重新登录，为避免这个问题可以用redis将用户session集中管理，  在这种模式下只要保证redis的高可用和扩展性的，每次获取用户更新或查询登录信息都直接从redis中集中获取。</p><p><img src="/2023/07/11/redis/images%5Cimage-20220831190303396.png" alt="image-20220831190303396"></p><p><strong>user_login_info:uid—-&gt;{“id”:1, “name”:”dafei”, “age”:18}</strong></p><h2 id="Hash类型"><a href="#Hash类型" class="headerlink" title="Hash类型"></a>Hash类型</h2><p>Hash类型是String类型的field和value的映射表，或者说是一个String集合。它特别适合存储对象，相比较而言，将一个对象存储在Hash类型里要比存储在String类型里占用更少的内存空间。</p><p>类似Java中：<strong>Map&lt;String, Map&lt;String, ?&gt;&gt; map</strong></p><p><img src="/2023/07/11/redis/image-20220831190853799.png" alt="image-20220831190853799">*</p><h3 id="常用的命令-1"><a href="#常用的命令-1" class="headerlink" title="常用的命令"></a><strong>常用的命令</strong></h3><table><thead><tr><th>命令格式</th><th>功能</th><th>案例</th></tr></thead><tbody><tr><td>hset key field  value</td><td>将field  value对缓存到redis中hash中，键值为key</td><td>hset user name dafei</td></tr><tr><td>hget key field</td><td>从key对应hash列表中获取field字段</td><td>hget user  name</td></tr><tr><td>hexists key  field</td><td>判断key对应的hash列表是否存在 field字段</td><td>hexists user age</td></tr><tr><td>hdel key  field</td><td>删除key对应hash列表中field字段</td><td>hdel user age</td></tr><tr><td>hincrby  key  field  increment</td><td>给key对应hash列表中field字段 + increment</td><td>hincrby user  age 10</td></tr><tr><td>hlen key</td><td>查看key对应的hash列表field的数量</td><td>hlen user</td></tr><tr><td>hkeys  key</td><td>获取key对应的hash列表所有的field值</td><td>hkeys  user</td></tr><tr><td>hvals  key</td><td>获取key对应的hash列表所有的field对应的value值</td><td>kvals  user</td></tr><tr><td>hgetall key</td><td>获取key对应的hash列表中所有的field及其对应的value值</td><td>hgetall user</td></tr></tbody></table><h3 id="应用场景-1"><a href="#应用场景-1" class="headerlink" title="应用场景"></a>应用场景</h3><p>Hash结构相对于字符串序列化缓存信息更加直观，并且在更新操作上更加便捷。</p><p><strong>共享session设计</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span>{</span><br><span class="line"><span class="keyword">private</span> String userame;</span><br><span class="line"><span class="keyword">private</span> String password;</span><br><span class="line"><span class="keyword">private</span>  <span class="type">int</span> age;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>登录用户：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">"dafei"</span>, <span class="string">"666"</span>, <span class="number">18</span>);</span><br></pre></td></tr></tbody></table></figure><p>登录缓存：</p><p>key：<strong>user_token</strong>                value：<strong>new User(“dafei”, “666”, 18)</strong></p><p>-———————————————————————————————</p><p>方案1： 将user对象转换json格式字符串存redis  【侧重于查， 改非常麻烦】</p><p>key                            value</p><p>-——————————————————————————————–</p><p><strong>user_token</strong>   ：   <strong>“{name:dafei, age:18, password:666}”</strong></p><p>方案2： 将user对象转换hash对象存redis【侧重于改，查询相对麻烦】</p><p>key                            value</p><p>-——————————————————————————————–</p><p><strong>user_token</strong>   ：  <strong>{</strong></p><p>​                                    <strong>name：ddafei</strong></p><p>​                                    <strong>age ：    18</strong></p><p>​                                    <strong>password： 666</strong></p><p>​                                 <strong>}</strong></p><h2 id="List类型"><a href="#List类型" class="headerlink" title="List类型"></a>List类型</h2><p>Redis中的List类似Java中的Queue,也可以当做List来用.</p><p>List类型是一个链表结构的集合，其主要功能有push、pop、获取元素等，更详细的说,List类型是一个双端链表的结构，我们可以通过相关操作进行集合的头部或者尾部添加删除元素，List的设计非常简单精巧，即可以作为栈,又可以作为队列，满足绝大多数需求.</p><p>类似Java中：<strong>Map&lt;String, List&gt;  map</strong></p><p><img src="/2023/07/11/redis/image-20220831194916914.png" alt="image-20220831194916914">*</p><h3 id="常用的命令-2"><a href="#常用的命令-2" class="headerlink" title="常用的命令"></a><strong>常用的命令</strong></h3><table><thead><tr><th>命令格式</th><th>功能</th><th>案例</th></tr></thead><tbody><tr><td>rpush  key  value</td><td>从右边往key集合中添加value值</td><td>rpush hobby java</td></tr><tr><td>lrange key start stop</td><td>从左边开始列表key集合，从start位置开始，stop位置结束</td><td>lrange hobby 0 -1</td></tr><tr><td>lpush key value</td><td>从左边往key集合中添加value值</td><td>lpush hobby c++</td></tr><tr><td>lpop key</td><td>弹出key集合中最左边的数据</td><td>lpop hobby</td></tr><tr><td>rpop key</td><td>弹出key集合中最右边的数据</td><td>rpop hobby</td></tr><tr><td>llen key</td><td>获取列表长度</td><td>llen hooby</td></tr></tbody></table><h3 id="非常用命令-1"><a href="#非常用命令-1" class="headerlink" title="非常用命令"></a><strong>非常用命令</strong></h3><table><thead><tr><th>命令格式</th><th>功能</th><th>案例</th></tr></thead><tbody><tr><td>linsert key before pivot value</td><td>操作key集合，在pivot值之前插入value</td><td>linsert hobby before java  c#</td></tr><tr><td>linsert key  after  pivot value</td><td>操作key集合，在pivot值之后插入value</td><td>linsert hobby after  java  c#</td></tr><tr><td>lset key  index  value</td><td>操作key集合，更新索引index位置值为value</td><td>lset hobby 1  go</td></tr><tr><td>lrem key count  value</td><td>操作key集合，删除 count个 value值</td><td>lrem hobby 3   go</td></tr><tr><td>ltrim   key  start stop</td><td>操作key集合，从start到stop截取自列表</td><td>ltrim  hobby 2   4</td></tr><tr><td>lindex  key  index</td><td>操作key集合，获取索引为index位置的数据</td><td>lindex  hobby 1</td></tr></tbody></table><h3 id="应用场景-2"><a href="#应用场景-2" class="headerlink" title="应用场景"></a>应用场景</h3><p>1&gt;用户收藏文章列表：</p><p>key：user_favor_article_list</p><p>value: [aid1, aid2, aid3……]</p><h2 id="Set类型"><a href="#Set类型" class="headerlink" title="Set类型"></a>Set类型</h2><p>Set集合是String类型的无序集合,set是通过HashTable实现的，对集合我们可以取<strong>交集、并集、差集。</strong></p><p>类似Java中：<strong>Map&lt;String, Set&gt;  map</strong></p><p><img src="/2023/07/11/redis/image-20220901191547262.png" alt="image-20220901191547262">*</p><h3 id="常用的命令-3"><a href="#常用的命令-3" class="headerlink" title="常用的命令"></a><strong>常用的命令</strong></h3><table><thead><tr><th>命令格式</th><th>功能</th><th>案例</th></tr></thead><tbody><tr><td>sadd key  members [….]</td><td>往key 集合中添加member元素</td><td>sadd myset a  b  c</td></tr><tr><td>smembers key</td><td>遍历key集合中所有的元素</td><td>smembers myset</td></tr><tr><td>srem  key members [….]</td><td>删除key集合中members元素</td><td>srem myset a</td></tr><tr><td>spop key count</td><td>从key集合中随机弹出count个元素</td><td>spop myset 1</td></tr></tbody></table><h3 id="非常用命令-2"><a href="#非常用命令-2" class="headerlink" title="非常用命令"></a><strong>非常用命令</strong></h3><table><thead><tr><th>命令格式</th><th>功能</th><th>案例</th></tr></thead><tbody><tr><td><strong>sdiff key1   key2</strong></td><td><strong>返回key1中特有的元素(差集)</strong></td><td><strong>sdiff key1 key2</strong></td></tr><tr><td>sidiffstore  dest  key1 key2</td><td>返回key1中特有的元素，并将返回值缓存到dest集合中</td><td>sidiffstore  dest  key1 key2</td></tr><tr><td><strong>sinter key1 key2</strong></td><td><strong>返回key1跟key2集合的交集</strong></td><td><strong>sinter key1 key2</strong></td></tr><tr><td>sinterstore  dest key1 key2</td><td>返回key1跟key2集合的交集，并将返回值缓存到dest集合中</td><td>sinterstore  dest key1 key2</td></tr><tr><td><strong>sunion key1  key2</strong></td><td><strong>返回key1跟key2集合的并集</strong></td><td><strong>sunion key1  key2</strong></td></tr><tr><td>sunionstore dest key1  key2</td><td>返回key1跟key2集合的并集，并将返回值缓存到dest集合中</td><td>sunionstore dest key1  key2</td></tr><tr><td>smove source destination member</td><td>将source集合中member元素移动到destination集合中</td><td>smove key1  key2 aa</td></tr><tr><td>sismember key member</td><td>判断member元素是否在key集合中</td><td>sismember key1   aa</td></tr><tr><td>srandmember  key  count</td><td>随机获取set集合中count 个元素</td><td>srandmember key1 1</td></tr></tbody></table><h3 id="应用场景-3"><a href="#应用场景-3" class="headerlink" title="应用场景"></a>应用场景</h3><p>1，去重；</p><p>2，抽奖;</p><p>​           1：准备一个抽奖池:sadd luckydraw 1 2 3 4 5 6 7 8 9 10 11 12 13</p><p>​           2：抽3个三等奖:spop luckydraw 3</p><p>​           3：抽2个二等奖:spop luckydraw 2</p><p>​           4：抽1个:一等奖:spop luckydraw 1</p><h2 id="Sorted-set-类型"><a href="#Sorted-set-类型" class="headerlink" title="Sorted set 类型"></a>Sorted set 类型</h2><p>Sorted set 也称Zset类型，是一种具有排序效果的set集合。它跟set集合一样也是 string 类型元素的集合，且不允许重复的成员。并且要求每个元素都会关联一个double 类型的分数。后续可以通过分数来为集合中的成员进行从小到大的排序。</p><p>Sorted set集合是通过哈希表实现的，所以添加，删除，查找的复杂度都是 O(1)。 集合中最大的成员数为 232 - 1 (4294967295, 每个集合可存储40多亿个成员)。</p><p>数据缓存结构：</p><p><img src="/2023/07/11/redis/image-20220901200221440.png" alt="image-20220901200221440">*</p><h3 id="常用的命令-4"><a href="#常用的命令-4" class="headerlink" title="常用的命令"></a><strong>常用的命令</strong></h3><table><thead><tr><th>命令格式</th><th>功能</th><th>案例</th></tr></thead><tbody><tr><td>zadd key score member</td><td>往key集合中添加member元素，分数为score</td><td>zadd players 100  a</td></tr><tr><td>zincrby  key increment  member</td><td>将key集合中的member元素 分数 + increment</td><td>zadd players 100  a</td></tr><tr><td>zrange  key  start  stop [withscores]</td><td>将key集合中的元素按分数升序排列 [显式分数]</td><td>zrange players 0 -1  withscores</td></tr><tr><td>zrevrange key  start  stop [withscores]</td><td>将key集合中的元素按分数降序排列 [显式分数]</td><td>zrevrange players 0 -1  withscores</td></tr><tr><td>zrank  key  member</td><td>返回member元素在key结合中的正序排名</td><td>zrank players  a</td></tr><tr><td>zrevrank key  member</td><td>返回member元素在key结合中的倒序排名</td><td>zrevrank players  a</td></tr><tr><td>zcard  key</td><td>返回key集合元素个数</td><td>zcard  players</td></tr></tbody></table><h3 id="非常用命令-3"><a href="#非常用命令-3" class="headerlink" title="非常用命令"></a><strong>非常用命令</strong></h3><table><thead><tr><th>命令格式</th><th>功能</th><th>案例</th></tr></thead><tbody><tr><td>zrangebyscore  key  min  max  [withscores]</td><td>按[min, max) 分数范围返回key集合中元素(正序)</td><td>zrangebyscore players  200 300  withscores</td></tr><tr><td>zrevrangebyscore key  min  max  [withscores]</td><td>按[min, max) 分数范围返回key集合中元素(倒序)</td><td>zrevrangebyscore players  200 300  withscores</td></tr><tr><td>zrem key member</td><td>删除key集合中member元素与分数</td><td>zrem players  a</td></tr><tr><td>zremrangebyscore  key min max  withscores</td><td>按[min, max) 分数范围删除key集合中元素</td><td>zremrangebyscore  players  200 300  withscores</td></tr><tr><td>zremrangebyrank  key start  stop</td><td>删除key集合正序排名落在[start, stop) 范围元素</td><td>zremrangebyrank  players  10  20</td></tr><tr><td>zcount key min max</td><td>按照分数范围[min, max]统计key集合中元素个数</td><td>zcount  players  100 300</td></tr></tbody></table><h3 id="应用场景-4"><a href="#应用场景-4" class="headerlink" title="应用场景"></a>应用场景</h3><p>排行榜：有序集合经典使用场景。例如视频网站需要对用户上传的视频做排行榜，榜单维护可能是多方面：按照时间、按照播放量、按照获得的赞数等。</p><h2 id="类型总结"><a href="#类型总结" class="headerlink" title="类型总结"></a>类型总结</h2><p>一个问题，Redis在项目中如何使用？</p><p>思考点：</p><p>1&gt;项目是否需要使用到缓存？使用</p><p>2&gt;使用缓存是否选用Redis？选用</p><p>3&gt;使用Redis那该怎么设计Key-Value值？</p><p>这里重点讨论Redis的KV对的设计。</p><h3 id="Value设计"><a href="#Value设计" class="headerlink" title="Value设计"></a>Value设计</h3><p>先说value值的设计其实就是value类型选用： String， Hash， List， Set， Sort Set</p><p>一般考虑：</p><ul><li>是否需要排序？要使用Sort Set</li><li>缓存的数据是多个值还是单个值，</li><li>多个值：允许重复选List  不允许重复选择Set</li><li>单个值：简单值选择String， 对象值选择Hash</li></ul><p>一种取巧的方式：</p><ul><li>是否需要排序？要使用Sort Set</li><li>剩下使用String</li></ul><p>操作方式：</p><p>所有value之后都转换成json格式字符串，然后缓存到Redis，原因：Java操作方便，减少泛型操作麻烦</p><p>比如：</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt;list = ...</span><br><span class="line">Set&lt;String&gt; set = ....</span><br><span class="line">Map&lt;String, Object&gt; map = ....</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">List&lt;Object&gt;  list = redis对象.getList</span><br><span class="line">Set&lt;Object&gt; set =redis对象.getSet   </span><br><span class="line">Map&lt;Object, Object&gt; map  =  redis对象.getMap</span><br></pre></td></tr></tbody></table></figure><p>不管存放啥数据类型，从reds中获取出来都是Object类型，后续对象强制转换麻烦，干脆直接使用字符串。</p><h3 id="Key设计"><a href="#Key设计" class="headerlink" title="Key设计"></a>Key设计</h3><p>Redis 的key 设计讲究4个性：</p><h4 id="唯一性"><a href="#唯一性" class="headerlink" title="唯一性"></a><strong>唯一性</strong></h4><p>Redis 类似Map集合，key必须保证唯一，缓存同一个key时，后者会覆盖前者，所有必须要求唯一，那如何保证唯一呢？</p><p>最常用的方式：<strong>使用缓存数据的主键作为key</strong>。</p><p>比如：缓存员工信息</p><p>key                             value</p><p>-—————————————————————</p><p>1                                员工1</p><p>2                                员工2</p><p>其中的1， 2 是员工的id</p><h4 id="可读性"><a href="#可读性" class="headerlink" title="可读性"></a><strong>可读性</strong></h4><p>可读性是保证Redis的key能做到见名知意，上面的员工id1， 员工id2 虽说能保证key唯一，但可读性非常差，维护key时，无法从， 1， 2中快速判断该key对应value值。所以一一般在保证key唯一的前提下，给key加上前缀：</p><p>key                                       value</p><p>-—————————————————————</p><p>employee_info:id1            员工1</p><p>employee_info:id2            员工2</p><p>employee_info:id1     employee_info:id2  这样子设计key，可读性就好多了。</p><p>可读性前缀的设计规范千奇百怪，我个人比较推崇的：</p><ul><li><p>普通单值</p><p>key                                       value</p><p>-—————————————————————</p><p>employe_info:id1              员工对象信息</p></li><li><p>类似关系型数据库设计</p><p><strong>表名:主键名:主键值:列名</strong></p><p>key                                       value</p><p>-—————————————————————</p><p>employee : id : 1:info        员工对象信息</p></li><li><p>通用玩法</p><p><strong>业务模块名:业务逻辑含义:其他:value类型</strong></p><p>key                                                        value</p><p>-———————————————————————-</p><p>employee :base.info:id1:hash         员工对象信息</p><p><strong>业务模块名</strong>：表示该key属于哪个功能模块</p><p><strong>业务逻辑含义段</strong>：这里可以使用  <strong>.</strong>  分开， 具体业务逻辑表示</p><p>​    比如：缓存员工权限</p><p>​    employee:auth.permission:id1:set     员工权限集合</p><p><strong>其他</strong>：一般设置唯一标识，比如主键</p><p><strong>value类型</strong>：key对应value类型值，提高可读性。</p></li></ul><h4 id="灵活性–项目二重点讲"><a href="#灵活性–项目二重点讲" class="headerlink" title="灵活性–项目二重点讲"></a><strong>灵活性</strong>–项目二重点讲</h4><p>这个难介绍，一般key保证唯一时，可以使用主键，有的使用，一个主键不能表达出全部意思，可以使用联合主键。</p><p>比如：</p><p>id为1的朋友圈下id为A的评论。</p><p>key                                                        value</p><p>-———————————————————————-</p><p>post:1:reply:A                                    评论内容</p><p>post:1:reply:B                                    评论内容</p><h4 id="时效性"><a href="#时效性" class="headerlink" title="时效性"></a><strong>时效性</strong></h4><p>Redis key一定要设置过期时间。要跟自己的业务场景，需要对key设置合理的过期时间。可以在写入key时，就要追加过期时间；也可以在按照需要动态设置。</p><p>这里要注意：</p><ul><li>不设置过期时间，这种key为永久key，会一直占用内存不释放，时间久了，数量一多，就容易达到服务器的内存上限，导致宕机，开发时一般配合Key过期策略使用哦。</li><li>key的时效性设置，必须根据业务场景进行评估，设置合理有效期；</li></ul><h1 id="Redis全局命令"><a href="#Redis全局命令" class="headerlink" title="Redis全局命令"></a>Redis全局命令</h1><p>全局命令针对的是所有的key，大部分用来做运维，做管理的</p><p>常用的全局key</p><table><thead><tr><th>命令格式</th><th>功能</th><th>案例</th></tr></thead><tbody><tr><td>keys  pattern</td><td>按照pattern 匹配规则，列表redis中所有的key</td><td>keys xxx:*</td></tr><tr><td>exists  key</td><td>判断key是否存在</td><td>exists name</td></tr><tr><td>expire key  seconds</td><td>给key设置过期时间，超时：seconds</td><td>expire name 10</td></tr><tr><td>persist key</td><td>取消key过期时间</td><td>persist  name</td></tr><tr><td>select  index</td><td>切换数据库，默认是第0个，共有【0,15】个</td><td>select 0</td></tr><tr><td>move key   db</td><td>从当前数据库将key移动到指定db库</td><td>move name 1</td></tr><tr><td>randomkey</td><td>随机返回一个key</td><td>randomkey</td></tr><tr><td>rename key newkey</td><td>将key改名为newkey</td><td>rename name  newname</td></tr><tr><td>echo message</td><td>打印message信息</td><td>echo  message</td></tr><tr><td>dbsize</td><td>查看key个数</td><td>dbsize</td></tr><tr><td>info</td><td>查看redis数据库信息</td><td>info</td></tr><tr><td>config get  *</td><td>查看所有redis配置信息</td><td>config get *</td></tr><tr><td>flushdb</td><td>清空当前数据库</td><td>flushdb</td></tr><tr><td>flushall</td><td>清空所有数据库</td><td>flushall</td></tr></tbody></table><h1 id="Redis安全性"><a href="#Redis安全性" class="headerlink" title="Redis安全性"></a>Redis安全性</h1><p>因为Redis速度非常快，所以在一台比较好的服务器下,一个外部用户在一秒内可以进行15w次的密码尝试，这意味你需要设定非常强大的密码来方式暴力破解。此时就需要对Redis进行密码设置啦。</p><p><strong>Linux系统</strong></p><p>编辑 redis.conf文件，找到下面进行保存修改<br><strong>requirepass 自定义密码</strong></p><p>重启Redis服务，访问时，使用带密码的命令：</p><p><strong>redis-cli -a 自定义密码</strong></p><p>否则会提示： (error)NOAUTH Authentication required.</p><p>Window系统</p><p>跟Linux系统一样，区别是，window系统的文件是</p><p><strong>redis.window-service.config</strong></p><h1 id="Redis事务-拓展"><a href="#Redis事务-拓展" class="headerlink" title="Redis事务[拓展]"></a>Redis事务[拓展]</h1><p>一个事务从开始到执行会经历以下三个阶段：</p><ul><li>开始事务。</li><li>命令入队。</li><li>执行事务。</li></ul><p>借用：菜鸟教程中例子</p><p>它先以 <strong>MULTI</strong> 开始一个事务， 然后将多个命令入队到事务中， 最后由 <strong>EXEC</strong> 命令触发事务， 一并执行事务中的所有命令：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">redis 127.0.0.1:6379&gt; MULTI</span><br><span class="line">OK</span><br><span class="line"></span><br><span class="line">redis 127.0.0.1:6379&gt; SET book-name <span class="string">"Mastering C++ in 21 days"</span></span><br><span class="line">QUEUED</span><br><span class="line"></span><br><span class="line">redis 127.0.0.1:6379&gt; GET book-name</span><br><span class="line">QUEUED</span><br><span class="line"></span><br><span class="line">redis 127.0.0.1:6379&gt; SADD tag <span class="string">"C++"</span> <span class="string">"Programming"</span> <span class="string">"Mastering Series"</span></span><br><span class="line">QUEUED</span><br><span class="line"></span><br><span class="line">redis 127.0.0.1:6379&gt; SMEMBERS tag</span><br><span class="line">QUEUED</span><br><span class="line"></span><br><span class="line">redis 127.0.0.1:6379&gt; EXEC</span><br><span class="line">1) OK</span><br><span class="line">2) <span class="string">"Mastering C++ in 21 days"</span></span><br><span class="line">3) (<span class="built_in">integer</span>) 3</span><br><span class="line">4) 1) <span class="string">"Mastering Series"</span></span><br><span class="line">   2) <span class="string">"C++"</span></span><br><span class="line">   3) <span class="string">"Programming"</span></span><br></pre></td></tr></tbody></table></figure><p>单个 Redis 命令的执行是原子性的，但 Redis 没有在事务上增加任何维持原子性的机制，所以 Redis 事务的执行并不是原子性的。</p><p>Redis事务可以理解为一个<strong>打包的批量执行脚本</strong>，但批量指令并非原子化的操作，中间某条指令的失败不会导致前面已做指令的回滚，也不会造成后续的指令不做。</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; multi</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379(TX)&gt; <span class="built_in">set</span> name dafei</span><br><span class="line">QUEUED</span><br><span class="line">127.0.0.1:6379(TX)&gt; <span class="built_in">set</span> age 18</span><br><span class="line">QUEUED</span><br><span class="line">127.0.0.1:6379(TX)&gt; incr age </span><br><span class="line">QUEUED</span><br><span class="line">127.0.0.1:6379(TX)&gt; incr name</span><br><span class="line">QUEUED</span><br><span class="line">127.0.0.1:6379(TX)&gt; get age</span><br><span class="line">QUEUED</span><br><span class="line">127.0.0.1:6379(TX)&gt; get name</span><br><span class="line">QUEUED</span><br><span class="line">127.0.0.1:6379(TX)&gt; <span class="built_in">exec</span></span><br><span class="line">1) OK</span><br><span class="line">2) OK</span><br><span class="line">3) (<span class="built_in">integer</span>) 19</span><br><span class="line">4) (error) ERR value is not an <span class="built_in">integer</span> or out of range</span><br><span class="line">5) <span class="string">"19"</span></span><br><span class="line">6) <span class="string">"dafei"</span></span><br><span class="line">127.0.0.1:6379&gt; </span><br></pre></td></tr></tbody></table></figure><p>Redis 事务可以一次执行多个命令， 并且带有以下三个重要的保证：</p><ul><li>批量操作在发送 EXEC 命令前被放入队列缓存。</li><li>收到 EXEC 命令后进入事务执行，事务中任意命令执行失败，其余的命令依然被执行。</li><li>在事务执行过程，其他客户端提交的命令请求不会插入到事务执行命令序列中。</li></ul><h1 id="Redis持久化机制-拓展"><a href="#Redis持久化机制-拓展" class="headerlink" title="Redis持久化机制[拓展]"></a>Redis持久化机制[拓展]</h1><h2 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h2><p>先来一个小实验，大家可以一起实现一下</p><p>步骤1：在Redis中添加2个key-value对</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; <span class="built_in">set</span> aa aa</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; <span class="built_in">set</span> bb bb</span><br><span class="line">OK</span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br></pre></td></tr></tbody></table></figure><p>步骤2：重启Redis 服务器，在执行keys * 观察数据</p><p>步骤3：分析结果</p><p>会出现一下几种结果：</p><ul><li>之前的key在，aa  bb 都在（最理想的结果）</li><li>之前的key在，aa也在，bb不见了</li><li>之前的key在，aa， bb 不在</li><li>之前的key， aa， bb 都不在了（最坏的结果）</li></ul><p>思考：</p><p>为啥会这样？以我们对内存的操作理解，按道理重启之后数据应该全丢失了，为啥Redis 可能丢失，也可能不丢失，为何？</p><p>这里就涉及到Redis的持久化机制了。</p><p><img src="/2023/07/11/redis/image-20220902113153504.png" alt="image-20220902113153504">*</p><p>Redis持久化机制目前以后3种，分别为：</p><p>1&gt;<strong>快照方式</strong>（RDB, Redis DataBase）</p><p>2&gt;<strong>文件追加方式</strong>（AOF, Append Only File）</p><p>3&gt;<strong>混合持久化方式</strong>（Redis4版本之后）</p><h2 id="RDB方式"><a href="#RDB方式" class="headerlink" title="RDB方式"></a>RDB方式</h2><p>Snapshotting(快照)默认方式，将内存数据中以快照的方式写入到二进制文件中，默认为dump.rdb。触发RDB持久化过程分手动触发与自动触发。</p><h3 id="触发机制"><a href="#触发机制" class="headerlink" title="触发机制"></a>触发机制</h3><p><strong>手动触发</strong></p><p>使用save命令：会阻塞当前Redis服务器，知道RDB过程完成为主，如果内存数据较多，会造成长时间阻塞，影响其他命令的使用，不建议轻易使用</p><p>使用bgsave命令：Redis进程执行fork指令创建子进程，由子进程实现RDB持久化，有需要时建议使用bgsave命令。</p><p><strong>自动触发</strong></p><p>使用save相关配置，格式： save m n      表示m秒内数据集存在n次修改时会自动触发bgsave命令。</p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">save <span class="number">900</span> <span class="number">1</span>  #<span class="number">900</span>秒内如果超过<span class="number">1</span>个Key被修改则发起快照保存</span><br><span class="line">save <span class="number">300</span> <span class="number">10</span> #<span class="number">300</span>秒内如果超过<span class="number">10</span>个key被修改,则发起快照保存</span><br><span class="line">save <span class="number">60</span> <span class="number">10000</span></span><br></pre></td></tr></tbody></table></figure><p><img src="/2023/07/11/redis/image-20220902151151422.png" alt="image-20220902151151422">*</p><h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><ul><li><p>RDB快照文件是一个紧凑压缩的二进制文件，非常使用用于备份，全量复制等场景。开发中可以按照每6小时执行一次bgsave备份，用于容灾备份。</p></li><li><p>Redis加载RDB恢复数据远远快于AOF方式</p></li></ul><h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><ul><li>RDB无法做到实时持久化/秒级持久化，每次bgsave时都需要fork子进程，频繁执行有时间成本。</li><li>RDB快照文件不同版本格式不一样，容易引起兼容问题。</li></ul><h2 id="AOF方式"><a href="#AOF方式" class="headerlink" title="AOF方式"></a>AOF方式</h2><p>AOF与RDB不一样，它是一独立日志的方式记录每次写命令，重启时再重新执行AOF文件中命令达到恢复数据的目的。解决了数据持久化的实时性的问题。</p><p>Redis默认是不开启的，需要使用时，需要配置： <strong>appendonly yes</strong></p><p>AOF 有3种文件同步策略</p><table><thead><tr><th>策略</th><th>解释</th></tr></thead><tbody><tr><td>appendfsync always</td><td>收到命令就立即写到磁盘,效率最慢.但是能保证完全的持久化</td></tr><tr><td>appendfsync everysec</td><td>每秒写入磁盘一次,在性能和持久化方面做了很好的折中</td></tr><tr><td>appendfsync no</td><td>完全以依赖os，一般同步周期是30秒</td></tr></tbody></table><p><img src="/2023/07/11/redis/image-20220902152951385.png" alt="image-20220902152951385">*</p><h3 id="优点-1"><a href="#优点-1" class="headerlink" title="优点"></a>优点</h3><ul><li><p>AOF方式数据安全性更高，配置得当，最多损失1秒的数据量</p></li><li><p>在不小心执行flushall命令，也可以通过AOF方式恢复(删除最后一个命令即可)</p></li><li><p>AOF 日志是一个增量日志文件，不会存在断电时出现损坏问题。即使出现问题，redis-check-aof 工具也能够轻松修复它。</p></li><li><p>当 AOF 变得太大时，Redis 能够在后台自动重写 AOF</p></li></ul><h3 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h3><ul><li>相同数据量来说，AOF文件体积通常大于RDB文件</li><li>数据持久化性能上来说，AOF 比 RDB 慢</li></ul><h2 id="RDB-AOF混合方式"><a href="#RDB-AOF混合方式" class="headerlink" title="RDB-AOF混合方式"></a>RDB-AOF混合方式</h2><p>混合持久化是结合了 RDB 和 AOF 的优点，在写入的时候，先把当前的数据以 RDB 的形式写入文件的开头，再将后续的操作命令以 AOF 的格式存入文件。即以 RDB 作为全量备份，AOF 作为增量备份，来提高备份效率。这样既能保证 Redis 重启时的速度，又能防止数据丢失的风险， 这就是 Redis 4.0 之后推出的 <strong>RDB-AOF 混合持久化模式，其作为默认配置来使用</strong>。</p><h2 id="持久化机制选择"><a href="#持久化机制选择" class="headerlink" title="持久化机制选择"></a>持久化机制选择</h2><ul><li><p>如果对数据安全性有非常高的要求，建议 RDB 和 AOF 同时启用。</p></li><li><p>如果对数据安全性要求不是很高，能够容忍数据的丢失，建议单独使用 RDB。</p></li><li><p>不推荐单独使用 AOF，因为对于进行数据库备份、更快重启以及 AOF 引擎中出现错误的情况来说，RDB 是更好的选择。</p></li><li><p>如果没特殊要求，Redis又是4.x版本以上，可以选择RDB-AOF混合方式。</p></li></ul><p>如果不是混合模式，而是普通的RDB与AOF一起启动时，Redis加载数据执行流程</p><p><img src="/2023/07/11/redis/image-20220902153031549.png" alt="image-20220902153031549">*</p><h1 id="Redis内存淘汰机制-拓展"><a href="#Redis内存淘汰机制-拓展" class="headerlink" title="Redis内存淘汰机制[拓展]"></a>Redis内存淘汰机制[拓展]</h1><h2 id="引言-1"><a href="#引言-1" class="headerlink" title="引言"></a>引言</h2><p>Redis 启动会加载一个配置：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">maxmemory &lt;byte&gt;   //内存上限</span><br></pre></td></tr></tbody></table></figure><p>默认值为 0 (window版的限制为100M)，表示默认设置Redis内存上限。但是真实开发还是需要提前评估key的体量，提前设置好内容上限。</p><p>此时思考一个问题，开发中，在设置完内存上限之后，如果Redis key达到上限了，该怎么办？这就设置到Redis的内存淘汰机制了。</p><h2 id="内存淘汰算法"><a href="#内存淘汰算法" class="headerlink" title="内存淘汰算法"></a>内存淘汰算法</h2><p>Redis内存淘汰机制也可以称之为key内卷机制，当资源不足时，该如何选择？</p><p>常见的内存淘汰机制分为四大类：</p><ul><li><strong>LRU：</strong>LRU是Least recently used，最近最少使用的意思，简单的理解就是从数据库中删除最近最少访问的数据，该算法认为，你长期不用的数据，那么被再次访问的概率也就很小了，淘汰的数据为最长时间没有被使用，仅与时间相关。</li></ul><p><img src="/2023/07/11/redis/image-20220902161050652.png" alt="image-20220902161050652"></p><ul><li><p><strong>LFU：</strong>LFU是Least Frequently Used，最不经常使用的意思，简单的理解就是淘汰一段时间内，使用次数最少的数据，这个与频次和时间相关。</p><p><img src="/2023/07/11/redis/image-20220902161057116.png" alt="image-20220902161057116"></p></li><li><p><strong>TTL：</strong>Redis中，有的数据是设置了过期时间的，而设置了过期时间的这部分数据，就是该算法要解决的对象。如果你快过期了，不好意思，我内存现在不够了，反正你也要退休了，提前送你一程，把你干掉吧。</p></li><li><p>随机淘汰：生死有命，富贵在天，是否被干掉，全凭天意了。</p></li></ul><h2 id="Redis淘汰策略"><a href="#Redis淘汰策略" class="headerlink" title="Redis淘汰策略"></a>Redis淘汰策略</h2><p>Redis 通过配置</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">maxmemroy-policy  </span><br></pre></td></tr></tbody></table></figure><p>来配置指定具体的淘汰机制，可供选择的值有：</p><p>　通过maxmemroy-policy可以配置具体的淘汰机制，看了网上很多文章说只有6种，其实有8种，可以看Redis5.0的配置文件，上面有说明：</p><ul><li>volatile-lru -&gt; 找出已经设置过期时间的数据集，将最近最少使用（被访问到）的数据干掉。</li><li>volatile-ttl -&gt; 找出已经设置过期时间的数据集，将即将过期的数据干掉。</li><li>volatile-random -&gt; 找出已经设置过期时间的数据集，进行无差别攻击，随机干掉数据。</li><li>volatile-lfu -&gt; 找出已经设置过期时间的数据集，将一段时间内，使用次数最少的数据干掉。</li></ul><ul><li>allkeys-lru -&gt;与第1个差不多，数据集从设置过期时间数据变为全体数据。</li><li>allkeys-lfu -&gt; 与第4个差不多，数据集从设置过期时间数据变为全体数据。</li><li>allkeys-random -&gt; 与第3个差不多，数据集从设置过期时间数据变为全体数据。</li></ul><ul><li>no-enviction -&gt; 什么都不干，报错，告诉你内存不足，这样的好处是可以保证数据不丢失</li></ul><p><strong>系统默认选择： noenviction</strong> </p><h1 id="过期Key处理-拓展"><a href="#过期Key处理-拓展" class="headerlink" title="过期Key处理[拓展]"></a>过期Key处理[拓展]</h1><p>接下讨论一个问题：Redis的key过期了，该如何清理问题。</p><p>Redis给出3种实现方案：</p><p><strong>惰性删除</strong>：当访问Key时，才去判断它是否过期，如果过期，直接干掉。这种方式对CPU很友好，但是一个key如果长期不用，一直存在内存里，会造成内存浪费。</p><p><strong>定时删除</strong>：设置键的过期时间的同时，创建一个定时器，当到达过期时间点，立即执行对Key的删除操作，这种方式对CPU不友好，得额外让出CPU维护定时器。</p><p><strong>定期删除</strong>：隔一段时间，对数据进行一次检查，删除里面的过期Key，至于要删除多少过期Key，检查多少数据，则由算法决定。</p><p><strong>Redis服务器实际使用的是惰性删除和定期删除两种策略：通过配合使用这两种删除策略，可以很好地在合理使用CPU和避免浪费内存之间取得平衡。</strong></p><h1 id="Redis编程"><a href="#Redis编程" class="headerlink" title="Redis编程"></a>Redis编程</h1><h2 id="概况-1"><a href="#概况-1" class="headerlink" title="概况"></a>概况</h2><p>Redis编程就是使用编程方式操作Redis，当前Redis支持的编程语言有：<a href="https://redis.io/docs/clients/">https://redis.io/docs/clients/</a></p><p><img src="/2023/07/11/redis/image-20220716145405471.png" alt="image-20220716145405471"></p><p>这里以Java为开发语言，选择Java点击进去</p><p><img src="/2023/07/11/redis/image-20220716145807103.png" alt="image-20220716145807103"></p><p>java实现操作Redis的客户端有很多，其中名气最高的：<strong>Redisson</strong>，<strong>Jedis</strong>，<strong>lettuce</strong> 3个客户端，其中Jedis，lettuce侧重于单例Redis 数据库的 CRUD（增删改查），Redisson 侧重于分布式开发。当前重点讲解Jedis与lettuce的使用，后续有机会再重点讲解Redisson使用。</p><h2 id="Jedis"><a href="#Jedis" class="headerlink" title="Jedis"></a>Jedis</h2><p>项目使用的SpringBoot，所以重点讲解SpringBoot继承Jedis</p><p><strong>步骤1：建项目，导入依赖</strong></p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>redis.clients<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jedis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤2：导入配置文件</strong></p><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#redis配置--jedis版</span></span><br><span class="line"><span class="attr">jedis:</span></span><br><span class="line">  <span class="attr">pool:</span></span><br><span class="line">    <span class="comment">#redis服务器的IP</span></span><br><span class="line">    <span class="attr">host:</span> <span class="string">localhost</span></span><br><span class="line">    <span class="comment">#redis服务器的Port</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">    <span class="comment">#数据库密码</span></span><br><span class="line">    <span class="attr">password:</span></span><br><span class="line">    <span class="comment">#连接超时时间</span></span><br><span class="line">    <span class="attr">timeout:</span> <span class="number">7200</span></span><br><span class="line">    <span class="comment">#最大活动对象数</span></span><br><span class="line">    <span class="attr">maxTotall:</span> <span class="number">100</span></span><br><span class="line">    <span class="comment">#最大能够保持idel状态的对象数</span></span><br><span class="line">    <span class="attr">maxIdle:</span> <span class="number">100</span></span><br><span class="line">    <span class="comment">#最小能够保持idel状态的对象数</span></span><br><span class="line">    <span class="attr">minIdle:</span> <span class="number">50</span></span><br><span class="line">    <span class="comment">#当池内没有返回对象时，最大等待时间</span></span><br><span class="line">    <span class="attr">maxWaitMillis:</span> <span class="number">10000</span></span><br><span class="line">    <span class="comment">#当调用borrow Object方法时，是否进行有效性检查</span></span><br><span class="line">    <span class="attr">testOnBorrow:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment">#当调用return Object方法时，是否进行有效性检查</span></span><br><span class="line">    <span class="attr">testOnReturn:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment">#“空闲链接”检测线程，检测的周期，毫秒数。如果为负值，表示不运行“检测线程”。默认为-1.</span></span><br><span class="line">    <span class="attr">timeBetweenEvictionRunsMillis:</span> <span class="number">30000</span></span><br><span class="line">    <span class="comment">#向调用者输出“链接”对象时，是否检测它的空闲超时；</span></span><br><span class="line">    <span class="attr">testWhileIdle:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># 对于“空闲链接”检测线程而言，每次检测的链接资源的个数。默认为3.</span></span><br><span class="line">    <span class="attr">numTestsPerEvictionRun:</span> <span class="number">50</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤3：加载配置文件</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = "jedis.pool")</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JedisProperties</span> {</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>  maxTotall;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>  maxIdle;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>  minIdle;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>  maxWaitMillis;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span>  testOnBorrow;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span>  testOnReturn;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>  timeBetweenEvictionRunsMillis;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">boolean</span>  testWhileIdle;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span>  numTestsPerEvictionRun;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String host;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> port;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> timeout;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤4：编写Jedis配置类</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JedisConfig</span> {</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * jedis连接池</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> jedisProperties</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> JedisPool <span class="title function_">jedisPool</span><span class="params">(JedisProperties jedisProperties)</span> {</span><br><span class="line"></span><br><span class="line">        <span class="type">JedisPoolConfig</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JedisPoolConfig</span>();</span><br><span class="line">        config.setMaxTotal(jedisProperties.getMaxTotall());</span><br><span class="line">        config.setMaxIdle(jedisProperties.getMaxIdle());</span><br><span class="line">        config.setMinIdle(jedisProperties.getMinIdle());</span><br><span class="line">        config.setMaxWait(Duration.ofMillis(jedisProperties.getMaxWaitMillis()));</span><br><span class="line">        config.setTestOnBorrow(jedisProperties.isTestOnBorrow());</span><br><span class="line">        config.setTestOnReturn(jedisProperties.isTestOnReturn());</span><br><span class="line">        config.setTimeBetweenEvictionRuns(Duration.ofMillis(jedisProperties.getTimeBetweenEvictionRunsMillis()));</span><br><span class="line">        config.setTestWhileIdle(jedisProperties.isTestWhileIdle());</span><br><span class="line">        config.setNumTestsPerEvictionRun(jedisProperties.getNumTestsPerEvictionRun());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.hasText(jedisProperties.getPassword())) {</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JedisPool</span>(config, jedisProperties.getHost(), jedisProperties.getPort(),</span><br><span class="line">                    jedisProperties.getTimeout(), jedisProperties.getPassword());</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JedisPool</span>(config, jedisProperties.getHost(), jedisProperties.getPort(),</span><br><span class="line">                jedisProperties.getTimeout());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>步骤5：编写测试类，实现测试</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JedisTest</span> {</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> JedisPool jedisPool;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testConnection</span><span class="params">()</span>{</span><br><span class="line">        System.out.println(jedisPool);</span><br><span class="line">        <span class="type">Jedis</span> <span class="variable">jedis</span> <span class="operator">=</span> jedisPool.getResource();</span><br><span class="line">        <span class="comment">//需求：往redis中添加kv对： name：dafei</span></span><br><span class="line">        jedis.set(<span class="string">"name"</span>, <span class="string">"dafei"</span>);</span><br><span class="line">        System.out.println(jedis.get(<span class="string">"name"</span>));</span><br><span class="line">        jedis.close();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p><strong>操作技巧：jedis中方法跟Redis中命令一样</strong></p><h2 id="Lettuce"><a href="#Lettuce" class="headerlink" title="Lettuce"></a>Lettuce</h2><p>Lettuce 之所以能流行，因为它抱了根好大腿-Spring-data。Spring-data-redis底层就封装了Lettuce，接下来看下Springboot版的lettuce实现。</p><p><strong>步骤1：导入依赖</strong></p><figure class="highlight xml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤2：Redis配置</strong></p><figure class="highlight yml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">admin</span></span><br></pre></td></tr></tbody></table></figure><p><strong>步骤3：编写测试类，实现测试</strong></p><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LettureTest</span> {</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="comment">//约定：</span></span><br><span class="line">    <span class="comment">// 操作redis的key  是字符串</span></span><br><span class="line">    <span class="comment">// value是字符串类型或字符串类型元素</span></span><br><span class="line">    <span class="keyword">private</span> StringRedisTemplate template;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testRedis</span><span class="params">()</span>{</span><br><span class="line"></span><br><span class="line">        <span class="comment">//name：dafei</span></span><br><span class="line">        template.opsForValue().set(<span class="string">"name"</span>, <span class="string">"dafei"</span>);</span><br><span class="line">        System.out.println(template.opsForValue().get(<span class="string">"name"</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 操作string</span></span><br><span class="line">        <span class="comment">//template.opsForValue().xx();</span></span><br><span class="line">        <span class="comment">// 操作hash</span></span><br><span class="line">        <span class="comment">//template.opsForHash().xx();</span></span><br><span class="line">        <span class="comment">// 操作list</span></span><br><span class="line">        <span class="comment">//template.opsForList().xx();</span></span><br><span class="line">        <span class="comment">// 操作set</span></span><br><span class="line">        <span class="comment">//template.opsForSet().xx();</span></span><br><span class="line">        <span class="comment">// 操作zset</span></span><br><span class="line">        <span class="comment">//template.opsForZSet().xx();</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//spring-data-redis  方法是redis 命令全称</span></span><br><span class="line">        <span class="comment">//template.opsForList().rightPush()  //rpush</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//全局命令在template类上</span></span><br><span class="line">        <span class="comment">//template.keys("*");</span></span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure><p><strong>操作技巧：Lettuce中方法跟Redis中命令全称</strong></p><h1 id="小案例"><a href="#小案例" class="headerlink" title="小案例"></a>小案例</h1><p>类似效果：<a href="https://www.mafengwo.cn/gonglve/ziyouxing/2339.html">https://www.mafengwo.cn/gonglve/ziyouxing/2339.html</a></p><p><img src="/2023/07/11/redis/image-20220902213752150.png" alt="image-20220902213752150">*</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;学习目标&quot;&gt;&lt;a href=&quot;#学习目标&quot; class=&quot;headerlink&quot; title=&quot;学习目标&quot;&gt;&lt;/a&gt;学习目标&lt;/h1&gt;</summary>
    
    
    
    <category term="Redis" scheme="https://llzzoomm.github.io/categories/Redis/"/>
    
    
    <category term="Redis" scheme="https://llzzoomm.github.io/tags/Redis/"/>
    
  </entry>
  
  <entry>
    <title>测试基础05</title>
    <link href="https://llzzoomm.github.io/2023/06/04/day05ceshi/"/>
    <id>https://llzzoomm.github.io/2023/06/04/day05ceshi/</id>
    <published>2023-06-04T06:51:41.919Z</published>
    <updated>2023-06-04T07:01:01.246Z</updated>
    
    <content type="html"><![CDATA[<hr><h3 id="一、项目介绍"><a href="#一、项目介绍" class="headerlink" title="一、项目介绍"></a>一、项目介绍</h3><span id="more"></span><ul><li><p>类型：web资讯管理平台（黑马头条）</p></li><li><p>子系统：</p><p><img src="/2023/06/04/day05ceshi/image-20211029093320842.png" alt="image-20211029093320842"></p></li><li><p>实施模块（功能测试）</p><ul><li>登录</li><li>发布文章</li></ul></li></ul><h3 id="二、项目实施"><a href="#二、项目实施" class="headerlink" title="二、项目实施"></a>二、项目实施</h3><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1、分析需求</span><br><span class="line">2、设计测试点</span><br><span class="line">3、编写用例覆盖测试点</span><br><span class="line">4、执行用例</span><br><span class="line">5、缺陷管理</span><br><span class="line">6、测试总结</span><br></pre></td></tr></tbody></table></figure><h4 id="2-1-登录"><a href="#2-1-登录" class="headerlink" title="2.1 登录"></a>2.1 登录</h4><ul><li><p>需求</p><p><img src="/2023/06/04/day05ceshi/image-20211228172020076.png" alt="image-20211228172020076"></p></li><li><p>测试点</p><p><img src="/2023/06/04/day05ceshi/image-20211228172114741.png" alt="image-20211228172114741"></p></li><li><p>用例（登录成功、手机号逆向）</p><p><img src="/2023/06/04/day05ceshi/image-20211228172322555.png" alt="image-20211228172322555"></p></li><li><p>用例（验证码逆向）</p><p><img src="/2023/06/04/day05ceshi/image-20211228172354728.png" alt="image-20211228172354728"></p></li><li><p>用例（兼容、布局）</p><p><img src="/2023/06/04/day05ceshi/image-20211228172424781.png" alt="image-20211228172424781"></p></li><li><p>滑块</p><p><img src="/2023/06/04/day05ceshi/image-20211228172443317.png" alt="image-20211228172443317"></p></li></ul><h4 id="2-2-发布文章"><a href="#2-2-发布文章" class="headerlink" title="2.2 发布文章"></a>2.2 发布文章</h4><ul><li><p>需求</p><p><img src="/2023/06/04/day05ceshi/image-20211029163304819.png" alt="image-20211029163304819"></p></li><li><p>测试点</p><p><img src="/2023/06/04/day05ceshi/image-20211228172157071.png" alt="image-20211228172157071"></p><p><img src="/2023/06/04/day05ceshi/image-20211228172223248.png" alt="image-20211228172223248"></p></li><li><p>用例（发布文章）</p><p><img src="/2023/06/04/day05ceshi/image-20211228172521509.png" alt="image-20211228172521509"></p><p><img src="/2023/06/04/day05ceshi/image-20211228172550345.png" alt="image-20211228172550345"></p><p><img src="/2023/06/04/day05ceshi/image-20211228172636278.png" alt="image-20211228172636278"></p><p><img src="/2023/06/04/day05ceshi/image-20211228172655214.png" alt="image-20211228172655214"></p></li></ul><ul><li>上传图片</li></ul>]]></content>
    
    
    <summary type="html">&lt;hr&gt;
&lt;h3 id=&quot;一、项目介绍&quot;&gt;&lt;a href=&quot;#一、项目介绍&quot; class=&quot;headerlink&quot; title=&quot;一、项目介绍&quot;&gt;&lt;/a&gt;一、项目介绍&lt;/h3&gt;</summary>
    
    
    
    <category term="测试基础" scheme="https://llzzoomm.github.io/categories/%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="测试基础" scheme="https://llzzoomm.github.io/tags/%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>测试基础04</title>
    <link href="https://llzzoomm.github.io/2023/06/04/day04ceshi/"/>
    <id>https://llzzoomm.github.io/2023/06/04/day04ceshi/</id>
    <published>2023-06-04T06:51:41.918Z</published>
    <updated>2023-06-04T07:00:32.983Z</updated>
    
    <content type="html"><![CDATA[<hr><h3 id="一、html介绍"><a href="#一、html介绍" class="headerlink" title="一、html介绍"></a>一、html介绍</h3><span id="more"></span><h4 id="1-1-前端三大核心"><a href="#1-1-前端三大核心" class="headerlink" title="1.1 前端三大核心"></a>1.1 前端三大核心</h4><ul><li>html:超文本标记语言，由一套标记标签组成</li><li>标签：<ul><li>单标签：<code>&lt;标签名 /&gt;</code></li><li>双标签:<code>&lt;标签名&gt;&lt;/标签名&gt;</code></li><li>属性：<code>描述某一特征 示例:&lt;a 属性名="属性值"&gt;</code></li></ul></li></ul><h4 id="1-2-html骨架标签"><a href="#1-2-html骨架标签" class="headerlink" title="1.2 html骨架标签"></a>1.2 html骨架标签</h4><p>​    <img src="/2023/06/04/day04ceshi/image-20211028093514517.png" alt="image-20211028093514517"></p><figure class="highlight avrasm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">html:</span>根标签，所有的内容都应该放到html标签中</span><br><span class="line">head：头部标签</span><br><span class="line"><span class="symbol">body:</span>身体标签（代码编写区域）</span><br></pre></td></tr></tbody></table></figure><h4 id="1-3-注释"><a href="#1-3-注释" class="headerlink" title="1.3 注释"></a>1.3 注释</h4><ul><li>作用：描述的内容不会被浏览器执行</li><li>说明：解析程序给程序员看</li><li>快捷键：ctrl+/ <code>&lt;!--注释区域--&gt;</code></li><li>测试点：<code>前端页面上线之前检查注释描述或去除注释</code></li></ul><h4 id="1-4-标签"><a href="#1-4-标签" class="headerlink" title="1.4 标签"></a>1.4 标签</h4><ul><li><p>标题：<code>h1~h6</code></p><ul><li><p>说明：h1最大，h6最小</p></li><li><p>示例：</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是h1<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h6</span>&gt;</span>我是h6<span class="tag">&lt;/<span class="name">h6</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure></li></ul></li><li><p>段落：<code>p</code></p><ul><li><p>特点：语义化、独占一块（换行）</p></li><li><p>示例：</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>我是段落<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure></li></ul></li><li><p>超链接<code>a</code></p><ul><li>说明：<code>点击文本跳转到指定页面</code></li><li>语法：<code>&lt;a href="https://www.baidu.com"&gt;文本&lt;/a&gt;</code></li><li>属性：<ul><li>href：跳转的地址或文件</li><li>target:打开窗口模式。<code>新窗口：target="_blank"</code></li></ul></li></ul></li><li><p>图片</p><ul><li><p>说明：<code>在页面中插入一张图片</code></p></li><li><p>测试点：必须有title属性（悬停和未加载显示）</p></li><li><p>示例</p><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">图像标签：img</span></span><br><span class="line"><span class="comment">属性：</span></span><br><span class="line"><span class="comment">src:图片路径</span></span><br><span class="line"><span class="comment">title：悬停显示文字</span></span><br><span class="line"><span class="comment">width:宽100px   px:像素</span></span><br><span class="line"><span class="comment">height:高 </span></span><br><span class="line"><span class="comment">alt:图片未加载显示</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"011.jpg"</span> <span class="attr">title</span>=<span class="string">"希望在田野"</span> <span class="attr">width</span>=<span class="string">"100px"</span> <span class="attr">height</span>=<span class="string">"200px"</span> <span class="attr">alt</span>=<span class="string">"此处有一张田野照片"</span>/&gt;</span></span><br></pre></td></tr></tbody></table></figure></li></ul></li><li><p>空格与换行</p><ul><li>空格：<code>&amp;nbsp;</code>     <code>&amp;-&gt;shift+7</code></li><li>换行：<code>&lt;br /&gt;</code></li></ul></li><li><p>布局标签</p><blockquote><p>布局：设置页面布局，便于排版</p></blockquote><ul><li>大盒子：div、独占一行</li><li>小盒子：span、一行可以放多个</li></ul></li><li><p>列表</p><p><img src="/2023/06/04/day04ceshi/image-20211028151747236.png" alt="image-20211028151747236"></p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">script:js标签</span><br><span class="line">style:css标签</span><br><span class="line">link:外部加载css标签</span><br></pre></td></tr></tbody></table></figure></li><li><p>input标签</p><ul><li><p>文本框：<code>&lt;input type="text" /&gt;</code></p></li><li><p>密码框：<code>&lt;input type="password" /&gt;</code></p></li><li><p>单选按钮：<input type="radio"></p></li><li><p>复选框：<input type="checkbox"></p></li><li><p>按钮：</p><ul><li><p>普通：type=button</p></li><li><p>提交：type=submit</p></li><li><p>重置: type=reset</p><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--</span><br><span class="line">按钮测试点：统一使用value进行赋值</span><br><span class="line">  提示：普通按钮默认没有执行效果，需要配合Js来实现。</span><br><span class="line">--&gt;</span><br></pre></td></tr></tbody></table></figure></li></ul></li></ul></li><li><p>form标签</p><ul><li>作用：提交页面输入的数据到指定页面或后台</li></ul><figure class="highlight plaintext"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--</span><br><span class="line">form</span><br><span class="line">作用：将页面输入的数据提交到后台或指定页面</span><br><span class="line">属性：</span><br><span class="line">action：  指定将数据提交到那个页面。</span><br><span class="line">method:提交参数的方法（get、post）</span><br><span class="line">get:查询使用</span><br><span class="line">1、参数url明文显示</span><br><span class="line">2、提交速度快</span><br><span class="line">3、提交参数有长度限制</span><br><span class="line">post:提交数据、登录、注册</span><br><span class="line">1、非明文显示</span><br><span class="line">2、提交速度慢</span><br><span class="line">3、提交参数的长度无限制</span><br><span class="line">--&gt;</span><br></pre></td></tr></tbody></table></figure><figure class="highlight html"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"10-接受数据.html"</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></span><br><span class="line">用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">密码框：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">单选效果：</span></span><br><span class="line"><span class="comment">1、相同一组的radio才能做单选。</span></span><br><span class="line"><span class="comment">2、设置相同（组名）name属性值为一组。</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line">性别：</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"one"</span>/&gt;</span>男</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"one"</span>/&gt;</span>女</span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">您的爱好：</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> /&gt;</span>挣钱</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> /&gt;</span>吃饭</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> /&gt;</span>欣赏美</span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> /&gt;</span>个人发挥</span><br><span class="line"><span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"点我试试"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure></li></ul><h3 id="二-、作业"><a href="#二-、作业" class="headerlink" title="二 、作业"></a>二 、作业</h3><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">登录模块设计用例</span><br></pre></td></tr></tbody></table></figure><p><img src="/2023/06/04/day04ceshi/image-20211028171722419.png" alt="image-20211028171722419"></p>]]></content>
    
    
    <summary type="html">&lt;hr&gt;
&lt;h3 id=&quot;一、html介绍&quot;&gt;&lt;a href=&quot;#一、html介绍&quot; class=&quot;headerlink&quot; title=&quot;一、html介绍&quot;&gt;&lt;/a&gt;一、html介绍&lt;/h3&gt;</summary>
    
    
    
    <category term="测试基础" scheme="https://llzzoomm.github.io/categories/%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="测试基础" scheme="https://llzzoomm.github.io/tags/%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>测试基础02</title>
    <link href="https://llzzoomm.github.io/2023/06/04/day02ceshi/"/>
    <id>https://llzzoomm.github.io/2023/06/04/day02ceshi/</id>
    <published>2023-06-04T06:51:41.916Z</published>
    <updated>2023-06-04T06:59:26.463Z</updated>
    
    <content type="html"><![CDATA[<h3 id="记忆曲线"><a href="#记忆曲线" class="headerlink" title="记忆曲线"></a>记忆曲线</h3><span id="more"></span><p><img src="/2023/06/04/day02ceshi/image-20211024093736975.png" alt="image-20211024093736975"></p><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h3 id="一、解决穷举场景"><a href="#一、解决穷举场景" class="headerlink" title="一、解决穷举场景"></a>一、解决穷举场景</h3><blockquote><p>重点：使用等价类划分法</p></blockquote><h4 id="1-1-等价类划分法"><a href="#1-1-等价类划分法" class="headerlink" title="1.1 等价类划分法"></a>1.1 等价类划分法</h4><p><img src="/2023/06/04/day02ceshi/image-20211024100114584.png" alt="image-20211024100114584"></p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">重点：有效等价和单个无效等价各取1个即可。</span><br><span class="line">步骤：</span><br><span class="line">1、明确需求</span><br><span class="line">2、确定有效和无效等价</span><br><span class="line">3、根据有效和无效造数据编写用例</span><br></pre></td></tr></tbody></table></figure><h4 id="1-2-案例（qq合法验证）"><a href="#1-2-案例（qq合法验证）" class="headerlink" title="1.2 案例（qq合法验证）"></a>1.2 案例（qq合法验证）</h4><blockquote><p>需求：验证6~10自然数的qq合法</p><p>自然数：<em>自然数</em>由0开始，一个接一个，组成一个无穷的集体</p></blockquote><p><img src="/2023/06/04/day02ceshi/image-20211024100035335.png" alt="image-20211024100035335"></p><p><img src="/2023/06/04/day02ceshi/image-20211024100050599.png" alt="image-20211024100050599"></p><h4 id="1-3-案例（城市电话验证）"><a href="#1-3-案例（城市电话验证）" class="headerlink" title="1.3 案例（城市电话验证）"></a>1.3 案例（城市电话验证）</h4><p><img src="/2023/06/04/day02ceshi/image-20211024105553905.png" alt="image-20211024105553905"></p><p><img src="/2023/06/04/day02ceshi/image-20211024105615224.png" alt="image-20211024105615224"></p><p><img src="/2023/06/04/day02ceshi/image-20211024105638861.png" alt="image-20211024105638861"></p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">重点：</span><br><span class="line">1、正向用例：一条尽可能覆盖多条</span><br><span class="line">2、逆向用例：每一条数据，都是一条单独用例。</span><br></pre></td></tr></tbody></table></figure><h4 id="1-4-总结（应用场景）"><a href="#1-4-总结（应用场景）" class="headerlink" title="1.4 总结（应用场景）"></a>1.4 总结（应用场景）</h4><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">针对：需要有大量数据测试输入，但是没法穷举测试的地方。 </span><br><span class="line"> 输入框</span><br><span class="line"> 下拉列表</span><br><span class="line"> 单选复选框</span><br><span class="line">典型代表：页面的输入框类测试。</span><br></pre></td></tr></tbody></table></figure><p><strong>友情提示：</strong>完整的用例应该是等价类和边界值一块写。</p><h3 id="二、解决边界限制问题"><a href="#二、解决边界限制问题" class="headerlink" title="二、解决边界限制问题"></a>二、解决边界限制问题</h3><blockquote><p>说明：使用边界值解决边界位数限制问题。2.1 边界值说明</p></blockquote><p><img src="/2023/06/04/day02ceshi/image-20211024114728995.png" alt="image-20211024114728995"></p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">提示：</span><br><span class="line">1、有关范围限制，最多7条用例（暂时未优化）</span><br><span class="line">2、边界值能解决位数限制问题，但是不能解决类型问题（要结合等价类）</span><br></pre></td></tr></tbody></table></figure><h4 id="2-2-步骤"><a href="#2-2-步骤" class="headerlink" title="2.2 步骤"></a>2.2 步骤</h4><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1、明确需求</span><br><span class="line">2、确定有效和无效等价</span><br><span class="line">3、确定边界范围</span><br><span class="line">4、提取数据编写用例</span><br></pre></td></tr></tbody></table></figure><h4 id="2-3-案例1"><a href="#2-3-案例1" class="headerlink" title="2.3 案例1"></a>2.3 案例1</h4><p><img src="/2023/06/04/day02ceshi/image-20211024120514746.png" alt="image-20211024120514746"></p><p><img src="/2023/06/04/day02ceshi/image-20211024120527142.png" alt="image-20211024120527142"></p><h4 id="2-4-案例2"><a href="#2-4-案例2" class="headerlink" title="2.4 案例2"></a>2.4 案例2</h4><p><img src="/2023/06/04/day02ceshi/image-20211024122700482.png" alt="image-20211024122700482"></p><p><img src="/2023/06/04/day02ceshi/image-20211024122639248.png" alt="image-20211024122639248"></p><h4 id="2-5-优化（7点优化5点）"><a href="#2-5-优化（7点优化5点）" class="headerlink" title="2.5 优化（7点优化5点）"></a>2.5 优化（7点优化5点）</h4><blockquote><p>重点：开内闭外（开区间选包含的点，闭区选不包含的点）</p><p>开区间：不包含边界上的点（没有等号）。如：a&lt;10</p><p>闭区间：包含边界上的点（有等号）。 如:a&lt;=10</p></blockquote><p>优化策略：</p><p><img src="/2023/06/04/day02ceshi/image-20211024145308985.png" alt="image-20211024145308985"></p><h4 id="2-6-总结"><a href="#2-6-总结" class="headerlink" title="2.6 总结"></a>2.6 总结</h4><blockquote><p>强调：单个输入框，常用的方式 边界+等价类</p><p>面试题：最常用的用例设计方法有哪些？–等价类、边界值</p></blockquote><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在等价类的基础上针对有边界范围的测试数据输入的地方(重点关注边界) </span><br><span class="line"><span class="section">常见词语描述:大小、尺寸、重量、最大、最小、至多、至少等修饰词语 </span></span><br><span class="line"><span class="section">典型代表:有边界范围的输入框类测试</span></span><br></pre></td></tr></tbody></table></figure><h3 id="三、解决多条件有依赖关系测试"><a href="#三、解决多条件有依赖关系测试" class="headerlink" title="三、解决多条件有依赖关系测试"></a>三、解决多条件有依赖关系测试</h3><blockquote><p>重点：使用判定表</p></blockquote><h4 id="3-1-介绍"><a href="#3-1-介绍" class="headerlink" title="3.1 介绍"></a>3.1 介绍</h4><p><img src="/2023/06/04/day02ceshi/image-20211024151030120.png" alt="image-20211024151030120"></p><h4 id="3-2-步骤"><a href="#3-2-步骤" class="headerlink" title="3.2 步骤"></a>3.2 步骤</h4><figure class="highlight gcode"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、明确需求</span><br><span class="line"><span class="number">2</span>、画出判定表</span><br><span class="line"> <span class="number">1</span>）、列出条件桩和动作桩 </span><br><span class="line"> <span class="number">2</span>）、填写条件项，对条件进行全组合 </span><br><span class="line"> <span class="number">3</span>）、根据条件项的组合确定动作项 </span><br><span class="line"> <span class="number">4</span>）、简化、合并相似规则<span class="comment">(有相同的动作)</span></span><br><span class="line"><span class="number">3</span>、根据规则编写测试用例</span><br></pre></td></tr></tbody></table></figure><h4 id="3-3-案例（订单）"><a href="#3-3-案例（订单）" class="headerlink" title="3.3 案例（订单）"></a>3.3 案例（订单）</h4><ul><li><p>需求</p><p><img src="/2023/06/04/day02ceshi/image-20211024152741189.png" alt="image-20211024152741189"></p></li><li><p>判定表</p><p><img src="/2023/06/04/day02ceshi/image-20211024152653900.png" alt="image-20211024152653900"></p></li><li><p>用例</p><p><img src="/2023/06/04/day02ceshi/image-20211024152731367.png" alt="image-20211024152731367"></p></li></ul><h4 id="3-4-练习（文件修改）"><a href="#3-4-练习（文件修改）" class="headerlink" title="3.4 练习（文件修改）"></a>3.4 练习（文件修改）</h4><ul><li><p>需求</p><p><img src="/2023/06/04/day02ceshi/image-20211024155837308.png" alt="image-20211024155837308"></p></li><li><p>判定表</p><p><img src="/2023/06/04/day02ceshi/image-20211024155853521.png" alt="image-20211024155853521"></p></li><li><p>用例</p><p><img src="/2023/06/04/day02ceshi/image-20211024155907864.png" alt="image-20211024155907864"></p></li></ul><h4 id="3-5-判定表总结"><a href="#3-5-判定表总结" class="headerlink" title="3.5 判定表总结"></a>3.5 判定表总结</h4><p><img src="/2023/06/04/day02ceshi/image-20211024160136120.png" alt="image-20211024160136120"></p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">提示：</span><br><span class="line">1、多条件之间有依赖关系，使用判定表来进行测试覆盖。</span><br><span class="line">2、判定表一般适合4个以内条件依赖关系</span><br><span class="line">3、如果条件超过4个，就不适合覆盖所有条件，应采用（正交法）来解决。</span><br></pre></td></tr></tbody></table></figure><h3 id="四、业务测试覆盖"><a href="#四、业务测试覆盖" class="headerlink" title="四、业务测试覆盖"></a>四、业务测试覆盖</h3><blockquote><p> 重点:</p><p>​    1、覆盖业务测试,需要使用流程图法</p><p>​    2、先测试业务，在测试单功能、单模块、单页面</p></blockquote><h4 id="4-1-流程图"><a href="#4-1-流程图" class="headerlink" title="4.1 流程图"></a>4.1 流程图</h4><blockquote><p> 提示:业务用例是根据流程图来梳理的,需要先了解流程图</p></blockquote><p><img src="/2023/06/04/day02ceshi/image-20211024162459688.png" alt="image-20211024162459688"></p><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">作用:梳理业务用例</span></span><br></pre></td></tr></tbody></table></figure><p>练习流程图工具：</p><figure class="highlight awk"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、线上工具：https:<span class="regexp">//</span>processon.com<span class="regexp">/diagraming/</span><span class="number">605880</span>af07912927bd71c388</span><br><span class="line"><span class="number">2</span>、离线工具：visio</span><br><span class="line"><span class="number">3</span>、其他工具：Excel</span><br></pre></td></tr></tbody></table></figure><h4 id="4-2-案例（ATM）"><a href="#4-2-案例（ATM）" class="headerlink" title="4.2 案例（ATM）"></a>4.2 案例（ATM）</h4><ul><li><p>流程图</p><p><img src="/2023/06/04/day02ceshi/image-20211024165931247.png" alt="image-20211024165931247"></p><p><img src="/2023/06/04/day02ceshi/image-20211024165946258.png" alt="image-20211024165946258"></p></li><li><p>用例</p><p><img src="/2023/06/04/day02ceshi/image-20211024170008639.png" alt="image-20211024170008639"></p></li></ul><h3 id="五、错误推荐法"><a href="#五、错误推荐法" class="headerlink" title="五、错误推荐法"></a>五、错误推荐法</h3><blockquote><p>应用场景：当项目用例都执行完毕，且BUG修复完成，离上线还有一段时间，在这段时间中可是使用错误推荐法复测主要业务或测试未覆盖的功能。</p></blockquote><p><img src="/2023/06/04/day02ceshi/image-20211024171017117.png" alt="image-20211024171017117"></p><h3 id="六、作业"><a href="#六、作业" class="headerlink" title="六、作业"></a>六、作业</h3><p><img src="/2023/06/04/day02ceshi/image-20211024171521876.png" alt="image-20211024171521876"></p><p><img src="/2023/06/04/day02ceshi/image-20211024171551244.png" alt="image-20211024171551244"></p>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;记忆曲线&quot;&gt;&lt;a href=&quot;#记忆曲线&quot; class=&quot;headerlink&quot; title=&quot;记忆曲线&quot;&gt;&lt;/a&gt;记忆曲线&lt;/h3&gt;</summary>
    
    
    
    <category term="测试基础" scheme="https://llzzoomm.github.io/categories/%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="测试基础" scheme="https://llzzoomm.github.io/tags/%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>测试基础03</title>
    <link href="https://llzzoomm.github.io/2023/06/04/day03ceshi/"/>
    <id>https://llzzoomm.github.io/2023/06/04/day03ceshi/</id>
    <published>2023-06-04T06:51:41.916Z</published>
    <updated>2023-06-04T07:03:25.654Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一、用例执行"><a href="#一、用例执行" class="headerlink" title="一、用例执行"></a>一、用例执行</h3><span id="more"></span><blockquote><p>说明：执行结果与用例的期望结果不一致（含义），为缺陷。</p></blockquote><p><img src="/2023/06/04/day03ceshi/image-20211027093138826.png" alt="image-20211027093138826"></p><ul><li>执行失败的用例</li></ul><p><img src="/2023/06/04/day03ceshi/image-20211027095615336.png" alt="image-20211027095615336"></p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">提示：用例执行不通过为缺陷，需要进行缺陷管理</span><br></pre></td></tr></tbody></table></figure><h3 id="二、缺陷"><a href="#二、缺陷" class="headerlink" title="二、缺陷"></a>二、缺陷</h3><h4 id="2-1-定义"><a href="#2-1-定义" class="headerlink" title="2.1 定义"></a>2.1 定义</h4><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">软件中存在的各种问题，都为缺陷，简称bug；</span><br></pre></td></tr></tbody></table></figure><h4 id="2-2-缺陷标准"><a href="#2-2-缺陷标准" class="headerlink" title="2.2 缺陷标准"></a>2.2 缺陷标准</h4><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1、少功能</span><br><span class="line">2、功能错误</span><br><span class="line">3、多功能</span><br><span class="line">4、缺少隐性功能</span><br><span class="line">5、易用性（软件测试人员专业角度）</span><br></pre></td></tr></tbody></table></figure><h4 id="3-3-缺陷产生的原因"><a href="#3-3-缺陷产生的原因" class="headerlink" title="3.3 缺陷产生的原因"></a>3.3 缺陷产生的原因</h4><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1、需求文档</span><br><span class="line">2、架构设计</span><br><span class="line">3、编码实现</span><br><span class="line">4、环境（硬件、软件）</span><br></pre></td></tr></tbody></table></figure><h4 id="3-4-缺陷的生命周期"><a href="#3-4-缺陷的生命周期" class="headerlink" title="3.4 缺陷的生命周期"></a>3.4 缺陷的生命周期</h4><p><img src="/2023/06/04/day03ceshi/image-20211027103536357.png" alt="image-20211027103536357"></p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1、回归测试：</span><br><span class="line">①常规项目回归：项目本次发布新增2个模块，最基本要测新增模块功能及新增模块关联的旧模块。</span><br><span class="line">②非常规项目（银行、部队、航天）：新增功能，必须全部复测。</span><br><span class="line">2、回归bug：上一个版本发现的缺陷，开发修复完毕，在下个版本进行重新验证。</span><br></pre></td></tr></tbody></table></figure><h4 id="3-5-缺陷核心要素"><a href="#3-5-缺陷核心要素" class="headerlink" title="3.5 缺陷核心要素"></a>3.5 缺陷核心要素</h4><p><img src="/2023/06/04/day03ceshi/image-20211027110033840.png" alt="image-20211027110033840"></p><h4 id="3-6-缺陷提交要素"><a href="#3-6-缺陷提交要素" class="headerlink" title="3.6 缺陷提交要素"></a>3.6 缺陷提交要素</h4><p><img src="/2023/06/04/day03ceshi/image-20211027110024249.png" alt="image-20211027110024249"></p><h4 id="3-7-缺陷类型"><a href="#3-7-缺陷类型" class="headerlink" title="3.7 缺陷类型"></a>3.7 缺陷类型</h4><figure class="highlight swift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="operator">、</span>功能错误</span><br><span class="line"><span class="number">2</span><span class="operator">、</span><span class="type">UI页面错误</span></span><br><span class="line"><span class="number">3</span><span class="operator">、</span>兼容性</span><br><span class="line"><span class="number">4</span><span class="operator">、</span>数据（数据库）</span><br><span class="line"><span class="number">5</span><span class="operator">、</span>易用性</span><br><span class="line"><span class="number">6</span><span class="operator">、</span>建议</span><br><span class="line"><span class="number">7</span><span class="operator">、</span>架构缺陷</span><br></pre></td></tr></tbody></table></figure><hr><ul><li>工作流程（小结）</li></ul><figure class="highlight clean"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">设计用例-&gt;执行用例（执行测试）-&gt;缺陷（提交、验证、关闭）</span><br><span class="line">缺陷定义：任何问题（Bug）</span><br><span class="line">缺陷标准：多功能、少功能、错误、缺少隐性功能、易用性</span><br><span class="line">描述缺陷重点：缺陷标题、前置条件、复现步骤、预期结果、实际结果、附件备注</span><br><span class="line">提交缺陷信息：指派人、缺陷等级、修复优先级、类型、状态（统计缺陷）</span><br></pre></td></tr></tbody></table></figure><hr><h3 id="三、缺陷管理"><a href="#三、缺陷管理" class="headerlink" title="三、缺陷管理"></a>三、缺陷管理</h3><h4 id="3-1-excel示例"><a href="#3-1-excel示例" class="headerlink" title="3.1 excel示例"></a>3.1 excel示例</h4><p><img src="/2023/06/04/day03ceshi/image-20211027144614178.png" alt="image-20211027144614178"></p><h4 id="3-2-缺陷跟踪流程"><a href="#3-2-缺陷跟踪流程" class="headerlink" title="3.2 缺陷跟踪流程"></a>3.2 缺陷跟踪流程</h4><p><img src="/2023/06/04/day03ceshi/image-20211027144711475.png" alt="image-20211027144711475"></p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">提示：知道测试和开发流程中涉及的工作即可。</span><br></pre></td></tr></tbody></table></figure><h4 id="3-3-提交注意事项"><a href="#3-3-提交注意事项" class="headerlink" title="3.3 提交注意事项"></a>3.3 提交注意事项</h4><p><img src="/2023/06/04/day03ceshi/image-20211027144811825.png" alt="image-20211027144811825"></p><figure class="highlight ada"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">面试题：发现缺陷后，首先回怎么办？<span class="comment">--确定Bug可复现、确定是Bug。</span></span><br><span class="line">提交时，要检查缺陷是否已存在。</span><br></pre></td></tr></tbody></table></figure><h4 id="3-4-缺陷管理工具"><a href="#3-4-缺陷管理工具" class="headerlink" title="3.4 缺陷管理工具"></a>3.4 缺陷管理工具</h4><figure class="highlight gcode"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、项目管理工具-管理缺陷 <span class="comment">(禅道、JIRA、TFS)</span></span><br><span class="line"><span class="number">2</span>、Excel管理缺陷</span><br></pre></td></tr></tbody></table></figure><h4 id="3-5-禅道（项目管理工具）"><a href="#3-5-禅道（项目管理工具）" class="headerlink" title="3.5 禅道（项目管理工具）"></a>3.5 禅道（项目管理工具）</h4><ul><li><p>地址：<a href="https://demo.zentao.net/user-login.html">https://demo.zentao.net/user-login.html</a></p></li><li><p>特点：</p><p><img src="/2023/06/04/day03ceshi/image-20211027150242321.png" alt="image-20211027150242321"></p></li><li><p>使用流程图</p><p><img src="/2023/06/04/day03ceshi/image-20211027150226237.png" alt="image-20211027150226237"></p></li><li><p>使用禅道管理缺陷</p><ul><li>登录</li></ul><p><img src="/2023/06/04/day03ceshi/wecom-temp-733fc2924637799dc61c23b4020656c9.png" alt="wecom-temp-733fc2924637799dc61c23b4020656c9"></p><ul><li>创建缺陷</li></ul><p><img src="/2023/06/04/day03ceshi/wecom-temp-6478a8fb72f4e88ff091ba184a3ec432.png" alt="wecom-temp-6478a8fb72f4e88ff091ba184a3ec432"></p><p><img src="/2023/06/04/day03ceshi/wecom-temp-e7efbcedba952aadb5a83e9b76ab65e0.png" alt="wecom-temp-e7efbcedba952aadb5a83e9b76ab65e0"></p><ul><li>关闭缺陷</li></ul><p><img src="/2023/06/04/day03ceshi/wecom-temp-ead870780da1b3c9fbdc704a51706b3b.png" alt="wecom-temp-ead870780da1b3c9fbdc704a51706b3b"></p></li></ul><h4 id="3-6-缺陷标题扩展"><a href="#3-6-缺陷标题扩展" class="headerlink" title="3.6 缺陷标题扩展"></a>3.6 缺陷标题扩展</h4><p><img src="/2023/06/04/day03ceshi/image-20211027170926652.png" alt="image-20211027170926652"></p><h3 id="作业讲解（测试基础02）"><a href="#作业讲解（测试基础02）" class="headerlink" title="作业讲解（测试基础02）"></a>作业讲解（测试基础02）</h3><p><img src="/2023/06/04/day03ceshi/image-20211027121130395.png" alt="image-20211027121130395"></p><h3 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h3><p><img src="/2023/06/04/day03ceshi/image-20211027182846022.png" alt="image-20211027182846022"></p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">将以上测试点/功能点，转为用例。</span><br></pre></td></tr></tbody></table></figure>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;一、用例执行&quot;&gt;&lt;a href=&quot;#一、用例执行&quot; class=&quot;headerlink&quot; title=&quot;一、用例执行&quot;&gt;&lt;/a&gt;一、用例执行&lt;/h3&gt;</summary>
    
    
    
    <category term="测试基础" scheme="https://llzzoomm.github.io/categories/%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="测试基础" scheme="https://llzzoomm.github.io/tags/%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>测试基础01</title>
    <link href="https://llzzoomm.github.io/2023/06/04/day01ceshi/"/>
    <id>https://llzzoomm.github.io/2023/06/04/day01ceshi/</id>
    <published>2023-06-04T06:44:24.545Z</published>
    <updated>2023-06-04T06:44:05.787Z</updated>
    
    <content type="html"><![CDATA[<hr><h3 id="一、测试介绍"><a href="#一、测试介绍" class="headerlink" title="一、测试介绍"></a>一、测试介绍</h3><span id="more"></span><ul><li> 什么是软件测试？</li></ul>  <figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">使用技术手段验证软件是否满足需求</span><br></pre></td></tr></tbody></table></figure><ul><li><p>测试主流技能</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1、功能测试</span><br><span class="line">2、自动化测试</span><br><span class="line">3、接口测试</span><br><span class="line">4、性能测试</span><br><span class="line"></span><br><span class="line">主流方向建议：</span><br><span class="line">1、功能测试+接口测试 </span><br><span class="line">2、自动化测试+接口</span><br><span class="line">3、功能+性能</span><br></pre></td></tr></tbody></table></figure></li></ul><h3 id="二、测试常用分类"><a href="#二、测试常用分类" class="headerlink" title="二、测试常用分类"></a>二、测试常用分类</h3><ul><li>分类<ul><li>阶段划分（阶段：软件产出过程顺序）</li><li>代码可见度</li></ul></li></ul><h4 id="2-1-阶段划分"><a href="#2-1-阶段划分" class="headerlink" title="2.1 阶段划分"></a>2.1 阶段划分</h4><ul><li>单元测试<ul><li>说明：针对程序源代码进行测试（单元：最小独立功能代码段）</li><li>提示：<ul><li>1、国内单元测试一般开发自测</li><li>2、单元测试可以解决-快速定位缺陷</li><li>3、提高测试执行效率</li></ul></li></ul></li><li>集成测试<ul><li>说明：针对单元与单元之间的接口进行测试</li><li>提示：又称接口测试。</li></ul></li><li>系统测试<ul><li>说明：针对系统整体功能+兼容+文档（说明、安装文档）</li></ul></li><li>验收测试<ul><li>内测：公司内部人员使用，发觉缺陷并修复。</li><li>公测：让用户帮忙测试</li><li>提示：验收测试,一般要根据项目类型决定是否使用。</li></ul></li></ul><h4 id="2-2-代码可见度划分"><a href="#2-2-代码可见度划分" class="headerlink" title="2.2 代码可见度划分"></a>2.2 代码可见度划分</h4><blockquote><p>代码可见度：代码可见的程度上划分</p></blockquote><p><img src="/2023/06/04/day01ceshi/image-20211023111320224.png" alt="image-20211023111320224"></p><figure class="highlight clean"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">黑盒测试：主要针对功能（阶段划分-&gt;系统测试）</span><br><span class="line">灰盒测试：针对接口测试（阶段划分-&gt;集成测试）</span><br><span class="line">白盒测试：针对程序源代码进行测试（阶段划分-&gt;单元测试）</span><br></pre></td></tr></tbody></table></figure><h4 id="2-3-总结"><a href="#2-3-总结" class="headerlink" title="2.3 总结"></a>2.3 总结</h4><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">系统测试和黑盒测试重点核心是功能测试</span><br><span class="line">集成测试和灰盒测试又称接口测试 </span><br><span class="line">单元测试和白盒测试是对代码进行测试</span><br><span class="line">自动化测试归属功能测试</span><br><span class="line">性能测试、安全测试归属专项测试s</span><br></pre></td></tr></tbody></table></figure><h3 id="三、模型"><a href="#三、模型" class="headerlink" title="三、模型"></a>三、模型</h3><ul><li><p>角度</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1、质量模型</span><br><span class="line">2、测试模型</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="3-1-质量模型"><a href="#3-1-质量模型" class="headerlink" title="3.1 质量模型"></a>3.1 质量模型</h4><blockquote><p>说明：质量模型能告诉我们，测试时应该考虑的方面</p></blockquote><p><img src="/2023/06/04/day01ceshi/image-20211023114918391.png" alt="image-20211023114918391"></p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">重点：功能、性能、兼容、易用性、安全</span><br><span class="line">结论：无论测试硬件或软件，都应该从以上几点来进行分类验证</span><br></pre></td></tr></tbody></table></figure><h3 id="四、测试流程"><a href="#四、测试流程" class="headerlink" title="四、测试流程"></a>四、测试流程</h3><p><img src="/2023/06/04/day01ceshi/image-20211023143542384.png" alt="image-20211023143542384"></p><ul><li><p>需求分析（评审）</p><figure class="highlight clean"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">前提：阅读<span class="number">1</span>遍需求文档，记录不明确之处。</span><br><span class="line">参与人员：前端、后端、测试、产品</span><br><span class="line">目的：</span><br><span class="line"><span class="number">1</span>、确保各部门需求理解一致</span><br><span class="line"><span class="number">2</span>、各角色对需求进行查漏补缺</span><br><span class="line"><span class="number">3</span>、了解软件有些功能</span><br><span class="line">提示：需求分析阶段-&gt;软件还未实现（刚立项）</span><br></pre></td></tr></tbody></table></figure></li><li><p>测试计划</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">说明：指导测试执行的文档（重要）</span><br><span class="line">测什么（目标、范围）</span><br><span class="line">谁来测（人员进度及安排）</span><br><span class="line">怎么测（测试工具、测试策略）</span><br></pre></td></tr></tbody></table></figure></li><li><p>用例设计</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">说明：保证能准确验证软件测试点执行的文档。</span><br><span class="line">1、分析需求</span><br><span class="line">2、提取测试点</span><br><span class="line">3、设计用例覆盖测试点</span><br></pre></td></tr></tbody></table></figure></li><li><p>用例执行</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">说明：实施测试</span><br></pre></td></tr></tbody></table></figure></li><li><p>缺陷管理</p><figure class="highlight clean"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">提交-&gt;验证-&gt;关闭</span><br></pre></td></tr></tbody></table></figure></li><li><p>测试报告</p><figure class="highlight mipsasm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、<span class="keyword">bug分析及统计</span></span><br><span class="line"><span class="keyword"></span><span class="number">2</span>、测试中遇到的问题</span><br><span class="line"><span class="number">3</span>、测试总结（本次测试中的优点和不足）</span><br></pre></td></tr></tbody></table></figure></li></ul><h3 id="五、测试用例"><a href="#五、测试用例" class="headerlink" title="五、测试用例"></a>五、测试用例</h3><ul><li><p>用例：<strong>用</strong>户使用的案<strong>例</strong></p></li><li><p>生活中的用例：</p><p><img src="/2023/06/04/day01ceshi/image-20211023153145014.png" alt="image-20211023153145014"></p></li><li><p>用例的作用</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1、防止漏测</span><br><span class="line">2、衡量软件是否通过的标准</span><br></pre></td></tr></tbody></table></figure></li><li><p>用例模板</p><p><img src="/2023/06/04/day01ceshi/image-20211223170142537.png" alt="image-20211223170142537"></p><p><img src="/2023/06/04/day01ceshi/image-20211223170214567.png" alt="image-20211223170214567"></p></li><li><p>八大要素编写规范</p><p><img src="/2023/06/04/day01ceshi/image-20211023161306406.png" alt="image-20211023161306406"></p></li><li><p>练习案例</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">微信发朋友圈</span><br><span class="line">1、成功（1张图片） </span><br><span class="line">2、成功（1段文字） </span><br><span class="line">3、失败（内容为空）</span><br></pre></td></tr></tbody></table></figure><p><img src="/2023/06/04/day01ceshi/image-20211023172649260.png" alt="image-20211023172649260"></p></li><li><p>练习评审</p><p>黄鑫</p><p><img src="/2023/06/04/day01ceshi/image-20211023173224587.png" alt="image-20211023173224587"></p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">秀！🌹</span><br></pre></td></tr></tbody></table></figure><p><img src="/2023/06/04/day01ceshi/image-20211023174504198.png" alt="image-20211023174504198"></p></li></ul><h3 id="六、用例设计方法"><a href="#六、用例设计方法" class="headerlink" title="六、用例设计方法"></a>六、用例设计方法</h3><ul><li><p>目标</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1、能对穷举场景设计测试点</span><br><span class="line">2、能对限定边界规则设计测试点</span><br><span class="line">3、能对多条件依赖关系进行设计测试点</span><br><span class="line">4、能对于项目业务进行设计测试点</span><br></pre></td></tr></tbody></table></figure></li></ul><h4 id="6-1-能对穷举场景设计测试点"><a href="#6-1-能对穷举场景设计测试点" class="headerlink" title="6.1 能对穷举场景设计测试点"></a>6.1 能对穷举场景设计测试点</h4><blockquote><p>穷举：无穷无尽</p></blockquote><ul><li><p>方法：等价类划分法</p></li><li><p>介绍：</p><p><img src="/2023/06/04/day01ceshi/image-20211223165451571.png" alt="image-20211223165451571"></p></li><li><p>案例1（qq程序）</p><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">要求:6~10位自然数</span></span><br></pre></td></tr></tbody></table></figure><p><img src="/2023/06/04/day01ceshi/image-20211223165623505.png" alt="image-20211223165623505"></p><p><img src="/2023/06/04/day01ceshi/image-20211223165637739.png" alt="image-20211223165637739"></p></li><li><p>案例2（电话）</p><figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">要求：</span><br><span class="line"><span class="bullet">1.</span> 区号:空或者是三位数字</span><br><span class="line"><span class="bullet">2.</span> 前缀码:非“0”且非“1”开头的三位数字</span><br><span class="line"><span class="bullet">3.</span> 后缀码:四位数字</span><br></pre></td></tr></tbody></table></figure><p><img src="/2023/06/04/day01ceshi/image-20211223165723688.png" alt="image-20211223165723688">     <img src="/2023/06/04/day01ceshi/image-20211223165749559.png" alt="image-20211223165749559"></p></li></ul><h3 id="七、作业"><a href="#七、作业" class="headerlink" title="七、作业"></a>七、作业</h3><p><img src="/2023/06/04/day01ceshi/image-20211023180718805.png" alt="image-20211023180718805"></p>]]></content>
    
    
    <summary type="html">&lt;hr&gt;
&lt;h3 id=&quot;一、测试介绍&quot;&gt;&lt;a href=&quot;#一、测试介绍&quot; class=&quot;headerlink&quot; title=&quot;一、测试介绍&quot;&gt;&lt;/a&gt;一、测试介绍&lt;/h3&gt;</summary>
    
    
    
    <category term="测试基础" scheme="https://llzzoomm.github.io/categories/%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="测试基础" scheme="https://llzzoomm.github.io/tags/%E6%B5%8B%E8%AF%95%E5%9F%BA%E7%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>java基础原理</title>
    <link href="https://llzzoomm.github.io/2023/04/16/java-ji-chu-yuan-li/"/>
    <id>https://llzzoomm.github.io/2023/04/16/java-ji-chu-yuan-li/</id>
    <published>2023-04-16T07:16:15.775Z</published>
    <updated>2023-04-16T07:18:56.743Z</updated>
    
    <content type="html"><![CDATA[<h1 id="java基础"><a href="#java基础" class="headerlink" title="java基础"></a>java基础</h1><span id="more"></span><h2 id="面向对象"><a href="#面向对象" class="headerlink" title="面向对象"></a>面向对象</h2><h3 id="什么是面向对象？"><a href="#什么是面向对象？" class="headerlink" title="什么是面向对象？"></a>什么是面向对象？</h3><h3 id="对比面向过程，是两种不同的处理问题的角度"><a href="#对比面向过程，是两种不同的处理问题的角度" class="headerlink" title="对比面向过程，是两种不同的处理问题的角度"></a>对比面向过程，是两种不同的处理问题的角度</h3><h3 id="面向过程更注重事情的每一个步骤及顺序，面向对象更注重事情有哪些参与者（对象）、及各自需要做"><a href="#面向过程更注重事情的每一个步骤及顺序，面向对象更注重事情有哪些参与者（对象）、及各自需要做" class="headerlink" title="面向过程更注重事情的每一个步骤及顺序，面向对象更注重事情有哪些参与者（对象）、及各自需要做"></a>面向过程更注重事情的每一个步骤及顺序，面向对象更注重事情有哪些参与者（对象）、及各自需要做</h3><h3 id="什么"><a href="#什么" class="headerlink" title="什么"></a>什么</h3><h3 id="比如：洗衣机洗衣服"><a href="#比如：洗衣机洗衣服" class="headerlink" title="比如：洗衣机洗衣服"></a>比如：洗衣机洗衣服</h3><h3 id="面向过程会将任务拆解成一系列的步骤（函数），-1-、打开洗衣机—–-gt-2、放衣服—–-gt-3、放洗衣粉—–"><a href="#面向过程会将任务拆解成一系列的步骤（函数），-1-、打开洗衣机—–-gt-2、放衣服—–-gt-3、放洗衣粉—–" class="headerlink" title="面向过程会将任务拆解成一系列的步骤（函数）， 1 、打开洗衣机—–>2、放衣服—–>3、放洗衣粉—–"></a>面向过程会将任务拆解成一系列的步骤（函数）， 1 、打开洗衣机—–&gt;2、放衣服—–&gt;3、放洗衣粉—–</h3><h3 id="gt-4、清洗—–-gt-5、烘干"><a href="#gt-4、清洗—–-gt-5、烘干" class="headerlink" title=">4、清洗—–>5、烘干"></a>&gt;4、清洗—–&gt;5、烘干</h3><h3 id="面向对象会拆出人和洗衣机两个对象："><a href="#面向对象会拆出人和洗衣机两个对象：" class="headerlink" title="面向对象会拆出人和洗衣机两个对象："></a>面向对象会拆出人和洗衣机两个对象：</h3><h3 id="人：打开洗衣机-放衣服-放洗衣粉"><a href="#人：打开洗衣机-放衣服-放洗衣粉" class="headerlink" title="人：打开洗衣机 放衣服 放洗衣粉"></a>人：打开洗衣机 放衣服 放洗衣粉</h3><h3 id="洗衣机：清洗-烘干"><a href="#洗衣机：清洗-烘干" class="headerlink" title="洗衣机：清洗 烘干"></a>洗衣机：清洗 烘干</h3><h3 id="从以上例子能看出，面向过程比较直接高效，而面向对象更易于复用、扩展和维护"><a href="#从以上例子能看出，面向过程比较直接高效，而面向对象更易于复用、扩展和维护" class="headerlink" title="从以上例子能看出，面向过程比较直接高效，而面向对象更易于复用、扩展和维护"></a>从以上例子能看出，面向过程比较直接高效，而面向对象更易于复用、扩展和维护</h3><h3 id="面向对象-1"><a href="#面向对象-1" class="headerlink" title="面向对象"></a>面向对象</h3><h3 id="封装-：封装的意义，在于明确标识出允许外部使用的所有成员函数和数据项"><a href="#封装-：封装的意义，在于明确标识出允许外部使用的所有成员函数和数据项" class="headerlink" title="封装 ：封装的意义，在于明确标识出允许外部使用的所有成员函数和数据项"></a>封装 ：封装的意义，在于明确标识出允许外部使用的所有成员函数和数据项</h3><h3 id="内部细节对外部调用透明，外部调用无需修改或者关心内部实现"><a href="#内部细节对外部调用透明，外部调用无需修改或者关心内部实现" class="headerlink" title="内部细节对外部调用透明，外部调用无需修改或者关心内部实现"></a>内部细节对外部调用透明，外部调用无需修改或者关心内部实现</h3><p>1 、javabean的属性私有，提供getset对外访问，因为属性的赋值或者获取逻辑只能由javabean本身决<br>定。而不能由外部胡乱修改</p><p>2 、orm框架</p><p>操作数据库，我们不需要关心链接是如何建立的、sql是如何执行的，只需要引入mybatis，调方法即可</p><figure class="highlight typescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="title class_">String</span> name;</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">setName</span>(<span class="params"><span class="built_in">String</span> name</span>){</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">"tuling_"</span>+name;</span><br><span class="line">}</span><br><span class="line">该name有自己的命名规则，明显不能由外部直接赋值</span><br></pre></td></tr></tbody></table></figure><h3 id="继承-：继承基类的方法，并做出自己的改变和-或扩展"><a href="#继承-：继承基类的方法，并做出自己的改变和-或扩展" class="headerlink" title="继承 ：继承基类的方法，并做出自己的改变和/或扩展"></a>继承 ：继承基类的方法，并做出自己的改变和/或扩展</h3><h3 id="子类共性的方法或者属性直接使用父类的，而不需要自己再定义，只需扩展自己个性化的"><a href="#子类共性的方法或者属性直接使用父类的，而不需要自己再定义，只需扩展自己个性化的" class="headerlink" title="子类共性的方法或者属性直接使用父类的，而不需要自己再定义，只需扩展自己个性化的"></a>子类共性的方法或者属性直接使用父类的，而不需要自己再定义，只需扩展自己个性化的</h3><h3 id="多态-：基于对象所属类的不同，外部对同一个方法的调用，实际执行的逻辑不同。"><a href="#多态-：基于对象所属类的不同，外部对同一个方法的调用，实际执行的逻辑不同。" class="headerlink" title="多态 ：基于对象所属类的不同，外部对同一个方法的调用，实际执行的逻辑不同。"></a>多态 ：基于对象所属类的不同，外部对同一个方法的调用，实际执行的逻辑不同。</h3><h3 id="继承，方法重写，父类引用指向子类对象"><a href="#继承，方法重写，父类引用指向子类对象" class="headerlink" title="继承，方法重写，父类引用指向子类对象"></a>继承，方法重写，父类引用指向子类对象</h3><h3 id="无法调用子类特有的功能"><a href="#无法调用子类特有的功能" class="headerlink" title="无法调用子类特有的功能"></a>无法调用子类特有的功能</h3><h2 id="JDK-JRE-JVM"><a href="#JDK-JRE-JVM" class="headerlink" title="JDK JRE JVM"></a>JDK JRE JVM</h2><h3 id="JDK："><a href="#JDK：" class="headerlink" title="JDK："></a>JDK：</h3><p>Java Develpment Kit java 开发工具</p><p>JRE：</p><p>Java Runtime Environment java运行时环境</p><p>JVM：</p><p>java Virtual Machine java 虚拟机</p><h2 id="和equals比较"><a href="#和equals比较" class="headerlink" title="==和equals比较"></a>==和equals比较</h2><h3 id="对比的是栈中的值，基本数据类型是变量值，引用类型是堆中内存对象的地址"><a href="#对比的是栈中的值，基本数据类型是变量值，引用类型是堆中内存对象的地址" class="headerlink" title="==对比的是栈中的值，基本数据类型是变量值，引用类型是堆中内存对象的地址"></a>==对比的是栈中的值，基本数据类型是变量值，引用类型是堆中内存对象的地址</h3><figure class="highlight abnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">父类类型 变量名 <span class="operator">=</span> new 子类对象 <span class="comment">;</span></span><br><span class="line">变量名.方法名()<span class="comment">;</span></span><br></pre></td></tr></tbody></table></figure><p>equals：object中默认也是采用==比较，通常会重写</p><p>Object</p><p>String</p><p>上述代码可以看出，String类中被复写的equals()方法其实是比较两个字符串的内容。</p><figure class="highlight typescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="built_in">boolean</span> <span class="title function_">equals</span>(<span class="params"><span class="built_in">Object</span> obj</span>) {</span><br><span class="line"><span class="keyword">return</span> (<span class="variable language_">this</span> == obj);</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight processing"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span>(<span class="built_in">Object</span> anObject) {</span><br><span class="line"><span class="keyword">if</span> (<span class="variable">this</span> == anObject) {</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">if</span> (anObject <span class="keyword">instanceof</span> <span class="built_in">String</span>) {</span><br><span class="line"><span class="built_in">String</span> anotherString = (<span class="built_in">String</span>)anObject;</span><br><span class="line"><span class="type">int</span> n = value.<span class="property">length</span>;</span><br><span class="line"><span class="keyword">if</span> (n == anotherString.<span class="property">value</span>.<span class="property">length</span>) {</span><br><span class="line"><span class="type">char</span> v1[] = value;</span><br><span class="line"><span class="type">char</span> v2[] = anotherString.<span class="property">value</span>;</span><br><span class="line"><span class="type">int</span> i = <span class="number">0</span> ;</span><br><span class="line"><span class="keyword">while</span> (n-- != <span class="number">0</span> ) {</span><br><span class="line"><span class="keyword">if</span> (v1[i] != v2[i])</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">i++;</span><br><span class="line">}</span><br><span class="line"><span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line"><span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">StringDemo</span> {</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String args[]</span>)</span> {</span><br><span class="line">String str1 = <span class="string">"Hello"</span>;</span><br><span class="line">String str2 = <span class="keyword">new</span> String(<span class="string">"Hello"</span>);</span><br><span class="line">String str3 = str2; <span class="comment">// 引用传递</span></span><br><span class="line">System.<span class="keyword">out</span>.println(str1 == str2); <span class="comment">// false</span></span><br><span class="line">System.<span class="keyword">out</span>.println(str1 == str3); <span class="comment">// false</span></span><br><span class="line">System.<span class="keyword">out</span>.println(str2 == str3); <span class="comment">// true</span></span><br><span class="line">System.<span class="keyword">out</span>.println(str1.<span class="keyword">equals</span>(str2)); <span class="comment">// true</span></span><br><span class="line">System.<span class="keyword">out</span>.println(str1.<span class="keyword">equals</span>(str3)); <span class="comment">// true</span></span><br><span class="line">System.<span class="keyword">out</span>.println(str2.<span class="keyword">equals</span>(str3)); <span class="comment">// true</span></span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="hashCode与equals"><a href="#hashCode与equals" class="headerlink" title="hashCode与equals"></a>hashCode与equals</h2><p>hashCode介绍：</p><p>hashCode() 的作用是获取哈希码，也称为散列码；它实际上是返回一个int整数。这个哈希码的作用是<br>确定该对象在哈希表中的索引位置。hashCode() 定义在JDK的Object.java中，Java中的任何类都包含有<br>hashCode() 函数。<br>散列表存储的是键值对(key-value)，它的特点是：能根据“键”快速的检索出对应的“值”。这其中就利用<br>到了散列码！（可以快速找到所需要的对象）</p><p>为什么要有hashCode：</p><p><strong>以“HashSet如何检查重复”为例子来说明为什么要有hashCode：</strong><br>对象加入HashSet时，HashSet会先计算对象的hashcode值来判断对象加入的位置，看该位置是否有<br>值，如果没有、HashSet会假设对象没有重复出现。但是如果发现有值，这时会调用equals（）方法来<br>检查两个对象是否真的相同。如果两者相同，HashSet就不会让其加入操作成功。如果不同的话，就会<br>重新散列到其他位置。这样就大大减少了equals的次数，相应就大大提高了执行速度。</p><figure class="highlight applescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">如果两个对象相等，则hashcode一定也是相同的</span><br><span class="line">两个对象相等,对两个对象分别调用<span class="keyword">equals</span>方法都返回<span class="literal">true</span></span><br><span class="line">两个对象有相同的hashcode值，它们也不一定是相等的</span><br><span class="line">因此，<span class="keyword">equals</span>方法被覆盖过，则hashCode方法也必须被覆盖</span><br><span class="line">hashCode()的默认行为是对堆上的对象产生独特值。如果没有重写hashCode()，则该<span class="built_in">class</span>的两个</span><br><span class="line">对象无论如何都不会相等（即使这两个对象指向相同的数据）</span><br></pre></td></tr></tbody></table></figure><h2 id="final"><a href="#final" class="headerlink" title="final"></a>final</h2><h3 id="最终的"><a href="#最终的" class="headerlink" title="最终的"></a>最终的</h3><h3 id="修饰类：表示类不可被继承"><a href="#修饰类：表示类不可被继承" class="headerlink" title="修饰类：表示类不可被继承"></a>修饰类：表示类不可被继承</h3><h3 id="修饰方法：表示方法不可被子类覆盖，但是可以重载"><a href="#修饰方法：表示方法不可被子类覆盖，但是可以重载" class="headerlink" title="修饰方法：表示方法不可被子类覆盖，但是可以重载"></a>修饰方法：表示方法不可被子类覆盖，但是可以重载</h3><h3 id="修饰变量：表示变量一旦被赋值就不可以更改它的值。"><a href="#修饰变量：表示变量一旦被赋值就不可以更改它的值。" class="headerlink" title="修饰变量：表示变量一旦被赋值就不可以更改它的值。"></a>修饰变量：表示变量一旦被赋值就不可以更改它的值。</h3><h3 id="（-1-）修饰成员变量"><a href="#（-1-）修饰成员变量" class="headerlink" title="（ 1 ）修饰成员变量"></a>（ 1 ）修饰成员变量</h3><figure class="highlight actionscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">如果<span class="keyword">final</span>修饰的是类变量，只能在静态初始化块中指定初始值或者声明该类变量时指定初始值。</span><br><span class="line">如果<span class="keyword">final</span>修饰的是成员变量，可以在非静态初始化块、声明该变量或者构造器中执行初始值。</span><br></pre></td></tr></tbody></table></figure><p>（ 2 ）修饰局部变量</p><p>系统不会为局部变量进行初始化，局部变量必须由程序员显示初始化。因此使用final修饰局部变量时，<br>即可以在定义时指定默认值（后面的代码不能对变量再赋值），也可以不指定默认值，而在后面的代码<br>中对final变量赋初值（仅一次）</p><figure class="highlight axapta"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">FinalVar</span> {</span><br><span class="line"><span class="keyword">final</span> <span class="keyword">static</span> <span class="built_in">int</span> a = <span class="number">0</span> ;<span class="comment">//再声明的时候就需要赋值 或者静态代码块赋值</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">static{</span></span><br><span class="line"><span class="comment">a = 0;</span></span><br><span class="line"><span class="comment">}</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">final</span> <span class="built_in">int</span> b = <span class="number">0</span> ;<span class="comment">//再声明的时候就需要赋值 或者代码块中赋值 或者构造器赋值</span></span><br></pre></td></tr></tbody></table></figure><h3 id="（-3-）修饰基本类型数据和引用类型数据"><a href="#（-3-）修饰基本类型数据和引用类型数据" class="headerlink" title="（ 3 ）修饰基本类型数据和引用类型数据"></a>（ 3 ）修饰基本类型数据和引用类型数据</h3><h3 id="如果是基本数据类型的变量，则其数值一旦在初始化之后便不能更改；"><a href="#如果是基本数据类型的变量，则其数值一旦在初始化之后便不能更改；" class="headerlink" title="如果是基本数据类型的变量，则其数值一旦在初始化之后便不能更改；"></a>如果是基本数据类型的变量，则其数值一旦在初始化之后便不能更改；</h3><h3 id="如果是引用类型的变量，则在对其初始化之后便不能再让其指向另一个对象。-但是引用的值是可变"><a href="#如果是引用类型的变量，则在对其初始化之后便不能再让其指向另一个对象。-但是引用的值是可变" class="headerlink" title="如果是引用类型的变量，则在对其初始化之后便不能再让其指向另一个对象。 但是引用的值是可变"></a>如果是引用类型的变量，则在对其初始化之后便不能再让其指向另一个对象。 但是引用的值是可变</h3><h3 id="的-。"><a href="#的-。" class="headerlink" title="的 。"></a>的 。</h3><p><strong>为什么局部内部类和匿名内部类只能访问局部final变量？</strong></p><p>编译之后会生成两个class文件，Test.class Test1.class</p><figure class="highlight arduino"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*{</span></span><br><span class="line"><span class="comment">b = 0;</span></span><br><span class="line"><span class="comment">}*/</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="type">static</span> <span class="type">void</span> <span class="title">main</span><span class="params">(<span class="type">String</span>[] args)</span> </span>{</span><br><span class="line"><span class="keyword">final</span> <span class="type">int</span> localA; <span class="comment">//局部变量只声明没有初始化，不会报错,与final无关。</span></span><br><span class="line">localA = <span class="number">0</span> ;<span class="comment">//在使用之前一定要赋值</span></span><br><span class="line"><span class="comment">//localA = 1; 但是不允许第二次赋值</span></span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight aspectj"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FinalReferenceTest</span></span>{</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span>{</span><br><span class="line"><span class="keyword">final</span> <span class="keyword">int</span>[] iArr={ <span class="number">1</span> , <span class="number">2</span> , <span class="number">3</span> , <span class="number">4</span> };</span><br><span class="line">iArr[ <span class="number">2</span> ]=- <span class="number">3</span> ;<span class="comment">//合法</span></span><br><span class="line">iArr=<span class="keyword">null</span>;<span class="comment">//非法，对iArr不能重新赋值</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight abnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">final Person p <span class="operator">=</span> new Person( <span class="number">25</span> )<span class="comment">;</span></span><br><span class="line">p.setAge( <span class="number">24</span> )<span class="comment">;//合法</span></span><br><span class="line"><span class="attribute">p</span><span class="operator">=</span>null<span class="comment">;//非法</span></span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Test</span> {</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span>(<span class="params">String[] args</span>)</span> {</span><br><span class="line">}</span><br><span class="line"><span class="comment">//局部final变量a,b</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span>(<span class="params">final <span class="built_in">int</span> b</span>)</span> {<span class="comment">//jdk8在这里做了优化, 不用写,语法糖，但实际上也是有</span></span><br><span class="line">的，也不能修改</span><br><span class="line">final <span class="built_in">int</span> a = <span class="number">10</span> ;</span><br><span class="line"><span class="comment">//匿名内部类</span></span><br><span class="line"><span class="keyword">new</span> Thread(){</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span>()</span> {</span><br><span class="line">System.<span class="keyword">out</span>.println(a);</span><br><span class="line">System.<span class="keyword">out</span>.println(b);</span><br><span class="line">};</span><br><span class="line">}.start();</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight angelscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="symbol">OutClass</span> {</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">int</span> age = <span class="number">12</span> ;</span><br></pre></td></tr></tbody></table></figure><figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">outPrint</span>(<span class="params">final <span class="built_in">int</span> x</span>)</span> {</span><br><span class="line"><span class="keyword">class</span> <span class="title">InClass</span> {</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">InPrint</span>()</span> {</span><br><span class="line">System.<span class="keyword">out</span>.println(x);</span><br><span class="line">System.<span class="keyword">out</span>.println(age);</span><br></pre></td></tr></tbody></table></figure><h3 id="首先需要知道的一点是-内部类和外部类是处于同一个级别的，内部类不会因为定义在方法中就会随着"><a href="#首先需要知道的一点是-内部类和外部类是处于同一个级别的，内部类不会因为定义在方法中就会随着" class="headerlink" title="首先需要知道的一点是: 内部类和外部类是处于同一个级别的，内部类不会因为定义在方法中就会随着"></a>首先需要知道的一点是: 内部类和外部类是处于同一个级别的，内部类不会因为定义在方法中就会随着</h3><h3 id="方法的执行完毕就被销毁。"><a href="#方法的执行完毕就被销毁。" class="headerlink" title="方法的执行完毕就被销毁。"></a>方法的执行完毕就被销毁。</h3><h3 id="这里就会产生问题：当外部类的方法结束时，局部变量就会被销毁了，但是内部类对象可能还存在-只有"><a href="#这里就会产生问题：当外部类的方法结束时，局部变量就会被销毁了，但是内部类对象可能还存在-只有" class="headerlink" title="这里就会产生问题：当外部类的方法结束时，局部变量就会被销毁了，但是内部类对象可能还存在(只有"></a>这里就会产生问题：当外部类的方法结束时，局部变量就会被销毁了，但是内部类对象可能还存在(只有</h3><h3 id="没有人再引用它时，才会死亡-。这里就出现了一个矛盾：内部类对象访问了一个不存在的变量。为了解"><a href="#没有人再引用它时，才会死亡-。这里就出现了一个矛盾：内部类对象访问了一个不存在的变量。为了解" class="headerlink" title="没有人再引用它时，才会死亡)。这里就出现了一个矛盾：内部类对象访问了一个不存在的变量。为了解"></a>没有人再引用它时，才会死亡)。这里就出现了一个矛盾：内部类对象访问了一个不存在的变量。为了解</h3><h3 id="决这个问题，就将局部变量复制了一份作为内部类的成员变量，这样当局部变量死亡后，内部类仍可以"><a href="#决这个问题，就将局部变量复制了一份作为内部类的成员变量，这样当局部变量死亡后，内部类仍可以" class="headerlink" title="决这个问题，就将局部变量复制了一份作为内部类的成员变量，这样当局部变量死亡后，内部类仍可以"></a>决这个问题，就将局部变量复制了一份作为内部类的成员变量，这样当局部变量死亡后，内部类仍可以</h3><p>访问它，实际访问的是局部变量的”copy”。这样就好像延长了局部变量的生命周期</p><h3 id="将局部变量复制为内部类的成员变量时，必须保证这两个变量是一样的，也就是如果我们在内部类中修"><a href="#将局部变量复制为内部类的成员变量时，必须保证这两个变量是一样的，也就是如果我们在内部类中修" class="headerlink" title="将局部变量复制为内部类的成员变量时，必须保证这两个变量是一样的，也就是如果我们在内部类中修"></a>将局部变量复制为内部类的成员变量时，必须保证这两个变量是一样的，也就是如果我们在内部类中修</h3><h3 id="改了成员变量，方法中的局部变量也得跟着改变，怎么解决问题呢？"><a href="#改了成员变量，方法中的局部变量也得跟着改变，怎么解决问题呢？" class="headerlink" title="改了成员变量，方法中的局部变量也得跟着改变，怎么解决问题呢？"></a>改了成员变量，方法中的局部变量也得跟着改变，怎么解决问题呢？</h3><p>就将局部变量设置为final，对它初始化后，我就不让你再去修改这个变量，就保证了内部类的成员变量<br>和方法的局部变量的一致性。这实际上也是一种妥协。使得局部变量与内部类内建立的拷贝保持一致。</p><h2 id="String、StringBuffer、StringBuilder"><a href="#String、StringBuffer、StringBuilder" class="headerlink" title="String、StringBuffer、StringBuilder"></a>String、StringBuffer、StringBuilder</h2><p>String是final修饰的，不可变，每次操作都会产生新的String对象</p><p>StringBuffer和StringBuilder都是在原对象上操作</p><p>StringBuffer是线程安全的，StringBuilder线程不安全的</p><p>StringBuffer方法都是synchronized修饰的</p><p>性能：StringBuilder &gt; StringBuffer &gt; String</p><h3 id="场景：经常需要改变字符串内容时使用后面两个"><a href="#场景：经常需要改变字符串内容时使用后面两个" class="headerlink" title="场景：经常需要改变字符串内容时使用后面两个"></a>场景：经常需要改变字符串内容时使用后面两个</h3><p>优先使用StringBuilder，多线程使用共享变量时使用StringBuffer</p><h2 id="重载和重写的区别"><a href="#重载和重写的区别" class="headerlink" title="重载和重写的区别"></a>重载和重写的区别</h2><h3 id="重载：-发生在同一个类中，方法名必须相同，参数类型不同、个数不同、顺序不同，方法返回值和访问"><a href="#重载：-发生在同一个类中，方法名必须相同，参数类型不同、个数不同、顺序不同，方法返回值和访问" class="headerlink" title="重载： 发生在同一个类中，方法名必须相同，参数类型不同、个数不同、顺序不同，方法返回值和访问"></a>重载： 发生在同一个类中，方法名必须相同，参数类型不同、个数不同、顺序不同，方法返回值和访问</h3><h3 id="修饰符可以不同，发生在编译时。"><a href="#修饰符可以不同，发生在编译时。" class="headerlink" title="修饰符可以不同，发生在编译时。"></a>修饰符可以不同，发生在编译时。</h3><h3 id="重写：-发生在父子类中，方法名、参数列表必须相同，返回值范围小于等于父类，抛出的异常范围小于"><a href="#重写：-发生在父子类中，方法名、参数列表必须相同，返回值范围小于等于父类，抛出的异常范围小于" class="headerlink" title="重写： 发生在父子类中，方法名、参数列表必须相同，返回值范围小于等于父类，抛出的异常范围小于"></a>重写： 发生在父子类中，方法名、参数列表必须相同，返回值范围小于等于父类，抛出的异常范围小于</h3><p>等于父类，访问修饰符范围大于等于父类；如果父类方法访问修饰符为private则子类就不能重写该方<br>法。</p><figure class="highlight reasonml"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">}</span><br><span class="line">}</span><br><span class="line"><span class="keyword">new</span> <span class="constructor">InClass()</span>.<span class="constructor">InPrint()</span>;</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="接口和抽象类的区别"><a href="#接口和抽象类的区别" class="headerlink" title="接口和抽象类的区别"></a>接口和抽象类的区别</h2><figure class="highlight aspectj"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">抽象类可以存在普通成员函数，而接口中只能存在<span class="keyword">public</span> <span class="keyword">abstract</span> 方法。</span><br><span class="line">抽象类中的成员变量可以是各种类型的，而接口中的成员变量只能是<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span>类型的。</span><br><span class="line">抽象类只能继承一个，接口可以实现多个。</span><br></pre></td></tr></tbody></table></figure><p>接口的设计目的，是对类的行为进行约束（更准确的说是一种“有”约束，因为接口不能规定类不可以有<br>什么行为），也就是提供一种机制，可以强制要求不同的类具有相同的行为。它只约束了行为的有无，<br>但不对如何实现行为进行限制。</p><p>而抽象类的设计目的，是代码复用。当不同的类具有某些相同的行为(记为行为集合A)，且其中一部分行<br>为的实现方式一致时（A的非真子集，记为B），可以让这些类都派生于一个抽象类。在这个抽象类中实<br>现了B，避免让所有的子类来实现B，这就达到了代码复用的目的。而A减B的部分，留给各个子类自己<br>实现。正是因为A-B在这里没有实现，所以抽象类不允许实例化出来（否则当调用到A-B时，无法执<br>行）。</p><p>抽象类是对类本质的抽象，表达的是 is a 的关系，比如：BMW is a Car。抽象类包含并实现子类的通<br>用特性，将子类存在差异化的特性进行抽象，交由子类去实现。</p><p>而接口是对行为的抽象，表达的是 like a 的关系。比如：Bird like a Aircraft（像飞行器一样可以<br>飞），但其本质上 is a Bird。接口的核心是定义行为，即实现类可以做什么，至于实现类主体是谁、<br>是如何实现的，接口并不关心。</p><p>使用场景：当你关注一个事物的本质的时候，用抽象类；当你关注一个操作的时候，用接口。</p><p>抽象类的功能要远超过接口，但是，定义抽象类的代价高。因为高级语言来说（从实际设计上来说也<br>是）每个类只能继承一个类。在这个类中，你必须继承或编写出其所有子类的所有共性。虽然接口在功<br>能上会弱化许多，但是它只是针对一个动作的描述。而且你可以在一个类中同时实现多个接口。在设计<br>阶段会降低难度</p><h2 id="List和Set的区别"><a href="#List和Set的区别" class="headerlink" title="List和Set的区别"></a>List和Set的区别</h2><figure class="highlight dart"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>：有序，按对象进入的顺序保存对象，可重复，允许多个<span class="built_in">Null</span>元素对象，可以使用<span class="built_in">Iterator</span>取出</span><br><span class="line">所有元素，在逐一遍历，还可以使用<span class="keyword">get</span>(<span class="built_in">int</span> index)获取指定下标的元素</span><br><span class="line"><span class="built_in">Set</span>：无序，不可重复，最多允许有一个<span class="built_in">Null</span>元素对象，取元素时只能用<span class="built_in">Iterator</span>接口取得所有元</span><br><span class="line">素，在逐一遍历各个元素</span><br></pre></td></tr></tbody></table></figure><figure class="highlight processing"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="built_in">add</span>(<span class="type">int</span> a,<span class="built_in">String</span> b)</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">String</span> <span class="built_in">add</span>(<span class="type">int</span> a,<span class="built_in">String</span> b)</span><br><span class="line"><span class="comment">//编译报错</span></span><br></pre></td></tr></tbody></table></figure><h2 id="ArrayList和LinkedList区别"><a href="#ArrayList和LinkedList区别" class="headerlink" title="ArrayList和LinkedList区别"></a>ArrayList和LinkedList区别</h2><p>ArrayList：基于动态数组，连续内存存储，适合下标访问（随机访问），扩容机制：因为数组长度固<br>定，超出长度存数据时需要新建数组，然后将老数组的数据拷贝到新数组，如果不是尾部插入数据还会<br>涉及到元素的移动（往后复制一份，插入新元素），使用尾插法并指定初始容量可以极大提升性能、甚<br>至超过linkedList（需要创建大量的node对象）</p><p>LinkedList：基于链表，可以存储在分散的内存中，适合做数据插入及删除操作，不适合查询：需要逐<br>一遍历</p><p>遍历LinkedList必须使用iterator不能使用for循环，因为每次for循环体内通过get(i)取得某一元素时都需<br>要对list重新进行遍历，性能消耗极大。<br>另外不要试图使用indexOf等返回元素索引，并利用其进行遍历，使用indexlOf对list进行了遍历，当结<br>果为空时会遍历整个列表。</p><h2 id="HashMap和HashTable有什么区别？其底层实现是什"><a href="#HashMap和HashTable有什么区别？其底层实现是什" class="headerlink" title="HashMap和HashTable有什么区别？其底层实现是什"></a>HashMap和HashTable有什么区别？其底层实现是什</h2><h2 id="么？"><a href="#么？" class="headerlink" title="么？"></a>么？</h2><h3 id="区别-："><a href="#区别-：" class="headerlink" title="区别 ："></a>区别 ：</h3><p>（ 1 ）HashMap方法没有synchronized修饰，线程非安全，HashTable线程安全；</p><p>（ 2 ）HashMap允许key和value为null，而HashTable不允许</p><p>2.底层实现：数组+链表实现</p><p>jdk8开始链表高度到 8 、数组长度超过 64 ，链表转变为红黑树，元素以内部类Node节点存在</p><figure class="highlight arcade"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">计算key的<span class="built_in">hash</span>值，二次<span class="built_in">hash</span>然后对数组长度取模，对应到数组下标，</span><br><span class="line">如果没有产生<span class="built_in">hash</span>冲突(下标位置没有元素)，则直接创建Node存入数组，</span><br><span class="line">如果产生<span class="built_in">hash</span>冲突，先进行equal比较，相同则取代该元素，不同，则判断链表高度插入链表，链</span><br><span class="line">表高度达到 <span class="number">8</span> ，并且数组长度到 <span class="number">64</span> 则转变为红黑树，长度低于 <span class="number">6</span> 则将红黑树转回链表</span><br><span class="line">key为<span class="literal">null</span>，存在下标 <span class="number">0</span> 的位置</span><br></pre></td></tr></tbody></table></figure><p>数组扩容</p><h2 id="ConcurrentHashMap原理，jdk7和jdk8版本的区别"><a href="#ConcurrentHashMap原理，jdk7和jdk8版本的区别" class="headerlink" title="ConcurrentHashMap原理，jdk7和jdk8版本的区别"></a>ConcurrentHashMap原理，jdk7和jdk8版本的区别</h2><p>jdk7：</p><p>数据结构：ReentrantLock+Segment+HashEntry，一个Segment中包含一个HashEntry数组，每个<br>HashEntry又是一个链表结构</p><p>元素查询：二次hash，第一次Hash定位到Segment，第二次Hash定位到元素所在的链表的头部</p><p>锁：Segment分段锁 Segment继承了ReentrantLock，锁定操作的Segment，其他的Segment不受影<br>响，并发度为segment个数，可以通过构造函数指定，数组扩容不会影响其他的segment</p><p>get方法无需加锁，volatile保证</p><p>jdk8：</p><p>数据结构：synchronized+CAS+Node+红黑树，Node的val和next都用volatile修饰，保证可见性</p><p>查找，替换，赋值操作都使用CAS</p><p>锁：锁链表的head节点，不影响其他元素的读写，锁粒度更细，效率更高，扩容时，阻塞所有的读写<br>操作、并发扩容</p><p>读操作无锁：<br>Node的val和next使用volatile修饰，读写线程对该变量互相可见<br>数组用volatile修饰，保证扩容时被读线程感知</p><h2 id="什么是字节码？采用字节码的好处是什么？"><a href="#什么是字节码？采用字节码的好处是什么？" class="headerlink" title="什么是字节码？采用字节码的好处是什么？"></a>什么是字节码？采用字节码的好处是什么？</h2><p><strong>java中的编译器和解释器：</strong></p><p>Java中引入了虚拟机的概念，即在机器和编译程序之间加入了一层抽象的虚拟的机器。这台虚拟的机器<br>在任何平台上都提供给编译程序一个的共同的接口。<br>编译程序只需要面向虚拟机，生成虚拟机能够理解的代码，然后由解释器来将虚拟机代码转换为特定系<br>统的机器码执行。在Java中，这种供虚拟机理解的代码叫做 字节码（即扩展名为 .class的文件），它不<br>面向任何特定的处理器，只面向虚拟机。<br>每一种平台的解释器是不同的，但是实现的虚拟机是相同的。Java源程序经过编译器编译后变成字节<br>码，字节码由虚拟机解释执行，虚拟机将每一条要执行的字节码送给解释器，解释器将其翻译成特定机<br>器上的机器码，然后在特定的机器上运行。这也就是解释了Java的编译与解释并存的特点。<br>Java源代码—-&gt;编译器—-&gt;jvm可执行的Java字节码(即虚拟指令)—-&gt;jvm—-&gt;jvm中解释器—–&gt;机器可执<br>行的二进制机器码—-&gt;程序运行。<br><strong>采用字节码的好处：</strong></p><p>Java语言通过字节码的方式，在一定程度上解决了传统解释型语言执行效率低的问题，同时又保留了解<br>释型语言可移植的特点。所以Java程序运行时比较高效，而且，由于字节码并不专对一种特定的机器，<br>因此，Java程序无须重新编译便可在多种不同的计算机上运行。</p><h2 id="Java中的异常体系"><a href="#Java中的异常体系" class="headerlink" title="Java中的异常体系"></a>Java中的异常体系</h2><p>Java中的所有异常都来自顶级父类Throwable。<br>Throwable下有两个子类Exception和Error。<br>Error是程序无法处理的错误，一旦出现这个错误，则程序将被迫停止运行。<br>Exception不会导致程序停止，又分为两个部分RunTimeException运行时异常和CheckedException检<br>查异常。<br>RunTimeException常常发生在程序运行过程中，会导致程序当前线程执行失败。CheckedException常<br>常发生在程序编译过程中，会导致程序编译不通过。</p><h2 id="Java类加载器"><a href="#Java类加载器" class="headerlink" title="Java类加载器"></a>Java类加载器</h2><p>JDK自带有三个类加载器：bootstrap ClassLoader、ExtClassLoader、AppClassLoader。<br>BootStrapClassLoader是ExtClassLoader的父类加载器，默认负责加载%JAVA_HOME%lib下的jar包和<br>class文件。<br>ExtClassLoader是AppClassLoader的父类加载器，负责加载%JAVA_HOME%/lib/ext文件夹下的jar包和<br>class类。<br>AppClassLoader是自定义类加载器的父类，负责加载classpath下的类文件。系统类加载器，线程上下<br>文加载器</p><p>继承ClassLoader实现自定义类加载器</p><h2 id="双亲委托模型"><a href="#双亲委托模型" class="headerlink" title="双亲委托模型"></a>双亲委托模型</h2><h3 id="双亲委派模型的好处："><a href="#双亲委派模型的好处：" class="headerlink" title="双亲委派模型的好处："></a>双亲委派模型的好处：</h3><figure class="highlight angelscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">主要是为了安全性，避免用户自己编写的类动态替换 Java的一些核心类，比如 String。</span><br><span class="line">同时也避免了类的重复加载，因为 JVM中区分不同类，不仅仅是根据类名，相同的 <span class="keyword">class</span>文件被不</span><br><span class="line">同的 <span class="symbol">ClassLoader</span>加载就是不同的两个类</span><br></pre></td></tr></tbody></table></figure><h2 id="GC如何判断对象可以被回收"><a href="#GC如何判断对象可以被回收" class="headerlink" title="GC如何判断对象可以被回收"></a>GC如何判断对象可以被回收</h2><h3 id="引用计数法：每个对象有一个引用计数属性，新增一个引用时计数加-1-，引用释放时计数减-1-，计"><a href="#引用计数法：每个对象有一个引用计数属性，新增一个引用时计数加-1-，引用释放时计数减-1-，计" class="headerlink" title="引用计数法：每个对象有一个引用计数属性，新增一个引用时计数加 1 ，引用释放时计数减 1 ，计"></a>引用计数法：每个对象有一个引用计数属性，新增一个引用时计数加 1 ，引用释放时计数减 1 ，计</h3><h3 id="数为-0-时可以回收，"><a href="#数为-0-时可以回收，" class="headerlink" title="数为 0 时可以回收，"></a>数为 0 时可以回收，</h3><figure class="highlight mathematica"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">可达性分析法：从 <span class="variable">GC</span> <span class="built_in">Roots</span> 开始向下搜索，搜索所走过的路径称为引用链。当一个对象到 <span class="variable">GC</span></span><br><span class="line"><span class="built_in">Roots</span> 没有任何引用链相连时，则证明此对象是不可用的，那么虚拟机就判断是可回收对象。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">引用计数法，可能会出现<span class="keyword">A</span> 引用了 B，B 又引用了 <span class="keyword">A</span>，这时候就算他们都不再使用了，但因为相互</span><br><span class="line">引用 计数器=<span class="number">1</span> 永远无法被回收。</span><br></pre></td></tr></tbody></table></figure><p>GC Roots的对象有：</p><figure class="highlight gcode"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">虚拟机栈<span class="comment">(栈帧中的本地变量表）中引用的对象</span></span><br><span class="line"><span class="comment">方法区中类静态属性引用的对象</span></span><br><span class="line"><span class="comment">方法区中常量引用的对象</span></span><br><span class="line"><span class="comment">本地方法栈中JNI(即一般说的Native方法)</span>引用的对象</span><br></pre></td></tr></tbody></table></figure><h3 id="可达性算法中的不可达对象并不是立即死亡的，对象拥有一次自我拯救的机会。对象被系统宣告死亡至"><a href="#可达性算法中的不可达对象并不是立即死亡的，对象拥有一次自我拯救的机会。对象被系统宣告死亡至" class="headerlink" title="可达性算法中的不可达对象并不是立即死亡的，对象拥有一次自我拯救的机会。对象被系统宣告死亡至"></a>可达性算法中的不可达对象并不是立即死亡的，对象拥有一次自我拯救的机会。对象被系统宣告死亡至</h3><p>少要经历两次标记过程：第一次是经过可达性分析发现没有与GC Roots相连接的引用链，第二次是在由<br>虚拟机自动建立的Finalizer队列中判断是否需要执行finalize()方法。</p><p>当对象变成(GC Roots)不可达时，GC会判断该对象是否覆盖了finalize方法，若未覆盖，则直接将其回<br>收。否则，若对象未执行过finalize方法，将其放入F-Queue队列，由一低优先级线程执行该队列中对象<br>的finalize方法。执行finalize方法完毕后，GC会再次判断该对象是否可达，若不可达，则进行回收，否<br>则，对象“复活”</p><p>每个对象只能触发一次finalize()方法</p><p>由于finalize()方法运行代价高昂，不确定性大，无法保证各个对象的调用顺序，不推荐大家使用，建议<br>遗忘它。</p><h1 id="线程、并发相关"><a href="#线程、并发相关" class="headerlink" title="线程、并发相关"></a>线程、并发相关</h1><h2 id="线程的生命周期？线程有几种状态"><a href="#线程的生命周期？线程有几种状态" class="headerlink" title="线程的生命周期？线程有几种状态"></a>线程的生命周期？线程有几种状态</h2><h3 id="1-线程通常有五种状态，创建，就绪，运行、阻塞和死亡状态。"><a href="#1-线程通常有五种状态，创建，就绪，运行、阻塞和死亡状态。" class="headerlink" title="1.线程通常有五种状态，创建，就绪，运行、阻塞和死亡状态。"></a>1.线程通常有五种状态，创建，就绪，运行、阻塞和死亡状态。</h3><h3 id="2-阻塞的情况又分为三种："><a href="#2-阻塞的情况又分为三种：" class="headerlink" title="2.阻塞的情况又分为三种："></a>2.阻塞的情况又分为三种：</h3><p>(1)、等待阻塞：运行的线程执行wait方法，该线程会释放占用的所有资源，JVM会把该线程放入“等待<br>池”中。进入这个状态后，是不能自动唤醒的，必须依靠其他线程调用notify或notifyAll方法才能被唤<br>醒，wait是object类的方法</p><p>(2)、同步阻塞：运行的线程在获取对象的同步锁时，若该同步锁被别的线程占用，则JVM会把该线程放<br>入“锁池”中。</p><p>(3)、其他阻塞：运行的线程执行sleep或join方法，或者发出了I/O请求时，JVM会把该线程置为阻塞状<br>态。当sleep状态超时、join等待线程终止或者超时、或者I/O处理完毕时，线程重新转入就绪状态。<br>sleep是Thread类的方法</p><p>1.新建状态（New）：新创建了一个线程对象。</p><p>2.就绪状态（Runnable）：线程对象创建后，其他线程调用了该对象的start方法。该状态的线程位于<br>可运行线程池中，变得可运行，等待获取CPU的使用权。</p><p>3.运行状态（Running）：就绪状态的线程获取了CPU，执行程序代码。</p><p>4.阻塞状态（Blocked）：阻塞状态是线程因为某种原因放弃CPU使用权，暂时停止运行。直到线程进<br>入就绪状态，才有机会转到运行状态。</p><p>5.死亡状态（Dead）：线程执行完了或者因异常退出了run方法，该线程结束生命周期。</p><h2 id="sleep-、wait-、join-、yield-的区别"><a href="#sleep-、wait-、join-、yield-的区别" class="headerlink" title="sleep()、wait()、join()、yield()的区别"></a>sleep()、wait()、join()、yield()的区别</h2><h3 id="1-锁池"><a href="#1-锁池" class="headerlink" title="1.锁池"></a>1.锁池</h3><h3 id="所有需要竞争同步锁的线程都会放在锁池当中，比如当前对象的锁已经被其中一个线程得到，则其他线"><a href="#所有需要竞争同步锁的线程都会放在锁池当中，比如当前对象的锁已经被其中一个线程得到，则其他线" class="headerlink" title="所有需要竞争同步锁的线程都会放在锁池当中，比如当前对象的锁已经被其中一个线程得到，则其他线"></a>所有需要竞争同步锁的线程都会放在锁池当中，比如当前对象的锁已经被其中一个线程得到，则其他线</h3><h3 id="程需要在这个锁池进行等待，当前面的线程释放同步锁后锁池中的线程去竞争同步锁，当某个线程得到"><a href="#程需要在这个锁池进行等待，当前面的线程释放同步锁后锁池中的线程去竞争同步锁，当某个线程得到" class="headerlink" title="程需要在这个锁池进行等待，当前面的线程释放同步锁后锁池中的线程去竞争同步锁，当某个线程得到"></a>程需要在这个锁池进行等待，当前面的线程释放同步锁后锁池中的线程去竞争同步锁，当某个线程得到</h3><p>后会进入就绪队列进行等待cpu资源分配。</p><p>2.等待池</p><p>当我们调用wait（）方法后，线程会放到等待池当中，等待池的线程是不会去竞争同步锁。只有调用了<br>notify（）或notifyAll()后等待池的线程才会开始去竞争锁，notify（）是随机从等待池选出一个线程放<br>到锁池，而notifyAll()是将等待池的所有线程放到锁池当中</p><p>1 、sleep 是 Thread 类的静态本地方法，wait 则是 Object 类的本地方法。</p><p>2 、sleep方法不会释放lock，但是wait会释放，而且会加入到等待队列中。</p><p>3 、sleep方法不依赖于同步器synchronized，但是wait需要依赖synchronized关键字。</p><p>4 、sleep不需要被唤醒（休眠之后推出阻塞），但是wait需要（不指定时间需要被别人中断）。</p><p>5 、sleep 一般用于当前线程休眠，或者轮循暂停操作，wait 则多用于多线程之间的通信。</p><p>6 、sleep 会让出 CPU 执行时间且强制上下文切换，而 wait 则不一定，wait 后可能还是有机会重新竞<br>争到锁继续执行的。</p><p>yield（）执行后线程直接进入就绪状态，马上释放了cpu的执行权，但是依然保留了cpu的执行资格，<br>所以有可能cpu下次进行线程调度还会让这个线程获取到执行权继续执行</p><p>join（）执行后线程进入阻塞状态，例如在线程B中调用线程A的join（），那线程B会进入到阻塞队<br>列，直到线程A结束或中断线程</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sleep</span>就是把cpu的执行资格和执行权释放出去，不再运行此线程，当定时时间结束再取回cpu资源，参与cpu</span><br><span class="line">的调度，获取到cpu资源后就可以继续运行了。而如果<span class="built_in">sleep</span>时该线程有锁，那么<span class="built_in">sleep</span>不会释放这个锁，而</span><br><span class="line">是把锁带着进入了冻结状态，也就是说其他需要这个锁的线程根本不可能获取到这个锁。也就是说无法执行程</span><br><span class="line">序。如果在睡眠期间其他线程调用了这个线程的interrupt方法，那么这个线程也会抛出</span><br><span class="line">interruptexception异常返回，这点和<span class="built_in">wait</span>是一样的。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException {</span><br><span class="line"><span class="type">Thread</span> <span class="variable">t1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() {</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> {</span><br><span class="line"><span class="keyword">try</span> {</span><br><span class="line">Thread.sleep( <span class="number">3000</span> );</span><br><span class="line">} <span class="keyword">catch</span> (InterruptedException e) {</span><br></pre></td></tr></tbody></table></figure><h2 id="对线程安全的理解"><a href="#对线程安全的理解" class="headerlink" title="对线程安全的理解"></a>对线程安全的理解</h2><h3 id="不是线程安全、应该是内存安全，堆是共享内存，可以被所有线程访问"><a href="#不是线程安全、应该是内存安全，堆是共享内存，可以被所有线程访问" class="headerlink" title="不是线程安全、应该是内存安全，堆是共享内存，可以被所有线程访问"></a>不是线程安全、应该是内存安全，堆是共享内存，可以被所有线程访问</h3><h3 id="堆-是进程和线程共有的空间，分全局堆和局部堆。全局堆就是所有没有分配的空间，局部堆就是用户分"><a href="#堆-是进程和线程共有的空间，分全局堆和局部堆。全局堆就是所有没有分配的空间，局部堆就是用户分" class="headerlink" title="堆 是进程和线程共有的空间，分全局堆和局部堆。全局堆就是所有没有分配的空间，局部堆就是用户分"></a>堆 是进程和线程共有的空间，分全局堆和局部堆。全局堆就是所有没有分配的空间，局部堆就是用户分</h3><h3 id="配的空间。堆在操作系统对进程初始化的时候分配，运行过程中也可以向系统要额外的堆，但是用完了"><a href="#配的空间。堆在操作系统对进程初始化的时候分配，运行过程中也可以向系统要额外的堆，但是用完了" class="headerlink" title="配的空间。堆在操作系统对进程初始化的时候分配，运行过程中也可以向系统要额外的堆，但是用完了"></a>配的空间。堆在操作系统对进程初始化的时候分配，运行过程中也可以向系统要额外的堆，但是用完了</h3><h3 id="要还给操作系统，要不然就是内存泄漏。"><a href="#要还给操作系统，要不然就是内存泄漏。" class="headerlink" title="要还给操作系统，要不然就是内存泄漏。"></a>要还给操作系统，要不然就是内存泄漏。</h3><figure class="highlight mipsasm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在<span class="keyword">Java中，堆是Java虚拟机所管理的内存中最大的一块，是所有线程共享的一块内存区域，在虚</span></span><br><span class="line"><span class="keyword"></span>拟机启动时创建。堆所存在的内存区域的唯一目的就是存放对象实例，几乎所有的对象实例以及</span><br><span class="line">数组都在这里分配内存。</span><br></pre></td></tr></tbody></table></figure><p><strong>栈</strong> 是每个线程独有的，保存其运行状态和局部自动变量的。栈在线程开始的时候初始化，每个线程的栈<br>互相独立，因此，栈是线程安全的。操作系统在切换线程的时候会自动切换栈。栈空间不需要在高级语<br>言里面显式的分配和释放。</p><h3 id="目前主流操作系统都是多任务的，即多个进程同时运行。为了保证安全，每个进程只能访问分配给自己"><a href="#目前主流操作系统都是多任务的，即多个进程同时运行。为了保证安全，每个进程只能访问分配给自己" class="headerlink" title="目前主流操作系统都是多任务的，即多个进程同时运行。为了保证安全，每个进程只能访问分配给自己"></a>目前主流操作系统都是多任务的，即多个进程同时运行。为了保证安全，每个进程只能访问分配给自己</h3><h3 id="的内存空间，而不能访问别的进程的，这是由操作系统保障的。"><a href="#的内存空间，而不能访问别的进程的，这是由操作系统保障的。" class="headerlink" title="的内存空间，而不能访问别的进程的，这是由操作系统保障的。"></a>的内存空间，而不能访问别的进程的，这是由操作系统保障的。</h3><h3 id="在每个进程的内存空间中都会有一块特殊的公共区域，通常称为堆（内存）。进程内的所有线程都可以"><a href="#在每个进程的内存空间中都会有一块特殊的公共区域，通常称为堆（内存）。进程内的所有线程都可以" class="headerlink" title="在每个进程的内存空间中都会有一块特殊的公共区域，通常称为堆（内存）。进程内的所有线程都可以"></a>在每个进程的内存空间中都会有一块特殊的公共区域，通常称为堆（内存）。进程内的所有线程都可以</h3><h3 id="访问到该区域，这就是造成问题的潜在原因。"><a href="#访问到该区域，这就是造成问题的潜在原因。" class="headerlink" title="访问到该区域，这就是造成问题的潜在原因。"></a>访问到该区域，这就是造成问题的潜在原因。</h3><figure class="highlight abnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">e.printStackTrace()<span class="comment">;</span></span><br><span class="line">}</span><br><span class="line">System.out.println(<span class="string">"22222222"</span>)<span class="comment">;</span></span><br><span class="line">}</span><br><span class="line">})<span class="comment">;</span></span><br><span class="line">t1.start()<span class="comment">;</span></span><br><span class="line">t1.join()<span class="comment">;</span></span><br><span class="line">// 这行代码必须要等t1全部执行完毕，才会执行</span><br><span class="line">System.out.println(<span class="string">"1111"</span>)<span class="comment">;</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight dns"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">22222222</span></span><br><span class="line"><span class="number">1111</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">当多个线程访问一个对象时，如果不用进行额外的同步控制或其他的协调操作，调用这个对象的行为都可以获</span><br><span class="line">得正确的结果，我们就说这个对象是线程安全的</span><br></pre></td></tr></tbody></table></figure><h2 id="Thread、Runable的区别"><a href="#Thread、Runable的区别" class="headerlink" title="Thread、Runable的区别"></a>Thread、Runable的区别</h2><p>Thread和Runnable的实质是继承关系，没有可比性。无论使用Runnable还是Thread，都会new<br>Thread，然后执行run方法。用法上，如果有复杂的线程操作需求，那就选择继承Thread，如果只是简<br>单的执行一个任务，那就实现runnable。</p><figure class="highlight typescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//会卖出多一倍的票</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test</span> {</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="built_in">String</span>[] args</span>) {</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight scss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">new <span class="built_in">MyThread</span>()<span class="selector-class">.start</span>();</span><br><span class="line">new <span class="built_in">MyThread</span>()<span class="selector-class">.start</span>();</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">static <span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>{</span><br><span class="line"><span class="keyword">private</span> int ticket = <span class="number">5</span> ;</span><br><span class="line">public void run(){</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>){</span><br><span class="line"><span class="type">System</span>.out.println(<span class="string">"Thread ticket = "</span> + ticket--);</span><br><span class="line"><span class="keyword">if</span>(ticket &lt; <span class="number">0</span> ){</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight haxe"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//正常卖出</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test2</span> </span>{</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> void main(<span class="keyword">String</span>[] args) {</span><br><span class="line"><span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">MyThread2 mt=<span class="keyword">new</span> <span class="type">MyThread2</span>();</span><br><span class="line"><span class="keyword">new</span> <span class="type">Thread</span>(mt).start();</span><br><span class="line"><span class="keyword">new</span> <span class="type">Thread</span>(mt).start();</span><br></pre></td></tr></tbody></table></figure><figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">}</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title">MyThread2</span> <span class="title">implements</span> <span class="title">Runnable</span>{</span><br><span class="line"><span class="keyword">private</span> <span class="built_in">int</span> ticket = <span class="number">5</span> ;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span>()</span>{</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">true</span>){</span><br><span class="line">System.<span class="keyword">out</span>.println(<span class="string">"Runnable ticket = "</span> + ticket--);</span><br><span class="line"><span class="keyword">if</span>(ticket &lt; <span class="number">0</span> ){</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>原因是：MyThread创建了两个实例，自然会卖出两倍，属于用法错误</p><h2 id="对守护线程的理解"><a href="#对守护线程的理解" class="headerlink" title="对守护线程的理解"></a>对守护线程的理解</h2><h3 id="守护线程：为所有非守护线程提供服务的线程；任何一个守护线程都是整个JVM中所有非守护线程的保"><a href="#守护线程：为所有非守护线程提供服务的线程；任何一个守护线程都是整个JVM中所有非守护线程的保" class="headerlink" title="守护线程：为所有非守护线程提供服务的线程；任何一个守护线程都是整个JVM中所有非守护线程的保"></a>守护线程：为所有非守护线程提供服务的线程；任何一个守护线程都是整个JVM中所有非守护线程的保</h3><h3 id="姆；"><a href="#姆；" class="headerlink" title="姆；"></a>姆；</h3><h3 id="守护线程类似于整个进程的一个默默无闻的小喽喽；它的生死无关重要，它却依赖整个进程而运行；哪"><a href="#守护线程类似于整个进程的一个默默无闻的小喽喽；它的生死无关重要，它却依赖整个进程而运行；哪" class="headerlink" title="守护线程类似于整个进程的一个默默无闻的小喽喽；它的生死无关重要，它却依赖整个进程而运行；哪"></a>守护线程类似于整个进程的一个默默无闻的小喽喽；它的生死无关重要，它却依赖整个进程而运行；哪</h3><h3 id="天其他线程结束了，没有要执行的了，程序就结束了，理都没理守护线程，就把它中断了；"><a href="#天其他线程结束了，没有要执行的了，程序就结束了，理都没理守护线程，就把它中断了；" class="headerlink" title="天其他线程结束了，没有要执行的了，程序就结束了，理都没理守护线程，就把它中断了；"></a>天其他线程结束了，没有要执行的了，程序就结束了，理都没理守护线程，就把它中断了；</h3><p>注意： 由于守护线程的终止是自身无法控制的，因此千万不要把IO、File等重要操作逻辑分配给它；因<br>为它不靠谱；</p><p>守护线程的作用是什么？<br>举例， GC垃圾回收线程：就是一个经典的守护线程，当我们的程序中不再有任何运行的Thread,程序就<br>不会再产生垃圾，垃圾回收器也就无事可做，所以当垃圾回收线程是JVM上仅剩的线程时，垃圾回收线<br>程会自动离开。它始终在低级别的状态中运行，用于实时监控和管理系统中的可回收资源。<br>应用场景：（ 1 ）来为其它线程提供服务支持的情况；（ 2 ） 或者在任何情况下，程序结束时，这个线<br>程必须正常且立刻关闭，就可以作为守护线程来使用；反之，如果一个正在执行某个操作的线程必须要<br>正确地关闭掉否则就会出现不好的后果的话，那么这个线程就不能是守护线程，而是用户线程。通常都<br>是些关键的事务，比方说，数据库录入或者更新，这些操作都是不能中断的。</p><p>thread.setDaemon(true)必须在thread.start()之前设置，否则会跑出一个<br>IllegalThreadStateException异常。你不能把正在运行的常规线程设置为守护线程。</p><p>在Daemon线程中产生的新线程也是Daemon的。</p><p>守护线程不能用于去访问固有资源，比如读写操作或者计算逻辑。因为它会在任何时候甚至在一个操作<br>的中间发生中断。</p><p>Java自带的多线程框架，比如ExecutorService，会将守护线程转换为用户线程，所以如果要使用后台线<br>程就不能用Java的线程池。</p><h2 id="ThreadLocal的原理和使用场景"><a href="#ThreadLocal的原理和使用场景" class="headerlink" title="ThreadLocal的原理和使用场景"></a>ThreadLocal的原理和使用场景</h2><p>每一个Thread对象均含有一个ThreadLocalMap类型的成员变量threadLocals，它存储本线程中所<br>有ThreadLocal对象及其对应的值</p><figure class="highlight ada"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ThreadLocalMap由一个个<span class="keyword">Entry</span>对象构成</span><br></pre></td></tr></tbody></table></figure><p>Entry继承自WeakReference&lt;ThreadLocal&lt;?&gt;&gt;，一个Entry由ThreadLocal对象和Object构<br>成。由此可见，Entry的key是ThreadLocal对象，并且是一个弱引用。当没指向key的强引用后，该<br>key就会被垃圾收集器回收</p><p>当执行set方法时，ThreadLocal首先会获取当前线程对象，然后获取当前线程的ThreadLocalMap对<br>象。再以当前ThreadLocal对象为key，将值存储进ThreadLocalMap对象中。</p><p>get方法执行过程类似。ThreadLocal首先会获取当前线程对象，然后获取当前线程的ThreadLocalMap<br>对象。再以当前ThreadLocal对象为key，获取对应的value。</p><p>由于每一条线程均含有各自 <strong>私有的</strong> ThreadLocalMap容器，这些容器相互独立互不影响，因此不会存在<br>线程安全性问题，从而也无需使用同步机制来保证多条线程访问容器的互斥性。</p><h3 id="使用场景："><a href="#使用场景：" class="headerlink" title="使用场景："></a>使用场景：</h3><p>1 、在进行对象跨层传递的时候，使用ThreadLocal可以避免多次传递，打破层次间的约束。</p><p>2 、线程间数据隔离</p><p>3 、进行事务操作，用于存储线程事务信息。</p><p>4 、数据库连接，Session会话管理。</p><h2 id="ThreadLocal内存泄露原因，如何避免"><a href="#ThreadLocal内存泄露原因，如何避免" class="headerlink" title="ThreadLocal内存泄露原因，如何避免"></a>ThreadLocal内存泄露原因，如何避免</h2><h3 id="内存泄露为程序在申请内存后，无法释放已申请的内存空间，一次内存泄露危害可以忽略，但内存泄露"><a href="#内存泄露为程序在申请内存后，无法释放已申请的内存空间，一次内存泄露危害可以忽略，但内存泄露" class="headerlink" title="内存泄露为程序在申请内存后，无法释放已申请的内存空间，一次内存泄露危害可以忽略，但内存泄露"></a>内存泄露为程序在申请内存后，无法释放已申请的内存空间，一次内存泄露危害可以忽略，但内存泄露</h3><h3 id="堆积后果很严重，无论多少内存-迟早会被占光，"><a href="#堆积后果很严重，无论多少内存-迟早会被占光，" class="headerlink" title="堆积后果很严重，无论多少内存,迟早会被占光，"></a>堆积后果很严重，无论多少内存,迟早会被占光，</h3><h3 id="不再会被使用的对象或者变量占用的内存不能被回收，就是内存泄露。"><a href="#不再会被使用的对象或者变量占用的内存不能被回收，就是内存泄露。" class="headerlink" title="不再会被使用的对象或者变量占用的内存不能被回收，就是内存泄露。"></a>不再会被使用的对象或者变量占用的内存不能被回收，就是内存泄露。</h3><p>强引用：使用最普遍的引用(new)，一个对象具有强引用，不会被垃圾回收器回收。当内存空间不足，<br>Java虚拟机宁愿抛出OutOfMemoryError错误，使程序异常终止，也不回收这种对象。</p><figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Spring框架在事务开始时会给当前线程绑定一个Jdbc <span class="keyword">Connection</span>,在整个事务过程都是使用该线程绑定的</span><br><span class="line"><span class="keyword">connection</span>来执行数据库操作，实现了事务的隔离性。Spring框架里面就是用的ThreadLocal来实现这种</span><br><span class="line">隔离</span><br></pre></td></tr></tbody></table></figure><p>如果想取消强引用和某个对象之间的关联，可以显式地将引用赋值为null，这样可以使JVM在合适的时<br>间就会回收该对象。</p><p>弱引用：JVM进行垃圾回收时，无论内存是否充足，都会回收被弱引用关联的对象。在java中，用<br>java.lang.ref.WeakReference类来表示。可以在缓存中使用弱引用。</p><p>ThreadLocal的实现原理，每一个Thread维护一个ThreadLocalMap，key为使用 <strong>弱引用</strong> 的ThreadLocal<br>实例，value为线程变量的副本</p><p>hreadLocalMap使用ThreadLocal的弱引用作为key，如果一个ThreadLocal不存在外部 <strong>强引用</strong> 时，<br>Key(ThreadLocal)势必会被GC回收，这样就会导致ThreadLocalMap中key为null， 而value还存在着强<br>引用，只有thead线程退出以后,value的强引用链条才会断掉，但如果当前线程再迟迟不结束的话，这<br>些key为null的Entry的value就会一直存在一条强引用链（红色链条）</p><p>key 使用强引用</p><p>当hreadLocalMap的key为强引用回收ThreadLocal时，因为ThreadLocalMap还持有ThreadLocal的强<br>引用，如果没有手动删除，ThreadLocal不会被回收，导致Entry内存泄漏。</p><p>key 使用弱引用</p><p>当ThreadLocalMap的key为弱引用回收ThreadLocal时，由于ThreadLocalMap持有ThreadLocal的弱<br>引用，即使没有手动删除，ThreadLocal也会被回收。当key为null，在下一次ThreadLocalMap调用<br>set(),get()，remove()方法的时候会被清除value值。</p><p>因此，ThreadLocal内存泄漏的根源是：由于ThreadLocalMap的生命周期跟Thread一样长，如果没有<br>手动删除对应key就会导致内存泄漏，而不是因为弱引用。</p><p>ThreadLocal正确的使用方法</p><figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">每次使用完ThreadLocal都调用它的<span class="keyword">remove</span>()方法清除数据</span><br><span class="line">将ThreadLocal变量定义成<span class="keyword">private</span> <span class="keyword">static</span>，这样就一直存在ThreadLocal的强引用，也就能保证任</span><br><span class="line">何时候都能通过ThreadLocal的弱引用访问到Entry的<span class="keyword">value</span>值，进而清除掉 。</span><br></pre></td></tr></tbody></table></figure><h2 id="并发、并行、串行的区别"><a href="#并发、并行、串行的区别" class="headerlink" title="并发、并行、串行的区别"></a>并发、并行、串行的区别</h2><h3 id="串行在时间上不可能发生重叠，前一个任务没搞定，下一个任务就只能等着"><a href="#串行在时间上不可能发生重叠，前一个任务没搞定，下一个任务就只能等着" class="headerlink" title="串行在时间上不可能发生重叠，前一个任务没搞定，下一个任务就只能等着"></a>串行在时间上不可能发生重叠，前一个任务没搞定，下一个任务就只能等着</h3><h3 id="并行在时间上是重叠的，两个任务在-同一时刻互不干扰-的同时执行。"><a href="#并行在时间上是重叠的，两个任务在-同一时刻互不干扰-的同时执行。" class="headerlink" title="并行在时间上是重叠的，两个任务在 同一时刻互不干扰 的同时执行。"></a>并行在时间上是重叠的，两个任务在 同一时刻互不干扰 的同时执行。</h3><h3 id="并发允许两个任务彼此干扰。统一时间点、只有一个任务运行，交替执行"><a href="#并发允许两个任务彼此干扰。统一时间点、只有一个任务运行，交替执行" class="headerlink" title="并发允许两个任务彼此干扰。统一时间点、只有一个任务运行，交替执行"></a>并发允许两个任务彼此干扰。统一时间点、只有一个任务运行，交替执行</h3><h2 id="并发的三大特性"><a href="#并发的三大特性" class="headerlink" title="并发的三大特性"></a>并发的三大特性</h2><h3 id="原子性"><a href="#原子性" class="headerlink" title="原子性"></a>原子性</h3><p>原子性是指在一个操作中cpu不可以在中途暂停然后再调度，即不被中断操作，要不全部执行完成，要<br>不都不执行。就好比转账，从账户A向账户B转 1000 元，那么必然包括 2 个操作：从账户A减去 1000 元，<br>往账户B加上 1000 元。 2 个操作必须全部完成。</p><figure class="highlight basic"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">1 </span>：将 count 从主存读到工作内存中的副本中</span><br><span class="line"><span class="symbol">2 </span>：+<span class="number">1</span>的运算</span><br><span class="line"><span class="symbol">3 </span>：将结果写入工作内存</span><br><span class="line"><span class="symbol">4 </span>：将工作内存的值刷回主存(什么时候刷入由操作系统决定，不确定的)</span><br></pre></td></tr></tbody></table></figure><h3 id="那程序中原子性指的是最小的操作单元，比如自增操作，它本身其实并不是原子性操作，分了-3-步的，"><a href="#那程序中原子性指的是最小的操作单元，比如自增操作，它本身其实并不是原子性操作，分了-3-步的，" class="headerlink" title="那程序中原子性指的是最小的操作单元，比如自增操作，它本身其实并不是原子性操作，分了 3 步的，"></a>那程序中原子性指的是最小的操作单元，比如自增操作，它本身其实并不是原子性操作，分了 3 步的，</h3><h3 id="包括读取变量的原始值、进行加-1-操作、写入工作内存。所以在多线程中，有可能一个线程还没自增"><a href="#包括读取变量的原始值、进行加-1-操作、写入工作内存。所以在多线程中，有可能一个线程还没自增" class="headerlink" title="包括读取变量的原始值、进行加 1 操作、写入工作内存。所以在多线程中，有可能一个线程还没自增"></a>包括读取变量的原始值、进行加 1 操作、写入工作内存。所以在多线程中，有可能一个线程还没自增</h3><h3 id="完，可能才执行到第二部，另一个线程就已经读取了值，导致结果错误。那如果我们能保证自增操作是"><a href="#完，可能才执行到第二部，另一个线程就已经读取了值，导致结果错误。那如果我们能保证自增操作是" class="headerlink" title="完，可能才执行到第二部，另一个线程就已经读取了值，导致结果错误。那如果我们能保证自增操作是"></a>完，可能才执行到第二部，另一个线程就已经读取了值，导致结果错误。那如果我们能保证自增操作是</h3><h3 id="一个原子性的操作，那么就能保证其他线程读取到的一定是自增后的数据。"><a href="#一个原子性的操作，那么就能保证其他线程读取到的一定是自增后的数据。" class="headerlink" title="一个原子性的操作，那么就能保证其他线程读取到的一定是自增后的数据。"></a>一个原子性的操作，那么就能保证其他线程读取到的一定是自增后的数据。</h3><p><strong>关键字：</strong> synchronized</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">可见性</span><br></pre></td></tr></tbody></table></figure><p>当多个线程访问同一个变量时，一个线程修改了这个变量的值，其他线程能够立即看得到修改的值。</p><p>若两个线程在不同的cpu，那么线程 1 改变了i的值还没刷新到主存，线程 2 又使用了i，那么这个i值肯定<br>还是之前的，线程 1 对变量的修改线程没看到这就是可见性问题。</p><figure class="highlight axapta"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="built_in">long</span> <span class="keyword">count</span> = <span class="number">0</span> ;</span><br></pre></td></tr></tbody></table></figure><figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">calc</span>()</span> {</span><br><span class="line">count++;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>如果线程 2 改变了stop的值，线程 1 一定会停止吗？不一定。当线程 2 更改了stop变量的值之后，但是还<br>没来得及写入主存当中，线程 2 转去做其他事情了，那么线程 1 由于不知道线程 2 对stop变量的更改，因<br>此还会一直循环下去。</p><p><strong>关键字：</strong> volatile、synchronized、final</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">有序性</span><br></pre></td></tr></tbody></table></figure><p>虚拟机在进行代码编译时，对于那些改变顺序之后不会对最终结果造成影响的代码，虚拟机不一定会按<br>照我们写的代码的顺序来执行，有可能将他们重排序。实际上，对于有些代码进行重排序之后，虽然对<br>变量的值没有造成影响，但有可能会出现线程安全问题。</p><p>write方法里的 1 和 2 做了重排序，线程 1 先对flag赋值为true，随后执行到线程 2 ，ret直接计算出结果，<br>再到线程 1 ，这时候a才赋值为2,很明显迟了一步</p><p><strong>关键字：</strong> volatile、synchronized</p><p>volatile本身就包含了禁止指令重排序的语义，而synchronized关键字是由“一个变量在同一时刻只允许<br>一条线程对其进行lock操作”这条规则明确的。</p><p>synchronized关键字同时满足以上三种特性，但是volatile关键字不满足原子性。</p><p>在某些情况下，volatile的同步机制的性能确实要优于锁(使用synchronized关键字或<br>java.util.concurrent包里面的锁)，因为volatile的总开销要比锁低。</p><p>我们判断使用volatile还是加锁的唯一依据就是volatile的语义能否满足使用的场景(原子性)</p><figure class="highlight arduino"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//线程 1</span></span><br><span class="line"><span class="type">boolean</span> stop = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">while</span>(!stop){</span><br><span class="line"><span class="built_in">doSomething</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight abnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//线程 <span class="number">2</span></span><br><span class="line"><span class="attribute">stop</span> <span class="operator">=</span> true<span class="comment">;</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight abnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int a <span class="operator">=</span> <span class="number">0</span> <span class="comment">;</span></span><br><span class="line">bool flag <span class="operator">=</span> false<span class="comment">;</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span>()</span> {</span><br><span class="line">a = <span class="number">2</span> ; &nbsp;<span class="comment">//</span></span><br><span class="line">flag = <span class="literal">true</span>; &nbsp;<span class="comment">//</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">multiply</span>()</span> {</span><br><span class="line"><span class="keyword">if</span> (flag) { <span class="comment">//</span></span><br><span class="line"><span class="built_in">int</span> ret = a * a;<span class="comment">//</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="volatile"><a href="#volatile" class="headerlink" title="volatile"></a>volatile</h2><figure class="highlight arduino"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> 保证被<span class="keyword">volatile</span>修饰的共享变量对所有线程总是可见的，也就是当一个线程修改了一个被<span class="keyword">volatile</span>修</span><br><span class="line">饰共享变量的值，新值总是可以被其他线程立即得知。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">如果线程<span class="number"> 2 </span>改变了stop的值，线程<span class="number"> 1 </span>一定会停止吗？不一定。当线程<span class="number"> 2 </span>更改了stop变量的值之后，但</span><br><span class="line">是还没来得及写入主存当中，线程<span class="number"> 2 </span>转去做其他事情了，那么线程<span class="number"> 1 </span>由于不知道线程<span class="number"> 2 </span>对stop变量的</span><br><span class="line">更改，因此还会一直循环下去。</span><br></pre></td></tr></tbody></table></figure><h3 id="2-禁止指令重排序优化。"><a href="#2-禁止指令重排序优化。" class="headerlink" title="2. 禁止指令重排序优化。"></a>2. 禁止指令重排序优化。</h3><p>write方法里的 1 和 2 做了重排序，线程 1 先对flag赋值为true，随后执行到线程 2 ，ret直接计算出结果，<br>再到线程 1 ，这时候a才赋值为2,很明显迟了一步。</p><p>但是用volatile修饰之后就变得不一样了</p><p>第一：使用volatile关键字会强制将修改的值立即写入主存；</p><p>第二：使用volatile关键字的话，当线程 2 进行修改时，会导致线程 1 的工作内存中缓存变量stop的缓存<br>行无效（反映到硬件层的话，就是CPU的L1或者L2缓存中对应的缓存行无效）；</p><p>第三：由于线程 1 的工作内存中缓存变量stop的缓存行无效，所以线程 1 再次读取变量stop的值时会去主<br>存读取。</p><figure class="highlight arduino"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">inc++; 其实是两个步骤，先加加，然后再赋值。不是原子性操作，所以<span class="keyword">volatile</span>不能保证线程安全。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight arduino"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//线程 1</span></span><br><span class="line"><span class="type">boolean</span> stop = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">while</span>(!stop){</span><br><span class="line"><span class="built_in">doSomething</span>();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight abnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//线程 <span class="number">2</span></span><br><span class="line"><span class="attribute">stop</span> <span class="operator">=</span> true<span class="comment">;</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight abnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int a <span class="operator">=</span> <span class="number">0</span> <span class="comment">;</span></span><br><span class="line">bool flag <span class="operator">=</span> false<span class="comment">;</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">write</span>()</span> {</span><br><span class="line">a = <span class="number">2</span> ; &nbsp;<span class="comment">//1</span></span><br><span class="line">flag = <span class="literal">true</span>; &nbsp;<span class="comment">//2</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight csharp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">multiply</span>()</span> {</span><br><span class="line"><span class="keyword">if</span> (flag) { <span class="comment">//3</span></span><br><span class="line"><span class="built_in">int</span> ret = a * a;<span class="comment">//4</span></span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="为什么用线程池？解释下线程池参数？"><a href="#为什么用线程池？解释下线程池参数？" class="headerlink" title="为什么用线程池？解释下线程池参数？"></a>为什么用线程池？解释下线程池参数？</h2><h3 id="1-、降低资源消耗；提高线程利用率，降低创建和销毁线程的消耗。"><a href="#1-、降低资源消耗；提高线程利用率，降低创建和销毁线程的消耗。" class="headerlink" title="1 、降低资源消耗；提高线程利用率，降低创建和销毁线程的消耗。"></a>1 、降低资源消耗；提高线程利用率，降低创建和销毁线程的消耗。</h3><h3 id="2-、提高响应速度；任务来了，直接有线程可用可执行，而不是先创建线程，再执行。"><a href="#2-、提高响应速度；任务来了，直接有线程可用可执行，而不是先创建线程，再执行。" class="headerlink" title="2 、提高响应速度；任务来了，直接有线程可用可执行，而不是先创建线程，再执行。"></a>2 、提高响应速度；任务来了，直接有线程可用可执行，而不是先创建线程，再执行。</h3><h3 id="3-、提高线程的可管理性；线程是稀缺资源，使用线程池可以统一分配调优监控。"><a href="#3-、提高线程的可管理性；线程是稀缺资源，使用线程池可以统一分配调优监控。" class="headerlink" title="3 、提高线程的可管理性；线程是稀缺资源，使用线程池可以统一分配调优监控。"></a>3 、提高线程的可管理性；线程是稀缺资源，使用线程池可以统一分配调优监控。</h3><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">corePoolSize</span> 代表核心线程数，也就是正常情况下创建工作的线程数，这些线程创建后并不会</span><br><span class="line">消除，而是一种常驻线程</span><br><span class="line">maxinumPoolSize 代表的是最大线程数，它与核心线程数相对应，表示最大允许被创建的线程</span><br><span class="line">数，比如当前任务较多，将核心线程数都用完了，还无法满足需求时，此时就会创建新的线程，但</span><br><span class="line">是线程池内线程总数不会超过最大线程数</span><br></pre></td></tr></tbody></table></figure><figure class="highlight jboss-cli"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">keepAliveTime、unit 表示超出核心线程数之外的线程的空闲存活时间，也就是核心线程不会</span><br><span class="line">消除，但是超出核心线程数的部分线程如果空闲一定的时间则会被消除,我们可以通过</span><br><span class="line"><span class="keyword">set</span>KeepAliveTime 来设置空闲时间</span><br><span class="line">workQueue 用来存放待执行的任务，假设我们现在核心线程都已被使用，还有任务进来则全部放</span><br><span class="line">入队列，直到整个队列被放满但任务还再持续进入则会开始创建新的线程</span><br><span class="line">ThreadFactory 实际上是一个线程工厂，用来生产线程执行任务。我们可以选择使用默认的创建</span><br><span class="line">工厂，产生的线程都在同一个组内，拥有相同的优先级，且都不是守护线程。当然我们也可以选择</span><br><span class="line">自定义线程工厂，一般我们会根据业务来制定不同的线程工厂</span><br><span class="line">Handler 任务拒绝策略，有两种情况，第一种是当我们调用<span class="keyword">shutdown</span> 等方法关闭线程池后，这</span><br><span class="line">时候即使线程池内部还有没执行完的任务正在执行，但是由于线程池已经关闭，我们再继续想线程</span><br><span class="line">池提交任务就会遭到拒绝。另一种情况就是当达到最大线程数，线程池已经没有能力继续处理新提</span><br><span class="line">交的任务时，这是也就拒绝</span><br></pre></td></tr></tbody></table></figure><h2 id="简述线程池处理流程"><a href="#简述线程池处理流程" class="headerlink" title="简述线程池处理流程"></a>简述线程池处理流程</h2><h2 id="线程池中阻塞队列的作用？为什么是先添加列队而不是先"><a href="#线程池中阻塞队列的作用？为什么是先添加列队而不是先" class="headerlink" title="线程池中阻塞队列的作用？为什么是先添加列队而不是先"></a>线程池中阻塞队列的作用？为什么是先添加列队而不是先</h2><h2 id="创建最大线程？"><a href="#创建最大线程？" class="headerlink" title="创建最大线程？"></a>创建最大线程？</h2><h3 id="1-、一般的队列只能保证作为一个有限长度的缓冲区，如果超出了缓冲长度，就无法保留当前的任务"><a href="#1-、一般的队列只能保证作为一个有限长度的缓冲区，如果超出了缓冲长度，就无法保留当前的任务" class="headerlink" title="1 、一般的队列只能保证作为一个有限长度的缓冲区，如果超出了缓冲长度，就无法保留当前的任务"></a>1 、一般的队列只能保证作为一个有限长度的缓冲区，如果超出了缓冲长度，就无法保留当前的任务</h3><h3 id="了，阻塞队列通过阻塞可以保留住当前想要继续入队的任务。"><a href="#了，阻塞队列通过阻塞可以保留住当前想要继续入队的任务。" class="headerlink" title="了，阻塞队列通过阻塞可以保留住当前想要继续入队的任务。"></a>了，阻塞队列通过阻塞可以保留住当前想要继续入队的任务。</h3><p>阻塞队列可以保证任务队列中没有任务时阻塞获取任务的线程，使得线程进入wait状态，释放cpu资<br>源。</p><p>阻塞队列自带阻塞和唤醒的功能，不需要额外处理，无任务执行时,线程池利用阻塞队列的take方法挂<br>起，从而维持核心线程的存活、不至于一直占用cpu资源</p><h3 id="2-、在创建新线程的时候，是要获取全局锁的，这个时候其它的就得阻塞，影响了整体效率。"><a href="#2-、在创建新线程的时候，是要获取全局锁的，这个时候其它的就得阻塞，影响了整体效率。" class="headerlink" title="2 、在创建新线程的时候，是要获取全局锁的，这个时候其它的就得阻塞，影响了整体效率。"></a>2 、在创建新线程的时候，是要获取全局锁的，这个时候其它的就得阻塞，影响了整体效率。</h3><p>就好比一个企业里面有 10 个（core）正式工的名额，最多招 10 个正式工，要是任务超过正式工人数<br>（task &gt; core）的情况下，工厂领导（线程池）不是首先扩招工人，还是这 10 人，但是任务可以稍微积<br>压一下，即先放到队列去（代价低）。 10 个正式工慢慢干，迟早会干完的，要是任务还在继续增加，超<br>过正式工的加班忍耐极限了（队列满了），就的招外包帮忙了（注意是临时工）要是正式工加上外包还<br>是不能完成任务，那新来的任务就会被领导拒绝了（线程池的拒绝策略）。</p><h2 id="线程池中线程复用原理"><a href="#线程池中线程复用原理" class="headerlink" title="线程池中线程复用原理"></a>线程池中线程复用原理</h2><p>线程池将线程和任务进行解耦，线程是线程，任务是任务，摆脱了之前通过 Thread 创建线程时的<br>一个线程必须对应一个任务的限制。</p><p>在线程池中，同一个线程可以从阻塞队列中不断获取新任务来执行，其核心原理在于线程池对<br>Thread 进行了封装，并不是每次执行任务都会调用 Thread.start() 来创建新线程，而是让每个线程去<br>执行一个“循环任务”，在这个“循环任务”中不停检查是否有任务需要被执行，如果有则直接执行，也就<br>是调用任务中的 run 方法，将 run 方法当成一个普通的方法执行，通过这种方式只使用固定的线程就<br>将所有任务的 run 方法串联起来。</p><h1 id="spring"><a href="#spring" class="headerlink" title="spring"></a>spring</h1><h2 id="如何实现一个IOC容器"><a href="#如何实现一个IOC容器" class="headerlink" title="如何实现一个IOC容器"></a>如何实现一个IOC容器</h2><h3 id="1-、配置文件配置包扫描路径"><a href="#1-、配置文件配置包扫描路径" class="headerlink" title="1 、配置文件配置包扫描路径"></a>1 、配置文件配置包扫描路径</h3><p>2 、递归包扫描获取.class文件</p><p>3 、反射、确定需要交给IOC管理的类</p><p>4 、对需要注入的类进行依赖注入</p><h3 id="配置文件中指定需要扫描的包路径"><a href="#配置文件中指定需要扫描的包路径" class="headerlink" title="配置文件中指定需要扫描的包路径"></a>配置文件中指定需要扫描的包路径</h3><h3 id="定义一些注解，分别表示访问控制层、业务服务层、数据持久层、依赖注入注解、获取配置文件注"><a href="#定义一些注解，分别表示访问控制层、业务服务层、数据持久层、依赖注入注解、获取配置文件注" class="headerlink" title="定义一些注解，分别表示访问控制层、业务服务层、数据持久层、依赖注入注解、获取配置文件注"></a>定义一些注解，分别表示访问控制层、业务服务层、数据持久层、依赖注入注解、获取配置文件注</h3><h3 id="解"><a href="#解" class="headerlink" title="解"></a>解</h3><h3 id="从配置文件中获取需要扫描的包路径，获取到当前路径下的文件信息及文件夹信息，我们将当前路"><a href="#从配置文件中获取需要扫描的包路径，获取到当前路径下的文件信息及文件夹信息，我们将当前路" class="headerlink" title="从配置文件中获取需要扫描的包路径，获取到当前路径下的文件信息及文件夹信息，我们将当前路"></a>从配置文件中获取需要扫描的包路径，获取到当前路径下的文件信息及文件夹信息，我们将当前路</h3><figure class="highlight dart"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">径下所有以.<span class="keyword">class</span>结尾的文件添加到一个<span class="built_in">Set</span>集合中进行存储</span><br><span class="line">遍历这个<span class="keyword">set</span>集合，获取在类上有指定注解的类，并将其交给IOC容器，定义一个安全的<span class="built_in">Map</span>用来</span><br><span class="line">存储这些对象</span><br><span class="line">遍历这个IOC容器，获取到每一个类的实例，判断里面是有有依赖其他的类的实例，然后进行递归</span><br><span class="line">注入</span><br></pre></td></tr></tbody></table></figure><h2 id="spring是什么？"><a href="#spring是什么？" class="headerlink" title="spring是什么？"></a>spring是什么？</h2><p>轻量级的开源的J2EE框架。它是一个容器框架，用来装javabean（java对象），中间层框架（万能胶）<br>可以起一个连接作用，比如说把Struts和hibernate粘合在一起运用，可以让我们的企业开发更快、更简<br>洁</p><p>Spring是一个轻量级的控制反转（IoC)和面向切面（AOP）的容器框架</p><p>–从大小与开销两方面而言Spring都是轻量级的。</p><p>–通过控制反转(IoC)的技术达到松耦合的目的</p><p>–提供了面向切面编程的丰富支持，允许通过分离应用的业务逻辑与系统级服务进行内聚性的<br>开发</p><p>–包含并管理应用对象(Bean)的配置和生命周期，这个意义上是一个容器。</p><p>–将简单的组件配置、组合成为复杂的应用，这个意义上是一个框架。</p><h2 id="谈谈你对AOP的理解"><a href="#谈谈你对AOP的理解" class="headerlink" title="谈谈你对AOP的理解"></a>谈谈你对AOP的理解</h2><h3 id="系统是由许多不同的组件所组成的，每一个组件各负责一块特定功能。除了实现自身核心功能之外，这"><a href="#系统是由许多不同的组件所组成的，每一个组件各负责一块特定功能。除了实现自身核心功能之外，这" class="headerlink" title="系统是由许多不同的组件所组成的，每一个组件各负责一块特定功能。除了实现自身核心功能之外，这"></a>系统是由许多不同的组件所组成的，每一个组件各负责一块特定功能。除了实现自身核心功能之外，这</h3><h3 id="些组件还经常承担着额外的职责。例如日志、事务管理和安全这样的核心服务经常融入到自身具有核心"><a href="#些组件还经常承担着额外的职责。例如日志、事务管理和安全这样的核心服务经常融入到自身具有核心" class="headerlink" title="些组件还经常承担着额外的职责。例如日志、事务管理和安全这样的核心服务经常融入到自身具有核心"></a>些组件还经常承担着额外的职责。例如日志、事务管理和安全这样的核心服务经常融入到自身具有核心</h3><h3 id="业务逻辑的组件中去。这些系统服务经常被称为横切关注点，因为它们会跨越系统的多个组件。"><a href="#业务逻辑的组件中去。这些系统服务经常被称为横切关注点，因为它们会跨越系统的多个组件。" class="headerlink" title="业务逻辑的组件中去。这些系统服务经常被称为横切关注点，因为它们会跨越系统的多个组件。"></a>业务逻辑的组件中去。这些系统服务经常被称为横切关注点，因为它们会跨越系统的多个组件。</h3><h3 id="当我们需要为分散的对象引入公共行为的时候，OOP则显得无能为力。也就是说，OOP允许你定义从"><a href="#当我们需要为分散的对象引入公共行为的时候，OOP则显得无能为力。也就是说，OOP允许你定义从" class="headerlink" title="当我们需要为分散的对象引入公共行为的时候，OOP则显得无能为力。也就是说，OOP允许你定义从"></a>当我们需要为分散的对象引入公共行为的时候，OOP则显得无能为力。也就是说，OOP允许你定义从</h3><h3 id="上到下的关系，但并不适合定义从左到右的关系。例如日志功能。"><a href="#上到下的关系，但并不适合定义从左到右的关系。例如日志功能。" class="headerlink" title="上到下的关系，但并不适合定义从左到右的关系。例如日志功能。"></a>上到下的关系，但并不适合定义从左到右的关系。例如日志功能。</h3><h3 id="日志代码往往水平地散布在所有对象层次中，而与它所散布到的对象的核心功能毫无关系。"><a href="#日志代码往往水平地散布在所有对象层次中，而与它所散布到的对象的核心功能毫无关系。" class="headerlink" title="日志代码往往水平地散布在所有对象层次中，而与它所散布到的对象的核心功能毫无关系。"></a>日志代码往往水平地散布在所有对象层次中，而与它所散布到的对象的核心功能毫无关系。</h3><h3 id="在OOP设计中，它导致了大量代码的重复，而不利于各个模块的重用。"><a href="#在OOP设计中，它导致了大量代码的重复，而不利于各个模块的重用。" class="headerlink" title="在OOP设计中，它导致了大量代码的重复，而不利于各个模块的重用。"></a>在OOP设计中，它导致了大量代码的重复，而不利于各个模块的重用。</h3><h3 id="AOP：将程序中的交叉业务逻辑（比如安全，日志，事务等），封装成一个切面，然后注入到目标对象"><a href="#AOP：将程序中的交叉业务逻辑（比如安全，日志，事务等），封装成一个切面，然后注入到目标对象" class="headerlink" title="AOP：将程序中的交叉业务逻辑（比如安全，日志，事务等），封装成一个切面，然后注入到目标对象"></a>AOP：将程序中的交叉业务逻辑（比如安全，日志，事务等），封装成一个切面，然后注入到目标对象</h3><h3 id="（具体业务逻辑）中去。AOP可以对某个对象或某些对象的功能进行增强，比如对象中的方法进行增"><a href="#（具体业务逻辑）中去。AOP可以对某个对象或某些对象的功能进行增强，比如对象中的方法进行增" class="headerlink" title="（具体业务逻辑）中去。AOP可以对某个对象或某些对象的功能进行增强，比如对象中的方法进行增"></a>（具体业务逻辑）中去。AOP可以对某个对象或某些对象的功能进行增强，比如对象中的方法进行增</h3><h3 id="强，可以在执行某个方法之前额外的做一些事情，在某个方法执行之后额外的做一些事情"><a href="#强，可以在执行某个方法之前额外的做一些事情，在某个方法执行之后额外的做一些事情" class="headerlink" title="强，可以在执行某个方法之前额外的做一些事情，在某个方法执行之后额外的做一些事情"></a>强，可以在执行某个方法之前额外的做一些事情，在某个方法执行之后额外的做一些事情</h3><h2 id="谈谈你对IOC的理解"><a href="#谈谈你对IOC的理解" class="headerlink" title="谈谈你对IOC的理解"></a>谈谈你对IOC的理解</h2><h3 id="容器概念、控制反转、依赖注入"><a href="#容器概念、控制反转、依赖注入" class="headerlink" title="容器概念、控制反转、依赖注入"></a>容器概念、控制反转、依赖注入</h3><p>ioc容器：实际上就是个map（key，value），里面存的是各种对象（在xml里配置的bean节点、<br>@repository、@service、@controller、@component），在项目启动的时候会读取配置文件里面的<br>bean节点，根据全限定类名使用反射创建对象放到map里、扫描到打上上述注解的类还是通过反射创<br>建对象放到map里。</p><p>这个时候map里就有各种对象了，接下来我们在代码里需要用到里面的对象时，再通过DI注入<br>（autowired、resource等注解，xml里bean节点内的ref属性，项目启动的时候会读取xml节点ref属性<br>根据id注入，也会扫描这些注解，根据类型或id注入；id就是对象名）。</p><h3 id="控制反转："><a href="#控制反转：" class="headerlink" title="控制反转："></a>控制反转：</h3><h3 id="没有引入IOC容器之前，对象A依赖于对象B，那么对象A在初始化或者运行到某一点的时候，自己必须"><a href="#没有引入IOC容器之前，对象A依赖于对象B，那么对象A在初始化或者运行到某一点的时候，自己必须" class="headerlink" title="没有引入IOC容器之前，对象A依赖于对象B，那么对象A在初始化或者运行到某一点的时候，自己必须"></a>没有引入IOC容器之前，对象A依赖于对象B，那么对象A在初始化或者运行到某一点的时候，自己必须</h3><h3 id="主动去创建对象B或者使用已经创建的对象B。无论是创建还是使用对象B，控制权都在自己手上。"><a href="#主动去创建对象B或者使用已经创建的对象B。无论是创建还是使用对象B，控制权都在自己手上。" class="headerlink" title="主动去创建对象B或者使用已经创建的对象B。无论是创建还是使用对象B，控制权都在自己手上。"></a>主动去创建对象B或者使用已经创建的对象B。无论是创建还是使用对象B，控制权都在自己手上。</h3><h3 id="引入IOC容器之后，对象A与对象B之间失去了直接联系，当对象A运行到需要对象B的时候，IOC容器会"><a href="#引入IOC容器之后，对象A与对象B之间失去了直接联系，当对象A运行到需要对象B的时候，IOC容器会" class="headerlink" title="引入IOC容器之后，对象A与对象B之间失去了直接联系，当对象A运行到需要对象B的时候，IOC容器会"></a>引入IOC容器之后，对象A与对象B之间失去了直接联系，当对象A运行到需要对象B的时候，IOC容器会</h3><h3 id="主动创建一个对象B注入到对象A需要的地方。"><a href="#主动创建一个对象B注入到对象A需要的地方。" class="headerlink" title="主动创建一个对象B注入到对象A需要的地方。"></a>主动创建一个对象B注入到对象A需要的地方。</h3><h3 id="通过前后的对比，不难看出来：对象A获得依赖对象B的过程-由主动行为变为了被动行为，控制权颠倒"><a href="#通过前后的对比，不难看出来：对象A获得依赖对象B的过程-由主动行为变为了被动行为，控制权颠倒" class="headerlink" title="通过前后的对比，不难看出来：对象A获得依赖对象B的过程,由主动行为变为了被动行为，控制权颠倒"></a>通过前后的对比，不难看出来：对象A获得依赖对象B的过程,由主动行为变为了被动行为，控制权颠倒</h3><h3 id="过来了，这就是“控制反转”这个名称的由来。"><a href="#过来了，这就是“控制反转”这个名称的由来。" class="headerlink" title="过来了，这就是“控制反转”这个名称的由来。"></a>过来了，这就是“控制反转”这个名称的由来。</h3><h3 id="全部对象的控制权全部上缴给“第三方”IOC容器，所以，IOC容器成了整个系统的关键核心，它起到了一"><a href="#全部对象的控制权全部上缴给“第三方”IOC容器，所以，IOC容器成了整个系统的关键核心，它起到了一" class="headerlink" title="全部对象的控制权全部上缴给“第三方”IOC容器，所以，IOC容器成了整个系统的关键核心，它起到了一"></a>全部对象的控制权全部上缴给“第三方”IOC容器，所以，IOC容器成了整个系统的关键核心，它起到了一</h3><h3 id="种类似“粘合剂”的作用，把系统中的所有对象粘合在一起发挥作用，如果没有这个“粘合剂”，对象与对"><a href="#种类似“粘合剂”的作用，把系统中的所有对象粘合在一起发挥作用，如果没有这个“粘合剂”，对象与对" class="headerlink" title="种类似“粘合剂”的作用，把系统中的所有对象粘合在一起发挥作用，如果没有这个“粘合剂”，对象与对"></a>种类似“粘合剂”的作用，把系统中的所有对象粘合在一起发挥作用，如果没有这个“粘合剂”，对象与对</h3><h3 id="象之间会彼此失去联系，这就是有人把IOC容器比喻成“粘合剂”的由来。"><a href="#象之间会彼此失去联系，这就是有人把IOC容器比喻成“粘合剂”的由来。" class="headerlink" title="象之间会彼此失去联系，这就是有人把IOC容器比喻成“粘合剂”的由来。"></a>象之间会彼此失去联系，这就是有人把IOC容器比喻成“粘合剂”的由来。</h3><h3 id="依赖注入："><a href="#依赖注入：" class="headerlink" title="依赖注入："></a>依赖注入：</h3><h3 id="“获得依赖对象的过程被反转了”。控制被反转之后，获得依赖对象的过程由自身管理变为了由IOC容器"><a href="#“获得依赖对象的过程被反转了”。控制被反转之后，获得依赖对象的过程由自身管理变为了由IOC容器" class="headerlink" title="“获得依赖对象的过程被反转了”。控制被反转之后，获得依赖对象的过程由自身管理变为了由IOC容器"></a>“获得依赖对象的过程被反转了”。控制被反转之后，获得依赖对象的过程由自身管理变为了由IOC容器</h3><h3 id="主动注入。依赖注入是实现IOC的方法，就是由IOC容器在运行期间，动态地将某种依赖关系注入到对"><a href="#主动注入。依赖注入是实现IOC的方法，就是由IOC容器在运行期间，动态地将某种依赖关系注入到对" class="headerlink" title="主动注入。依赖注入是实现IOC的方法，就是由IOC容器在运行期间，动态地将某种依赖关系注入到对"></a>主动注入。依赖注入是实现IOC的方法，就是由IOC容器在运行期间，动态地将某种依赖关系注入到对</h3><h3 id="象之中。"><a href="#象之中。" class="headerlink" title="象之中。"></a>象之中。</h3><h2 id="BeanFactory和ApplicationContext有什么区别？"><a href="#BeanFactory和ApplicationContext有什么区别？" class="headerlink" title="BeanFactory和ApplicationContext有什么区别？"></a>BeanFactory和ApplicationContext有什么区别？</h2><p>ApplicationContext是BeanFactory的子接口</p><p>ApplicationContext提供了更完整的功能：</p><p>①继承MessageSource，因此支持国际化。</p><p>②统一的资源文件访问方式。</p><p>③提供在监听器中注册bean的事件。</p><p>④同时加载多个配置文件。</p><p>⑤载入多个（有继承关系）上下文 ，使得每一个上下文都专注于一个特定的层次，比如应用的web层。</p><figure class="highlight mipsasm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BeanFactroy采用的是延迟加载形式来注入Bean的，即只有在使用到某个Bean时(调用</span></span><br><span class="line"><span class="keyword"></span>getBean())，才对该<span class="keyword">Bean进行加载实例化。这样，我们就不能发现一些存在的Spring的配置问</span></span><br><span class="line"><span class="keyword"></span>题。如果<span class="keyword">Bean的某一个属性没有注入，BeanFacotry加载后，直至第一次使用调用getBean方法</span></span><br><span class="line"><span class="keyword"></span>才会抛出异常。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight mipsasm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ApplicationContext，它是在容器启动时，一次性创建了所有的<span class="keyword">Bean。这样，在容器启动时，我</span></span><br><span class="line"><span class="keyword"></span>们就可以发现Spring中存在的配置错误，这样有利于检查所依赖属性是否注入。</span><br><span class="line">ApplicationContext启动后预载入所有的单实例<span class="keyword">Bean，通过预载入单实例bean </span>,确保当你需要的</span><br><span class="line">时候，你就不用等待，因为它们已经创建好了。</span><br><span class="line">相对于基本的<span class="keyword">BeanFactory，ApplicationContext </span>唯一的不足是占用内存空间。当应用程序配置</span><br><span class="line"><span class="keyword">Bean较多时，程序启动较慢。</span></span><br><span class="line"><span class="keyword"></span><span class="keyword">BeanFactory通常以编程的方式被创建，ApplicationContext还能以声明的方式创建，如使用</span></span><br><span class="line"><span class="keyword"></span>ContextLoader。</span><br><span class="line"><span class="keyword">BeanFactory和ApplicationContext都支持BeanPostProcessor、BeanFactoryPostProcessor的</span></span><br><span class="line"><span class="keyword"></span>使用，但两者之间的区别是：<span class="keyword">BeanFactory需要手动注册，而ApplicationContext则是自动注册。</span></span><br></pre></td></tr></tbody></table></figure><h2 id="描述一下Spring-Bean的生命周期？"><a href="#描述一下Spring-Bean的生命周期？" class="headerlink" title="描述一下Spring Bean的生命周期？"></a>描述一下Spring Bean的生命周期？</h2><p>1 、解析类得到BeanDefinition</p><p>2 、如果有多个构造方法，则要推断构造方法</p><p>3 、确定好构造方法后，进行实例化得到一个对象</p><p>4 、对对象中的加了@Autowired注解的属性进行属性填充</p><p>5 、回调Aware方法，比如BeanNameAware，BeanFactoryAware</p><p>6 、调用BeanPostProcessor的初始化前的方法</p><p>7 、调用初始化方法</p><p>8 、调用BeanPostProcessor的初始化后的方法，在这里会进行AOP</p><p>9 、如果当前创建的bean是单例的则会把bean放入单例池</p><p>10 、使用bean</p><p>11 、Spring容器关闭时调用DisposableBean中destory()方法</p><h2 id="解释下Spring支持的几种bean的作用域。"><a href="#解释下Spring支持的几种bean的作用域。" class="headerlink" title="解释下Spring支持的几种bean的作用域。"></a>解释下Spring支持的几种bean的作用域。</h2><figure class="highlight mipsasm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">singleton：默认，每个容器中只有一个<span class="keyword">bean的实例，单例的模式由BeanFactory自身来维护。该</span></span><br><span class="line"><span class="keyword"></span>对象的生命周期是与Spring IOC容器一致的（但在第一次被注入时才会创建）。</span><br><span class="line">prototype：为每一个<span class="keyword">bean请求提供一个实例。在每次注入时都会创建一个新的对象</span></span><br><span class="line"><span class="keyword"></span>request：<span class="keyword">bean被定义为在每个HTTP请求中创建一个单例对象，也就是说在单个请求中都会复用</span></span><br><span class="line"><span class="keyword"></span>这一个单例对象。</span><br><span class="line">session：与request范围类似，确保每个session中有一个<span class="keyword">bean的实例，在session过期后，bean</span></span><br><span class="line"><span class="keyword"></span>会随之失效。</span><br><span class="line">application：<span class="keyword">bean被定义为在ServletContext的生命周期中复用一个单例对象。</span></span><br><span class="line"><span class="keyword"></span>websocket：<span class="keyword">bean被定义为在websocket的生命周期中复用一个单例对象。</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">global</span>-<span class="keyword">session</span>：全局作用域，<span class="keyword">global</span>-<span class="keyword">session</span>和Portlet应用相关。当你的应用部署在Portlet容器</span><br><span class="line">中工作时，它包含很多portlet。如果你想要声明让所有的portlet共用全局的存储变量的话，那么</span><br><span class="line">这全局变量需要存储在<span class="keyword">global</span>-<span class="keyword">session</span>中。全局作用域与Servlet中的<span class="keyword">session</span>作用域效果相同。</span><br></pre></td></tr></tbody></table></figure><h2 id="Spring框架中的单例Bean是线程安全的么？"><a href="#Spring框架中的单例Bean是线程安全的么？" class="headerlink" title="Spring框架中的单例Bean是线程安全的么？"></a>Spring框架中的单例Bean是线程安全的么？</h2><p>Spring中的Bean默认是单例模式的，框架并没有对bean进行多线程的封装处理。</p><p>如果Bean是有状态的 那就需要开发人员自己来进行线程安全的保证，最简单的办法就是改变bean的作<br>用域 把 “singleton”改为’‘protopyte’ 这样每次请求Bean就相当于是 new Bean() 这样就可以保证线程的<br>安全了。</p><figure class="highlight thrift"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">有状态就是有数据存储功能</span><br><span class="line">无状态就是不会保存数据 controller、<span class="class"><span class="keyword">service</span>和<span class="title">dao</span>层本身并不是线程安全的，只是如果只</span></span><br><span class="line"><span class="class">是调用里面的方法，而且多线程调用一个实例的方法，会在内存中复制变量，这是自己的线程的工</span></span><br><span class="line"><span class="class">作内存，是安全的。</span></span><br></pre></td></tr></tbody></table></figure><p>Dao会操作数据库Connection，Connection是带有状态的，比如说数据库事务，Spring的事务管理器<br>使用Threadlocal为不同线程维护了一套独立的connection副本，保证线程之间不会互相影响（Spring<br>是如何保证事务获取同一个Connection的）</p><p>不要在bean中声明任何有状态的实例变量或类变量，如果必须如此，那么就使用ThreadLocal把变量变<br>为线程私有的，如果bean的实例变量或类变量需要在多个线程之间共享，那么就只能使用<br>synchronized、lock、CAS等这些实现线程同步的方法了。</p><h2 id="Spring-框架中都用到了哪些设计模式？"><a href="#Spring-框架中都用到了哪些设计模式？" class="headerlink" title="Spring 框架中都用到了哪些设计模式？"></a>Spring 框架中都用到了哪些设计模式？</h2><h3 id="简单工厂：由一个工厂类根据传入的参数，动态决定应该创建哪一个产品类。"><a href="#简单工厂：由一个工厂类根据传入的参数，动态决定应该创建哪一个产品类。" class="headerlink" title="简单工厂：由一个工厂类根据传入的参数，动态决定应该创建哪一个产品类。"></a>简单工厂：由一个工厂类根据传入的参数，动态决定应该创建哪一个产品类。</h3><h3 id="工厂方法："><a href="#工厂方法：" class="headerlink" title="工厂方法："></a>工厂方法：</h3><h3 id="单例模式：保证一个类仅有一个实例，并提供一个访问它的全局访问点"><a href="#单例模式：保证一个类仅有一个实例，并提供一个访问它的全局访问点" class="headerlink" title="单例模式：保证一个类仅有一个实例，并提供一个访问它的全局访问点"></a>单例模式：保证一个类仅有一个实例，并提供一个访问它的全局访问点</h3><figure class="highlight mipsasm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Spring中的<span class="keyword">BeanFactory就是简单工厂模式的体现，根据传入一个唯一的标识来获得Bean对象，但是否是</span></span><br><span class="line"><span class="keyword"></span>在传入参数后创建还是传入参数前创建这个要根据具体情况来定。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight scss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">实现了FactoryBean接口的bean是一类叫做factory的bean。其特点是，spring会在使用<span class="built_in">getBean</span>()调</span><br><span class="line">用获得该bean时，会自动调用该bean的<span class="built_in">getObject</span>()方法，所以返回的不是factory这个bean，而是这个</span><br><span class="line">bean<span class="selector-class">.getOjbect</span>()方法的返回值。</span><br></pre></td></tr></tbody></table></figure><h3 id="适配器模式："><a href="#适配器模式：" class="headerlink" title="适配器模式："></a>适配器模式：</h3><p>装饰器模式：动态地给一个对象添加一些额外的职责。就增加功能来说，Decorator模式相比生成子类<br>更为灵活。</p><h3 id="动态代理："><a href="#动态代理：" class="headerlink" title="动态代理："></a>动态代理：</h3><h3 id="观察者模式："><a href="#观察者模式：" class="headerlink" title="观察者模式："></a>观察者模式：</h3><h3 id="策略模式："><a href="#策略模式：" class="headerlink" title="策略模式："></a>策略模式：</h3><h3 id="模板方法：父类定义了骨架（调用哪些方法及顺序），某些特定方法由子类实现。"><a href="#模板方法：父类定义了骨架（调用哪些方法及顺序），某些特定方法由子类实现。" class="headerlink" title="模板方法：父类定义了骨架（调用哪些方法及顺序），某些特定方法由子类实现。"></a>模板方法：父类定义了骨架（调用哪些方法及顺序），某些特定方法由子类实现。</h3><h3 id="最大的好处：代码复用，减少重复代码。除了子类要实现的特定方法，其他方法及方法调用顺序都在父"><a href="#最大的好处：代码复用，减少重复代码。除了子类要实现的特定方法，其他方法及方法调用顺序都在父" class="headerlink" title="最大的好处：代码复用，减少重复代码。除了子类要实现的特定方法，其他方法及方法调用顺序都在父"></a>最大的好处：代码复用，减少重复代码。除了子类要实现的特定方法，其他方法及方法调用顺序都在父</h3><h3 id="类中预先写好了。"><a href="#类中预先写好了。" class="headerlink" title="类中预先写好了。"></a>类中预先写好了。</h3><figure class="highlight mel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">spring</span>对单例的实现： <span class="keyword">spring</span>中的单例模式完成了后半句话，即提供了全局的访问点BeanFactory。但没</span><br><span class="line">有从构造器级别去控制单例，这是因为<span class="keyword">spring</span>管理的是任意的java对象。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Spring定义了一个适配接口，使得每一种Controller有一种对应的适配器实现类，让适配器代替</span><br><span class="line">controller执行相应的方法。这样在扩展Controller时，只需要增加一个适配器类就完成了SpringMVC</span><br><span class="line">的扩展了。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Spring中用到的包装器模式在类名上有两种表现：一种是类名中含有<span class="keyword">Wrapper</span>，另一种是类名中含有</span><br><span class="line">Decorator。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">切面在应用运行的时刻被织入。一般情况下，在织入切面时，AOP容器会为目标对象创建动态的创建一个代理</span><br><span class="line">对象。SpringAOP就是以这种方式织入切面的。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">织入：把切面应用到目标对象并创建新的代理对象的过程。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight mel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">spring</span>的事件驱动模型使用的是 观察者模式 ，Spring中Observer模式常用的地方是listener的实现。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Spring框架的资源访问Resource接口。该接口提供了更强的资源访问能力，Spring 框架本身大量使用了<span class="built_in"></span></span><br><span class="line"><span class="built_in">Resource </span>接口来访问底层资源。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight angelscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ref</span>resh方法</span><br></pre></td></tr></tbody></table></figure><h2 id="Spring事务的实现方式和原理以及隔离级别？"><a href="#Spring事务的实现方式和原理以及隔离级别？" class="headerlink" title="Spring事务的实现方式和原理以及隔离级别？"></a>Spring事务的实现方式和原理以及隔离级别？</h2><p>在使用Spring框架时，可以有两种使用事务的方式，一种是编程式的，一种是申明式的，<br>@Transactional注解就是申明式的。</p><p>首先，事务这个概念是数据库层面的，Spring只是基于数据库中的事务进行了扩展，以及提供了一些能<br>让程序员更加方便操作事务的方式。</p><p>比如我们可以通过在某个方法上增加@Transactional注解，就可以开启事务，这个方法中所有的sql都<br>会在一个事务中执行，统一成功或失败。</p><p>在一个方法上加了@Transactional注解后，Spring会基于这个类生成一个代理对象，会将这个代理对象<br>作为bean，当在使用这个代理对象的方法时，如果这个方法上存在@Transactional注解，那么代理逻<br>辑会先把事务的自动提交设置为false，然后再去执行原本的业务逻辑方法，如果执行业务逻辑方法没有<br>出现异常，那么代理逻辑中就会将事务进行提交，如果执行业务逻辑方法出现了异常，那么则会将事务<br>进行回滚。</p><p>当然，针对哪些异常回滚事务是可以配置的，可以利用@Transactional注解中的rollbackFor属性进行<br>配置，默认情况下会对RuntimeException和Error进行回滚。</p><p>spring事务隔离级别就是数据库的隔离级别：外加一个默认级别</p><figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">read</span> <span class="keyword">uncommitted</span>（未提交读）</span><br><span class="line"><span class="keyword">read</span> <span class="keyword">committed</span>（提交读、不可重复读）</span><br><span class="line"><span class="keyword">repeatable</span> <span class="keyword">read</span>（可重复读）</span><br><span class="line"><span class="keyword">serializable</span>（可串行化）</span><br></pre></td></tr></tbody></table></figure><h2 id="spring事务传播机制"><a href="#spring事务传播机制" class="headerlink" title="spring事务传播机制"></a>spring事务传播机制</h2><h3 id="多个事务方法相互调用时-事务如何在这些方法间传播"><a href="#多个事务方法相互调用时-事务如何在这些方法间传播" class="headerlink" title="多个事务方法相互调用时,事务如何在这些方法间传播"></a>多个事务方法相互调用时,事务如何在这些方法间传播</h3><p>REQUIRED(Spring默认的事务传播类型)：如果当前没有事务，则自己新建一个事务，如果当前存在事<br>务，则加入这个事务</p><figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">数据库的配置隔离级别是<span class="keyword">Read</span> Commited,而Spring配置的隔离级别是<span class="keyword">Repeatable</span> <span class="keyword">Read</span>，请问这时隔离</span><br><span class="line">级别是以哪一个为准？</span><br><span class="line">以Spring配置的为准，如果spring设置的隔离级别数据库不支持，效果取决于数据库</span><br></pre></td></tr></tbody></table></figure><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">方法<span class="selector-tag">A</span>是一个事务的方法，方法<span class="selector-tag">A</span>执行过程中调用了方法<span class="selector-tag">B</span>，那么方法<span class="selector-tag">B</span>有无事务以及方法<span class="selector-tag">B</span>对事务的要求不同都</span><br><span class="line">会对方法<span class="selector-tag">A</span>的事务具体执行造成影响，同时方法<span class="selector-tag">A</span>的事务对方法<span class="selector-tag">B</span>的事务执行也有影响，这种影响具体是什么就</span><br><span class="line">由两个方法所定义的事务传播类型所决定。</span><br></pre></td></tr></tbody></table></figure><h3 id="SUPPORTS：当前存在事务，则加入当前事务，如果当前没有事务，就以非事务方法执行"><a href="#SUPPORTS：当前存在事务，则加入当前事务，如果当前没有事务，就以非事务方法执行" class="headerlink" title="SUPPORTS：当前存在事务，则加入当前事务，如果当前没有事务，就以非事务方法执行"></a>SUPPORTS：当前存在事务，则加入当前事务，如果当前没有事务，就以非事务方法执行</h3><h3 id="MANDATORY：当前存在事务，则加入当前事务，如果当前事务不存在，则抛出异常。"><a href="#MANDATORY：当前存在事务，则加入当前事务，如果当前事务不存在，则抛出异常。" class="headerlink" title="MANDATORY：当前存在事务，则加入当前事务，如果当前事务不存在，则抛出异常。"></a>MANDATORY：当前存在事务，则加入当前事务，如果当前事务不存在，则抛出异常。</h3><h3 id="REQUIRES-NEW：创建一个新事务，如果存在当前事务，则挂起该事务。"><a href="#REQUIRES-NEW：创建一个新事务，如果存在当前事务，则挂起该事务。" class="headerlink" title="REQUIRES_NEW：创建一个新事务，如果存在当前事务，则挂起该事务。"></a>REQUIRES_NEW：创建一个新事务，如果存在当前事务，则挂起该事务。</h3><h3 id="NOT-SUPPORTED：以非事务方式执行-如果当前存在事务，则挂起当前事务"><a href="#NOT-SUPPORTED：以非事务方式执行-如果当前存在事务，则挂起当前事务" class="headerlink" title="NOT_SUPPORTED：以非事务方式执行,如果当前存在事务，则挂起当前事务"></a>NOT_SUPPORTED：以非事务方式执行,如果当前存在事务，则挂起当前事务</h3><h3 id="NEVER：不使用事务，如果当前事务存在，则抛出异常"><a href="#NEVER：不使用事务，如果当前事务存在，则抛出异常" class="headerlink" title="NEVER：不使用事务，如果当前事务存在，则抛出异常"></a>NEVER：不使用事务，如果当前事务存在，则抛出异常</h3><h3 id="NESTED：如果当前事务存在，则在嵌套事务中执行，否则REQUIRED的操作一样（开启一个事务）"><a href="#NESTED：如果当前事务存在，则在嵌套事务中执行，否则REQUIRED的操作一样（开启一个事务）" class="headerlink" title="NESTED：如果当前事务存在，则在嵌套事务中执行，否则REQUIRED的操作一样（开启一个事务）"></a>NESTED：如果当前事务存在，则在嵌套事务中执行，否则REQUIRED的操作一样（开启一个事务）</h3><h2 id="spring事务什么时候会失效"><a href="#spring事务什么时候会失效" class="headerlink" title="spring事务什么时候会失效?"></a>spring事务什么时候会失效?</h2><p>spring事务的原理是AOP，进行了切面增强，那么失效的根本原因是这个AOP不起作用了！常见情况有<br>如下几种</p><p>1 、发生自调用，类里面使用this调用本类的方法（this通常省略），此时这个this对象不是代理类，而<br>是UserService对象本身！<br>解决方法很简单，让那个this变成UserService的代理类即可！</p><p>2 、方法不是public的</p><h3 id="3-、数据库不支持事务"><a href="#3-、数据库不支持事务" class="headerlink" title="3 、数据库不支持事务"></a>3 、数据库不支持事务</h3><p>4 、没有被spring管理</p><p>5 、异常被吃掉，事务不会回滚(或者抛出的异常没有被定义，默认为RuntimeException)</p><figure class="highlight oxygene"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">和REQUIRES_NEW的区别</span><br><span class="line">REQUIRES_NEW是新建一个事务并且新开启的这个事务与原有事务无关，而<span class="keyword">NESTED</span>则是当前存在事务时（我</span><br><span class="line">们把当前事务称之为父事务）会开启一个嵌套事务（称之为一个子事务）。 在<span class="keyword">NESTED</span>情况下父事务回滚时，</span><br><span class="line">子事务也会回滚，而在REQUIRES_NEW情况下，原有事务回滚，不会影响新开启的事务。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight actionscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">和REQUIRED的区别</span><br><span class="line">REQUIRED情况下，调用方存在事务时，则被调用方和调用方使用同一事务，那么被调用方出现异常时，由于</span><br><span class="line">共用一个事务，所以无论调用方是否<span class="keyword">catch</span>其异常，事务都会回滚 而在NESTED情况下，被调用方发生异常</span><br><span class="line">时，调用方可以<span class="keyword">catch</span>其异常，这样只有子事务回滚，父事务不受影响</span><br></pre></td></tr></tbody></table></figure><figure class="highlight aspectj"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional</span> 只能用于 <span class="keyword">public</span> 的方法上，否则事务不会失效，如果要用在非 <span class="keyword">public</span> 方法上，可</span><br><span class="line">以开启 AspectJ 代理模式。</span><br></pre></td></tr></tbody></table></figure><h2 id="什么是bean的自动装配，有哪些方式？"><a href="#什么是bean的自动装配，有哪些方式？" class="headerlink" title="什么是bean的自动装配，有哪些方式？"></a>什么是bean的自动装配，有哪些方式？</h2><p>开启自动装配，只需要在xml配置文件中定义“autowire”属性。</p><p>autowire属性有五种装配的方式：</p><figure class="highlight perl"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">no</span> – 缺省情况下，自动配置是通过“<span class="keyword">ref</span>”属性手动设定 。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">byName-根据bean的属性名称进行自动装配。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">byType-根据bean的类型进行自动装配。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight delphi"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">constructor</span>-类似<span class="title">byType</span>，不过是应用于构造器的参数。如果一个<span class="title">bean</span>与构造器参数的类型形</span></span><br><span class="line"><span class="function">同，则进行自动装配，否则导致异常。</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight delphi"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">autodetect-如果有默认的构造器，则通过<span class="function"><span class="keyword">constructor</span>方式进行自动装配，否则使用<span class="title">byType</span>方式</span></span><br><span class="line"><span class="function">进行自动装配。</span></span><br></pre></td></tr></tbody></table></figure><p>@Autowired自动装配bean，可以在字段、setter方法、构造函数上使用。</p><h1 id="springmvc、springBoot"><a href="#springmvc、springBoot" class="headerlink" title="springmvc、springBoot"></a>springmvc、springBoot</h1><figure class="highlight abnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean id<span class="operator">=</span><span class="string">"cutomer"</span> class<span class="operator">=</span><span class="string">"com.xxx.xxx.Customer"</span> autowire<span class="operator">=</span><span class="string">""</span> /&gt;</span><br></pre></td></tr></tbody></table></figure><figure class="highlight angelscript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">手动装配：以value或<span class="built_in">ref</span>的方式明确指定属性值都是手动装配。</span><br><span class="line">需要通过‘<span class="built_in">ref</span>’属性来连接bean。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Cutomer的属性名称是person，Spring会将bean id为person的bean通过setter方法进行自动装</span><br><span class="line">配。</span><br><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"cutomer"</span> <span class="attribute">class</span>=<span class="string">"com.xxx.xxx.Cutomer"</span> <span class="attribute">autowire</span>=<span class="string">"byName"</span>/&gt;</span><br><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"person"</span> <span class="attribute">class</span>=<span class="string">"com.xxx.xxx.Person"</span>/&gt;</span><br></pre></td></tr></tbody></table></figure><figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Cutomer的属性person的类型为Person，Spirng会将Person类型通过setter方法进行自动装配。</span><br><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"cutomer"</span> <span class="attribute">class</span>=<span class="string">"com.xxx.xxx.Cutomer"</span> <span class="attribute">autowire</span>=<span class="string">"byType"</span>/&gt;</span><br><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"person"</span> <span class="attribute">class</span>=<span class="string">"com.xxx.xxx.Person"</span>/&gt;</span><br></pre></td></tr></tbody></table></figure><figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Cutomer构造函数的参数person的类型为Person，Spirng会将Person类型通过构造方法进行自动装</span><br><span class="line">配。</span><br><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"cutomer"</span> <span class="attribute">class</span>=<span class="string">"com.xxx.xxx.Cutomer"</span> <span class="attribute">autowire</span>=<span class="string">"construtor"</span>/&gt;</span><br><span class="line">&lt;bean <span class="attribute">id</span>=<span class="string">"person"</span> <span class="attribute">class</span>=<span class="string">"com.xxx.xxx.Person"</span>/&gt;</span><br></pre></td></tr></tbody></table></figure><figure class="highlight delphi"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果有默认的构造器，则通过<span class="function"><span class="keyword">constructor</span>方式进行自动装配，否则使用<span class="title">byType</span>方式进行自动装配。</span></span><br></pre></td></tr></tbody></table></figure><h2 id="Spring-Boot、Spring-MVC-和-Spring-有什么区别"><a href="#Spring-Boot、Spring-MVC-和-Spring-有什么区别" class="headerlink" title="Spring Boot、Spring MVC 和 Spring 有什么区别"></a>Spring Boot、Spring MVC 和 Spring 有什么区别</h2><p>spring是一个IOC容器，用来管理Bean，使用依赖注入实现控制反转，可以很方便的整合各种框架，提<br>供AOP机制弥补OOP的代码重复问题、更方便将不同类不同方法中的共同处理抽取成切面、自动注入给<br>方法执行，比如日志、异常等</p><p>springmvc是spring对web框架的一个解决方案，提供了一个总的前端控制器Servlet，用来接收请求，<br>然后定义了一套路由策略（url到handle的映射）及适配执行handle，将handle结果使用视图解析技术<br>生成视图展现给前端</p><p>springboot是spring提供的一个快速开发工具包，让程序员能更方便、更快速的开发spring+springmvc<br>应用，简化了配置（约定了默认配置），整合了一系列的解决方案（starter机制）、redis、<br>mongodb、es，可以开箱即用</p><h2 id="SpringMVC-工作流程"><a href="#SpringMVC-工作流程" class="headerlink" title="SpringMVC 工作流程"></a>SpringMVC 工作流程</h2><p>1 ）用户发送请求至前端控制器 DispatcherServlet。</p><p>2 ）DispatcherServlet 收到请求调用 HandlerMapping 处理器映射器。</p><p>3 ）处理器映射器找到具体的处理器(可以根据 xml 配置、注解进行查找)，生成处理器及处理器拦截器<br>(如果有则生成)一并返回给 DispatcherServlet。</p><p>4 ）DispatcherServlet 调用 HandlerAdapter 处理器适配器。</p><p>5 ）HandlerAdapter 经过适配调用具体的处理器(Controller，也叫后端控制器)</p><p>6 ）Controller 执行完成返回 ModelAndView。</p><p>7 ）HandlerAdapter 将 controller 执行结果 ModelAndView 返回给 DispatcherServlet。 8 ）<br>DispatcherServlet 将 ModelAndView 传给 ViewReslover 视图解析器。</p><p>9 ）ViewReslover 解析后返回具体 View。</p><p>10 ）DispatcherServlet 根据 View 进行渲染视图（即将模型数据填充至视图中）。</p><p>11 ）DispatcherServlet 响应用户。</p><h2 id="Spring-MVC的主要组件？"><a href="#Spring-MVC的主要组件？" class="headerlink" title="Spring MVC的主要组件？"></a>Spring MVC的主要组件？</h2><p>Handler：也就是处理器。它直接应对着MVC中的C也就是Controller层，它的具体表现形式有很多，可<br>以是类，也可以是方法。在Controller层中@RequestMapping标注的所有方法都可以看成是一个<br>Handler，只要可以实际处理请求就可以是Handler</p><p>1 、HandlerMapping<br>initHandlerMappings(context)，处理器映射器，根据用户请求的资源uri来查找Handler的。在<br>SpringMVC中会有很多请求，每个请求都需要一个Handler处理，具体接收到一个请求之后使用哪个<br>Handler进行，这就是HandlerMapping需要做的事。</p><p>2 、HandlerAdapter<br>initHandlerAdapters(context)，适配器。因为SpringMVC中的Handler可以是任意的形式，只要能处<br>理请求就ok，但是Servlet需要的处理方法的结构却是固定的，都是以request和response为参数的方<br>法。如何让固定的Servlet处理方法调用灵活的Handler来进行处理呢？这就是HandlerAdapter要做的<br>事情。<br>Handler是用来干活的工具；HandlerMapping用于根据需要干的活找到相应的工具；HandlerAdapter<br>是使用工具干活的人。</p><p>3 、HandlerExceptionResolver<br>initHandlerExceptionResolvers(context)， 其它组件都是用来干活的。在干活的过程中难免会出现问<br>题，出问题后怎么办呢？这就需要有一个专门的角色对异常情况进行处理，在SpringMVC中就是<br>HandlerExceptionResolver。具体来说，此组件的作用是根据异常设置ModelAndView，之后再交给<br>render方法进行渲染。</p><p>4 、ViewResolver<br>initViewResolvers(context)，ViewResolver用来将String类型的视图名和Locale解析为View类型的视<br>图。View是用来渲染页面的，也就是将程序返回的参数填入模板里，生成html（也可能是其它类型）<br>文件。这里就有两个关键问题：使用哪个模板？用什么技术（规则）填入参数？这其实是ViewResolver<br>主要要做的工作，ViewResolver需要找到渲染所用的模板和所用的技术（也就是视图的类型）进行渲<br>染，具体的渲染过程则交由不同的视图自己完成。</p><p>5 、RequestToViewNameTranslator<br>initRequestToViewNameTranslator(context)，ViewResolver是根据ViewName查找View，但有的<br>Handler处理完后并没有设置View也没有设置ViewName，这时就需要从request获取ViewName了，<br>如何从request中获取ViewName就是RequestToViewNameTranslator要做的事情了。<br>RequestToViewNameTranslator在Spring MVC容器里只可以配置一个，所以所有request到<br>ViewName的转换规则都要在一个Translator里面全部实现。</p><p>6 、LocaleResolver<br>initLocaleResolver(context)， 解析视图需要两个参数：一是视图名，另一个是Locale。视图名是处理<br>器返回的，Locale是从哪里来的？这就是LocaleResolver要做的事情。LocaleResolver用于从request<br>解析出Locale，Locale就是zh-cn之类，表示一个区域，有了这个就可以对不同区域的用户显示不同的<br>结果。SpringMVC主要有两个地方用到了Locale：一是ViewResolver视图解析的时候；二是用到国际化<br>资源或者主题的时候。</p><p>7 、ThemeResolver<br>initThemeResolver(context)，用于解析主题。SpringMVC中一个主题对应一个properties文件，里面<br>存放着跟当前主题相关的所有资源、如图片、css样式等。SpringMVC的主题也支持国际化，同一个主<br>题不同区域也可以显示不同的风格。SpringMVC中跟主题相关的类有 ThemeResolver、ThemeSource<br>和Theme。主题是通过一系列资源来具体体现的，要得到一个主题的资源，首先要得到资源的名称，这<br>是ThemeResolver的工作。然后通过主题名称找到对应的主题（可以理解为一个配置）文件，这是<br>ThemeSource的工作。最后从主题中获取资源就可以了。</p><p>8 、MultipartResolver<br>initMultipartResolver(context)，用于处理上传请求。处理方法是将普通的request包装成<br>MultipartHttpServletRequest，后者可以直接调用getFile方法获取File，如果上传多个文件，还可以调<br>用getFileMap得到FileName-&gt;File结构的Map。此组件中一共有三个方法，作用分别是判断是不是上传<br>请求，将request包装成MultipartHttpServletRequest、处理完后清理上传过程中产生的临时资源。</p><p>9 、FlashMapManager<br>initFlashMapManager(context)，用来管理FlashMap的，FlashMap主要用在redirect中传递参数。</p><h2 id="Spring-Boot-自动配置原理？"><a href="#Spring-Boot-自动配置原理？" class="headerlink" title="Spring Boot 自动配置原理？"></a>Spring Boot 自动配置原理？</h2><p>@Import + @Configuration + Spring spi</p><p>自动配置类由各个starter提供，使用@Configuration + @Bean定义配置类，放到META-<br>INF/spring.factories下</p><p>使用Spring spi扫描META-INF/spring.factories下的配置类</p><p>使用@Import导入自动配置类</p><h2 id="如何理解-Spring-Boot-中的-Starter"><a href="#如何理解-Spring-Boot-中的-Starter" class="headerlink" title="如何理解 Spring Boot 中的 Starter"></a>如何理解 Spring Boot 中的 Starter</h2><p>使用spring + springmvc使用，如果需要引入mybatis等框架，需要到xml中定义mybatis需要的bean</p><p>starter就是定义一个starter的jar包，写一个@Configuration配置类、将这些bean定义在里面，然后在<br>starter包的META-INF/spring.factories中写入该配置类，springboot会按照约定来加载该配置类</p><p>开发人员只需要将相应的starter包依赖进应用，进行相应的属性配置（使用默认配置时，不需要配<br>置），就可以直接进行代码开发，使用对应的功能了，比如mybatis-spring-boot–starter，spring-<br>boot-starter-redis</p><h2 id="什么是嵌入式服务器？为什么要使用嵌入式服务器"><a href="#什么是嵌入式服务器？为什么要使用嵌入式服务器" class="headerlink" title="什么是嵌入式服务器？为什么要使用嵌入式服务器?"></a>什么是嵌入式服务器？为什么要使用嵌入式服务器?</h2><p>节省了下载安装tomcat，应用也不需要再打war包，然后放到webapp目录下再运行</p><p>只需要一个安装了 Java 的虚拟机，就可以直接在上面部署应用程序了</p><p>springboot已经内置了tomcat.jar，运行main方法时会去启动tomcat，并利用tomcat的spi机制加载<br>springmvc</p><h1 id="Mybatis"><a href="#Mybatis" class="headerlink" title="Mybatis"></a>Mybatis</h1><h2 id="mybatis的优缺点"><a href="#mybatis的优缺点" class="headerlink" title="mybatis的优缺点"></a>mybatis的优缺点</h2><h3 id="优点："><a href="#优点：" class="headerlink" title="优点："></a>优点：</h3><h3 id="1-、基于-SQL-语句编程，相当灵活，不会对应用程序或者数据库的现有设计造成任何影响，SQL-写在"><a href="#1-、基于-SQL-语句编程，相当灵活，不会对应用程序或者数据库的现有设计造成任何影响，SQL-写在" class="headerlink" title="1 、基于 SQL 语句编程，相当灵活，不会对应用程序或者数据库的现有设计造成任何影响，SQL 写在"></a>1 、基于 SQL 语句编程，相当灵活，不会对应用程序或者数据库的现有设计造成任何影响，SQL 写在</h3><p>XML 里，解除 sql 与程序代码的耦合，便于统一管理；提供 XML 标签， 支持编写动态 SQL 语句， 并<br>可重用。</p><p>2 、与 JDBC 相比，减少了 50%以上的代码量，消除了 JDBC 大量冗余的代码，不需要手动开关连接；</p><p>3 、很好的与各种数据库兼容（ 因为 MyBatis 使用 JDBC 来连接数据库，所以只要JDBC 支持的数据库<br>MyBatis 都支持）。</p><p>4 、能够与 Spring 很好的集成；</p><p>5 、提供映射标签， 支持对象与数据库的 ORM 字段关系映射； 提供对象关系映射标签， 支持对象关<br>系组件维护。</p><p>缺点：</p><p>1 、SQL 语句的编写工作量较大， 尤其当字段多、关联表多时， 对开发人员编写SQL 语句的功底有一<br>定要求。</p><p>2 、SQL 语句依赖于数据库， 导致数据库移植性差， 不能随意更换数据库。</p><h2 id="MyBatis-与Hibernate-有哪些不同？"><a href="#MyBatis-与Hibernate-有哪些不同？" class="headerlink" title="MyBatis 与Hibernate 有哪些不同？"></a>MyBatis 与Hibernate 有哪些不同？</h2><h3 id="SQL-和-ORM-的争论，永远都不会终止"><a href="#SQL-和-ORM-的争论，永远都不会终止" class="headerlink" title="SQL 和 ORM 的争论，永远都不会终止"></a>SQL 和 ORM 的争论，永远都不会终止</h3><h3 id="开发速度的对比："><a href="#开发速度的对比：" class="headerlink" title="开发速度的对比："></a>开发速度的对比：</h3><p>Hibernate的真正掌握要比Mybatis难些。Mybatis框架相对简单很容易上手，但也相对简陋些。<br>比起两者的开发速度，不仅仅要考虑到两者的特性及性能，更要根据项目需求去考虑究竟哪一个更适合<br>项目开发，比如：一个项目中用到的复杂查询基本没有，就是简单的增删改查，这样选择hibernate效<br>率就很快了，因为基本的sql语句已经被封装好了，根本不需要你去写sql语句，这就节省了大量的时<br>间，但是对于一个大型项目，复杂语句较多，这样再去选择hibernate就不是一个太好的选择，选择<br>mybatis就会加快许多，而且语句的管理也比较方便。</p><p>开发工作量的对比：<br>Hibernate和MyBatis都有相应的代码生成工具。可以生成简单基本的DAO层方法。针对高级查询，<br>Mybatis需要手动编写SQL语句，以及ResultMap。而Hibernate有良好的映射机制，开发者无需关心<br>SQL的生成与结果映射，可以更专注于业务流程</p><p>sql优化方面：<br>Hibernate的查询会将表中的所有字段查询出来，这一点会有性能消耗。Hibernate也可以自己写SQL来<br>指定需要查询的字段，但这样就破坏了Hibernate开发的简洁性。而Mybatis的SQL是手动编写的，所以<br>可以按需求指定查询的字段。<br>Hibernate HQL语句的调优需要将SQL打印出来，而Hibernate的SQL被很多人嫌弃因为太丑了。<br>MyBatis的SQL是自己手动写的所以调整方便。但Hibernate具有自己的日志统计。Mybatis本身不带日<br>志统计，使用Log4j进行日志记录。</p><p>对象管理的对比：<br>Hibernate 是完整的对象/关系映射解决方案，它提供了对象状态管理（state management）的功能，<br>使开发者不再需要理会底层数据库系统的细节。也就是说，相对于常见的 JDBC/SQL 持久层方案中需要<br>管理 SQL 语句，Hibernate采用了更自然的面向对象的视角来持久化 Java 应用中的数据。<br>换句话说，使用 Hibernate 的开发者应该总是关注对象的状态（state），不必考虑 SQL 语句的执行。<br>这部分细节已经由 Hibernate 掌管妥当，只有开发者在进行系统性能调优的时候才需要进行了解。而<br>MyBatis在这一块没有文档说明，用户需要对对象自己进行详细的管理。</p><p>缓存机制对比：</p><p>相同点：都可以实现自己的缓存或使用其他第三方缓存方案，创建适配器来完全覆盖缓存行为。</p><p>不同点：Hibernate的二级缓存配置在SessionFactory生成的配置文件中进行详细配置，然后再在具体<br>的表-对象映射中配置是哪种缓存。</p><p>MyBatis的二级缓存配置都是在每个具体的表-对象映射中进行详细配置，这样针对不同的表可以自定义<br>不同的缓存机制。并且Mybatis可以在命名空间中共享相同的缓存配置和实例，通过Cache-ref来实现。</p><p>两者比较：因为Hibernate对查询对象有着良好的管理机制，用户无需关心SQL。所以在使用二级缓存<br>时如果出现脏数据，系统会报出错误并提示。</p><p>而MyBatis在这一方面，使用二级缓存时需要特别小心。如果不能完全确定数据更新操作的波及范围，<br>避免Cache的盲目使用。否则，脏数据的出现会给系统的正常运行带来很大的隐患。</p><p>Hibernate功能强大，数据库无关性好，O/R映射能力强，如果你对Hibernate相当精通，而且对<br>Hibernate进行了适当的封装，那么你的项目整个持久层代码会相当简单，需要写的代码很少，开发速<br>度很快，非常爽。</p><p>Hibernate的缺点就是学习门槛不低，要精通门槛更高，而且怎么设计O/R映射，在性能和对象模型之<br>间如何权衡取得平衡，以及怎样用好Hibernate方面需要你的经验和能力都很强才行。</p><p>iBATIS入门简单，即学即用，提供了数据库查询的自动对象绑定功能，而且延续了很好的SQL使用经<br>验，对于没有那么高的对象模型要求的项目来说，相当完美。</p><p>iBATIS的缺点就是框架还是比较简陋，功能尚有缺失，虽然简化了数据绑定代码，但是整个底层数据库<br>查询实际还是要自己写的，工作量也比较大，而且不太容易适应快速数据库修改。</p><h2 id="和-的区别是什么？"><a href="#和-的区别是什么？" class="headerlink" title="#{}和${}的区别是什么？"></a>#{}和${}的区别是什么？</h2><h3 id="是预编译处理、是占位符，-是字符串替换、是拼接符。"><a href="#是预编译处理、是占位符，-是字符串替换、是拼接符。" class="headerlink" title="#{}是预编译处理、是占位符， ${}是字符串替换、是拼接符。"></a>#{}是预编译处理、是占位符， ${}是字符串替换、是拼接符。</h3><p>Mybatis 在处理#{}时，会将 sql 中的#{}替换为?号，调用 PreparedStatement 来赋值；</p><p>Mybatis 在处理${}时， 就是把${}替换成变量的值，调用 Statement 来赋值；</p><p>#{} 的变量替换是在DBMS 中、变量替换后，#{} 对应的变量自动加上单引号</p><p>${} 的变量替换是在 DBMS 外、变量替换后，${} 对应的变量不会加上单引号</p><p>使用#{}可以有效的防止 SQL 注入， 提高系统安全性。</p><h2 id="简述-Mybatis-的插件运行原理，如何编写一个插件。"><a href="#简述-Mybatis-的插件运行原理，如何编写一个插件。" class="headerlink" title="简述 Mybatis 的插件运行原理，如何编写一个插件。"></a>简述 Mybatis 的插件运行原理，如何编写一个插件。</h2><p>答： Mybatis 只支持针对 ParameterHandler、ResultSetHandler、StatementHandler、Executor 这<br>4 种接口的插件， Mybatis 使用 JDK 的动态代理， 为需要拦截的接口生成代理对象以实现接口方法拦<br>截功能， 每当执行这 4 种接口对象的方法时，就会进入拦截方法，具体就是 InvocationHandler 的<br>invoke() 方法， 拦截那些你指定需要拦截的方法。</p><p>编写插件： 实现 Mybatis 的 Interceptor 接口并复写 intercept()方法， 然后在给插件编写注解， 指定<br>要拦截哪一个接口的哪些方法即可， 在配置文件中配置编写的插件。</p><h1 id="Mysql"><a href="#Mysql" class="headerlink" title="Mysql"></a>Mysql</h1><figure class="highlight less"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Intercepts</span>({<span class="variable">@Signature</span>(type = StatementHandler.class, method = <span class="string">"query"</span>, args =</span><br><span class="line">{Statement.class, ResultHandler.class}),</span><br><span class="line"><span class="variable">@Signature</span>(type = StatementHandler.class, method = <span class="string">"update"</span>, args =</span><br><span class="line">{Statement.class}),</span><br><span class="line"><span class="variable">@Signature</span>(type = StatementHandler.class, method = <span class="string">"batch"</span>, args = {</span><br><span class="line">Statement.class })})</span><br><span class="line"><span class="variable">@Component</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight aspectj"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">invocation.<span class="keyword">proceed</span>()执行具体的业务逻辑</span><br></pre></td></tr></tbody></table></figure><h2 id="索引的基本原理"><a href="#索引的基本原理" class="headerlink" title="索引的基本原理"></a>索引的基本原理</h2><h3 id="索引用来快速地寻找那些具有特定值的记录。如果没有索引，一般来说执行查询时遍历整张表。"><a href="#索引用来快速地寻找那些具有特定值的记录。如果没有索引，一般来说执行查询时遍历整张表。" class="headerlink" title="索引用来快速地寻找那些具有特定值的记录。如果没有索引，一般来说执行查询时遍历整张表。"></a>索引用来快速地寻找那些具有特定值的记录。如果没有索引，一般来说执行查询时遍历整张表。</h3><h3 id="索引的原理：就是把无序的数据变成有序的查询"><a href="#索引的原理：就是把无序的数据变成有序的查询" class="headerlink" title="索引的原理：就是把无序的数据变成有序的查询"></a>索引的原理：就是把无序的数据变成有序的查询</h3><h3 id="1-把创建了索引的列的内容进行排序"><a href="#1-把创建了索引的列的内容进行排序" class="headerlink" title="1. 把创建了索引的列的内容进行排序"></a>1. 把创建了索引的列的内容进行排序</h3><h3 id="2-对排序结果生成倒排表"><a href="#2-对排序结果生成倒排表" class="headerlink" title="2. 对排序结果生成倒排表"></a>2. 对排序结果生成倒排表</h3><h3 id="3-在倒排表内容上拼上数据地址链"><a href="#3-在倒排表内容上拼上数据地址链" class="headerlink" title="3. 在倒排表内容上拼上数据地址链"></a>3. 在倒排表内容上拼上数据地址链</h3><h3 id="4-在查询的时候，先拿到倒排表内容，再取出数据地址链，从而拿到具体数据"><a href="#4-在查询的时候，先拿到倒排表内容，再取出数据地址链，从而拿到具体数据" class="headerlink" title="4. 在查询的时候，先拿到倒排表内容，再取出数据地址链，从而拿到具体数据"></a>4. 在查询的时候，先拿到倒排表内容，再取出数据地址链，从而拿到具体数据</h3><h2 id="mysql聚簇和非聚簇索引的区别"><a href="#mysql聚簇和非聚簇索引的区别" class="headerlink" title="mysql聚簇和非聚簇索引的区别"></a>mysql聚簇和非聚簇索引的区别</h2><h3 id="都是B-树的数据结构"><a href="#都是B-树的数据结构" class="headerlink" title="都是B+树的数据结构"></a>都是B+树的数据结构</h3><h3 id="聚簇索引：将数据存储与索引放到了一块、并且是按照一定的顺序组织的，找到索引也就找到了数"><a href="#聚簇索引：将数据存储与索引放到了一块、并且是按照一定的顺序组织的，找到索引也就找到了数" class="headerlink" title="聚簇索引：将数据存储与索引放到了一块、并且是按照一定的顺序组织的，找到索引也就找到了数"></a>聚簇索引：将数据存储与索引放到了一块、并且是按照一定的顺序组织的，找到索引也就找到了数</h3><h3 id="据，数据的物理存放顺序与索引顺序是一致的，即：只要索引是相邻的，那么对应的数据一定也是"><a href="#据，数据的物理存放顺序与索引顺序是一致的，即：只要索引是相邻的，那么对应的数据一定也是" class="headerlink" title="据，数据的物理存放顺序与索引顺序是一致的，即：只要索引是相邻的，那么对应的数据一定也是"></a>据，数据的物理存放顺序与索引顺序是一致的，即：只要索引是相邻的，那么对应的数据一定也是</h3><h3 id="相邻地存放在磁盘上的"><a href="#相邻地存放在磁盘上的" class="headerlink" title="相邻地存放在磁盘上的"></a>相邻地存放在磁盘上的</h3><h3 id="非聚簇索引：叶子节点不存储数据、存储的是数据行地址，也就是说根据索引查找到数据行的位置"><a href="#非聚簇索引：叶子节点不存储数据、存储的是数据行地址，也就是说根据索引查找到数据行的位置" class="headerlink" title="非聚簇索引：叶子节点不存储数据、存储的是数据行地址，也就是说根据索引查找到数据行的位置"></a>非聚簇索引：叶子节点不存储数据、存储的是数据行地址，也就是说根据索引查找到数据行的位置</h3><h3 id="再取磁盘查找数据，这个就有点类似一本树的目录，比如我们要找第三章第一节，那我们先在这个"><a href="#再取磁盘查找数据，这个就有点类似一本树的目录，比如我们要找第三章第一节，那我们先在这个" class="headerlink" title="再取磁盘查找数据，这个就有点类似一本树的目录，比如我们要找第三章第一节，那我们先在这个"></a>再取磁盘查找数据，这个就有点类似一本树的目录，比如我们要找第三章第一节，那我们先在这个</h3><h3 id="目录里面找，找到对应的页码后再去对应的页码看文章。"><a href="#目录里面找，找到对应的页码后再去对应的页码看文章。" class="headerlink" title="目录里面找，找到对应的页码后再去对应的页码看文章。"></a>目录里面找，找到对应的页码后再去对应的页码看文章。</h3><p>InnoDB中一定有主键，主键一定是聚簇索引，不手动设置、则会使用unique索引，没有unique索引，<br>则会使用数据库内部的一个行的隐藏id来当作主键索引。在聚簇索引之上创建的索引称之为辅助索引，<br>辅助索引访问数据总是需要二次查找，非聚簇索引都是辅助索引，像复合索引、前缀索引、唯一索引，<br>辅助索引叶子节点存储的不再是行的物理位置，而是主键值</p><p>MyISM使用的是非聚簇索引，没有聚簇索引，非聚簇索引的两棵B+树看上去没什么不同，节点的结构<br>完全一致只是存储的内容不同而已，主键索引B+树的节点存储了主键，辅助键索引B+树存储了辅助<br>键。表数据存储在独立的地方，这两颗B+树的叶子节点都使用一个地址指向真正的表数据，对于表数据<br>来说，这两个键没有任何差别。由于索引树是独立的，通过辅助键检索无需访问主键的索引树。</p><p>如果涉及到大数据量的排序、全表扫描、count之类的操作的话，还是MyISAM占优势些，因为索引所<br>占空间小，这些操作是需要在内存中完成的。</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">优势：</span><br><span class="line">1 、查询通过聚簇索引可以直接获取数据，相比非聚簇索引需要第二次查询（非覆盖索引的情况下）效率</span><br><span class="line">要高</span><br><span class="line">2 、聚簇索引对于范围查询的效率很高，因为其数据是按照大小排列的</span><br><span class="line">3 、聚簇索引适合用在排序的场合，非聚簇索引不适合</span><br></pre></td></tr></tbody></table></figure><figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">劣势：</span><br><span class="line"><span class="number">1</span> 、维护索引很昂贵，特别是插入新行或者主键被更新导至要分页(page split)的时候。建议在大量插</span><br><span class="line">入新行后，选在负载较低的时间段，通过OPTIMIZE <span class="keyword">TABLE</span>优化表，因为必须被移动的行数据可能造成</span><br><span class="line">碎片。使用独享表空间可以弱化碎片</span><br><span class="line"><span class="number">2</span> 、表因为使用<span class="type">UUId</span>（随机ID）作为主键，使数据存储稀疏，这就会出现聚簇索引有可能有比全表扫面</span><br><span class="line">更慢，所以建议使用<span class="type">int</span>的auto_increment作为主键</span><br><span class="line"><span class="number">3</span> 、如果主键比较大的话，那辅助索引将会变的更大，因为辅助索引的叶子存储的是主键值；过长的主键</span><br><span class="line">值，会导致非叶子节点占用占用更多的物理空间</span><br></pre></td></tr></tbody></table></figure><h2 id="mysql索引的数据结构，各自优劣"><a href="#mysql索引的数据结构，各自优劣" class="headerlink" title="mysql索引的数据结构，各自优劣"></a>mysql索引的数据结构，各自优劣</h2><p>索引的数据结构和具体存储引擎的实现有关，在MySQL中使用较多的索引有Hash索引，B+树索引等，<br>InnoDB存储引擎的默认索引实现为：B+树索引。对于哈希索引来说，底层的数据结构就是哈希表，因<br>此在绝大多数需求为单条记录查询的时候，可以选择哈希索引，查询性能最快；其余大部分场景，建议<br>选择BTree索引。</p><p>B+树：</p><p>B+树是一个平衡的多叉树，从根节点到每个叶子节点的高度差值不超过 1 ，而且同层级的节点间有指针<br>相互链接。在B+树上的常规检索，从根节点到叶子节点的搜索效率基本相当，不会出现大幅波动，而且<br>基于索引的顺序扫描时，也可以利用双向指针快速左右移动，效率非常高。因此，B+树索引被广泛应用<br>于数据库、文件系统等场景。</p><h3 id="哈希索引："><a href="#哈希索引：" class="headerlink" title="哈希索引："></a>哈希索引：</h3><h3 id="哈希索引就是采用一定的哈希算法，把键值换算成新的哈希值，检索时不需要类似B-树那样从根节点到"><a href="#哈希索引就是采用一定的哈希算法，把键值换算成新的哈希值，检索时不需要类似B-树那样从根节点到" class="headerlink" title="哈希索引就是采用一定的哈希算法，把键值换算成新的哈希值，检索时不需要类似B+树那样从根节点到"></a>哈希索引就是采用一定的哈希算法，把键值换算成新的哈希值，检索时不需要类似B+树那样从根节点到</h3><h3 id="叶子节点逐级查找，只需一次哈希算法即可立刻定位到相应的位置，速度非常快"><a href="#叶子节点逐级查找，只需一次哈希算法即可立刻定位到相应的位置，速度非常快" class="headerlink" title="叶子节点逐级查找，只需一次哈希算法即可立刻定位到相应的位置，速度非常快"></a>叶子节点逐级查找，只需一次哈希算法即可立刻定位到相应的位置，速度非常快</h3><h3 id="如果是等值查询，那么哈希索引明显有绝对优势，因为只需要经过一次算法即可找到相应的键值；前提"><a href="#如果是等值查询，那么哈希索引明显有绝对优势，因为只需要经过一次算法即可找到相应的键值；前提" class="headerlink" title="如果是等值查询，那么哈希索引明显有绝对优势，因为只需要经过一次算法即可找到相应的键值；前提"></a>如果是等值查询，那么哈希索引明显有绝对优势，因为只需要经过一次算法即可找到相应的键值；前提</h3><h3 id="是键值都是唯一的。如果键值不是唯一的，就需要先找到该键所在位置，然后再根据链表往后扫描，直"><a href="#是键值都是唯一的。如果键值不是唯一的，就需要先找到该键所在位置，然后再根据链表往后扫描，直" class="headerlink" title="是键值都是唯一的。如果键值不是唯一的，就需要先找到该键所在位置，然后再根据链表往后扫描，直"></a>是键值都是唯一的。如果键值不是唯一的，就需要先找到该键所在位置，然后再根据链表往后扫描，直</h3><h3 id="到找到相应的数据；"><a href="#到找到相应的数据；" class="headerlink" title="到找到相应的数据；"></a>到找到相应的数据；</h3><h3 id="如果是范围查询检索，这时候哈希索引就毫无用武之地了，因为原先是有序的键值，经过哈希算法后，"><a href="#如果是范围查询检索，这时候哈希索引就毫无用武之地了，因为原先是有序的键值，经过哈希算法后，" class="headerlink" title="如果是范围查询检索，这时候哈希索引就毫无用武之地了，因为原先是有序的键值，经过哈希算法后，"></a>如果是范围查询检索，这时候哈希索引就毫无用武之地了，因为原先是有序的键值，经过哈希算法后，</h3><h3 id="有可能变成不连续的了，就没办法再利用索引完成范围查询检索；"><a href="#有可能变成不连续的了，就没办法再利用索引完成范围查询检索；" class="headerlink" title="有可能变成不连续的了，就没办法再利用索引完成范围查询检索；"></a>有可能变成不连续的了，就没办法再利用索引完成范围查询检索；</h3><p>哈希索引也没办法利用索引完成排序，以及like ‘xxx%’ 这样的部分模糊查询（这种部分模糊查询，其实<br>本质上也是范围查询）；</p><p>哈希索引也不支持多列联合索引的最左匹配规则；</p><p>B+树索引的关键字检索效率比较平均，不像B树那样波动幅度大，在有大量重复键值情况下，哈希索引<br>的效率也是极低的，因为存在哈希碰撞问题。</p><h2 id="索引设计的原则？"><a href="#索引设计的原则？" class="headerlink" title="索引设计的原则？"></a>索引设计的原则？</h2><h3 id="查询更快、占用空间更小"><a href="#查询更快、占用空间更小" class="headerlink" title="查询更快、占用空间更小"></a>查询更快、占用空间更小</h3><figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> 适合索引的列是出现在where子句中的列，或者连接子句中指定的列</span><br><span class="line"><span class="bullet">2.</span> 基数较小的表，索引效果较差，没有必要在此列建立索引</span><br><span class="line"><span class="bullet">3.</span> 使用短索引，如果对长字符串列进行索引，应该指定一个前缀长度，这样能够节省大量索引空间，</span><br><span class="line">如果搜索词超过索引前缀长度，则使用索引排除不匹配的行，然后检查其余行是否可能匹配。</span><br><span class="line"><span class="bullet">4.</span> 不要过度索引。索引需要额外的磁盘空间，并降低写操作的性能。在修改表内容的时候，索引会进</span><br><span class="line">行更新甚至重构，索引列越多，这个时间就会越长。所以只保持需要的索引有利于查询即可。</span><br><span class="line"><span class="bullet">5.</span> 定义有外键的数据列一定要建立索引。</span><br><span class="line"><span class="bullet">6.</span> 更新频繁字段不适合创建索引</span><br><span class="line"><span class="bullet">7.</span> 若是不能有效区分数据的列不适合做索引列(如性别，男女未知，最多也就三种，区分度实在太低)</span><br></pre></td></tr></tbody></table></figure><figure class="highlight arduino"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">8.</span> 尽量的扩展索引，不要新建索引。比如表中已经有a的索引，现在要加(a,b)的索引，那么只需要修</span><br><span class="line">改原来的索引即可。</span><br><span class="line"><span class="number">9.</span> 对于那些查询中很少涉及的列，重复值比较多的列不要建立索引。</span><br><span class="line"><span class="number">10.</span> 对于定义为text、image和bit的数据类型的列不要建立索引。</span><br></pre></td></tr></tbody></table></figure><h2 id="什么是最左前缀原则？什么是最左匹配原则"><a href="#什么是最左前缀原则？什么是最左匹配原则" class="headerlink" title="什么是最左前缀原则？什么是最左匹配原则"></a>什么是最左前缀原则？什么是最左匹配原则</h2><h2 id="锁的类型有哪些"><a href="#锁的类型有哪些" class="headerlink" title="锁的类型有哪些"></a>锁的类型有哪些</h2><h3 id="基于锁的属性分类：共享锁、排他锁。"><a href="#基于锁的属性分类：共享锁、排他锁。" class="headerlink" title="基于锁的属性分类：共享锁、排他锁。"></a>基于锁的属性分类：共享锁、排他锁。</h3><h3 id="基于锁的粒度分类：行级锁-INNODB-、表级锁-INNODB、MYISAM-、页级锁-BDB引擎-、记录锁、间"><a href="#基于锁的粒度分类：行级锁-INNODB-、表级锁-INNODB、MYISAM-、页级锁-BDB引擎-、记录锁、间" class="headerlink" title="基于锁的粒度分类：行级锁(INNODB)、表级锁(INNODB、MYISAM)、页级锁(BDB引擎 )、记录锁、间"></a>基于锁的粒度分类：行级锁(INNODB)、表级锁(INNODB、MYISAM)、页级锁(BDB引擎 )、记录锁、间</h3><h3 id="隙锁、临键锁。"><a href="#隙锁、临键锁。" class="headerlink" title="隙锁、临键锁。"></a>隙锁、临键锁。</h3><h3 id="基于锁的状态分类：意向共享锁、意向排它锁。"><a href="#基于锁的状态分类：意向共享锁、意向排它锁。" class="headerlink" title="基于锁的状态分类：意向共享锁、意向排它锁。"></a>基于锁的状态分类：意向共享锁、意向排它锁。</h3><figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">共享锁(<span class="keyword">Share</span> <span class="keyword">Lock</span>)</span><br></pre></td></tr></tbody></table></figure><figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">排他锁（<span class="keyword">eXclusive</span> <span class="keyword">Lock</span>）</span><br></pre></td></tr></tbody></table></figure><h3 id="表锁"><a href="#表锁" class="headerlink" title="表锁"></a>表锁</h3><h3 id="行锁"><a href="#行锁" class="headerlink" title="行锁"></a>行锁</h3><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">共享锁又称读锁，简称S锁；当一个事务为数据加上读锁之后，其他事务只能对该数据加读锁，而不能对</span><br><span class="line">数据加写锁，直到所有的读锁释放之后其他事务才能对其进行加持写锁。共享锁的特性主要是为了支持</span><br><span class="line">并发的读取数据，读取数据的时候不支持修改，避免出现重复读的问题。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight tp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">排他锁又称写锁，简称<span class="keyword">X</span>锁；当一个事务为数据加上写锁时，其他请求将不能再为数据加任何锁，直到该</span><br><span class="line">锁释放之后，其他事务才能对数据进行加锁。排他锁的目的是在数据修改时候，不允许其他人同时修</span><br><span class="line">改，也不允许其他人读取。避免了出现脏数据和脏读的问题。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">表锁是指上锁的时候锁住的是整个表，当下一个事务访问该表的时候，必须等前一个事务释放了锁才能</span><br><span class="line">进行对表进行访问；</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">特点： 粒度大，加锁简单，容易冲突；</span><br></pre></td></tr></tbody></table></figure><p>记录锁(Record Lock)</p><h3 id="页锁"><a href="#页锁" class="headerlink" title="页锁"></a>页锁</h3><p>间隙锁(Gap Lock)</p><p>临建锁(Next-Key Lock)</p><h3 id="如果当事务A加锁成功之后就设置一个状态告诉后面的人，已经有人对表里的行加了一个排他锁"><a href="#如果当事务A加锁成功之后就设置一个状态告诉后面的人，已经有人对表里的行加了一个排他锁" class="headerlink" title="如果当事务A加锁成功之后就设置一个状态告诉后面的人，已经有人对表里的行加了一个排他锁"></a>如果当事务A加锁成功之后就设置一个状态告诉后面的人，已经有人对表里的行加了一个排他锁</h3><h3 id="了，你们不能对整个表加共享锁或排它锁了，那么后面需要对整个表加锁的人只需要获取这个状态"><a href="#了，你们不能对整个表加共享锁或排它锁了，那么后面需要对整个表加锁的人只需要获取这个状态" class="headerlink" title="了，你们不能对整个表加共享锁或排它锁了，那么后面需要对整个表加锁的人只需要获取这个状态"></a>了，你们不能对整个表加共享锁或排它锁了，那么后面需要对整个表加锁的人只需要获取这个状态</h3><h3 id="就知道自己是不是可以对表加锁，避免了对整个索引树的每个节点扫描是否加锁，而这个状态就是"><a href="#就知道自己是不是可以对表加锁，避免了对整个索引树的每个节点扫描是否加锁，而这个状态就是" class="headerlink" title="就知道自己是不是可以对表加锁，避免了对整个索引树的每个节点扫描是否加锁，而这个状态就是"></a>就知道自己是不是可以对表加锁，避免了对整个索引树的每个节点扫描是否加锁，而这个状态就是</h3><h3 id="意向锁。"><a href="#意向锁。" class="headerlink" title="意向锁。"></a>意向锁。</h3><h3 id="意向共享锁"><a href="#意向共享锁" class="headerlink" title="意向共享锁"></a>意向共享锁</h3><h3 id="意向排他锁"><a href="#意向排他锁" class="headerlink" title="意向排他锁"></a>意向排他锁</h3><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">行锁是指上锁的时候锁住的是表的某一行或多行记录，其他事务访问同一张表时，只有被锁住的记录不</span><br><span class="line">能访问，其他的记录可正常访问；</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">特点：粒度小，加锁比表锁麻烦，不容易冲突，相比表锁支持的并发要高；</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">记录锁也属于行锁中的一种，只不过记录锁的范围只是表中的某一条记录，记录锁是说事务在加锁后锁</span><br><span class="line">住的只是表的某一条记录。</span><br><span class="line">精准条件命中，并且命中的条件字段是唯一索引</span><br><span class="line">加了记录锁之后数据可以避免数据在查询的时候被修改的重复读问题，也避免了在修改的事务未提交前</span><br><span class="line">被其他事务读取的脏读问题。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">页级锁是MySQL中锁定粒度介于行级锁和表级锁中间的一种锁。表级锁速度快，但冲突多，行级冲突</span><br><span class="line">少，但速度慢。所以取了折衷的页级，一次锁定相邻的一组记录。</span><br><span class="line">特点：开销和加锁时间界于表锁和行锁之间；会出现死锁；锁定粒度界于表锁和行锁之间，并发度一般</span><br></pre></td></tr></tbody></table></figure><figure class="highlight css"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">属于行锁中的一种，间隙锁是在事务加锁后其锁住的是表记录的某一个区间，当表的相邻ID之间出现空</span><br><span class="line">隙则会形成一个区间，遵循左开右闭原则。</span><br><span class="line">范围查询并且查询未命中记录，查询条件必须命中索引、间隙锁只会出现在REPEATABLE_READ（重复</span><br><span class="line">读)的事务级别中。</span><br><span class="line">触发条件：防止幻读问题，事务并发的时候，如果没有间隙锁，就会发生如下图的问题，在同一个事务</span><br><span class="line">里，<span class="selector-tag">A</span>事务的两次查询出的结果会不一样。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">比如表里面的数据ID 为 <span class="number">1</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">10</span> ,那么会形成以下几个间隙区间，-<span class="built_in">n</span>-<span class="number">1</span>区间，<span class="number">1</span>-<span class="number">4</span>区间，<span class="number">7</span>-<span class="number">10</span></span><br><span class="line">区间，<span class="number">10</span>-<span class="built_in">n</span>区间 （-<span class="built_in">n</span>代表负无穷大，<span class="built_in">n</span>代表正无穷大）</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">也属于行锁的一种，并且它是INNODB的行锁默认算法，总结来说它就是记录锁和间隙锁的组合，临键锁</span><br><span class="line">会把查询出来的记录锁住，同时也会把该范围查询内的所有间隙空间也会锁住，再之它会把相邻的下一</span><br><span class="line">个区间也会锁住</span><br><span class="line">触发条件：范围查询并命中，查询命中了索引。</span><br><span class="line">结合记录锁和间隙锁的特性，临键锁避免了在范围查询时出现脏读、重复读、幻读问题。加了临键锁之</span><br><span class="line">后，在范围区间内数据不允许被修改和插</span><br><span class="line">入。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">当一个事务试图对整个表进行加共享锁之前，首先需要获得这个表的意向共享锁。</span><br></pre></td></tr></tbody></table></figure><h2 id="InnoDB存储引擎的锁的算法"><a href="#InnoDB存储引擎的锁的算法" class="headerlink" title="InnoDB存储引擎的锁的算法"></a>InnoDB存储引擎的锁的算法</h2><figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Record</span> <span class="keyword">lock</span>：单个行记录上的锁</span><br><span class="line">Gap <span class="keyword">lock</span>：间隙锁，锁定一个范围，不包括记录本身</span><br><span class="line">Next-key <span class="keyword">lock</span>：<span class="type">record</span>+gap 锁定一个范围，包含记录本身</span><br></pre></td></tr></tbody></table></figure><p>相关知识点：</p><figure class="highlight vbnet"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. innodb对于行的查询使用<span class="keyword">next</span>-<span class="keyword">key</span> lock</span><br><span class="line"><span class="number">2</span>. <span class="keyword">Next</span>-locking keying为了解决Phantom Problem幻读问题</span><br><span class="line"><span class="number">3</span>. 当查询的索引含有唯一属性时，将<span class="keyword">next</span>-<span class="keyword">key</span> lock降级为record <span class="keyword">key</span></span><br><span class="line"><span class="number">4</span>. Gap锁设计的目的是为了阻止多个事务将记录插入到同一范围内，而这会导致幻读问题的产生</span><br><span class="line"><span class="number">5</span>. 有两种方式显式关闭gap锁：（除了外键约束和唯一性检查外，其余情况仅使用record lock） A.</span><br><span class="line">将事务隔离级别设置为RC B. 将参数innodb_locks_unsafe_for_binlog设置为 <span class="number">1</span></span><br></pre></td></tr></tbody></table></figure><h2 id="关心过业务系统里面的sql耗时吗？统计过慢查询吗？对慢"><a href="#关心过业务系统里面的sql耗时吗？统计过慢查询吗？对慢" class="headerlink" title="关心过业务系统里面的sql耗时吗？统计过慢查询吗？对慢"></a>关心过业务系统里面的sql耗时吗？统计过慢查询吗？对慢</h2><h2 id="查询都怎么优化过？"><a href="#查询都怎么优化过？" class="headerlink" title="查询都怎么优化过？"></a>查询都怎么优化过？</h2><h3 id="在业务系统中，除了使用主键进行的查询，其他的都会在测试库上测试其耗时，慢查询的统计主要由运"><a href="#在业务系统中，除了使用主键进行的查询，其他的都会在测试库上测试其耗时，慢查询的统计主要由运" class="headerlink" title="在业务系统中，除了使用主键进行的查询，其他的都会在测试库上测试其耗时，慢查询的统计主要由运"></a>在业务系统中，除了使用主键进行的查询，其他的都会在测试库上测试其耗时，慢查询的统计主要由运</h3><h3 id="维在做，会定期将业务中的慢查询反馈给我们。"><a href="#维在做，会定期将业务中的慢查询反馈给我们。" class="headerlink" title="维在做，会定期将业务中的慢查询反馈给我们。"></a>维在做，会定期将业务中的慢查询反馈给我们。</h3><p>慢查询的优化首先要搞明白慢的原因是什么？是查询条件没有命中索引？是load了不需要的数据列？还<br>是数据量太大？</p><p>所以优化也是针对这三个方向来的，</p><figure class="highlight gauss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">首先分析语句，看看是否<span class="keyword">load</span>了额外的数据，可能是查询了多余的行并且抛弃掉了，可能是加载</span><br><span class="line">了许多结果中并不需要的列，对语句进行分析以及重写。</span><br><span class="line">分析语句的执行计划，然后获得其使用索引的情况，之后修改语句或者修改索引，使得语句可以尽</span><br><span class="line">可能的命中索引。</span><br><span class="line">如果对语句的优化已经无法进行，可以考虑表中的数据量是否太大，如果是的话可以进行横向或者</span><br><span class="line">纵向的分表。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">当一个事务试图对整个表进行加排它锁之前，首先需要获得这个表的意向排它锁。</span><br></pre></td></tr></tbody></table></figure><h2 id="事务的基本特性和隔离级别"><a href="#事务的基本特性和隔离级别" class="headerlink" title="事务的基本特性和隔离级别"></a>事务的基本特性和隔离级别</h2><h3 id="事务基本特性ACID分别是："><a href="#事务基本特性ACID分别是：" class="headerlink" title="事务基本特性ACID分别是："></a>事务基本特性ACID分别是：</h3><h3 id="原子性-指的是一个事务中的操作要么全部成功，要么全部失败。"><a href="#原子性-指的是一个事务中的操作要么全部成功，要么全部失败。" class="headerlink" title="原子性 指的是一个事务中的操作要么全部成功，要么全部失败。"></a>原子性 指的是一个事务中的操作要么全部成功，要么全部失败。</h3><h3 id="一致性-指的是数据库总是从一个一致性的状态转换到另外一个一致性的状态。比如A转账给B100块钱，"><a href="#一致性-指的是数据库总是从一个一致性的状态转换到另外一个一致性的状态。比如A转账给B100块钱，" class="headerlink" title="一致性 指的是数据库总是从一个一致性的状态转换到另外一个一致性的状态。比如A转账给B100块钱，"></a>一致性 指的是数据库总是从一个一致性的状态转换到另外一个一致性的状态。比如A转账给B100块钱，</h3><h3 id="假设A只有-90-块，支付之前我们数据库里的数据都是符合约束的-但是如果事务执行成功了-我们的数据库"><a href="#假设A只有-90-块，支付之前我们数据库里的数据都是符合约束的-但是如果事务执行成功了-我们的数据库" class="headerlink" title="假设A只有 90 块，支付之前我们数据库里的数据都是符合约束的,但是如果事务执行成功了,我们的数据库"></a>假设A只有 90 块，支付之前我们数据库里的数据都是符合约束的,但是如果事务执行成功了,我们的数据库</h3><h3 id="数据就破坏约束了-因此事务不能成功-这里我们说事务提供了一致性的保证"><a href="#数据就破坏约束了-因此事务不能成功-这里我们说事务提供了一致性的保证" class="headerlink" title="数据就破坏约束了,因此事务不能成功,这里我们说事务提供了一致性的保证"></a>数据就破坏约束了,因此事务不能成功,这里我们说事务提供了一致性的保证</h3><h3 id="隔离性-指的是一个事务的修改在最终提交前，对其他事务是不可见的。"><a href="#隔离性-指的是一个事务的修改在最终提交前，对其他事务是不可见的。" class="headerlink" title="隔离性 指的是一个事务的修改在最终提交前，对其他事务是不可见的。"></a>隔离性 指的是一个事务的修改在最终提交前，对其他事务是不可见的。</h3><h3 id="持久性-指的是一旦事务提交，所做的修改就会永久保存到数据库中。"><a href="#持久性-指的是一旦事务提交，所做的修改就会永久保存到数据库中。" class="headerlink" title="持久性 指的是一旦事务提交，所做的修改就会永久保存到数据库中。"></a>持久性 指的是一旦事务提交，所做的修改就会永久保存到数据库中。</h3><h3 id="隔离性有-4-个隔离级别，分别是："><a href="#隔离性有-4-个隔离级别，分别是：" class="headerlink" title="隔离性有 4 个隔离级别，分别是："></a>隔离性有 4 个隔离级别，分别是：</h3><figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">read</span> uncommit 读未提交，可能会读到其他事务未提交的数据，也叫做脏读。</span><br><span class="line">用户本来应该读取到id=<span class="number">1</span>的用户age应该是 <span class="number">10</span> ，结果读取到了其他事务还没有提交的事务，结果读</span><br><span class="line">取结果age=<span class="number">20</span>，这就是脏读。</span><br><span class="line"><span class="keyword">read</span> <span class="keyword">commit</span> 读已提交，两次读取结果不一致，叫做不可重复读。</span><br><span class="line">不可重复读解决了脏读的问题，他只会读取已经提交的事务。</span><br><span class="line">用户开启事务读取id=<span class="number">1</span>用户，查询到age=<span class="number">10</span>，再次读取发现结果=<span class="number">20</span>，在同一个事务里同一个查</span><br><span class="line">询读取到不同的结果叫做不可重复读。</span><br><span class="line"><span class="keyword">repeatable</span> <span class="keyword">read</span> 可重复复读，这是mysql的默认级别，就是每次读取结果都一样，但是有可能产</span><br><span class="line">生幻读。</span><br><span class="line"><span class="keyword">serializable</span> 串行，一般是不会使用的，他会给每一行读取的数据加锁，会导致大量超时和锁竞争</span><br><span class="line">的问题。</span><br></pre></td></tr></tbody></table></figure><p>脏读(Drity Read)：某个事务已更新一份数据，另一个事务在此时读取了同一份数据，由于某些原因，<br>前一个RollBack了操作，则后一个事务所读取的数据就会是不正确的。</p><p>不可重复读(Non-repeatable read):在一个事务的两次查询之中数据不一致，这可能是两次查询过程中<br>间插入了一个事务更新的原有的数据。</p><p>幻读(Phantom Read):在一个事务的两次查询中数据笔数不一致，例如有一个事务查询了几列(Row)数<br>据，而另一个事务却在此时插入了新的几列数据，先前的事务在接下来的查询中，就会发现有几列数据<br>是它先前所没有的。</p><h2 id="ACID靠什么保证的？"><a href="#ACID靠什么保证的？" class="headerlink" title="ACID靠什么保证的？"></a>ACID靠什么保证的？</h2><p>A原子性由undo log日志保证，它记录了需要回滚的日志信息，事务回滚时撤销已经执行成功的sql</p><p>C一致性由其他三大特性保证、程序代码要保证业务上的一致性</p><h3 id="I隔离性由MVCC来保证"><a href="#I隔离性由MVCC来保证" class="headerlink" title="I隔离性由MVCC来保证"></a>I隔离性由MVCC来保证</h3><p>D持久性由内存+redo log来保证，mysql修改数据同时在内存和redo log记录这次操作，宕机的时候可<br>以从redo log恢复</p><p>redolog的刷盘会在系统空闲时进行</p><h2 id="什么是MVCC"><a href="#什么是MVCC" class="headerlink" title="什么是MVCC"></a>什么是MVCC</h2><h3 id="多版本并发控制：读取数据时通过一种类似快照的方式将数据保存下来，这样读锁就和写锁不冲突了，"><a href="#多版本并发控制：读取数据时通过一种类似快照的方式将数据保存下来，这样读锁就和写锁不冲突了，" class="headerlink" title="多版本并发控制：读取数据时通过一种类似快照的方式将数据保存下来，这样读锁就和写锁不冲突了，"></a>多版本并发控制：读取数据时通过一种类似快照的方式将数据保存下来，这样读锁就和写锁不冲突了，</h3><p>不同的事务session会看到自己特定版本的数据，版本链</p><p>MVCC只在 READ COMMITTED 和 REPEATABLE READ 两个隔离级别下工作。其他两个隔离级别够和<br>MVCC不兼容, 因为 READ UNCOMMITTED 总是读取最新的数据行, 而不是符合当前事务版本的数据<br>行。而 SERIALIZABLE 则会对所有读取的行都加锁。</p><h3 id="聚簇索引记录中有两个必要的隐藏列："><a href="#聚簇索引记录中有两个必要的隐藏列：" class="headerlink" title="聚簇索引记录中有两个必要的隐藏列："></a>聚簇索引记录中有两个必要的隐藏列：</h3><p><strong>trx_id</strong> ：用来存储每次对某条聚簇索引记录进行修改的时候的事务id。</p><p><strong>roll_pointer</strong> ：每次对哪条聚簇索引记录有修改的时候，都会把老版本写入undo日志中。这个<br>roll_pointer就是存了一个指针，它指向这条聚簇索引记录的上一个版本的位置，通过它来获得上一个<br>版本的记录信息。(注意插入操作的undo日志没有这个属性，因为它没有老版本)</p><p><strong>已提交读和可重复读的区别就在于它们生成ReadView的策略不同</strong> 。</p><p>开始事务时创建readview，readView维护当前活动的事务id，即未提交的事务id，排序生成一个数组</p><p>访问数据，获取数据中的事务id（获取的是事务id最大的记录），对比readview：</p><figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">InnoDB redo <span class="keyword">log</span> 写盘，InnoDB 事务进入 <span class="keyword">prepare</span> 状态。</span><br><span class="line">如果前面 <span class="keyword">prepare</span> 成功，binlog 写盘，再继续将事务日志持久化到 binlog，如果持久化成功，那么</span><br><span class="line">InnoDB 事务则进入 <span class="keyword">commit</span> 状态(在 redo <span class="keyword">log</span> 里面写一个 <span class="keyword">commit</span> 记录)</span><br></pre></td></tr></tbody></table></figure><p>如果在readview的左边（比readview都小），可以访问（在左边意味着该事务已经提交）</p><p>如果在readview的右边（比readview都大）或者就在readview中，不可以访问，获取roll_pointer，取<br>上一版本重新对比（在右边意味着，该事务在readview生成之后出现，在readview中意味着该事务还<br>未提交）</p><p>已提交读隔离级别下的事务在每次查询的开始都会生成一个独立的ReadView,而可重复读隔离级别则在<br>第一次读的时候生成一个ReadView，之后的读都复用之前的ReadView。</p><p>这就是Mysql的MVCC,通过版本链，实现多版本，可并发读-写，写-读。通过ReadView生成策略的不同<br>实现不同的隔离级别。</p><h2 id="分表后非sharding-key的查询怎么处理，分表后的排序？"><a href="#分表后非sharding-key的查询怎么处理，分表后的排序？" class="headerlink" title="分表后非sharding_key的查询怎么处理，分表后的排序？"></a>分表后非sharding_key的查询怎么处理，分表后的排序？</h2><figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> 可以做一个mapping表，比如这时候商家要查询订单列表怎么办呢？不带user<span class="emphasis">_id查询的话你总不</span></span><br><span class="line"><span class="emphasis">能扫全表吧？所以我们可以做一个映射关系表，保存商家和用户的关系，查询的时候先通过商家查</span></span><br><span class="line"><span class="emphasis">询到用户列表，再通过user_</span>id去查询。</span><br><span class="line"><span class="bullet">2.</span> 宽表，对数据实时性要求不是很高的场景，比如查询订单列表，可以把订单表同步到离线（实时）</span><br><span class="line">数仓，再基于数仓去做成一张宽表，再基于其他如es提供查询服务。</span><br><span class="line"><span class="bullet">3.</span> 数据量不是很大的话，比如后台的一些查询之类的，也可以通过多线程扫表，然后再聚合结果的方</span><br><span class="line">式来做。或者异步的形式也是可以的。</span><br></pre></td></tr></tbody></table></figure><p>union</p><p>排序字段是唯一索引：</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">首先第一页的查询：将各表的结果集进行合并，然后再次排序</span><br><span class="line">第二页及以后的查询，需要传入上一页排序字段的最后一个值，及排序方式。</span><br><span class="line">根据排序方式，及这个值进行查询。如排序字段<span class="type">date</span>，上一页最后值为 <span class="number">3</span> ，排序方式降序。查询的</span><br><span class="line">时候<span class="keyword">sql</span>为<span class="keyword">select</span> ... <span class="keyword">from</span> <span class="keyword">table</span> <span class="keyword">where</span> <span class="type">date</span> <span class="operator">&lt;</span> <span class="number">3</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="type">date</span> <span class="keyword">desc</span> limit <span class="number">0</span>,<span class="number">10</span>。这样再将几个表的</span><br><span class="line">结果合并排序即可。</span><br></pre></td></tr></tbody></table></figure><h2 id="mysql主从同步原理"><a href="#mysql主从同步原理" class="headerlink" title="mysql主从同步原理"></a>mysql主从同步原理</h2><p>mysql主从同步的过程：</p><p>Mysql的主从复制中主要有三个线程：master（binlog dump thread）、slave（I/O thread 、SQL<br>thread），Master一条线程和Slave中的两条线程。</p><figure class="highlight lua"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">主节点 binlog，主从复制的基础是主库记录数据库的所有变更记录到 binlog。binlog 是数据库服</span><br><span class="line">务器启动的那一刻起，保存所有修改数据库结构或内容的一个文件。</span><br><span class="line">主节点 <span class="built_in">log</span> <span class="built_in">dump</span> 线程，当 binlog 有变动时，<span class="built_in">log</span> <span class="built_in">dump</span> 线程读取其内容并发送给从节点。</span><br><span class="line">从节点 I/O线程接收 binlog 内容，并将其写入到 relay <span class="built_in">log</span> 文件中。</span><br><span class="line">从节点的SQL 线程读取 relay <span class="built_in">log</span> 文件内容对数据更新进行重放，最终保证主从数据库的一致性。</span><br></pre></td></tr></tbody></table></figure><p>注：主从节点使用 binglog 文件 + position 偏移量来定位主从同步的位置，从节点会保存其已接收到的<br>偏移量，如果从节点发生宕机重启，则会自动从 position 的位置发起同步。</p><p>由于mysql默认的复制方式是异步的，主库把日志发送给从库后不关心从库是否已经处理，这样会产生<br>一个问题就是假设主库挂了，从库处理失败了，这时候从库升为主库后，日志就丢失了。由此产生两个<br>概念。</p><p><strong>全同步复制</strong></p><p>主库写入binlog后强制同步日志到从库，所有的从库都执行完成后才返回给客户端，但是很显然这个方<br>式的话性能会受到严重影响。</p><p><strong>半同步复制</strong></p><p>和全同步不同的是，半同步复制的逻辑是这样，从库写入日志成功后返回ACK确认给主库，主库收到至<br>少一个从库的确认就认为写操作完成。</p><h2 id="简述MyISAM和InnoDB的区别"><a href="#简述MyISAM和InnoDB的区别" class="headerlink" title="简述MyISAM和InnoDB的区别"></a>简述MyISAM和InnoDB的区别</h2><p><strong>MyISAM：</strong></p><p>不支持事务，但是每次查询都是原子的；</p><p>支持表级锁，即每次操作是对整个表加锁；</p><p>存储表的总行数；</p><p>一个MYISAM表有三个文件：索引文件、表结构文件、数据文件；</p><p>采用非聚集索引，索引文件的数据域存储指向数据文件的指针。辅索引与主索引基本一致，但是辅索引<br>不用保证唯一性。</p><p><strong>InnoDb：</strong></p><p>支持ACID的事务，支持事务的四种隔离级别；</p><p>支持行级锁及外键约束：因此可以支持写并发；</p><p>不存储总行数；</p><p>一个InnoDb引擎存储在一个文件空间（共享表空间，表大小不受操作系统控制，一个表可能分布在多<br>个文件里），也有可能为多个（设置为独立表空，表大小受操作系统文件大小限制，一般为2G），受操<br>作系统文件大小的限制；</p><p>主键索引采用聚集索引（索引的数据域存储数据文件本身），辅索引的数据域存储主键的值；因此从辅<br>索引查找数据，需要先通过辅索引找到主键值，再访问辅索引；最好使用自增主键，防止插入数据时，<br>为维持B+树结构，文件的大调整。</p><h2 id="简述mysql中索引类型及对数据库的性能的影响"><a href="#简述mysql中索引类型及对数据库的性能的影响" class="headerlink" title="简述mysql中索引类型及对数据库的性能的影响"></a>简述mysql中索引类型及对数据库的性能的影响</h2><h3 id="普通索引：允许被索引的数据列包含重复的值。"><a href="#普通索引：允许被索引的数据列包含重复的值。" class="headerlink" title="普通索引：允许被索引的数据列包含重复的值。"></a>普通索引：允许被索引的数据列包含重复的值。</h3><h3 id="唯一索引：可以保证数据记录的唯一性。"><a href="#唯一索引：可以保证数据记录的唯一性。" class="headerlink" title="唯一索引：可以保证数据记录的唯一性。"></a>唯一索引：可以保证数据记录的唯一性。</h3><h3 id="主键：是一种特殊的唯一索引，在一张表中只能定义一个主键索引，主键用于唯一标识一条记录，使用"><a href="#主键：是一种特殊的唯一索引，在一张表中只能定义一个主键索引，主键用于唯一标识一条记录，使用" class="headerlink" title="主键：是一种特殊的唯一索引，在一张表中只能定义一个主键索引，主键用于唯一标识一条记录，使用"></a>主键：是一种特殊的唯一索引，在一张表中只能定义一个主键索引，主键用于唯一标识一条记录，使用</h3><h3 id="关键字-PRIMARY-KEY-来创建。"><a href="#关键字-PRIMARY-KEY-来创建。" class="headerlink" title="关键字 PRIMARY KEY 来创建。"></a>关键字 PRIMARY KEY 来创建。</h3><p>联合索引：索引可以覆盖多个数据列，如像INDEX(columnA, columnB)索引。</p><p>全文索引：通过建立倒排索引,可以极大的提升检索效率,解决判断字段是否包含的问题，是目前搜索引<br>擎使用的一种关键技术。可以通过ALTER TABLE table_name ADD FULLTEXT (column);创建全文索引</p><h3 id="索引可以极大的提高数据的查询速度。"><a href="#索引可以极大的提高数据的查询速度。" class="headerlink" title="索引可以极大的提高数据的查询速度。"></a>索引可以极大的提高数据的查询速度。</h3><h3 id="通过使用索引，可以在查询的过程中，使用优化隐藏器，提高系统的性能。"><a href="#通过使用索引，可以在查询的过程中，使用优化隐藏器，提高系统的性能。" class="headerlink" title="通过使用索引，可以在查询的过程中，使用优化隐藏器，提高系统的性能。"></a>通过使用索引，可以在查询的过程中，使用优化隐藏器，提高系统的性能。</h3><h3 id="但是会降低插入、删除、更新表的速度，因为在执行这些写操作时，还要操作索引文件"><a href="#但是会降低插入、删除、更新表的速度，因为在执行这些写操作时，还要操作索引文件" class="headerlink" title="但是会降低插入、删除、更新表的速度，因为在执行这些写操作时，还要操作索引文件"></a>但是会降低插入、删除、更新表的速度，因为在执行这些写操作时，还要操作索引文件</h3><h3 id="索引需要占物理空间，除了数据表占数据空间之外，每一个索引还要占一定的物理空间，如果要建立聚"><a href="#索引需要占物理空间，除了数据表占数据空间之外，每一个索引还要占一定的物理空间，如果要建立聚" class="headerlink" title="索引需要占物理空间，除了数据表占数据空间之外，每一个索引还要占一定的物理空间，如果要建立聚"></a>索引需要占物理空间，除了数据表占数据空间之外，每一个索引还要占一定的物理空间，如果要建立聚</h3><h3 id="簇索引，那么需要的空间就会更大，如果非聚集索引很多，一旦聚集索引改变，那么所有非聚集索引都"><a href="#簇索引，那么需要的空间就会更大，如果非聚集索引很多，一旦聚集索引改变，那么所有非聚集索引都" class="headerlink" title="簇索引，那么需要的空间就会更大，如果非聚集索引很多，一旦聚集索引改变，那么所有非聚集索引都"></a>簇索引，那么需要的空间就会更大，如果非聚集索引很多，一旦聚集索引改变，那么所有非聚集索引都</h3><h3 id="会跟着变。"><a href="#会跟着变。" class="headerlink" title="会跟着变。"></a>会跟着变。</h3><h2 id="mysql执行计划怎么看"><a href="#mysql执行计划怎么看" class="headerlink" title="mysql执行计划怎么看"></a>mysql执行计划怎么看</h2><p>执行计划就是sql的执行查询的顺序，以及如何使用索引查询，返回的结果集的行数</p><p>EXPLAIN SELECT * from A where X=? and Y=?</p><p>1 。id ：是一个有顺序的编号，是查询的顺序号，有几个 select 就显示几行。id的顺序是按 select 出现<br>的顺序增长的。id列的值越大执行优先级越高越先执行，id列的值相同则从上往下执行，id列的值为<br>NULL最后执行。</p><p>2 。selectType 表示查询中每个select子句的类型</p><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SIMPLE： 表示此查询不包含 <span class="keyword">UNION</span> 查询或子查询</span><br><span class="line"><span class="keyword">PRIMARY</span>： 表示此查询是最外层的查询（包含子查询）</span><br><span class="line">SUBQUERY： 子查询中的第一个 <span class="keyword">SELECT</span></span><br><span class="line"><span class="keyword">UNION</span>： 表示此查询是 <span class="keyword">UNION</span> 的第二或随后的查询</span><br><span class="line">DEPENDENT <span class="keyword">UNION</span>： <span class="keyword">UNION</span> 中的第二个或后面的查询语句, 取决于外面的查询</span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">RESULT</span>, <span class="keyword">UNION</span> 的结果</span><br><span class="line">DEPENDENT SUBQUERY: 子查询中的第一个 <span class="keyword">SELECT</span>, 取决于外面的查询. 即子查询依赖于外层查</span><br><span class="line">询的结果.</span><br><span class="line">DERIVED：衍生，表示导出表的<span class="keyword">SELECT</span>（<span class="keyword">FROM</span>子句的子查询）</span><br></pre></td></tr></tbody></table></figure><p>3.table：表示该语句查询的表</p><p>4.type：优化sql的重要字段，也是我们判断sql性能和优化程度重要指标。他的取值类型范围：</p><figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const：通过索引一次命中，匹配一行数据</span><br><span class="line"><span class="keyword">system</span>: 表中只有一行记录，相当于系统表；</span><br><span class="line">eq_ref：唯一性索引扫描，对于每个索引键，表中只有一条记录与之匹配</span><br><span class="line"><span class="keyword">ref</span>: 非唯一性索引扫描,返回匹配某个值的所有</span><br><span class="line">range: 只检索给定范围的行，使用一个索引来选择行，一般用于<span class="keyword">between</span>、&lt;、&gt;；</span><br><span class="line"><span class="keyword">index</span>: 只遍历索引树；</span><br><span class="line"><span class="keyword">ALL</span>: 表示全表扫描，这个类型的查询是性能最差的查询之一。 那么基本就是随着表的数量增多，</span><br><span class="line">执行效率越慢。</span><br></pre></td></tr></tbody></table></figure><p><strong>执行效率：</strong></p><p><strong>ALL &lt; index &lt; range&lt; ref &lt; eq_ref &lt; const &lt; system。最好是避免ALL和index</strong></p><p>5.possible_keys：它表示Mysql在执行该sql语句的时候，可能用到的索引信息，仅仅是可能，实际不一<br>定会用到。</p><p>6.key：此字段是 mysql 在当前查询时所真正使用到的索引。 他是possible_keys的子集</p><p>7.key_len：表示查询优化器使用了索引的字节数，这个字段可以评估组合索引是否完全被使用，这也是<br>我们优化sql时，评估索引的重要指标</p><p>9.rows：mysql 查询优化器根据统计信息，估算该sql返回结果集需要扫描读取的行数，这个值相关重<br>要，索引优化之后，扫描读取的行数越多，说明索引设置不对，或者字段传入的类型之类的问题，说明<br>要优化空间越大</p><p>10.filtered：返回结果的行占需要读到的行(rows列的值)的百分比，就是百分比越高，说明需要查询到<br>数据越准确， 百分比越小，说明查询到的数据量大，而结果集很少</p><p>11.extra</p><figure class="highlight powershell"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> filesort ：表示 mysql 对结果集进行外部排序，不能通过索引顺序达到排序效果。一般有</span><br><span class="line"><span class="keyword">using</span> filesort都建议优化去掉，因为这样的查询 cpu 资源消耗大，延时大。</span><br><span class="line"><span class="keyword">using</span> index：覆盖索引扫描，表示查询在索引树中就可查找所需数据，不用扫描表数据文件，往</span><br><span class="line">往说明性能不错。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> <span class="keyword">temporary</span>：查询有使用临时表, 一般出现于排序， 分组和多表 <span class="keyword">join</span> 的情况， 查询效率不</span><br><span class="line">高，建议优化。</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">where</span> ：<span class="keyword">sql</span>使用了<span class="keyword">where</span>过滤,效率较高。</span><br></pre></td></tr></tbody></table></figure><h1 id="redis"><a href="#redis" class="headerlink" title="redis"></a>redis</h1><h2 id="RDB-和-AOF-机制"><a href="#RDB-和-AOF-机制" class="headerlink" title="RDB 和 AOF 机制"></a>RDB 和 AOF 机制</h2><p>RDB：Redis DataBase</p><p>在指定的时间间隔内将内存中的数据集快照写入磁盘，实际操作过程是fork一个子进程，先将数据集写<br>入临时文件，写入成功后，再替换之前的文件，用二进制压缩存储。</p><p><strong>优点：</strong></p><p>1 、整个Redis数据库将只包含一个文件 dump.rdb，方便持久化。</p><p>2 、容灾性好，方便备份。</p><p>3 、性能最大化，fork 子进程来完成写操作，让主进程继续处理命令，所以是 IO 最大化。使用单独子进<br>程来进行持久化，主进程不会进行任何 IO 操作，保证了 redis 的高性能</p><p>4.相对于数据集大时，比 AOF 的启动效率更高。</p><p><strong>缺点：</strong></p><p>1 、数据安全性低。RDB 是间隔一段时间进行持久化，如果持久化之间 redis 发生故障，会发生数据丢<br>失。所以这种方式更适合数据要求不严谨的时候)</p><p>2 、由于RDB是通过fork子进程来协助完成数据持久化工作的，因此，如果当数据集较大时，可能会导<br>致整个服务器停止服务几百毫秒，甚至是 1 秒钟。</p><p>AOF：Append Only File</p><p>以日志的形式记录服务器所处理的每一个写、删除操作，查询操作不会记录，以文本的方式记录，可以<br>打开文件看到详细的操作记录</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">优点：</span><br></pre></td></tr></tbody></table></figure><p>1 、数据安全，Redis中提供了 3 中同步策略，即每秒同步、每修改同步和不同步。事实上，每秒同步也<br>是异步完成的，其效率也是非常高的，所差的是一旦系统出现宕机现象，那么这一秒钟之内修改的数据<br>将会丢失。而每修改同步，我们可以将其视为同步持久化，即每次发生的数据变化都会被立即记录到磁<br>盘中。。</p><p>2 、通过 append 模式写文件，即使中途服务器宕机也不会破坏已经存在的内容，可以通过 redis-<br>check-aof 工具解决数据一致性问题。</p><p>3 、AOF 机制的 rewrite 模式。定期对AOF文件进行重写，以达到压缩的目的</p><h3 id="缺点："><a href="#缺点：" class="headerlink" title="缺点："></a>缺点：</h3><h3 id="1-、AOF-文件比-RDB-文件大，且恢复速度慢。"><a href="#1-、AOF-文件比-RDB-文件大，且恢复速度慢。" class="headerlink" title="1 、AOF 文件比 RDB 文件大，且恢复速度慢。"></a>1 、AOF 文件比 RDB 文件大，且恢复速度慢。</h3><p>2 、数据集大的时候，比 rdb 启动效率低。</p><p>3 、运行效率没有RDB高</p><h3 id="AOF文件比RDB更新频率高，优先使用AOF还原数据。"><a href="#AOF文件比RDB更新频率高，优先使用AOF还原数据。" class="headerlink" title="AOF文件比RDB更新频率高，优先使用AOF还原数据。"></a>AOF文件比RDB更新频率高，优先使用AOF还原数据。</h3><h3 id="AOF比RDB更安全也更大"><a href="#AOF比RDB更安全也更大" class="headerlink" title="AOF比RDB更安全也更大"></a>AOF比RDB更安全也更大</h3><h3 id="RDB性能比AOF好"><a href="#RDB性能比AOF好" class="headerlink" title="RDB性能比AOF好"></a>RDB性能比AOF好</h3><h3 id="如果两个都配了优先加载AOF"><a href="#如果两个都配了优先加载AOF" class="headerlink" title="如果两个都配了优先加载AOF"></a>如果两个都配了优先加载AOF</h3><h2 id="Redis的过期键的删除策略"><a href="#Redis的过期键的删除策略" class="headerlink" title="Redis的过期键的删除策略"></a>Redis的过期键的删除策略</h2><p>Redis是key-value数据库，我们可以设置Redis中缓存的key的过期时间。Redis的过期策略就是指当<br>Redis中缓存的key过期了，Redis如何处理。</p><figure class="highlight gauss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">惰性过期 ：只有当访问一个<span class="built_in">key</span>时，才会判断该<span class="built_in">key</span>是否已过期，过期则清除。该策略可以最大化</span><br><span class="line">地节省CPU资源，却对内存非常不友好。极端情况可能出现大量的过期<span class="built_in">key</span>没有再次被访问，从而</span><br><span class="line">不会被清除，占用大量内存。</span><br><span class="line">定期过期 ：每隔一定的时间，会扫描一定数量的数据库的expires字典中一定数量的<span class="built_in">key</span>，并清除其</span><br><span class="line">中已过期的<span class="built_in">key</span>。该策略是一个折中方案。通过调整定时扫描的时间间隔和每次扫描的限定耗时，</span><br><span class="line">可以在不同情况下使得CPU和内存资源达到最优的平衡效果。</span><br></pre></td></tr></tbody></table></figure><p>(expires字典会保存所有设置了过期时间的key的过期时间数据，其中，key是指向键空间中的某个键的<br>指针，value是该键的毫秒精度的UNIX时间戳表示的过期时间。键空间是指该Redis集群中保存的所有<br>键。)</p><p>Redis中同时使用了惰性过期和定期过期两种过期策略。</p><h2 id="Redis线程模型、单线程快的原因"><a href="#Redis线程模型、单线程快的原因" class="headerlink" title="Redis线程模型、单线程快的原因"></a>Redis线程模型、单线程快的原因</h2><p>Redis基于Reactor模式开发了网络事件处理器，这个处理器叫做文件事件处理器 file event handler。<br>这个文件事件处理器，它是单线程的，所以 Redis 才叫做单线程的模型，它采用IO多路复用机制来同时<br>监听多个Socket，根据Socket上的事件类型来选择对应的事件处理器来处理这个事件。可以实现高性能<br>的网络通信模型，又可以跟内部其他单线程的模块进行对接，保证了 Redis 内部的线程模型的简单性。</p><p>文件事件处理器的结构包含 4 个部分：多个Socket、IO多路复用程序、文件事件分派器以及事件处理器<br>（命令请求处理器、命令回复处理器、连接应答处理器等）。<br>多个 Socket 可能并发的产生不同的操作，每个操作对应不同的文件事件，但是IO多路复用程序会监听<br>多个 Socket，会将 Socket 放入一个队列中排队，每次从队列中取出一个 Socket 给事件分派器，事件<br>分派器把 Socket 给对应的事件处理器。<br>然后一个 Socket 的事件处理完之后，IO多路复用程序才会将队列中的下一个 Socket 给事件分派器。文<br>件事件分派器会根据每个 Socket 当前产生的事件，来选择对应的事件处理器来处理。</p><h3 id="单线程快的原因："><a href="#单线程快的原因：" class="headerlink" title="单线程快的原因："></a>单线程快的原因：</h3><h3 id="1-）纯内存操作"><a href="#1-）纯内存操作" class="headerlink" title="1 ）纯内存操作"></a>1 ）纯内存操作</h3><h3 id="2-）核心是基于非阻塞的IO多路复用机制"><a href="#2-）核心是基于非阻塞的IO多路复用机制" class="headerlink" title="2 ）核心是基于非阻塞的IO多路复用机制"></a>2 ）核心是基于非阻塞的IO多路复用机制</h3><h3 id="3-）单线程反而避免了多线程的频繁上下文切换带来的性能问题"><a href="#3-）单线程反而避免了多线程的频繁上下文切换带来的性能问题" class="headerlink" title="3 ）单线程反而避免了多线程的频繁上下文切换带来的性能问题"></a>3 ）单线程反而避免了多线程的频繁上下文切换带来的性能问题</h3><h2 id="简述Redis事务实现"><a href="#简述Redis事务实现" class="headerlink" title="简述Redis事务实现"></a>简述Redis事务实现</h2><h3 id="1-、事务开始"><a href="#1-、事务开始" class="headerlink" title="1 、事务开始"></a>1 、事务开始</h3><p><em>MULTI</em> 命令的执行，标识着一个事务的开始。 <em>MULTI</em> 命令会将客户端状态的flags属性中打开<br>REDIS_MULTI标识来完成的。</p><p><strong>2 、命令入队</strong></p><p>当一个客户端切换到事务状态之后，服务器会根据这个客户端发送来的命令来执行不同的操作。如果客<br>户端发送的命令为 <em>MULTI</em> 、 <em>EXEC</em> 、 <em>WATCH</em> 、 <em>DISCARD</em> 中的一个，立即执行这个命令，否则将命令放入一<br>个事务队列里面，然后向客户端返回QUEUED回复</p><figure class="highlight gauss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">如果客户端发送的命令为 <span class="built_in">EXEC</span>、DISCARD、WATCH、MULTI 四个命令的其中一个，那么服务器</span><br><span class="line">立即执行这个命令。</span><br><span class="line">如果客户端发送的是四个命令以外的其他命令，那么服务器并不立即执行这个命令。</span><br><span class="line">首先检查此命令的格式是否正确，如果不正确，服务器会在客户端状态（redisClient）的 flags 属</span><br><span class="line">性关闭 REDIS_MULTI 标识，并且返回错误信息给客户端。</span><br><span class="line">如果正确，将这个命令放入一个事务队列里面，然后向客户端返回 QUEUED 回复</span><br></pre></td></tr></tbody></table></figure><p>事务队列是按照FIFO的方式保存入队的命令</p><p><strong>3 、事务执行</strong></p><p>客户端发送 EXEC 命令，服务器执行 EXEC 命令逻辑。</p><figure class="highlight oxygene"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">如果客户端状态的 <span class="keyword">flags</span> 属性不包含 REDIS_MULTI 标识，或者包含 REDIS_DIRTY_CAS 或者</span><br><span class="line">REDIS_DIRTY_EXEC 标识，那么就直接取消事务的执行。</span><br><span class="line">否则客户端处于事务状态（<span class="keyword">flags</span> 有 REDIS_MULTI 标识），服务器会遍历客户端的事务队列，然</span><br><span class="line">后执行事务队列中的所有命令，最后将返回结果全部返回给客户端；</span><br></pre></td></tr></tbody></table></figure><p>redis 不支持事务回滚机制，但是它会检查每一个事务中的命令是否错误。</p><p>Redis 事务不支持检查那些程序员自己逻辑错误。例如对 String 类型的数据库键执行对 HashMap 类型<br>的操作！</p><figure class="highlight smali"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">WATCH 命令是一个乐观锁，可以为 Redis 事务提供<span class="built_in"> check-and-set </span>（CAS）行为。可以监控一个</span><br><span class="line">或多个键，一旦其中有一个键被修改（或删除），之后的事务就不会执行，监控一直持续到EXEC</span><br><span class="line">命令。</span><br><span class="line">MULTI命令用于开启一个事务，它总是返回OK。MULTI执行之后，客户端可以继续向服务器发送</span><br><span class="line">任意多条命令，这些命令不会立即被执行，而是被放到一个队列中，当EXEC命令被调用时，所有</span><br><span class="line">队列中的命令才会被执行。</span><br><span class="line">EXEC：执行所有事务块内的命令。返回事务块内所有命令的返回值，按命令执行的先后顺序排</span><br><span class="line">列。当操作被打断时，返回空值 nil 。</span><br><span class="line">通过调用DISCARD，客户端可以清空事务队列，并放弃执行事务， 并且客户端会从事务状态中退</span><br><span class="line">出。</span><br><span class="line">UNWATCH命令可以取消watch对所有key的监控。</span><br></pre></td></tr></tbody></table></figure><h2 id="redis集群方案"><a href="#redis集群方案" class="headerlink" title="redis集群方案"></a>redis集群方案</h2><h3 id="主从"><a href="#主从" class="headerlink" title="主从"></a>主从</h3><h3 id="哨兵模式："><a href="#哨兵模式：" class="headerlink" title="哨兵模式："></a>哨兵模式：</h3><p>sentinel，哨兵是 redis 集群中非常重要的一个组件，主要有以下功能：</p><figure class="highlight crmsh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">集群监控：负责监控 redis <span class="keyword">master</span> <span class="title">和 slave</span> 进程是否正常工作。</span><br><span class="line">消息通知：如果某个 redis 实例有故障，那么哨兵负责发送消息作为报警通知给管理员。</span><br><span class="line">故障转移：如果 <span class="keyword">master</span> <span class="title">node</span> 挂掉了，会自动转移到 <span class="literal">slave</span> <span class="keyword">node</span> <span class="title">上。</span></span><br><span class="line"><span class="title">配置中心：如果故障转移发生了，通知 client</span> 客户端新的 <span class="keyword">master</span> <span class="title">地址。</span></span><br></pre></td></tr></tbody></table></figure><p>哨兵用于实现 redis 集群的高可用，本身也是分布式的，作为一个哨兵集群去运行，互相协同工作。</p><figure class="highlight crmsh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">故障转移时，判断一个 <span class="keyword">master</span> <span class="title">node</span> 是否宕机了，需要大部分的哨兵都同意才行，涉及到了分布</span><br><span class="line">式选举</span><br><span class="line">即使部分哨兵节点挂掉了，哨兵集群还是能正常工作的</span><br><span class="line">哨兵通常需要 <span class="number">3</span> 个实例，来保证自己的健壮性。</span><br><span class="line">哨兵 + redis 主从的部署架构，是不保证数据零丢失的，只能保证 redis 集群的高可用性。</span><br><span class="line">对于哨兵 + redis 主从这种复杂的部署架构，尽量在测试环境和生产环境，都进行充足的测试和演</span><br><span class="line">练。</span><br></pre></td></tr></tbody></table></figure><p>Redis Cluster是一种服务端Sharding技术，3.0版本开始正式提供。采用slot(槽)的概念，一共分成<br>16384 个槽。将请求发送到任意节点，接收到请求的节点会将查询请求发送到正确的节点上执行</p><p><strong>方案说明</strong></p><figure class="highlight gcode"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">通过哈希的方式，将数据分片，每个节点均分存储一定哈希槽<span class="comment">(哈希值)</span>区间的数据，默认分配了</span><br><span class="line"><span class="number">16384</span> 个槽位</span><br></pre></td></tr></tbody></table></figure><h3 id="每份数据分片会存储在多个互为主从的多节点上"><a href="#每份数据分片会存储在多个互为主从的多节点上" class="headerlink" title="每份数据分片会存储在多个互为主从的多节点上"></a>每份数据分片会存储在多个互为主从的多节点上</h3><h3 id="数据写入先写主节点，再同步到从节点-支持配置为阻塞同步"><a href="#数据写入先写主节点，再同步到从节点-支持配置为阻塞同步" class="headerlink" title="数据写入先写主节点，再同步到从节点(支持配置为阻塞同步)"></a>数据写入先写主节点，再同步到从节点(支持配置为阻塞同步)</h3><h3 id="同一分片多个节点间的数据不保持强一致性"><a href="#同一分片多个节点间的数据不保持强一致性" class="headerlink" title="同一分片多个节点间的数据不保持强一致性"></a>同一分片多个节点间的数据不保持强一致性</h3><figure class="highlight gauss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">读取数据时，当客户端操作的<span class="built_in">key</span>没有分配在该节点上时，redis会返回转向指令，指向正确的节点</span><br><span class="line">扩容时需要需要把旧节点的数据迁移一部分到新节点</span><br></pre></td></tr></tbody></table></figure><p>在 redis cluster 架构下，每个 redis 要放开两个端口号，比如一个是 6379 ，另外一个就是 加1w 的端<br>口号，比如 16379 。</p><p>16379 端口号是用来进行节点间通信的，也就是 cluster bus 的通信，用来进行故障检测、配置更新、<br>故障转移授权。cluster bus 用了另外一种二进制的协议，gossip 协议，用于节点间进行高效的数据交<br>换，占用更少的网络带宽和处理时间。</p><p><strong>优点</strong></p><figure class="highlight scss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">无中心架构，支持动态扩容，对业务透明</span><br><span class="line">具备Sentinel的监控和自动<span class="built_in">Failover</span>(故障转移)能力</span><br><span class="line">客户端不需要连接集群所有节点，连接集群中任何一个可用节点即可</span><br><span class="line">高性能，客户端直连redis服务，免去了proxy代理的损耗</span><br></pre></td></tr></tbody></table></figure><p><strong>缺点</strong></p><figure class="highlight gcode"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">运维也很复杂，数据迁移需要人工干预</span><br><span class="line">只能使用 <span class="number">0</span> 号数据库</span><br><span class="line">不支持批量操作<span class="comment">(pipeline管道操作)</span></span><br><span class="line">分布式逻辑和存储模块耦合等</span><br></pre></td></tr></tbody></table></figure><p>Redis Sharding是Redis Cluster出来之前，业界普遍使用的多Redis实例集群方法。其主要思想是采用<br>哈希算法将Redis数据的key进行散列，通过hash函数，特定的key会映射到特定的Redis节点上。Java<br>redis客户端驱动jedis，支持Redis Sharding功能，即ShardedJedis以及结合缓存池的<br>ShardedJedisPool</p><p><strong>优点</strong></p><p>优势在于非常简单，服务端的Redis实例彼此独立，相互无关联，每个Redis实例像单服务器一样运行，<br>非常容易线性扩展，系统的灵活性很强</p><p><strong>缺点</strong></p><p>由于sharding处理放到客户端，规模进一步扩大时给运维带来挑战。</p><p>客户端sharding不支持动态增删节点。服务端Redis实例群拓扑结构有变化时，每个客户端都需要更新<br>调整。连接不能共享，当应用规模增大时，资源浪费制约优化</p><h2 id="redis-主从复制的核心原理"><a href="#redis-主从复制的核心原理" class="headerlink" title="redis 主从复制的核心原理"></a>redis 主从复制的核心原理</h2><p>通过执行slaveof命令或设置slaveof选项，让一个服务器去复制另一个服务器的数据。主数据库可以进<br>行读写操作，当写操作导致数据变化时会自动将数据同步给从数据库。而从数据库一般是只读的，并接<br>受主数据库同步过来的数据。一个主数据库可以拥有多个从数据库，而一个从数据库只能拥有一个主数<br>据库。</p><p>全量复制：</p><p>（ 1 ）主节点通过bgsave命令fork子进程进行RDB持久化，该过程是非常消耗CPU、内存(页表复制)、硬<br>盘IO的</p><p>（ 2 ）主节点通过网络将RDB文件发送给从节点，对主从节点的带宽都会带来很大的消耗</p><p>（ 3 ）从节点清空老数据、载入新RDB文件的过程是阻塞的，无法响应客户端的命令；如果从节点执行<br>bgrewriteaof，也会带来额外的消耗</p><p>部分复制：</p><figure class="highlight scss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. 复制偏移量：执行复制的双方，主从节点，分别会维护一个复制偏移量offset</span><br><span class="line"><span class="number">2</span>. 复制积压缓冲区：主节点内部维护了一个固定长度的、先进先出(FIFO)队列 作为复制积压缓冲区，</span><br><span class="line">当主从节点offset的差距过大超过缓冲区长度时，将无法执行部分复制，只能执行全量复制。</span><br><span class="line"><span class="number">3</span>. 服务器运行<span class="built_in">ID</span>(runid)：每个Redis节点，都有其运行ID，运行ID由节点在启动时自动生成，主节点</span><br><span class="line">会将自己的运行ID发送给从节点，从节点会将主节点的运行ID存起来。 从节点Redis断开重连的时</span><br><span class="line">候，就是根据运行ID来判断同步的进度：</span><br><span class="line">如果从节点保存的runid与主节点现在的runid相同，说明主从节点之前同步过，主节点会继</span><br><span class="line">续尝试使用部分复制(到底能不能部分复制还要看offset和复制积压缓冲区的情况)；</span><br><span class="line">如果从节点保存的runid与主节点现在的runid不同，说明从节点在断线前同步的Redis节点并</span><br><span class="line">不是当前的主节点，只能进行全量复制。</span><br></pre></td></tr></tbody></table></figure><p>过程原理：</p><h2 id="缓存雪崩、缓存穿透、缓存击穿"><a href="#缓存雪崩、缓存穿透、缓存击穿" class="headerlink" title="缓存雪崩、缓存穿透、缓存击穿"></a>缓存雪崩、缓存穿透、缓存击穿</h2><h3 id="缓存雪崩是指缓存同一时间大面积的失效，所以，后面的请求都会落到数据库上，造成数据库短时间内"><a href="#缓存雪崩是指缓存同一时间大面积的失效，所以，后面的请求都会落到数据库上，造成数据库短时间内" class="headerlink" title="缓存雪崩是指缓存同一时间大面积的失效，所以，后面的请求都会落到数据库上，造成数据库短时间内"></a>缓存雪崩是指缓存同一时间大面积的失效，所以，后面的请求都会落到数据库上，造成数据库短时间内</h3><h3 id="承受大量请求而崩掉。"><a href="#承受大量请求而崩掉。" class="headerlink" title="承受大量请求而崩掉。"></a>承受大量请求而崩掉。</h3><h3 id="解决方案："><a href="#解决方案：" class="headerlink" title="解决方案："></a>解决方案：</h3><h3 id="缓存数据的过期时间设置随机，防止同一时间大量数据过期现象发生。"><a href="#缓存数据的过期时间设置随机，防止同一时间大量数据过期现象发生。" class="headerlink" title="缓存数据的过期时间设置随机，防止同一时间大量数据过期现象发生。"></a>缓存数据的过期时间设置随机，防止同一时间大量数据过期现象发生。</h3><h3 id="给每一个缓存数据增加相应的缓存标记，记录缓存是否失效，如果缓存标记失效，则更新数据缓"><a href="#给每一个缓存数据增加相应的缓存标记，记录缓存是否失效，如果缓存标记失效，则更新数据缓" class="headerlink" title="给每一个缓存数据增加相应的缓存标记，记录缓存是否失效，如果缓存标记失效，则更新数据缓"></a>给每一个缓存数据增加相应的缓存标记，记录缓存是否失效，如果缓存标记失效，则更新数据缓</h3><h3 id="存。"><a href="#存。" class="headerlink" title="存。"></a>存。</h3><h3 id="缓存预热"><a href="#缓存预热" class="headerlink" title="缓存预热"></a>缓存预热</h3><h3 id="互斥锁"><a href="#互斥锁" class="headerlink" title="互斥锁"></a>互斥锁</h3><h3 id="缓存穿透是指缓存和数据库中都没有的数据，导致所有的请求都落到数据库上，造成数据库短时间内承"><a href="#缓存穿透是指缓存和数据库中都没有的数据，导致所有的请求都落到数据库上，造成数据库短时间内承" class="headerlink" title="缓存穿透是指缓存和数据库中都没有的数据，导致所有的请求都落到数据库上，造成数据库短时间内承"></a>缓存穿透是指缓存和数据库中都没有的数据，导致所有的请求都落到数据库上，造成数据库短时间内承</h3><h3 id="受大量请求而崩掉。"><a href="#受大量请求而崩掉。" class="headerlink" title="受大量请求而崩掉。"></a>受大量请求而崩掉。</h3><h3 id="解决方案：-1"><a href="#解决方案：-1" class="headerlink" title="解决方案："></a>解决方案：</h3><figure class="highlight xquery"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">接口层增加校验，如用户鉴权校验<span class="built_in">，id</span>做基础校验<span class="built_in">，id</span>&lt;=<span class="number">0</span>的直接拦截；</span><br><span class="line">从缓存取不到的数据，在数据库中也没有取到，这时也可以<span class="built_in">将key</span>-<span class="keyword">value</span>对写<span class="built_in">为key</span>-null，缓存有</span><br><span class="line">效时间可以设置短点，如 <span class="number">30</span> 秒（设置太长会导致正常情况也没法使用）。这样可以防止攻击用户</span><br><span class="line">反复用同一<span class="built_in">个id</span>暴力攻击</span><br><span class="line">采用布隆过滤器，将所有可能存在的数据哈希到一个足够大的 bitmap 中，一个一定不存在的数据</span><br><span class="line">会被这个 bitmap 拦截掉，从而避免了对底层存储系统的查询压力</span><br></pre></td></tr></tbody></table></figure><h3 id="缓存击穿是指缓存中没有但数据库中有的数据（一般是缓存时间到期），这时由于并发用户特别多，同"><a href="#缓存击穿是指缓存中没有但数据库中有的数据（一般是缓存时间到期），这时由于并发用户特别多，同" class="headerlink" title="缓存击穿是指缓存中没有但数据库中有的数据（一般是缓存时间到期），这时由于并发用户特别多，同"></a>缓存击穿是指缓存中没有但数据库中有的数据（一般是缓存时间到期），这时由于并发用户特别多，同</h3><h3 id="时读缓存没读到数据，又同时去数据库去取数据，引起数据库压力瞬间增大，造成过大压力。和缓存雪"><a href="#时读缓存没读到数据，又同时去数据库去取数据，引起数据库压力瞬间增大，造成过大压力。和缓存雪" class="headerlink" title="时读缓存没读到数据，又同时去数据库去取数据，引起数据库压力瞬间增大，造成过大压力。和缓存雪"></a>时读缓存没读到数据，又同时去数据库去取数据，引起数据库压力瞬间增大，造成过大压力。和缓存雪</h3><h3 id="崩不同的是，缓存击穿指并发查同一条数据，缓存雪崩是不同数据都过期了，很多数据都查不到从而查"><a href="#崩不同的是，缓存击穿指并发查同一条数据，缓存雪崩是不同数据都过期了，很多数据都查不到从而查" class="headerlink" title="崩不同的是，缓存击穿指并发查同一条数据，缓存雪崩是不同数据都过期了，很多数据都查不到从而查"></a>崩不同的是，缓存击穿指并发查同一条数据，缓存雪崩是不同数据都过期了，很多数据都查不到从而查</h3><h3 id="数据库。"><a href="#数据库。" class="headerlink" title="数据库。"></a>数据库。</h3><h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><h3 id="设置热点数据永远不过期。"><a href="#设置热点数据永远不过期。" class="headerlink" title="设置热点数据永远不过期。"></a>设置热点数据永远不过期。</h3><h3 id="加互斥锁"><a href="#加互斥锁" class="headerlink" title="加互斥锁"></a>加互斥锁</h3><h1 id="分布式-微服务"><a href="#分布式-微服务" class="headerlink" title="分布式/微服务"></a>分布式/微服务</h1><h2 id="CAP理论，BASE理论"><a href="#CAP理论，BASE理论" class="headerlink" title="CAP理论，BASE理论"></a>CAP理论，BASE理论</h2><p>Consistency (一致性)：</p><p>即更新操作成功并返回客户端后，所有节点在同一时间的数据完全一致。</p><p>对于客户端来说，一致性指的是并发访问时更新过的数据如何获取的问题。</p><p>从服务端来看，则是更新如何复制分布到整个系统，以保证数据最终一致。</p><p>Availability (可用性):</p><p>即服务一直可用，而且是正常响应时间。系统能够很好的为用户服务，不出现用户操作失败或者访问超<br>时等用户体验不好的情况。</p><p>Partition Tolerance (分区容错性):</p><p>即分布式系统在遇到某节点或网络分区故障的时候，仍然能够对外提供满足一致性和可用性的服务。分<br>区容错性要求能够使应用虽然是一个分布式系统，而看上去却好像是在一个可以运转正常的整体。比如<br>现在的分布式系统中有某一个或者几个机器宕掉了，其他剩下的机器还能够正常运转满足系统需求，对<br>于用户而言并没有什么体验上的影响。</p><p>CP和AP：分区容错是必须保证的，当发生网络分区的时候，如果要继续服务，那么强一致性和可用性<br>只能 2 选 1</p><p>BASE是Basically Available（基本可用）、Soft state（软状态）和Eventually consistent（最终一致<br>性）</p><p>BASE理论是对CAP中一致性和可用性权衡的结果，其来源于对大规模互联网系统分布式实践的总结，<br>是基于CAP定理逐步演化而来的。BASE理论的核心思想是：即使无法做到强一致性，但每个应用都可以<br>根据自身业务特点，采用适当的方式来使系统达到最终一致性。</p><p>基本可用：</p><figure class="highlight makefile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">响应时间上的损失: 正常情况下，处理用户请求需要 0.5s 返回结果，但是由于系统出现故障，处理</span></span><br><span class="line">用户请求的时间变为 3 s。</span><br><span class="line">系统功能上的损失：正常情况下，用户可以使用系统的全部功能，但是由于系统访问量突然剧增，</span><br><span class="line">系统的部分非核心功能无法使用。</span><br></pre></td></tr></tbody></table></figure><p>软状态：数据同步允许一定的延迟</p><p>最终一致性：系统中所有的数据副本，在经过一段时间的同步后，最终能够达到一个一致的状态，不要<br>求实时</p><h2 id="负载均衡算法、类型"><a href="#负载均衡算法、类型" class="headerlink" title="负载均衡算法、类型"></a>负载均衡算法、类型</h2><h3 id="1-、轮询法"><a href="#1-、轮询法" class="headerlink" title="1 、轮询法"></a>1 、轮询法</h3><h3 id="将请求按顺序轮流地分配到后端服务器上，它均衡地对待后端的每一台服务器，而不关心服务器实际的"><a href="#将请求按顺序轮流地分配到后端服务器上，它均衡地对待后端的每一台服务器，而不关心服务器实际的" class="headerlink" title="将请求按顺序轮流地分配到后端服务器上，它均衡地对待后端的每一台服务器，而不关心服务器实际的"></a>将请求按顺序轮流地分配到后端服务器上，它均衡地对待后端的每一台服务器，而不关心服务器实际的</h3><h3 id="连接数和当前的系统负载。"><a href="#连接数和当前的系统负载。" class="headerlink" title="连接数和当前的系统负载。"></a>连接数和当前的系统负载。</h3><h3 id="2-、随机法"><a href="#2-、随机法" class="headerlink" title="2 、随机法"></a>2 、随机法</h3><h3 id="通过系统的随机算法，根据后端服务器的列表大小值来随机选取其中的一台服务器进行访问。由概率统"><a href="#通过系统的随机算法，根据后端服务器的列表大小值来随机选取其中的一台服务器进行访问。由概率统" class="headerlink" title="通过系统的随机算法，根据后端服务器的列表大小值来随机选取其中的一台服务器进行访问。由概率统"></a>通过系统的随机算法，根据后端服务器的列表大小值来随机选取其中的一台服务器进行访问。由概率统</h3><h3 id="计理论可以得知，随着客户端调用服务端的次数增多，"><a href="#计理论可以得知，随着客户端调用服务端的次数增多，" class="headerlink" title="计理论可以得知，随着客户端调用服务端的次数增多，"></a>计理论可以得知，随着客户端调用服务端的次数增多，</h3><h3 id="其实际效果越来越接近于平均分配调用量到后端的每一台服务器，也就是轮询的结果。"><a href="#其实际效果越来越接近于平均分配调用量到后端的每一台服务器，也就是轮询的结果。" class="headerlink" title="其实际效果越来越接近于平均分配调用量到后端的每一台服务器，也就是轮询的结果。"></a>其实际效果越来越接近于平均分配调用量到后端的每一台服务器，也就是轮询的结果。</h3><h3 id="3-、源地址哈希法"><a href="#3-、源地址哈希法" class="headerlink" title="3 、源地址哈希法"></a>3 、源地址哈希法</h3><h3 id="源地址哈希的思想是根据获取客户端的IP地址，通过哈希函数计算得到的一个数值，用该数值对服务器"><a href="#源地址哈希的思想是根据获取客户端的IP地址，通过哈希函数计算得到的一个数值，用该数值对服务器" class="headerlink" title="源地址哈希的思想是根据获取客户端的IP地址，通过哈希函数计算得到的一个数值，用该数值对服务器"></a>源地址哈希的思想是根据获取客户端的IP地址，通过哈希函数计算得到的一个数值，用该数值对服务器</h3><h3 id="列表的大小进行取模运算，得到的结果便是客服端要访问服务器的序号。采用源地址哈希法进行负载均"><a href="#列表的大小进行取模运算，得到的结果便是客服端要访问服务器的序号。采用源地址哈希法进行负载均" class="headerlink" title="列表的大小进行取模运算，得到的结果便是客服端要访问服务器的序号。采用源地址哈希法进行负载均"></a>列表的大小进行取模运算，得到的结果便是客服端要访问服务器的序号。采用源地址哈希法进行负载均</h3><h3 id="衡，同一IP地址的客户端，当后端服务器列表不变时，它每次都会映射到同一台后端服务器进行访问。"><a href="#衡，同一IP地址的客户端，当后端服务器列表不变时，它每次都会映射到同一台后端服务器进行访问。" class="headerlink" title="衡，同一IP地址的客户端，当后端服务器列表不变时，它每次都会映射到同一台后端服务器进行访问。"></a>衡，同一IP地址的客户端，当后端服务器列表不变时，它每次都会映射到同一台后端服务器进行访问。</h3><h3 id="4-、加权轮询法"><a href="#4-、加权轮询法" class="headerlink" title="4 、加权轮询法"></a>4 、加权轮询法</h3><h3 id="不同的后端服务器可能机器的配置和当前系统的负载并不相同，因此它们的抗压能力也不相同。给配置"><a href="#不同的后端服务器可能机器的配置和当前系统的负载并不相同，因此它们的抗压能力也不相同。给配置" class="headerlink" title="不同的后端服务器可能机器的配置和当前系统的负载并不相同，因此它们的抗压能力也不相同。给配置"></a>不同的后端服务器可能机器的配置和当前系统的负载并不相同，因此它们的抗压能力也不相同。给配置</h3><h3 id="高、负载低的机器配置更高的权重，让其处理更多的请；而配置低、负载高的机器，给其分配较低的权"><a href="#高、负载低的机器配置更高的权重，让其处理更多的请；而配置低、负载高的机器，给其分配较低的权" class="headerlink" title="高、负载低的机器配置更高的权重，让其处理更多的请；而配置低、负载高的机器，给其分配较低的权"></a>高、负载低的机器配置更高的权重，让其处理更多的请；而配置低、负载高的机器，给其分配较低的权</h3><h3 id="重，降低其系统负载，加权轮询能很好地处理这一问题，并将请求顺序且按照权重分配到后端。"><a href="#重，降低其系统负载，加权轮询能很好地处理这一问题，并将请求顺序且按照权重分配到后端。" class="headerlink" title="重，降低其系统负载，加权轮询能很好地处理这一问题，并将请求顺序且按照权重分配到后端。"></a>重，降低其系统负载，加权轮询能很好地处理这一问题，并将请求顺序且按照权重分配到后端。</h3><h3 id="5-、加权随机法"><a href="#5-、加权随机法" class="headerlink" title="5 、加权随机法"></a>5 、加权随机法</h3><h3 id="与加权轮询法一样，加权随机法也根据后端机器的配置，系统的负载分配不同的权重。不同的是，它是"><a href="#与加权轮询法一样，加权随机法也根据后端机器的配置，系统的负载分配不同的权重。不同的是，它是" class="headerlink" title="与加权轮询法一样，加权随机法也根据后端机器的配置，系统的负载分配不同的权重。不同的是，它是"></a>与加权轮询法一样，加权随机法也根据后端机器的配置，系统的负载分配不同的权重。不同的是，它是</h3><h3 id="按照权重随机请求后端服务器，而非顺序。"><a href="#按照权重随机请求后端服务器，而非顺序。" class="headerlink" title="按照权重随机请求后端服务器，而非顺序。"></a>按照权重随机请求后端服务器，而非顺序。</h3><h3 id="6-、最小连接数法"><a href="#6-、最小连接数法" class="headerlink" title="6 、最小连接数法"></a>6 、最小连接数法</h3><h3 id="最小连接数算法比较灵活和智能，由于后端服务器的配置不尽相同，对于请求的处理有快有慢，它是根"><a href="#最小连接数算法比较灵活和智能，由于后端服务器的配置不尽相同，对于请求的处理有快有慢，它是根" class="headerlink" title="最小连接数算法比较灵活和智能，由于后端服务器的配置不尽相同，对于请求的处理有快有慢，它是根"></a>最小连接数算法比较灵活和智能，由于后端服务器的配置不尽相同，对于请求的处理有快有慢，它是根</h3><h3 id="据后端服务器当前的连接情况，动态地选取其中当前"><a href="#据后端服务器当前的连接情况，动态地选取其中当前" class="headerlink" title="据后端服务器当前的连接情况，动态地选取其中当前"></a>据后端服务器当前的连接情况，动态地选取其中当前</h3><h3 id="积压连接数最少的一台服务器来处理当前的请求，尽可能地提高后端服务的利用效率，将负责合理地分"><a href="#积压连接数最少的一台服务器来处理当前的请求，尽可能地提高后端服务的利用效率，将负责合理地分" class="headerlink" title="积压连接数最少的一台服务器来处理当前的请求，尽可能地提高后端服务的利用效率，将负责合理地分"></a>积压连接数最少的一台服务器来处理当前的请求，尽可能地提高后端服务的利用效率，将负责合理地分</h3><h3 id="流到每一台服务器。"><a href="#流到每一台服务器。" class="headerlink" title="流到每一台服务器。"></a>流到每一台服务器。</h3><h3 id="类型："><a href="#类型：" class="headerlink" title="类型："></a>类型：</h3><h3 id="DNS-方式实现负载均衡"><a href="#DNS-方式实现负载均衡" class="headerlink" title="DNS 方式实现负载均衡"></a>DNS 方式实现负载均衡</h3><h3 id="硬件负载均衡：F5-和-A10"><a href="#硬件负载均衡：F5-和-A10" class="headerlink" title="硬件负载均衡：F5 和 A10"></a>硬件负载均衡：F5 和 A10</h3><h3 id="软件负载均衡："><a href="#软件负载均衡：" class="headerlink" title="软件负载均衡："></a>软件负载均衡：</h3><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Nginx、HAproxy、LVS。其中的区别：</span><br></pre></td></tr></tbody></table></figure><figure class="highlight mathematica"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">Nginx</span>：七层负载均衡，支持 <span class="variable">HTTP</span>、<span class="built_in">E</span><span class="operator">-</span><span class="variable">mail</span> 协议，同时也支持 <span class="number">4</span> 层负载均衡；</span><br><span class="line"><span class="variable">HAproxy</span>：支持七层规则的，性能也很不错。<span class="variable">OpenStack</span> 默认使用的负载均衡软件就是</span><br><span class="line"><span class="variable">HAproxy</span>；</span><br><span class="line"><span class="variable">LVS</span>：运行在内核态，性能是软件负载均衡中最高的，严格来说工作在三层，所以更通用一些，</span><br><span class="line">适用各种应用服务。</span><br></pre></td></tr></tbody></table></figure><h2 id="分布式架构下，Session-共享有什么方案"><a href="#分布式架构下，Session-共享有什么方案" class="headerlink" title="分布式架构下，Session 共享有什么方案"></a>分布式架构下，Session 共享有什么方案</h2><p>1 、采用无状态服务，抛弃session</p><p>2 、存入cookie（有安全风险）</p><p>3 、服务器之间进行 Session 同步，这样可以保证每个服务器上都有全部的 Session 信息，不过当服务<br>器数量比较多的时候，同步是会有延迟甚至同步失败；</p><p>4 、 IP 绑定策略</p><p>使用 Nginx （或其他复杂均衡软硬件）中的 IP 绑定策略，同一个 IP 只能在指定的同一个机器访问，但<br>是这样做失去了负载均衡的意义，当挂掉一台服务器的时候，会影响一批用户的使用，风险很大；</p><p>5 、使用 Redis 存储</p><p>把 Session 放到 Redis 中存储，虽然架构上变得复杂，并且需要多访问一次 Redis ，但是这种方案带来<br>的好处也是很大的：</p><figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">实现了 <span class="keyword">Session</span> 共享；</span><br><span class="line">可以水平扩展（增加 Redis 服务器）；</span><br><span class="line">服务器重启 <span class="keyword">Session</span> 不丢失（不过也要注意 <span class="keyword">Session</span> 在 Redis 中的刷新/失效机制）；</span><br><span class="line">不仅可以跨服务器 <span class="keyword">Session</span> 共享，甚至可以跨平台（例如网页端和 APP 端）。</span><br></pre></td></tr></tbody></table></figure><h2 id="简述你对RPC、RMI的理解"><a href="#简述你对RPC、RMI的理解" class="headerlink" title="简述你对RPC、RMI的理解"></a>简述你对RPC、RMI的理解</h2><p>RPC：在本地调用远程的函数，远程过程调用，可以跨语言实现 httpClient</p><p>RMI：远程方法调用，java中用于实现RPC的一种机制，RPC的java版本，是J2EE的网络调用机制，跨<br>JVM调用对象的方法，面向对象的思维方式</p><p>直接或间接实现接口 java.rmi.Remote 成为存在于服务器端的远程对象，供客户端访问并提供一定的<br>服务</p><p>远程对象必须实现java.rmi.server.UniCastRemoteObject类，这样才能保证客户端访问获得远程对象<br>时，该远程对象将会把自身的一个拷贝以Socket的形式传输给客户端，此时客户端所获得的这个拷贝称<br>为“存根”，而服务器端本身已存在的远程对象则称之为“骨架”。其实此时的存根是客户端的一个代理，<br>用于与服务器端的通信，而骨架也可认为是服务器端的一个代理，用于接收客户端的请求之后调用远程<br>方法来响应客户端的请求。</p><figure class="highlight haxe"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IService</span> <span class="keyword"><span class="keyword">extends</span> <span class="type">Remote</span></span> </span>{</span><br><span class="line"><span class="keyword">String</span> service(<span class="keyword">String</span> content) throws RemoteException;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight scala"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">ServiceImpl</span> <span class="keyword">extends</span> <span class="title">UnicastRemoteObject</span> <span class="title">implements</span> <span class="title">IService</span> </span>{</span><br></pre></td></tr></tbody></table></figure><figure class="highlight delphi"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">String</span> <span class="keyword">name</span>;</span><br></pre></td></tr></tbody></table></figure><figure class="highlight typescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title class_">ServiceImpl</span>(<span class="title class_">String</span> name) throws <span class="title class_">RemoteException</span> {</span><br><span class="line"><span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">}</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">service</span>(<span class="params"><span class="built_in">String</span> content</span>) {</span><br><span class="line"><span class="keyword">return</span> <span class="string">"server &gt;&gt; "</span> + content;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h2 id="分布式id生成方案"><a href="#分布式id生成方案" class="headerlink" title="分布式id生成方案"></a>分布式id生成方案</h2><figure class="highlight ebnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">uuid</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight haxe"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server</span> </span>{</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> void main(<span class="keyword">String</span>[] args) {</span><br><span class="line"><span class="keyword">try</span> {</span><br><span class="line">IService service02 = <span class="keyword">new</span> <span class="type">ServiceImpl</span>(<span class="string">"service02"</span>);</span><br><span class="line">Context namingContext = <span class="keyword">new</span> <span class="type">InitialContext</span>();</span><br><span class="line">namingContext.rebind(<span class="string">"rmi://127.0.0.1/service02"</span>, service02);</span><br><span class="line">} <span class="keyword">catch</span> (Exception e) {</span><br><span class="line">e.printStackTrace();</span><br><span class="line">}</span><br><span class="line">System.out.println(<span class="string">"000000！"</span>);</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> {</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line"><span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> <span class="string">"rmi://127.0.0.1/"</span>;</span><br><span class="line"><span class="keyword">try</span> {</span><br><span class="line"><span class="type">Context</span> <span class="variable">namingContext</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InitialContext</span>();</span><br><span class="line"><span class="type">IService</span> <span class="variable">service02</span> <span class="operator">=</span> (IService) namingContext.lookup(url +</span><br><span class="line"><span class="string">"service02"</span>);</span><br><span class="line"><span class="type">Class</span> <span class="variable">stubClass</span> <span class="operator">=</span> service02.getClass();</span><br><span class="line">System.out.println(service02 + <span class="string">" is "</span> + stubClass.getName());</span><br><span class="line"><span class="comment">//com.sun.proxy.$Proxy0</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Class</span>[] interfaces = stubClass.getInterfaces();</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">Class</span> c : interfaces) {</span><br><span class="line"><span class="keyword">System</span>.<span class="keyword">out</span>.println("implement" + c.getName() + " interface");</span><br><span class="line">}</span><br><span class="line"><span class="keyword">System</span>.<span class="keyword">out</span>.println(service02.service("hello"));</span><br><span class="line">} catch (<span class="keyword">Exception</span> e) {</span><br><span class="line">e.printStackTrace();</span><br><span class="line">}</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><h3 id="数据库自增序列"><a href="#数据库自增序列" class="headerlink" title="数据库自增序列"></a>数据库自增序列</h3><p>Leaf-segment</p><figure class="highlight basic"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">1 </span>，当前日期和时间 时间戳</span><br><span class="line"><span class="symbol">2 </span>，时钟序列。 计数器</span><br><span class="line"><span class="symbol">3 </span>，全局唯一的IEEE机器识别号，如果有网卡，从网卡MAC地址获得，没有网卡以其他方式获得。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">优点：代码简单，性能好（本地生成，没有网络消耗），保证唯一（相对而言，重复概率极低可以忽</span><br><span class="line">略）</span><br><span class="line">缺点：</span><br><span class="line">每次生成的ID都是无序的，而且不是全数字，且无法保证趋势递增。</span><br><span class="line"><span class="type">UUID</span>生成的是字符串，字符串存储性能差，查询效率慢，写的时候由于不能产生顺序的append</span><br><span class="line">操作，需要进 行<span class="keyword">insert</span>操作，导致频繁的页分裂，这种操作在记录占用空间比较大的情况下，性</span><br><span class="line">能下降比较大，还会增加读 取磁盘次数</span><br><span class="line"><span class="type">UUID</span>长度过长，不适用于存储，耗费数据库性能。</span><br><span class="line">ID无一定业务含义，可读性差。</span><br><span class="line">有信息安全问题，有可能泄露mac地址</span><br></pre></td></tr></tbody></table></figure><figure class="highlight excel"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">单机模式：</span><br><span class="line">优点：</span><br><span class="line">实现简单，依靠数据库即可，成本小。</span><br><span class="line">ID数字化，单调自增，满足数据库存储和查询性能。</span><br><span class="line">具有一定的业务可读性。（结合业务<span class="built_in">code</span>）</span><br><span class="line">缺点：</span><br><span class="line">强依赖<span class="built_in">DB</span>，存在单点问题，如果数据库宕机，则业务不可用。</span><br><span class="line"><span class="built_in">DB</span>生成ID性能有限，单点数据库压力大，无法扛高并发场景。</span><br><span class="line">信息安全问题，比如暴露订单量，url查询改一下id查到别人的订单</span><br></pre></td></tr></tbody></table></figure><figure class="highlight crmsh"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">数据库高可用：多主模式做负载，基于序列的起始值和步长设置，不同的初始值，相同的步长，步长大</span><br><span class="line">于节点数</span><br><span class="line">优点：</span><br><span class="line">解决了ID生成的单点问题，同时平衡了负载。</span><br><span class="line">缺点：</span><br><span class="line">系统扩容困难：系统定义好步长之后，增加机器之后调整步长困难。</span><br><span class="line">数据库压力大：每次获取一个ID都必须读写一次数据库。</span><br><span class="line">主从同步的时候：电商下单-&gt;支付insert <span class="keyword">master</span> <span class="title">db</span> select数据 ，因为数据同步延迟导致</span><br><span class="line">查不到这个数 据。加cache(不是最好的解决方式)数据要求比较严谨的话查<span class="literal">master</span>主库。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight autoit"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">采用每次获取一个ID区间段的方式来解决，区间段用完之后再去数据库获取新的号段，这样一来可以大</span><br><span class="line">大减轻数据库的压力</span><br><span class="line">核心字段：biz_tag，max_id，<span class="keyword">step</span></span><br><span class="line">biz_tag用来区分业务，max_id表示该biz_tag目前所被分配的ID号段的最大值，<span class="keyword">step</span>表示每次分配</span><br><span class="line">的号段长度，原来每次获取ID都要访问数据库，现在只需要把<span class="keyword">Step</span>设置的足够合理如 <span class="number">1000</span> ，那么现在</span><br><span class="line">可以在 <span class="number">1000</span> 个ID用完之后再去访问数据库</span><br><span class="line">优点：</span><br><span class="line">扩张灵活，性能强能够撑起大部分业务场景。</span><br><span class="line">ID号码是趋势递增的，满足数据库存储和查询性能要求。</span><br><span class="line">可用性高，即使ID生成服务器不可用，也能够使得业务在短时间内可用，为排查问题争取时间。</span><br><span class="line">缺点：</span><br><span class="line">可能存在多个节点同时请求ID区间的情况，依赖DB</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基于redis、mongodb、zk等中间件生成</span><br><span class="line">雪花算法</span><br></pre></td></tr></tbody></table></figure><h2 id="分布式锁解决方案"><a href="#分布式锁解决方案" class="headerlink" title="分布式锁解决方案"></a>分布式锁解决方案</h2><h3 id="需要这个锁独立于每一个服务之外，而不是在服务里面。"><a href="#需要这个锁独立于每一个服务之外，而不是在服务里面。" class="headerlink" title="需要这个锁独立于每一个服务之外，而不是在服务里面。"></a>需要这个锁独立于每一个服务之外，而不是在服务里面。</h3><h3 id="数据库：利用主键冲突控制一次只有一个线程能获取锁，非阻塞、不可重入、单点、失效时间"><a href="#数据库：利用主键冲突控制一次只有一个线程能获取锁，非阻塞、不可重入、单点、失效时间" class="headerlink" title="数据库：利用主键冲突控制一次只有一个线程能获取锁，非阻塞、不可重入、单点、失效时间"></a>数据库：利用主键冲突控制一次只有一个线程能获取锁，非阻塞、不可重入、单点、失效时间</h3><p>Zookeeper分布式锁：</p><p>Redis分布式锁：setNX，单线程处理网络请求，不需要考虑并发安全性</p><p>所有服务节点设置相同的key，返回为 0 、则锁获取失败</p><figure class="highlight arcade"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">双<span class="built_in">buffer</span>：将获取一个号段的方式优化成获取两个号段，在一个号段用完之后不用立马去更新号段，还</span><br><span class="line">有一个缓存号段备用，这样能够有效解决这种冲突问题，而且采用双<span class="built_in">buffer</span>的方式，在当前号段消耗了</span><br><span class="line"><span class="number">10</span> %的时候就去检查下一个号段有没有准备好，如果没有准备好就去更新下一个号段，当当前号段用完了</span><br><span class="line">就切换到下一个已经缓存好的号段去使用，同时在下一个号段消耗到 <span class="number">10</span> %的时候，又去检测下一个号段有</span><br><span class="line">没有准备好，如此往复。</span><br><span class="line">优点：</span><br><span class="line">基于JVM存储双<span class="built_in">buffer</span>的号段，减少了数据库查询，减少了网络依赖，效率更高。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight autoit"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">缺点：</span><br><span class="line">segment号段长度是固定的，业务量大时可能会频繁更新号段，因为原本分配的号段会一下用完</span><br><span class="line">如果号段长度设置的过长，但凡缓存中有号段没有消耗完，其他节点重新获取的号段与之前相比可</span><br><span class="line">能跨度会很 大。动态调整<span class="keyword">Step</span></span><br></pre></td></tr></tbody></table></figure><figure class="highlight tap"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">生成一个64bit的整性数字</span><br><span class="line">第一位符号位固定为<span class="number"> 0 </span>，<span class="number"> 41 </span>位时间戳，<span class="number"> 10 </span>位workId，<span class="number"> 12 </span>位序列号</span><br><span class="line">位数可以有不同实现</span><br><span class="line">优点：</span><br><span class="line">每个毫秒值包含的ID值很多，不够可以变动位数来增加，性能佳（依赖workId的实现）。</span><br><span class="line">时间戳值在高位，中间是固定的机器码，自增的序列在低位，整个ID是趋势递增的。</span><br><span class="line">能够根据业务场景数据库节点布置灵活挑战bit位划分，灵活度高。</span><br><span class="line">缺点：</span><br><span class="line">强依赖于机器时钟，如果时钟回拨，会导致重复的ID生成，所以一般基于此的算法发现时钟回拨，</span><br><span class="line">都会抛异常处 理，阻止ID生成，这可能导致服务不可用。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight pgsql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zk通过临时节点，解决了死锁的问题，一旦客户端获取到锁之后突然挂掉（<span class="keyword">Session</span>连接断开），那么这个临</span><br><span class="line">时节点就会自动删除掉，其他客户端自动获取锁。临时顺序节点解决惊群效应</span><br></pre></td></tr></tbody></table></figure><h3 id="删除锁：判断线程唯一标志，再删除"><a href="#删除锁：判断线程唯一标志，再删除" class="headerlink" title="删除锁：判断线程唯一标志，再删除"></a>删除锁：判断线程唯一标志，再删除</h3><p>可重入性及锁续期没有实现，通过redisson解决（类似AQS的实现，看门狗监听机制）</p><p>redlock：意思的机制都只操作单节点、即使Redis通过sentinel保证高可用，如果这个master节点由于<br>某些原因发生了主从切换，那么就会出现锁丢失的情况（redis同步设置可能数据丢失）。redlock从多<br>个节点申请锁，当一半以上节点获取成功、锁才算获取成功，redission有相应的实现</p><h2 id="分布式事务解决方案"><a href="#分布式事务解决方案" class="headerlink" title="分布式事务解决方案"></a>分布式事务解决方案</h2><h3 id="XA规范：分布式事务规范，定义了分布式事务模型"><a href="#XA规范：分布式事务规范，定义了分布式事务模型" class="headerlink" title="XA规范：分布式事务规范，定义了分布式事务模型"></a>XA规范：分布式事务规范，定义了分布式事务模型</h3><h3 id="四个角色：事务管理器-协调者TM-、资源管理器-参与者RM-，应用程序AP，通信资源管理器CRM"><a href="#四个角色：事务管理器-协调者TM-、资源管理器-参与者RM-，应用程序AP，通信资源管理器CRM" class="headerlink" title="四个角色：事务管理器(协调者TM)、资源管理器(参与者RM)，应用程序AP，通信资源管理器CRM"></a>四个角色：事务管理器(协调者TM)、资源管理器(参与者RM)，应用程序AP，通信资源管理器CRM</h3><h3 id="全局事务：一个横跨多个数据库的事务，要么全部提交、要么全部回滚"><a href="#全局事务：一个横跨多个数据库的事务，要么全部提交、要么全部回滚" class="headerlink" title="全局事务：一个横跨多个数据库的事务，要么全部提交、要么全部回滚"></a>全局事务：一个横跨多个数据库的事务，要么全部提交、要么全部回滚</h3><p>JTA事务时java对XA规范的实现，对应JDBC的单库事务</p><h3 id="两阶段协议："><a href="#两阶段协议：" class="headerlink" title="两阶段协议："></a>两阶段协议：</h3><p>第一阶段（ prepare ） ：每个参与者执行本地事务但不提交，进入 ready 状态，并通知协调者已经准<br>备就绪。</p><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">setnx</span></span><br><span class="line">问题：</span><br><span class="line">&nbsp;<span class="number">1</span> 、早期版本没有超时参数，需要单独设置，存在死锁问题（中途宕机）</span><br><span class="line">&nbsp;<span class="number">2</span> 、后期版本提供加锁与设置时间原子操作，但是存在任务超时，锁自动释放，导致并发问题，加锁与释</span><br><span class="line">放锁不是同一线程问题</span><br></pre></td></tr></tbody></table></figure><p>第二阶段（ commit ） 当协调者确认每个参与者都 ready 后，通知参与者进行 commit 操作；如果有<br>参与者 fail ，则发送 rollback 命令，各参与者做回滚。</p><p>问题：</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">单点故障：一旦事务管理器出现故障，整个系统不可用（参与者都会阻塞住）</span><br></pre></td></tr></tbody></table></figure><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">数据不一致：在阶段二，如果事务管理器只发送了部分 <span class="keyword">commit</span> 消息，此时网络发生异常，那么</span><br><span class="line">只有部分参与者接收到 <span class="keyword">commit</span> 消息，也就是说只有部分参与者提交了事务，使得系统数据不一</span><br><span class="line">致。</span><br><span class="line">响应时间较长：参与者和协调者资源都被锁住，提交或者回滚之后才能释放</span><br><span class="line">不确定性：当协事务管理器发送 <span class="keyword">commit</span> 之后，并且此时只有一个参与者收到了 <span class="keyword">commit</span>，那么当</span><br><span class="line">该参与者与事务管理器同时宕机之后，重新选举的事务管理器无法确定该条消息是否提交成功。</span><br></pre></td></tr></tbody></table></figure><h3 id="三阶段协议：主要是针对两阶段的优化，解决了2PC单点故障的问题，但是性能问题和不一致问题仍然"><a href="#三阶段协议：主要是针对两阶段的优化，解决了2PC单点故障的问题，但是性能问题和不一致问题仍然" class="headerlink" title="三阶段协议：主要是针对两阶段的优化，解决了2PC单点故障的问题，但是性能问题和不一致问题仍然"></a>三阶段协议：主要是针对两阶段的优化，解决了2PC单点故障的问题，但是性能问题和不一致问题仍然</h3><h3 id="没有根本解决"><a href="#没有根本解决" class="headerlink" title="没有根本解决"></a>没有根本解决</h3><p>引入了超时机制解决参与者阻塞的问题，超时后本地提交，2pc只有协调者有超时机制</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">第一阶段：CanCommit阶段，协调者询问事务参与者，是否有能力完成此次事务。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight gams"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">如果都返回<span class="keyword">yes</span>，则进入第二阶段</span><br><span class="line">有一个返回<span class="keyword">no</span>或等待响应超时，则中断事务，并向所有参与者发送<span class="keyword">abort</span>请求</span><br><span class="line">第二阶段：PreCommit阶段，此时协调者会向所有的参与者发送PreCommit请求，参与者收到后</span><br><span class="line">开始执行事务操作。参与者执行完事务操作后（此时属于未提交事务的状态），就会向协调者反馈</span><br><span class="line">“Ack”表示我已经准备好提交了，并等待协调者的下一步指令。</span><br><span class="line">第三阶段：DoCommit阶段， 在阶段二中如果所有的参与者节点都返回了Ack，那么协调者就会从</span><br><span class="line">“预提交状态”转变为“提交状态”。然后向所有的参与者节点发送<span class="string">"doCommit"</span>请求，参与者节点在</span><br><span class="line">收到提交请求后就会各自执行事务提交操作，并向协调者节点反馈“Ack”消息，协调者收到所有参</span><br><span class="line">与者的Ack消息后完成事务。 相反，如果有一个参与者节点未完成PreCommit的反馈或者反馈超</span><br><span class="line">时，那么协调者都会向所有的参与者节点发送<span class="keyword">abort</span>请求，从而中断事务。</span><br></pre></td></tr></tbody></table></figure><p>TCC（补偿事务）：Try、Confirm、Cancel</p><p>针对每个操作，都要注册一个与其对应的确认和补偿（撤销）操作</p><p>Try操作做业务检查及资源预留，Confirm做业务确认操作，Cancel实现一个与Try相反的操作既回滚操<br>作。TM首先发起所有的分支事务的try操作，任何一个分支事务的try操作执行失败，TM将会发起所有<br>分支事务的Cancel操作，若try操作全部成功，TM将会发起所有分支事务的Confirm操作，其中<br>Confirm/Cancel操作若执行失败，TM会进行重试。</p><p>TCC模型对业务的侵入性较强，改造的难度较大，每个操作都需要有 try、confirm、cancel三个接<br>口实现</p><figure class="highlight livecodeserver"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">confirm 和 <span class="built_in">cancel</span> 接口还必须实现幂等性。</span><br></pre></td></tr></tbody></table></figure><h3 id="消息队列的事务消息："><a href="#消息队列的事务消息：" class="headerlink" title="消息队列的事务消息："></a>消息队列的事务消息：</h3><figure class="highlight arduino"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">发送prepare消息到消息中间件</span><br><span class="line">发送成功后，执行本地事务</span><br></pre></td></tr></tbody></table></figure><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">如果事务执行成功，则<span class="keyword">commit</span>，消息中间件将消息下发至消费端（<span class="keyword">commit</span>前，消息不会被</span><br><span class="line">消费）</span><br><span class="line">如果事务执行失败，则回滚，消息中间件将这条<span class="keyword">prepare</span>消息删除</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">消费端接收到消息进行消费，如果消费失败，则不断重试</span><br></pre></td></tr></tbody></table></figure><h2 id="如何实现接口的幂等性"><a href="#如何实现接口的幂等性" class="headerlink" title="如何实现接口的幂等性"></a>如何实现接口的幂等性</h2><figure class="highlight gauss"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">唯一id。每次操作，都根据操作和内容生成唯一的id，在执行之前先判断id是否存在，如果不存在</span><br><span class="line">则执行后续操作，并且保存到数据库或者redis等。</span><br><span class="line">服务端提供发送<span class="built_in">token</span>的接口，业务调用接口前先获取<span class="built_in">token</span>,然后调用业务接口请求时，把<span class="built_in">token</span></span><br><span class="line">携带过去,务器判断<span class="built_in">token</span>是否存在redis中，存在表示第一次请求，可以继续执行业务，执行业务</span><br><span class="line">完成后，最后需要把redis中的<span class="built_in">token</span>删除</span><br><span class="line">建去重表。将业务中有唯一标识的字段保存到去重表，如果表中存在，则表示已经处理过了</span><br><span class="line">版本控制。增加版本号，当版本号符合时，才能更新数据</span><br><span class="line">状态控制。例如订单有状态已支付 未支付 支付中 支付失败，当处于未支付的时候才允许修改为支</span><br><span class="line">付中等</span><br></pre></td></tr></tbody></table></figure><h2 id="简述ZAB-协议"><a href="#简述ZAB-协议" class="headerlink" title="简述ZAB 协议"></a>简述ZAB 协议</h2><p>ZAB 协议是为分布式协调服务 Zookeeper 专门设计的一种支持崩溃恢复的原子广播协议，实现分布式<br>数据一致性</p><p>所有客户端的请求都是写入到 Leader 进程中，然后，由 Leader 同步到其他节点，称为 Follower。在<br>集群数据同步的过程中，如果出现 Follower 节点崩溃或者 Leader 进程崩溃时，都会通过 Zab 协议来<br>保证数据一致性</p><p>ZAB 协议包括两种基本的模式： <strong>崩溃恢复和消息广播</strong> 。</p><p><strong>消息广播</strong> ：</p><p>集群中所有的事务请求都由 Leader 节点来处理，其他服务器为 Follower，Leader 将客户端的事务请<br>求转换为事务 Proposal，并且将 Proposal 分发给集群中其他所有的 Follower。</p><p>完成广播之后，Leader 等待 Follwer 反馈，当有过半数的 Follower 反馈信息后，Leader 将再次向集<br>群内 Follower 广播 Commit 信息，Commit 信息就是确认将之前的 Proposal 提交。</p><p>Leader 节点的写入是一个两步操作，第一步是广播事务操作，第二步是广播提交操作，其中过半数指<br>的是反馈的节点数 &gt;=N/2+1，N 是全部的 Follower 节点数量。</p><h3 id="崩溃恢复-："><a href="#崩溃恢复-：" class="headerlink" title="崩溃恢复 ："></a>崩溃恢复 ：</h3><h3 id="初始化集群，刚刚启动的时候"><a href="#初始化集群，刚刚启动的时候" class="headerlink" title="初始化集群，刚刚启动的时候"></a>初始化集群，刚刚启动的时候</h3><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Leader</span> 崩溃，因为故障宕机</span><br></pre></td></tr></tbody></table></figure><figure class="highlight nginx"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Leader</span> 失去了半数的机器支持，与集群中超过一半的节点断连</span><br></pre></td></tr></tbody></table></figure><p>此时开启新一轮 Leader 选举，选举产生的 Leader 会与过半的 Follower 进行同步，使数据一致，当与<br>过半的机器同步完成后，就退出恢复模式， 然后进入消息广播模式</p><p>整个 ZooKeeper 集群的一致性保证就是在上面两个状态之前切换，当 Leader 服务正常时，就是正常<br>的消息广播模式；当 Leader 不可用时，则进入崩溃恢复模式，崩溃恢复阶段会进行数据同步，完成以<br>后，重新进入消息广播阶段。</p><p><strong>Zxid</strong> 是 Zab 协议的一个事务编号，Zxid 是一个 64 位的数字，其中低 32 位是一个简单的单调递增计数<br>器，针对客户端每一个事务请求，计数器加 1 ；而高 32 位则代表 Leader 周期年代的编号。</p><p>Leader 周期（ epoch），可以理解为当前集群所处的年代或者周期，每当有一个新的 Leader 选举出<br>现时，就会从这个 Leader 服务器上取出其本地日志中最大事务的 Zxid，并从中读取 epoch 值，然后<br>加 1 ，以此作为新的周期 ID。高 32 位代表了每代 Leader 的唯一性，低 32 位则代表了每代 Leader 中<br>事务的唯一性。</p><p><strong>zab节点的三种状态</strong> ：</p><p>following：服从leader的命令</p><p>leading：负责协调事务</p><p>election/looking：选举状态</p><h2 id="zk的数据模型和节点类型"><a href="#zk的数据模型和节点类型" class="headerlink" title="zk的数据模型和节点类型"></a>zk的数据模型和节点类型</h2><h3 id="数据模型：树形结构"><a href="#数据模型：树形结构" class="headerlink" title="数据模型：树形结构"></a>数据模型：树形结构</h3><p>zk维护的数据主要有：客户端的会话（session）状态及数据节点（dataNode）信息。</p><p>zk在内存中构造了个DataTree的数据结构，维护着path到dataNode的映射以及dataNode间的树状层<br>级关系。为了提高读取性能，集群中每个服务节点都是将数据全量存储在内存中。所以，zk最适于读多<br>写少且轻量级数据的应用场景。</p><p>数据仅存储在内存是很不安全的，zk采用事务日志文件及快照文件的方案来落盘数据，保障数据在不丢<br>失的情况下能快速恢复。</p><p>树中的每个节点被称为— Znode</p><p>Znode 兼具文件和目录两种特点。可以做路径标识，也可以存储数据，并可以具有子 Znode。具有<br>增、删、改、查等操作。</p><p>Znode 具有原子性操作，读操作将获取与节点相关的所有数据，写操作也将 替换掉节点的所有数据。<br>另外，每一个节点都拥有自己的 ACL(访问控制列 表)，这个列表规定了用户的权限，即限定了特定用户<br>对目标节点可以执行的操作</p><p>Znode 存储数据大小有限制。每个 Znode 的数据大小至多 1M，常规使用中应该远小于此值。</p><p>Znode 通过路径引用，如同 Unix 中的文件路径。路径必须是绝对的，因此他们必须由斜杠字符来开<br>头。除此以外，他们必须是唯一的，也就是说每一个路径只有一个表示，因此这些路径不能改变。在<br>ZooKeeper 中，路径由 Unicode 字符串组成，并且有一些限制。字符串”/zookeeper”用以保存管理信<br>息，比如关键配额信息。</p><p>持久节点：一旦创建、该数据节点会一直存储在zk服务器上、即使创建该节点的客户端与服务端的会话<br>关闭了、该节点也不会被删除</p><p>临时节点：当创建该节点的客户端会话因超时或发生异常而关闭时、该节点也相应的在zk上被删除 。</p><p>有序节点：不是一种单独种类的节点、而是在持久节点和临时节点的基础上、增加了一个节点有序的性<br>质 。</p><h2 id="简述zk的命名服务、配置管理、集群管理"><a href="#简述zk的命名服务、配置管理、集群管理" class="headerlink" title="简述zk的命名服务、配置管理、集群管理"></a>简述zk的命名服务、配置管理、集群管理</h2><h3 id="命名服务："><a href="#命名服务：" class="headerlink" title="命名服务："></a>命名服务：</h3><p>通过指定的名字来获取资源或者服务地址。Zookeeper可以创建一个全局唯一的路径，这个路径就可以<br>作为一个名字。被命名的实体可以是集群中的机器，服务的地址，或者是远程的对象等。一些分布式服<br>务框架（RPC、RMI）中的服务地址列表，通过使用命名服务，客户端应用能够根据特定的名字来获取<br>资源的实体、服务地址和提供者信息等</p><p>配置管理：</p><p>实际项目开发中，经常使用.properties或者xml需要配置很多信息，如数据库连接信息、fps地址端口等<br>等。程序分布式部署时，如果把程序的这些配置信息保存在zk的znode节点下，当你要修改配置，即<br>znode会发生变化时，可以通过改变zk中某个目录节点的内容，利用watcher通知给各个客户端，从而<br>更改配置。</p><p>集群管理：</p><p>集群管理包括集群监控和集群控制，就是监控集群机器状态，剔除机器和加入机器。zookeeper可以方<br>便集群机器的管理，它可以实时监控znode节点的变化，一旦发现有机器挂了，该机器就会与zk断开连<br>接，对应的临时目录节点会被删除，其他所有机器都收到通知。新机器加入也是类似。</p><h2 id="讲下Zookeeper-watch机制"><a href="#讲下Zookeeper-watch机制" class="headerlink" title="讲下Zookeeper watch机制"></a>讲下Zookeeper watch机制</h2><p>客户端，可以通过在znode上设置watch，实现实时监听znode的变化</p><p>Watch事件是一个一次性的触发器，当被设置了Watch的数据发生了改变的时候，则服务器将这个改变<br>发送给设置了Watch的客户端</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">父节点的创建，修改，删除都会触发Watcher事件。</span><br><span class="line">子节点的创建，删除会触发Watcher事件。</span><br></pre></td></tr></tbody></table></figure><p>一次性：一旦被触发就会移除，再次使用需要重新注册，因为每次变动都需要通知所有客户端，一次性<br>可以减轻压力，3.6.0默认持久递归，可以触发多次</p><p>轻量：只通知发生了事件，不会告知事件内容，减轻服务器和带宽压力</p><p>Watcher 机制包括三个角色：客户端线程、客户端的 WatchManager 以及 ZooKeeper 服务器</p><figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> 客户端向 ZooKeeper 服务器注册一个 Watcher 监听，</span><br></pre></td></tr></tbody></table></figure><figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">2.</span> 把这个监听信息存储到客户端的 WatchManager 中</span><br><span class="line"><span class="bullet">3.</span> 当 ZooKeeper 中的节点发生变化时，会通知客户端，客户端会调用相应 Watcher 对象中的回调</span><br><span class="line">方法。watch回调是串行同步的</span><br></pre></td></tr></tbody></table></figure><h2 id="zk和eureka的区别"><a href="#zk和eureka的区别" class="headerlink" title="zk和eureka的区别"></a>zk和eureka的区别</h2><p>zk：CP设计(强一致性)，目标是一个分布式的协调系统，用于进行资源的统一管理。</p><p>当节点crash后，需要进行leader的选举，在这个期间内，zk服务是不可用的。</p><p>eureka：AP设计（高可用），目标是一个服务注册发现系统，专门用于微服务的服务发现注册。</p><p>Eureka各个节点都是平等的，几个节点挂掉不会影响正常节点的工作，剩余的节点依然可以提供注册和<br>查询服务。而Eureka的客户端在向某个Eureka注册时如果发现连接失败，会自动切换至其他节点，只<br>要有一台Eureka还在，就能保证注册服务可用（保证可用性），只不过查到的信息可能不是最新的（不<br>保证强一致性）</p><p>同时当eureka的服务端发现85%以上的服务都没有心跳的话，它就会认为自己的网络出了问题，就不会<br>从服务列表中删除这些失去心跳的服务，同时eureka的客户端也会缓存服务信息。eureka对于服务注<br>册发现来说是非常好的选择。</p><h2 id="Spring-Cloud和Dubbo的区别"><a href="#Spring-Cloud和Dubbo的区别" class="headerlink" title="Spring Cloud和Dubbo的区别"></a>Spring Cloud和Dubbo的区别</h2><p>底层协议：springcloud基于http协议，dubbo基于Tcp协议，决定了dubbo的性能相对会比较好</p><p>注册中心：Spring Cloud 使用的 eureka ，dubbo推荐使用zookeeper</p><p>模型定义：dubbo 将一个接口定义为一个服务，SpringCloud 则是将一个应用定义为一个服务</p><p>SpringCloud是一个生态，而Dubbo是SpringCloud生态中关于服务调用一种解决方案（服务治理）</p><h2 id="什么是Hystrix？简述实现机制"><a href="#什么是Hystrix？简述实现机制" class="headerlink" title="什么是Hystrix？简述实现机制"></a>什么是Hystrix？简述实现机制</h2><h3 id="分布式容错框架"><a href="#分布式容错框架" class="headerlink" title="分布式容错框架"></a>分布式容错框架</h3><h3 id="阻止故障的连锁反应，实现熔断"><a href="#阻止故障的连锁反应，实现熔断" class="headerlink" title="阻止故障的连锁反应，实现熔断"></a>阻止故障的连锁反应，实现熔断</h3><h3 id="快速失败，实现优雅降级"><a href="#快速失败，实现优雅降级" class="headerlink" title="快速失败，实现优雅降级"></a>快速失败，实现优雅降级</h3><h3 id="提供实时的监控和告警"><a href="#提供实时的监控和告警" class="headerlink" title="提供实时的监控和告警"></a>提供实时的监控和告警</h3><h3 id="资源隔离：线程隔离，信号量隔离"><a href="#资源隔离：线程隔离，信号量隔离" class="headerlink" title="资源隔离：线程隔离，信号量隔离"></a>资源隔离：线程隔离，信号量隔离</h3><figure class="highlight cmake"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">线程隔离：Hystrix会给每一个<span class="keyword">Command</span>分配一个单独的线程池，这样在进行单个服务调用的时</span><br><span class="line">候，就可以在独立的线程池里面进行，而不会对其他线程池造成影响</span><br></pre></td></tr></tbody></table></figure><h3 id="信号量隔离：客户端需向依赖服务发起请求时，首先要获取一个信号量才能真正发起调用，由于信"><a href="#信号量隔离：客户端需向依赖服务发起请求时，首先要获取一个信号量才能真正发起调用，由于信" class="headerlink" title="信号量隔离：客户端需向依赖服务发起请求时，首先要获取一个信号量才能真正发起调用，由于信"></a>信号量隔离：客户端需向依赖服务发起请求时，首先要获取一个信号量才能真正发起调用，由于信</h3><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">号量的数量有限，当并发请求量超过信号量个数时，后续的请求都会直接拒绝，进入fallback流</span><br><span class="line">程。信号量隔离主要是通过控制并发请求量，防止请求线程大面积阻塞，从而达到限流和防止雪崩</span><br><span class="line">的目的。</span><br></pre></td></tr></tbody></table></figure><h3 id="熔断和降级：调用服务失败后快速失败"><a href="#熔断和降级：调用服务失败后快速失败" class="headerlink" title="熔断和降级：调用服务失败后快速失败"></a>熔断和降级：调用服务失败后快速失败</h3><h3 id="熔断是为了防止异常不扩散，保证系统的稳定性"><a href="#熔断是为了防止异常不扩散，保证系统的稳定性" class="headerlink" title="熔断是为了防止异常不扩散，保证系统的稳定性"></a>熔断是为了防止异常不扩散，保证系统的稳定性</h3><h3 id="降级：编写好调用失败的补救逻辑，然后对服务直接停止运行，这样这些接口就无法正常调用，但又不"><a href="#降级：编写好调用失败的补救逻辑，然后对服务直接停止运行，这样这些接口就无法正常调用，但又不" class="headerlink" title="降级：编写好调用失败的补救逻辑，然后对服务直接停止运行，这样这些接口就无法正常调用，但又不"></a>降级：编写好调用失败的补救逻辑，然后对服务直接停止运行，这样这些接口就无法正常调用，但又不</h3><h3 id="至于直接报错，只是服务水平下降"><a href="#至于直接报错，只是服务水平下降" class="headerlink" title="至于直接报错，只是服务水平下降"></a>至于直接报错，只是服务水平下降</h3><figure class="highlight abnf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">通过HystrixCommand 或者HystrixObservableCommand 将所有的外部系统（或者称为依赖）</span><br><span class="line">包装起来，整个包装对象是单独运行在一个线程之中（这是典型的命令模式）。</span><br><span class="line">超时请求应该超过你定义的阈值</span><br><span class="line">为每个依赖关系维护一个小的线程池（或信号量）<span class="comment">; 如果它变满了，那么依赖关系的请求将立即被</span></span><br><span class="line">拒绝，而不是排队等待。</span><br><span class="line">统计成功，失败（由客户端抛出的异常），超时和线程拒绝。</span><br><span class="line">打开断路器可以在一段时间内停止对特定服务的所有请求，如果服务的错误百分比通过阈值，手动</span><br><span class="line">或自动的关闭断路器。</span><br><span class="line">当请求被拒绝、连接超时或者断路器打开，直接执行fallback逻辑。</span><br><span class="line">近乎实时监控指标和配置变化。</span><br></pre></td></tr></tbody></table></figure><h2 id="springcloud核心组件及其作用"><a href="#springcloud核心组件及其作用" class="headerlink" title="springcloud核心组件及其作用"></a>springcloud核心组件及其作用</h2><p>Eureka：服务注册与发现</p><p>注册：每个服务都向Eureka登记自己提供服务的元数据，包括服务的ip地址、端口号、版本号、通信协<br>议等。eureka将各个服务维护在了一个服务清单中（双层Map，第一层key是服务名，第二层key是实<br>例名，value是服务地址加端口）。同时对服务维持心跳，剔除不可用的服务，eureka集群各节点相互<br>注册每个实例中都有一样的服务清单。</p><p>发现：eureka注册的服务之间调用不需要指定服务地址，而是通过服务名向注册中心咨询，并获取所有<br>服务实例清单(缓存到本地)，然后实现服务的请求访问。</p><p>Ribbon：服务间发起请求的时候，基于Ribbon做负载均衡，从一个服务的多台机器中选择一台 （被调<br>用方的服务地址有多个），Ribbon也是通过发起http请求，来进行的调用，只不过是通过调用服务名的<br>地址来实现的。虽然说Ribbon不用去具体请求服务实例的ip地址或域名了，但是每调用一个接口都还要<br>手动去发起Http请求</p><p>Feign：基于Feign的动态代理机制，根据注解和选择的机器，拼接请求URL地址，发起请求 ，简化服务<br>间的调用，在Ribbon的基础上进行了进一步的封装。单独抽出了一个组件，就是Spring Cloud Feign。<br>在引入Spring Cloud Feign后，我们只需要创建一个接口并用注解的方式来配置它，即可完成对服务提<br>供方的接口绑定。</p><p>调用远程就像调用本地服务一样</p><figure class="highlight kotlin"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConsumerController</span> {</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line">RestTemplate restTemplate;</span><br><span class="line"><span class="meta">@GetMapping(<span class="string">"/ribbon-consumer"</span>)</span></span><br><span class="line"><span class="keyword">public</span> String helloConsumer(){</span><br><span class="line"><span class="keyword">return</span></span><br><span class="line">restTemplate.getForEntity(<span class="string">"http://exampleservice/index"</span>,String.<span class="keyword">class</span>).getBody();</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight typescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> {</span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/getUser"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">getUser</span>(<span class="params"></span>){</span><br><span class="line"><span class="title class_">List</span>&lt;<span class="title class_">String</span>&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.<span class="title function_">add</span>(<span class="string">"张三"</span>);</span><br><span class="line"><span class="title class_">String</span> json = <span class="title class_">JSON</span>.<span class="title function_">toJSONString</span>(list);</span><br><span class="line"><span class="keyword">return</span> json;</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><figure class="highlight kotlin"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@FeignClient(name = <span class="string">"user"</span>)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserClient</span> {</span><br><span class="line"><span class="meta">@GetMapping(<span class="string">"/getUser"</span>)</span></span><br><span class="line">String getUser();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>Hystrix：发起请求是通过Hystrix的线程池来走的，不同的服务走不同的线程池，实现了不同服务调用<br>的隔离，通过统计接口超时次数返回默认值，实现服务熔断和降级</p><p>Zuul：如果前端、移动端要调用后端系统，统一从Zuul网关进入，由Zuul网关转发请求给对应的服务，<br>通过与Eureka进行整合，将自身注册为Eureka下的应用，从Eureka下获取所有服务的实例，来进行服<br>务的路由。Zuul还提供了一套过滤器机制，开发者可以自己指定哪些规则的请求需要执行校验逻辑，只<br>有通过校验逻辑的请求才会被路由到具体服务实例上，否则返回错误提示。</p><h2 id="Dubbo-的整体架构设计及分层"><a href="#Dubbo-的整体架构设计及分层" class="headerlink" title="Dubbo 的整体架构设计及分层"></a>Dubbo 的整体架构设计及分层</h2><h3 id="五个角色："><a href="#五个角色：" class="headerlink" title="五个角色："></a>五个角色：</h3><p>注册中心registry：服务注册与发现<br>服务提供者provider：暴露服务<br>服务消费者consumer：调用远程服务<br>监控中心monitor：统计服务的调用次数和调用时间<br>容器container：服务允许容器</p><p>调用流程：</p><p>1 ：container容器负责启动、加载、运行provider<br>2 ：provider在启动时，向regisitry中心注册自己提供的服务<br>3 ：consumer在启动时，向regisitry中心订阅自己所需的服务<br>4 ：regisitry返回服务提供者列表给consumer，如果有变更，registry将基于长连接推送变更数据给<br>consumer<br>5 ：consumer调用provider服务，基于负载均衡算法进行调用<br>6 ：consumer调用provider的统计，基于短链接定时每分钟一次统计到monitor</p><p>分层：</p><p>接口服务层（ Service）：面向开发者，业务代码、接口、实现等</p><p>配置层（ Config）：对外配置接口，以 ServiceConfig 和 ReferenceConfig 为中心</p><figure class="highlight kotlin"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestController</span> {</span><br><span class="line"><span class="meta">@Resource</span></span><br><span class="line">UserClient userClient;</span><br></pre></td></tr></tbody></table></figure><figure class="highlight typescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/test"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">test</span>(<span class="params"></span>){</span><br><span class="line"><span class="title class_">String</span> user = userClient.<span class="title function_">getUser</span>();</span><br><span class="line"><span class="keyword">return</span> user;</span><br><span class="line">}</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure><p>服务代理层（ Proxy）：对生产者和消费者、dubbo都会产生一个代理类封装调用细节，业务层对远程<br>调用无感</p><p>服务注册层（ Registry） ： 封装服务地址的注册和发现， 以服务 URL 为中心</p><p>路由层（ Cluster） ： 封装多个提供者的路由和负载均衡， 并桥接注册中心</p><p>监控层（ Monitor） ： RPC 调用次数和调用时间监控</p><p>远程调用层（ Protocal）：封装 RPC 调用</p><p>信息交换层（ Exchange）： 封装请求响应模式， 同步转异步</p><p>网络传输层（ Transport）：抽象 mina 和 netty 为统一接口，统一网络传输接口</p><p>数据序列化层（ Serialize） ： 数据传输的序列化和反序列化</p><h1 id="MQ"><a href="#MQ" class="headerlink" title="MQ"></a>MQ</h1><h2 id="简述RabbitMQ的架构设计"><a href="#简述RabbitMQ的架构设计" class="headerlink" title="简述RabbitMQ的架构设计"></a>简述RabbitMQ的架构设计</h2><p><strong>Broker</strong> ：rabbitmq的服务节点</p><p><strong>Queue</strong> ：队列，是RabbitMQ的内部对象，用于存储消息。RabbitMQ中消息只能存储在队列中。生产<br>者投递消息到队列，消费者从队列中获取消息并消费。多个消费者可以订阅同一个队列，这时队列中的<br>消息会被平均分摊(轮询)给多个消费者进行消费，而不是每个消费者都收到所有的消息进行消费。(注<br>意：RabbitMQ不支持队列层面的广播消费，如果需要广播消费，可以采用一个交换器通过路由Key绑<br>定多个队列，由多个消费者来订阅这些队列的方式。</p><p><strong>Exchange</strong> ：交换器。生产者将消息发送到Exchange，由交换器将消息路由到一个或多个队列中。如果<br>路由不到，或返回给生产者，或直接丢弃，或做其它处理。</p><p><strong>RoutingKey</strong> ：路由Key。生产者将消息发送给交换器的时候，一般会指定一个RoutingKey，用来指定<br>这个消息的路由规则。这个路由Key需要与交换器类型和绑定键(BindingKey)联合使用才能最终生效。<br>在交换器类型和绑定键固定的情况下，生产者可以在发送消息给交换器时通过指定RoutingKey来决定消<br>息流向哪里。</p><p><strong>Binding</strong> ：通过绑定将交换器和队列关联起来，在绑定的时候一般会指定一个绑定键，这样RabbitMQ<br>就可以指定如何正确的路由到队列了。</p><p>交换器和队列实际上是多对多关系。就像关系数据库中的两张表。他们通过BindingKey做关联(多对多<br>关系表)。在投递消息时，可以通过Exchange和RoutingKey(对应BindingKey)就可以找到相对应的队<br>列。</p><p><strong>信道</strong> ：信道是建立在Connection 之上的虚拟连接。当应用程序与Rabbit Broker建立TCP连接的时候，<br>客户端紧接着可以创建一个AMQP 信道(Channel) ，每个信道都会被指派一个唯一的D。RabbitMQ 处<br>理的每条AMQP 指令都是通过信道完成的。信道就像电缆里的光纤束。一条电缆内含有许多光纤束，允<br>许所有的连接通过多条光线束进行传输和接收。</p><h2 id="RabbitMQ如何确保消息发送-？-消息接收？"><a href="#RabbitMQ如何确保消息发送-？-消息接收？" class="headerlink" title="RabbitMQ如何确保消息发送 ？ 消息接收？"></a>RabbitMQ如何确保消息发送 ？ 消息接收？</h2><h3 id="发送方确认机制："><a href="#发送方确认机制：" class="headerlink" title="发送方确认机制："></a>发送方确认机制：</h3><figure class="highlight stata"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">信道需要设置为 <span class="keyword">confirm</span> 模式，则所有在信道上发布的消息都会分配一个唯一 ID。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight cpp"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">一旦消息被投递到queue（可持久化的消息需要写入磁盘），信道会发送一个确认给生产者（包含消息唯一</span><br><span class="line">ID）。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果 RabbitMQ 发生内部错误从而导致消息丢失，会发送一条 nack（未确认）消息给生产者。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight stata"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">所有被发送的消息都将被 <span class="keyword">confirm</span>（即 ack） 或者被nack一次。但是没有对消息被 <span class="keyword">confirm</span> 的快慢做</span><br><span class="line">任何保证，并且同一条消息不会既被 <span class="keyword">confirm</span>又被nack</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">发送方确认模式是异步的，生产者应用程序在等待确认的同时，可以继续发送消息。当确认消息到达生产者，</span><br><span class="line">生产者的回调方法会被触发。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ConfirmCallback接口：只确认是否正确到达 Exchange 中，成功到达则回调</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ReturnCallback接口：消息失败返回时回调</span><br></pre></td></tr></tbody></table></figure><h3 id="接收方确认机制："><a href="#接收方确认机制：" class="headerlink" title="接收方确认机制："></a>接收方确认机制：</h3><h2 id="RabbitMQ事务消息"><a href="#RabbitMQ事务消息" class="headerlink" title="RabbitMQ事务消息"></a>RabbitMQ事务消息</h2><h3 id="通过对信道的设置实现"><a href="#通过对信道的设置实现" class="headerlink" title="通过对信道的设置实现"></a>通过对信道的设置实现</h3><figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> channel.txSelect()；通知服务器开启事务模式；服务端会返回Tx.Select-Ok</span><br><span class="line"><span class="bullet">2.</span> channel.basicPublish；发送消息，可以是多条，可以是消费消息提交ack</span><br><span class="line"><span class="bullet">3.</span> channel.txCommit()提交事务；</span><br><span class="line"><span class="bullet">4.</span> channel.txRollback()回滚事务；</span><br></pre></td></tr></tbody></table></figure><p>消费者使用事务：</p><figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. <span class="attribute">autoAck</span>=<span class="literal">false</span>，手动提交ack，以事务提交或回滚为准；</span><br><span class="line">2. <span class="attribute">autoAck</span>=<span class="literal">true</span>，不支持事务的，也就是说你即使在收到消息之后在回滚事务也是于事无补的，队</span><br><span class="line">列已经把消息移除了</span><br></pre></td></tr></tbody></table></figure><p>如果其中任意一个环节出现问题，就会抛出IoException异常，用户可以拦截异常进行事务回滚，或决<br>定要不要重复消息。</p><p>事务消息会降低rabbitmq的性能</p><h2 id="RabbitMQ死信队列、延时队列"><a href="#RabbitMQ死信队列、延时队列" class="headerlink" title="RabbitMQ死信队列、延时队列"></a>RabbitMQ死信队列、延时队列</h2><figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">消费者在声明队列时，可以指定noAck参数，当<span class="attribute">noAck</span>=<span class="literal">false</span>时，RabbitMQ会等待消费者显式发回ack信号</span><br><span class="line">后才从内存(或者磁盘，持久化消息)中移去消息。否则，消息被消费后会被立即删除。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">消费者接收每一条消息后都必须进行确认（消息接收和消息确认是两个不同操作）。只有消费者确认了消息，</span><br><span class="line">RabbitMQ 才能安全地把消息从队列中删除。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">RabbitMQ不会为未ack的消息设置超时时间，它判断此消息是否需要重新投递给消费者的唯一依据是消费该</span><br><span class="line">消息的消费者连接是否已经断开。这么设计的原因是RabbitMQ允许消费者消费一条消息的时间可以很长。保</span><br><span class="line">证数据的最终一致性；</span><br></pre></td></tr></tbody></table></figure><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">如果消费者返回ack之前断开了链接，RabbitMQ 会重新分发给下一个订阅的消费者。（可能存在消息重复消</span><br><span class="line">费的隐患，需要去重）</span><br></pre></td></tr></tbody></table></figure><figure class="highlight markdown"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">1.</span> 消息被消费方否定确认，使用 channel.basicNack 或 channel.basicReject ，并且此时</span><br><span class="line">requeue 属性被设置为false。</span><br><span class="line"><span class="bullet">2.</span> 消息在队列的存活时间超过设置的TTL时间。</span><br><span class="line"><span class="bullet">3.</span> 消息队列的消息数量已经超过最大队列长度。</span><br></pre></td></tr></tbody></table></figure><p>那么该消息将成为“死信”。“死信”消息会被RabbitMQ进行特殊处理，如果配置了死信队列信息，那么该<br>消息将会被丢进死信队列中，如果没有配置，则该消息将会被丢弃</p><p>为每个需要使用死信的业务队列配置一个死信交换机，这里同一个项目的死信交换机可以共用一个，然<br>后为每个业务队列分配一个单独的路由key，死信队列只不过是绑定在死信交换机上的队列，死信交换<br>机也不是什么特殊的交换机，只不过是用来接受死信的交换机，所以可以为任何类型【Direct、<br>Fanout、Topic】</p><h3 id="TTL：一条消息或者该队列中的所有消息的最大存活时间"><a href="#TTL：一条消息或者该队列中的所有消息的最大存活时间" class="headerlink" title="TTL：一条消息或者该队列中的所有消息的最大存活时间"></a>TTL：一条消息或者该队列中的所有消息的最大存活时间</h3><h3 id="如果一条消息设置了TTL属性或者进入了设置TTL属性的队列，那么这条消息如果在TTL设置的时间内没"><a href="#如果一条消息设置了TTL属性或者进入了设置TTL属性的队列，那么这条消息如果在TTL设置的时间内没" class="headerlink" title="如果一条消息设置了TTL属性或者进入了设置TTL属性的队列，那么这条消息如果在TTL设置的时间内没"></a>如果一条消息设置了TTL属性或者进入了设置TTL属性的队列，那么这条消息如果在TTL设置的时间内没</h3><h3 id="有被消费，则会成为“死信”。如果同时配置了队列的TTL和消息的TTL，那么较小的那个值将会被使用。"><a href="#有被消费，则会成为“死信”。如果同时配置了队列的TTL和消息的TTL，那么较小的那个值将会被使用。" class="headerlink" title="有被消费，则会成为“死信”。如果同时配置了队列的TTL和消息的TTL，那么较小的那个值将会被使用。"></a>有被消费，则会成为“死信”。如果同时配置了队列的TTL和消息的TTL，那么较小的那个值将会被使用。</h3><h3 id="只需要消费者一直消费死信队列里的消息"><a href="#只需要消费者一直消费死信队列里的消息" class="headerlink" title="只需要消费者一直消费死信队列里的消息"></a>只需要消费者一直消费死信队列里的消息</h3><h2 id="RabbitMQ镜像队列机制"><a href="#RabbitMQ镜像队列机制" class="headerlink" title="RabbitMQ镜像队列机制"></a>RabbitMQ镜像队列机制</h2><p>镜像queue有master节点和slave节点。master和slave是针对一个queue而言的，而不是一个node作<br>为所有queue的master，其它node作为slave。一个queue第一次创建的node为它的master节点，其<br>它node为slave节点。</p><p>无论客户端的请求打到master还是slave最终数据都是从master节点获取。当请求打到master节点时，<br>master节点直接将消息返回给client，同时master节点会通过GM（Guaranteed Multicast）协议将<br>queue的最新状态广播到slave节点。GM保证了广播消息的原子性，即要么都更新要么都不更新。</p><p>当请求打到slave节点时，slave节点需要将请求先重定向到master节点，master节点将将消息返回给<br>client，同时master节点会通过GM协议将queue的最新状态广播到slave节点。</p><p>如果有新节点加入，RabbitMQ不会同步之前的历史数据，新节点只会复制该节点加入到集群之后新增<br>的消息。</p><h2 id="简述kafka架构设计"><a href="#简述kafka架构设计" class="headerlink" title="简述kafka架构设计"></a>简述kafka架构设计</h2><p><strong>Consumer Group：</strong> 消费者组，消费者组内每个消费者负责消费不同分区的数据，提高消费能力。逻<br>辑上的一个订阅者。</p><p><strong>Topic：</strong> 可以理解为一个队列，Topic 将消息分类，生产者和消费者面向的是同一个 Topic。</p><p><strong>Partition：</strong> 为了实现扩展性，提高并发能力，一个Topic 以多个Partition的方式分布到多个 Broker<br>上，每个 Partition 是一个 有序的队列。一个 Topic 的每个Partition都有若干个副本（Replica），一个<br>Leader 和若干个 Follower。生产者发送数据的对象，以及消费者消费数据的对象，都是 Leader。<br>Follower负责实时从 Leader 中同步数据，保持和 Leader 数据的同步。Leader 发生故障时，某个<br>Follower 还会成为新的 Leader。</p><p><strong>Offset：</strong> 消费者消费的位置信息，监控数据消费到什么位置，当消费者挂掉再重新恢复的时候，可以从<br>消费位置继续消费。</p><p><strong>Zookeeper：</strong> Kafka 集群能够正常工作，需要依赖于 Zookeeper，Zookeeper 帮助 Kafka 存储和管理<br>集群信息。</p><h2 id="kafka怎么处理消息顺序、重复发送、重复消费、消息丢失"><a href="#kafka怎么处理消息顺序、重复发送、重复消费、消息丢失" class="headerlink" title="kafka怎么处理消息顺序、重复发送、重复消费、消息丢失"></a>kafka怎么处理消息顺序、重复发送、重复消费、消息丢失</h2><h2 id="Kafka在什么情况下会出现消息丢失及解决方案？"><a href="#Kafka在什么情况下会出现消息丢失及解决方案？" class="headerlink" title="Kafka在什么情况下会出现消息丢失及解决方案？"></a>Kafka在什么情况下会出现消息丢失及解决方案？</h2><h3 id="1-）消息发送"><a href="#1-）消息发送" class="headerlink" title="1 ）消息发送"></a>1 ）消息发送</h3><h3 id="2-）消费"><a href="#2-）消费" class="headerlink" title="2 ）消费"></a>2 ）消费</h3><p>3 ）broker的刷盘</p><p>减小刷盘间隔</p><h2 id="Kafka是pull？push？优劣势分析"><a href="#Kafka是pull？push？优劣势分析" class="headerlink" title="Kafka是pull？push？优劣势分析"></a>Kafka是pull？push？优劣势分析</h2><p>pull模式：</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">根据consumer的消费能力进行数据拉取，可以控制速率</span><br></pre></td></tr></tbody></table></figure><figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 、<span class="attribute">ack</span>=0，不重试</span><br><span class="line">producer发送消息完，不管结果了，如果发送失败也就丢失了。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">2 、<span class="attribute">ack</span>=1，leader crash</span><br><span class="line">producer发送消息完，只等待lead写入成功就返回了，leader crash了，这时follower没来及同步，消</span><br><span class="line">息丢失。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight sqf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span> 、unclean.<span class="built_in">leader</span>.election.enable 配置<span class="literal">true</span></span><br><span class="line">允许选举ISR以外的副本作为<span class="built_in">leader</span>,会导致数据丢失，默认为<span class="literal">false</span>。producer发送异步消息完，只等待</span><br><span class="line">lead写入成功就返回了，<span class="built_in">leader</span> crash了，这时ISR中没有follower，<span class="built_in">leader</span>从OSR中选举，因为OSR</span><br><span class="line">中本来落后于<span class="built_in">Leader</span>造成消息丢失。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight routeros"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">解决方案：</span><br><span class="line">1 、配置：<span class="attribute">ack</span>=all / -1,tries &gt; 1,unclean.leader.election.<span class="built_in">enable</span> : <span class="literal">false</span></span><br><span class="line">producer发送消息完，等待follower同步完再返回，如果异常则重试。副本的数量可能影响吞吐量。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight sqf"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不允许选举ISR以外的副本作为<span class="built_in">leader</span>。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight stylus"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">2</span> 、配置：min<span class="selector-class">.insync</span><span class="selector-class">.replicas</span> &gt; <span class="number">1</span></span><br><span class="line">副本指定必须确认写操作成功的最小副本数量。如果不能满足这个最小值，则生产者将引发一个异常(要么是</span><br><span class="line">NotEnoughReplicas，要么是NotEnoughReplicasAfterAppend)。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight arcade"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">min</span>.insync.replicas和ack更大的持久性保证。确保如果大多数副本没有收到写操作，则生产者将引发异</span><br><span class="line">常。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight applescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span> 、失败的<span class="built_in">offset</span>单独记录</span><br><span class="line">producer发送消息，会自动重试，遇到不可恢复异常会抛出，这时可以捕获异常记录到数据库或缓存，进行</span><br><span class="line">单独处理。</span><br></pre></td></tr></tbody></table></figure><figure class="highlight sql"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">先<span class="keyword">commit</span>再处理消息。如果在处理消息的时候异常了，但是<span class="keyword">offset</span> 已经提交了，这条消息对于该消费者来</span><br><span class="line">说就是丢失了，再也不会消费到了。</span><br></pre></td></tr></tbody></table></figure><h3 id="可以批量拉取、也可以单条拉取"><a href="#可以批量拉取、也可以单条拉取" class="headerlink" title="可以批量拉取、也可以单条拉取"></a>可以批量拉取、也可以单条拉取</h3><h3 id="可以设置不同的提交方式，实现不同的传输语义"><a href="#可以设置不同的提交方式，实现不同的传输语义" class="headerlink" title="可以设置不同的提交方式，实现不同的传输语义"></a>可以设置不同的提交方式，实现不同的传输语义</h3><p>缺点：如果kafka没有数据，会导致consumer空循环，消耗资源</p><p>解决：通过参数设置，consumer拉取数据为空或者没有达到一定数量时进行阻塞</p><p>push模式：不会导致consumer循环等待</p><p>缺点：速率固定、忽略了consumer的消费能力，可能导致拒绝服务或者网络拥塞等情况</p><h2 id="Kafka中zk的作用"><a href="#Kafka中zk的作用" class="headerlink" title="Kafka中zk的作用"></a>Kafka中zk的作用</h2><p>/brokers/ids：临时节点，保存所有broker节点信息，存储broker的物理地址、版本信息、启动时间<br>等，节点名称为brokerID，broker定时发送心跳到zk，如果断开则该brokerID会被删除</p><p>/brokers/topics：临时节点，节点保存broker节点下所有的topic信息，每一个topic节点下包含一个固<br>定的partitions节点，partitions的子节点就是topic的分区，每个分区下保存一个state节点、保存着当<br>前leader分区和ISR的brokerID，state节点由leader创建，若leader宕机该节点会被删除，直到有新的<br>leader选举产生、重新生成state节点</p><p>/consumers/[group_id]/owners/[topic]/[broker_id-partition_id]：维护消费者和分区的注册关系</p><p>/consumers/[group_id]/offsets/[topic]/[broker_id-partition_id]：分区消息的消费进度Offset</p><p>client通过topic找到topic树下的state节点、获取leader的brokerID，到broker树中找到broker的物理<br>地址，但是client不会直连zk，而是通过配置的broker获取到zk中的信息</p><h2 id="简述kafka的rebalance机制"><a href="#简述kafka的rebalance机制" class="headerlink" title="简述kafka的rebalance机制"></a>简述kafka的rebalance机制</h2><p>consumer group中的消费者与topic下的partion重新匹配的过程</p><p>何时会产生rebalance：</p><figure class="highlight axapta"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">consumer <span class="keyword">group</span>中的成员个数发生变化</span><br><span class="line">consumer消费超时</span><br><span class="line"><span class="keyword">group</span>订阅的topic个数发生变化</span><br><span class="line"><span class="keyword">group</span>订阅的topic的分区数发生变化</span><br></pre></td></tr></tbody></table></figure><p>coordinator：通常是partition的leader节点所在的broker，负责监控group中consumer的存活，<br>consumer维持到coordinator的心跳，判断consumer的消费超时</p><figure class="highlight mipsasm"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">coordinator通过心跳返回通知consumer进行rebalance</span><br><span class="line">consumer请求coordinator加入组，coordinator选举产生leader consumer</span><br><span class="line">leader consumer从coordinator获取所有的consumer，发送<span class="keyword">syncGroup(分配信息)给到</span></span><br><span class="line"><span class="keyword"></span>coordinator</span><br><span class="line">coordinator通过心跳机制将<span class="keyword">syncGroup下发给consumer</span></span><br><span class="line"><span class="keyword"></span>完成rebalance</span><br></pre></td></tr></tbody></table></figure><p>leader consumer监控topic的变化，通知coordinator触发rebalance</p><p>如果C1消费消息超时，触发rebalance，重新分配后、该消息会被其他消费者消费，此时C1消费完成提<br>交offset、导致错误</p><p>解决：coordinator每次rebalance，会标记一个Generation给到consumer，每次rebalance该<br>Generation会+1，consumer提交offset时，coordinator会比对Generation，不一致则拒绝提交</p><h2 id="Kafka的性能好在什么地方"><a href="#Kafka的性能好在什么地方" class="headerlink" title="Kafka的性能好在什么地方"></a>Kafka的性能好在什么地方</h2><p>kafka不基于内存，而是硬盘存储，因此消息堆积能力更强</p><p>顺序写：利用磁盘的顺序访问速度可以接近内存，kafka的消息都是append操作，partition是有序的，<br>节省了磁盘的寻道时间，同时通过批量操作、节省写入次数，partition物理上分为多个segment存储，<br>方便删除</p><h3 id="传统："><a href="#传统：" class="headerlink" title="传统："></a>传统：</h3><h3 id="读取磁盘文件数据到内核缓冲区"><a href="#读取磁盘文件数据到内核缓冲区" class="headerlink" title="读取磁盘文件数据到内核缓冲区"></a>读取磁盘文件数据到内核缓冲区</h3><figure class="highlight applescript"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">将内核缓冲区的数据<span class="keyword">copy</span>到用户缓冲区</span><br><span class="line">将用户缓冲区的数据<span class="keyword">copy</span>到socket的发送缓冲区</span><br><span class="line">将socket发送缓冲区中的数据发送到网卡、进行传输</span><br></pre></td></tr></tbody></table></figure><p>零拷贝：</p><figure class="highlight"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">直接将内核缓冲区的数据发送到网卡传输</span><br><span class="line">使用的是操作系统的指令支持</span><br></pre></td></tr></tbody></table></figure><p>kafka不太依赖jvm，主要理由操作系统的pageCache，如果生产消费速率相当，则直接用pageCache<br>交换数据，不需要经过磁盘IO</p>]]></content>
    
    
    <summary type="html">&lt;h1 id=&quot;java基础&quot;&gt;&lt;a href=&quot;#java基础&quot; class=&quot;headerlink&quot; title=&quot;java基础&quot;&gt;&lt;/a&gt;java基础&lt;/h1&gt;</summary>
    
    
    
    <category term="原理" scheme="https://llzzoomm.github.io/categories/%E5%8E%9F%E7%90%86/"/>
    
    
    <category term="原理" scheme="https://llzzoomm.github.io/tags/%E5%8E%9F%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>one five</title>
    <link href="https://llzzoomm.github.io/2023/04/01/ren-zheng-shou-quan/"/>
    <id>https://llzzoomm.github.io/2023/04/01/ren-zheng-shou-quan/</id>
    <published>2023-04-01T04:25:38.355Z</published>
    <updated>2023-04-01T04:26:55.738Z</updated>
    
    <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="b9bf41d6d99a85e9f912d9bd0106fcafd36bf31730067bdda1dc3c31c1c531f6">4630436162ade97ba2718b7d0c4b3b63cb3a3f659c5ca08b4bca0f584592818620aced8da60972395dc077eceef9928d7112cebb82eaf39220c61858fbc4e15d9e791117f3884c2c7e38cf60739a44b4972ff691509f25766a327a38ba023bfa614d777256e8c95cc1192deee3c2eea5421cfb1f550ea268c158ad2b6ddaa7cac7d3dcc691a53a78656ecd14d591f1da5e32076f039e53dcda73a2440d2e04fa41a519f3110352f58cbb6b2eccb1297fabdca6d2a56dbee6ebc3f33933214f4291a859a2c00dfe75a9e8a79131878ced22e03ed6b05f8fddea5d17f0f9660bfd2e560fd3ec9f7b82909bb3e074c08b20a904d134c8bc0b7bd3b6a9bb127852e8b5fd9830de064fc8728ac1ffb879d4b635ce69e1ad3710406dbf01a5341623ed52ad0a0217b5702570f09ccd42796e710d426caf167ccf25f81f3e5f297deec2a29a90284395fc4727d91d8d6da64843fca4385f992312b60c122773e1113c8cc87053ef16137c2bf72b1ecc4402f897bcf89ad0d9a041d75cf1f368a5a7adf0303c058f21621abceafed6436ed73806940bc12d8d4301d0cc150093c2b2a45e87f07605b867e303c303bad13191a8fe35edeb87593037d0c5f48978a593de4280331931219bcd288ec11390e7066ebc306b397e3762b832197503f3f95a5c9dec527e7cd4b00e7e410da4f91b3379806a18a9c2a9376bc6ecf26f29d7b0ff65b5af285c0469feaa4281f5165928194a9b69144e7dd9c2fa59d5d615f0135d873e2d82b410f3535ffcae35800394299ffe059aa3945f46f1eef68f265a34c661441f12458c5c0c4b52e1010c64b4c650b3af44749cf8cbca9ff45530ee3a3f7b279e6a18f7dffae0803004719ff244236081d244f815736df610f1645c7e6925914dbe5e0b401d62330753fba09ae82e27babafb01628a80b6d1f8d0aec7ac751fe0dc690b992e7cb86a46ba16d3a932a69a37a4a880fd574bd30a53da598c90039a9ce4cf0b09cdfc4e095dd0b4b2b3c469a1490bc11785f7bbe7faa057cc9ddc15d31b20b5f5b6927f15ce4b86d473bec932bdded034ccc2da3e1f2dae03d47221e1f4666f9cbbb154157b9772b2d3015d4d277017f177ee2bcb69165a8fad5faa3aa4d647702efb76412994b9d8ef058fb2fc6978fa216b695b5bf7d23e604ce8e142c76331332474be34e32a756b47118bdb40b62beee08de6723b27f487a5b8088d5eab41ff4d30792e92b9f6c5762cde5509ec19cbceb6505712e0ce3f04168bd4583adaa1050f57f24dbf30219029f75847289d8f00eaf99dcd6ccbec1e87515b564a99f59d2786d99fdc22f2f687b83f78bc3e4371611c7dd7cc93846eb054e9e6327ee6b2c17c1b09668145aa6f0fc598bcaa66f6577cf2d33a3bf1385fc1b64371bbb447a7541243c5ac1df9cb1a9a0dec27715eaf095f2ce41b7fceb6d115ff14b8469b9377c4733887dbbc2d1b9273024992ea5aa4aaceba0bdb7b8572da61355d9d5bb26c54143c1d844bb33258060c193ff8fea0b6f428b9eb330c4105aad8a8952bbb43c0a1921975d3604c0f399800e7a0788badff8636b661858b724c32e6d6a1cfa2b69b1da9a8f531412a29aa978ce955afbe935fee7dc8b08120200ea523b6ce1b03e41b83c9bcca2ae2d2f1371fdeef8b93862e773e3187c91777bb952509d2baa2c48c1b5dea15d1ee31910fb38ea7ee2ddb6892c070dee4775f6def6005a6669f445e0dfbd8e07de07eb0b09cf536900388450f2ef40db6be84d8a54a5afb3ca1432a125b9927dea4f623018ea36c7b500da0b0eea333b64a1c2750716e6e500d67b22d6d2d63129aa9829d4858fc65259f8aaa17972483aa4126816bd2b3a708c8ddc0458f97dd0ef74b051e3e13c5e3bf30aa6e192d372e1a9d3f45c66a7142b259b8ad40f46aaf87c4d973fb38e18aafe4ee37a6fd451c06ddafc5f4a2180e880d626eef889cad7e2d2012d312ce0833832381e601946396228f5f920ca90503dee5278091485b8b2b212c8497cd811a59a34a1b535f81ce7d7048519a23fee04e7fa7dd14f78f25e862663b91988230b2453948ba78d50300ec6d95421f41a3b88d5acdb6cbba838f80a2d8e78d224914fbed0f400f83ea4a7a15e7337ea732008f40e68f0159354a3b1b430b7a773c312a92704c57ac2d54393f6aeaa5f6a63223db4f880a140295736529413947258a4506ec45193af6dac5aaf235eeb7568b69a456c108112dc1e97e49a9cbbd0e7b322b440f4eb010531f0717103c4ea841202ad0d853cec84f421f7e02d832808df53295f6978a37b71b959bc5f6f78df93047ccb9b1086d8feeee4ab3edef201a54fc8f569bca2283375dc66507266e2fdb3a98374acc53571f9a92ab3acd361d304ceaf2c999f47cef087f2c3caabf5d6c5e8fa1476c48ccde61786689985220364f1438344524304df8bd14aa65a4e882e3caaec911697f85ecc0278eb0ac5248e7d82a3985e209e0e1cbc8ace4bf2094049fb0845bdbdc3d55fed96a4cd10968933df1bf578940588de78e4f74286d8c9e30449a856d7fef947ef0226328c04dfe8e50d464b5f564e665ef705007bf9e3d751ab0be8861c7d9124c7c608fa031cb989b646cff35ba51f392e71c0fabc28d95959e2702b781a868ceccb20dca1ed0363285439f0966e95e73cc5d9398d47cf04ca941648844dcf7bc37168ffb8f01d8a5d39ebbd2b13b72095486e551c585b67f340281e35392b7f1295a31fe98deeb89ce247cd9dd85fd2fdec5a1de74fccb7c289fbe5c8b5aa6867a6d9d68b07c1c4f2494032104be4349ebc98b4716c0d52111532643f8feb31f17166fad208ca555821a009009fc4f7688d601ed44fea379be63c94a19b7fa4f2b2c71d26dc1b06ce4e15d22a1bcdc47d0b09f94366f95818b662ac7618717cbc4a927928e7d028114fe70cb89233a863b1d5e5ad18895abd5d53057d1a47783d7e14c20da5927e37a74337c7a4ecff3ed9483c76d6831050777e4fd6210671798056214db7086d89e183fd388f4fa3ded0f8f9954ba03d369a8b37eef06b126f84c85368c32b03163343c29a6a9b54db65cde9b59d87317437c7a1d7002a569cc9a1c78428ef6e4f99643a8ef6a6fc200eff05b3c8c297bc1428be0edbeac03ba552a5f5bd94f70e70d5a7982a206fe3b1bb4ef5187f0a157101820b6a24d1e4c37ad17a7fe1828213303a5bc62b71bb780cce5e5837fed782e5069e95f0c7fdf6786b30a55493ae61cb6c6d33a05f05990951acf49d149670470332d1c4f88b5fe3c066bc79e7bef6632c92934cb5a02b03ab83f2c76b1c31546b7f5a3072409eb0f557a1b60c8f498784d70917ea481d0c752592a9afacd5ce8b4b365338808dccd01e51710dae3d31554bda7294ee935d2420c0bbf67f82022c635d921c3bc300e249e8f98bed08eb8790fa9db23b2f94a339ccde8440463192cb8533c3e7102553eaffe4a97996d4c2a47f0ef9471e73b846c67c5b9af3600a3682c3ed053b85d991ac0899c9a0938c9a7b4028964e47cb3cea71759863fcdd11b952c3cb5fa3e5d7a32f6d56527c2dd6e1c93758b940be147e97ace81ae7f209e31eb51a8c84083ea56164ce8b56f878a1f3842468f474b93736919e615a825afcf1e615884ad90c7ea3fd63b448bb0a7a8c4c1b3e2595c1b88ea860c720874b7f998b5fbfca7457f5342a2e90d215966b1491b4b1f7fb968a64188ce521eb9bcae9546c561e038f883cc7d387a5ae371437c754235a98f7266f44ab52240260e77c06da4b02fd23d3722843db8062cc3d5aa126bc580903e20fb1e05378941b0edad4a42cb1073b23bed228f6444f8f6d7ca694dad4a1fb2d6f1b386c808e0e1b943cd7fd2c68e43dcc745bd77d265dc31576b8d7b56194337624ae4d43689c1ba6c36061190df6b07fd50b35b44f848437fc125dbabb5c95c24866dacdfafdb358157dc08e9e25ef6ee2210c9da7ee2edf2236ebe5aefe4416ea67078bd3d734a7452eccec8ad924d859ea4268b74cad423014357ce50b3c6b7160dcf08464649ff16923149a9ffa1dc97bea85db622a75c7abe465233c38fa8b2d6254759eb20f1d8ca381452a95d3ccd0591414437ce7efe4effa3519a86c14fbc4a3aaf75be79dc94b13823046d04e26bde2ed247449b0c80999f462f8b0cdc9d734643b1d8a1174f3c949c0eadff625ed9706116439592c7272cd1eb0409a030aa3eea83f6f5e72a9e9b0496ef2855a5f2914727b3b744190adb3a35bfa3f04ea97992d31692a4c4834e4264b7aa51b9b4c8026aa8422f3d7619e21bf356b04fd1795eb34c7c30718f0a620508d3759170f878cb420bbf94852c6418c1a24b4fd5b9c236d9a48da8490991ca9650f2a6843a4cbb26da8cd0da0a79e4fb0d5eef7c13d6eee3a9d510d1210a32244e97d4b63e3e3211f3f6a0e2b4b41ebb43d4172b370c77496449cab9583f96e92c9ea4e856a4be3ae6426806f149fb31bcf619b729c74826558fb37c640c552c7ec6ee927f0d922636aec4ed9a51fc8afe714ea953d11a1b32ff1c3a557f0ff43ad1bd5710e4b2db01c3dcb94448eb612e5487001d6fe0c2262d056cd4a96d950739113f1ef82ae09b25f5e59faca6b299f116d1fc4e5e73f8d18a7fff2bed7dbbd9c561ccf01e74a8b8347851781419c9b1972cb2c49b7e828c6b4aba9c49d738f90eb9789013eea8b90e60e11127355c555eaa32a80852b8ae6e4a0e31e7594f0243d8c8d90ea830b37a9f4694d7e0503fabebc72ca100279634efb8e6ba56e5f153573fcde88445db6d29959119919978f6a0793cb08463010625e626440fcceee554118a26a52e1fc5400333d779b616e9da72220a4b4d2588cb3f779e53ebea4f59989f27ade49244a16d94914e2f5753e629b9111eb0ddb7fb5ab8f7e92f09b81c1e99df0cb863af8ab07bf1658f6a6244009db07f96b63ec5eae95dcb1943a1cb1dd53fa09078c607ede65b72e09671e215f39b354e484ebb9be4fab24e2da67a73e8d46a9a7da22b43143b22e7b8a75c54d1712a0870d839789b0d8c47244e9bab909436b809b1470a1bd24f399eede06b1160646bf21b16433a86e749338e83c53daf4b2f0ec53778ee66ef24081fccaf17f26b5b00342b35768b2326a71def50242bb2abbfce5cdd3bfc901bc51b82c0497092244109f4d155473e13ee253fb1ec926b21151374a1abdccadee5d2cbcf3f78421defc9e45b2d76531f7fa69edfb7acb9c8f4032299461e10cd856583678f7167a192a20f8b04238d7c277245b45fd4cba014cf5d57c8f02ec33493b29548ee7f01738fc18f4bd6664079a3934ca5708be55b7ca584e91ab8505773acd9fd4e80cba06b92dc1d632ca12955f5f365d140f3af46511d30848540b6344d0cd2f382ad97edda4351a5793a0c0d270b47f86d81e7ffdf8b1144c2229302ac8ba5131dc59260031624e3e8e830db4f272062f7205fed281128b5d27bce3c3e3ac2fccfcafd12756ce73eae5ac9af9d343bb70d41877af5ef2b489fa21d7ed7f5f8bcfafa6c99b3adb8e1b1ad5b52b2f32b95475f9feb4c6407dc58aa1694f4377b01f53bd4b536aa04818788f86336ab1bf4741799f000a0cecfcb79f6a52aa24766ea04f2b1566834f6f959ed8ca66dcd45294fb2f6dfa1eb132dc18f17a535e47eb27048e2071544f76ba0974e9b29f78539fce11b67dd8d0992ad24473aa6e3a47605a951faa7a05f248b3456f99c0d6201d75e8785e4d8bbf6bd98a1662dfc91d8d197d5cafa189ef24f84349e3b7f480869d009ed9f0d0355083f26ea1ace06f118ca7fedf7da9ab2abffab6928bc371d0ee965c053fd14b84a0d02cba84849b6c734bd307b936f9250931258594cadf195b0abe748e830e1e831e6bf5304c0dae381125a149b5489bb022c6d076716028b75893ba0906dd4121d0fa616f41210e8da51427e907d5fe8b73bf586cd62e33dcc598d9be27491838c32c6b371d2eada869bc4f0bbc775bad73a622cf3a1f8ee3df580cafeaac02d9d7496e96b5499d753dc220682b00b9938306edd5bd179327885f09b3a779479b1dd9fcedd1df23499db2bac880a549b39fb2465159a9668d39d37fae731acbf3a4b29e1c8998a1cdc87db3e03eba3f6778c1401d9abe75199521d838a15ba4d689f0842ce664c8ccd6889e0abb5eb04f7903c39a7237b6e3d83710644e3b69a29d87d529f2b06e6a1d71cde91ac0c8df9fecf28a548fe89e458779e7c51c3c2b0373802b653fc81e79ba39ff55fac2a9af7bcbf8bad2a87c64bdf0754b71970ea2ac58757ca6d163e6b340fb2ddc93d8b5025e7359405012307c86e06deb1b9e6070ad714e233c274475cca307712a1f2989e680aeac5cdf7247feb4a6efae3e9b0f09eba48dd7802fff088c7dc819e4b08fbf60e540b41344944b808c0d21080c760dfbe11b55562ff8a0ad640a10453837ed139c4650e5c03efa2b40b6b2ae2414a5205b752f093fbaf24df891aaac8a223cdf8fcd0f71c5312ffffe742e76592343c40efe0d9574a14b703598320e6884790a3ff871c3a1cb7f45bc12c8e3c84b99087a6b4e224275f65358d0a45d5be1cdb76ec6c3d0a6864cdc78c1b3670a18a9a4b80a8ce360dd7b46b97c241e2474c2a72e7ddcc24fe02a0459ff67965c2845444ed152e2ae4c6237a7a31d15aa68852716b252645305f86df53ebe5ffbc2188f756593ba40fc9643ff8276634962d9e8a7dcd0815f26c3c1855ac82d80c70a9ebc085501d08b8498453e434251bcd6fc452d746081f9c2670b66384199271f732f1db2c3f8a530597d6ae23b609e1a6982d350425fb33714ef9f1a57e297a59df68fd72e8f174f9a4b54769bb68757c2bffc56adf0d3a9d77496e2fffbdc8c93adb39bba910e7add48feba3b245945cc95f90c59cf455c6f7429f9bd1ded73ce8f77ae8152a0fc23372aa733c3312f3295cd61cd83c5431a4bea2c3b0e5dd458413f3f333a3dff5a99e61c150b1372d41fc8f17209bf0b29d13420550c3f63e5f677434ea9b5f33dbd97ec9c7c9025ca5426c7a2143b20eb65cb00ecb5a52dcf7991840593a1f227bd24e8b81fd8963968d59d0e004c7c86c31eb5c8e23b8ad350373d898a6b8516c62a9581f97b4b309d0ea24589bee482093f26e9b762058d1bf1b3852f920cfe641d9ad3b335db312aa31bbb601057678236d30fd117690979f42674192af7123edd06f30d3b73acdd39d5829cbc0b14945f9732e739fd862460e3b31a7ce13eba8e42599180b4b2aeb3583a290d0ee97f408fddd17ef7442c59d0e49b73bce2c8e0a4dbdcf56c01a4203539975ed2d3e1547b7ab9a635ffb2337a75902b7ec9e661c0b688c4f7533cd13511e4725f9229efe1770aebb5709e93bbe7656ebf4499174116addef375369eecb1e56a231e5448ffcfa5e95f4528d918d5d0f8c56785a251419f506297b106c634bcf99334babe8fca059093fc62aa15ef9466eaa3006a13a70b233f806d82f43a5e0c89c5c4f613b969a745102003c0664c16bfc1bb20736bec6f0d49427cab64bac35ed54b21c031880f82464278580c3f36ef08c878887ba7c3de04acad6af929be6377cb58be1b4a47f73b8e879246a68088582727a4d9b029b9f1a101495e2f2c25c44eb42047c60408243586427ae6c5be94a0e31a4dd2f662ad7194161eb86f40a755eac667b4f99ca35eaee59b17326313c3bba86036ec78d4acef449d0f59bf6d642e3cc4479841f3616cf9f86f147f60c17f7c5062c6a60b4c34e2985ff800e9b6d0b8ccd3b74ec73c0c6165e10a6aa2ed9f601aa8adc7fade2992532ca10c6d8f48232623a98b55476240d2c6d27c0f171b9e89e12ceaa6f3aa7508de0723e9e1f204859dc8efda1b678a16074af922d6085d28e2a3dfed41bc21b29e2969e83b66bd613110b0f73eec4b48c008699847988d2b9b7e62d6c803337a7ca31fac70d4e82642afef45956525e32f211149ff7d5dc1de30a0d09be143d305457b53121a8853c18e281d243bf555e24fb24297a6a676e80b278fb44e1700ae59854ad8e733d016c6d5d29dcca046b74fe34c458175c498058119fc1359f53cd1a483547bdfa953fd27595123228a0f751ce83303c64a2401ebf670b32e31f0d208336c45fb3f59c03de5f2ec3c0c1ffbf3fb4b0e1509cbba92b72d4bf71016ee3b4efdabbca39df3b0e867a4ee111a099a3666effcd0fa7dc93e98e2fd649633c2af5b3d419d36a9c1ab71e72d7de3e1413b9235ef48c8189110b51a62fb57dab34bb9ccd47fe4586803fdedfc9c4c75182a03fe4f9e889e9ae2ff4f6fe9a7a1f6cfd6b4910883c9626f70ba5d7657953d4ace966f31540daa41ff3c0914b0ca25fe520214b6885c205589995c6b8774a426ffe587d9cc20b9a6228b7272c082778f0649c1d4a1fb26c968abead4ad85337bcad08464d651734b087d205b03a77ffb14b8ba98d20bea80c9fcc51f0181c7e593a78f2f2cf57347dc47295030242a70fa7b4469afa90a0bb846389eb545c906f44b9c88fe52ac934c473f448a293f06599adba80ec981306e12bfe946c49fbc6ce78aa730f609390f42fb8a1f2f1ac48d52de4dd1fc41a1587ad49498d9aec9cc74d4571991161dbc713a6fb721952cd8999d0830a3c6746a85090f5b74b8539f64f3413fca69653afaeef5a10a4f7f0806e71249bb50cd25a116dc909e9ef5e0845572c67eb50bc509e7880ae450ed9a830fc40fee6dc0a3173d342897e801742caa7ebb4bb40f4bc0fb23e8dc6518c87d83ea0baeffeb8aa39728193df778cc4201f414ee3e1f0e791bf7e33b0d5e51f5b90563ffc507938310ba836850623bfdebece7009cb4227093d1949d583f5aa77e997041a658dfd62bdd6cdbad0db7d0c70c5940b96206f4c747752b213fd246701a12046b34a548ed9823ea50e8472600451b512a90b8a7681b64cfb6a7b6c0c2a731205c3513a57118109cbf3737495d0dcf84dddbef37f8373b0cb5d2ea43d02fd5fed21bfa8fe85f500d88336db2bdf26ddbaa02a4b157314c13823f644065666b1cb8ea8f34f81a17094c45af5e3443185f2a0d19534e151df420f811c5441d685a43c2052bd21c28dba977d7ad1a9bb143cc9f50a45e16369300abfdd5bb407d351fbb1b76dad94d08cd821c159a4be41824356af0ee16d68288cdec04639bf80515fd530a681d67ec4c49a190c892f5073ba3f1eabc3df39617e6b9aabaebfa0eb1d8379bef512069f019b12c7de36dc4cb56666c7fca50913a1faf4a14bcb7c3092f13da1cd35ddfcb88175cf9c2c50aa12563dc8766d960b57679eac6a161464d9fcfcc339e093fa0a781a46baa11025b2b1ac603e671a6d65c0d4a5da1242cf6d6563ddf27844f31c9c33b4078c21e945a2aeac2268c08b4faf98d33ef0020300a3d92a0b8608e6b3f1eb13b04724b5eeb66a953703d5395899eda952fcdc9c55b90031db3b431001411db730ddffbcae3450ef3fbdea109f0851c75acf9fbbe1f08850e85317753f21e5e3a9a816bb77b99a7ee47ee799347ff37bb710933719d29143bea833d09297341cda047804ba43f05285fd9d84a3b54068f1b73d7b43955683ec4169f068144631aba3615c1e5200328dfd633d1bf2d79010acf77156ca9d7d048c45ebb16af88c5c77a66c61424db16245142c772b3e09f481d83806984e5a0ac43b701b171025e22fa787c6d6e7ef523cad8747c038b7803b48e6afa7796737e6fd4d3d189c1dac080be2372b6f1f7f361cbbb00e56ba4f8fc24b83eb53283c0e017ae7f145531e613047bbee1d605ec3268d4c1f37187a84afd120c6b0b1118bb5bb230fb9f3e0d66c9464365eeab719a1316a5a6bf32544eeefd3cd01cd392777cc1b38bc5247237408af4783ac53eeccdb4d9a9e1dd39eb3eb15d4783512a784a480219af19dee5a35b083ff0b4fd3a10c221db98649f76bffb7c0a86bef9211423ff7a9629bb3631fa58c0cdc9948fdacaf817362cd6c2124b78034bb47b76cbe81e4eafcc750b168a6a410adcfbc29b520e03fcec31bda0b69f4502d07f9b3a7b738e85e221ce75b919d12d66e4f96d80d80532b47184383c119b99395ce65f0d0ccd47400b736c04ebd5fc2fae5c85d4774f3dbba093f2d482ca3edd4638d44d89eee7611527de8fe50d0d699f8de1a6b45547c92d34626cd4fe134fa7249bed1341d127dc11d43dacb38c12576cb194974106f89edd4f7243c38f7bbef0d205afbea08b9e85d1f06c3c4bcc9bb37d7135670b63cd4c5424fc23d69d99e668f99109feb70732f2b69b793cb4f0d18e569a8906f5f2b7a47555f2b91658405bed3ee8a2fc27e059cf053f7893626b95c0aafd05f5bcd985fa921c7b3de7345af5973fd9886500c500c9b4e5039c0f9cf5e8e1b30d9ecbb2c9c6162fd1ce3a08456f3f79df146604f0ec2270300455e6365a8c4ebce09edd8622346a84d5eaf153bf6842e5a3d66bf14187eb6d6275396c531ce39da3263ac01ce3d688bda1e63803fb419665061fee0b65b2b865e49e75ce7af7f3fb4d9a45340ae01d34ae4cd9b2eb5ac713f3f47f3e88ef04fa72e7b5eb08d703397a25224e50e62f7cb5da6f6eebbe327e2c2701e0e942e2f8dabdbb3d1fb9b5ad14449ece30ca0700535adb5365562ebdf6e2caf904e0a27554a3db29413b3a731e3adeca9fe7d69b0fa3b4d35b3bd33f3af4bea7124bdd6c508603e409331bac68136148bf4e7b33aa5afc833271a12b62c29105b4e6d8c9c4b91016838d7cccd66916c7a9d7ee47539cc8fda683841bd3d670035edca8ab7a1dd3998bd439d2b841945d2e18fe70591768e5cbd77970169b4d8ffe90924589f309c8f88feddf8ff9416e562711ec132c604b7445df44088ce7deb4fd431f567e78d178e5790360ac233dd83191269a2778026e65dd604038cd1230a0800d0210fabd11cb9d6200eb98f505e3a5b3bfd9de075ac9e768feea2a4353c5a11ff328bb29555699a596e4e2753575b9284d184ad2714e547f37d22351be02db8e23f15f1a3ba05f432426a62b1ce1d6e7951575a0e31145028143815d91c6661d7f8738bc8db2fcf4efa664bd528d9bdf4514d5bbe4aba8b0dbb7ff5a06837b87bf955d9a31e15111880b7f4afd2f5bf0799879ebf708216e4b2fa812efbc6d1391a219b30cdf69fe3bd31eca37d39bbbdcd7d9adaa92aeb4fb9d0362ecacadfe472eb2ce26122a08975cd0099fa35f63d1e85d264c5a70b5fb9d747bfd00bc7f028c9e14715fb6d4d3d22da0c64a29e4632def25e21781cb31372c1c1379a42e63c555fe3058d987ada9df1748fe80786f28da28eb3d27dde809bdd3827536bbf518bcf1dd9ff0cbd2680e3d4649bbab9d3a57276edd35570771ac7a476bbb29e37f20b40abd92838ec189dc8c0bceec0cb52e1ff960e63d1bc920caa74bfd7ee71765f99f947ecf10c7263c1d5ac66ee61373c82c86f9e7b3d05abaca5fbd7a7c900eb4682984f2d193d27259cbde91ff2b7bfe80c759f53795b695204d4abac2303bbb7c15860a676d64c7fd8ab60b61e05be4250cc798cf80479807fc4aa8815392b0fee73d72a014f3387ee49b8d86fa3fa183eb1373a04652ae0e000c14c652b0aa97d880c769bfd8743899c8e798289e817cf2efbe7dbad644a25978ba6637a197ac9487ad2ac01bd12fd766ce3669aadfb24ecc1db812a329895cc1aed84c209d7dbcc93c86ee9172f68c7c7e24e41cf782f99d338cc799fe38f3e0d0e6eab8609e7ab8ffe700d366fef577ecd6a3a4cd43e8a81be75729b5c931c755f4faf35548bde5d02f8415f3feeec06e091651890283d848c1ac5e231c8629ab303e48a3cda1462acc4a8501c8397e45f1c12a534cfb78e376b0a876b5a46b6f5b011d619cc0a1666f50e4f7ab9f93e4f4e70406e1c442c884cabcd818c8c8e99b23c74312fe9bb8ff1831ab2e2d38333011743fbbcd93fe1fec46654aa7a35f18f732ca13127e465cec694ca2a2a2fc96832e9a8cbd13d1f3babde3bf616e8bb1d3d22f7721ef744a7b399c60a149784ffac1dc193e20c63c032b7c9519041a23828e17dc2db646e7f318f832607ab42586e553c94e41510f479d0d810fa99874851c4717588628aa67fe904432ccf35530b1f091829adc1ddfd47ffdb336aefe137d88cd56b401c7695eb4ce544c2f1cd5a6f56cfc0da8404ea3b3d3ac3b74a154b614f1138ef17ff60334d0dab3d72db90297161d8b8d385f26707ccb52a746806631fab2a457ec126481fb2fd56dc71391d87b62ef81323aea20e9c7562c5f2b0db280e32437e426f39e4d92a998bd5fb6b821e4773ef2511f089a9c66d617b145449e66fb75a8f875bd6a6d91bd8766b0c86a5c7ece202c1ea2bdfc234b47fe8f11daa32aba214d5897649e33a868ffc774caa49858af408f4cb36c37f5d6d0ffa1303775808cbfacc831cfd2008c807ac1e9a39be58919602188d1fb8334e92e5643b90e39ebcf34ce81f8b4b653e23050c341b798aa6e1abbaf9a8a48afd826a403992225da8e1a8dffcdcfe2a357761890775a3668d60e56e2e8a6c1f5fb5b0c2dd835d1fc532a1f78bcf812e8053729cbe542169bd8627e323a363ae2d1426148572ea23b2ebcc5b47b287d141d29e03dc2d0435ce35627bca573bdc22774593fb833bad4bf59ee00314998f3aa3143c51a76526f62f8da9ef7ee57ae8c68ad42ca60fd400555223d877c1e647a2b18ae6e862e9d4d0e42834cff81c0f4fea48e422d428aa971198452529a27cd7b25bd79b1cef47eb5773d290ad0f3cd31c66e46620a3bdc1727019935b36c9647c71e148595841bad9e861a04f1be5bc2ebb53a8436d33496344bde7577ed33358ba4e0d772c0cdbca5d8d75109373743d360e7edf6fc4184513a1caf1b9c799002e368eee7a6b85cdb65532e26850efe56b8546cc07e22c2865b83cf8c655cc590559ef394a43a46787dc9fe3372d2a9fe4ae7a74e2ab849558a3c630242c8f8b35117754c75a2bea3e3be25fb9e659ef0dd7c32cdd2fa381132213ac65957300237d42c6e01410d31482248125c89b7c213bf25412d6bdde872ff88a72dfe3f6f899c88f59a4b6408cda16d9f7bbdf285151dc29529bee69a95440297119b05e796de5aefc866afa7999313a2f169338f2197ea158200177a7aac61e15b3d7f5cbcc8755c031d6c2896de510fcc55d12ed79fc417b7e0969449d0d0a80dd4056b45215614f9f6ec785e7327eb15833717546492e0f239a482912f4738d440f143efe827b39ba3ef40b0e66748ab30c7a2ac7ccfc497c26be45e24e050994e54750efba7da0fc8ee0387317d1a8904ab14fa1f9eeeb0d5833d3dfa2b84ba8261cb9ea7f1f891bcb71528178cba2c307b01c3560fa5e4fca62558cbf31e9a47c40ebad89b93150a0a0170e85b10cd6b5a0cb5c49dce2f8e1cc143e88e5d394c179f32b8595aef9261abe9af6fe2e9a88988d5cb8d5a761574dbe8309374ba1fe4854ef634d0b68f64e06f1af464c9c03a2ec533966d683a66b35b1de144a8bb786f6f6606a5a16ffe1bae34934bc7addcfbf028690ffe68909496ae6c3645d43ca609aca465e39fd66d232ae9d17828bd57bffdfcfa55923468ef8ba6653cb8d406c3802b923a868a23aed550d6630d54d185181e02488c9d17dfffa8a4469a1ddab3d4bb4af822ea78ff13d9bfa3e02e66c21dc2e398a083761b588707f6f7c551d261409da8bf215e6b3af7d386affcf9218f74ad5b405123bfc63320ec0dc1fa2bdb6a4b3c742a8e9c83d9c0400221bdd87b25a1c342afc3baa1e101abb0dc0c6633056922f8e573722a51b909ed75c7eefd6b340b241a00fc10fccefa895ca1cc962ef829b516076a6c554ca7a4fc0f201e0a833dd96b72e7b129e449831bc2c685571a723712c50f87674c037b430211865118e72cd28825a6c0d0c9a164b2c40965efbef903d231de57037361d7c68aa3b10bba855740288ae0e842eba81b17911b786c2cd3abfbd8113746c7e5cc9bfcd1c8b74771125603aacd395053b0d1756028f4d7b9b8a540e3bdad7fa831a4ed7fe1964c8abed7f51e8627db6a8e704e5674127b7f65a17b2619be0da867b04917617e61f3fcaab1fc7f9210e9f0db25d68c83ae1873f595228f2bac401fe770df6842d0fab27c5fd14e6deb31f78825d734de7cfd6c2e7b5294bbc1fba8bf6d133b600cd548191c18665206e48278066ea0c0f060f2d9dfdc0708e52df4c09f62483384260f6be79930d5359c76fe5a366c552a1b5bad34506c89a794eaae849774b16b9dedb12717723fb381951470a2edd423c0629e10f90533f95397c11cfd5ce34dd8ca64e88009a9ffce4dc9e69aa483f3fa6a7ea67325b07d95302a455933bd8e18a72a9a9e55c83f75bb9181a154adaaf81fc2eac3920471537ee5f8b0338e3c5caab100b318ed716a4079690104f2b4cbfd44c9c8ec0be3894ff0941b04e3b84d4bb11dfddd99b41c250bd7ce4d2b893979dfc6e27596f3108ffc157d158ea8b6befe40f9b3bbf1e92389d4ad7d7af4b98be415a29c6b968c62c12f2ae3265659ec69760cc3edc2aa3dfaf5165118ec47d5b4de0bce797367c531eeb7e9fec85329cc7bcfd9f1f61b8708d2bd5036c83af375686c964658d7ee31a9d33b78c9877c1ea38710f6ebab5c63de64db8c0bbd6c2602e3ecc855b757d37e01a4815adcfb167e26e40a99701a713114158b43cea1511e3d2b543510ccc9b0187ade10b8e061b9db204f7e90e6c2961cd1af4370d73a2de4ff3cdb955c6b8ba8df6cc1053706e136d2cb8cbfdf78837ef000459936f2a59bd8406e8795f06b38262290edb8e95134695933f198ea18e31093ad08936e099443041e88b55652870e70f54fb16e36e300dca7efa5a9abc70dc8b73e628dccdfa761978d03dc1508afb4b20a8f0be5a8b9dbc578345ad4fe29efcacba8a5cf907341b0d553e3e914ba4a100b868e843661af28905e0286e7388530811a7c2feb30edd39027731d74b236eb5ae68e6a42622b288a5f8249f2e6d0054a11b30a56919c297a9b1cbe9adc1cf077ff910759b92098a9e9136a9d543be7763f74e2929b9687bd2d610a86745022c6830b365ad5a086b2dabeb2f381da879070ef737ee1a88300b3c6069e6b5ab8043d7eec36825445464cb3c69368e32f1dacc70bb81c50e22fff05e645ed1ddca3d4d4c025713e4dc32b434c5d3644b944ff85d5f177f75e054c80cc6c12a0f6037085b56a91a6542ff455b2decf3906073054e687b092071f513be521078be00d6e07caab48be9924c1eb23a718940e7224f9a25bbb2c753fd33eeffbb3daa5544fc91d6f8b7a6daa96da751ca1890c338322ea3267cdb24f336c122395e8722e8ed5d574846c718a8ce0d477cab068f84994a87111bd51d48431b75c31d225682025511a8bb0509612eed133f049535121330b33d8238c13cec1b53bd948498e8df1efc0171837f6908964e828fabf3269d2748e1225f978893aacb85412be18988ef83dab40012fbb7fd4000194f18b76c32f7d54ae697941dabd8fc8ca7ee969b316261641393e1ec12d1e186f5b05b79a6cff81c4b22a57f23ec59eec85aae105d3bbfbd0e4d5806d97077d75426149635c6c8e818065a051093ab49a2836c794c0d4b55a2424073b23e38e7cad9223c480cfd24fc1b51a1f24c616adac6a91c1dc6e90ca540bd0d089e3509ebab877358965643e47b2c204916e575c94df8d8543c94fe16a87f0a7a139f5f5d534d66f0e3a9873d590a8b5d19eef2f31297bfcb9d764ec87f294287a46b06014ca1b879bbd743fd07bbfe2e5265df6d414eb3e3874ec3db7e399460ffafb7602e8e5bc52cb7e030327746d190e5ba6a5dc0214c50c9c6de576da01c8c8f37889930adca86c84c97f7acd12644de0271ae2822f133c09ef65739c17068b2765ca8865d69917d03f44c8e6ff0d3bd059455e871a9ef375278292e1dae1912dc04b03199675b3fb33d5cef6200fef36465728fd6c988c6b1e736f12d4a519ae9ae2667c553b8e8b11f02615355f1bd141c107de1e637d951b975eeb275cd59e063829aa95ed8c3f8f41f09a931cf7ed1be37d24d9898dc971a3af023ff285cbd1cafd51b1907c3db890e54ca5fbe963ff47be926fea0b1de7fc4a0b89823e064a5d86f4bc3d740b01a1109cf58531e4d3bbcb4ac24a3d21c631c1a55590d94cbcdce361b2f00a8f7bfbecb67a08473f6c3269d90589f0015fc5523fd6ff8d0c85efc9f529e54dbb233bdf33fdc72a69db33a5acc03bbd5ca84a3d8270dbc56ec1236bccd4eec35d40b898dc8618508fd47eb17ebaa0d6d5c212615a81f728012633352e002fd660033a1a98da1512c7e3fb2ba42f387a272e166b00f986ef65e9f8c17dc3c6a4f0126fb3f0c69049c511039d8cac359f0d9921a4172c6a471f72f8d0d3f7bdcd05dc84380089e0bcdb3d973eaa1df6f13c28b8343d3c9f925e3837c0b6aa6f7eee664f16cf65081e3310c3a9c2f7da5a07894e0b794751eb9d58d669436342b34ef89b5678ac850684e44ec3808136080e3d3a424157a0756da846bf7e0a5481e065bdfc629ceaac9e4d2b0348dda1b5f92e8b0de3cb0fbddb80ea8955626c2a53f5531600cb2eda4d3bfc5a8f5006193cdbbd55d926adf1e2d915616766b8fd2c3cbabaf8d38259be0e8c8bdb9896698605c6fb3d307691fccfdd7183e2c131ac20686ac40d10527bdaa1a255e4fc782ad805d151be3a0b7160891d8ade4d1a9befe5eb73b60fac77c4d240519e26f13fcdca0699fef80dc841313ff202dd9168c9349de492f35194c0eff7715e5f7956a267b02e3664c46845ba0e3829a001c056c9cfeb66bd75778290c3cb296119d19e3e0c456b586656207cbf5194b911054d89c479ee60678361f77b9458633f8c36e4029d543c94d39687f19fd5b6d58d68b074fbf2d7358e7c6190f0974670c089e4048d173d4d1cbbc14ed8a080ebb2a12ff9961d2e7209fc0d40c9351bc3d82717ffdece742c2f9b1b9ae3c2a7102c9125f9e726c88ad6362e80346b8d31021b564570f26a95340da8aa711277b01fec47b5aa684db2e7ed3aae1703c7db95fb49ddd318282f2faf94fb52a714312e90ed002da5f0361cd902895ffff655b9c3c38e27ca5508ce78244c24de8eba4549dc5e1993f4c2a51b59592c31af0a2f2d5e4923fce161aa72a76d81e4b9fd53a2bc34f0a996b760545365422dfd90e0b092e2aafefa9c588c1bbc899ef40440bab609a292ada8c0e5b9779482c10b4a86d22fd06d30c8a23b4471041486da7b671cb5aedc7cefff041487139397f8ff419b74e2a26c044d3415e179894dd89b8562f58fc2636399c6cc0c8ef1d7842dd8510229c1fdcbb139935607ac5dc50a71b09e9b0764cb0ddcf9a8c36d1aecb32902c33f80a21a006bfdc8f36cac66f8e057397e92ce26753acb845a2a9385e0ebec0f455a2486b30f00cb80f95f0177df1d67d162bb87ae588121937a1d17e0a0e5eb1b036fa7cf1829178299b839d48ccd23538edbebae9d74ae1a3ad82fe5a7aa1caa007c208ebc64dff2c5a3c8d36a2e3f093320c03b2fb08e99f6357a803b00ccea24d8f3da0cdce066e0d5d42e5fd071deb733f65cafde61d29c878f6e54562898891dab53ea632091f5f6826ff78cefadf1fa74818a621ffca6ee56a86d914158581e1ec31869d5ca6964637e9d0dbd8b67aeb58d1adea16482c2bdc2935a0452cb1dfd74a52ad7b8efaf0d04f898c7f13d79e2b0c1c3e5f5fa7c48d96be31ed90dea0d35d215bb3ede619bd8f60cc8df3db54b6c7d1457fff8e71dd71823384fdb37c7a2d29655dda6fb7f9a1667f4e9dccf8baa184aa610fea63e2876b17d3874ea4306946b666cbd3f1891ca126502d9bb14722d8a2470d8319b185b0aac66d34b1aa25297077203f94bdebac3e46fa1b299eeffd457071b7783f20ce01502da60e76081d1457cdd148f1422ae8b278a2f0febefbc1598ab031385564739f836095cb76c0c309cc3627b5a43491b2213cc4692110db55fbb96c0c7ec40e9eb7041842aac9b99b5422a7ba1c4a7ba86dcb4667869cceaa561dbed7572bbdecd06e706884a31a6648e9b36499981f20839ee0a02741a1af07f4ad7672bd496a2010b1b787b38d38c43d35b986a0ac439f7fb5885a2486d393ce356c4208e14d26449f0f6672b9b88164cdc524527b6205d425d3eea41fed627cbbd31b8e33e4efb7010c9f5015c69e6418cdde8a47c91f4ec58d345e33555af281a2e81b0e9d1e4a4bfa93ee7cd2116733e73a4819b1c7903e2b119848a46099ea6507d7c6f138558a0122f55a1c9c208d33163297775476acde69b245a937a330720167f069972baa78206b46add955486ad4d637c1ae359fed96acbbf047e18d0fc1be36de1cc04ed3dc6a9006c25eef8accdd28f830b684c713c5298d448df704106252a0870358fddd05da5fae3d9cfb087453b18a37b0d5db38d30673d8aafb614d47fdea0e2c5698fdd09b1a303eb859067427a0438d2bbe33a99c7191b867d4cca8f07030f5c4ddddbf4d87c9fe4e67b1b4b8109e3630ee2d48fa996ba45dcf320fe32b648e99136db00e8196607817eac77756a283cf4fe44551860fe47ec08058a8c69bac1235a8eb76475e2d040480f26e55f4bc7897018dc524a66f088af9a5972b5839f760b668caaafb7a5f732fd8afed3283d7a8a02de65c1cd99c0ea2461b5f7f325a9e88f7f21d526a587f2f6e774f07c2d1c4a3c93ab2402cad1f18445523daa97c0e1792c6102fff0832c5effbfb533eb90fabc4880cfe826a7acfdca1d899175705e3b0410485ba436e7142d6cf987deb170e9fcafcf61484bc9db413c4aab626160e90eecfe0c2d87849f058310bb45bbb6a0e184bdda367d10895049f7a8675cbd52adc88a0f4c74a1f4f1388d1b6978c1e9eae4c84a29adbdbbf5cf77b57b70d717f0b646cdef3ea1aac4cbbf2c5683635b48916a34ce364b7cc44fa8dd2ec5e8313a29116d0516b3ab1f36be72e8a69a480429e10255b9d28c0c57d21bd24f746003a9cb8d085ae4bdb912e24302778655cd94e4bd4c409ffea7175257025b2f5b5d9a1a84bbf41c08849c427e5f35cff72b24d18f38d554d5be2bab18b92626c6ec4dfede58ab4791ae258fc5d698c2893a8f953d533a1db3d4ba2728f7f2b940c1bb722e63b3a757b0e61806d0e1b3da4efcdeaf3144b59329a6bcf32cacfe2a2bd5336ca3149b4d631d280c709fa4f48fb3db945ed77be571215cf1cc18eff2f10df34d2255f170a062e7c111a16c3d993667826cb560f97d7b401a30f12194638556f6521175293314fc994a3d0159b6fec4dd7280e89c8fcee9614f00c869f65f6e29ee9c410b9693d549804a77094cdcea4a61e704f11ce91447149715f151124dd44aaa9f304a01abafeab0fb0aaf4fff1631fab672afe0758a9ecea50d581c33a6e603610946fa8ea0b6624784689152c196efaa2e7408068dd48609ff2fd14108ec1be5ccedb7ed8bc6cf985aab304b4ed1f6c134c67562c5af559f5cd96873f1bda71c27eb3472aed8eb43d570ea9030d2d2c51e657885d6b7be3d19b5c48ea867652fefcb342716615df00626c61ce10327298a2ebf8aff382186b3ef05e4dcce93279dab34d9e82543065bb9aeac53e6c7d8d7e3533aea2cfa22d390a9481f2e0393e9f70e05f3e71a0da6161910161648d1bac48a46a26e2c989b23124f2df3528d57f799119e54a8e761ed8b45e3405edfc546e29f34866aa354d0586c391fbb86e68b3d88cf4a13dba2c5c12580d8bb8c3fbbe8026cbbbfa01361687cb90a626fa358eef534516ea1fc74673e75c5c7b1c9465d6c1b1c306ed06d87fbbf61b659147c494c7c35c5d12cb247e49b876fceab99edbcada14352c0dbb620769ee1583cef55f4f8ea9312addcf030f40c61fb1e4789357d510d0ad4c7fa0618103364d13e46290c6790ee03cddf2133e08364d2c8f97aeee43b071c652387065fca551fef359ed771bece3e5cc8716677be1ee4d9f4a2493e6df0f17182c6945306995e0d006ae70f45dd54e33ab5909ae7d88bfa12672ac0ee7f6d37da02c568a036e8ccdf8fea124c87f406c4c291b6ed7a5838eb565b947b462ed2133a1ed234edd45f6edf37b0129d3ee30c01c72f1a3282240f2a72b6f398ed2a90b727853c5fffe44cdeadbed996abf8d9087a5b081ffd7c4b34a651ee94bc63d800b8a680395cc2e209efa5c7d2acf8d6f9475d06abf21c845f2df95d037c1f9bf9f8535e9e09a3b80cb690ec4f74ceb3e6872bc768dbcd83ab369afe405dc02b8b1715926f29d6c78bc771fb055bc4f2226fff9ca3201dcb1dbe4fc871a54b580829d861ffdb556920922535c91176dc224d31af194a042951fd00ee4def7f8509caab3ee798128197daeec1d310e47437abb5552e188a9591ecf43cea2d131b7c67ec09d0ae819ee1c20fb63d833525b4fc5eba6654f22aadc84309e054340a93d8e06705ed0cd95a4035a1098409ccf7ac9fe90e9029609e95b79b042ce628f8d778e509847467e5a880df912fc26201e0e6cece0220594c511e327e32c084d5557ab32cc6275f1493f2cffc7ecc617f3056bbbbd2942392224ead28c172b21e956e98ccdf3aec8c0fd63828a7c227d90cb2e109f8aeec47aed343b94caac710573495179c01d0f8715ad4150ad96ab448ffcb6743c0fb1f5fc615b2ea21cb3566422472464b3922ef021e5e785aaaa9480b2cf7caee420acdd02063f177eceec73f7b7cb7b95f53d6afd4e304c50f935fb989682ca299e6a18999adb38b451304d7e926969035029d3c7be95f1130f25fca884b40777c889ecde7fece882832c92960a2b42eeeef13d1269adb51886efab608d2440d79952ed8cce08eb3ecf083ac3f71143454891822cfd7a85f29b8ddb8c8781bd965d4ea18a59e9024f7a76ad14ea3b20c702c5ac650a6eea155c27ace9802822e5726a737fe664c27a6493e7aa9c2e3b24378723938170e65027038fa89c6529c04c7ca5aebab580efb446ce034ad11d015cd596dc68687c2b55697435b23db78a41b4cf3015900f15ab7c8a0eae034626ab5e6778cc4b5fda69895dfab4737ece945339e3fed7fdcdaa245b45c94ec8a49f3fce41fa9105476614cbe8d6aea4ad6796d6f1e459276f4bf19073098a04fd73531d551647a8ed229cc01e868f216db7f84321126266868c42da87ec496f75052319c23fe00dbd0084810fd881ab276b99e3667ef5ead96a4556d56f30856cda16d7d8e1439913b63e1fea7e064be116c325aec6893d63c6988c8b4845ad9497ab86ae73eaa6644e31764e24634f43c242eefc10aea51f83582728de9aeda84d20dbffd2b27023af6e281abf625ad2cc25cfdc83942b28315b6af3fa5799dbec16b4419edd1819786e9afb797b73ed5d73cb25214cb90a96dba92a0ceb7cc3ca41462afef1943083fa0301e52a9506fea0dfc2fc1411a9bf9dbc6edceba6feecd198625650eafa09d1edd834fe11affa490e28c570e1ed71159c1ae5f979fc3df7afbe3b4a7250b15898fcc7e53ef42157345714da5d42aca01314ce4049d9b71ff552dac60928aaa24e84696cf27a748ec2b0c351f60f93c70b6f6ed230c90bcfb3ea99ef365010302e90c38d5bd20c6b30dba307d696fb7b25eebebfef0f6bb87c4dcdc8451e36dee0e7fa3ac30a358a6a1ca5947545b6c4cc509626c91c4bf3aba5aeba112d80ce281478917d3c1c1efe38af6f412aa29738c43a18ac228e0d580e87b9b55f775cbf7edb7873db3a9552abd0216877d973a5284ef48e6d5acbe1c031ced902d96dc75372a3767b23b2eb1d9cc4c2d834deb927372bf0a7e27ec64fb21b2822cc15919651f9779879d623b7e6bd290fc13507df26a78575225a4b43345a173d6ba3b44955ceb025bbd10286884782885e17db92f3a0f07644e60189e1588adc84cd5f967a474ee295cb9aa4ca80a58ce6a753bebf4c4e4bf3ff4a8d0c0ae4c40d93f3357683d2eae8fa3ec8d240367cc7ce3599511f48b2ef84371a60b2ab20f069270343c1c82eab1644ae12843478b7212e9e5d91c04f93637dde09835df7e99c4e3387d7ab7651a5b6c0f3c257db165512981a471765af409c42ba41ec18b224111057541d97022c4ebb5b3d730a98b6fbede7d4876c056f06d3e87ce728f77b2d13be079bf9d8bd893ca62917c7f582a4402effa2d1314c1ed4b9ecf240a5259210cdd23f22be7998173fda05c79eabd08de10b123ea655948d6cb2ac349a27018e90ea3502920a8528b45f1fa25ad1ea206ba7c0c55bee3b5ab7861b1865419752c588d3c7d6272df4f0fac4ca8914fcebc429aab475c3092214eec74e7049f2bc2295daa2498fb0517ec11f5f5956bd03958e8d42111a7bf0a7ca4121fec7a0e7bfe29525686efbf20a0b7c2369ba9eabc959f6adcad29531db5376dd8d13728d753a1a51d0cf7f96bb8dce806664a714057057d1926df2c790165c9964387a3b062be91c1491b1fea9a1f728e8653a71d53e6301a7e87cf0d85f7ea825bc166b8d6b5daee88b2e7ef0297adc81fab1cfd444a06258752ad46c3d77aabb026d6913f5e9433374829b80fe3ee49c3b5e9cfe9fca48a2f998be540a2814db999b5de9d7d4036f5ee320b3abf3942ef2cedb8b1e9da2e59e93d909447e8bbcb4548a6261573088cbcccbfbb08fd3c34f7d757ae716e07af55c6498d972e600c6e29e33bc5444b0fbde56ceb133042f8eeaf48700939115da9ed1b17649d973cb25b3868f95fe20603b3ecd92db7ac9f0ef474824f99e4770242cbc5ed2968751205fc3185e6ea4000ca30b3be7b3875b2f99d1db53b206099ab169ca2bacd48bf970de75821e326cacc590ffea4d84b9d5352766e9054869d204a9b141d439da98856c54b94f29fa370fbc21783174ca86b7f62611044a9d60c249270b280b6be2f45aa63b6ebbc79d23504f161fee9a27f84e6be466d8b647bb97a1b32aff36d5892a48e11d7e6afb8e5f11179efe1c763ff4069c813e056109eb88f4d06d265cc6c74ed179df8458f572c842fad3c53d7b50370ee9384c598a8eff74e4f09557e7ad20b358cd2c38bb93c0034bed5d4945c466d8d672d5e5911629ee6b31b6a74dc8940b862ed0b0f82a01f71f79879926d6fc9cbc35704f59331c6dfa5f276545c19baf7b618814c2ac2f4e6392bb9320d59a0eb2410d4d2a403282691027972b5507449c454e288447776f3d4298ae582712e01068acf84904efd2e465968dd3a7f9c4dfe941b3b5f932a50d82b0bd536bf4fdfbc4685dceec12e6a73f2f2cba6dbf93b7956ebe39daa5dfdee29951011b0102c07b2ef5d463ed988ac47a06eadddb16a0bd668be6ac2b2f8eaefa9dd97d943ad45b2030cf0ec96c026bd8576ae55e55751e9bb0cef911ae98e9eb560b77f3ccbf985a69bb4056c14085d0b2cc36fcb524693ebf89ef455bfdb95ec69cad184a2bc9cf05e8507990ddd14caed1b83ee68c2389023ce5e3e0d6cfe009b6e31375a23268a2c153e2cc2fbfe99f439bc21a38d4e16712960263bd0b98b23633c218fefa9095c137a6506941408159745876e96758c7c3632fcb09e686b59f6023af148a387fc979a7fcfd97a00d5b9b9dd71a6a5e351e65ceebb9fd767bc2d9fcfc93b9526896bd8a61252c4a4615bbcfcf9e2978e177638a01f64d06804d6051cb7f97469783a8a715c84d60f1c115af9dd7fc9b759a295cf9e68e9bd43ac07689844a17d298fa707d38675d95a7fb04bc60b838f57e3ccbbe4f1e3db14ed4dfa7afd40be88f4d222ab066a4b8b9f105dca8fbc14c25fec9c49a898f4c8bfe91779a005ed7fcb175a6ee898483e43987cf920eccf8af591481fdfd796499e16a8ecac57ab2b1fdf048bc907df4a5445b1ec2ba6a8d6a0effb645a6fa4e02caf33de7479d50295cc48d70b8987fa103b0c2f57d2350aa9e0b76ace083ad129edf121c43efcf8fceeeea5ddca08ba2bd6eb05175cf9cad4e4c3ab00c8ca884beb65202c41d939be1a185dfaef0a46931063bea46cb0dfca244fc2b7ae441ae00c89c2b8f0838e469ceb0ef2e7703b0cebc152d32c9fd584b6e93914020ec6d1dea677439ec9c89bf41723399b9fe8f2ab18b8115591dff57643bbbe64fbfcdf5c56edc339076d145f647898b1a3b5a42e4b4f6f793c017c7f6d8cea68f916fa07f25e30840efc2d4b167350033aeb47c5e73be46f78bfbe73a079b04ce2bbfc381c947501164ae8269331ea0a51011e2825d122fcc5dd1bfa7124ddd26f6c4be393a3dd57167f31e0f666a29ec3d2206e4f2a566cbccb9062b46eb15db0bb4a3068a4ef208aa13a8c11223f701e33bd937950246a1b4efe8426e2d55376b4050facc9ba21fef9b426c53fcda4cabd6e38e93f87c122669292cda3d4665e84b6384da23b712f864824ad281ed37504aaafecd19ba1d2f5770dd836830ff2abe5e9d7c2de0558316a8d427657f0a984b1028f802f822eba888506f9960a57629645757063e763e59901d5c4a3b0f541cbc9683435bce5a4532e957c8b3c8b5f1510b5460779b80b45cfed821bca2135e1ad17bb9ab293828ae3296b6117f56c6b7bb54e83cb906be9dda44800630c40a473cecacc61bf51aee578b4125bf9dd7ca24288f65303d6f72c360319fa34ceac70bee4046440d2f6ff8f2cd3ba6376ee060e2e8193c6d2a624c7b52a19459dd3e6bc299ef83ddcf55c848f36c801880dc7ab692a0a745ee4363c705488a6b4f3a7e02ba6c877e11749aa870fad0e297e41b70b8b3248a147af95985344f54188d50e87e0ec6702d05ff9921699ea3a846cf73968e9e819d493bd0b8b4fe9a3464b1ea0720ca67b3fad302d79ae6a67e8e5e2e36202805bd92cbc30c2d57924c1b6aa49b0178416f80100d92d5dd12b9e5dee1f976a0d964b139847cac0686119a86667074122714b684c3a05834b231b06c89a6ff36d1b46d6580258d20817437350626b9e50aaff3f03b777e048c13b81a87a6394a9ce867b6ca36d99017cd604c449d55e52680e40b2d1d6d3e9067853df6cc8316f0a578ad3c2b70c109b1d1097b2c55dee75069d88070f7421dcc40f7fad7f1fe33e47648eaa30d3c6d7c5892460d0570a879681c70a184301881437741a6e824f49cf8d7dd3342222285de11ae77e5048c8deb4df2a09fec6216d33b96f31c8b221a4139afa8405c5b6702bfb7bbbe879bb87394ab9cf8977245a4e3435dd71875a8eaed598c05e057bbd3bbbe8f345efe34fb0e245d9f81eb5971803846c9ac29e113eec2688da26907cf3258260509a7fac9c0afeca4d91fe64b467e0027f984ee41d297e791937b35d0f41ad7f84af22ff199ea1313252461875fecfa5b786fb7dd2039d16baa61e55af87f6167f7fc2033293368075d5018b0e21f4f812431ac71856cf1ae4037d5d24d710cf6255db0c2d957d4f28f5ffd47e0f34a72a0c502a6ec962aa6478dcbed1c223bd355fcb763e41c3b87618799c16a5e6740501b41145209d0c56061b3caf80ae97d400480dbb531dcf0f31fcdd2118ffca9769770aa060968967de2715b49ef8a1af6f08aecbb20220ed2480a9893e23874c58a1f60915d41b01c747158f2fdead4a8a9f714f7a2255bf368a5f73a71e37fd2534ba0f46802f2014cf54b0139b8852b3ce604fa19d775c9a6a7ef1497569fb015988f5d3d8deb224d5c400f80b7f5a3707f0ba670e4e1e4d9cd45f52f70cb70c8a1c84615d3c585966e2f5715ce81328ae541db8ebe632e5d423b6329e9cc652a8091619608113bdc8f1e5eb23574e4a964c1e9bafcc8a0309faa5f9075e5b595e36a40ba9554c508dafe1e5559fd8219da80f7896b1207872a05e02f895a668939bc5db9123bda64f123a4565c54c1c7eb789dde3a53a21c6afab56c9b69c2597e29d0ecd8c1b16df3977a43207de4b09797ce69523ba9ec6d3c40cc9ca325644c4cbb3e326577530b7b7ebb5c4e8c24d83771e85c6435f51101a8d2983238b0a65bcfcb8f737938346899588475d8a25d017cc027570a59ebe94466d6821c062f102bb121172788ce1ef1b54b1f44cb7b7a66bea99d9e645d483886684997902f661dd13b08c465e4dec2408df99e6543dab65ef289d20001391725ea8f9fcf78170b796edbaa58e4b005d21da94ee934ed7e285223f4a7d33cfe9cbdabca518b64f77dd7276c5528932e06645cfb2ebc86de1c8525b0f0b6712248a3941da98f9dfc1042a43a84ec4f1b3d96009f603eb1e7bbfa319a17c0fa7fa712ac35312a6b6820313f5a5d18b1e9531b960807ce4e2626970eea401f74f1b5a647193a119ad1c316c2866989a3dd2c6f6bdf7d1d43b38c7d74241dbdc1c4e80e8960dbe81ec8aa2370bd8380b68ea981782c4bd01409307970e63be4fc9384cd63026e400f745d85401711e2894217bea5f83e5f450330f16d69b04d791739b7edcc592a697918bd33cf8e97bcf5fce40cc125b6d8bb23ab1992175bfd2592200e2952c9264acde59e21c32410e82c4dd241b842d5e7cbea58337d12f6e29bcd976ef0a229d80fdeb4479ec27f11cfa96a8bd7aca5f80a6226d3e071bf19c5240646103dba184e73160a4bee50bef95005595306f551ddb72a455a231c204b2529c841b724d0f0c70e485defde96e4d8290e22fe069e3949e3085819953e8e244ba9887f98caf7b01d61f14614d5678fc74e7d748754103d6612067da15b728766644a57ab47a8a2b3daa6e2f887c8eb606681624f3418e58d947856452d41a7c4dfebab9fb64131cd13970fa733cb93ad408b3a3ece34eefb2580c28ad8e43ea2ace3c5bf3e3a18a2410bb4a041ef6f37a72ca47380b391da3109030e9b4edcea714e4e33affdc74205239e72cb7584d10bc01e0decae864476e6df33b0d606ffe5f2f5537e1f85a80273dfdd0194d10e5d2d1b4cf457bc3ce57b99128d66c4082d82122171dc508596676f016ee1603971eccbc64325187a99bc5e36a2dec9ba2507ca99186ca93f7dd3f9bc3442748124340070d378a5a79b5ce5272a99c92d7d1a9a5e1793e859d9213aa464970e2b376cc6cd0339705d22f7e91acd80f13b68faa2f8f3be2a8acb9da732e7927dbf206c8c41f2c5f59b246a4ee60f2b86d1fc0958c53bf9671b18b045945cf423302ea51bb6f51768386374f544c6ee578d5767092857ab2390cbebe47e73bc413a49e1bb7b050a84fa3bcdc3370e78f6881e9e08d7e44a64726dde5f67c1462120ca9800473a1fd0a32a39ee5adc9619009eee5623c15ca471e122aa724a82f03be9aecf65910d0fee8764832b2de464ca0735419a46a386c8be51a5962a94f235bea7de60c18f47986b41d767c539e827457f0f62cb768fac4a882b510f34a572a2aee8eb98b4ceae4c1b724760d51f8579955ad4b892d1ec7c00f13934e8e8d58cacaf258b2413c0661396a4a39720afb96e1f709732e32815c5f2f429d04aae06f1f92d02cacc1ffd9adae4edd2e6e823e7ad4d86f4aec2ba38e0511c6771c2717dbe3558637897e4946df25ab55429c1a0aad7b9cdbba2ee11f46e30ea3c4e8145c93cd2dd0cc3c7648d6319b4e6d32667bda1b0bbfebe65c6c79c512d5db979deaf47876c0659417eaf9e4c2802e62da02080040c64b5cd14a641c132463e1e060b5cf0fec807b1ca8d1a8e3df0687d13b644893ae71b860b2563491b6008f9cc26550e0e0d0a4c669ab8a4ffbf254be8465ade52d5e18bed2a6c80ce9908d6c13e6113cdab3e05cfc182c597bd19e7b6a03ae12f303a908675e87744717cd8b65e086766b1013fbccf7d45a283faef5e48aac085b4f4e3b6ab856540f4e963d7259f89934f6639b2fe28f5901fccce0236b00f11eb81e503c63f9b77727b2a9331d3b9c9783a215a70bbe4e4c2a8f8b21d1f1b399b4a2f941be2b3c7ef717113b3a66eba5fda637646e508308eb763a79821a9b8057e06fd7abbd42e541b8c64421dbfbb13445dcdc607cd38a24b9edb0b09eecea92ee78c205ad86e7e865042f9714ce9051f7c552189adab324afd80ec302aad059669dd4678845d614a8b150b7dc0c21f48805e1e2797c9432a45d5c41d5a10ed3dbdfc1803172a18519eb77e9b5c5e39ab8bb9bb21f23c62da05f58b51ec81d685dfce6a64c91bf5b3d287ce71941918b3c05c48613e407cb5de81dec71f283c77826b8347cdc8275f77d46a4285c5c75f7ed87123511e7bcd07f30f4811ca5d34129e72069608531cbef3ac00b551d1d309da3bdbc752c7d1cccdb9dc1030557241babcf3d59052d6c10d6162ae842757bfe5ab449ab082955137aaca99a2bf58c789a34bd7a8c8714928c504fb7237f35ac90801928420667b61e39a0d937c870e1902a3a7a162caa45325c228ba884afa0bdd7e7ad755d3711ea6b343c7cef5e329f14ac7302c5f096688450296a47d5534c3858022edfb314e52d0e827097eaf1a7caafb0041e6da7610677392562627015f7a7a34b483cbaccef2715b3fa42680988216d5e4a30c98314dbc68c72fbd865e9fa2809388a0bb299d1603d1652c679145e41bc5123a72c25bba6af0b5db5776965bda59641156cdbccb9729b7f9df2b995f0086c947c1bddbf2886516c67a157f17f5bea14bece74bc9db4e096c1caf26d78f674d2b9e3c5d803b55da31ea48bd942e7051885abec424a84c95a57656bec5abe28bcb751e355962e7e0d3f7b2bbc860ee83ac58feab3c9bbb3c687d41456426e94cb4daea008a34b42f3361089df46e5c7d34732b953fc7a2e86925e4c0707c82a32dde72d53db7d6ee76bccff092d1099e5bc89f326b135ac696042cf03ba0133885cbd35d1a386fe2ff86d3d65bbb06e80f4d795e70d51b4d2bca825f54b6a438e3d4374eb64afea28b6aa1dbf199f6d108c194ce562e0fdd97e66417cddc0a0f4be9587b005cf26c97d1df388c2d492f9c56e27525a77720d88573f46d8545d823a3cdffab9cceaaac7b3d833ebc640bb2f4301e38de3d53535c9d192a27d99b025ece3ee02cb52d6276535828376c6fb2eec8e9e4be72dbc674f5e8be8358fa61de240b928d4e97e20f5ec70348580ab7176faef6c8ad80c88ef2d8d3f7f332c8e6484adaa8bce1ada54733f8aa36362ffcdd0ab7b87945e4f809d2071c0ed39c9f508121a6963256e14a406b05658ca728849db111e8ad5f3090d567d43af9ca73b5d3eeed913eaa6a861d6c0e741898977cc01bdfe38d4d0c9e5a58fea0eef88c97bedafcc26968f4628b0dc340ad767d3eb38d476db3f623afe820ddfaf6fd52414901abbd2c718e62f507b49cda1975358dd3c196106f484ade11a79fbb26476025c1ba188d79fc62abbdf5f252dbabe058da0879354cf940fb5cb12b235372e7ccb5ae27098fd782b951b68fdb18952804198a854a0a86271862928b0f884c21d4fc935c200f6dde1a828b4ed80a507c532a333758d9d437447038a39efe47fa8a4b3bf94869d8c9b03a9c07e3988777867cf4ce820f09ee59bcd1d68c8b25840b44b73775b7c457cca77f989b1fe1737c5fb6dccfd0926d93fee2868a8174ffb20353652e48d8f875e9f914d91e9de5274e172229a34fa408bae1364a9f4dacdaa6d025c8e477a5e916500689c683a843fb63e4f0a9ba473409698bcd83c46f6ff932a67f719ece6536ccbdd5bedfb5ea873cc9a5adbf303850efd680218bc31af4b2615c04c0536b5ab511624ee7f51806ea38e3355c6220508660ff430465f76ec5a6a86635b3d16e88e7780811d33366f26e3fd4a2e187a4f5312e9ba733d545b66f13a0d8cc924dba961fa9dcb462406dc239f71c0fdb29d62907c5a6b7c856f146ffe777be72475dcf14edcd81c021de954c067beec0b89d3499b506b27a5611134a7a0ce71e3b2637bf04753ba37284656414a031fdb3e2c6271b9b1ccb259da2306965b4eb5b21779e986f144109553fba205ba658e0888b00bf4518b37f3ffd1e30aaf3bb44fe0369aefa4bb3da3456ff87729cbe3ca37cea19d761a9e0f255aa25be60f1d8ac5925a2462eaf7d6e0184f6a4ad74bc32da668f0615643a281f5004fdc6598c740bfb691f25896666cb63f0f1e8f7be36d9606e4d0d3bb3f32005ed19eb05070e5d9d54d0e04e92287f95e3c64f858337bad4c6e51d76f6b945fa71bcc8a4fe4cb6fc1c0cc4be3649b4a2b0a20905f5582e237ce6480206959e150c6523ca4cb18fa33aaf9f6cb405284f93538cf9be6737904c2152da3d40dadd14e7c85b7a72edb3d8211b5f303a52386c556579888e4804e6a3d758ad225b5ba4aac6e70fc4641ac1749910aab9964379686d90a0811287c2dd33ccab17b9b5f83d2ed2e74bfc594a4d7f9a9eec2bb6266fb4f7f6533430bb4735abff6b9880731bc4177f854ea440918e62a729c25d8365442277c7a5fe90d6c4fb273ae9dc4f1e378ece8dfa18308f52c02eeafff5f296ed54760f082d5aeb2417b8661811fb1750f89af91a5c18b9b342d04186989a4456271b7530821aa932d23c1d6a21200f22afa892cc94cd9b7818495816a8912332789b4a22cad5e26efa5b572cd4d022c497e378f73c51d4303804404b10efb3aca7ca0c6b11f2d5421f0ddb7f3ef9e28a6ec43175e33ec70d81b8627dede2d466964d1e5db8f6228cd4e9fd444319c11760643e13ded3d36a7bb92e169b53731635aef755e0ef5a2ac563410f3623e4eace934281d233752b947103f4f77df99b5b2ffdcaf11d5273f97fb525b0efc86340fa3a8245e3ec234f03ebcc79a8a028d55ecfadecbee3a10a322361a946d7f238d608bbf7d37c14ee106526da0ba4e8a45d6bf9f35d9dc8f5e4cece4e17a187eacd9b42514794dd0265cea386faff72e28574c59ef756a7c34730370bdfd6be17b626b83b42868f01bc7d0c0553603e48b369aa9c3e74584f1388b0da43422d4f6bd6076e2253a5715b20683737ce1c8b2068d02bc1c747b9c8078b4717cf8fb9d0bff3e853d210b52facd8689879f73b11f46c57decfec12227f9b79b02501bd588bd844dcee2ed1bfbf3b381938fa0fc758745939a47987acbc765d8bc8f3c72a0199bfc3c6c5194b6f34ce852f33fb60f043e9adb1212628656411c3ee60544f180c217a7f17af7e5827dce4c549d8ce2fafbebe8690da4ce4a3eb3d2d1d32a259824ac1ea99ba7f1c240342cd0d2a80cb1b0f5d7300994abfec466f93f5edc3958a92d1f73252ba0ef15dfc0f291619515422ad564f34e3a8a11c72002f2a071b2ede9fbdfc258867bfc27bb88bb95ec612927dceb4ec58ec46f4c2ff56494cd180e73355eb2a8f1e3317b5208adb54a78dd56d964bc2b8b6da2d5b7de4c37a0c13bfca87fb6d3a328506ab8192a7bb20129469111eed78e5cc4090420513711dd74ecc56c8178ca8d5441d99ea514f3a78952066299cf84b4dc0a7ff0164d2d52faf160343385d1c444f6a159ba3576b730e9b4fb10198fea3a71292bc5328b18aba2c9f208d198b1cc0dceea5bbdeeb6cc0743a478ac0edcbbccd9a1f5d0757d25f494d91ef9bb527e30ee0a1e420bf8af434e6a53099cfd59928465034bd17f313494b7d293d6c424d0f4661e1757e8491844e275871bba830ff883d56e83db49a17c4edcb7db96c61495c12a94d729a9a32f7eb8a2839e72030623ce8377d5970576b6396400b79b55c369ef5637ca060c82cb2628cd467e0704da75e1fc376b163372c1966034c05db7be4c9b5204a980a4609b54547aa41421754a6777ff8c44f0e5d49d52129781281703a7a6ff1ed613db891c3909966b8892a98ddad2e599ec007a55ad0f25c3eb50f82cbb673ace9490b4c3c1a1bb202c3e0e2fac1e72b04e67264e62fa152ae7064e6f61863b46c563e49fb7537c220da0f08ca9617491c2c7e791169445ab606fa2ee7b4e8ef1d5c5468d1315854866ad77034b57f08e316d2877fd1043f61632c1a8a79e32b7ff75bff2a2fa180946fe7c1a3d75d68d98a76541ce2494aeebcd1cf190582b5a5f81a55aa37fd6d632232c9fcee770ceb60258c49834b88f911c572ce7b44debe214671683de9914680b534c763451333f49b92237784c7a239e3a76585f760dd9c79f6386cb9a20f4418bff077fa15d1fc5ed26ef7ab7803e4874e80a1994eced98c43c346e464c6921e7e032d6dfab8cd25dabf1d46ab6524e797332452bca3ce13694fda88f5f04c8304c12b39fdcf35381f6bd494d7962b23bc2c24f8d1e9f973f3f0bd053d34c2835b8475468d61fd1ba60bca11e81c266d4ce31e5ed23991dc52270fafc809517148b3750b0fcc31daedd6180f08d766456035fe7178acea6c0dbcec2ea81b784144ea4ba70596f9e9a8d012a46ef1ecbddd38d66b8c56fb412c97d776f97072279f0f7258dbb217ea5da499dc64692256fd9fe55f3d117824fcddf9954c1b3dbdec48c3a41cc95ca6e679b488b8ab23bcdabb49abbd856eabe0c057a4e8a14e9f6a4e6cb29a24f1ec0ecc78a1bce3df5d2deed6740d4579650e2f16510fc5e3fb7b28ebce4585ae788d0549ad4c2307addaf23c334fc5c6b2d7098231bf8603a7179b4e4ee835249c581859e14085ddc39815023c7d66237cc664524b3f96c19500bbe50b9d0d3a614cbec30940553802517caddabbb1de5f4773774536e8ce0ebe3ee60e2f8aff7c58aa1adc426d388181a3e45ac0a32965c71cf8aedb43623afa5b25c4e6d2ac625f1c826d2620d0949324ea93772469081b8e8194e6977d2fc4cc2836e08b5e8b9e4030c9c9b3b0fc08db686b9b659ae248f78697cc9bcdec6d7d5ce062dc7c4d1cbff8e2fa2a430acbbc4d9ccc003738c2ed5158eb85a5e6cd84219b79bcd99e9e6870266a61301977a5d0732b9aa193e02a0f9bcc9a80db97a01482d836d71f2b50dc84b6df2f97d6bcea849e27a18c8dc04d2ab8c2658d18dbb4f88de0bb6a5a6202e31c28ba71fc651c6754bf3326391f6d505a599edfb7dcd6de070936a858e58cdfbcd28eed0eccdedaf10c8512b7bc9d2bde69610146f3db847f967e989a6a91b0c43bb3d3347eca164b3676e1d39f4c09293a0733d05204d143d266d171fb15f8dbcd7626b2f3d8bb1da9229d8fefb573889ea43a17527c5843212f72f768497d9124dc068eba0b48a8af283786344214a1922dd069c025ae0e6a2ae7baac01e2a1d5fde8269a5b6a1ac3930d09fd5426a1cac42cc1aec3764aa21c2209fb01558675ea3eaa2624f130793114c11584003fc5f025146fd4bf5ab301ba2a659dc2a805451c51f83d71138b271fe41fd51db9c4e884f5623f3624af8e829f62f68cd01281dec016bc417f2ade7b8758db2fcde47a12baa71e81d5838c57b1304a35420581723fb2660085cfc4620a6e77b4afe290a5a7284114074a1a1e608c2e66f4dee0e3764315cc851298a629c344e67d485e0e3404069daff67616e2eadf087ab01ddef329419f4ed2acbbc1d33e1df3312c12e28049d6435ce23836a42b1777dc33ed03eb3aa615dc78a791c3aee473049c8183c2575d1de0e99744b7ad36c69d3961f0ce9e4b030b69ddb39d0ed90f02e6a42bbd0257a843fad4095bd5abef998e6f0352f7b5192ef32f36c078c6ac88158c06f87e6f0ddfdf53f741034358552b2ff4bca27da7c629aaa0f504dcf01b5a193f96a9440b7f706b95409d1078e6d54a3a3fbed8d9d29252daefe735cf19aa7f722290e7a214393b7fbf05ba5007b5bbb9bfd60d8387931e41755787b11d95e995571f6874b40b030a9c696d870314b611292a40e8feb892e3eebfb616c25c7ff6697afb60212be3ea1a0d5eb105651dc9d60505ade6bc4e0905c229ecb8c5dcf67d92d76d40f58bee57dc5e3a398c8426105f41ed2096d331c1d1815103c67c05e47323f0a491950ed13704743431400b5ebfb046d87e7450ad6c6734b2328a33ed8a5f9b8b2381ba55c510542752a176e1a8941b252333bb6f19a760b2cf875e74676b4048d51670978f58b37558f9bec4def54647362fae2fe90b89f0f60342fcb48932e10b9400ee1e5fd53b19e6ede6f268ecf4757b6f97e83149b57ae4650ce2f5110b5d92fa636f2eec8fe8fd8b1ae1a1257b8a675d46cbfdc7d321b2c99a656d87f3d0e4c446da138a73c19079a9a9c7799628fba980ea9393d94426f7123ce47070d8ce6e9bfd9c35c66f0adeb8376a6d2c54786206177f49857055b15c4e3c60da64b02bad5bb0f076195c48cb1e6e30436aad407cc7238559c60ec8f94637233fdf14463e01cfff0feac581fc553931e3ebdbf80dbf252d23bab720aad0e2ca2497f1eb230e62275633569e11c96961713e98635921d669246791fc9cbc1a3987c3317153aec0c5a6ea56c738a5f648930938dda335e9a8c44a0b44895a715aa2293a8b25cc98cbdd693d3a091c82918639e51e9c1b7f235259cbab3bcaf5b549c2ca21d725cf0624c87f27a88213bd12816f119f8e9a8cd28c7111af4041d06584ab7b89811bbefcc1c19e72d290f396fc63063052be928742252089a1e475b4967b8c7bbbe73e16cb936a89227caf2bd38bc3fc46bd643be493c3138f896937b5b0f052c038856b75e36c3a94ab07471def2d53c63834f1f99a927521cfbedb7d4fb673109c32e50f25f6ce49599a1a4a3ad9afb00d5a2e955f4e306bfcdf04d7a02c11a4c8b3e2efb3c1d253b80ef355b2b193a039b088dbcc79d627d9227ac7c2c2f044d92097ce33fff12562fff455938832c4ea72f4b01d7efa53ee3da2cdee7809dfce3dae58a1a669e6d0492492ea7ee6325c5712e724ebaef45ee78617beedee7d8304a003874092edb7fd308062dcf8154fe214faccc5f933b61774e88e46383082a1d38d2189b17801e24e256be93e67d337534096b8a10ceac1b70243c77dc5ddf8769b980ddc896ff8a788abcde62d741beffa917a4a7529d7a418a0da0e0277b810a4b242a7ca53a18a1579d9a5a40f2ac03e930b647b075efb37edbd6835fe2db00769f80006c7fab972b5ff36f657ba31d72f9a3cef558d120c42c0cd0bb83b13bf26d93cfb90c2f68d3c9fc98b2e40762ecdbe8610ff3882d82d2b4671862d31986c96046d771ce1bb873b27a6c7af70b3cf7e3270491be3957230327defae1ba2122829f21a082fad58979e7cf532b246b4355cc36d09f8277e2fb9e5e26e0e9acd921cc1efd0682773231c04dadf0a7d5493440525bd7cf389a558b599b829d401286a8940600bc78f88d568a13f7a7a908bdeb14c5493315889367745e6fd3bd4394e8d44913954b58936e88c660dd32561d7cdc52cb4ad234f8a9c4ea84d90f6cba4a4c8b4fb5a39416beaba3e79e06f745ba82438749f13e11af626ad287b607bbebdfcde0f4ee416240dde326454e7659cd1a5510cb645264c91c3c7cefc1e7f9187bece9e2c088c22a4ba3bdaa180ac6a28dc4778cd8611119ecdd395c4d4bdfad48e254d44d9fed40bedaa469ca37b61f2abb1ba044826682becd123161f36f66d22a9e9577effbf8d241d9e83cb4eda1f4e471084e191228cbbbac5c94ce671087b65c788afa93a48e19520de26693bc93e429d98d887e560418f380e92c3bf8364beedcd5c184daf8c64a525db5c4202e996fe9168fd58a264c8e40985429a98291e7525499f6271e66df2d4d7537ff353a61c4ee16cd9f396b779a3d6780f9e1c5c03ac5c2c564b93196129563852097b42ea6db6b80e76c288b7bc22eb46f1871cd222e4e8c3463d15fe41e2d3dbe056bca11096f486d14c627ccf3f555e873ed9456ceb0ec62ad42dad4ab8fcb535049f0411323f8db4071293401f933cefcebcf0e277131adba6a0e1278272c46abe360dc81d129271dfe23786f7fd6e20c6c9c6fb86c8192f145e14abd10226bdf4b22d2ee86b3c2d82444f0fdd9b569b86f771b2a02d81a9ee519d807939f5c9cf41c91403332120a6b488f31818cbfb8f83d755381db4f111e1d8aaa030b0e79eeb8b6f5f37464f660b135758237e3b9771e8152fa5e44a2c134a1f81148df780a47275a920f2ad1639ba1c0a4ba645a843e8c84992a5b936bc781b6ae5e0c77f7f7a70774cef65be93280143045ce620c16365a9140a02aae7b3b734c0d71810ecb569ffeb20cb8f01fa37629d16af6b12e07727920f4bdea2e1389a6725ba9cea64780e4a414431c441f6fffd4262a2976316e501fc8ddc8665e86c21b02b1c0eab84f885dddd48c3a62c5eed8b63320080dd5ed6e2f4ee5541d2b684957af764917ac7de9160b243437e80f998292c9e6cba6106c75bdb8b38b59b71d96c4b8c41f0b3a9a15f5ca0c13971392fc33241c50cbc71684b96f056e41900d38c4fbbc0269be6f93f4952babcf65ed3fcbf0ca5e0f734f80a8d94e1ba1c96c979984658c7f3cbadb9ed392cf4da71f99a372ee3ecc7aee7c80b27bbbd9ae0b48db6035aa7a893954523808864e06951ecdf145631ff1a3f3131e7b363e7766503f7637553318ef0f63af83710061bb7683d47527e66ea46f244d88914afc43f2d659a42deed9cb07585d09d792946df255a6130adb084639bf23d57c825146fdb13585277e466e6c5c32530716ede80f3681f6a0110c1799335bc03e5c18724d64329258da322755d2fef8017177fd6ab65d47526f4fc6066b836650970ba968302bdd9df06804b755c80f1b242341acc3c79760128deef9d81b14e6fa167e1fdd1d9a20cbfdfe02cf5e4059a76a27d3d81e0611d70d12a23afa17a64e747aa2ce8d47995a146c13f88823a46c07116c12b677840a94362cafd3bf62bc75e7cfca60639a0cce2103490de247d4b601b9cc394e6561cca4495757eba948a8fa62dbafac3f28f357827c860949ba02b2d3889980d29d3e88c265da5dc615400d6b4ef0a4ed41092508294a8a223e6e09b45db0d288ea5753dd7ef344bd9de30cd8b4e847f5eb8c48d6eb282248f4a2ef61868ae5675749ab0830f3d555da588d8558581d6afde6cea4451a125cbe7c7819ea4ab4a6b0a598a24c996f7f3ff31b7926fbda991e82010b7cc64580cf344c129b1d0ce24ace69d6148b2edcbf2524064e36a25f91c238977f77929171cb717b32a3081f1ae4938d51eb25f94821aaae97add580bc2f4aacaae872c862f81803437c26105130939fb33a766e29d941b479e8346ac25e7d5682bff7ddd1f13586fa25356c8e779b59558517e272f6a9c825b10cacb4144a057b05a0eee5438645d8cdfe6ae0a4d49dc8b9fc668f77e89edb1f52e60905efae02c7f8071b3ebd7befcbca402d65be00c77705e1efbaf290076a8a710578f4ef9b85b9512576ec41a227fcc12a82752d5a622e07683ee3d7af23ef1628ed2ac101e375e3d1570a70b43e9fecff99540a3b19863d49b05290021cfdbaef31cc6e69fbb8e4ae34827ebd483ca64878d587f0a73257eba3a7af60461991bc6854a514be670dcb0d0af6ece538f9585f6a60fbf52a81f82ac14320d16e62fba3a481e6cbd9f99f8e1c300e5eaf9dfb5226b39ec613b63ec137840671e9b8a9ec28406690edfee56b3939857ea8549dc7055723fcbdb0916bc1c01cd21942bd882f347821cc19efcf0e55859c6b786ece3643bdafe71ee116ecf435b95187a3d6e58f84c49d27431577c12607219a09be9cb48aee897b10d2301526cf97016c8a749c2698fcc8b53b96a808c218d7ad3427c71b008c558236c9d76bc78fa0f03536ef800799efe935bb8b69e8a93fdbd554fb88ebc271b2fa01dbf7134e3cf8852966860b9fa8c29193d3e03fe7c8b0676b0cef4909e436abedb949419032267624a9c55bf44ccc1aa4defa780c381197e0f3ef361d7321001df6c49aa8396ba6b034002ded9df8457f134ff71ba5417ac5c0b7066f88b6cba0215a9846236d359a18443176487eefab359915bba5cd670a21ded7138052c47717afccce6f0b481a81194c0201d15b1eda460beabea5a7bd2119c22efc8ee54604c6947db45a856f1663e21642afc1ff6e7711a7b886e43b1ae2ba4a42a594833bfdc5ccaeb7f7ac2cce23529371ef389c7d3ad2c8da5b6c868e590c7834de1216b4fc785a90f5d5ffeb62b2488f4405ed6a73ce0ea66f689ec1f553f9fd8e4a40a10b0d0b0c6d8bc3fe871d3e06c57e05d701dbdd2f171a177d2cd321ccd31cc68f564e7873a29814cbaf261151884fd9af954b60d94cbe430f94aff6cc7a2237ebb8886bce74537726e413f6872ac3823f74fee0cfe574a4201d5471a7b3751fd074fc675d09517531145a4d00c2c1fe7230ad32a8b1cc4aaeb86a7150f27e106820521274e1d0ec8333169cddf25698c527d60b3a57d2935c4fc20886f1ab4e3bc59a6a9e936ad02d187130b11c5f1d9ab49cc1e64694ac9fd1e209be96f35e30178ad36018c91ef8b940537fa098e82d88a1827c045d80dc3d39f154f8d8a1b6efc2a860c62ef4470374053cc64535ea4dc4224ae4ccb1945d70360dda77d52822b5ce7704ecbeb8c6a661b2c0c05f94739da39d32ff3295eda078ac784b45ef4596b2b2df196f49a54e36d9a1ac8773da949821b49fa46fff1e880fe81650499654fec01601f4a1212ef9ac8d1bf34a0e5a4505dee05b04ee300c03dbb72d388ef3c8a51db0eb028a51614f9ce3061d02d014190102f621d140455f4b1a232926e2f5df3fd1abf3f9086682b880b35f3d31c6b43ca4d577ec3e6a6f7e9e4178d4d6ce626965bdb7e8a4e15046cea9b9bebaff1f788951c160c149511dc0e215dbf5673d3752ac3c5e3ba95aa9c7c462ca64e06f34e68b5ad15d07fdc300a7c152cf2a9abcc0d6c2eea3ac68cde74724cf36c5698bc78edf21723db5b7d84942f81f56ae1c617ee884416543d37238115afe464a966a641aece42be0908e43fe4f24cdb35c51b397a0acbef2f125a25c59a9c83c9589384e3dd7e0f7fa0872cd4f2803bfe6975e9ab1edfce8a415446def46c95e8644187977741273eb28c1e50ae2e0a7c48b055f45e662c7207369bf9a3e27334c64e9fc5ebdc759e248362dceaf38758f85a17bafeb18c8a20385aea719526278960d5ed0de9ef03d8cc545569ef186705a720672048447387143edfd3ad2abfd1881e9220667f08cfce79c2f16a39b6237580c44b544ec7beb8dd445b7aae48caf40f563fca804d43f1edf64ea227d2cc8688dcb50a0ae2cd02e0553acb7e22b47e044fcee3e1331c48e535d0d1c62e3cbe58f0e9c1fef291bc5134f63549c049d7d240868d272f582a2acb39f8625d0cc3f87080a03a0065a254a5b6a123556128a6ee1555299833159ec911588e304b41487ecec88f1735b7fb82f2c375db610a6c1bc3c6b67c4b803316234a1ad7e3290f0b8a9e09224b0108ceada3b247720196c8ae5af7e56960243ae76d843b3051ac57df9aa637dc6ac5a1dd9a4433d517acbd7978997b5193a76cad4ca9fdbe9351acffa9fa95751ac4adc95dee735e1b676f0cc02fbba8a08f1977f93d412fbe36ad3a65cb9ec11e2b4fd6e520068f1e38ec3f5b6624db64e3a7677be8a9ab0030c0a94db9b4d50a8f07a3e211d527a1daa1354736b14b8e3ae95fe384530e24b8a26d9933ea7ed8b84532294b12e9af169a801e68b7e6afe156f65f64356bcf32475b2ac089580132e01fdb289477fed6b7763ac9e964c2f05fc2fccebb7af03c53aa0865dd7738fc2f309048ace5afdc4955d69c86091b826572cb9f1654b94ec0ce90afe978beb0441da6625e563bf161c2d289c186358718cd94f965eb61956d00e0220fd4f334bd575d346bce79a7ac281c67c73b9dc586f9ef19df83adf5c9f738cc80cc373c40c808d5968acc314e7d9781facce0a800856f1a626be16c91404cb785e549a512333fd154a27f99f59bf1ef4f46fb099159897d92923fe35b457f52bbbb63bc0b6b10bf163af45005bb43eb3d4a6ef0f3471a9edfd8f9038f5c6688813f85fce10e51845da192084282b0b70c7b38961f49ea3121a1ef139337871382bdc5c3535966aa4bdf31ec833c1ad35aeedb40e429f3c04cba01fbde414bf20c48ed273e58cff4c641870a7bafc319c6635c2e83690032af7cc2b6ce0b0c179781325c41937cc7cbc890afa15f04092b5903d0e52168a49af7cc787ab0e7fcecef8987f744a411b7591434df054defde19f1f12f3f3128864a0a1aca1753620c86d296d75df1e2913240402a38a00beba0418566bb9f800cfb27309ab169722a9abfc6518b434fa06dfa4d3688bb5a6808912660d3b762016c6df43a2a5553cb75bf6ba38af1409c8c2d7043c832faf82b8b8808378ce3071c7602027b99ff94b2cb776fd39643b119be3ad4c18660954c921750a6d2bd20bfcee9e571a38ac730d292d9407d9b442c13ee69b4eedf4a575acbd3019af4a30297f915ccc631c9f61bed2ad2746ca2e8caa728b83f5029a86aaf332d74b3df26ddd4353dfdea50360fc72fd3d950ac1c536b7c9c88980c306927726cd6c3909620cabb32206e65338cd195f7100d0f55775ffdacf87f2627c1b716166d425cb8a0998b925339f4cda211efd264f16ee2f4d8476668e2752284c6ff430eea45ef5008d00f80c8df5e3f3f9ce3421ca23458707e9e64d3ab5d6fe0a84c99b5e7ebac0aae5eb501858243feb777fb5ffed71c86cc5e121a6e5f17cfa241d923834c34cd3fc0ccab9941e48b0501bdb11d0007d44ecc4c1d26c432a04f3f9da84d14a4f5041a6e85bc7fa1b0435bb38a0f4364d2d59e2d2bbbdf8713107d8e0aad0d29067c57a4f3bdb383a65cdc5866576f4cdada6352bdf1d481f0bae8e0243653ffbc4dd3d2770996243925f6b09750d4f14d74b095717ad12b3f4783bd42206af8d717436cd7a769b90d9de4a039054a61679473388a03291b2c0dd5b6153c048a07ff71bb412ee2e6ea44f19c4c07f73e8fddb3f6d1e047d887cde9e2de194fa2a4d5cef1bbacf839ca4ef969706c87378771a4747156004c856a759dc47d399a8044736d9f562da850e8e2c7e58bab8bcd122a8ddf9fa652cd3b15d145cf7c580d2b6fbb08b2e25c3f87bb87a85841687d40efbe6b4fbc72c0897129ad806d1324a6b7414df985e442eea107796e7845c20363e31d0c3ab06cc8fa39a3e23951da26ea0d2aba1af36b56acc5fb730568eb3c9df4f4b6c7ce49dc737054777e74315e196d103e176aa6e126fa8c79a030e5613016b6e5d5ce857166d5d85e134645a0ee1624254dca5987ea7d4c6d69e2ccc56ed5b8c7a91f57fe3e5614555e28efea76a7e4d900b20addf34d027eac260be23377ff1e709c9f76f413f5944f90f1dbd7fce7174d28e695b264052a028289ea12a2176cfe34b3af5614a42082676d2d7f44c67922c1535c4592727bb22c0d9bb3ad78c976c6dd1d8036145735c6ee33cc395e5ec308bb0a7614a944ce103aa85cfbbc91c2fcf3b480a2e68a56c3aa03f6b83a1e6f0d8aca09d8aacc4cd888e1061f2b11babd8d92b81f879a538671fb1309dbb2e28416da6a53cc0b7eb11e92887487c0e9b89ce978a35b098fcfa9185950ef717cc4133f7f4469d6777d893be86e449599633d08702c85f30a612ff8f65aed7254c9b7d3331e2f0c44eac2480334ad386064cc3f3c17265c45ae427428f0d43b1001b0c48c5663dcc8b782baf2386831d8fd586cb2c0a6bd1ce374e397aa2c88434083f855aec33171cff9e7e3094b970b6bd25bf34e6172748aaf50be393344817a57cd7743c303bcf846b96b11dd09d1f7e5f072b09b331227625926b790dcffc742d5ac68d32ca401b755edb0c8ff88340652b2c48e3c1e64ab2e21f226585f85e8ff712afe3606f9ce608aa1e69846b920d18f52c69039121f1fc2390cef4df5b4fed192f0637ec44ffd9ceafd90034f607736528a7bff8fa25886a2659045314d5a79cb98239724996c0e7694b365eef99d4f8329cca37495432df3ea52a91c68cef1e5e6ca696dc3927f3f79a0a81c24e484da77f2520e808f59570d250b89d98670b398b6a0b9f1d2e54bb5f3385b7909ad35a93ec7b71cab3de3f73e4aaa99c0af42773c4e11c6eb2af4a283bee239c0c1605e305c57fe4d8206fdd2c3f46ec604bc13caebffceac2700bd9639f5512109dd3e6bdf41be200454c110fdd009129becddf6b3dc3f5d54321d4cea75d004cf9d9570b33a1e8d3e63e2f1f8c9edbd50bd6f863c6f4c3414b96b62aa799a8b606e64050939d3a007c9743d623041bf0804cdcff3fdf00124207ef717658802e93f0dbbc97bcc6c6eed6182fea4172ab65cc0864dfe0db5177629142cdd656681146066b1f91343aff7f1aa01913348bf55b5dbb03fb9f9985b0738a765222331f5acee73d5e0cd11430a26172a6b6e99ef33f0dc477f99a81c0df328ef9de3d9ec91643f5adcac865b5338e33ec26e3acab5e0e74414978c9e85efbed945930577fe9aecab5abd13c95aaeb8b70c7031640d8d2541b84019f55ce2fd11b83394153a96fdbc5421cd471654a518711123e727981a0afeaa4f61032c3c577f9cb94cf363ed55feee014d974a182d4a17d3d377abdb6b1b4380a9896a003d98cdf17b3e8e9ae8a92c7963d1cddf9795e0b30abf1df5b11ef3d28743349078ab9a4fce135c439616776ee5f9fd24ffdae8af68e10fbca07307904637f7234b04f9890e84c7e196411c428640887dcd9dff3f427d7ecaef0f8cb43ac777c592fe6f72fd7b3fab838829f828a7a9d2abc2621d4c661f5283ba3729b7383ea89b6a269089b8192c3a85494643373ce96f2a9265702792b5d72545fe3fd6d180713acc3ac883e16d5c8acba72d23196e46dd761c810b1333a4c4c9db48e9c6b020a96ac58101c43b77e1a3f1537d96ac1b2e0cb0aa6c71e0d660cd6ebff3b1ccf4b60b0796c47f8902a50a8fa4aadb99163e5d97e448631d164866d66aace8e06b13fd6fda2a7e3f78a344d5969ece5526daf9f6eb95430ebe19e99cac8c10ecd4d4d1c154157a39718ee83751b5635feaaf6f396730a74b616525415073f1defdec51c7395ba052df91a88a5dc062b8ef8608e6afeda910f791ae8a8d0740cad73401f0bd25322af141d9e0469703fc74e1a1c9033ef23049e1778a0553e6737749940a6288c23f762e338e9d87c2a87215fd46e600dfa29eb4787751cadbf11f6d3723fbbaf149403f07a9106e6e5c50c852822d3af0e364b03b27d05e1f904b302b90fc5460ae6cc23c27f98faf149098486de29c5b7e00d5560c381b6bc434e7ea7fbc7d7ac6d68ca1166efe39eb1021d055a26438eb24b9cded64cf5754633ac8802eddf51daae18068505b3d0009b05a928517385cf540af4b84978a4b4b34a4fda9cc5b894c4887e84bd0068eaaa927554bf6f846dad4c16d780193fc56d4b101a031e6572ce11b45eca535d2bcf6b618254531b74c4cf9368d832f7ac7dacde2b3eaab81c840e0af3f16c8b1db6ee415786b35c4f0f84d89c2c39e9fb869e4bca6ac6c3009488cceabcc44fbcfb30fcd3902b3443d2f3c569e67eb4777ce2c75535a94c517a702393d4f1cc2dd968c969b46043e7955b9c88a5def04887835fc997695efb34d09bb414c01ad5713037afd52508bef7135b1eb053df25692414db597bf209d3c6f4c09190f36d612ad1052568114f4e05de2bc891f264720a8461aa6ebe92e7dfda77ecbf4c4ff18afe141b205657bf9a9842248d7f7dc171faf76095080947270d7f38522fd1d2af20833b4b7c67b328ffdab1a3a5487538bd171cb1a1c182047545063b80070539da2bc47819d66689d44304b735853080effd46f83e62beee5bf2858944f1e6681509546ae332f7a5d33af750337c5f8ebddc3553644863b4f25e907ae1f9ce4bfbb57e1491b2d5c1d6abedb05b30edf3f74bf35003e41ca3bbe09f7a32f7236cace0b0045d918883735c5ff3a30c2243a28d89b5e23dd5dd154b3805a3261409d2e696c8489f6208d3f866b71eba4599a0c93d34905526051072aa0eabe03649bc823679ea20ce664b28e24c072aa07d1876921a053066f6fc5b01ce94f836af87718a3a734bdbea1806d3b8533d7db286f4316303dabcdca5903865c44a2701630a7187356c1221fc43f043b750707ea24def1bbdd268f861bf1fbec9d5ef6b5083a497af5979acb6631d5dee33be1770b0e1de0dca7235ec6126ec9fffa7754bbca165e6cb99c658b3803ca9ed814b219dd09d95c7de3f57136866294d6bb36bb270f57032b1dade2fab8c693e5a9ef8775f86c5acddbd5ce7bc2d519b3a680ffef78390d2cf8457b0e6cda10556295980fea2e31d2b765243bc95c8fe40aa0e95779621dbcfff6f28d05c790f1dcaec9760660cc25a3f41753f17e66d97293e3650965cf3b4c57720bae7be27cb6f3093b6a756756c23506b14afc85a2ee8487aca1098464f4ff4487b0e05a22c3811598b830bd6ef7a151202f09d46b3bbfd6713dec3776b0148b10ed0fc7834618c149294f91ebc48b4bf55653604b4968c104b5fcfea7ffaa8af4a42bc5c5f6df83003a9a81943e1bf80e2e7dbb95423cd29db67709f61bb61127faba1afc02aeeb5ce2d6297051388e28373ecd8388fb773dc40ea13d91e6f28c82823e36625269258b2ff3e600061a98de216e92018fab690c7dd2caa6e9077371192fe3a07a7468d48dd64bc09176108b29335e55dca4d902bb396da6946b597bc7d5ee7d54ebb315006213373d553c48aa1e82c218ca1372a7cdb26b3cca73ebbd274d3fd16faa4bdaef749873242a94f907ca5a5c40f8f3858129455aed5cd64e39ab8042e24a76a22101946b1bcba755c7b4712874b6f0166b47e60da3bac64454fa54699b47ca0df960c1b0d86982c6d04875f3df15276c7a4381fbabe08c0d81ba272dff6993921205a7d7f1d34f3b6fe48d0ecaab725b459feb03ba8c9f37d004a8650297209f6cfae72ff6174e506152cb19706ae1007817e2a6bfb685f4be07d612fe14160f9515cd3e5e3253d45b5de655c4bf46973ef87ca1fb32d1daf9fcdb99e6668c7521312d592d6ed0ae49b1e37ccc4fa280c42d32e8444b74793c528684e0bef0fca78cec69de9099a3c77370b0407098b1125c45fd42a1616492edc8a409a0439b66827df6006a5be514c7802786c360b8f68fabc2cf3c0ab9af22fe38b3e26327d61b6ef54953855a80a9a60815b4733d0974df4eba092c2243db7343119395bae034eafdaf4a0129504b5994e447596c16708ffa0a25da740ad8228cee08906720f74300758c0ee90d994610ad6a6534063987b759bdd9c224533b63118438960e79707a39198c19cebc369fabf9f9e4a659f8aa91577f8243936a2c364934d7efe2affaf79fea8629f6ca7a0dad2b63affbb76cf5072836b24ef32957a7596b321109da595c59a87e3e9322114112bb500b5ec7531f72e4073a7bd64ac6821affff59a872dd4e508a5c7f53ed3a901afc75c26e0b4cfd2a4a8fcc9dee6f0ceb93efd12d88bfd2846ec0251858cee587ef70d643d6215f2772ce634cd3a626e84f6f80a1edd91178c9ed13cfa3cf86452c8ff23c034f1151e82681917fa88e657f229f58919f929b2dfb6d3072047c8d1c6e721bd389ba00634919ff280c9c4ee562122c281c539fde4202c36ba2e0b6168db5fe840f18433a4d135e8bde17eefc83691680272dd93afc4867f2f8a41f395fd8668138727aba1576a7498d781b60af4fdc031ac43b5e890fc8b821b521080084022d54dc12580789acbc6a3fb91e890ddd6a8713a457911aa26ac8142b93189ac82299be2ff6f821d3d9a4a8809216b89b89b79c538043035d1107cbb1755c8d3075659cfa66141592da6c8b85eb917bc33264023e3b05834c59569120de70d6cfd095dadf40a5f12ce6afd27ca2a63dcfe2c3bfc3fb12e85e1188d39e8634eea65f37879c2880d724cca1e85cb8aaa8151083cb2442c334ac5d9866da1d9c47e4c0e9d8f2e88b3d6908da751dab0fc496e8ef4d3b732ec3561a5e9ec2f7f7f88bc69716a98e3538797ff91425f8dd0dc867f24694b66aa12f24cf06f7b58178cf9c800fe28ba44ebf0cb8e4077f99296e4ff1ff9e3488c84d22c3f36ca467a637455a904b5a4304a678f33aa9f36f4201d783ca108169578030f0fecf63112096ada7e9caa4e38a966096c7d2b61b17be48227f0ffd681d2a2cb847adbec3281b58c72069f946c81aa11848543b6dc8794ce6ecc1f3b4dee24308c5369cd62d9514492231fcc74bffb25aba9b62920c4d0023245e6a1678f4359b54e75f4a183863abb4e29f128537635ba650d0ce4b97413d86c851d8c44415783ccc7c72fba996c84c6888ec44280dfca241cad69101a94c07f7603d5a9a048cdf117f56a9f23da5aba22c8d604a1df3d80ffa2d7ebc1947ce0a2f304c8eb0d66ad433157443aa885933dd71e2d5c5d8eab3366b256c1d83c7dcfdbbe0316e13d52e428ff0b7c300f684f45ce0d4abe6663250d6ebfe448cb7522142e8fe4463c414907bea3bd084f887000c5bba69c808df7e9ab949347dc70918c6758e4341a70b1c9ec8716d1193380dbef1a26cbba454d6f74c09f8c566b577bc4fcea40f6b2af6c23afbc7de4d7561c5dec2932f038442764ac1b79c9bbdab4a0349f1923bd7b0fa20c9b428a9e114352e6baa2a5feda17964c45bc1421090242ecc94b1d1b3369151d74ef2fce3e2e6e7b278372670a80dc035b5d81ec4b7c02dc43b73416001b774c52c0e847394605fdd3c3f53d93a4a7b5e60bac6508da5f39fa2a0903e97e3a6d6d58ca3cd470b532855742166e10459a2596bd7b987cddb9a19b33fc063d907eded2d95c95df6396a15e348edd2ec1ef20d69014984aab21e7059f8cc1ae284c2e772d98f86509712b6cdf6c388d278fa1906b112649255b56ffac5796badccfb0b2efa6fc6da4323d0f2dba239c7c45cd088f48acbc141fdc3be1f5d184898dc537536e2eaafc4e11251800870061f66e8b128056f5c47030b353195340f1e0f7dac6a1b49a44e10134fbfcea01f170ae08594fdd483c40cf95f629bce46f612c3a1fbf47e412684d3c5c1ebf726819c8663d08a62ec89beefa5b51449d6fd26616ef7f5c79929573574650a989af3d9720a1dc4b8e00c68e11f1a07d15ed15fd919a40462a0276a9594df47d690dbd609f6d39a1f8520f7b92dce5a3cb9f1f306fb5392b73653be4f54488436b4d977ad7ca4f8dc6862b99cd86ff59c4ee23d7477f817c017d36b4c8f889b94900d253c51b8cb720c6e9b68910c3c8625cb6f8575a9014346a896bcb7520385a8f34daa50c800f2f896c162b5c9568796412a6acd39b5486d941a8b80892f9f04a620c30a033df5500319ec4e2c7fa202bb8f7584ee778fdeb7fe79a7efd5a358422d5ecc961949a4b037b8efc720f8290b955f1199b2c495954c33ccd34b68d04fc47b2085803ca1144fc8ef8f15557365dc4f2edcffdd98fb152ff49a0ff3b98e9fd2be2407ad00a9da55bd7fef9e9c76817ea4b3ea561765e1af3d4ac5d778bd2877d8e522fe9dedead2e7fc5af28d45cab3147330c510c89ed1d343e7ef50adee7235acae4eeaafec9df8bbae3da6a99f57a4a80e934963c4af61d4c3f565c4b1d590c9fa3d8d4cf78a274974c72b4c5cdf704666b16fec86b44e94a1f2a4f72171c7e4591a06b1d13d9cc7b252a182cbfe79cdcfdfe3512ebe7a4ac58f67a92c2d2eb1a54ba2a206e6cd1fbaf8fb1e8c1d921e6dbb11436797f01d07bd98b0e6585e0f3047460ccdcb7b597aed6ef32d427f816955b25006b86df6bbd67f211cca53c05640db6e484b73006c94e139c8bfe732078b1f5ebbbbc40119a9d4199572235228d32a660b376917dce39b0435b3537aa37de45d8f4c9e5f1c52f2bc46670adedbb9a35c396da2b6cd107c76d878ce6aa0f823b433a48d0153d4bf17889893377a46585d08a07d0eab28fce2fca640859f519ea0fadc3aeb8dd376d29cb2d57589c4bd8a102b82d5a5cd32707038535353f6919cd15f960e01b183114c5ac63106c87395fe26b695b9ecd4220942990cce61f9b9807f47db43c6b556f2667b62aa46b40d07a075664e03ca267f79e6e5be9c884178aee8a709c4a5cc6146628d34b28eb71f2150aa6152d957a930e4e133f83219e1177ca7d0a40cec0b59e8f82b53beca60945d3da9b0919edd3a4721d0df57a8b2cba6998c27c8323269b2f51bc5c393fa91961983896784550cb27193b77e23603f778581367fdc76618a9e05fb8d590a4de110d114dff32ef023a12332f4d06891b0727a42f6c35709fa39e9c7950a203e5753f6847ba34ff5b1dfe116b11efbcc50dbf0395220086cffefa003c527ab9461295ebc246c6bc63a2f772dbdec32fe2a92479cab55764ee55d7de9361d0fdb760faa898f5fe73d7c1a4faa2031073b427b8e9a113ec6043fdba3b0613097384824c2cc3b79b30ccb2739f85b50346f196b05b12b651af8d060501d5e0f49c25b80e931388a03fcd352088a207b38c76df7a105d4f9f04d501c71fa3fd787c4b20fd592a5401aa8f25eba31a234b8f62ffb3540725eadd463cf2ad4f0cafdcb834119c7d20b42e1d5cc1bb4dfcb6a8e0c668444836f4ff8ff8fb64ccc8930963886c6704fa91b0dbf674dd05c46753e2a7df887c9c95cb1abed65a620b3e9f75b8520af282fb5ac515742da58aad805c450d8ff0e8e2e80225d27d609310dd498aada8aea51b0ccae12b2cf6ca67638f75e256a1680ebba1cd1c2131029ff91197c0daeeec5d6a182f88c96a59f1efaaa64d55a024a3306c2045f35ec8ce9c53037b44ad2c5d4dc4f3395960da7a3259f4c934645e479c44eb0b05c85a493efce0d4e4ef6a4c4181b2926f3541c8ef93574a9f4c50f4d60edc429b8e53f499c49de6f9441196ded7140878e94c3f07373e8f4f9b136bf25cd522793e6409ca07ed6be30c03e7a274a92b0a5058d7e0e64dae7e38c2b50ff2add39252897f21a74193b2803787902db73151c14537bba0b3152dd25f7c829798aa11d2bf0f194fddb584900e83765ddf9f7f1a80183463c6074aba73c6aa9795e14d89b66b46524d1474df69bcdff4033e084bde8c2454ad6656e2bcbf7b081a835671d562378253c54fed81cea625183568ce57c7cbb5932ec0217e631b26806bbce7a45d58afa869e40690f24b1c28099951902567d1cf2534a8d2026af60b11bcb0bbe505191d9df3ff1e237f78845b38517b131ee33708a1d0168021eb2bbbe49ddc6e406db2fd43660222b1a4436c5829ed706b88eea28cc21afda3765db4b52c871c4bd230633f9ccc05d5072db1f7926143ae63032846308ecec99fcf40e5de133a86020c3f5006c55c7bba7cd24417acbbac63c58edba02302c2a197332e422230e31fc4635463f6e52ef649a8aa85a80e359163dc73b3ede8735b27389d5a7fc65b2a88521b606341541963d3f1bb5411285c0b4c172c963f215820b48d954ca13cc99fb4699bd19de648437c5ace03a12a7e44b57000a591aa6f822e646513bab1ad62f2fd0b5599fb992c5b7effb45669ed5f41e2ea3260e89e5a517893b17048efa5fc8fd8aeecad83db8ca79f9c6a25bdccb7bee2e50df94ca0e7f4cd1adfcd5a79cd71aac27af3608d182c3700ce3f45256b43dd3f23457e41e909020af80c464e8cc48a919f960d067fb63ea6b5d8095aef988c92df0cf805a794d9c2aae95d064ca44d550237cc78ded2641339b1cc5f52dd922f033904661902bf9cd467356ebdeeae38578c09893fc1cbd1781964edaf2863e855898203a230805f2c30c7eb9be1fb462de8440044ad0759ec12ab6355837c8a18f3edcb70b844d9a0790f1068a911158e454eac4c0cbe991338b5e3ba24cec4f9d77d4c3a65d35e6032e87baab09b9d3bd1068fb78075481b7d86acad698a300686ca567ab1b4654ce40efcdb257688c0e89b3a4a9bd3c02376cf840068f2900d4ebc9bcfb5778ab89293aa425cbecd844e424749fb2ca21949f06cdcc83c6738fbbc0780cbd076cb92ee7c90c882bad9d2e34183ab2f4f29595fce3eb21bb3e8937205b2c6118368bd7793680de3b7206b6614226009bb25135d0a013ab4cd1eacd962b63378647590d83783591349840a2338c374dd22d3e9972c4b3f1d904729df7b7f5672a906a3b90abebfd3d2e06bfb81d5b8dcd81f6fd2e6d2d1bfb5dacbac4d96bc5eb7888623693532848542dc2b1e51529f527dd5f9b99ae4ef208d24586bcae2b8823d0ba15eb799d56a19a61f8c7090b22ef829ea2b4eaced1efae801f69cd407063c33437455a901fcab4aba5281f69ea79136d068caf5745d623b2117d3700e691a62c4cb7de2d4e3d240a7b32792d432396c366c12beccfc472d98c6353e2d198013d0757e5fe84693cc4b11694fdf4a8e4a548abae47065740c94ac4c2aaba333f2da8c93f7d5cdd1ed8da9ef110177fed41ee79b723687ad06c13b367ee29061d25e4967d49f23b670ebd02e045e928056b3d4d0735f7064073b5c81e6d9b9827d1a86a88271afd5132c4f4e8d7e96367c9295419f090ee682d9545b87e86ba9cf8d1bd6e25a15d69593ddfde45c98722a9e0a96d72cf8847544ec7f2c3fa42b87f8e0e2c7bae51258f8e48e4bb43175e9df0cbb62169c1648867db323522fdd86b196ea37c6b99e2ec5269d9c3ec50d105e583f3b00a7a434345df890f607657c6d09c2e526c6187282fcf6c34a6dec02f5a6404d94ba3ad5a54351206bd364bfc3e832f9c14438bf871d93e67a106e3769679d638b0996bb4769913c860d26bec62a5a01fa503ff5e84d9037bdf5ff301e45f19b69732fef6632c7e0e567d0000897eef51598238638652d2eb1ac272aecd083759fb946578f23cfbf627fa8e7b481de819b27ef41defc0599f45687c027405c03eb577746b8a8a9719080b37e92222b0ea4da5e74b6e8a2d6a8f9aac484353d36e09d653cb57ebccff384b0e9e56322654a4d4f7a8a203dfb84c2fae50ce3b66de3a8e8220aad22fd6d4724a5ca8672d4624c824c94e60cd1c1e64a6ebf8592742506cbe2899422eb4c955beb8fd0f4a2158bb5b1b6baca9d3a666c97726a78e02c41a92b6c1223e76b42d063d5f13b64b76271da3b4eecb5d565b545ffbf2ec8feea0c4bd1784be591c618300cc129c428f5b41b428e1e7f40caa17d02514cf3f97a5bc49d195cc6d7836a09493e7636215d9fb79360ded8a8ac3b944fa431b3fbbdd8eca2b615f220f82d8ffbc89d704973c873fa82eb4234c0d5cc8243aeddbd0cef7569b5cb2a39e87d843794569272d046dc5fa92fc79bb5f9fcb3710014cb6077143483c34bdc0c1bd54c7ca31637ed1e91027ec3cde5042c6af9fd6958a2303f895e8658f9f1a448780c0c7e912337fdbd068b90170c3dd3d4d215f8c69059877567f5801742a45cc91dfd235a100f40373406ef3798bbad93153ebf3b92dbfc2370f4fa1f96a65ed48011207225e6d1ee03c2aa1dbc2762c0734e4695bea26b1067271f81c6462d2c9e25550743d20d8a5a49fab3d6d49971b43f113e7f0287a56486e03ad7652c196e464139f5c4c915f73fcfe88f81ba6bb6ce262c8f7222b44773afa20d4064b954fbb7d4da6c0f45d045bbcc7849eb085759339d0e41c04fbbb4fe6bc35be8a25ad629bc025620ec99bd436be2afbe0de455b2943f7fa5079b7ef2a6125aafb13305469c5138808fe67a68968a81f04dcf10b226bbf7ae9a471d15a195c27c541ec5dd20bdb61fe5206a6ecfff2fb1ecd66cd31149418d0ffcb003688473b87a47a01d12a79becaa9bf5eca8a6d85d1d21d68cec25a932ef7379e83efcb7a66cddd62bef3f68758d07712c7b4952e3b826bbc997b59fcb5ac83a85c0ebd094ea8c6cd4ff4f8a6b9fad7edd2b50416bc802afeeca4ee550027b87191ef479f28c6fdedeebbb546ed4bdd8810a699882de2797d3be2ad402e366c9419f646805e1cde8440f428569274abab1c2b68e204eaf4062e789c2ae63100d31de2d8ad9f539e8447eb662416412119c6c1791858d75e1e425eb83166f0b65b316f9a54db07296805e2057ba543e1b2ace8ad2d822737a2c61e36d85cf3df038d48f87913b47fbadff36dc81636848dcb84cc37620d1852323adcfdc878918b976df7cb42027b5bfc88b60add335e5309b5b7ea2fbfb75cf0c71892abfab39cac4d5e8e63e2c19a75d85ce5e76dd251c5918806bd020499462ad7aaec62de25c85be110771d0e75c68f9c4162cceddcceeb0ec184c3ff77ce2d050d193a435b301d6660382b6da901398d461cc7fc624556f16cab2efa93a356abf41a5ab4c6f4c6a24208f36ab5eb418b5d0dedb644740f0572efbde902287b61d746ca72e6c9c668ce79d9a42dfdac4a11c250d5afaf82bebb9cfaddcce3f42299601e6aac563c643125ebd3205e0fbddc5da72eccbad6e5541fb9b2ced4aa9cb26440d6f8e9bdddfff9df8bd3ac052919b0c6fda4083d346352afcde2d6747f11c2f914e4db2fe5404b37a34af57a3f23ad01fddeb5e47825c55f64cc19771da65b9eae14f65ddbf38b07de02ae56de0ad3bb4a558c92fe16004dee78d12022e185238a7d4d0e68728ced03224b0d151e9591104a77a9344753b03f6f6b6a29747579a7e34eb60c3a71f6fc9998972215ef6aac75adc2bbff9a1576f8ec8411695aa1bca8151541d2a64edd546a1c8276636f08545f86e0b6c6e183d265f29834ab9eb2e6ca190030005d5beaeaba22fc6eff3835f434396f5bfd84a30f6166265a8e94978b310701e39d52eb3b2999b77ed9ef255e8f31fcaf43d163bf6c2fa2d9446cfbd03ac40e7144c225522716e1435162139caab3581fcaa9ef6b7c80e7d22837ebd42e5378a19111ed1f7b5c13d5e35162b906550265d6b79733aec28eb9d31fee135d120fca77e886a3f2bdea7ce8683a8db3773c9eccd46a085b363922a95d1eb0e478c833c19c5117402a34ab4a3cbb5afeda682532340db0ab4e5da4a5e66bc2a7464b170b713c84a8317ff9cfce9941e8ea684e5ae39e8df11c2ea96ee2d135df57d794a6975b372bd15e4b8e26321ce9dc0e7ea8b0ecc646f04d9ceea64723b592721e3034cff88caf61c9089339ed8c02444960423eb26b3a55304f3bceae60405404807f8a595f210d52069c0b9d0ba1d556699be48c7b75305903f9306db0248453dc7edfbbcfba055bac0d1e2c173296b97f4a1184b1bccaae5593868109c340b5ada95cc5763648ec3d131e7b9ef44680f89ed4317c13cb9ff499d249b37b77526fd8a5357f9465605af4d3f779dcaac5944327bd09ccb6113727158f62495f448a047f757c09e6ca4ee31a0b33db35aa225f36a3fc763897560b0a1c52dbe1b834a30f71a8052f48bfa038d370672721df0751fca10574024e75de50b327a2c04511ec4732cf7c393a205a19160386757f1837c39251647c52bd026a5ce01863bfd531458e687792f72dc883564c2e269972a7ab321238b17aa54e2e044246d7bd051206582b42455fba0fde07281fd0ec00cd1044e4f1debefc04fdb4f66dad20916f7224d66c433b736c4ca5ef574bb42b9488dbbc49f7baafe20dc08eff738c308d341690977266ad7186a7f7746770cb4ad59ce1b1f1b0e5b159ba813032f3bfbfedc06f8024b71a1671303d0279fd375b08aee9ba8463d32c2045bbfd1eb77716d288a8209c5595fb4b2541df71c41e2c732a82495447b7e929c38bae448e0946d3587dfd2d35d59182123b8996de4c65779a227cf16bc901e904b2abffdea0865a861a5e12720381512c305437a48b37bbceb637040e3e168ce32c38773d7cef48264080f31b9508ab3acdb75b7c56f2e0c463c9dabc582e051e3e17b21f7a322d959b0773416710a2c12a88d796e12c509db9048990aeec1607920e2e01f98ef29023d60d29df8316c49795b569a2dbf2f8737687b9a5c5a1761d12e256af8e37a20bea072a6cc0250398b5fa005bae5cb8457c0c4e7af5104916b65f70bed25b704a1713ddab8bf74ba04b3cf1ff13f02f447841b4eecb7c48cc4bdb8aedd1facc6a81a8ba96ae2662f551750aad56c66cc8fe01f339843376a61d29f0500ff800b030eca63685c71f159c2f452768b944c45eb92286a2ff8006e20cfee5677536aed29a06f6d9c02f84e1523b623e3ae299881fcf5a0d29255d4926b9543c669f855c7655d12fd9a3c9db2216b047ad4aa3b56d839a3a3d40f264740856782884cdedb56ac33f9943a6f083471ad2c6a07418c8152df6f88ef2988386da35ebfffe7f122e6020e17562a717f21df37689f7f931c4d75103853bf47de526679ddbba32000016b1d5149b0145917a6e04b71482b3918505f9b9deaefabef5b6853a9ca115549754d556dcc989f5d97800fc49954b4bfeb37471e3c4ee6bc6f3bc4d581efae02def62e41354a42d9d8e8d474b4ddb2b48651896dd5115bd37ee4c69b6e3930c29228e58e5774509b1379ccb179d7e522fad4a78b587a7f238648b809aba82a22e2716ce0879d530b9964d511c378bd1acf4a65b7176f46f293f889e24bb3518d33992caafe287a7f1eca6d95e602ba98d3a3032ffd0322b3a3cb83a73834cb1d1a9c625cc22c3b6811ad9d92c72f0ce3b9ed76c18441728ca6cb75b8e7b3f6d1fab74973d3c2d10acbb3bb19b52d63aad0c489d054ab62f840a9559228357890e9040ed7c34daaa4f825725e3d9cbe81b84fdd8bbff39726038188683d4d59086fae271529a0f6bb15a88bb200e5c531663bfabde1357d307d05849133407a587c81641b19da6bc233197ee29d39fc72b28386657c9c84a523f2b70c4ae3899d2153c16f66e0d65669a8f01edcc8097f5f17db24ba0c6032e5660997281d9b4d8c5060dc0906139065481b10c02f71ed10f40fd89604a2668d9a5686f13437d165cb28ba3e65399328e5b011ee1a9cd5ae55f630f3d79afb8334fbf952af49cdf28c46905790678a8dbc0183a4f0c1fb898b6e58cf6a9dbe4e8be6bb00f22c2b6413901e5186061364a4b514931aec094249f45e14898fe252c331847a1abb244e5fe9e2effc6ae201dff098e9ac56bf1cbe99bb55656700baac5469a6e7d00d45d6be30efe6082f6a03317031f8e47270b106af3a7b8738992e01e5c9105e910497a18f3272dc01c0d6137ba43e11a0203dc6d5656f488ec78f2dc20eb19d27a5c25eadf803a289e4b4c7cc58e5eb3e84ea7d5907ba568f7eca805e332a2096ebdf847838fa331f2ec3b6693f3292ccc58d06a580be8a1be99cf222df4164901d8f53a972c746650e3d58daa1b89bfcf75b288dcc806de434c0f7ef753918e5903d36c707cf1d72fd659ac0cad47428f39cdc097952bd8f5a6a50c8f518207b59717278325df01753d3b4242b88e4312a945eb616f3207ac77da81071de94a763b1c9bd97669575a126974937ec3df91161c68a724973b84f57ce26cfa92bffeebeae4a6a894f23904b3d6d36e0f0b8b14e150383a1edd90670d3537ccc3574fe3fad7a64b0a2c8cc69fe2a1775d77625cddc04fb18dd17c450e83175cc0bd4948cdb79b97c14ff82b3e468d1816633ddfb1875de9ae5d7521422bfbfece6328854c8178b28641b54a33352167eb19f27161a50a32b503908e8c1948b2200acfcc5fd3634920988832fff6775fabcc1ab6d4404189455810ee21a8153ec28ffe2dc3ff5556147b226475a9b0db57959000ddcc1579fa16f278104913c7ddc8d7e9f1e5f0b444a6ad5931b8b0d20270ae754e9de4fa7b08f2be81244d43dd0d29c4dddd27d8093f40647896a2e77a3677093847f40a0ba246e062c5666710070bcc03fe7ed2e03c795b9cd2b911b0368337e6046b04cba5f2c785647e7e52f6fd831c6e2af94c5013d55a4bed9d5783749a3ec53a480e87fb6ca06c9d2a831ed4cbbfb143f2e4a76c3ed919053860d8ce0e4b8943458c4b267068ddb47a948d37b14a114033456aee762345a498cd5a5f68241f376d17a1a3c1b3358828fdf647953246f68c1428a996b90f47ed996d7406fdc9060097a836545602c47ba8b386880812addd9417b5c05d789aca88fef97d3f1bd9e5278de84990c4470d6e4d7b6ce33b94022dddbf964d68c10fc1e3f3f7aa3d1424c7124a7576223e0cda6c5f19b17f9c094d7cce49c37cb470a266feca4b12586cdebe76e14f5f7cebdbb9fb51ee0446344ed1a2c533c27619e83778f9d5e41c84b3f441d060de441e7eb545d118e95c6f3a4bfd5ddc0cbd28f4b9c2d2420c87cd0d2f3e1a6eefcf49dc905f8f3a9558a7c8ba9265410863f00b2ec9a4bbf584b3e3aee5bcf9c33af0c1a009a1b0fadc0d787673f34884537203de192780a8f83998a081830a1b1eae16914c0a87150d1dd08908fa04b3d6497e252858e47b54dbb08ef9abe0856d242904b5941b01dcb299c622c3a7570138fca8893c4294f686364cc51141c1e30ecebbbd60aa5473fb47bbee6d13e1161ec19a06ed647253c928c32c83bb7abb4b39c5ae6452775165a4283e18493b6f4fd1107274cb1ae952a3c6faabc194bc3b09707e3f9dc1641be411f127f67a6db91dea5fc2aa2554245c0456f61cba07f9509df338e3d9e79fd8122e19964aa30ae5a337248224d25a403e65c213c471f2c7ccae12c48ade5243240cb18af3aa391fe338346fb2ae0d26eb865aaab66572b47f2efc7ddf5eb64297614da0c81191b1df89c96bf3495ca4fd4ade3509f87d4a7553c4fbe2543a2e672b17f05d16171f5194b92a1bce5d626fc8492436933a7f173383f78692019d552236857147e2b77bc02d2cd674ac86f867ca2f1a7c0da15df5e16e30acadf25d76fffd3d4dbd615bf1ca0dc1ad2573ad7742cfa262243d98a42bb78c289c4d5d695167d902bc6dcdd1728915ba7a16388f327966f18b9594c2ce6518eba1e6a3685ebed016fd88acbc902e909fe1741ea83bfdc14c4cf439d5f125b12d9f583e08b490f872ebc12afa10f8b140de40162bcc91235c31b8ba8e7285fc644eeddb1165c396f0d5a7179e55beb44a967c2b003af07c159ba253c97df226b22d577d0c280155156a1bf820ede96d3f36b415d62fa1013c607f2098736a2e8fb5ac996638bc5b8c36d9939c2a6fb67b780639a67c2c649e7acdc88317ac021567c3166484f476286f74810d077bfb1574bbd6fe74e4e9ee773f872fefadd4fb978a991f9b4f525dcde4635dacc0da76534c21dbb9741c37c06ee2034989ecdfd77d8060db8663041c340c66a86b615557d27ba1429205ec14f9ae616009e656f16ee5edd0d5950c2acdb88d839610ff3e3c414b726fea39b350f9a1928d6bd7986819cdc7536791178ece39f7a421108546e59455772def6fbcb12a43fe8f9f9228431f208d043ead41924c968b3626b99a6806a9ca7802ac71665e68e65dbae559f902c0cf9b28ca5b9417a723808b878a41b7dd1070c3d80f4e129f65ad745e998ca782ea63a1bc26958712fd444543de8a8f86f73c24ac7fb05c40eb765ba85da6e8cc62ddf0c63c9a13af6933299789779ecdc85e78e70f035ca7599d5043c176e09f3af3d0473aa383c08c31fd564085aa16a6b710eab9f39f58fadf9db677248f537152b6a7d63de236d886a9b710051af4098c0a64393b4feed6c22bb56823fddbcac64777838c36eedfc17004514a1285782bd58ac95323d6a56d7c7ba5b73a98fb92c4647ce167d13b1ad2d0c00736d505c1dc842198de55cec2ceb7d96178ae5373a3cf0093ef3f3d48547095d23f12d02a4f222c90ccc00ed2e4a1692b85b814f1ed066f09ea4d5c6e1eb07ff19169c0ebb93ec5d78ebb8d0550c34291ad0cecc1477537d86651bf40db8f89c29109d389251e1140f4cd5215d0f6621ca217e64ace640b50a4d73370a642b887e8bd95a4952d1d06024913ce995cb1f56f3463375e9040b538692ff541dea1ad72d3bc1fb98293afec90590dfd2dfc6428da62327b16b942c40a88fd2ea923eb7995ae1027b381c3dc8704b886227a08e2639300783784eb6a581cfdbaee3315465aade47465650119d74fa0d5ee733db4baa1a71e8613f2e8bd485d4c29d02a77c8c1a6295ecd81458fad55e460ef9f0e631a5d363310885e1f64941e674c652dc955f7b48cc5c1434abd84f99dfed6286d1a6d5e52a796b257a2e67c6acd7d00aad3d50656a8f4f24151c52c1ad84d3859487d455bc47af4567c254a2b39ea933206b57c79cf4a2d0c97c20bdcc04a4c728eaecbd515a7d899637b88170e284dfc681817abbddc5d28327adc0bf07bf90ef64c2b967c588a6e42e8e661ab65a7d9bdf9b758154aa8d69b48cf8b7a1f979fe110ba241a34b50d8995d33a52695a77c5ed2b69756b2b40463b5c270ec9628ac41e0d5224ed131edf95410be4f3646baee50fcc00a79dd34423ce6afdeb2b7850ac25f38cedf03dfc6ec306d6547dd39d71691148b9c382e1a33a5fd2026a1626a0c74f0bf0048d775e13ffdeb5b639358bd32fab757556b442cb57e816643909949514dd70a7ba5b9f9b677111e22a8d896237d7574ace3957d4790a99581c546f6ce47534de6aaa80adee97258be146605eef67799c3212bc6b00065b3e85f913b089543bf0160ad7e530dd61dd872af90059552c08063237e9468567d8f47864d6a641da849c92b4af3ff100627860448a9e0fb88211f154dbc696103f47b0ad7dbca2d31c378ee8eeabb88b9886d7e2ac26ea0b7496bf923a405eb05057dc2790fed39809a168e27cb8403b7f4069fc53311b8e7bc695f7c54e186c2700baf705fdc2bdd8eb6af683f6fad654f98ea6d49c9c668f0afb3426a5fb19917ec73425ceca49db249d8fcc6fe8152a259051eb4542f9acd22539ed92efd19704513967581eb4c0e9d36bde348130a8a4c7abacd7797212f713d3f0d7d064db358aae8e666ca9e9fc6194fc097b85aa0f03018c8f6f020221e1e5574880a980e96f4ab075ed2a6952a4a229fea3b97253910e192a565e51f52d12bc294aa0d1abdab7b28ca66e67af18213c9d79a9737aeb06f75b2352ffebb0eac5c39b2a57f37a3154688361b5d528b997f9d5126212cc3996faefdc175db43cf6a9a5c3c5a1b59745a08e4fc06fb099c76d53f7d4c82d7dec0b17edadc89126678698f00083f42c73b3340860e8b190e4a34d5a0788ae07c155858f190c22ef2cbddecffb71e37d76ac216bce0e2a14e9ca7c194335358b9de0acfe363ac759c15fc6528473579a7f1b7a52ad6514ff265af843402b40f52ec6eada1893aa66b8fd2ed885cfc1b96ab1468d2c069ba0896c922c0afb87cc418649fe1d860b872ac220ca974d13f02aef98286466f3f99792c6c1caa4d8e3de867ab6412bf83c362deaf33692dfcb84e8b188dd60e02a11b0e9b1b929fb2b4173e746009f890e8f5bbff6bf256e59ba0586f62418412ad42cd33e56207fc8e1510e8f33b9691d7e6d56717cea7cd2f6a61a12ba8e99ceb4c7f6d5261480b19b4fcb04da6a60c6f9e0bb8facb6cf4dffd91b78c4c93660f598669eb2333fdaebc9af65d58e1951815b497987132e53dedcd136241b98396c72dd6c10c39be66f2fbbb8dfe9c1a743537cc7c5a71a80d000c7a608089da5fc928c7e9bb411d744590691d04c47dfcce0a6bfad938d8bb0ddc48c3c359f1b44c31e2649cf3bc94f8ea0df89363e576810e42b64a44907d4b89f0a247b63e0c0bf3071540a7394a942044f30946495bf1b2fa5f0532e12eac488dac1f3684aacedf796b215e1a4622847175de998d1f2a3b441aa1d17ba10068af0f55ec62230f829dcb6d78e0a272ce0542accc5285e17fcf2bdc8be5a2aae5304709b36a8968dde3c41ec2a3b4f8f02dfa92ae276a8dc1f95df291932da13d6b754cda37dc0f639cb33b700f5ed96bd8aad9c3aedfe5020cc9d33e5bcc806451ae159e43694b4febc659ed9e4557e1f9eb300cd1bb17a490859058d18401ea84e7e0e5cce9d8c57a4cb7f8140305d8ad02b5604e571a1efaab8af1f08740b1ea75efcfa6fa7bfa2b9dc4c523217f4e9e7bf1665460b150a8f88e078502e4a003beffdf0e5f8dbc6f74c770b04e3b01e43c7ac25229a6af0e75aae76dedf6c6f5d6a54ded01b0d5688d8a2d0871d2797d3b2fa678fdb13e44089e68fd300b4b951a9e277739018aba949b5a160a4fdcd97e32f0da3ee0d0fa7453074825c6908797947a45e8db52307e9a1c79181ddcd62073a87830a7159fa45efedd0f60f874bffee3b87e8a7d4ea1c70baa0b206f3fd771f03d8e4099633e8d707903af900e11c3f3e8196c216e198de52378abdd3f9eb371ccf08e25b571e7c401bfaf59ae75a090bb6393cab14ae1d7e2babb2fab8e916c1d5b25a1d3401c3fc4e67dffd6a46817063ff344b4928dbafece977dcce89c056ae3d819d6f0e4b2493832bd1bc6d6a5da5540fc72e7c847137199063fd2b2cd669f8b815128b2c7dd2f645341227c580eee57a4a9ae88e3de89865dc3da463d3d29b70d19b4e44ed9ad77c1c4a8286c2ffece2994ec40751ce1bbbcb3946eb702e2350f981362e1fc209f45c497c0f917825bb72d4c08bdaca9fd77b4f18c55e172702af78c4c2cb99761bcd5199e06754c21c0a3abcdbeaaf488534c11a8e58827e41a307e0d29bc1b751033eb329b04c738837b987ee1234cfff05ea784a1d5c09c0413395001dfb5ecbd254c8b267017f19f2335e58fb5e912f5262b2bca9eb98a294c57d669a2242dc9e7e940c288cc46ffe214f54374e3fb310e354bc16b3eda88107d55a89aa20b4f92c1be48b4751c75a1c763d5687e96804d48b03004c2fbdc7fafc10a21224166b1161b16addc6cd42bc7c3f1d3bcaa4673c5d1daa56822a1bad70eaa98d3f2c29dfc0a97b7092a8ae404dae864dd9141f9cb97377dbcf2d54cb787c6d474b877fb4d8f375db1d66dc3184db19bcf91be2b85ee44af140bceccfeef96cfd113d6f403f0d6d70ae55d20025fb47198acd582c73025b75ed5c3a048756a842d1f191fe4797fdaeeb1d425f2d470e0cdfe8717668633ec6d52ac9c403ff0bf2009c156fd1864e7cbc27d5ce71616ce3ccde6ca4179a5d877529bf8e3745d585e1211f6953034981f8ea36a3315f60ef57aafffc1f8a111d93df5199257f8055a3ae2a99679055bc13a8b36317dad8be5085e6bed528f5e43fe5fb33bad7d65111ea57802e42768f6ade762ea955642e4448d2ca3a2175df93fd96d4bcfdc49084ba41cb47a92de1d379db4079d4d080a192739075a83a3d4f986a01f1da7bb5076275f85b1a23e94aa5e28ddb5a460300c33d481a67ed5468afe8160b284678f1e8d3c08e38f2ebb114d2d741f339ce9c173e85e17449c965463997ea9c38b1a01f4757394e374175c45cfbdaa676edbd1b242262ab901d019e2004ed91e23e6737351f2650fb79d9e77ff75cd68b12824f55dd22fe5e9357e7b175145178c7d7c3e252e1c2fcd941226f2d673a7879944848def0ed3d7e9a9bab1b7d9a697dd2dd8b3e1eb89cdd0c58edeb599e25b7aa7d14d1cbcd9cadc0fe8f5937034752819cedfb6018dde3e2644f9f406a0e774dab48498dd4f01aa74e03e7330863c298e6f259d6c66aefcd26867961689228c4acb98638f26e9029de7efc9effbec6ba7071ba3f0fba87746d11c7f2cbd6e603463b1812635d3a2d0074a4e7b39adcd674941c78c0c50b07260c69b65a4d654db2669117d517259272eeb3e1c2ad7c64b63256dc5e67c76e6a3b9a4966e23ef178b928be13650024f896f97d468aff7b4b26e061e92dbd4961a9e02b85ed4591a36dc28e110fb6f8c2909db419042e9efa1afc6c425ca8b295c454fa3301364d534b5eb8d9c232ceaff1204de5a88442d2c010f8757b4cb692f7408744e188bcb68705bf3edac34d69680e1ccfd38d7b869726dd4744528b5bd36e3867ef4bf1d2cc3fd077c985403d390036988fa298826e42ccb4439a21f09d4d0321e65e54baa6ef0d91cbc8b028a741958a6e114dc856a3c6860b3cf5937ad7f4cec34f2beda89e783d42c801356d5b83a1ab3dd1fa1d177d58b60837bcbea3238d89b66cab9b66098383ad9ce10de06242a5a8eb42aa1be2f1443261339dee27c2716768599dbb2ffcc4defcaf9bb612ff015c80c8d20dd3339500d0abf9af76950084beb0ddf64b58c5e5e4e7cd457710796c3c77890be0e1692c44176e1cee0d898a6932fbb1b39e09b66f82787517bca3245efd4a410fc423ccb2a132148a4712eefc9f6c183c7a118b7e5cd5a45752d7086b587f980d3d8b5d3f7e925177db45e6cb242ac66871ad5bc884584d8e7dc496e583a13bb9960eb0815c21653e9aa0081a24e18e471310c4a4290207b8fddeb953cd199c451229d39c81bfe8a973cb5da8eb93503f5d4257b1eee6e3ee4e9849284ecf0031fd20a56b76120d5b3dae1cb1afe007f2f0f2330f305971861cc012c749eb96dcec2f355af407b6526afb813c86c4e4ee1ec1c7bbecfa94d640a7c84dc5c236e2884316881290bc6988ede1ef019fc1424050ce677d5f951c10041f188027376d32ae10890425009749eb27a3f6eae2ad8b552b6563cf9c38cdcecc42e53126aab6dd5ce7ac0e800624ce482cf3f5f596b01fad68e9fe620fb879c220a9a375c777506c6ef3f873888411e01c59d0f1ca8cd4ef5661aa20d49d84cedcb67ac473b18686274965f2fe1634ba3fb2fa0349ba7840a22a805122912bd6896f124b68a792f9fc4dffeb0c68f05207e07f798e0e39e16492588027e390d06790160bc555bca0c941bfbbe47c970872efddf2056162a7026d8a146237d05bfab282c9fd6cda3a8c789f6b4860d8ff0a6f3e51c2bc90f5230315fde11b36b7bd406fa94a4c69dea67af341cc89e34fe5acf5961174dd8e17cb1b59fe8f59823b8696a88bf6e0f985edb9eaaf36b89f2f912e22fdb4de8fd2967e9e40466aa6e5b386d6af957a2fe66c4ecbc820511c243efab113fd37e6aecc867a0e67fb7eab90879794bf2ec45d844aae9493f2fa73ff0244a86f5f21a22b44bd161e99ae9ff3e6f7319238c7d97ec1d0ff32cb54f237281d9a236a6907a4c2ca2e829674e298748c10f8d11eddfb3cea4129a2b69d0aff3e2955f099a0be05fbf958a75831dd5d7d755442bafc1aab2631a9a402f7820b3db0f40d2ca60392da319d5eafaf08b53999e4f2573e9ab48dab68979bc84c7381688ba92993d860211c67e9cfb0de51ef8106a8677a8fad7566487ceb02730b046e095729f17b61fdf27bb41903575cfdddfa64b1529b11345bfb9b8fdc6c4c3bd4cdb72d6e06c49f784e6179976781e6c417410de348f6a8741746477fff2815f112748886f37d6b889f1970fa9a7d7936731b5e619870ed7e49ef3add3079392372a0c9293c04fe8c1886045837c93ff946e029a7450ccf9582a4e185ff4d43a9bb692cba61e448fedb7e072b81921ae3d87cc5e09775dad21257b452f2b7af4d5080cc459c08122cd1a675a4d2b099f2dfe00aa25692a08109aca7b2242fe4545244ecbf61658076452dea61889a2be717c81255d011147e624be74f55899bd902fa7d34351a9649a91840f33a61b0b9604ca6f7fb0dabbe26d1abeffad7626048718c43b408cb884ef3ff29671fdbf21492fafd334466a2966de08db7b2b0f0a20fcb94857d21c0e248d03480c91ead9dcba9e4fc8c7e2a8c15d879567254fb7e1991338b8c43b03f21ced8870f9be029a077bb1d089139616c03e357d398b4f7df6713a0810c4d0df36157d5dcfd339bb9765925ba66ab57413cbb77f11e9e275d3fc6e65ed690a92931c1c97b2524c11bf35981513a3f675a16d199b0a34dde673ae4e55f4d9df64db262c7814d7ce2f829e7d9372ce85bed529aac27d12ea640666a63981ee12405ff52cb3c545efc64276eae26dfdadf7ea5b0d2289501ff8401e2046f8e663f34a40654857b623df325f64d39ebcf7bc920f71f02306534ed9600663e8acb0572df02a767cb5d69d7cb5df6d78cda620bedbb6504155cf8cec7f9193c3c624130b0011a19f5b75551dc01c13b1f01f84675d6c31dd98c9f415a7dd45aaa3871cae5f38b7eb1d406cfdd3de491be6680e75bec0d008d974a2fa781b415e9cae705f2dde16b031d2698940f4e791a7cb33977836b72f9c8978963927a6c663f665b4d0e9b61968b0176445ea05c3eaf8a2f9685bd5d2149b404179d7459c164e54d8ecb072d6961ba376299d5119cd4e2269c679f0082e2447bda2e21c69b9e3612ab8b5f041fb7046ecd15e669e764b56fa74c7c5693a9ed1c87dbdbdece9d94fe5c4d132d678f9092caaea72f1d466788c8c469171f1e5183f8d5678058a7739e57df0bcf8410c3af2ef5cc3417ca141adc36e7ebee808a6dbe6bf2fc6615b210faa36f873c0ac8753bfe41a93f7652ebcf515c1307a36a0feb75173c87f7bdae3a114ccfa51c0ba83a385a7f47f420e93f507ffed8153a877d0cd29c3774f8bd01675f3b95e3bc3552f776035a8c14103fb2eb258f57cb55c1fecd8912d4183112b6d5e1b373dd6c57c4cb1c808a685015e406343d67f946345bb7b7d6737ba403c13980911b81a2fc92b0727ca872c36759366e7213b8aced1580f0b09aeccd105755914000b158181e6b49a997e9859eb7108ff6c575c76cd3e4c94ae781cef02c174b270f963c2fde3514dd9f6080651ce9d17ccec8a88931fa787da26900e232ffc449ef4a9b8299c830b62ef5526e532b60a2e4c1ecf3a57d8b88534e8856729592b572cd8856e53c9d9582b2357bf9728f921dfee676420261eb913299636e120f054f64367eedf1fae0d6ceb85fbfae5aba1c4704abf6359e44308be553ab6132aadf6ec99829ded292b191a70a07a586d9cbbcdaf1dbc61132143e607328eb9dafb6813c9d51547202d99793bc6f0d2978282067a176c5f18f79539d218eaa62f9962fb791cc9468e60ffbff0f2b8862f23865ac34643f3138a6ff882c1ce00c131e54170fd9f6bcedbb615bee29fd73dfb86ab5bb2313da6580fa6f775cebf6bba3c3ef9ac6b08e757d906db47a8fd0574438e96ad5bf56ad49db6b491462c7e2201909e44ae1f6678b312abe9544890b4ed73751579c8de67cd609be55c4c97abb48c8286ba1ee9173bf1964fdbd571a5a1ee7e8cfa0c406d6c4e54767b0a46dd1f9454ce960be7979932cf295c21a005a96c475d862dce4ce7b28f8a917f0d35456c9ff145bd006a14d874f738b0e539c7ea76c7f07bd7fe6f4a8bcf729329c236bf59482c25f175848cf77b79975547b801298c59443dd4a3f2cbafe2c7a19320e64b9722259d3967c539fd78149e66417874c251883af6ca469bf2f8d01dd366fe5841f80d30c4ee4f294f569cf68c31b79ecadea41822e84065b17cc7ada0b8270a3f956a3d4e9fe4900914c69c1a182d6d2e882d9903e0fc24e377e2048721a513b7a625234c0651f2c2961af6b1710f1b86ad58c99344ac3b59026cc592c99851d96d04c4332f6b01a3eee95e76f6fba02d9db2ef60f5aaddd5e09b8de25881b5d43d564a0c470ca5a7362249b9efc91b3ac5156bb458707783aa7ce8a68f3e30db0c12b964fdb2e6f72ffd24c16bc2b95577e961c7ea564ad0aec08d6f4b19ea13f09bb6709cc072092ce00794eeb3b150379d7b8836c35a31f79192e64c48a91a013cd79f67a9248ba10774c4954545861a435a535f5f00254b8068c47b93b7eff4fa870f55c71e11be8eeebd7ff5062ed5524ef11b73d51e207b5f3b1a97b246a502838499e9566c814409cc0724dd60e6cef71562352e5f902966b4c12da41322db889d5276e08e8fc4deed85e2d583c368f241bddf335e79867f7349d668f28e01db98d9e4ec6ef96d626895472ed3d89303d2ea65029449ff1f4ee3d789cb61fe919281014fc9918508f2fc3e7ba2a9d972f5f2275b847d8987db301734b2cd05816e70c662d17ae3cfc6f603cf8b60330b43b89054a61ed994da62d2f99f40f64b9b321da90ccf3eece4cb6515b262a4750feebc655ab5c6890288ca1bbb5b2caa19809f727916bdaf2488f3d142b537d548b45facfb6f62068231eaf1c5982aac5b405f25e98af056e830d19937166ebb8c5de4ac208c26a3d18bd56e4c7b7f9e13c1c61565b1eafe09ad18aa2fdef3fea9cbcd2fcfe5b170e98acd895752568410086fc05f3ec3e8af9df2518ac7253496ded9bc64260366e7e459ebcffa3d193191e3984cc79f37846ce76a469bd9b9ac57d53391df009c11d0d2c300c7f93829ee641f367787647ff3def8fdd20e648cc3cdab7a08b63feadece00bace7d77b3f7835b9546941ebd551651ef095d97f1e1f3207a81a35ba4d22764f91f676067a8eb0880dc7f39bc578ad9814f1d132b00935ed8cd8ff8b7e1307afcbd79a003049f15152c80b21a661c4722c1b56315c985ec2d4a357ca146464defa9a874136968df09e6ded1f4053f71ed8d036ae25112544a2ed60e6e4517e10811dbf4e5d629a298155c507aeee918ecdde1a9ecec161b166d1cb00785167c7db773f3a034f97aa044e7974554b88cda8fd38313e718fbba17741e34510224d7b84bf2bbe1026463f62559e926b7db275c444712f734d4e0c63bb07b07879a54db5ebdafe2cf1757e71ff13388ba14580e9b2049c9bf3d0f4f5a9bc7ed4081cc40362528a0d2a1054fab68adb97f76218827c3ebc7b1a79cd699f21c66ed503c189376183971ec8cf54984635388ef220d725e4277c178706c97a5c9c5d1dbbafe00d2a59091acf753d05b626bab94a8ad15fbc53f8da2d69deb72b9e38ea5e21b1a69dfe8fecf7b63c09afbf3511a45f62599f7eaa8f05a86e57695ce6bd5d945ed08302a5c30cf91b636145dd76ce22df46895af305902fb8d2fad48d985b4fdbe98e7679fe114252b379ff0aa18b936be9759f670dfa0fabd56e963e88f84494c537da808ffd89f1a0cc5dff851eb4c1eb554ac82ede2bd0bbfa809e62d3dd41d1f74d481c1a6f94ac2b3cf232b43ddb5b04a56a7f9a5e4f36b684327d337463de8d9980de465bfed2e04304f9e12a80b5cfead977ba7ca64db3e0f8c1915814fc46f57d08f285caa820c24b3fefde151253ef213c253278b7593610f9090a695c18a4ac4b92a9fdbfe24fbf6978527bba170ad64e31705002c20717db6350118411fa1df967152566075774f4e373b256e6e8a4cdd6ea00dbed2bda6a849776c55f6715b00d58ac19b0d2d75596e5c7e0aea85946a1d30fb13535c83dbd5f336bcaf284e58d360f8e2666588e03834118905cac5c8f75f79a608b6ff7fa4897603fb8b0922d9121164276088dd48b526bdb811300d22ef71c71e058761c6728c7127522b679f591e70c0802283553fcb1a1d802239fd17d8c47dd46f5aa5b604e81912c1cfef9466ecf3d44bcfe32700aa2d8a01f17d0bce56ed81fd4e38c23a5f1ff9f2652c1131c46467e04d041e0f640091ea3ce0e8041c29d5ebcbb4f64d77c5260d6ca1dd4a64fdabf763d4caa67ac6d22b8ac4abd2cbcf53c533f52cbcb607277312193b7fedfbb9f8b9277a319598df2dcf53c3013319d6fc90e438298bc5cf42fd284e3afd34e6601258d723219b115475180497a715cb72eb647d094c7ce0b4a437f229682cee45a5e3de4a0ff2a3366f8c30ab2ccdc5a225a8869a0b8cae6d8edf897585dc8864882c406ac4ab2a9889b70a7c6a95257451715f0242c1f9851ac9306cf6208cc02cd5de8b7cd8fe382ec04fb6319925148ab6fd789d58136fcfe257e828996c252cfad0a5671b0291363dc10a7e61b91b6ca4555cb70d6a68c92d5e27d0e56deaf15f9db50ed9346f43ba9da19f537a93b9a05e298becb8716c13b7defc24edfef0d769ffe713da2ef31f4bd2e2609b39912d38181ef6599d9ced553fbb10aa4711f2013430e8c2c190f58cada431ebd0f5a8c3a54463d7f3d0e697f3938577c77a2f7954109dbf9464a0d61b0f41a95a86b576079b9cba68df91b02c840c1c1a6f9b2ea960fcf40f680d05316bf42305b1f88ec8bf2290898a6baaacb02655e041161e2d31a84cebceb7101021916bf79b230b99711c750fbf03912fe4b74f5fad11191a7d6d42f2d622b0c2a33c7711cf4977e8a916b8260cce08e39629671ccf7b78a77d50baa3ee1ca2560129c469284b6a65fbc43eeda89d1ac58773c09418aef4349cc82e8fe1e8a25d5a8c4cb8791f0598922c72341902b5924452ed2053d2c20a15bda08724e5feff871bc23b41a2529069f3dacd64567061bd5b42401d434760f1b538426cb93b405d5d724bcb748406b805ba1e4725e2fb37ac93a21a674fa3fa8bd9dbcc4028ce45fe8a2760834be61ff5d5ee614910dd3bead43330f6c399394610a85c6cf4fe5cccd98b780864bf39243511f88d022f9f33ea07c57003c988f6648bb2b56481fa16b728a0815fb7cec919dba6b574408e9e33eb65893f681489d63752968b2e514d23d529b90c535cd4e4442c763eef20ccb2b7c2de50552bad6bc81d9cda7141513a83840cdcf77f614455e8d44b9f18aece1b005c677f65479ef5b991ed58711084c9dfc1147022212377624f8e86b354593df8448c4fe127e5658bdceaf56fa9308fc91c4c7326509d50ae0aca0a41489f2714349ccbfec9b99623d19d97d26ed6e589f9d21c7536bb02af526028ac7b101cc334778c7aec619cb6bab407a5462319a0b50b068fc602fa6bba6d28930c87094145bce47139954e74665c47d7065631a6f0925cd0e644e49a77aaf7b61179bac9eb3861c7576b9e6fdb68c99b29de043afcfa2e1596589b4b4bbcd2e1783d853c08a15cd10b3ab6d2d8b12ef843a913e822dda97c6ca109bb4772c4f2774282eb77c1db57c18c1475a82d00680ef2d7266d89cb599d4744a9d7fd974bf7b5df140965b05729de59a66bb9c4fb5c7af0c6c466a841e18ffc5f95558dc8427960be0a055e172aef4229d9408b12e5f25c8d90d1ec4e154e97a00791fc189eae968eae56fc627e25ed341c7d86b6417bcd4a860343ef9062ce436f524ea2d7a0f3d0421802f5590276f26218658815d7e7af85f457c8d567fa8c493c6b4c020b675dfc96bbca35cd90172f79e5cdb9bb17862ff94fcd3ded1c056922ffc7424f645663f77d36488919334db3cd0a5ed95190948b906b3e98fed93e7a1f378f50dc13775ab110a75b2a3fb55144f1c3fa72778d61cae84baa70b9e72fad2beab58f997ec661490aa10b1177d3ead1134aa1d95fe484479849c730bc6f6f0679cd9563163547df07850450a7f4b4c3b2152abed4de2cb436495e91b6b3e2c13632d6f2834d2e0dfc31242d24b00bbfd7a7676e0a5fd894f6e94a0faf29d699dbb101618ad1d72809f189ef04c1f3f991c71704abdbcb6256f886d81c545df526fb1f984bdfce4c4b6e0b259a784d4ff9bfd03518bcea713d9b100b718613caaff3c80587aeae9f446857e72d13509b0046d21c43b1a3aa30f494cd0cee73bb395463b8105fa52977356c32bc73c5f24a1af996d442426c55bcb66c686c743289dadd401628274db88338b73aaec9b4a3d9fd820cceea47d08340b5c2b2e075961e17bb875e232f12e707e22bc8efed355618abf36504396b0f4aeffa3b4681c491cbafb9ecf6c133f7b00729273f9edbad5cee72b07b5e5c0826284d8ff97273c8b15e49945a6ada1501365cdf531ff3be7d55ae876971b2e73e070d825eb8727d32c28fb99aad0801149bd0b4f65c778659d0c515682d268037f9a8dd46683d501be8175c2adde792da3b990e2986b2ecf4e0bcc3aab418d4606b0e660ba0c7a44c41ab595b69013180064b239a3127528a46d97d73e8b09386db8cbd50c668442e34201ecc1754d6cd1e8d4dba91ddc65f1962875db831f3eb23d55c40a50f4f11c295087abd1fd363013833cb41a8463cc060aea9f676985fd6cbf81a87e1f2c5638ae421c4e696556b9847490941429678d726612874ae768d89d4d02ec9662d89df147a90f3810719a22ee6c60644f15a7079aceffab7d85a51c0493739c1493aabf56c8e8c9da5b3d13ac649f2a5a9d546fb8ebe8a0902727a8d7c4583d51f9a99781679b236d3b8cd475d493f8dd492435fbfce72ef7db8b76fde7f08f65347e7bcaade43e7e2df0c8c4066ae8ed7199233c78cd49d61b0302cd2e92f71ed38897e4057949f25b5c7f14c09ba95c05be6284c696e816f210110bc4b440185c00627128c662f2eb054881cd28c95d3f30567c6c242fcd4263776bdfb2b303a1bc3b1d959323c9c5055bbb419035c7688ff0e5cc82a43573cdb902627bac5a6e82cb25d66f9d9f288e57c132648536186b3ddff74d198438a2716a7fcec5539ed4e6f80bffca4073bd7e66a0734109712d4b75430d3f9711f8f32ef042014b04e503fe138146e455817d9b223965baafca15f1e515a29d8af43368088db591bc63ca950b971b5de02b082af1be83331e89c9694db7aca9ee5f8ed067d8102e5ce73c2c83573437f70048909980e7e146194e41b2a0be04f13df4ea3c1f63fbf14cbac65c9af7d657040efbaf5791003a910c338b88f6511ecb8b1ad34daf302a11bf1848a70b8e0e404414904e216d2bd65552fdeef1cc8c5f060224e76fcc4571eaef5763c74f06d379430cd37de46c748a9c554620ebb575b4c2eb4283933b08a2bc45da3d3e5a20b4aaa8d96bfcb598467e1aba1f8972eb9995baa4bd5649a92e24876251dc0690b9342301c2a239705c8dbb533a4902a933a76f0f791ad48adaf547a94557eee69e42b062c74061463951c76df584674d795165953ef4a7c4132998d2f456b1a5bf2b0cc86cbd512a3b0c98f470fcce7e3d50766426315f55b44c2254931004e022c7bce61949922d36ec1b3df8ceec288f5559f363d58ffa2251b0efb54d07e841cbacc228169cb39038e839f8eeb207cd46e133cefab0363a4e821306c99e22524ece3a29bea7578229ec0a3310280cc747c451a8e5bbff3677767d0a4ae5878d01e12b99583d02be0d2681e530cca06317592e59eadb0a594d2bfa0466ed7b0efefb865e8abfccc55f0da61da68a6b4e9c8a46cc983b61cf5f93ceda70cb0322a951fc4eb48d9efdf9847d5399e4406432830b96f83cf4da9014751e0464dace49e34ec5fe59f5cb255da6a973f5eb56bfaf3450faf2407c93f19296367bdd94fe562f5a0438251874efbbf19abc7894b5f0cd3437d5211bec48187eef4b086e7f170471471a490c5bf7257d3cabf8c8877082160ebe63e23201e7f789443b821f77f743131f54e2ca3b88ad73151d4690887320ce4de136d21280b7733fe01df941572bbb49dd690a3ccf10bc4964f19cd917738d51eef92af2b38f7a049a475ca0b5d2969557d1d95d8eb8ee3fefa5284e59c6bc8e405ee7f5a835e9497884742e6f59ba4c9396aa034e7da80e8c0c5705137db75caa33c5ab47ba75ad90786e7791f134fe1d95afa509219cf606cd33ef8f7c8ea0f98310fad10d11c8502379cb38186df389b133e0f529a1de4b13ad4e5f5814e8be0bb439b63a12ee6d3dcb5805c6883bb33eead995f2fd5273bd15ef367098b45e07e7eae11bf73a2ffdfa71ea7a6f47031585ea24b55a88075ebf1379fddb2726442999d0fdfcb725c4382ff35a1c4b793f81316cd07675a61578a103e09221da0419a035def0ee4320a4b7e19c1bde89ff4fd0856f5bc1cc4969ffedf4b6c3f861468ffe627a8407bbbfb3708bce5a576565e5694487e4139451a186673710c7ea79720b8f8cd515f2ab64cce43704e4ed90c1f80407ce09642864645f06b3723da2dc899db656b4e87fb8849c8b5e54dd1aecb8b0064f0a7b69a386c8c3dcdca37059b2c940c1c842f688722c047938bb752a8aa154fc474e1df41e26dd7c64cf3484470ca7be6ac3cebc1e5e356b360cb1ed1a5f5b75ec086081636bbf160e7b1f57cedade6da462e48bd69441e0c88c1ceed753541a89616795011b465f248962c98a6afd6d276350cee9738dfcf4dad44cf2c13d9f6274042b7ee25d65f95ad4ad76f0189ffc13e2728eea17bf51134c7d7d2fde1cb65e2ceb53f24186b33ad317ea2727562c590d74f93e6ac3393527abd9ebfc14a62c5cc914bdda7ae47e08cd10c61a751db37bff3cf17fa76b4d462224e40f7888273bb2740697e12e2b0bccfedfdebe4d642d133cdd90ca1fef00dd8525672333734890e06ef69fa49dc07d924d2ea5734a75f0921395b75310b2c73c3a76ae6692e5c65fb73a4878f7d8069b087b2e2ac04170ecf56c47e3109b18241088d39f6b9ffd8c6f0ac0ff0b0f530a87d130759ca4871e48b60c48720598dfb718d3eb8514f456d3b0677695de4be3adf8d1c9f3f1fec8b3e6111a183108dd3f956bd369ffc8e1e0edb4b3877cc5499960bddacfde47f39997c469337293178f5f309d82a51beef53356e57955a966356cc8c32e87c000ee2137a2cbdaf220364832ff512e4b35c6cfc341e95e88c45f288ee46548b9855c7253fd82d93db60135e49f66979a755787227512917ba148b03ce4af365f82edde03405238dfbf74d61a6c6916d85f9278100c91fd396068f6ed48ea5c55e7531171de14ab7346c4ba606618524f6709fd63d120edc5a5abc77b6daaa1d88fd0746d9437145240cdaecaf0ec3a417ac432d248222af202e01d3951f94b55dd259da218c35b0ff1e78ffce2e076c461a30edb93d6913fd09334977827c2055f3863ce137275e27df07e38ab9c9782a827e49f2257ed8e4dd33887686fc28f881c1682dd465784cbfe6dedc678e1d361887eea48b93f4590fd6d4af48ab89f8465d6187896b05b9688282a9293faf4d1ae9ad8e37ba9582de86aa97b925251710fa6dad7ee014a66d61fc3abf814c6fa2099dc7e776583432715601ae6f8dfb91236b4e0fd26246de28de2be7e0aa1b2ecb5f7d49f39402a8b3e55c3fc8ba0378a79d87cddaa50ab12df15d31453e767a3d20296eb8114716863c8d45f0cac3e9b5c884b3278f9373529614acd08aeb1df5868f7dd857190fed3d03cdeb421b771bd5411d99bdb200e0016d2c236b2427ec9c6ddcd1a18e4b0aafc1c5a93c4ef9cd30763f1cd736657b27f237b6453239c3761cef83cf1636e28f06ab5f0bb53b7025a98931a247e5e335534fbb30b092908e490005f34a197d9f20a9f2fdf373d7da854cc7b6749da8fa62a875b48a52b7e4ef56c9fcce8dbebb799e20dab8921ea0b8714f0403ef26a22e2000c01ba5b7819cbbd078bbdcb221939c2be7625d32bae0f27685c81b9eabc3465302d90a0b954201490b4519b24ac41562f2ceb4babf30c3b15b8e80a53cb68cb1a8ed4878ad1641bd84aba76d76769ebaf42965d85ff51346053de974e412dfa35b95743e7d724e7a12be27f4afda49fe36c5a8c3e54b813de8dc7cb7ca617c4e97b13aa4010d7df8bccfb5b41863c09c119fece25a1972b29c744cca477ff03fbf39045506cf38d9d5383610b3f43190e7cf452ec6cc19d115e99476d0b247fc5b24eed01c22c3ac0eb49019ce22f78c19cf73d1356bcaa516fcc170aa73916a55dd3091d9dbd9929eb50698e9824591b885413bb2c969fd5f50b7a379d8655d1839820bf39ba63cb12b1dcdb9a69cf6f88a4759515de7c85b3472ecdbb07dd183cedadbd5918303fd16656e79f2bdd7d8806a7941f4ac1c477b544c2161d2a68f7b1ac309a38a9df932859d02a73f68ba0361f7f7fd478f35b79bb162127fbd817dec9fcf797771a22c17cddcc5d340d812bdcf5c4051ab03084d5e7f951c60eaf8e58c1f01e2587d57455f00cb36bf1f21b1de3295f805dc5c7d514d00396fadb047273e4b1473616153695c9ee520513826f0f0d0324a8a8c0246902f502f4561a931631e54df2587adb8b8435d487bf3e94be23d1cf39a98dbe9153b5df7f869a03d43ac2a246e69a7968b126029fa35bbe70721ed01a6834c9f897b54adce4ae9091aeccea3cc02343716bc484a24ccafb46e540e577277229a042776fff8fbbc48afbb0c4c1f4b5a0f453d9d1db57e424e6387b18bf067fa7d51250d2f63dbbbe4b49d4062c6d0a7bd162eb8ea0dd023d2f9fcfb9c929d20f2431ceb144f0dcc56b424e2969c78e3c693cf053d76b347502b7b18f0e84c163980343b6520d95477cd27e33ba7b86ce7636ff297133729cdd3b80620f4a04272c48739de41845573a7c41553f2d66bf7ef7cc86bcc7f444d58507a315f3d6944d7c9188d1ecd6f8b813078b8bc417b9bf30f63c4bc0bec08c90433f4e25996b485b15193e764db29fa274d48fa7f2f8570744835467e7b0c05bec6de355b63665a4d7b4c3f584ad34c875771b5ffab0633457976ed2f2d288f7ea254c98431ad53bcffeacd874578a858d7f029bb991eef6e9f489aabea714a21d1803fc26b10ab0d59aad05a5eb883e8a07e800cde7171e5ee64297f32a00668b74e3291c778e6bac1ab7c1280d759411d1d375bced5a1bb805e152bd51598691cad9050a396c19efd9345a403da6d6262de2eb0f08eb032f2e25940891344315db3f51706e034108d0c98141b18831e5675da8405dbf38279b41bf09eda36cd5a91c1ddf17e9a16d740810d60a9a7db5a5e50c9632e55bfa896d9bf28ed0b127faaec3ffe155c64d432f94b17b5266374bbf29ab67ae276e1714dd62f33d5236f982a3138c87f84d3c98d7eb12fc461e2efaab408518f736e429daf1b174bb876ec6d7cb761e3f14424cc7dafb828780316b79be72f44e87e148ab4dac76f92903d30d10d4ff2c848175ce2f1df027ebecc10641e587f28affd0caed96a3aa2a3b1c2a81a43f387f8cd69926faf317401df1305eb234890ca4c2982814f8cccc8b95faec967fc131481b877580c40bd490cd4f2c17d94d06e1872a36ab0deea9ca288ca84cd41138ec68a848d4f2bf71e7f473cd4c1c7fdd386d77a84e02841eba45f34b4ec5bb3c80f6e46be3e31434d834434c8bf9dde6f9f440bc639b41f4a0a665532406e4483e64e878cce85b95096d8d7cfc68252908af5e87016eed685c568d558406604166eca9bd68c71ae01552d9a70d060d99ee8cf2353ccfe01b7e0cecff4204a2de1f804563848f9cbe4339b9f21b66bd776cd13db78e96a6bfdff2c7bed0af763e67504aa5d4bf51ecef11b2e1e2b7a2074f142aa4f281d12a5b0d6cd9f580d0ec79e04eb2f48f64a4d85215d3d80f77cd87e4f6fb32c39a9976ebadb83d7eacff7526dcf004fd1903d8d99b927689075e6e97f35bb2f921986d516d3253160f59b7d5b06ffcc5d087f10dc593706b933673b8df6cae3559bfe48667134621c29ff62e1af6fcc80156fa7709ef716aa8dafd7ebd30ac0fd76c19c46360c64bbb8195f56151575d1da3c575e86cc11ed84700fdac29854664ed54c9fe223da96ceb35a96002fded2f4d32972cef189f02cdf4620cd7bf90c0d70b0ad25273c5083f36b4db20d1c73248430ad1093d261464d1994ed9d97fe554198c9ad1c24139927b2c1938cd24452b009c3c60c7104d0d5178a2428aece12d4a627e0e682aa0360d4c0f4f4a009c8ee13b3a88aa0c9fabeea9ad06f3f8d5b00eb5a4bbdd31ec870a775cd6c5f05efa352617ce8cc5c745308409e3fa0ccca31cb74ab1e356555fd134c0e5595f3d19cf0607012ff12b3a1634036737d1c86ac9a2db7795c03f04de3da33e09e9049387f0a6bd64ffc2dd076159bec009c1f60963010e0b35d0c5c712a0cec81ab2e877b2b012d47ad505583985bb27e5654c03d8bd4b4ecc462751454b5933b4b16f8cdaecc15f2f6c3f2612659f9c59366c02532facb2337efe20dcada2e1607fdb9e8fb5afb895920d841a6b9e4ce578cade5a83dc7c640db22565c56bbd9d54057882d99cdd4e039ead0e015a2cac44db8b6cdfb5bf1c4471a22cc3da2b260a26d210c2736ec95ade334a2ec17213d808d356ce122d42426fca2507d0cabfbcd81d49e4f4ebd312876ff2b74598917c070fb1a947fe185209fc59bb52164cc502bc8d59a36ec7a033a803bfa8b45c25d5b988f1a7cc4b911d3de9b38297fe4cff8ccdd96fea608298bcfc82a64e6a2d9c6841b49dd5c4e62dd5deda99850653cea781215c193eef5a8549e19ade54275857baf2959629b7d3afd76ef709f6850f60cd7d72b291ff0a8c61cf98c88a304952e5b204c85dc16fa8112631169340e54f5ad3bff4ea5be97e7cfb4f7e5e7f2653d68ba043317c3ec9d39400c62da474c7283cdd20abdab116b84f6d8b5078d5c3787346fa914689093d986593dba2b8227e658affaa04dc7f54d6687294481ff8712b89af0921469379b6e5e37f949d115871ecb8c8b67e263ed60120f55aa48e4f90e5e3e7aa6718da8e7ea3fa59d392a3eb684084288b1585b1ab813dd1162526af8cb11807f732950bc60950d37a8f126f0978caf72e1f193d230531ae4e36c6dec10451c42b3425df3ed39fa3a824f4f90431acd250fc366163a3d73692264f62ef927900c49be20cc70fd001056302a0a5ac9a953ac10a977f5748700dba7175b8c19ca7c5844181e8be9e8ef572250c75eb0e43c1ff13e9506e07bc957c00214b06201608af5d5c8241fc838737e3576d37c0bea3f9976a048e5d61f28487e559a09c963d70be1f1365e73820ff1d79031479e9c7bed9226a37b560cc36c2d5cbf633ec549ab692e01b60d6be36761a2280e4d2b032518d0ac445a85aaf79233c995326a9a47988940d5d75701345ddae044c78edfc1d7d24f4c00831d651625395a5a8d7503a8ac337f6c52c572cedf0f73ec1dd7d9c34f4a5006356fc5a10638e45df9af4398dd81bef3683a7af60b1312c6edbb599b92d68697f872e1c2f1036ec6fb3443a4fbe74f2ed6bf8c63a1070bbe2ea5f85872cbd47e7ec3effe6112044d0a6784479b77c894b2a9bfe2b6483c843376d6ad9d1f2baf25f443ed64d42d2fbc0765e563cb17eb42be1a26911154d2e2699d1ae301d4378859965fc02b0d03fa3751c20d79c543f923300c88a5ea7e29d64890f62af1a604d7c3acdd64570ae865c7167c4e29d9a4e826035eb9a20b9d5168a01e994af63213dce996798c1fd67aa773ef2a3baf1007b4d718e5cf3ad945f9e9466820bc073113555777c978ba96cf6b991a2a66c4ee067367f9391ae2380f312d2659062c75c2fbc8cd08063f2a2b312e24789725d1c840b245324b291c348e2b6c15c9ceb0721974b398fe69eded57b975593619d28f7f045abfd7898949cfd8aa6d30c26dc43cc4bec3e3d823564d2084da6395147e70b67732b888c3c5a362e32241068309d7b8b9efb093b7d2e7d1d7ecd30b7addd54d08c6dfa4f2ac311d9bcb448db5de7cd899c0f56d254d0e846cc2c0d52c6b0f3e3ce799c74930e26ee94f6a4486b32c4dcf0d04daf3c0372bdb764eb931c7a251af0c6977682156771379c0c8cf7a4357c952a7c0af8ddf110f23a6472fa74e3a6d81e5fc2a9757f504d02100a8a0f2f402f0d3ccaad7294e9f5a763da0c63c2f9bfcf003075cd6da8ede65917b90e47f3c59efcd65a592c306c50c2ce7446a638a20770b9db7a79e83fbc52560a834731e1459524fe79896e931c9d118ce32eb38a4874f93a7e20212d1ee7f1fdd9ca81281cb0e754cf7cbf01baf6e04ccacac538708eb59cba9c5e4292c1e2841f7ab675fd3dd51407ff8a07044b7cfc66d9fb87b2be5d48f1a61e5e8588fa2ade39eb5e7f757245569368b42b1c4e03ee17b8a8d7b1ac5665d9e06caed7df421f60be00e7cfe1d2f44628028262386cd62ae58c32ac950cb1046eb39d43a6ca99c997337967c4fef698bf4d9844e6e4a9192d75b036f484461e95a431696fc0d89a2ea0d307f1e6f2851c55443fa15de9cb5d09a6a5092d09e80e24bee4558280fa9e9cc8136fe520a828f9aa623774b1e166580794e7170038a2b119052f23d3363e487a26bddec729de8f1b3920c64dc6fe2a6a9172144047ea1865697f26a6d396804b42a22d4f9ca964e84f627cecaa6d2e1a846c3228a976c381aca53d2d78248819c1d2408ea109f04f27bee2d2726db3b9958781defac4a1dac0ccee77ff9d5f42e1599e89d0ecc13a5d9b585c9dd926b6d14d0c3d5037b2c9e9c452cee33d98a540ae272a3a2dcf394c05e5d50faa8122d04a6bd0512e722b817c7073ab832873084c5a89cdb9f10d78363ab44ec763334ba142330350cbe19bec40397f2119c967ee54eff6218883794c119edb347636e2c74fbb36eca098853aa0dec4aa97a19c4380d6395ce399abd4b769413b764fe01c35995aae1f84a8baadca6e258327e07a4242f2e3d5aa06ab48785627f1c9d374bc7dd4b52d7459994bc7c69c67d40743dec40901ffd7f395b868889cc0d5d48c69a5c62a994ff2b4b152fbb10b1d5f2a55315f5e490d90cd3f15d7cf2e6720554c43a73e51c6561344b7daca324d346fd1b530f9b98643e3546410186c0512c615287f92b529a1087be68e7ac5c3b7086be6c0e343c219e82240025e0e1299534cc8992b23f304968042548ee6361e0b2bc9ac10f0dc4f334b062626a06f2b44d52f1c910ac2d088a905069ff855aec9f4ca2c6c236fb4de93f6382e94aff4c93de5e6ea9fad6a28f3ceb6e3cbccb6005e904fde4af6428064da4ffb1b5667046e0e9f32f44ae3f8f1390542f2576412068d8e26e4e60d86ce210674040e2f05b216303b32510a28c752941601ddc0b6ed77d808ea0a96940a30f2ae9215cede5e0e0f0fb90ccbaa9e82650e3175e0517318c6ced3bd7a028a8677b98c4c2237147b6689281a501c2fc03a75fdfda36034d99a29670d39b9fa8fa7a986065d4b01552143a623ed1bbaae37d5debd0cc34c9f93b8ff6572be781c92e16018604631153f89075ac4eb48a074f9d547f0a65e1bb2c1cb35735d81d9a1b5a47785a0da185575b1106a8b70c9721819dba21036ec581340d947891f222d7dec45fc13fcd629843951ef4decb3f475b03afbfb5c6e43d66f78ee1e2cf1db7b87874650a144b8236b472e5d97bbc0c63d0083bcdae9855ff252eec42c0a0eb1043230c219794ab37f397ed885c6b6b11b657f1dad3787181003f9235164028b84ce15cdf849b9b20d3f72a713c0e9245a9802f0b1b879ff1ae823fa7fcd1ffe07df4945906ea4ba00705376b7df88f34e55d9a68baa28956516dcf803386aa7f33f415335f4d674fc43ece8c0f4b38335efbaa70b320bfaff6cbbd9a484e95ca1721f2c724aef55e23bedf81e354f538430c4ad6dc1dfb35b1178b7eb461f38f2d49cc3403fa3358b34dcce76ce41cb8d7533f6cc023be86623ee836835475bbd8c379e49a2ddf8780378e5bb475476211f1682405124b6d2aaab67bf9fac3ff8cabf9f388ae474f96cb249c7d8c561f0f2a8e7fba657b562004c955cf0b947dead19bd194c7d22cd1b476c54c78edafa2cffa6e06fa6ee01ebf6411a4cacfb26887b4a0688366fb7c2abb4cf6e34b7705e5bda75e1539d895c35c93680afc37702942aa842ee5606e1a0705344d5dd5d602f3c18d8390432bea05786669e4ade3baa537c94c42d8881b1d632d3299e076793d1f6d3f12d8a95301eaf5defcd20be5dc689fd23de9b50e44d598f798648c25b6827fa900cce4f69e279cecbb8957f26b8aa74934bd9f8e3fab217e668700f2c79a25fd97259876020cf6ef5843eeb63806580af684393db1a0f9b6dc544643f125a4f78d33ad9015800fe0215e74e169a60f6587ab227d1303e877b78fcd807e106e52410774d8df11e81b7ed870ed1fe9913ec7dfb7845ba97e958b5cd80646b6764d51a6135892dc93b17a7aee215621ac5fb607c56215b0b36722849684c1e023f27b8c9330d7c8f0617fdc47a2077d8e58b24823674bff9cb28ed9ae3d0fd1156b8ca927bdcd697adbdf45f5a193d7aaf8282b7360251c4b291ec03f6b7462783ebdb135c078ec5abd593965bbc4ea3203d72fe0605e1a7ef3a9c13d65f9a9ee962350ac73651d90a0470f25ff045083925f6223aee59160c0cf78bcbe04a38808667fd0c5ad008c0c0d318945db7fdad10c510b34a253d6be8e7709ac824bc82391944eedef8eb855a74b63b9097a06cab2c90b2ead42122a2beff24bbad874c8d3bf3d905c1bf533611a373a5fada9fc99fc02f3a6e4d8a2b94454d24727eb808b4494baea2c983605dbb81f3fb5b44aa0788f0215840dbc30896bbacfbe4c23cb091d5030b30a0ee20b525a8735db0957ea8558bf95277ce9db4376638361f7400c746db1549b34a07a13a0cfc8d9d86ae5190b7f198d3b801ec03a602a7425821fc417ab2d0df72c07d6aab86978cf16515e90675b2a56fecf75cee8ce057df3bdcfaa808fec00a043a9677803f65d2680f0f14ece4dab0a3ba1033481e73c40bb374f1aa708be562a6be8ee8c48f2415d3f189191a4b9ba28296999eb8af994a4f7f3e03158278130228fa8ed76b116e90dd5fcdc9056855b6ad0ed14bec20cf4bc79112c78c756ffcf728c87e6450f866af218515549ea2814d2284bfea55771263da63ead2e1626bf80adcf50fe4930c2baba2b893a85ceb67ab882d4ba4a7aae2634845bd241d96399d5e21570f0384abc6a395f39900d5181f660c42bacff5d4483aa4e78a3bd7acd9f543e40122f1776f4d7cbe75a87bc4e0feef5435ab59b103d9423ccab09971eefe10795a4ad668662bb95218d097db440da7ec95db4d29c0a043e8732af1a9f48179c7e09c2ce2929b83f47219553aa667ca8ad6ad36ab832140d7b667283696ed4df8debad77ed003c517aa982806bfbe2ef85c34fe8ae1dded0f4efeaf1266d2b459a526f742b1f3cbf2e21354451de76f932bf7f237f2405744fed4212dd5aba20ce5e753779e5c3071fea718ebb891df4d692c8675acefab5c2a0eac551e293e51abe3e138b8a10fd6871552de50ab9087e8650b77f1e05bb61aad907c6507ebc776ea4f1d4d6fe1e68d641ef28d26283fec3e8c5b283d537466a58b03c42b1479515eed51c07e503584a712169cb03bd671411856bc6ebf733914d98d31f9ba8493dc7c4ba725fc30fbde6017e9f320aba5a11c12711034e2be1a0bda840643ab131310d927a10b0ab68a53b7f42e62bccc787bd7fcd7b00bac3cff5723dab11cc4aa7abaf77e1800df8bb34d1f0e1bc7b044be03174b029fd37bfde58b90a7cc699cba368b314c8f53891d544d83cf7689ac265b1c94417f79398bc5d8490f8388872689df9c4fc836fddcb5116970795c9336fb5520e7898e8415513801239f4a4b6af1d48a8da3c7b16c512d877d6a08066c7657d63437a7b68bdbfcb2870dd8aa5853252a1d74e421e951e3523475f1b30b09b724b98275269d446f17c927f7a08fcc55c591b513476afbd9cd978df29992fe424fbd91a5f28f8b3ab6343c33a923512a3612add01b05d7113f8a84ee7c8f23311c529a18364043feecba140891412f8d4b0aeaa9b4c12dcb9a203557f4a25eed000fdbfa04f2d9cc698ae3a3614742223c30288d252f0320aec9726f98a4569ddd27dd947a6eb4e9bb3ebab43711084b8996856ae898d19722171dfbb442fc3e7549a21d8de69e603a49576c57604cd0f772d51c773b6194785da8b306cbbd2967bb93389f74580642f6e335e171f8f54ff9dd49513098c84da34965841c9bbbe7c5e8b5c7167b9aec3ed9f0f99021ca5ff04002e359a1e4f07a301692d69fcd312ca1a9991cd2a611e5e473b1b66315b333b8389716f628107ae9f188b6cae90c7c56ee01d767574cb1df4fdef0d716de7e13bc1fe182887f4816b9d61b40e2d2be8aa47e88e12763007c349174e0a003aa8f857492d8fe1a7e177b482bfd038242503362d39c31c4d79913de746c2dc0bde16d72fdbb67929267d6cca6ad241929c171fd8acde1bb87950212ee34f46edf53f36d803dde59b3b9c0596025636bfccd79a5c8cd0fc574da465b54043e894918d766ad848af7b62c7ec9012e1efb63b512bd070baba870d16610e257cc0de40ad8c3f8d47747a35a196e94b83ce3ca4911a6723f07013674b86b1f485594da09d0bb677c31a44896ee0660af8dd8b0ab0ad2c54dbf22c120ae6d22c6e2f38ee2ab2132b674164496c68d6674a5d48202984f95e02464a1657ce9e058610628bbf253ddc21e3b0230839141ac2a6f53a281c8d20cfc9be7fdc3ebcc5b026296be6573160dd9c8f2ee4ff31b6a90e54e4d909ad261398c095e3385883af42f8027e674e431e84748b1702a16f61393e7ca43383f0b11b2876c6d20a5a54ac5f4bda99d8a7b873a983cd92a8857fd025342ba3f1a2964329d486e77ace93a56c4d2c680bbbc2429013a3036edbd4b418d4f495a8e3fad7e844080afe13450de957c17323d46022d1c85a7f3860604e1b86ea6d9e831cf238e38be9c66d0a0440cefc9a0f5b072c8dffb5b09b37c2db067508299cc17c1eb43e25875fcca71859a0aceda503fe0a8c268049d2f74f2904c2a08fdc22bd70dc129695a71a0ebe988e31b7a0e054ad5a66e1dd6b23d5ac7f2f1494236fe38a31dd529de1311df24ec2c2c12e0495f77320d05d4ec887f556d8c5c61f8cf2133a3f7ae70f2e0634e06e8d6e068ccf5b6def053986f6dc7be6d01e8f668960486f9801430beb4ea999f0c64c7e2427cdbace268ab780fe16d14c0b0874aed1faf1885542b3ed6839f2cd62d103fa4961f1a895ad5bfaddfde0d4d6f5d9794eea8d892d727b0da019b3f18661d819719da7674a9be138f8735df16c3b1fe9c59a4f1db36c43df748f62adc2742a4efceeda92d9ed5227788f220d96e81192058e52c421d2912afeb51ebf87e4865f00be2d2f0c7e7566f2ba6118a930046f30222844c4626a8b0d7bf70f20dd84d26a28641df6016dc05e9c817f7ad8c22ddb03570744c443cd7d93f85c44c772aa59bcdd0c5299bae531d0d934b5fe1b0d9dd0a1751bdf48aa1841f04d1a23fd3e30052c78bc152d0c4984d7c947fbc6ff3454d615bc601411b3501f96cb11d403c34af4905d6581bbfe49325ff4faa92e58f819d1e503768e017a8ae8ae355c7209482e0a4e39472e3e8ea1179a0fd3d3e942a3e8db679a33282e4836722ca29a0d6735bf743933a4d757a4ff3f03ba7893799c56199b4f0e9dbddabd06bcf26f891d9a3c903d4a4b64cb1150fe6e645a030ed8d863f1281cae44b5b3a3024ea2885676c1706e1377543bb65b2ebbd9a62a1c96ed1ed82969b542ad0d64c84fefcae2c941f1700748751fc6f6ccedc1fabd89ca17597169e0c61cd9c74904f891d723d81b4ef3d6e0b61abff3a19604012c2b81f0cc5bb92be16ebe871dbce6860576968a28a74f647b49f6c0654aba06964497cc66d811467b145ac150fa1bff7c835a9d0a7f02e015550c49fb3d0678538de278cd477979044c0f402638f84f44e6026d890bccf8814486108bee8420edd0dae6b5622ab4a38cb83eab95e6860a953b80e2e434821c835d49e97758b13211582ae7de8332a8776f3562899b2c771ff48880d7a4d9f893ae8d01d5ffb57fdbbef121efcfed7b3c42cb2103d03bd0612584fec02395aacedbb56f2f3eb4414b8c75da77a3464284d8cd7ede8657dd900299afb1eaca5ff85ac7f1cd4a802143bb231b9b7fbfb8e47043bd69d880489c54142627d00f35e5e298848bcff4ba8e4c3caf47d2d4ef11af86c8a5275649941dfa9b52282f7db3e806585edf9afdbb35f8e19d7dbda3d86ad7fc34ef2683b7d5be66369872c7e1e5c952f76c6611e33031bc9253dc3152ade00c9562a9636e73ebcd5dc2d366189654738f6ea32b42519c4b9f282e87c56e8bcab846e7da5c576d1737ffa2505668104f0362b389740d8ddc4687bc3167998ce84ae1c12f8328656c481ab5fd29bd52649876c049b1089471921e64227c0c9dd4622accfa0579a5066441efda2717f7a0a17d2666f4b631f6744f71e444a1fde705ee11d9de8370c44bf8e9100d270582895fd60ec44d1fe4d0bde31dd306e80d429c0e1a9c1981532c958afd0db212c2b0d675d8cf0c798ab7b550acb56a0036e0103b5d00798a60d1c299f45efdb50d174b94844a686ad0260c759b4c5ca6401f2e9094ba9d3a2bc3074648160f282c30068a11b057ea7ce7e69e863a68815ee0aaa80ae54d2614147de1b9c7caf9fa229ccd59a69e23a7b5f32942b7bde15740eead7cdf0c25553a42eb14a9aafc9bca76f21373921497c4f54c4990604e68d41d8d1473f4a20ab4ab11660a8a8c551db6dbbd02160af8f624b8c28f8cc07d1f820249fc657338247d490527c5552696524f7e0f2cc824751931ed1e4faca36c356b66877a03f2b0a221e3d1f5089ab7f95e8ae2436ae392d504ae58b96951e1412ce5cabfedecac98e6d829b3870eac5944fdb9d8dc99488cfdd50bebdc7c5190d73b0fcdb39d70ae5b6918f929a3d4acd40ab3e4aead3c14886c40edf828fd7c78092f2cab2603ec256de8a7b72f0cd3592d996248fc0aa2fa18104c972e18aec9e8e0b7caa97de2668dce9a44125bdeb95d301162da7f534ed4526ef1d0fd24500cf2ec6b9ab71dd7cac7c886007d3ac3a4eb4530aa6d00444089f627a4812d0fce7bfa5301c64e0582be56aba4cda164e5b87dc149c634d052f4c02f8f78ce7a751c3089f40e2f870948ecaa4c45bf17802b08ad4cca86cf3cf0f9a0c4ff9b42f9599efdb9aa5353f0bab612a9c83ba446740f7a27e314a609c8427b5506edff860c5c920f41232a5f2f9034f2f363c02a07102d8af0074c7a870464f92696c0fccd2cc357a15e3cbe1192de8b83e4bbae108f0ec07de60272dddba8580337222dda15492a85179d7a188cb5c056245e2f3f7a383bb0edf8485ab26906bf339733f1e41fa0fa3acee4e0ac93663dea8e6c696c15f5f1b6c67315551d103488644e62bf98733d6585af98dee2b94e8c6ff58949c03ea52a129dd73a9efd3442cb2d2df9bc7464af5bc94ea667fb8cc4cb85220dce68a6c2aa72283fe489050f6199f85f3932d3a7ef10c8d09c5d76681efe975e4d6c74d84c3a0d4d3b11ba1e4889bf751568ee7e0ff8736d781eb205abb18d21f14a1eedd491e7186ab912369e0c232cbeb6acd9834b9496e80a43f9e49592a4b43fdffa4200492bc4546829e476e53a8cda0104c3345f49ccbe605fab202ef5b47e8cd8612c4d47a3aca442fb5cd3d0d7f5de069bd7fd0fc5fc2e70538bd2fe5272f1273d6329dd183b137c25e94f34d4fb1b9706c3ab07a582a32542c8c75ab664748d2e14eb9aef3f6a3174998ce544b5b1e8acac0e28bdcfd5e42d20fa2a955d29fbada828f254b23e052a440e5b589da1bea09c50a6c6e5b50e6b1c3f69906995c107d98afbf2918fd23b94a878c6fe7dab7798b34c042a2f53f6378f19fa748cfb5dd827735d35bf9ca3876dce960155ef471e17f365fefc9956890e0505252c11eae70969c11289ec904d95ff9494c7435f082a3aac240ee411d11f82b35c07bc167d7cb01974beeabea5f85c8c220c5a8d8e01abdd39105dd1d7dc42f8e7cd6baa62d68c55004fae404c8d7b3d2405000cc6c938ca9d22b5e68c6296957097b8c17b4cbb87c4efa5f93d6f3b0b85f710d256006f35342c1351fa8fb766dfbcc4e28a471035b3e78f481d860e19fce9214c2821b6c9736f2f627611869005178f99288206c42f30a8b6f1fe7df869c672f330031af6d915bbeb850c6ecca2bc1d7daaf7b12866cf343428e61e23316e9a9a2975082b194552e85634c4f92c6f8d11c30ee23d41d9ce5420a3ed08dbe48814821fac50763c79192132b01e445649ba588091a023dfb8831ab3108f04150367aa0f7789e5eabe8f40c0da670515355c3da7f7722a8c7ac38a2dd9e23102c77bdbc800a83464288ba61fdf66e0193aa8cbceb99f07e45e01fbd36dfd523b9285b2cbc2c54ea36269438c5db1bbe7fe9fab29e0301afbabdecc6aa479bded68d119105aa06c0c9d423a15bb6770bed2037ffde1a6ac9f1f11a7beffdc87fff8efddb0dae46f708b1a906cf418d586d4ab47c05b7ffc68f4cec7e93d316df78e0d504f514d34d163869793a3ecbd997f8c4c39f04713a2ce3f49792f4b7ffd767f88c870d8c97ac52668213b5491ddf405fa66ecb05af2edfbc3a647d61c2aebb291ae29113883221cfb670ccd57d9d61f053dd253a45b43ba20ac63c5186ad9db53116880e63a65becf0d1c893b683fd2e096175e6d5288a68af5f053e31521a6903db90c1f0b5da936952763d3edd2ac733884e389d34453e4e13f8aa83fded74ce3855fff39513c6cbe7944b3c65c0dc1ecc92669f528b3542c05a4fea2e1df00024459b80e7bde7ed55ab9d1000819055e219cfb2f7cf7132b8e999060d4591b9fbd76ef153902e796b8650161a252f68abff1af5ff291844b9a0cbec96e52f3d93558dbf3cd9d92f16cbc07839e80ff2f0bb38ceaaf47a5e957e50ea32d76495ac4feb881e162697e9b49ad67c15117cdec2859d64362940bad9da1a70cab7aedaffe444b83edc7fbf6e4451fe4025a1ec41d668178e0a259291c5e56ab2508e00762ea92ecd341ecdc07d335f78847757899a7f550f22844e88b7720b24fa86b4045cc254a1bc42962c5a5a3ca7e8cd41736bee3075303fa66ad745c4740cb8655a163315a860ea9d775618e0aa381002d1bdccf333a2d982cd3ea86efbe7399c1dabfc0d94dc928c0672fa39f6e712c1c9cc908758335802bfd4d84e94d13e5868c6aeca46f22b2bcbd71f04ee30080564ca05f809769b46c51dcea90c51eed539b83d71f354738da8fc39b11923a091a3f756f55ddf6ae8d2465b8ef411e2347ef129e9e0c0bf3cd1e904d49954c7057e23f5abe2a5ec53e7d44871f44d297ea549d28f42d9afc11e810af5b56c65474934642ec80e043f52429521893f8b62ea2e36d9864827a9dc10aa3f6b0ddaabf792a7d6dfbc270a5da9b0312e05a44050028f94268fd1242bf4d5fe83e42b42de748185291551a2d17636f52647029ce04f746d3d55a07ae442093193d133e051f0503d11a0346933cdd5ae10a39883b4fb647cf1736d25562c63f924fd1cc15bc90fac3da90a7257f83dd4709b4c3836430c5c3e92e4a5502813d09cfaac72e421b926c55abadaa0eeb6b39c6043c40eb353c9413a24a101762bb20cdbba78e7d61583eb17afd0998af2111e6b84f0a676c1954222ffebfead83a88202fd8cc78b1662148f4809e09b4012248cc849e670bfd1e763d6b66ba9dc9af0df8bd6a1626196fd7f743af70493fd0bf045a2ed873c25aaeccfb33312fe4acdd2cc599b1d0f1b4cd3a72c08901c66519233e5378ca2ac10f4e718833a8276d6fdcfc810440f078e08bea07bd8b077d28a81c9cedc7bd23f3f5ef1c529f6794deb4a72221ecd7288af82b3ecab91b26ee0972677f28c686ebbb4acbe96603cdfc9985e6abdc8199551169b56843fb77e307d7d8d35322ccae254ddd336baa75642ec222026385e20cbfd8f9210d330a8d4d96522af23426c6e6a8bb05aadec416b35eb201552c421b3e11e35eb433042c136447e1df9a18a966d0b63d46384b9a97352c5931bfd622b88dac5132e75242bf9257798e3625215c06fbd920fe699bbd85cc1283d7f6a1cee20be31e076105a1e6f2da356974c11324f57329cec55122e2ffbfbb42a6d30de3f6465a65e0dba06bf72a770b81f729fec24496fcf66b86c9e25507d50038f68160dba5fdcb71726804a451489ff7a4c4958dbcab4fa9177c41c19083b42a1573c6470e7d10b33cfffcb8c0d2ee0e714ad1300efc49faf04c2eeae6de722461d275d48211c3db9a12ed2698a644d4288ebbffeaf7bb90e9f5511a23ec1956dba5afdfdae94418a7e278fe00afa743ab83878eb9e81c8bec2cd42004410bd02905caf51fc663a9b36cf66474c95d958cb31e8c3dc69d088e3018e524cb6c0ad6df1fb5af015c9fa7496d5fe002fc08a577536b5eef8dec822076dc056d5877dd52b713349035c4501b72e6a74a0b55fc09ba0da22167feef515b2aebe44567080f084267a600fbf08bf687481053accb73b13162a6e3475286411c80bd9732bb098911400101858a51dd0e3505566a7e66c2dbe886a8361dd1d99ab29c8aa044ebb4cc0c777f72b80055180c5d9db2a9518ca5aa770448beb2e0328fcf4830c08a7e03f8a5052e6c6fac8dff9cf3182551a5b48b87f5bd3fa196d2185498c64cab9f43eb68c25061433a99d6528116db0bdb1dd60d86378b45a80519fa913816a0efbe7f71b1d9af0b0a7f28ce0d9b5c8be2183c3bf0ba01a6fdd4e283ba52e0dbb770fc231bab85df8267dab5aea3dfb8565c013293b2c5d77b687fbe680e06d10ebee5dcb16139f90c6ec6b7a93966f4ffcbe7326890b0866ef73d349b05bd648ab67971e963e1423c903f181b91f291d8bfbce2ac4420276cd721742477f82028348931f3d9b5369f712f10cf99d5bb63183bce1d7b8ecfc9d54e0dae3473c943c8f3f809fc182e24a476f55a401c4d7456aacf585ae88d44bb210fdd9c8ca60bd84c9acef253fe55e8980df132cc8bbccf3d4e3e0d6f29cc9856fed506bda4aec3be23f0317e1c8e5a5a4479b23efe1f59a42056a1da96bc5be11b6572656ac58c5a95bd8a628dd8b1acd401dc2e7760c17b90b8cafc1bdcbff4a4b7da18ebbdffa90079e3fa0fb37cfecfd4b71cf04a1f3c7adb3f6124daf1253d47eafb6b165feb08285380be51a7ed5aad03ff251b09cb38a8fb61905c61af3a08554d051f28f49751e993116dbdd4fa5df9856fb3ed04b00b6fd881c9d711c51843c013eb2d1bac25cdb3910ee188c1851b3f1747c4c73edc395a215a6a609574a384a200fb79195838439360f402c0329720baff6f7bc7f2b22856333deca83d1d22433f0c986d944334e89c349708ceba18e2179f099a0aa338dfbbd07c5d559145cd79897876f8ee79d35d4a5d458d4df3f8b5ab6f65efcb2a890cc5244e2310889a4bc8d5c38ff7ebe78193f9bf80c21b739fe58077658ff85934b5dcb2ab24a6770cdbee13c6308a8d574d9c4523dcfd99e70cb5081060f3dec4fadd8c5fb008dbf34ffca01385c018c27ea44cff36f35b733496cf903151caca33a4b54238d9aaece6c15908de39d3211b130db47a325508944721bd9e967326be79ed42debe689ae59a94554f1597f2f0beace15f49cbd4c029dbf51d95fa99a6169ce589033922f2f899fbb4d8f3540dea747b978dcfa0551f1c8b8c67e7f8ad3417913bbb8c36e9163bf52ec81e6b36fa347453fee370a9c9c032461079af04dce6480aa5493b3c123a02cb3c7a2cec01f9106865b55db1f64650ebe7f5be90f6b4359102538d86595b2f3ca9afc17c4a34912bf18cc9ae0a36c081d08eeb19f7543da221f1e06df5a428e4c12d4c5c8c12b55d8ff37072b052ea121ef2ad00354991c5cace6b935843c2b6d74870ab056d0df2d92ca509aa5ab6625ef8bf98dd3a6dc98a45b33070c9e12fdb2c7634a4cb673cc961e3b625efe28fa055fcf36ac17a15b9c95de6cf06295a7004e9d57bd44e8de3d4ae312814015fa5274cd8671406edc0961bd819f5d507d14531fc44d7ec2c9e3fe2da0bf58ec350f40fb170ab9f7c8e8d86cf9b4f7f9f5974468f7481205cc890049199c798c3a1e7b1b137ba2365a0b430bd39af1ead5285bf23548f7182513eaa861a092f63ab8882f8d64e77f73366d69f9a8c2e1091c55b49a0447316405807e3d982a53eaea9b7c6ac69a6eb819ccbc23b3460068d929c773e53676d6e17c6e9fb98c0e3a68f0c86b8844ee82267b7765fcd05773cfd3c38610dd538e9da84ce9b9824676dece33d98ebfe9decf51f2e3bf234f2aba61c9ba0e65347d35ae69be27443f06a500b60ca4d08f07bd1efee9646a5386668ce3778cc24f3e949ee7239cda1641647c2d087da861803575d1a1d789e108c51b4bce77b2780a9405d73d0e35f038138ba50977932f2dca2e81826b90d772f9e0342e0ab02c79888176cb51cd2d2df258ea8b339ae8ebc5ef5918826881ec376cea037bf30e05df34ac800c4e62da3255f3ec3d5c2d179d35b49a6c7884c6dbd8ac60d738fd80aa090a6c5e1f52fabfa0a8e32f96331905fa9095e066bf78fc684b70d097d013e867491f53d218f8f063864b91c8718466881e4a85147d15a210eec382c8616973f15df884d4a27d1202ad77b85b47bba79a1778d8e9090f6713a283be4899e27157fe93f2e72a5d4f9a5fe0c1953a6a794695a5d39bc46534e472fe489b402797e382943a073f943115cf72e01c2995e58055414cd3777a02517feee59639c5929ef7078fbdb1acfcae14a519c87d13cd1f18ae9676d6a8c7364efb65755ee5c6fc0ad1f4dce470337e59f90d5e1bade573ca01455fd43f1ea8ef9f766d1b828e2d22ec0a2c54e2094aa0b3739304a09d493adfcbf410d87c13fea98e4054185c016a12e599e93fe2d680efaf639d625369c8e4217026218604253d70c591d193c43a69f13419088b6a34547102b77408e4efa91e3f0642888f8002a7da60334d56fcf67baa0fe9109102d3c6ae27a84beeb4e8ca8822898e3c0b00e283099dd1f019d1c29a769d53058b6c57108fa7112529dc2b3cf6b20e41810286aa835745d0c2783d8829aced41e18169cd4b3b5896d09154981337c7c7b8eb094e3afb3bce36f0c7b73c297e002d475e2b23acc06daaadbb4b168a22c187b245108257de25b4bd2f5bf00385e0778262dde2a113a308573733c7248030032cf7d45582364530f02945d0f4a129093722318891767755da58e05c55fbd2810b7bb6810de256b8ab126ef5539f8c7c767fa1f1b5f748b1ccc81a567b0d02857cd4df84c1def568e942b1538f9e99c2c989d42179f86cade193a9fdff6e18ab7c6f88009e0a1581adc906cfa867ac64cb641dd86ec0b9c1e1198c3d8fc7681fdc6fc4f18dcfaf430d5e866aaf1770a1234473c9ecb0a65910f6b09465c9b87986df2fda7f5b26fff71b43b888d0171ec3b7f8bc9d4f929ff9a38d9d5732940cca944bd67f0441339daa455ad3858b532490aa2cf4adaba85ae71fe853c649e55d3e444438af3df641df69b85ab89b0445b4cf865d9188eefcc09c9e873bc7884b3ec432b2139d9cfdb72d75fdd9da524c204f42707e3bfdfaeef435d4211b59d53c1678675dd08a7fc027a7e09fdad7cf095a1481da17da797fa1f9501b566d327f7ac75ec4a8ca1e3c77686dcfa5eee5a4714419a5f7335d83b544f6d4513448c58dce85b254d15ef5030fb8cea28c3e9e7beb93dd96a5a025d51ea1b0619d1b54690bedf6b1a6f00bffd62283661f287e02364099ce848f51dfa1d6450a759b8ce8bc1d2b1e5e1607da59a940e4e85e7e2239e043ea1985737900827c2a448988d109090412af9564ac4532fe97b56301122c65ccb1244894bcd308408e9ca296e5fac06cc7b231dd8b260a6ef0d49f0e51fcaa5eb440b4796a06758782c304c3b07917e4c9f9f9c24e5947bb3271a19d5f7d8a9010627878192ce8b0cadc4425672e7b93465dfe3f3100603c4402cd2151d9117d4f693ec5fa65e1e3aa3612ca442e9557dcd96f9aa14244281adc7c464feede2f32b4739a1305a6a84763786f9f7f0be19daa7d6d8c85c7404593ef3e234f913bb36d516f76242a6e42415b2c288de67bcd5451aac00d1cd8381e9b893760f3d0a2171eb7d82c2506d57c79ae7574c60e6b2174de891426e88791a99fc34572d6f3135c4d43b524162e7467f35949c611e090c3b59674c13150fdbe07ad5a665073efd33ee6e8adf9c9cfcd81d437fbe37dde5a591b98d6625b4aa5a0f5cc7f4da3146e94cccce19170943e7771c90208de08d722496c7fb4f02cdacd56357c5271533bc8eb6a200abab0858ca157cf4bd14824021d003b089662236308d9beb243dc483f44f3f221034772ffbe23955835e99dec755420b2b41e725558238d67fb349f5c5dc45f7ab70146f007438dd0bdf23110c08c117b8ea030c61793d040452a06636f41a8c0bb2b8e778bd4d61df9aa8b22ecc134770c74a4232ceb60ef2a4cd00c0dce434b55b08ab12d87889efdad046c2b076e08fcdeef3dc43fd06b036adea322fe47927ba345b22bac1bf326fba96fe57795b00f026609839fd7a95dbd09a1100dcaffd2ba397f423ab27300aa68be4d2512b4191a40ffac10a3a08c4e050629a997fa5c48ba86b49237cf59a846d5bf48e5805654ebbfebb4f6716f96fe8bd1d2840911b3e40a7cb0ac3c70755180fa64cc155096e1797c37578bb250b8a77172f8d43b4e3b7e61769bbc1cfab7ed4e50ba1318534bbab4f921780829b19457ab6a9be48258b09bb61be6f0fe8498560a15e8a77734505cd25c2367d36274ad132baf3e927f20ffdfdaf52fb126761afcc15bcc1ed220c756f436b42e43cfcce6f93344538f8dfa68fb14f95b8b56589adf7709d43b8efb7325a2647528483d97d6de13f7ffd12c683bc730da11f3c45e0ee718cc0021846d62f2a4b2e904d84b94e0b697a57984069b10e309d580f1d0df769334b351cede13a53a8beb74d226dcf10c433450f197b49185c45d06adb4d8aa687f27cc9f3aab7acef5aa757c1068c54b4875302d634123bf3c84f3c8c70d113706b215a3ad364ba0cdb233276e33473a572d3c9c57eb0c6d5b02e081c681237dcf7e984f122b585e8374633f1647aca0be3334b21e9509af99cca76f6472c08039917ac3f611373660587e231537c8f69b8d0f835f9d97cc3ae4d12dfaa43415fcabd4bd0c37f875e1fcae12248f878a1d46b873f3b6dceaf03b58d0f8ef614eb2a6a405a1bb0b040ecae05e179839427ccb2ebabf7b343ce063fd7bdb106910f91507d26f6bfd5fc491137cc99e81d69a21fea146d0afb2e56116b7684b3a57151b341d5400b238682c35be017ad97ef7d1e5422aee643c04cf36180a8ff53d45d18e432914d26545d285e9a0e437425aa4f078a03bfca66cbbab05612acfefe1387051a3ec586e93f0a1be56bcc4d09f4dd7e6c1ebebc16533151c8ab7ee09e8f3fd51b9921f753560a88542633ccf7bef4bccaa01602629464b460d8af1b42c905496569d4bcfd824ce7b0e7fff14237009b2ec9068f543106277b8f9335aa4893dcb736c84fb64551e642defb51021ae0fc4ad3a5a01be533c7c4f92ece693d187015acc4a884b3baba2813475314205b939f0bac3dbb282d5787d3528608370dc7dac055632e1ead9ba52db157f454a5f4de227085d445f2cc2697e1baf4df18f90a777563bb034437e879be5f06b64fa25102e3866e6a9f98a100d03808f398d34c75c0c631bd5b4ae32cad6f5191f4391b83d2bf848c97d73a82b28fd9b0748a8a20c2abffc8bf68f5d1ab9571b9755bb905b0fc85d7d52d0d929dcda06e5a010ec25087aecaabfab33603308e9842935ef1c77a663edac5a01d4e857f4f2e504dc3223fe48f664a048a3dc01fde4ba0fb364a7e863404b1d6eafe2f93ab9a613edc8c16748bc643edd02f9342cc474389d11fd51a1df274f51772f6315d964afdd878ce2221e9928bc18583b2a47922f1d239ea47579f1f20e7aeacb63d58e177f6bc08811054a341af01f77569f3c40199f6ab8dc2a6c46f44508967e107f8797813207f0d7102a3558f1cee6b928cd37c756b6091af74593b3f3564abbf9349b3bcc6e9592214e4a510611d61fda664f135f63afc41d73316b13e15b2e336558e28f84faebea39735edda9919bdf9d3fdfdd3f51196374715c7040bb78324b467c4619b460ebe3dd392d481d2a92d4ebfc4f3d43aa86500d8b17bf811ce55706ea21bf7671d6c3a0a3d69a30e6945683b439c3ff7e10e8f04fbdf21e0f419e22c1796a74dbb8839bb4b290d893619d7f412e774c1658b853a817e9eba9f7fd9f22e1694ade5987b9d9c9e44263f10b33146b67a22e3de41cb4767aeba191591434b69f07982a0d0bab8f241e4d47d0e556f14216e171a10ed35868de71a025621f0adb9d1bd925baeb4478b3eb16869f074634ae45bcefffe8c4b0b801e7c68a38c48422cb6876ff7adf97f6117ba499dd3ea7155ace03f1020e6baf50ffe71eb5f627dfaedfa5d76186f9d0db9a58544e1232fb90b54248d3101930c6a1160ddc4ab05c385a687fba73d81668a097941a0e100fd94d077afa2f46e3277cf835896893d33c79d0d6f84ec755065184c98aae167102bd2073979d0c4e7b22a16c7508c16604fa3c72298442d3460752105fa3818a3b450b2f607847dd1e1045b3e17cf2b0f4001a188fad201f522fa5da404388e68123cf5e16b5c7fc972042dfe143fa5ef98d256cd10416fa94e377436896610c99fae85c5e9a46565a0aa2bfa6ddb4a0fe4c66258bd452d849024d6e693e31ec9dc7b18e2d0ed2dfe9adc457862f898f830b4d16aca177a2cd028c90f8f2f906866164c614ad4a5866d0e9c615586ca6c85273d1d2ac94b2940b8c0dc2f901203f4dc3858c231032ef525521c5d5d3f799eca4eff8813111e1d46cc74cee89a86a79745f784a2ab3c37be9139cde2f3a38f2fbca84ddf79a54dabb9dcb6f5129757a5403af6e83d35a0af6ff216651c840d46b466bd244a8220929cceecbdd93acde29c77f6bfb94223121a2ce8159e65998ad70e3c14bfa62b81f3a3da3cb64e6997d8e7b761147c15b08292b94cbf0cc536f6332e9b15070d5894d7a00ad86658f3b627e435a98e094d5bd43747f0e20d1f6eb0d88ce2a101c5265816b07aeed27afc8740b7857d9ccc22e096f4cede7bdafb567fbf07e1985f78524877019adcdb6950b69a6b128d58e5b8c2676c43c6e647a9aea523a3c949e893d6f4005afda91dff8d0d3636ad1c4a0be4a2e5a018bdba3b3eb774a0343ded1c1f325c7d6146f8fad34ae46d52e893c12e83a99f99f31fa23aa7b2d80115c125495f4ab27fb6a97f94dc648a5d38979c63c74d81ecf1e585fe9a7c7c61748b1f785d9412056cd07208c67c1da323213fef5ecdc78ca7fecca9006f1ba5b527e1e966a4c94df8b013b2bfe4afdeef4c5d3a9be7caf0c4f9bef83847ea85720928a28744c03986baace98bfc92b434e8b0e48502e694b61b63cb49666005c763257087498b8be2fde54c7eb34ff7484595b6b81aec2dd89b56f38064bdea248c24f35346c323145fb11cae698e9a6985b9d16ef30b3d84f1f1108c2e6f30853c1cd9f7b8c6766c3bbff2018c20c0861aa544ebec45387fb0954028455f79ee85cbb40397d4c258c06646afd3ab90426f9079cfa45a90120024d9cb55bf8bf364df7a3cb6a37a5f0ca006fc3e0323e955cbf3c5c3a8f5d1ba3a3d7272b6a3fb9c84cd2dbf24b5ad7fe0b3ece81f68e9ad4db948060023c43de868f09cb046e77927d927fad054c0411ec8e3c5f17df1f04549b942e1aa14c8b8821c0f0a445778449b44ade3a74debf2746243411029ccc7d9931fe3d4a4607635c6c51da8b5dbe6eff9a3007614d66db5c4390b03a76e583a43458c847f459b3a4f69b5cd0c02dca9340b892d317a4bb34372eba2338fc9cf39a11d2ddca6e80105ce34bd929a2061f1bc010a9d4c199736398fea491a3208927131361c24e7dfe5c759719835513ebc80c8eaacc3e3045d1eeaf44010c0193399d49025032863c6ed1d65a46dfe52c822ba14ebe002dc8e4b4f93896e2c302f619b7043f46dfbb0666543a9fc389a33df5f7fcb9e9be099e9bfc85c98d8d794809c82b7d0def520797d0a8091c9ee8a09e9e1b5cfe0485feb7970e5d644e0fb575c10f991174ce02e36586e9d7ced1fa5b334bafdb248f7418d6c509f122d6b9dc82fb7791867b56c726e225a3825a8d2673a0d76278dd9741cc05525e0dc8a0d79fea4d6b153e4cf73821084250637cff4f6aea9d3a93502739fe82f1aab29ca5a27148dcd649d9096228db6d15cdaf30d57b366e81d4641ad6eb3039fcd4901da597ebc76ee9a9c7625ecd78c994caace3160b4ac2b10e8f1ce6461c9e4b67fe469bf5823c474dcce06c466e1367dc87608113d4679ed7b38833515db6288011762d43767698100c9c11e9e1fef90dbeb107dcc2748ab6aa7951bbde96756fbc6e9db35ea63cc4987c63a25297664e2dded7923641d38704eb5f0d07eef6883f8d24b66b5d37a7dc074d8a2635e5024b9c370dbc0d1ac098eab1900a406e7df0051eb1c54ef2ce672e480dc7b1066ffe99265965f69bf0325d7323b84d134fd4d21220c0bb42274a0e55f0da967b9b2bcc25d0147ecfc7ca084a9ab209c83661d5f3ae8ddb61630cb1db6ef2a7336fa8a145ce54ba89440cc6fddae8b8417dfa3581be1a67cc950f93f03b5d2dfad3f24298d6118cb05f0d24357979ed69eaaf0fd67dd62087a95311865034cdf0adcb140e6d6d80f3f137d905ae5c46c2783f12ec6bba004576bf37b4ab87557acc60b78c485f51f25eae261ced8cd926844e88e310487c5c537338bbc4df5e97e37f411bc2fc9811784ede77482908d04351209a27e65e5c97f86227daa496f959caea3d53f859b973894c065665dc16b1f02cec5b88140104dea2e42e9d2ca098bbab5a1a21a7ba0fac5f3ce109089e93f748081528df050bc716d4a28ef81e752583e3fa2593879f1f25063bd13e279e0ade0cbc120f0e24436a000db8f2dd9b0471d6109edf1b0ea9664ad09b28fa0d05b6f2511f7eaabeae8df5facd3292e2bb7a04da5a0c6bcd4d103769905cced86002ace6320cc1b7ece3e7bccc368332402eebef83f7f43b55f562e8c409cf3175a1ade11f36a6a958fb138706b4e201784802275ece5bf44e1cffc3491b5164b60426a1295e7295ae05cc8717018aead6a0a20c8a571cefd4177120b14adfc5a2f5414760f6b08c7c2c293083646a6faaa0ad6b97656c41c25c21bdadb0dcb27a8ef488a9d69dff6d3c033715dd3bf7f4c00de3ebdb62f77de3b3fc7fce54a64a5ebafec2b41a8483773b672a7253be6c02e4273639ff09db56c3cf13b4e72243422541caa72bcab97e6c05bea0ac031a966ead482c46223646479fd8a3f8d6fa979c5677922e80ebe97c8905e434c7f5f51c192b826bc1910a1a195d08dbbf9215a2a0f49d67773112d431da78287492586cfa15326c5ddbae08fbb1984fd090418585c8bfceeacfadb7622d9d96fbbba3647fa3589908e2f2fdf4794d67c672b7f8fedde5ab0069f8b5556295961200d4694bbd7ed700ed2913f7183b59b45a844b29817df8d8c921e9aec3e4e29eff4ff4805a04a58907c7bc2c05a1cfd972fc16524d0132117ef6a42e02c13a599b974f2176f86fea64dbf1411edda20bd41b0af91a9f48512ab9d4df655e4210c0dcd7a9e456daffc2a5a0689fb5fc6ca6f424fd0f76b95dc219a9f95556ba1bb807c6acd186807e0b61fdcc92d882e09203098c941b6da36836e24ee827114e840522cc44bcc385826ce015a302b78b107e07c09053276be941ef4aab99b4545915dd49e026f33ce240630c25f825abe48f8d98f08526805bddcd95aa6e9066cee51fc4fe891feb95bbcecc3ea267dc8642e16115e086510d3176883a1c1d6d9d93cfb884a03b367fa4d8aa4d08f5a1a7ebeaa374c43a730ca5324e730784a14f6b41e1aaa88fce2f2f14a036b7f8956ed8f1680256d45cb441e2e4f0dcebd985e1754a3fa78b29b867d64a74b7c4933228e85045af218f6b52f0f0092dbc20ae75db4b884c76d8d91324b09a1496ac6109687328841463876d58f65ad9706cf0a9bf97749a5ee4eadb1cc7193857cbf2a29933074c336b4347659d92d31db866428af870c3346a88efe23bfe3a554aa6f57cfe3a236d2a71458343db0af20bcd7aac9da300eb449bd517f5f1a5d01520a4cf18da4f077232d3882fe157a4596f457f3e7490a463362b4dd170fa526acd0dd4c8de8b9a48fdd809a28b105e762f23f1c4374138a6cac44dc1126370650d19ce5dfa24489a20e165931de4957fd6e28bfbb62369b7fea11967dcf1212e3e97d664745a345220f2848dab79186be231082e024368d9af308ea9dee2cefb4de668cb181511b3c1490e61a61b8c6d9a63f0f29742323fa1dbf8d03cbbec2b95d1c77d8495fa3da3f2f1fb65819e74c14ce9d8e32bc20c88af9e13e796cbe9b7b4b33526f613729272cfc78822fd3b2cdafbcef77af0b08d1862f0203cbc6b5e62abce3956826c9d72385417f319d410464f98b8c07d86864cea7e35f86f1dced9caa1d4a8e80e983778a79ade77336c6d4ebd95895a199adc0f6cd0ca608c64223c55449d686ae5389cebcb940a7fc7139e4a20e1ea487885e04a8232f5ec9e72b75f8eafc96c47c7e3ab8ed09ad36f8b8a29b159c65828228589493edcb01bd718b8d5884d356f8568aff9532158c8680a72aff0921a6c107d8dbb92a98b1ac735066597f6f440a2f30c9ac7a7a9216c28f12f0c57834866806a181797138b880042e1bd8ee86d9fe55b0ea368aa5b88228062343dfeee57b503f175d40f2b345b9569e6747e481420b9e926e74165e8e00c1f5a411d429005edbb67ea5dbc05ce6f40902c069a48853e86c3a3f688240e48cf1c65c04337490c4ef703039aba42c3e9d2b3ae91ca29850769d4748aa1417155dcf21103f83977ea636697e791c773973d43b108ba4fe812203d4e1adabb106d2382fa894f5759ab1b78b30bf82c5589a8da610678c5dfa1eebf28fd26b8620cdae5261978ffa51c204079a7a77e21142ac40c38168a0ee34764039bd558c3bb11a7cc7cf0dddcacd2b39d6f200248f7f5a3b26713928aa51b921418ef3b54e174342201c0fae7b2f45d4894e6663f3370e01a53db0692648e6fd96cb7de23ea2a71a007c8e8482568c756b5cc4ed6f14f65e8839454424786c260c5badd0c099d023a33796fe3fa5fd173066f9f8811132f9d93e53dca0873a61016ccfbce19a9d1726148db1cc78b3d0975f3127c82842bc230ad58564e1984ef62884528e47f05745abde0e2fd1bbf85cd3ccdc15f5a1cfbe5353901b040b2650f9db040d8236ae271e7c032de47391c12f8faa97619fb9c8db5f261567fb73446b06046d8575363cc94ec7a6d7414033491daf69fa6b28c25b1dea74c941fd37f85d3ad6fea4d6882332a0688b6805a01d877fd16d63b777d53eea56b6111d93f604a96507ecff3d363274d4d01fa851d74d39e7382be15fbcb71e3f941f87d2ee3016579d5afdc5679e37a66e48f5e96ac41db961e150fce97acdeeecc14063af55ab86feabe37d03ad5bc511c6d5c94304405360d9c7b67cbd6f462ed7feef51d880c81410a1db12686068131f1bece753925282927908ec1c4d8d6247c08182007cbaa65aca9996965839bf98bfd57266990a62d7224164d763e2decfee7f7a1adf01056822ccd8bd04e4f86a073c8fe51b14c831acf8e3f935de9e4f3653130fcef706220b35817d216deb7b6e30ed5f6fd903192516d20c6dae2ccb75ced650e9f94e07bb379ccf83b98379b0c6b2835c299e7a25912a2c5bc00077b4abc87192539f33260f72e1b49d6f6849e03039f103c467882798e6c887292403670d6b229695e67ea54841b027f81884f775ec525daa96e7b9c48d03c131fe2c36df16c5549237c7233522fcbfda8979320fbf39dd685c220039e74d117e49c5901a421bbdd78aad115e986778890b49abecb9e6a5e0045844bd47c410cb7b636f147c139034f36b0af49d65057a161e14595eef234b22f26096d9f59ecf1cccaa5466d3490ba2475ac7d110b2b14eb55bdf254ac28e3f22147b1c32741fe52dae039ee0c6e7918bcedcab4df3f58d0af37b200fc70a7d2676f69374947807a51bf3c73a88d614b741bd4e221b569fc427181b487105fefce630b52ee24c5983e7fe20f290e3fec78c4daae8487ac36ee448ed2c20db6529e33bdb99c024200b4c0db7c23e02e17e31bf0874db21426a31405edfb669eac4f0ba718c3cb3246f62a15da4d56f21ddfcab91bde1f2420ecd135b0b540eda08bd03933cd226c56c16cd7287414c295ca90f9b28cd26c4465c1e3fc07ed20aa9ab1872d86c2868d317a38ac7cd14fbcc063c3a500918c8a70e65efd05f789843a6d893e3f414036c8afd17d6010cd3fd1da851dfcbf61a36f32780b0208dd6fd12b929da388154225071cf6e3c3785ccbf9b188a90b77e29d5a7a5d812a2562203921e9ba6631a8bf88a10e007dbb42ea57154b80758b8aa6ab1cf43fd588338221346f515aa04cefedd785b56546e83d834c94c9fd884e00355c7b83b8bd316e68c9f93ecf2b911fb566c5dfec770b586b1fbe5a004fabf3ce3a78e1df84d0526cb827a11a0b8cb50acb981b1ed70e0fae189940ee135e8a546f6a32f9ca070106d7c7da9f3e08949be73770348bdeb14572f6ac28b55906e3e0a44b69c227d2b3a3f78590843b210324d1954558c8b46449e768327844a2eda6ff4d945863627658295eaaa0c9aaf524c2f8f2cccf868f18858556ef0d2a1a06108c7d08c13b8d3ad84739f65f13be91d42c77ee8bb88b6e7af41805f6a0d38291bced757b8e783b699dd5936394fe9022b6bf47ae908b0c096752651f193af57f7be51a40562f17828cf30b590525b95808f8704c2c17f7f76eaa32c9735aca74c5e8fb914535e04d18ca021bebf326710b1fc2f9eaf3df4a83989167ac3ce92ed47d0bea481e6e06ee663a006e3648c3007e3c955eeca0e95fca0651512327085f9b13c67b35ef67991951bd27f78ad31be557f7ab81f6b452eebed777bc766c8b2ed3af89b24121eda74792f2b52ebbd2d7f7a6012cbdc321061a852b16aa9ce169aa2c29efd2d1c4e8069faee9e066103e5cbaf9d9e62fb471a524933b865063cec9ac68cc7400b33a42cca8c3e89b922fe2551c690c7304b84aa9473e3964f93bddcaf45a9929136569afde96e05a542c019b4b297cf79fd51730b9efa7840578afdbbe66f42f95da3c141d740c4f8ca147e1c02a25db008852d11780741cc68da76d81f016e055613cc09084c7cfbee63a9cb21a74104bb881aa66774b6ec45baade25256b23e41d34529b37c4a9eb6bf5cecc0977fdd500caa50486bf668602ac663d760dd39023706143cc6b6fbdcca5df4a5d852b6db205a84ef9c67ba7450b7c7ca7c75b9137c6e76ffacff3164a6752e91ae91a2c0a0d23c608afaebd91e70e40e713403d7271e7b2528f1c6bf5fab492dae64d48f12665e0b1e8195dc5a83a1d9916891fe70d3fcb9d0a16f3b7ca33f33506600ca2e31fb4fab4432319cd36e685a78dee73eb0cebc41f0bb9bb99106a9d360d1f734657104131f553dd9552a5ca8ab69ebcb65bcab48bf1a7f1665f4f2430f29c9c49bc44ac9ecbd098f2637293384aa4310f1a68b1451e25b28402549bd6a772dc50ec34b3983a3f7cc942a670b57c2d34b904bf769952beb91fb9d5a938e8b9f7ce4f5017d1e11ece73be53cec07bad00bd2ece7878a5463754bae5aef6736587a014434ac13dc76242aa926f77b1164b5096c846c43122b207cf1c2146288a829a69b6effcf500d0039c3ead75a04096dc3328bf63d40fb98d3013442492c7791b643a5b042fcecc2d08cbf0c69a1add347ea2a4be03e5661b19a67703942739b2e54e32644e5bac935dca84bbfe151a67d0e331bcb58244ed87630fe0e003c6b207aa06cc88bb8b456c91b820d9a4d226025a2de8a4b555de755a01e9fcd759375f667bd93bef14268124fbfca7dfa777f8c0965b1d0c7e1f931abadbf2b3dbf0336036b29111c00423b05bdd54efffbb53757c46d0ce76bfaaea075b9ae40a1dd6c2f277cbb1f6893caab09015a6d1a454548aa30bba149a6a2011c39dcb317fecfd78e473c173def95ca3e676923da3137deab9412404792c12538685a06304843afc1e68a8aff072d46139c5a4581aeefbf95ace5b4fd7d6d542618cb912f641c6a4c0be60de3c162e9346b340df21d1fa50a831df3778bd2e8fd2680b68b02bf7967067f1a9ef051adcbebe12a1881232afcf05bd5b4e0554e9c6bc8d9a206d8da55bea64a55440b92274d1b06900ee4f543d3dfa4c659fe49ec1ba95a1fc3c97b45d87b32e8eb2c3ccf4a557aef0de1df977c118e7e304b779949af7b840af0a9911eb01ebf822d507c897125ce7df005bba609ca55fa755ae94735c13da94d9a741fd3e22a8b927aaeea836e7eeacb30cb2e82ab94ff7b3c01b4c624cb41ec2dd450cf70b64cc44d8e444f01549f6b00a335d81624cce288deb9322463b16a2400843e97c069073b1ed16f5c1cda7aaafc7cc4bcfbf50f6416a406635a15eba18e19583106029a84c64dc8974543283d9fdef1546c7e8c9dfe2db7f3b75c1d20a8a695d8bb9863370ab45a5f3d42f6ecfeb4f5f75aa36c4f9e29f0cdc422c84b56e1a500c2d20f634d5a9f29e8f279df17115a221dc15dd2b44a859ab0586b2f76f79988b3813c71a95491969b5d9ef706f3c82f76026c6f8551df92b012df81203fcd629c51882635bd88ae64f1c9717d66cec57c035a708a71a4b53758640612b47276ae7dc8046cc126a7f280b741ca6e9ae09d1df7921ba133af37f37d3f8696e70059f96c8630a59c2c8f18daf4966ed70ce26792a8ad9d2c8a1bebe26528d1d138d2c08cad1f7e00890ee88c43c1ab55b7dbab59436c6d13811f4fc81aed463f30176a66962094fa1e4d221a9bc354d8ca6858c45e54827b9d35ee2d79d5f918e895ea1fc34fd78960a25462e437518086fb7117b4f2a810ee7f48fae40e51b2233891c8d565446b797e1b9be1b14395df14007eb38c50c5b539d587948ff34c4c933967486c812aaaf60c2101409a1c044d0df7b26cacdc1dbf1c469f1dee91db524754424e676dfe66e60bc0d02a783fc1ac7352c0bbd359294eadc276ba7141e9160d584afaa8de7585998927f45064947ea46b76f47968431199a0965bc9746954a255e939dc8618b704e51b63ff3624090255a571b4f766c5cda8cfc5de1abc8110e873e49a93914fe8dd71718e20918125722278738d8da89805108e634e0ab0384fa04c41a9dd3280a2c331b7cd9b3d814a5210e7a593c6413ffaf1565289107bd7657b49b32c4dcee70fd8e1bc160eed8f22c3ce45733014f071166296412b638c954aa98c65dd334dc40884a99b6491c44b4f9c1d3692f15d9048786e5b3917c424c8c82841ffe9edab98b9932efb472653b3aba0694df9c61489d13191e51371b67eb678c6cb4e6f0693d9aaff5615e8e92af63456c5694b8405093434824b421b5741d6e644614a97bcf98b79fbd076ca67c96b71113595ce08e7b265b720ab1d2be2667890c39b37755b568197f5ff0b5fd90b6d99e5bfcd9be59532102d2d7390320c76007a0c6a01fc6e05d18dc784ef26207b11ffe51f5ccecc1229068dad5a457dd940a368907387a296542e78070b61b9fd7ae9be68c42cc1c968bc6f154f41de61d7bebd55422ec2ab826e418338d908dad2ff5847674e10e8eecde5f97354eab449a06894ae14499c352a0f09482d52697233d12ceaefa50cc24feccd0b9f02afed68f0fe384a3c373832818df9691c006ac128e819e9c6cf8f12871d6c69f43344f60eda9d31b4d32ff0adc043d812c76c3bfc249f9793f708903817a43edd731d924066187c1df15dd8b8f82fd4ab0f3f7ebf948becb5ba13fb48718858a97473bbc4bfe7686b689a461089e61a253fa57e38c457b41bdd02b545d6f54e8370bbe770c6860631fc5d5cd9053b117b5ff782d34c92f39a855d7a88e990aed70ff82029b41bbe0e2513d42c603bc73616b0847d1484213e2557768d92823b083840fa37631af832b6f71c8fdc19019f841264f9a913fe5eca5ff1500ce7a634141368527181963fe15255ad7311485ff5ff1a00fd9d821e27009b0efb4a0f169189431ce70bc5cf832391c83574121c78d89859d13de2a58dcea1af48adc65b34899e83d7424a78fea16b4f9a743b44ec135da7bc4bdd8c83b3dda50553a6fcca96cdc33e83b20f64e5fa263d4826eaea95c1a6e4dc78b71358d65052b3fe737eb64cd578bc957645c0275486814189cfa817a0ec885663c4439ccad58a87d0af24cd5328cf28d34e2c1e43219cd66a6ba8eb9c4f4bddf96df481c1209254d2995979342a4f33261c6025de92578a07a162c0f99d280337031d6a685eea4ffef13820cd8467f76e443c60bb4ede31536045a49e566338772444f10450d482dc16d464e2dcd6fe32265cc1e2f24a7259a4640b8fabc1d6482245708517418cf57f06dc73eb6a9b6c0587cdc19d285b79a3e8074d239c0698ebcafae4737b6bd34353569137ecdda5bbed93609809a9e409805704c35ea92ca1c538cfcff9761d5afe750bfb9b0fe9e3160c0e5d0d44e87373a881134619c9e8cb03795ae9fbecef1fa0d523535a01bb525658733da8a25f19fbd36cccf64697310a617d468a25248f60af24a3887a3587470f1c3de44457449a6c2ff7792fee6744f95c1abc0fe0d11b762a6de8910370125f7007b0bb9fa22529cfb965bc897f3ef803e4ee2fe2fb1642487557dd5542adc7b6cce29878e4e1dca457c591b8ed76fd53a377b807828f1dbd4de3c7cf287c678a14ba14fc3c4cecc80ba3d3088b49fa137001710ef4f24165be60ffa8033cb7d7482307717cdf1c8aef8feff53974349316fdcf1062971848e417e4377b8689e6ef1d08fb7b5b8cb305e3654fab57fbfe3a4c18514e4cddfe4431af4d752b364d5d27ac33b172b0b70453493134d666e3a0f6c99dff58bdd10e310c953c0d8fa06155a33d95d37f037abaf08ac06d3b9bc4df9fef3c2522472541586b3eb9797a1ed79114cf2e8c61bb75f1775d1936cdbcc6c9ed86bb297f626f9adee60d68e8f620abc36ae4b89d0edb49511e834ab3f193e9dfc517826711a617784583bca4ecf29c84a3175bf89753be7976a35d3804fc083a73e87b805b47418ff73aa21ce5a7edde8cf8c19befe67457510e3fa378c939bd749a06e1096725fb7892dfc6401502fcf0b4c414a7410ce8be0b3eb73c92637dec59474e8476ff3a45a2d0b4ad7939f9ecc51d2e4032ffda9d6eecf358390d93ca0169683f10249327d9a4f317285f4144f0c235cc3a352a83cee28e7b524dbe87e8f4bb7cf8a8d4f810fd7dd1cf890fc87b416834ad6f150d5d3107e0ee1271e1973076b7642b0484acb635bae58d335c70db4c9fd3cee341a9fd2f9ececd4b42d7ff411fb231aa3f9f05210981e67ed8c0c5f7509cc8ea323a080a3ed2e442ce8e3bf580aece72002a9726d2bf7bc5e0fc1bc89b93c4e7401ce3e800bb0cbc44d130a697177ea678cfaa959b3b3ceed75ef249c36a3a97f72b9dd111fe56e102378661a2fd3699276ef408be83d69adbd35b63a5cd75127c4a31a9e4900be7abd924f58e4a9b3ffa13a4de78d0d23164dc6f3484b72beb12136f1e70099a9d40064767bec24f2ee6cf840e5c4e46e0777751c9d8483d092dfbf600bfa59a53fd75bb9fd487a1abeba0ba8aaa886405f8981a7d6f325cfe1c5daebe3d403c6422e3ebd0e05673011de53911110ede154fdfcf6df1ec20ba44526e6447ca508d19e5eaca95590aaf2749f4cf3df912daca89b677808b41ec7bd7e6c158f11ad9d7f82f6306163f06035aa10bf63727f12bc59a1477b152b1da5afbb43c27da1ed89d33d8f9d96623be2a0f3ea39d54c04bdd57948c55ec245831991f9697370ef402311e52b84e16ab7861b8b8131d946273c147b28269a0f72bda5a70bd2d96c39b29ac43787c250e37a06c462818c08911b254dcd175a9ba27e0c6b4ebd09b4431dee6ed9936a90734c4548812e1ac93cf054414229e1ce2c9d00bf5b785d718f86dbd71935b7822cfa3277af8e58a61e6eb20c37a1cdb17cc6a4b995022aa7c93ee3fece6087eabfc8379369d999d56379f7c620b6a901aa6c82ca15fc0f63848be78a2610cf585e1801e623d0e07faf0fd4ab95e2121e5269eba5e0461c9c66fdf844e11eb4f0d3e4a383e4fdeddda763cba439fe759bfdc28c57a60f8242957e6a331a6df24656addf105174640f3ee094233077984709548b1d65a3af041f8ad4084efbc3cf531da4d75cb970a86b100954fcb22bb3a519f8cc6aae3a8357f8ab0cbc0821512372e2f009c9a2b40398e888325b470fac58939075b8fe573e58bbd29295a0dca8914665c5d7dfe3f8c56c58cb1423fa2aa37543b2bb46a152a28a7de377d6c8ff898d372f6616d7cacb3ba738aec1d58d338c04157f2b7077f00ec3c9ffd3a63b3c14e9395b74c1ab0b1b1ab5aa9bdf77f800b106c68320ad2ebbebf60a679189d6cdec9dc9010820f804851970d313956233fe63014e42ebaae832fe566784afe46dfc552716e47482ace165db89f1d43762929c8a0a0e371ba2f2f2a1814d5cd45f7c5df76accbae9739cf7227cf29f9af261bebd80a2a3f84df16209a856ff90c72829a2df41a9325f1db06ef45b4a94f08c245cdd2e6d1102377a1478d624f6855941dbe4006ece21e65d139034395a112fdec0da958a88e4964a8e0adff42043b8e6e4a5547c28103ba5f43e41ae2fc5550e861304d94e92f20040ab368391411af4c27ab7a0e90d16a20a00ce09091bbf3036e081ff7392c634b5cacc76438b3555c06bcf83f0a3a01dce0b33b97e0ede084229299ea1eeee9f63b2562c71b629689ca26023aed542cc2dbefe97187e37f8ef215e4eee51dfa928a060f76576f71c9db039e2c070ee0c81401883aff91ad7074c41df730299bbed3a1ba311c616812d527b6ac915c16098145fbe49d560de0fde12dbac3652e850214acd8dc8ab01f5e4c1d066d94968a3461ae5aeabc8ee8690911dfb27a998aa4a853dd1cbbdee6895958cb1d7bea94f6ecaf85c354fef62dffc4ee58e40dc90deac9ffb609bdf32f0da29e4d901f12938372bdd91dd5de60566bafae91095f0b74949adf10916ba242f3fca590422943ca048c1972fd530cfd9db22a36260e00ed6722582cc799bbf2ee53af23e22d113305e442c3f5fcd5e62a56d388640144a21c26937c2e9dae418439ced719fcf7843d35450ca53aaec15188f461a85eb9eccb575279e59dc85a13185977d9e7ad42d183529b91633c8ccc3d1daae309d3b1ee6177faa7635080bab4aa92ab328569d522b434dba1ad06e869bcf7c484e4e20c0c5576538fb59fc888c101518e975fcdb0852897b11b01eab5a63beb6c1261c9a2e42ffa3fdfaf32e69add19c5ba1e1bfe4cfca4f30cf3862eee03c87c3e3cefb4ba0039555d4cac8ce7c3dece0864391411d05681bba90b992e9e5fd0d43380d49f28bdd25991b7f3a4aa09a69ee1be68f646003acc3bc72137b0ea548077287554da1f65fbc3a1fb0c3c3d0151350bb0ee2e3600aea09a8250b84eeaf2d633988d4cb37ce563a7ea98f6772154c4b80779a4cd4cff45d98b2f2294b8e3edb5d8aa2bf778b7aa30dc3503e67cdb8b736ff91a3855386c612e87669296e016122a3f7e16001cb53b2bd5fd9190ab903372bf65a0a53a4d39842e73c71f146f40b21099bfaa8474fb9e22e662e191cb41cfda1c3a2b7a18b41f1c281874311a4301300b16a72517944a30952377527f2954477bc2a39e0525e0c6036c56306fcd608ff31d1186df58449e611fa90fcc011273e47e35746c6c6da0c9fbed074e8491851bd12bb0b95093d432dd20a3717830b84387055adb65c467f2bcf6b601b9618a401b4d136dc8323a33f061496c24f78803ddc47862f1318c2bcb273d39458dc98f035e0115bb5b6206b7233b8edefbb68accf7495f2fcf92e0812a60d96e4f856572e31e3050f10f5e45e26b817c63b9954bb5db6172ca19971300fa8cc6348e8c2a5286981191465527ff7984622818ac0fb42019f01cc159640fe94f1ed5840fca6ba497ccbf84eb28daa563fd3edcd4eb9a848bcfcf8b45ec2d61b5e640cb4284a8f3c47687ddd5e7eacdf44e9b6bf6d165519f3b9f3e7c19aa528201f25a64c425f11493ead525bf54a250eb098c270642decde0fcf9662c7eb3fa22df125575736bc0847baa2257f0e60208bd446102e7f89ab00ef0f679e73d96f1d118756431e0a032d9c3646fb9fa1d42bebb5669321591e71f53fd8f7f60f1373ef211c5af615a2b555b3d0619feaa4a01c57ab2d7abe2a8c7249c048e470709010464fc1d51b154c35f6cf3da0d2be98f5632de9e12a111b899ed97e321f05363f91e6b33f2f3bf1497e19683cee42b8008fc5e09a8780bb8fd43f1de320301374955b23dd243d4ccdee89bb6df60dbd6e3969250d0defd79d59a7d5afc8bdce22ec046fbc13e948e93986002143b0ff2a1cfcd003b85d0ed4d7762c38c8ea36a84f6b136d199393354abc859204bc067200750a8404759e8cb6226f2fe9fd61907a8248b516dcc12b189b9e297a6f853af48238f09b75ce39de386204a422d245fa3b2e210032e33479b0113474d4faff89c4c3ad1fdc267eff8a939f8021236e4bf4a371f76beb9b667cf70e901ccc1cba4279584b800aaef1addf29c989cc27ad09ecef047c34e86e7f57e46abca9dfbeac267289f0552928bb1f1fad7a9bdda119849f7bf7b6b4931ab784100577184913b23fec83b09f019bf783024789dca0205abb152cdffd7b248bbe79e059a32358d5b7c6f1b58decfd185e1e942a4eaab55019b2d1906051a5fc1cec4daa898f2c638b6c5140493d69f046b2cd52afcad42055a5b05ac655993bd238bdba6e0fd36d7c99340e04d31498ca0dddae4945c0249702f57001f7392b6b7f5227a715f7500ccd37b49ca61e005581495ac480697593507025cbbc94d8620aaeb2f30604f79efa2f9a65bfea26e76c0fc0aaf8708a0d2269637c7ef6f5804e6703d86759b8363ed7b5913154b7817ef7b9d9f0bce9abcf10dd23bd32b2b72a8bcd6c9521e131b1140f2dc199d470f93e5885d4e24f2f9673f7b1da68de16db72bf39fa4729112a72062126d01ace7118417357b3c3ae0e14134f64be68ad9fa626868d2bf2457987a7b260e29aba1964cffe7b8c6e808aaee3361e6a7c4ce393e345701b29faa4bb6af6627788b45adf8b4e438a2bcf91f42f6b2cc2911352e1c9885ad68426383e41813b8651e560bd8708a5a08ca625fe22e30d701d3ffc4b1fdd49662e9d8b15eb2983ca807c2052d3441fcfb847b2ab804f767708b003aa1d6b08332342ec19d36ac296b42d43313469dcd3f9657ed194131b8bdf733d476de1c9641ff1a3bc65af1868aedf350349dc61b9788fcd07ae65cc7e8334417002a9ada2a565e52109c21ba9203212ff493d4919e6b1279132556fcf0c5534d2cc5174b88f3ecbc80b1eaedd4957eb7b626a865f4037fbbe51b1955d0f4404e39e9e99f7a331f4523d84b4ce5a735eaadb6893f5c9a1c1913e1a2baf1f79f0b3004fc28e5527ff5918a6a4614ffd26323b2907bdab4e2f08329328a60191401b3a4c1629f50a98bb33153d6d8f6a38d438286b7dcf8ee7ea64ce764028fe24fa61ab3b1626cca7c827108c1e7ae7ce221f33d40d2e4eb609269e772cc9fdbfa69c848a844eed6f63140adbdda045090a8a294ddcf435f7b388c5b59fd0f0ba3f7e636bc12f96e68c6e634441883657705ce307015e8c930056f2c7ffe9d349c2f8f045796096e0c97e1318b7787d4cb54a0f13e750c7f7ba2f55f2da630dd13fc6251889c43571bb4576cb5609354c3d607c1f8e26c34793519d0d47d878e40589f14afe2d0ad5e6c4f24ab5d42ab2d2a91fd69e30939de3d7c6c429d6bb17e6f14136164372c039dec874e34fffd55b1423494bd5dc38e7824024f554b011699768907e17e030bd4a84bc3c30ad2b27298fc489766787fb55e62bfd840b48dc38a248c1bf40292588ea929ac7320995e5979d8ef3ee96b88e7c732337d78ec1a5f0e4d2069f4f161ddd73c306f35b012e7311e914575f38d6789749d5b83c6047e2778026f8a507f6247fd560c7733a59a4094d13680be284951f8f83446b7b0c95086e171c862150d8abfe8770e7260f3af6ce711819f66f580de11637b0c409acdad0663df393e8b108c91b4762c09a047c4a32147e69feec9e913b10a214b788cd8da898e92cd5e5439c6ebe4e0fbece4bdc2ddc786c3c5182c9a06781007a95dc1f3ed91988d605c3ab891bc2ec9025442676040e9028e195919e7e6a1dbd5248c7d44cb2c2a903b3e7c391ca9e55037c9322e7ebb6e193a66589ef407aa00940508f3a0af1e541bb98aa42b28e3879c506fdcf29837677698314a7406418f096b587221d4236167663445198bd71e6f4631429301e170e5ec16aa063921997ca82e563ac1c0334a1213e6b1e0d549e9bef8b763e8d67186ff008dee348778608b727db0129655e4dbde3381c686f1ef07b1165aa5a6cb0d812b1729cacff540eb0ddca39b6b9e627120d8eeeda4b8ae7bd8db6522fbb62d1df94a31e48d85f48070deca909e949ab069765857c1b617d044d49d3affee0ab5801afcff0fcbd448ffae2d07540f63e56d590c7515eebd8199fa16f8d8fa8ba68304f93c1766d112d2d10c973158c4685ec0596e71ee9b0c3c11ef787421088f849a789562e8119f52f6246baa3af823eb089ec4136d6ea797ad3c0b6a7013748ea0066fd8a2ca058686c8d012dd51559ec2113fe7a22667d6bf10248b9bf41c8b1c970cfc2938cdd6cd6bc06f94a085392c387b4d92ea60b1c816f2ebc11df183fde25efdad4184ef1f68b06fd95ddde4bd30ddee523cebb594456570821cab6c09cea547cb0e88c7df8d591705d43d3fbf1376d23e78b2ddacbd81b85899ccbb0e229d05c24e61e184988271c806d4144bdbc85ffa2f546e27c629c8034d946ccd7cbd9a954eede7f550d59b338a75424f9ccc8fb324993d97eeeed58ea623a0c820f7918e53541f97bd0e874fa35aa1f6b753c27ccbbe9f68a8f3977bcb3b0b39ff0a179335ca5e5c21ca20c284572e62e86c3086f75d6bf831d0bebedaba560422cb91a8c852d8b2a5e3acbcd04b01e22bf1294685233966d97b35eaf18e2c63758d9e2faac012b72bf2ca1890f05ff135c129575ed8e3dd7440b974b9ca52157178124507a1c1d01646d62252acc319d8979a701bf9d61bcc83066553e1843345f1f7de5c0a586c865ee493e32a400a63dd476da468a0a29833b236dfe1cc55db20ad86d5d8dfff6847f4f472dfffb6fd95757f014deed69af702ba9e0c961769159b6f31152493561c27c7fd7f34b18b33372f7dee726491410889dec39f10d4ed8d2c8d62dd08e6c4ccc3393e866c27489ddce068a60ea9143f18e85a7f8447aa0a9b5a929211eb8ecd4ea978c68516a95db71c4c9d9a9de8485b623f694a1e31d9b6b5f35b4640fce702396411606d356cb0fb5a7ee129aaaa09e894becbcaf37da38e61ca5069f77ce356e6215885123b8c56178b8ce014db76a8cf366d9a190f9f36f371cade39e7283c8e7021a3b3943c5015ec55c52ea06f102f6f4377f00b888288d0d7affe4aac224d33aa49ea1580a25eb4bfc6a2dc1340b18866b9515b6a7307a7142c7c63f5bd25330a66312291050f198710685f861473448d62628824c82b8aab7513832dea06a6e5981a3b579ff48b500c23ccccd644fe12833f46df3baacf427f0b9c0c8429d04d5b1a078a3028418e03f60f06a8cead858db2fdef0aff4a9f73e1cbd0328f81c26d0c0b0c55016b7da468865049041077ceb110d482a8bddf32c0670bb03814be04699ab4f0125317b30a0f4236f47846a31d150d2e558d8cf8c09ed076789c136f365a10f049b43a12edee1b8de3c69f46570cf948f2d83085f8fdf9c887702b32ea18a29556df69628b52a93bba298ca8aa8c76bc99ec0ef6324f2ddb5a431682490993651c1623180e0dcbe04341c678376671c7925d03e04033ee22c12a9ecc1005f95111f883ea03cefb661d8b2aba39d2a8150e46a2073f8ed01cc67a0a446437e7e6816ccd779c0ac9021af9f89676ee015a690157ec4aea786b40fb30777f4e993112cd8c0605124a074080a957d204996af31132dfed6a8d044cff16a8822a2bd25a1097121f2135236ac7ab41becbde686fd1a8ec336e8949e03b65a374a65f7c20efc28066fb18b908a865ffc56cfec999f82f4ecf771a271475d987384f9b4a9d4c63788a46f6102549723402505c465bff9cfc19474b451abe0b79594ce98b0e78f39b377706cbe7c29c1f3026ca7bd094f3e6d1a7d2f0cbe4d3707bef3485f1c0ce28c24432af7f03350a108caee8efcdd1895d49e0a3c63f791c77906b484e2aba5fac61fa3aaafca598349ac587ca20032004184482174dd3296bfa5a4a7ff9727be02e71c42ff0637ee2df573e8efb3ba20d89806f116795fb7b1c5d977be0516ac85a12c74f92837ef089b5ae1458c80cfcbbeff9b2703936e2125cdf71fb16dc8e0f774fdad760af80a146ddf79a380e4eb257f3c8fc4528b1b6a6eee33d78b551af586cd9112e9cf1686d741441c7b1716cede2b61447e60c735d10be1e5f3434d88771767488cc9a0e2498f20414bf5b6e687b409a9e15659624b87a07be3db4dd5503be3394d8b0d2059e63849a1ede1f64e807fa2ccc2a97989b8858d8cad0033abbfd0e3c8b9bfa088cef67df400f24cbaaee6213ab0c99c7c7acd05467f0e594668d934db72bbf93edbaa9eaf62c5f98340dbcc89ae2ae1d47989e4604d8e70d59b0ca0729b71a653d3b4e403af6a625fdf2b92cc6200cb4b7d952fd5961ccb5af256bf61ade4637bced5cfe82d304ab163f210d189bd23ba1231c6a7b47002ed6cc641259c046f44db55db357683df682fcd6b38468ce1d5e3b77922de0da4e8fa1fb042ae7b6976b90625fc88255a6ab73d633399640503c9b61480a70f1cc69988fc8fef2791fd248cdf7be734b0da12593120720f57604d2948d48c05b216f124bff627c525a190d24a44e634b3bd9724e5f60a03bbf7eeb5c61947e38a6ef8a99b7f897abf328849417c2a08e5786dc082b5d3b14b43dcb9b7e783e23c5fb9e141f7ff4ad3ce002f175c4d720adef7210b8b88a4e1039fe9949e2aed0687af72662d78d1e2155dc3fec45bcf0869b5f44fd528b29b58b107707e112f0a81f03d52ad2db38a5c61a69a8db2122b2c521ace35d2a7bfa7e659e506ccc719609f03b4273d3bd6c05457dc729958f3cfca8847b64e387e851836af345aadcc32c33cb1f38f58c391f9c50aa675db2349c71dedfbc0c3ad0df7c88df4fb17d4ea8644af745f0cb261ec8d5b9dd58548d44f67c12905357cde0b45e03f36b6ef4b01e5a65a1826ea79ab249b0df2f5a2533fbd9e2857cc10eb114a74170899c6a3e6237bda009944a15ee09b7978d3e2e49b22c1f1b69b89dea23ddb93bb97363e11ac24cab1439816e17f4fc350ddb026cbe508ece2b934c906b5feb35748f5d6af456814eaa7eaee3e8e41579e9c18a3981b7983047d19baf676ba3a1dd79c7983723dc6eb03998867bbd14fca2a2acbc939c3ed40fd71bbb28e47506535a5241cc44eeb02c74b60ff1a70f8c7882ce43246fa60d674b73b5561223ae546a7324e8a7659d279c17f5e543a5eb4a0fe1c7a6577de8d88f84f6f126fb84fdaa0c142e7c55f0f18ecb0747cf14cd98a85193178248d6464f5c025013328b13645a987637a4d1b8047f0394f76c1f05d4061d382fcb1b9850d0f97eacf0f47e6dff3e7603ac5488eed133bbf2614f5c55be887bfe69dabff6c350146557304c133e2512db33dd91e932abd2677f5f982a4b375691707a972669aae9cfb86cc66dd3d8bb338ebcd9490c4cb449d91dfa2905e3f09bc4d4062c66892218b2770fa0a3ca07d84b453c1d7b30e5b63e8da42e6c21c0d27688b99d567eafb7e2d083ddbf88e8f3204815189ff1a7cdae88b78d472fac53d2bbd82fd05ef9ccce26a7fa2dc41cb064b11fc70664dd56e14bbed4f91560e48f63ec3c4f0b7c62a894b07aecd671b484904d4e8884874152da0e0a3adf394f75cf313a7be139df9f473211d1691dc1781de6de936d0c8f5e370e112b0d409d49b73769ad982134701da8c5dc38640a02992ea2d86e8299a9dd4419e2db036ba5221b2a5675135710bbeffb1981e3c8207b2d56abe156e4012d0fd788f1968161c40a998d40f2213f8cd2eb012086c6f87bd664c38091e9a1684a50fe134df31db0310a85ab22811760464e8c8eb9b2f4a440c7a63b4ae0b1838bf909547a0897d55392c040e44eecce06091b66812cb69f952f97a508c8552a4c396e3da93131490dc6ca558ee53e783f254ddb5503d6b1e81627365b007d7513356a3c2017c531a42b1dec58783bf122d1fe0528a1afa48f098b009aece57e1e0a93efd7d0c3356893319b7aef1c21a6670b9d9a7f65e9c99e01d5beb9d15a2661e2229dd853e7fd67e0a1ae575455c69a8fa78324ca5c5aba71b72768571ed735b98f715e8e63f0d3c5f4c882e99d1a21f4c63a13f3cdd19f27cb3bcf1f40b2e5654fddb2f20ecd2222656d5b3bc803f50beab406d80f2de44082faf05f8798f5e1f2bbf6cc80798380925e266ea8af6cb63b39cef707cc06b731bff4418a6c75efcb85a1cf118c94fda6f6f6e0802c9d82370bccb8673920d4dfc6893424a358f8ebaf7ca83b94d28f3eec9c832fafc24ad79f3961ed5e72faa925fc13b5e21dd08740a4dce9917db9ace3fe7eaa6d2c9b02cdd5c99907e3d8ed33c4f3b28674b2f78c5d19bba93191a3682eb0447df519b86e165f904507f7b2ab55a3eb8711457b05da9732b9e70f0b74b066d2d4b1957711cda73ef855ecb0f107e46b093ec34008505a691c444d2de60d74b11a46532645dca3a2913bae6d0a58c56a2683b7bbeccbe51ebc496b2eae1e5f45fb23c39c028d4d676e822618d708d21b01a3d4bd1fbbdbe65cdc5d6b86e998d649b7a6de24b3758fcd8e37a2ed4cfa1f8b41dbd3c594dbbfeb37477fce13c6fd225c013a80c9181ae39063c1cc215d4594e2c13bbfbef72ae42fbc40cdd4780c801fa2a9a8582c8ced612e5af5b47c7ae0630a5cbec001f278f24a19111c0789e2fb0015663d4aed2b42f98da17d91c1dc8932b2e0cc1910248309c86a5c6b07621221efa23fae9b5899906a5db5bec42555d2e63fe8e158ac775ec9482f43798cb6363464a82871b23d4aef533cadefeddf9578d061a64403856a797ba110df6c9b3f4f974c8becf5a55818b6369851a804b45d946312a294d36956224fb5f1111e6be5c216f8572802bd1e603ff9f74f02ddf7f1fcd80afcf27fa8fdbfec1eb8eed4143d14d33bb79b97b786007477a0a2e2fe6bfc0bcfd3bcb81e0362d9cd86e9e9c97a8dd872af60ede65218100ab80fecace1aeaa7b5d60cc3a06196db4dc9406be2a1cdc69c17642c4c114ce6ddeca1b4f602b9095f158107d2a063d69901e540688720f859cc18aa7df4025c08f7f031f21cb7524a6689c68062c1583c7e7544ee0685427f4543b5230e8324959718cdeb21e7b3ee9f562aff0d584af64769d87879f011be43b4959ab53fc48ba85b02bf4a5a24e99cfcaa3cdf8daa91ae78e2b570b2e25db5db15284da56fcceadb95e159225d3302444ac369a0d3da15ae6c7af496ef299859dbb516b0d94574efd8d7db64ac87d82d6deaa42d63a5644095f53e82ec176086476ea9d9ab0cb761ec16030f6464aa7638618c95f5092190b2aff0f93ad7c54e7d9d8a1c2662f3b7d4b55cd8d4c636ea5636851b795538889b6ad33cc660152044bafc24afce1c8f5ea803a42e59b84f1a826bf91305578f2fca2ba3647697da70847932b67861431f4b3017013e9b739eb44258b52bacc07a0ec8a9b8b80eb7648013c8557cfd9a79b66458c393093f207b5a8902746630575a362f38d0d928bae9a2ea3a29233ea9f60ff07268579fc5ca9eac33f0a64b0fe1d38e16b1d7a0887f20f0fd6a58c2e665748e49c893618e0db268e3acadaefca6f2ecde2585e97bcb528c40edf82eb607a41d85f5651b1737e0f127797866cb3fac3a010a95a5693bd014c2d033c350fa97b3b0c408be32e29e258e5d335133aa521ab98b295e3c0f7864fb7fe87de1c7b6671e935baf6bd23439875627c5610ac7bec9709bcacec821681c345c4d5d308b71e985f65d1e3212d403f7bc3c934214005a3e9756eb660df9ecac3c03f6b8356a07691ab3be719a9942a64cc801725e6d561df6349a46da2116e0a653c5f76f0de68145904bdb7cbfba7636caa3403de83d8bad104ba36e96f7ff1f592a1359ccb8148fb96e410636f99ca0328ba4130895422cc82864242074d81ce4cd289f020dc0ff4a1e8bb4e8513099a95aa723cdb1c8a031f9cb2cd2332363a53baeda9aea0d5e67bfe829a20dbb4decd30d8ddccd6ddfc84bc214e5d72d82210b5cfb35e5c21d11b3988479b6049bcd8bea784cda3fb3eee9993e4253d0eca16a04b73ece1a7108369aa62b04efb6a5dcb6d00b672de49069aeab5a658b045ecc26dfbb44a6bb195b188bd9661a7c160356f81fa56c542c1f6c78c94aa3ead80aa6a6ec18fe250ef33067fca24b904c61a6daf88a9292d4bd464b5ca909e8aab50ac7040b3873ec9688846e5665d40f427f090ff8bd5eb39d3d0b2d3994146808699a78a07e4e27186b65ff3e0366ff98e1395521eac1590a7e8ae84ad79ae52e403b3e72a62547e4f3941c161442db9b9857e29a56e6378df9066adc2da9ac5700e7e7626a83f6797a3edee0063eef7039700bf928630b966b17453ffcf5e83367764a7c36902210d0086b85e7e6cafe2cba57442a98b35befa7fb1505552fc155a50cc4572f836d6bcc2bf19d4281d88854ccd484d371570872885150d6a08cf7a5f3a30c574494e729d49503f28233807d141ab2c8f23e58cfe6e790b3ccf6536f1ca7abde7f2779b0be57725d511750d3448a1e084bb8f3d3fb4e41b87e814d183afd3fc29593d07d2bb21771f699a3f00eea50fe0944a2e417a3decbc31c505d09d3442cd34d7eabde7afc6d9f0f17637647c1db57a260cb2b5fa7eec34d5ae401f45e5279bd666b83bc12cad372eb13d156d5e0b0964c88ead904dacc83ff6882474e9d555d5f659e1f696295c142c4ba10ff6ad78579a489d8e3bb979d78351f8bd9dd9e75790d802e3b1ce151eeb7b68d84f40265c483a1f6048a4ff361b92fffe0a51ea778d99c82d2a0f3dbe9f46479050a2d751d64879fbbdd00447ceccae73029c1da49dcfb6aa3c85968151fa5c6eb08bd2daf55de5e76b6e6fd6b7b822150d3543482cb9c0b1c0ca81d4b918aa771e6274e1bfcf40efbf1dea8e32b77fffeb9eb658fea19fd05408e5ad62af3e1b75c6d214987a908a4b878ee9f4b0d3a1156533bdb98b2f9873398e24f56a8dbbaa92dacd522e4005b65d2a32d504732578bc7fcf8d8c3f579488bc15f30d7d97a9ed0f043d6022fda4223b3f5bbdebd4ca6e15a50c3ffa7e410bb7a81bf623a672a8d25eb2a50144e5656a53ea1451503c05270922400ddc6de9d959cf28b277e213b85028d612d56aad760ad19c18a77be34e3d9ad80e8640862fb0e213f95674828c14be1592fe74b1422e871e0c6d752b68382863b97d74eb5cface184390199ad66776c9c3036bc00270fc57851ebdbc8e4abd9ba126124a498533fed043fbce772236c8c835b670822971447532ce8a628bf79d3b5e389a2f3cab3dedaddf52791b5b212c42b93dccf4e003af56403b55f13217af5f85d080ea982b1642b433f94087a7cfeb3e30fa66a9bf81041013fcbcde7e95cba18f5680df4145da43488c515a01fe9ba853d8ef79ab7d4afc868b88247712d134ee20960797ef7645a836cdbcf9d2acd46517d9d5ac47c02871be93d779da4eba1d6103e7f9dbdd1e8abca5152fdb2fdbca4d8b430d9b6cc89b2cefc28f02f995f21a5a6d79dc1cc084f25f288e3e4b7a636fbd726dbb63c04e51144bf4972759544cae41007c7b8c375da86d5d234677aa047edee99b9357fcabaf8ce23de29acd6edea1e44c6442572700bc9c9686af81b3fc91fa7d4b6ae98c3d711ffb43480bc1b6fb84b0fc1bfec7193245ea736819ab72844b543ddf3bff8f5670d2e3ca69bb29e05418676a1abe3d192206c51f9c7e84f847553b5aadd8834dc02b1db02c288d06ab6c542d5e5f946b95f88abb8322895c4b7ae9c45f603b7db4fbf13b76bb51db527bbe1a5890c697bea7f629a028e0afa07b69c372551cfc397c31bca778e7a85f21cb0faa23766886f2a0564cc00c882a48b549d00423c07501b9600435f27caa1e3a28c3d800fe2d2bcc92d96b78c3e3f6abfaa95c88eb90f39189c86d45422e3286eedb58fa0b98ef128fb9ce9830b79de92de5802ad63c12dcb2389fe3470b4ac2db00764eb67d8f24723852ac8a7e272198da8e90b74db65d136b16f1a9a6c7a3d03f34e0f8306dba63525bc52dd77c8ce036e0d737991a60c4e25809c9478248bfcd636c71ecc451e2275b60bb5e70f45b770b4962bb7c3c15592199f29d4f676a4cc2cadd414654cc172d705b39792c4ce4ce98db94f4d05848499f8a713af2f001434a1c506ef1a9484bc6052e7a11dae153417c12a971870bfed0f8a18f4c7b9713d1fedec461a03a6b8dc9426d6f0eb0044053c3daef79b9bc078db96451a67ad8a3d148f96101a93dc4afa1ed1c3309d82d4deed1f22ebbeebaec7ab4aa5339a070e75f927dd1d3d5fdbf486bd06575521fe36b6c631de81f019ce870c8823b75aba2f3d29e9d818b41ff76cba25ec013d3570991c64027f517bf8aadd529be385b179b7368fcc3ef74251f9d0f01cb8e5e5c8f5dca1d0fcfa10bd97d9e050e59f08350352f42fff89f38941f52854a238a732fe3fd60cc05f535108db1f812fd1b5a781397fe5a8d203b299dfb405d45226e3cba589ed1b17fab793c4d79193c570985a29594b0bd8c4c6afdd7402bd269c5455c3659bb21bab5ab30714ef98702f7bbba660845ea6734944aa528262894665ba8de75b61d9fecc4aed35d18fe051e0659fec6cfe4761ce735a9dcc6d5922e4e09bfbc1eaa31e15e582237f99debda2bd17172f7e8d138455b26886d21187bffd40596a4726574dac0b4804b0c4ef90de68350f747ed8b1c4d99cb0322b4568d322d3a09bcd2dbe95c38ba2709cd49559bce39249cb1521af9018f265edee5e7ad43319c83bb87064b89d7136d0309b5501b1af3e4436b815c9bf96d8ff7ab052a1771cedb26eb9845d23cf1a222c4490cd6d5f605e7a1a7af4450c6fa813bbbda3d0068245a0ac44fa3db59233eac38c73727c1dafd41299bd3e4da4192a34c32b29d6eb5251f4fedc6d9519496d0cb255a054d1982e45400fd91a3e10f4c64339a44fdf38122e2e508294221fa343481b54ad036bdfccd23885f530b755b327bd146ca2b2838fac0ef685a7c6efaa0f3ead8df33c8ddb605c359e9d4a174fe090b742e7f038654eecec0e6f852b5f554382fc2edcab51e49ff261c32cdaa584562c5c32b3d0c95555dee184eff2ec36c8fd3ab0b75866b80c886e0fec806046803a2ef143eedd113173e0e64f10d53688662abe8bdc635804cda92d1d72c8dcc09293f63ed2ab642553f21743d64b5ac9adb59d4fd4e85f14a04029e36fad6ec53fc48dae8573685fb164132fc6d11395a1f81a418d5eb62aff57d8bc4c74a1844ab43c3983b39981be53ce2d10ae0a512a041de005b645aa94275de5adbe60502ee84bc9e1c27a6921941dbaa25874bf30f6b934598c058f3c89c0f67bf37db26152257cf02ad9b7ae4e373b9f157813f9fe8f39e620d2d83fed61ef5002ea76e8512bade3729833a0a43dcb66892843f9af74cd553c23fd8b848248f408fc401babacf9e4d91b06ccc19173f3ecdddbe4c4bd26dcbe666232b1bb87dc874127d7d3147d4e74dcabdbeae9b2f54a33f5703fb8f201d2619796fbb7e0d574722842830c72bc338a550a1f2872c104ef03edb52f211684b34a6601030963e0aabea0b54a0575c3e994bf7582cd3b4b5af9fa53e78062272c01584da27989b03606229315a316d6386ae9fdc4f2add94a5c12b959f6b66ef75f9204f2379a4536c2966f0d6bf360eb082b8927122fa11c3d16d9ae3b88f90d71dd7fc48b6de6008a1bc81f1a7a61cd2d9f5f004ccd2109c2ef19993b5fb561ed9d8108a422ed40c279b2d3417f3c50170460298b925561738fa1e8620b6c69390ad3c4568fa54d49589b378241716bb26e43ebd53266e3119629009b6ba1843b2f53cd90355f2a272577621cba21fb229b094eee02144aaa8d1d56e5d6c2fcf596b767b02974f77d3158cf9c821337288dbcdac5a57df23ac200a46dede52402cc73d198765d22ebe2adc29b091a06310bd6ae0dd873b671181a00d882a61fb8e64e5d60e0ed1472103add7118976bb499f006b726354b9b327787287a4613d3404c86045e58961ec979595b3f71b4e9b8c77f45cfbf3e0c732b4185a89186e0b0a3a432f9a121b6961d446e2fbc9f411bb6154c8a772b0ea98abdc72574e03f2287b9fb675e49693f0b7e8513c35302307c535e83afa3d3fadd987c19ad5b58cfe0ad6b1c061d0f45fa5206ca8b7101631a10bd849a69e69545127a6fa97a39a63150f4abfad0a870fa53b64c7607d43777f317ceccbadd2d4ea5de0affae7e62250eeb0982cd4eb0e1c023087de11bc2de9696f98a4ccc00e473e61693958ee41bf9659dfe8cb5700487dee9e8dc3deaed1465045d47229dbf89f11f85416effb835cb73c176cb91594597c0a59ee63f3c9f0ebfeeff6cf887527033933373ee2c5c413cca65b7760ae7b4983f74a2c4105ba6b80c1dc221832dfedb78b572ccf6a7d5f8f3576543deba8d9419ef56a80c9e12763323b56bc9c5ac05a5881e3c9f5d3f3c958588cd15992da14392a7a46f9ad6253c22a57b4da4061c781e76070a491901db23024eebd9026669f31106a236baf67f5714a142a9f9b83c2bac545695dc5ed5dd954f70600f8899facea96c8424828c30046afcf82684d2bcc2dd928e792310162f5923b14da6abd79c03f8123d0fa279f4fb49f5ccc6f7847ed51180b3888fd6db22d83d1e1497fc6860be8fb75102d0dde062f606c6b8b17b53bb9e1c06359feb3f06fbe7d6fd0256d1a201df87ef4397aa0c5d978d7b221d16e99aa9610306d7b8cec134aa7d2b228d8efcf0d304a2d31af24de8465fcd048bde79df6ec3529059a1cf4ded635820e495f4df13c1d504b9ad3088bf6e900c1c46a2f4e884bc5543a58a9e8e6cd7393319454c3562277d2e827a6a2ae5e2ecf849b128cabfe342f0b69e07a51fdeaf68010dcf71da97be6728aa2fe7f935ac20bc5674dafbe89ac458ac1e77986896102552a4992fe543dc386516e2929588d9afc36943d5974902e619a4853da7f7e716948785472029804be14175f75960283910a828547f82664cb105fb2bb789d3b526d15b98c0d98274978685d297ce41d5aaad881dc1fbcef72634ea5937c8be22ed34139ad648b3d214ba5c1a45f715c08c5e7c563431207e59c361aed9c76684a6ed118ac5fbb1e254ca3062fac24ca22f9a6198521d014f2b7b6d7bea571bcc09f8f1485f68b786461a3e238b9bbef00c1c493bc91ad9dae8ada4211967b359f883ca07fdc3bef5317a80bb2d717f453d3b6a1d501cb72bc484cae7158248f409d0752bfef84fbcda222e808c65d5cda632572a943165fa0ff6104d100399fed1f1ac8d148904ba7e67ec6d00e8f62e66dd5a14b72dce1d2a37cf26b1e30eae7aee9df2b16aaa603692b61b2b25d31a2d893e9e79177144833fcfd07b11d84c3648e6126e55ee1bcaf3b8dcf6af884b67bf5d8d88917e98e00529d254b58065373fd9dc21c71d9367d07e3b673ce6b8587370f7f2d699b9d85324d47d648b430a0a7bd28f8edb2ae4eda31d4127c9e08f662b2cc9257afb77d0584e3f485d899a3422c63368213c7463f46f8306b49bf2ccabf8469c68ae3048077328fa78607608dc16e16cc76628c8e03fbafd288c0ee54395e1acab552a52dcefd9a7042fa5cacd31e3c05fd0286f9a6ecd81ee174d34b12580b559e8e9468641b6aeb425dfade5b4f29b76c5004bbfa810b4f9f6321a0133972fa0190e0807a3c0f8e3bff83fc2a6fedbe0511864d6dd24bc0482121b3b9d7aa2151f01f1989d95c4cbd1ada94f3987f8da586a578b4c12c0f458f818eef39315efbad320914b5257d2277fefe4704b5e30e3f0e7e5f77b69007c29d56dedb44d504b80c9b34411458fb881dc0dfcd81311ece52a852c123f0f2d1403c859293142f7cecf325bfffc75db8465c3e9468a8fab906e6947e0a4b450cca00dd4d821c95813717a75bac3e8975dbb264fab0bbba28ab97ba01c2c4f48607a4a4aee257fe59d7f6f9d70be92e51a03961ded0bad8b19969f86ba5dd90daa4f5891cee518b2a0abfbec53fac41a762ba7c2040afe13b37a4c014cb87caa29531f892c8d9dd486c740d1a339be1e7b591d56a35169517bd1f8433196c6a44d7f3bd02ce498aa749f1ae2f04ed77595c26bbc2bfd8d62b29226b3695e0a0b89ddf9147c9aad8b65d3d706c6b2ca9d4886a6d56906040e07dd1df2f154826c92fac67f58a214b54e60fbfcf37c2d76b43e7db16725e67711ad49818f41c161c5cfbb8a4e4e664ed2052d78fbebb5310854f3e00996e08a624c4ca304532c85e1a99526212d9e9bb769bacc2adabd35fd93df9394b125828362731da35efd5ca08a9a4d66ac0a257dbd97bc5bc0a07257c12d65ec89f2d66875e6c0ec5ca43ce913d0f38e230c9eb11010508220dc27d9acda6f7d8476b1cb07ee08fa318d76122867ac870aad9390307db929b01899401cbdbf8d90f5120a7276804213cfb1e825c536fb95f906414ad84f9a265c97e5d3334249729e4973acec39bb2794b32a123563c7b8cb45f8a21c73dc8169f4e565901b2248a715aa147ee5c9d076697ec52541ae61a2ed4bae24c4163d5942be775e94ad26c5736d5e24dbc5919da51b3020c441cfd874da17967290673110842c1630f79c549c5d3f782803cafbd57eb4020bbbdb2c974e86e3d3abecece4a2eccadd4d3dd4e0b2d255c9816aa23520d4ca163e066dd410b9f8942fe8d434a3dbac3eaf99a9530187bf41e7f4ea8b797ed6e6fff1f37c0d19a654b47a0c9d918458e75b1516d499f0346e96c52e9f2bd919bb56fbda582a03a41f8b3cade965bf2c1940e383be2b20fd957ac777c6a6d085ac1a50eca8421f5901f56a5ad4c17e376c98918c6e2fc30a8aca2e492ea872d4fee18cb556487c6042a302859004f67d5ebe487f7e1a18fec6c4b882ac5101a9d99dcf03795d47110ea56b44c25704058cd813916ac5523a23b3db0221045f39f65ef72142dc17d922d0bafd431ea727c892aaf0b32a563c728d36e78c58bfa15c3d0402601671062a69f4a049da8dd71d5c91ce72ba11eaaf0b3949aed9ecf94bb011072cf7595c5aa624bac4a03e05d4759f157317b73a1d447ad018bc4d297365c9041027b8ce5bec4125795f2153973689b0a4163d54cf7c16a093060780a10a7c667c97e42827dbe17ef87892c93f9834705a53f09a361d44da84f42fee53fa63be7d52de921689c0ffe4424c5382f7d428b25c9ab6eb7ee626115bb91c3963b3bb20d5e244f059a22352bec4037d9531e60e5bcb3c5d2fe30f4536a00a6d4a7e81358540499150c56935b966f1a6ef28e7890c0b3d7b4a3aa26484bed9ae307026ab61cca96fed99d3fdd74977913537fae5a7618f702673d9371c0e1a1ca830b3856b4827474390a0bc8b3de8fe28d1a5ec9d3e5525ed8990847b52d43226f3c9c7eba7ff17f6bfdf6c9a470710a9b0eb20044b4c57e06fb8aa94154b060249b9b30b967b5d855e226e1e6615b9223f1be1655fe44d65c933f8c88ddf2ad74038e12870c7fd67c594bb3e7f573ee2a09ee33289197501d6316b9734106015846047ce8adbbb42e50e15aa4ef45597682ca59ad7bbdd08d508b6409bc24002a96345d56436366143acd58002ec1840f26205e651d08d2a0b3d870ee4f1212af4c6fe9e2f7ba370d8439d7f21a3defdb217fc9c8a4fa66e8c0556a3631a09375e008443ffb61e857248b1ae6bbfc698039c097e0639e92a2903cf442e35d5d344f9a6e81f754e188df548d9c6b9183aa80b6d1166dc3eab66d57a4eea653b6ff5a119109428fda2c6b710e4b39c25283ad732f844a107e740c04e6dd47636a5611e5f062ca205d3d72186181fe6523f6e4e079036309e7f37ce9038d5be51c4440b00748a9b04bd9dc0dbd75cef9f49b3abb5302e8f85d09686493fbe75b1298b2cc14abc6e95a4a176f62cdd9b4498d901ca851dbdfd8b2b65956c4f4b7da0d29f60ee20af5e012f5131d03979e661bc18a7bfe858069d641a86c9d3f603b3f2691b1f05902e2305d7d0f6dc5d0d0a753775cee2dc37ffc99b485aebdf486e81bd82eabf2201c76976974ef1dbcb675bffa01ed76a59eeaa7d5c56897b584d222d6592def5a1515edb6bc65ca4d93cce7b32d06d668fdc3040eaa0f2e82a5b9efd755469b87e9fe3a2de8df60939e66379d555f97dcf950b54a6a5c8f8787a5a0c9f0f7abb3709db81ccb1bd5ccc684e8a1c170abd376074067521e312d3221a70414ebd60353211894daaea390310821c5a6b3355608818debd65de730ba3f9072c070bdcac3f433092e064d0e73db4944bec42d58a2c140aa14b33bef52154c2da22287e5d40dabac4ded8f8306a2b7ce59d963f1bf892ee810a5ad8285804ca5f3ea7b2e96e9a65c3cefeec1b9ee8d6f39fbe9bbd209ccf43c04412ffcbf841c9a5c2e9672c57954a5ff3b4c6061482968296c7ef63f83f09ddd1013126918bdab81ad6564b33e136919d0d3d725f7ebc44e6637c011656aee3e5d76fbde50d31f74007b1fb97ec086556828e234b711c2fcd76fbbbc49acd559df6557d8f97ef0a6fe51b2b35428b34762cb6475460fee0fa6b05f9972d514d9972cabbf47bfb842ed507731781ad0515bac2595c8fab6a3b2abaf0443e882897d724a450d362c99a07578a2d839ba292c5b2d5021ee1b56b6521bebf4e3fd501a64d9886b9654ebd4363dd6c58e93aceecb5b159f57b450b45524f50d182ec28a1fba131c070302bcd69c9c3ac4594874b322806584bd127800d4783caf52d3731ff8601f0ee6a5dc389a96a891e0ce17f852d197f52f89dd79b7f7c1fe13f960f3b85f20acd2590ffa7065c5ebfc3d070b8c5b343c990570ad4e3ffc663ca2c8cceb6cba7bb1062fb1c43d5b1f932e305e1ba5b514d34520278f4b5c3afddbc9d5798e47e0f1064d794af018ff3cfb9e49f12801171ae18fc19b029313f3c81b666c40826c313ab6b3a494e0a11bcaa48330996778a0c9beed8946016e466ddc39ed8e9882482776d16d04e58fa724ca74524c0f032889386ccf7249fa9599e5a0159cee0cff0550df0ed02a807723e36d0cc4f2e858e604a3262545bd8f32364eedaac04780a09de423de3abeb956c0a7e44438c32eef4a29af8fc58e0dbba3e6a69bcc44c51882a218d8c20b0440d12a9e4b878cf5fe4675eae09252e743f77a9d5ff6e88728ade46089329adead2dcfce5b101134cce5894b5564161202a0b77958090005bbb018a78691c4dd688a8bdcb7e864478dfdcbf8f4e4cf278c8979ac97790b4441133c159032ff241ec6e408ec06875975f9d66bb8c3f2f154d8fb1e1a5203640b048c0ce0da240f05a4d3436f4051c07d4914f5881f788002c33c15889fe2265c7671c7050d38a95b20774a414b747828887864c0add3a743b2af19d3524cae27db552e13ba6e8f4c5533ad564adcde7dd1a02e33016dec98fe9a6b48aa2c4a9505a4c991b53916ab497ea6e24399a29d421447fc2996e27cd489e4f411d715abbca3e2da10c678706246cbc92de80bd6581e77888e7367faadf2df983209ecd066d03ca626d63e8a781b2476fc6240c218fa5c09a76401e6afbbf55c2ab2bd4610f3281f8898570703db8f73fe0aedce93899a3383653ff460b004212b00f1964bfd81dfb070ff0ceab5a811cc37644feced4c3e694d37d33a6a953508c7ddbdfa703e3297a13b250dc3cd9e57bbbe39c697d95a1eb2db371c9e86f82a677b92915a4b54a69b804b412621f22487e6868c828ab798b0640a2fb28c1a2b6be6c58e31a3ecc76d0acacff3aec23616528d1ffdb08c382a2affba504243bbb0e14a05b3868b43fc2404d9008dd38323422589e76a725b5bb099bc9c013f3d8dd46410bac0e6af24fcbf6f1d1bfe0f4f217a3ade0149e919e980e8d22eb104138df6f520fb791176ee4089550876ce9d591c250048eedfd47fac93de4646f45385f30cd72b18a582030d038964f4a380c03ff7aa8bebd27b4e0909106c9813072b95da1fee604bc759f69232cc0366454feb0931e95ff42e7232caee4144f3cc5b72009c58820dea102e3f3c9ded9c2188698d43bf842ccb0611c5ac4795ec6e34036c641e4cf5944f3a4e3569415687ae7fd95e5f644a44f7fe6de7d3e7d38a9ce936961d6b31c2b816737f1f2331f2cd8c5875eea2e02aa2a1869e8abe93ff019c89c9d94cead05f99b075b1efbd53ccf9e22029ef148740f501fee482857c9d7536a605fb7c333bc16cfcae77514ed61f9f42219e93a546a1b011857c7989a1a7dc96480e3b3681c8f4abcf8c0341d19b7dc2aa110ec48a856b85d36b3f3457d59ddb33f3b858ce6dfddf479b9acd920e9a22412c5b4b99844681cf7a980995d2935d75475df70fe6b5b69d1dd64f9edcb0fe0dc945cff53e95aef2dc89d66f7942eb24772f0bc569a4b301c34c1a9fddddd61d4ea9a9ea26e956717f3928ef5fc44d5c0ef8b9c2795d10faedae310631395b6c9632e539d83844272e55985a4379e32150c641b120c08cb9884826cbd2e213be31770862e369c9b55876fb9eaf19beb138a5d22cbba21ddd4776c049f00a4aabb722938c3b7b67caad9e4051a31f52b98cf04f242f8e587072a87c747c4bd40f1a22d38420d4933adaf9bb44f91debcb2e9d064a05e5e0f8b49b2ec54fbb32e264fb2a6dab3d9195734968dea71ba5f4b1f67146a0cadeb3d3906e015690dd6039282e6e19132e2ac86feafaa2f7bf776bb60c85fe087652601e4caaeb00316c9a841c2e7a5fed9a101a0ffd0f14ec4075e05d95e1fffb7e70ae55c1afcdc8a629a8a216b2e75d267b287d31b77a48d10552d76fe7bcf8d578c9b25723564271b210489997c75f94dedf874f89ab075a58316466bfdcb4f76e04d65e0b68609fce2db26c4d89ee4af34d0ec2f50946f1170fee38927d9ed96a6bb01c6be057adac1588795e580189768f92062a90315502eb7fb74fb2d06f74514b7cd999feb135aa519cffa793c3491eafb06fb617ecf096c0033693978e643919f550f1e13399366612e1982d5be11400332c2da48e8c001d84dddccd15df06dd92ca77847bfda0b26c26edfea3dc0354e538d4ed7e5f44dab1d1bfd30a9786176096073f5fcfc663049ea3f65e9d2193726e0957d7c025442a7490cf845f1a9c7d6c3e573fc4bca36f8ccf4686961e714c94ade10b50a4af15fde5f710a8a4f0012b7935f7791d031e7f9aff192463308827f1825e991c7814de57dcaa0cba6023ad1ce81ecdd68797a8dbf40719c06c5c826dcf082e6053b873611088244d42ac1cae9ccb518ca6a3a9a4e90be2319d665551213969c47f266a2c37be0df4dceb776caf78470fdb9fb6f4392906ec07b3f166e177ff44f42b1f40344c3c7771beda541f7644b38a323c8f232cd015e2d6b82f6c3129b1170d71feb60281796fadd1a2a902454bb6c717f53ea320b2590033fb77114c9e3307dd9efcaf3f5cb37c608fbfb471a4d59513bdde51cfa08f239ceb6215d27b7f4d11d423555f9363957bb564cb4b33d27e589e85a9ec5d4c933bf34c1ad50455aab7894d164c52e8692bfbe95ba96847680f75b9e304661d97897e053b9494d124429482d43de6212e426f3ad5f449a02c01416e915cdc6699bc7eff077489338f225ada39bf90c6efd7ce748cacd64506acc3298fbd27b1eddc6265ace53a6bfe79434c170aa98aa7b34249144fca9d3868fe9cfff8f4603ea73ada5d4924d2799aedc224ca625a706855f23f4cf2755bc21596a146a5935341587e701aa8918f3a70db35291881944bbac6038d768d5bf374d3034a7e23f04a607b3f6adb83daa88466a06e3dcc8285fb5fad6269ba9a0227a97d9d52f7be631fb9a8ffcb57d02e3dc2b405d727eb7a9a6ebc8a50c9a8153dcf0d71e2adb651ed87e8ad19931d026c052f6af6c3cb9875ecd6a491b8a719570084516f335b087b821ff55dfbde115218b6b920dfc93063d3089826d35ed85a9a89afa5d57b3cf283426fe3a9a945dd0e224c228df6586454a493943bebe1e0605fca38f8e73a1b4955689ff996d49ba4ccc8d9d0e5df8eccd7b925ccfb1dea5b9fed2107f6723037fc5ca7f20da9cf2a8b710e3adc62c52c96add2746b3f3924f097213d7b109f33b6896af969619628512dceed235e4d9af7a29607907b6523c22f808240c545b94d966b6f07c7f17ccd89aefb77e8754f26a56b2213863fb028d4663d3cdf9b4a3f7c7f03a844f4d50246f6ca2c7fbd3371c45df921c2063c714e774ee654b2cd4e8653934f40e58f4b644239d5d90134db086d61a9c74cee86340cd9f6cf9077324cc9729565a232b6a5e4dfba320577908b291f3bcd149da5fef9c6811c5cab1b3d616b2302ec62d30ae432e38ebc6b85dbe239d70a99785acaa64975441c45f9122d0a9ae9cf2d817526339da915e31efe4ae8bdf668de93606c2ef950e1f0f94a9de8b9f8ce71e3a0719445c2dde8b19a17f4b6bc92998b0ba2dfcd96cc28ac219ec1da7b5d3defdf741285c842ce08d6e5fc4a3b311063aba3f77354a94765c4be25043c585840459362c1313305611206a2eee8d87e22ad800d363ea4efa3ec47f26d85b2d9c0bc34272681ca4a084673d331a1aea0062d94a99ac0c6133088070629e4c6548ae2572ae05cb0728b6327b6cd325c2fe048efa609c90c74d16be1e81569d5abc2933fd29e2f656b2142a5f8aab4716f05e51bc2b0513d1692bf1f02cf67bf69f8989de6988d93b363adb8a4b1faba801aecdf1877d2f58e82bf9ef5ae8335472902846b5ab6170e8fc07327a9014d56f9b98c52be8b9ebe4c3e272d054398093301b9e623ebd9d70ef0268e864d382e77ad73f619d43b9f45ef8bdd3a84817cba34976698995d2b30597d1b6bd53bef0e9aa37834b1cb486f71dcf8cd06a848a1edada1a2cfc0bde33e1df56c7221e8eb90b304646725a714c1c7994a6d784ced750aae292986b19bf258a2f01c1476bd4fcf939c5358f285b6e05b9afceccbed09ea74de2354ec757f60fe01e1eff18e242656c22c93d55abca6c1670d312192de4acac875bb4be71e436608f72db8d59900a5e2804543d881c40702cebdeb6f0f688ef08306438c0a034bb9f4c57371aff296fc3b21ea8d338289a7d557f27f3b9e4391dc8cf9eecba07223d2194f76895c7bbefd5d55c317eb0b5746975841de649672a1e42099035945ef9c5ea51320ec36122f5e364eac871f1c00ef9d268ac27320f89290d05805db34a561104ee671c4cdace02689ef957836d1b595d293bb6a9b91e57793057052f21490e2353639fc72fa20a9ce47b65c9cc94c8b04f220387dbb269c3c30718643738bbabb4f91ba1427c3e19828d13477892756de03530b889016cf08976193e3deffc4743f19ff21992bbfa6766ef23ab41ce3c7eafc3f23a8cdd6a6060181a2c77732091260020e8ecfb4fb010b6204a35c2379380a98fa4050ff2b7c58c3985c77280fa25faecfee375618f42a6ca6229623439459149bc1d4991840a0feadda81fa95c679f2b6af46c6c2f6e9d09f597ea00aa48278e9387d4effcc122480cc60cd839a79cfd20cf2e6940cbd09ac708c25825ea9d1c57a570f6ad216d760fef8c000f742dc8d858c21ac8800ae534c23cac6d4d2db8134074a730442dff6d24617f93b1196da5d1815ed195bc7d4f6e54017562a2f1971b470096b3b8f93a9ffa25335b3dfc1fd0039aedd7fa50a0a33147753b93e772f6708d49ba28b0bd769b50a6a13aa32d6cc841fa17d7dcd4bca6786f8306cbbefc2d8458264bfb03126708e0f6f27679af1922c87d1def99067ff7e903e986809f6fd643e9e73fc8f43ce0742f0215e029d00dcf6b83cd7f0536c32bc2d757cd50b442e38f18bedd831607ed16d1726798b9053bef8c5e56df0b5db68ebfdcda2001db018628def27ba6fa03e3fac8eb6bbc06889f28986af3eb79934f14423a8ce42866557edb7acd6a98ad42a97d89a616c72a5912001480913789aa489d25eeaea61d5c8eed3f517166a0ca0ed834170c6bc6a46cb371886e17f9e8d4a746e1e43a26ad6ef68ab681cabda99f81fde4296d3fb151a15ba78287a5437ad6e01d3c8001104c46589b1453dfd276d6ab5924fd23a3308755ddfd584b0f307e11f83dcf50bbf14728549305b3690eb87fbfcf106d90a02b119613ba3475da62b6e472b5a1bf7a2784c23848454f286fb02fc00838f5f1d1c049d5b84f436ce4fdae861c54d3a678bf462559753cae48fb3651ab4fa2939f2313b8620107666cfd7a5e4861ae273f785878bd2844dbfd4fc4f734f09e017d7f75c0116d8e34226d53b150aeb7faa9cdb4859eb56e587922eec096a32eb578016234a3fe6a73c2cd2535df28df7077504f51fe58397c1748a17bd0467a07040f90c774d3f39cd1bc91836da56dc0aed858d7019013d3cb7e0e627bfc1a65fb7048780bccadfa3cb902e50830c0cc44667cb2a001fe8865028f1910448c6db707010a616f74e3a32094eb538f504282ac3986a8137a75c39fc8f3997e38c81743c24cfcf3ffb1ea02d0772418b203129480c40862d042780a19c2423f8e1c52a556b0cd616f72930f84682bef819924de6e73d6a7ee9236a09b33d9311d487a3618b8569b1457b2b8fb70c3ab3b6647057d01b3f792a1d70b054fb68fd81cd892f7bce43bcda8424872ca3a1fc599579ad43be3f7605f968e44e7c52aa4f99246c28391f60e854426b8214b573129edea4111b6a024dba382ff8721d59a0f61e8e5ee0c6c080fb5cc34ea2d12f9fd1700c1b4bf23ecfd85d7db895bf715740981a2445e2c8f3bb43924cf47cb70767e3e9ecb6c39ba6ba95a3864aa05f30ae521c894e9253a3e9bb9faa8215e3e1450b925ea816a4403bfd58cb66bd8ea5b72d982d5676b0904fecc7e437f6534870763ab527886078fb90587448cceff423dcf09f0cc86634819c464808b8307619276acc790be9ce93a496272a3c6bab44d04a41e31858be4875957699a3626c9bc644529d32e46a900d6de84e631f32097e28333cac65db09c7f690ad42f5da1e56751929fb8313640af4d20328a4ed998ee6637182420da82dd1d85bd3747e5555bd646a5bea1dfc82c5a23da0d88e6dcf597c0fc684267bf28625edda052861f8560cb91cd980acacd09c9c6082c5fe17431031719afb97e3b0583593cbcd1a3a81e3a303c7e44e238b5bb78a0ea4de5f39a2be93aa10a52b006dcd94265dbfb9a17c23e8b40076041a4fc69a444e337d72ee6ab0a5ad5bebb03e04a6f3d824391a944ed0163daf68b272b03116078ec12520a448a9b7e9754cb0adf7235948fa284e900b22a769ab8a7b5ab5e957f94501ab4096634028998639c794a95cedf1e555d4a0194bece8f735341f463e84dd7039d190afd6b1e8e6c281eb50c02673b05950d289db3223ea1bdcc73e038183a40aa051ff23c64a2d5c856501b77d0147489dd8c8f0006761695a60ec1a34b7e6154ca86e7bfba1500732628442b05be293a15dc0902d7b0080947604ee82a8a7e06fcbaabb1a45e90eab4b49aeb7ca9e824f6206464170d2a692e53063b6640273b5d2949b44cc140096e3eb6313d8a8c87805234309f4f9c6b0ed5aff6f37701e427d500f813995ec111e163bfe8f35b062c7e47184b49b081ff7a53bcc5ab575c6f46e65ecc2549213069a1695cb34028a35d6341b913f100a22e5dc0eb8886165777915e62cf52f784ce9404cad8fda1ebf877f2b4c47e64a541b2167619d59605c58b4effa9706e01ebfd49e4be70093f103de65b4f3a888c11604200eac0d82c738c12c01836c24e8e6ab11fa43e202cba88f21f721b7016f4e7c34e73db7aacc1f4b0a58ad3d3653f984a52b8613e0f0039d3000b148e82c135c458a6cc6b5ad72b78ffac77570fad657adb034b95ea163e0f88c96bbab893a8c1aee6066e3ef1c4b46463e31187134b2fd800ee666123653e4792d5dd56389ce63141818cb7e7e70aceaffd4b5043176a8aa58eeab26682970e8b909539fb22c19c310e4795502b927fc16ce5155f1cd612d541dfe028823df2615f89df99e81bc0ae54867eba1a53c165ed9517690c0fe03de1cbc7c3fad44399cf25bf42648290fc07969661b41dd1fa97510086fe89814072d95565bfe206324a6590f893d5cb85081044a078408d66cd1516273bb49262b05476da7abb609a5f52079bdd39459ed14ed28f7cf5837761d0d994f3e5e202f6b5faf80454f311d75ae702cb0eac5f1d7cb00b1c7a37803fb6540c400baafea09a1817dd009f3029fb72bbdab263ebf12f302253d584964cc4f8f137684bf1e75853906d5a17905a7e49895e36030894ea3a88d0b9a0971653239ff9fa9c0f19cc6998b44568735f9f8dbcdf403b12b094a2e7353daf16360f41352998fba1eab0ecd9b0068221ec25f306993cdfc015be96a1d485649fba4cbe8e29b93911d674ea50f966c6584fcb12a13f229af8ced74e1dff2a2c58085ae947ed2cb26f02d27973ba686c5b6427a739d1184c6aa3e21416958c3ee70d02cf530cf3cc90a43c40b5e0de20c4d472317ee14175fd54aeabb0155d8bf261b76fd1761591add2e47ae29a9b5ff70c6bb0e3525f8a54df9d819f1c2793366ece6da01f720e384d3008c2859b1bdfb86b7f6f6ae283279c0735c514800a86a453f7e600a959752e85933222ad458bf0985f0a6764aadfb44e347959eafa513359df95d92301cbb5b3023e9d1d7339817b736fb0511e84b68593d69fd3305d536a275942ed7abfb46c21e720703cb76de1e1a4540174e8b0de879fd811198716b5b6529305384883ec865cc775e70c8b07a937f3495538b6853417e214582371f2977cc70db47d4fbc470fc3a1e74046967b7f53b2d53a98bb33b992f7b90907902b799a7a1c8074f7bf1645c6d11690c89e96ee7aeb814a146416f776a029f541ac3c282b34ad10c058c0b33a1efe4a95fea68152a7eefaf50e1375b01d36f2e62543e024d6c2d4e5a80c5118dee1f29d3cb44553057fa3c71d9a6e266a9bf3b6fcb34c08adee2a4df5ca3076d8dbe0db3816250d6271dd855d8008f03869d59af65b2f69af5897f0bc393c69abdcad52bce24e4bd777c9da9b580a8d9d0b35dffdf5afcda27626040f936d422b0ab5f1ecd0531a4e4ccc4670ffb73f819a9201f25915eff37d9c32b4391b3ad775eea9ec054ba4b6f6a5353b5f4f6578ff58f84c78427f0c872f925c452895ea69f92e9eeab099b7b7e9e571de476e5b601ef54fc9921b2911c8aaf67b7b2989682172f5fecddf2b69401c456479c89432b518e3e8aca9ceefc0b96d69813ee7df399dcd074ebda734fc826d514bc2a125941f3bdae617cbcc3344f7807c5538c5612ee7dcc33924ba2751ed2a7514890ccac5aa088f7a8b8b763f3689467b64600b7f8f72c48c7c6ca467e23f9e2bf150bb822ff40fe42a091672cd338abb12b8145d25cf01e72ab099c987096d49434fdc16a5c243bb345a627a47a329b42d4717d4ed517e671a3cee312946175d7120ceeb5b741c4c7ee9a45c832867b55c705c04083314a310498eddc990e18525b51bb28f9b9123ad66c2c4a5a5a74d7fc91db4be19eac88cf63b94d0d444153103695ad16747ad93ac1240a06828dd8e4307e266d3029160bb9d5a823df28adea361b2b37465445b94d184993f740eedc0b6b5b7cd31b639d22f0be4d3deab20a51a3d7962319181ae305b10278a984d94874dc67a69000bef929dae40d8c1bda43bd73873a63527d4bdf234b2f713510c4b7924d59f6d182d7a5fc451fa9b1afea980703e4494f767077c219e90e83218a45e3d62bfc139e9812d36c9f24928f668789b0acf759319304e9014089d693df572641e1254eeabda235fabf82ad67212208d1ace13565deb13ac26896bec79e31306ba6c90ce8b183c1ecf0826fa6ca5e56fe69ea62e0a83c3917fae5308ad1cea6750b173886ff761fa80da1b41b690ccef866482c170053abf7fef8a7c66b7867c01e7d795a71e896736cde0fc2feb3b6e7a1b6530858e1ad14fb00d900030591cf8b84c79eafc328f78d39cd1ded6d1e107115ad94c6b672786c08a3fba53c201dda1ddb29cd8b0f8237101eff776048d1c7e461302226f95257e486e188c24a4211f3ec5aa659e692141200fb758034ddcfdcc17f990a8e11fb9663d8fdd95b401e078b27adba96ad18ca92800b8197bcc385929937e9214ec634a44be809de7f57b708fa1af74cb5866b3cac3880e9247dd9cf140455697118cfa86ff86f498ecac5bdeb33cd572d0605cf95f05a7e4dd81ff7ca4d94815ae857414f5c4e0cfcda593253904f34fd7940b7a2abfcfb26a0d9bf397f87b3f7a3d2d2d50b7f736b168bd09620e1957b803bcec5781106fec2e009f7e7875d649f82c9e0e2c29da72674fe67084693752c991c757c9d4f63628e4ad5c9ed0d5c7ef64cde285cafdbde5ee14ca379cb1225f0b978328c88f9c853cfb896471f62d3ad34f3b350d7e204e866a2bbb5103e2a1aa86021f0ebc193b697e7ea568125c568043fa766b22abb959fb9a778ac631321e742cf0086097a1bf0bb14fa881a6784bfff8bc176397b70b98e3fa48253ef7a8c05e7ed183a41c1bc663e01e80f5a7d28b27b559b8342e5af2d4b652ff010d5c9ac02f93d3c27b63067fbad82a2989b4434e5e534516f01853c6acc220623968582c65430afba2f2ff2bf4fc14a60c65e02912c09b55a94fe7590465b3bd8f8040510a2b0d63a85f2333fe50db8f27325912c813174c37e151f7547c967a5272f2722e4674ef86b6d647325eff663e779a09dca0415186d870aa4934499d4fc76eca784bf5a930dd701633471bf4e02d53e6ba649e510b51281236c8d1783ee93878448d99ba73fa0264a7dc20f8310286179218752b934c4c576c19f7cb3898b2d7d0bdae31d19f1decebe2cb71c694ac00f4167951e4e1b166cab0ba7adb2d327345a4920610260ca32a537361a9b2a34e3b4792b1397a9c6e32fd140416e71f727ac277e3c5707be687d663a5da3e6f597b4a5419c49a79e0e493deb5460019ccb887abe4ed92cadaa9fbbcff1b18e5d1578cb7562006d876c3bed2188195e44e73385f26f92a0a114425fc058b510622f3f07c84c1d0cfc4653688342f3615eb9f059f358c47606807fb21ec922b771b4a1508c0540571b27e73b9aa5512efaf6d457197577d7a1944081f914e4719beca41f5a1aba329195ff835e67d94b7fa322fa793469c1db1576dd21abb515c44c3957cb5bce373fe5311904f2ef5e53bdac15f7813e8dcd048a0cd9c0b78d073393bb2e12b4cb1e56bbf7ba7da94ac3187210a5ddba8d1bb0f66cbb6e639b1438cfbfd3d30675d6680a9494283864156e25211b9e7172be1e46b7a8647df4a4e8f8b4373ec5cb77b595f52ed5b812531e3b81277db48c8a18886317e81c6f8d48c48a0380302e7b648b1e45ac0ea9871bcfbd8c7eeeaccbf709f16dba2cc8d24c7dd8fbcbad05fc7cb6cc4562b986c80c946d69f891ad8bc2857e3c601362d9a502969ca159928286dd35405714388c375701423a28b96b6399ab40a8c7106a75801515596cc07530f0cbdb2a08bbfaa60bea61d8a8e086d2ed69694bd42aff542e5f4f51fe0f1c508b87bd52a1936612f8973ef48fba477cf0bcafe84a05ee91a8aebbb78a567027ef40dca413f4379916e822261636aaa82c8690d80ba3d6587c573616825c67c05d234288f07e0d708aa98a670ef5f97d6ce9e115e1a155dae570d79c5fe8768e0a33afa0b4254a3390f4b36f5c483749a44c547107ad34e694a726749f304f7bda8c4cd92ca2be7212f47360636876cc367641157ba42699b20ec7769b5ef454fa55df03a3fa459885e4c859fda85f305d201c6b5227cdc0cac81ce1da6efa72df4314e085a22e550ea53c5fef8c64afb107115bcffe5960af733bfeecc2aeaab0692b7b98a422bfb89294a404cb83fef69d2ae2a3158a018ce43a6e32930c4e9ff469db8c4afcb6ea8b1e36e6b67ba1f183a1349f78e1740c73f931cc7b2357adc21c73932669948e1714f61f86eaa597e5178d7add1e07346ae65d75c02a9b47eda6a50a82ed8cfffb2cb7a20cb16adafdd1688ccc4a53388abed79792716fd7e0e731466e8a0d7aa9875488c0b9ace3b05b669e35e7a62a2ccf35096c0caff91c77ddec96d03ad2c595cbd011217ab747c2c481d87a788ef7099323043c92b3b58709b902027d6298856c3f09aa5708762b82a91eb9b9fca9e7a0f811a733e1a574c28f29bd57e42eaa5946ff3a978f60e42f84c4ba7f4987028ca4bd8af3c23ba0a582de9f8b356225d39f7a1a82c5972e9dfc37c80693061543097cb4338b5d4786c144b7bc7f4b3acccce15332634ded98bcfd010ea0d143e90acb1e70d4fa51b05d00390dd21c0a397472e704f3af5e143aba738d6522e0f30f70477dda9aaa0e699e01ceecb41128f036024339b3adf39abc09b6fd2a282f75ef5f3f27f26168a9887c47b13d13608de3f51dbd3364e17895b44ca01247478c6ad781c1621f2c5adc2eec573661399c4b11d925d27aaba73d6036dae51284228139aab65845b574a147da8df497712b9a3a74b24dcf3c47e0c9b7367f03cbcd257dfaa2a70e7772dfe90302f814b9e8ce4c8528f0728ab9bf95109a508bc85edf60931b9916e7daa146732171b8826da9b112024456dfc2a46e0c1637ab000a5a0b997d57950e70964fc06552030649366c236f74b48b80d88838c6a4853094562fa286296d1d665cbfdb6b5cdc94c9a0fd462ecb5b0633693f193a49e04cc6cd4614d53cd429e97014c092a1d44898cb03138dc3a59db224c546a49c28b2706d62696937a136c74a9623a52cdf7d73a6e7fb0b508731d210c718d0f37df3d777b6981871a430dddc4001592212d3b5e42d6515c3fc80280decb4c46690c0812caac092d8e4838b77c0f3251c0ef0ba923e7a28ed7c5b0c30f4cec2aa8b4c07c5510e7ec393954068f062b781bd9adf2d0c05fcb3dcc30328f91a28fbaa9bf07d641d8bae6aec2f4ad8b07f4e960cd0bd8b2a63f9f5ddf65008f42ed1f0ed85f5812b4613e4bc90bd0a665b71f823eb2aaebb52652a59246bbf7d259eb645692732db69dea02af7b95fc4d1af21242db3e5bd0e6b21df6ff4b0d451b2696ff26809a2b2f8317b974d7f44e25c381c41360d41aea811019829849f6dc4412848be2e9ff1acd3fc2d1c4b1c380946d20ddf5d528520ca76f7995f9d889264911f6d2e1c12ea005f91ab47f25691709cc5fcd99a6bdc5636cca08893bdf30ada591fa086dbe5392342b448e396f966973e291ab860a6726f3e6cf9cd4e83471b6f7d32d218b74423c22d7cbe64bca1eef0857c20c70931b0957bbf11115211632b41d93f6174d1b7c456fc5f9a485d7f398cd9a3f3e0d75e96af1f6418f101fc4fdf369d1e9f5ddfa27476e88b39cec322d360cac6439d2a1c1318fa68b7677c6d0c08aee3f189509d529fd305d5154e3d28de92a151ad42f2e4526c0e5dc79e820c16b724263cbc2d9786d60eedc57a3190ab25c5b1601c0c9b6ea00d08c4e71abd95979461c18be3f1dd6e2f4b8d2e3b030e98cbbc249c9f4fa0a2c6e36f3b634e7194ea48feaacbc52b63f78d0a8b6d35c651d471697e2169e2fda4394bea34b1789507da64e4be25bbc8f440cc1412d99ebeb6c083606fb65d61c342d6301e31d798554fc3b27db5131d9f7b37802ec1b6274a4c0a4d7804b06aabbb08b6a9c71b5b57fc7fd1b98b545719b71fee097f2e7cf9eef78fe1c5f6b8b270b26e2c56c16a6a1645a02a4530e8317664f2be508a75ce2f454fc783e7afb19c98b8615221e83a75f8474a0c7dacbb214c6811d199649c537a14a422006af4eabd3c34f60bf43d2e21c4a0adce880a6a9a108b4fc419f8fe257321222397a91130b6eb78ff1c29bd5e9e54aa1fde3c2fc988846a46664250112eb898cda1e843d641bf5239a8f9587e37805f938ef3b25022019d29943b47dc2dca19ad6fd5b8e655564468b43c0dd24bf56b51241317fac04f1549dd14749dd168f3c5dd0d543981383d933cee518f08f614ee035548f6c1aa864db02308926ed6c410bf1f7a96140755f98828240b8db88f0c27feb87b08f377d667d43b4c8a227b3e9018a412d865e354e8874973c58399fd01cdc79e19ce4eba24ec2146b796eb5154d445f203344ef26cb54388f8a11d51cc011d2cce1f3ca9d8113806b9c2dc9fb894925c5d8e7768861bfbbb5b4a5a5fed67c2bffac9c3552b2b09c944c2a118e48480fb1dea381f5dfa0ea76db778986f2af36cf638c1ca6e4424fa7e06b7e17aad8b69291a1dea6db2489578c9657bf6868fbf8da755be4157282fa5c07917c7ac02d54d314addc90fd5c6b9c39a71dc4817d89cac9957fb01f893bab14f66c49817f6ebd71516b50f22315a73b615906d56a5123934d16c5afbb6bf5cdd28f9644cc491640c3976944fc5c99084d4588335e15494d991bbb775dc4a79da81b6e5881bf508b94f32c9f1907837715501c2773302b2322e5a20d8eeb38ee49e1dafbda5c594b9a04911c571700df7098637d53c5639955d2b6005ae249a8a16bf9aa7ef118e06012eeb9b61e0b17ab6947c2ac52470274ffa19929300b385c3f0ba0bd71eb5171ae7ffb0e9df0e9ebe80ab8cc4bee1421efbc86de7267e2c7add62813af693cb11e4f69443e5ba1d50b27616d1e0e99670a182a86e0932a5bc4e66d8092d9d76f4f2731a8ff64d3914fc2598728a688b98b51814278950567c3691e4be71e389175a33252d21bbb238ac09fbac8045ea7265d4b33689d65b35f907c1be3c9d2f2bea0f5975025c634e33b73a145b72f8a968e403f0a5cee62582c400a79d371c1e94b2fd2f96084bd805bbf91c7904aac650c6fa9eb9511a1d571de2081dfd9b913ebf8247ed489db35fdc6b21fab4054f9d23413a752b10224995d44f0e4a91ea701cfefa7c2348ecc8e3081ad207ba578f55ef92a28242c34498819b5c0ba30133dbbdac270c3831ecfb0bd59126529a366b08da0be3fe8037e22c4a7ea5188b19a45aca598ae7bb11e4bc12963cc60d8db025fdca36c723f599711f7474a3b88c907f97c5c41b7e202bd948d129959f4c46f5f70bdc1268fc78e1078b0605ddb6a2e355329f6541ffa900427af299c7766595aeeb1724f728e64afee66234345c9e75735f78251b55c76c16ca580e2eed9004191bc57b99eb04a18a21639b486884f7f9779c5a34853721eac659f2533c531a4e5fa3343d692c0fe21ccd56cbe50be5a66abd1c6c1d6770e2ffe0d4ea15a8a20e10eac130c0c401ccfc3aa01af4de83caf04e68badab6784dc3032b075a7ecd71676fc0ce57f7edb8632429a9aa73873e04f47f84e1fa9578655f7ac1c204f1774f6b3341e19a9758f52256c71c782ef23f331466ca8dc42c099dcd900d3d038687517602416f1f7a50d5cf7f90c2e5df7846d68869ea8890cdd59de0e551105ff40d6f37bbb9fa339ad6fadb1497f2124f9c96af370bf57ed27b591d14b0d393c1df91df809891760c8be8c87750c5aa808c1d9e5bcc6ea9e53659325252019511544ee992336fa4373641696e6fce6521465825c91cd411d2ae483805752984b0c39578beb64cf522fb99b1577a2871447cfb5dba36623ce906a188721e3843b306eac7b36dca60aec61aeab593f18387efbb541cab04bac99450e92a492266f693c0f7278e02fbb29c3253879e284db1f6272b4109e14632660b0484eed4c48877c507934125c754f1ea63ce2f01c03be0e484d8bede7852ae0c243524507e70be79167c6be62dcbf050cedeb307b17d62c29cf690b3c8f6469267005c7d91202a3855e574ef6ea7d086d13fa67bfe282d8923cfd89eb3ec8324680781a14f4295b7a69572886c389725b7d4e350ff28cf03fcea8542aba43ba75e55c261d65f3937a28376039c7acabba01c2dfd28bdd2da5a8ef2086c8640a9275cc249e2e37aa70becd536da83424221b9fa781d1a4c0f6058f16ac29c1b4620ea8de48eaddda3ddb687884c04fd53f1cddf32c6cc309f8850890d7834e932a71c430a363780db47f73e379e9b2309827dd1e8a4ce670d6722f3c44f19e6e9f27c75b6901bb8f9497e69d1752850306168458913d870dd3c5ad0c0178b1adc2fa4da7e4946b620495b0f1b9db001ebe4da8b44aca301f28a8beb4fe6bf414fa5c126590787a0063a8b6649cb1ad78cf66507911752a89d9e941ba323076450fc1b3713dbb92f7de0a547af34f7df1ea41d4b4f5e3724e9179e73fd7565462ee416a15d234e4b3cd5357d06cc67ab949f6a2bf144a5e3ff3b94440906dfa9e6ea2347c5ac43a16b1b28a8363ddefa8fb40f13b28d25506f6553f22ea653bc39e866371d8ad2e6fdd7c69d0f4b6632322a42bb64f9968c229f1f9dc6ddb26f0103bcabb51496ceab3b560fd09b95f6a8e5cdc58495f50baa96c1fe4c898011c7dfbe558a73af54ed05f202d97e2905f748dec9cde9860b8ae0fc35c252af8324c22ca71989f71654b9856e45172e17aef3cae5075f1c01542a3beb3da036b3f9cd8a3656f2f5250e94791167c8ae203c63c0d66cf66938f24c65223e388a10f3565add10ffd3a43a227224bbbb0ee6351e2b185a043f8a1456f5106d98384da6eb8b0d11f07bd25ca72a780a9429e787468eb9bacec37845e3019e13396d069b55e5da5ce68115e49827df707c166221bbd995fc80a6b3f608286f9abcdf472fded83248dda78118a4086393075f3cbc7410e94a896ae45e5db573481487f5c61f46cfa5e88bdfc7e2eae125859066a42f27def3201a8cdfe5c85345d4c93d6bc427b28141ad3425db766990707a7b760a1a33405cee8ba55487f21a055a5d123e9e6370c49691d7c52416bab43eff1f5c652c3158e2d314eaff393b9ad1bfe8438f418aba25ec675072625f18ca8302601ba6de340480280597a14d1fe422359269dd8b4184be945a522035829d869866eafbd0b5a17ed66a20374c2eed127e27172d55a3be74d95d526f6f29e8f7cdc87aaae728ea4ac6ed149da2e5c3ae5f0f06c857374e5a38b5585b27b22121b79288c8df4b8e351e3c6e92492e4458ee1f1331d63540524f89b016e6d966d6701db1ffc7b718a9ed62842405f0e396fa4487e2493292882a89b14a711aa60fdee6198aac01d76dd0ecb346d2d935af6c34d0d2a19ce1aa34cf0217625d950e78cb235ca0199ad561ea08ac04084db007d3fa3a41b3934eb69bad8f8ad9cb3c8456f3ca3d5756f1c93ded6fc84d096881e14671efbc4c65bfe1e76f9fb075b565a3b719b7e281326d2506949d3e6831d280e6946c31f394db1168c0936460930d00091d27eb08fa39c5d6a56f15e646531f35b729e01011da5f2dd7ece38062524a1cd365090a3d062aeb16544a8d40cfaef8913ae9ea3ae74d24790b6c9f61fa7302dc4125f892063d5da1ce7d6c89d46e314f7820c401f52e4dfa3c7a7d22bb41c99dbae6d7180f89b56b39e76a86af2b5477d537b9d4e70fd947f25424f32c5e3a87234ad6e6722d04d7d2f50b605f26b3619dc374323dccbbe768bd65a48d03038697f4e623e84fc075ba27d44a29dcbb8e3c9993d94b5ec455415504a09ede972cdb9d51b447a9e289ba0e1f198c26364a7fcd1ba4f2420d820e31edba2bec917c4f6d2886d236d8bbb95f45cf045a7cca0e58a215582e7fc458d942a5507e8f63ade3947964c08370e6fb34f4139d72180c9e68a92cbe349bfd835835f26830a585b17ea0bbcf78b647b7839df87d113f0d63c2e8d435cac402b396732e22a36c95dd808654d1bf0c578e64625cf9ba622a27e77f0ea5e3491838be3f926ee44d2681ecdea3f6514d514cd572427d1144f9f871f762391f8b0b0f2d8b9bc5a6d8cd3a127863be60589ad590bd708bffddb5ab4f051714b4803ac5ba81a8b138f3a3aa42b3c3b306fbba6d5d3d68385417dad01f573ac576262e235f62b98a2a2cf3e3e5a72bfdd966f74028823bf6f6b5143dbfce1942d2d0a2e413f9de2b3d44e7bb9e4e0b51b5e1f70f4f23090c48255258489c813f419862fe53bc891e1ffe1da79fce830b95006832d1242d35e653ca650ce21a0a4b662ee215e5e4f186eb96e113735aa0263ad7681e57fad5560dbd7ba4df2954e5d0624ab04ef5fd405cf89a0f35a57a5357a3692f305133003bbcdf5b873c58c0decc7cfb153563b62dfd1dbcd8bc9b1b43f0729553e45bc6724305d819732b080f5062879e520154ea0a13f3a350cabc0980f4eeaabf97818da2b11a1665b8344f87577ea97463c91cc77a16bdb7d68ae68a2742de240154d4e46cd4fa4255c870bb700c8dc9d7c3d18428e9022e7081298fface27a3908c5bf4212f536874b4712ed2a95a044e7adc1777c19b54b356fda631fdc887820b915bf01298dd10ca1dca90d3c247819319e03d8f6d27762c212f473d1c915788e913cab3a29069595965e6e13824b484bc1262b8f7a91d86a186c77338915e39f998943d458bea71c0698ede73de48125cd14387110d9a5b9a4d8ce60d65070dcf718449c05981b2bdef21bae2fd7f18200cdf01b2205a9f9c12efe4e839ca7863a787842a26971c753d09462bc31fb8eec454f6ef8515a17c5f67bad919dc0705c1288f17ec44431dafd04135d90746ad7a4e5bf19b793cad706a683ffd17fe5477264af18e1ed79d51779ca632fafa098c228705507f6a687bc598f80777c5c20c0a4ba5af2c1f995ad68f7ddc6bb37e8b51c506a4d3e6759f89d6f4d15f5642642911363f2c87d989cdc1c1e1ec908d7053a0a1343f38b1f8f813cb2269d1727cda7d75ad94414ffe08eed3b5d89609c1196bfbb517483ecf64f5b01d7bea721de3e7fea53ec866eb059ba54a6898e86c2ebfd8ae653a193e47398bed91b916da8a3dad03b1c00a9adb6f4bdc67eebc46e2371447e0f5f69308561d5290c75df4dd5bff9d14452e9918ef0f8cdad2728d86b4efc7f90e032e777deaafa49017c245a5cb311aa4b839cf691a1e3908962d9b0e98049d51d264f7a9ce5afbc808f9434446fc33a0f8d92aeb93dcfa966998cc6d2b9cf3758a49d104793b10087dbf01b66f9d0cb1de86a0383a2ec35a1a53c2d44cb0bb7416a15a8bfb4f05d0457547312dc6972929c6cd9510c8d79837edb4d63950f1c8573a070040c05b5671f42e822dbe7fc7a3adbde9c97dab90627d485e003a57056ba4cd0f5abb2d68c8930620f4c24d5aa64c44e40a32a834d40e62e93ab5cf80f40d7ccc94ada6269a8dc667572874f61c964924abbf9a6176a785ecab43beec2c4e241b3e1d8d6001238a3fe7a3d7b4d0865ffa23a77e3f1fdde04d957f4c6d66209420aeb8f6affc4cf561e174a1afa7663407cac77b7f451f3e80350e2a7a5d43c0cf46e2de42f8e1fbad00cc0fdebf908606ad5f8fb0be8b80d14b8115cc74e3034506b685d33ae7f8ba4526fb475a80196c75a227fdc8fa9026b08ad23a97b26147913a20bf671835e957577cabdeefca7f89c55d7979ea0c477e1d125f1877e58c744ae41a512e80837b8266b5919ee8028c3dadc0d422ae07fd5372eab2b759941ef6609cb9b2e495a7ef6ae08e5df4210b853f3eb8f84bea93e0b0faca4273d766344aa91f4a582b6626a6056a59e5c4727288f3e1adf94d33992d62ed0b56bec1c92353d48ab3ea15f740eaa02580e2bdf95df78872c5dee4abdafdd95a2bc2a2b96a4d48c5ea0a78ea7e2a5655ac799cdc60343e975b5241305757234f75f456c9b4e597456b5723d934e38fb5c2f941512b6f401bc28fec305fce619b0e91ff178c0739709c4156f14b411a77ab740cf55802e865c87e4f6583c7ee22f34421c987cce2d3980ac756fec61c03592405215dbb9db8fd17ae9d0a7e8bbddad39d4b1b53ea40783e69fc545f72fc9154aa92a8060cd675bcc15c7246e8519b987924d08aa3bcfab2ba255c4cb5fccd5c0815d5f46478d0d4629792b6cf8f90b78ad25c12612474ba7e302bfaba0ebae929d5d245b28c4cfd43e51c4b85ff4e915c205b96f02a4cb3c51db3b0917b643a6d7b22175ca4d2b3eeb86d7ec8ae454bdc89c2c351eb5235b588bade4ea5e5f28531b6ac71a195340ed53a23b2c4e2e197dbe855b19a83c039e8c6b75f62e66d2f44fb051b8839092531855d5435dedde8df150ebc4a2dde2f55d026d3fdf90d021de7595bde1b636a133dd4eb11dfdd8ef460d847587e3fdf8dd7f2dc9c5f6c257aeb43843e2ec5469ae10072e15332d56ef1de956fde09830b49670a01b146ac8f11dbe352bba139543b31b5b9be2eaa9297f341ca5180c56fea796593c1a101e3f3ab7ad9b530112aa3a590949cfd347e6422f52220a0ed3060245133a183ef3bb8334022375992ca8489e049a97a961d6949c3ca9c4451a2a4fc5a2bd81d34dca52862ff98c3fcb561c9b41a7a5dfc2eb35050ceebae323e19a296ce778422942bcf3ad407a16807166deeaed2e0774ace6fd45cf5e7271733aee8773ad5f1e59b36926b7ddcf08013259b7efc169588d6766a09ba74aee0795cc24088d78c1e9a3a9c0553a48bf4699e4c166dd5bb09ce0ff6f879564fb0dc54bc96bbe910e32dffba931915139e10505e8295e2dcfe634812a4add4e15bcf91147274a4d5775683e8b669eb74fd5a47ff98d407c2eb5e7b2542300d8b01805559f00e240bc1c053a57682170a47005f84c250440ef206a8fc9c065620c38a861580058a701b5a1aae52d053c0ee8a8c95621ca692a94dc438dce8568d3a136eba050a00484b9213b2cb390dcb893c85f63474010ec786ab18e6d9b5d81f87b62437546f0bdb2c3e1cb6d0ce41c7ff3eab7b7410dfa1946fa4e15b27eb823602a5146d6040663057cb6f6ddf809335ce56b6c5ef50bb5a0b1180e18248af91a624d226afd814e206ed97294f77d47360a3d6946d2e2a72f8a15bf8245e14fea111f9514a447c3ab91e26092b31b8fc75ea67b46d90ba44a70be9d8cf95c36f3c62131436c62b3912c8721d4d1c4b040b9f8aa19fcb8bea241fc6fee6bcde192af6029f6cba0848da39c17ec28e20b68621329d07ce7f85f57c57e75cfc21c1d980eb13cea3f4e0bc1578955975a467cbbf5fa78fc175ae94d9c18600eaebff92d74b0407dec43def6e0df3efc2a96a729f97ce0b2166291b30c69ca9ae0f706dfea26f10519801800f2e5f9bbb4448aea2978617688da128a16a52e64a952e4516053c9a85ff4c8b00229639cd300b4b6d416bac63a3ffecc536b68625810787288da8150c4108f3b6231c617266d615a3ba8cdc55a8fe360c8543b45c25d69e1bd896d2a1e5b546430aebc2c9988a428c64b4e8d437c48aa564b6b6b1f710344f83bd4f5ebb20d08d31eb92c4c65d08ff2d8e3630d0793abc391172003ab430bcca25f5976c1e44f3bd71072689489d52cdc06b1f0cb27e75b4e5bc45e42bbe2c2d750b3c78ac4e6f5d08b37991889549f9dab219342e636f65ec501a830385961f37d74e194b42b3ad0b69e200d6ba03320586b7d3d168382d7e944eef29efb9624c4cece672c6e5e66288eb221c21d90495ffef676dc7f63f56cf38c940c88cafa5e01ed855e8dd4650dde32c5ac575647db8de908acbcd6192fb916ad38006708a9d8e65e36c20f992be3970dd57d9a2884fd5566f85d1bb8b66aec5b2b354169c739add85e86431f6b604aa826f38d9c240b3d45cfbbfa208e042264cb9a89d1249fae957d04787f01a687d2672913e02c522790e08248c1617581739c06127fcab96ada46724c73c23dccf5d0d049f19a027a763fb65e657b3a9d7d8188379203ab4dc8291acb9c81211c92ebd7bd7eb74e40bccef3ef3632defdba646659754ffd83e14f4364905186ca300227dfc883fe5bcd36f420110336bae386f2864e0f023c04c0c7b449d48ca6fa87b714810b470b8e4c797f73d2258d3c7184552ea7083fdfa44be422aab58dfb360b6ccbb4207d706cac59d1bbb05bcb8eb759de2714da63a5cac41b8a23112de1b6fe81beb3856b54835a3fd1188f011d5034b7778cf235d27f3991eb4fe72e91d7fe7d5e5b1f1393bc8bf17aaea7b5aaf646370bf2ebb066e710320aad08dac60ac48ee9107edfa8237f4d70952334f67e68d269421efcad0e005accbcb1ba888385d253520d66cb7a0ffc47af55b271d026e7d3b220b52b745ef96f7d9ef3574c9943b4b91c7ac7cf6f59506e2f4546063783dfbbf3fe489e12e04b753c38be74655c7982687c126ae2264c6a0f538af8d296e2a5af7269801107153c0511b422f8a1746b43ead0c8288d2615c4049b99d0b81bc765a869eb6f3066dbfa6882ad6ff27b845f0612824e0ba58902c36e2ec23bb988d14ffd45e8f89fa874a08c2e6f994f9722ad9e9402d2aa8efcb05cb190d2684b06c1260848c9494b602f0daa9be890b67418247e18f1c14c7324b69e61c6e34f4c69d1879cc626edbc9bc6574f965ddd6b1cb5e1b4855082c3abec41951498d699d6b3cd525b39967ed94aedcd4b8fa805fb7b3b7879a75dab16bd419eb3a7ca206439f2f6785fae05c4a12f6736d51454929eb091a41c80198f2c6a2bc1ca19488ae7c90416711dc17bd03d083728ccb715cb028e8df56b1dc571df6ad3082ad8f9371c5f0e8dc95a8f33038ff200bba183e90dbdf46f4ce085926f3cf0315e95d232b8fbad5a4ed87d0bd2f0f63d413b9d3df9111ab502eae1818be8df537383820b61ff594a55588698dbaa221ef581a93b3ffd91b3a6b5b59389457b1207b7ec7de0632f1266fd9be804144ef98e88246c91efe81e635c39ee9acaf1ce7e6b1ea776825078428df189d76280bcf53df017fabacab16516d157f1e34bbb77bcf142337e7d349f2b31eedd35a171c5494291b1087d1103cc3bca1b992165f8ccfc2c516fcb7df0c1ed2166d13d6592e6e3f46bd7ec8e0bdb95183989742dcfbde509043ad0c3bfb641f5f3c5f9623b4fc331485fb62fa5a211858613bd37316133f808843561b6b67be6bb23c76281129129716c479621eb8673bd4542c2a29760673826c66afc87794caa2032ac2b5a46e4a027ff6a79b101d41ce33fd557f59da269acc95ac127da3025762912810c3fbcaefdf5c8f32dbee0cf7cf5041c3ad754099bd4441ee2a116c97fd8c6e752ff9de562b296f024353352ed12e0cdce28acacfdb7d4ada37a4040c3e11ca70dddab5bf6131f455653f7ba1bd367799da92d5a8e8639135e5fa7b3c6ac0a2a9b9f12bef7cbb154214ae75e534786c897818ebd80a23fc86189c2da181aa488e8760be2ced88ff2ef1d48dd8debc750c5d3bf625e227317b8e4160b238b61f16130504d5c3cb4258c72723b75e2dd3ee1060535ff4853f731cca08920937cd960f3e616545c650cc6dc6ca97a8c4e26c5a2e9de2088afd14fc667004d9d40bf425b6b9b96b442075f08d4da4835f22f27eccb3660733fe48b8205c21cdbfb3094084a855841a3f404adafa6454bb48f000016abbfb501b8fc2f7384894c826b074e378566b26bba7ab1dc1210a54d122e505605d043a35284b8fdebeab8ffcbe1382d5646fef8306b4436955fb9c8253c7edf2929f1bc338660be7bb3291271beed8e0dddc0e9ad0e4c9131809a6c1ae1a170e48580bd7a67a51f57d8f7e08ee60ba082f9fa5f36b1d798431469ece75b10a5d13a8471bfc7dff65b04dfa92588408eec01c082e323347829b7e9a1e22dd7fef46fd541bc4b35ce753b823bf2afa251fed41140f3b47fccb62cac89a77680bbf10720e8fd8f1f82554257e4c4491ff36dc0c4646a2acf62f917c83e8449d9524c5efd71c42d5303d0806c60a878c1966b05c0e5194a3c1a7ad2373d1ae91fc597b29b2517c10c37f4422380296556361fbc184a89e1c62e4cc1efe5fb67525ef180e1d5f02bcd7cd82f9ca42e1a8ce6173b48a47fbd3e19f81f30a257431fd14a28d1f692819b0e38f16956a59c815d823dd5a5726ff1df58ca6aa346623bb2478bc77f56179a78e9dd30ef783ead326450f5ab0359e10a070e39ddd24d9eac340f779e893ac307785347837c9cddfaedd16b080290ee4fe33b557b40f8f61ea891ecb7a4d25b84d03bc4dcd2814edad58a2db47eb7f2adb5b1e53446426e61084e30c050bebe0b92a7cacfd544f143d3f4f8cd11dd255e17018dda81ae12ded4ee00eff8c7f01204d27b4a6439fceb0080c0732da3508a74789b12daa48dc55dee7d71cadef253b0128fae87f260a956a4f4bf9ae9e9ace4029e8ea0cb344087f8fbf7ed3c5bac4b830afe3fb305dc6e95ff6bcb01b6fc78edacd9ea7840fc54a5932a50b1a258f9c061c0c76daa5b16252fdaf97624020251f370636442b1172808b10b1e2d8122488a5531c84db20522f099c293d4f914eb2ff6efa954c81f012df9c6f11fbab23e9b53659b553d19c46c550d269c1d415d154f3a3ecc31379854025657d307de44a41c4245a4485fbdeed5a8a52cd33ca9b66aa20f221d914ecbcd4132eba2fd1acdfc7e00b6f56909f548b42bfe7058ba2277252c4a4a3d597ac761d95dee8eb0ea1d9a74fc61657093d9415cc2332543f7b011150974b0c64c576729e7d1999217894b4ad5b8092c063e615279ff265735c1a01f547dba31904edcb15a884192810b44b31f00056fb6643b706510a2a37962f8f6957b67fc1681577819a86c7d1456226f68cce1f7f711a98c85b618b3e619e675f0acdcdd1cf403f85c020ac876b2179d8f7393fc55b950f38d90c45668fd78936557d58b419c51af9fd7ba11bdb0efc68abeb2fcf09129198714bae36e1be3c4b5c6b82256f603493699fca09dea76d558014a56fbe012a920417e36aabba45d5923f38ffa3caaabdd5484835151a68a86be41b3f50d798cd52c5fd30823614c4d3da241f31632d5eae64e41a9302bc3d33f3d1ba7374fecff91c8c7d43d58efee6cb9b722dc70a501be85a6575a20cc7192d317fa60013763c6d249298e129a175a376028d0f473e3b79ac3d0edf1036ad305bd7407b8b85b736b593de6c94018726ecfa8059e05bd2491401dd28fec5a06689431febba09eecf0fe25521e9b4a9d32f035a0c0e8506152a79fe997e13c5bbe6089c2437490fe13ecb5bbffd4724be667124946d1cf23e2e025000bedfb6f3292c68de6c07bc0b9b34bfaa210199627249afdb9a2432f0ca420d73e42adde5a3fabf7d927d9cd8acebc0300c20e74d2f8044066a1f3f2370821eae47a8344fcae573b387d32439d2a9c2c66b1212c79d5f98f51766387be0e3b9940c4b307921bfdb5ad9c2bb2b7c2a28a698ee82cefe0b2d720dc144657396d75b10dc673f366c6c0c40a9300bd4450bf9515dd72d264711245f04330660da372e762ad8df150bc2dc1d24bea153476cb2e273a5a93dfb3076a7841218803e08ae9014876bd234a2466f82a815026874b30cd3494c08a3c1500681f9e8f016f604aafa220c26cbc9bc5528bb808a61a11311b48928ae00933821bcb093d59b365be2138476e0b71c45e9ea2d57c1f162ce898ac96abe468c5222050e412d6841a2a8e42894676de1dbc9a3fb7060f31797ed20c83ca95c49ed10864c33ca982e3945a47f31e9a95375b1588275d15955e6958ecae27d1195065cb4d33df566d36ceafebfab4bbb15e043fd6578777f904bd404cdd9a2a0372e2e08a12acd02cb951a43331eefde534ba0c8621a480facd036d2c78cb77b2c059969823a646fa8f230e8982a1004137321b8b16b1ca74c3afd66b032e45688fde35d4291a97cf83bfe6f3543d9190fd280631240133a1651c194030a7498f4e56354a0a0627286cd3bb56e866d8a39e5816b710c160d6b96318bdc0681b0d93f47fa16184e2fcd865ef6566ac27ccbf57b88db406b5709878b8cf2b5a7fc41f812b3f90bca80264f89d0c2bb3ae796289f1b69e0cddb5e98e0d9546de236d844596ad3ff79d42cb6181a946655991e0f3d64564a1acce2443fe264eccd9079ff9f9006700555ff3f2b2e66b83deacefa0c866847717b2e7064976e70e72da1308f6d37c07684dbad8cc629273f98b534f3ff689176afc6059518b03b70f2c50d26922363d0ad4515cf6c30171da464792ca3c3b48095c777f016140af5ddc19e1051ddb1023b10e5cc1f8e6edf326d33286d7dfd91de0d293fdc1b094b0cc2e4671a6935cd3cb92e6d0b03231ff9385ea57347b3313b9f773e4087684a1a02cdb5a72f8dab3d59b29debf428652a0f6ade2fc1f8633e36ec4a1421040576245bcb05fc590bbff73457eca3907847cfa9c655c33adc11f49a05f60d11bae6ce1f9aa5d175ccea32721ddbcbd01d8179dbe866f8de3fe2fc3e688f724bef1c628fef53428b1908ff5e1fcbcc8223665d8f0087814835b0977b2c18175c480a3d1135c834cc9f4b6a5f315ade953933ac0b0bdd35b2f1cec2dad2c15c3b9b5a882658e00a7c0bfa44d2c95d0256afdf64e68cb33e59987301c127c76d14cad26fccc1855e633608a08c7591c6f8c0ad0ee60ae41b92daba6131253f15545c308b400780a39828cfc902025335772d9b6b0e3e7c15f4296584b8c7acd98813761fbf31db8072508ec86652f680456bca4faa4452b4e795eb1515864c28c2c261a6d1db3c18f8a4b29eeb1953463e3a094b51fa2fd2937573c3a15d9c5ee61f84beb0d70054c895c6861cc28efd5232da65a5684e9bee9015da95869fc9c651d7c923e2b835a9affd809a9b91e366338819377b0a86dbc5605ebdace419f5825641ec981e182ab7a89bef495619f365004dd7f9332b6ed7e4886dde7c7864377c891c28810011c8331626e984b408fe2063ed8684211bb1f629fc1c3a1e14f2d4ea77c308f17c83fcda63199373efabbeeb04dee3159757afbf03131257bc7c2d775b849037bc70dbbd0cf3aca27b039810a0a2c22c1d9c12fa508d72cbc4d8dfdd946251cec06afb270bc933c737c87f1507b599ed394baccb4856f2e72f98cbc0af6ff6d5187df237897499c695414b0db51a7827d2223a26abd3217f139745112f630fe433ec2e2ca44e0fa473a04e7ba6c001c2a391dd4e1be18f2863b004338736a85826ac80b2d40683e7d75cb3a86d254607bab32026d22662d6449db31ac867c6901e843682123ae691a369e354bc271ee6d2d8a1a5bd7624052a56a0c73305ef67f0779e26bbe94a83a78b81e8b33cb9a34c55437f843a219752d022026d1545a98ad7c6c52bbb945361d8d788aab898016815e398d35f46f3c671d15808b3cca25c9f318687390e21719f8a94ec767242d0bbea4b974ae9553c59d9dbfc6c0582a1bd20ec4a4fa6f3cd736086d3dfd87fed2130f95ad2a03b6dfe3a8b3d2f7bab022ef99bd9f2baf7550455980dd966eb83065e9fb6ccf60cf4d6976302866e253c63d6f621cf2bd44b93c3649a90412c6abc6858664d70ebf2242340caf52c4daf97236178959c54509b8906abc5f214fa506be0ffa21b637431d0ea11d67d0e00e003324a62efd4e0033afc9b16a3ad4cc4b0b935c8c3133ed686b2564a0a571c9616af378ec6947ed3f37b055b099d13ca3e50252f4f82c3fdaa9023b6fb3ec2185fd77b1f61a258b64c90de3bbf18b7f27e9e268da2ece0440a7edf074c87111c89452d970a26765fc10296c1904b6ae251ea5dc79794b7ca93e67f97d24b2885ff3c89b5fe343e24157dfca4d29fe009af84bc51bda25adf79d1ad8e1b39971bf66bef141a4c7ac5965dc93a525f57bc202fba8731343ae20d5d771e6626b10968d207a2d430c74d7c9e332887e308148ecad3718c5ca36c97a611a4a6ba6b4b891d5081729ff174f5097f3ef3782f2d70771b95013bd54eefb4b16de0606c636ea23319afbd73e0d6e324dd9bd7b584264420a94c9287ae7039087a4afdf3f535fe4104127bb1b5d7ed38c5d3935be7f956fc2a2b929cd0ee6223f5e39986a4861f55a5d3bc29e63122f489a7b359f54d8ad54689f0c29b509673210951c6f60f3d5512a6cd88c30f2c02fe25b1d495e83c9d01d525268095d5959711156f54bec0ca597833e1ce55f45137db18c706d32a4d71d2a1ca2e26c2fd64031f5827a941a01f35ffd62b3f07087394eccb10208d7a4cdd85db927fec27a57bd4a69ffc8c8bff3687056f12bb349e2be6167c9633f3cb5815972266ccd76d0cccd3e4eb9350712864257c5f8961e3126c7757e594f16d4d08abb7836922f6f613c35d4b1fe641a0b073ac74e2ad7b9b284305a35dc206fff2149e9d2aa1e7e7fe77681fa5b7311bf67a3ef1374d98c308bcd518f09800f7dab22ad510c42d7b7148755217a40b884c270529e457f4c0787c527ff8bf580baa547c66fbdf15df1db1c9708ba5d9fb05e0ed5cf7d9e752bb3c5f38545e65bbb9b0815a8b586a89a754d94c5738198993c11ef42af5c13c562540bfc098f094ad3103acc0d6e8a440125c46fcf409f96138b65e8f4e8f7d042060c1fe088ab44e3dceb65cf215b87d4e211162b11b0024243ef3b0bc1c8a999d25125d83efeee5f436f1f90fea5786697a5917680089e614d2d168944b1daa8f72419e608b1bd66d6ad140f082c043b65ecdeed8b21957fd66609f2fbbe6b68d462b26b62f1a861108dafd4c13a35c899493b7a473c833606714eb7bd526a64d54ff15867461899aacd66a79bfee155507f26fd7c96b68a191f875937b5449db3770754aeda5a90b78770fa6c3f70ad607283da6cf19a726a2b5efc956514450ff29c910d6baf39d9c38df880364ae366ff58751b52d36bb96cdc5dce71069d548d8a3f2649e1eef8696dc8368c6f4b01ba8dada3036287c44be04bca7af95e5b9de21f2ea06a136e16a198ef32327c0078ca5fa6de1409da3428f2c349c0b4fd6ca2c0478a3092add809e89d8f89e0be0bbfb7647467ad06d9b9c22dc0dbd5c18d7d19ed05d6e05ce265d691c2f2149168795b238f662da1ae197dabcc8a17f1ff2e0aff137c43f165bdbebf67216c22bfa5cbf86df4dd7f281efbebc323ba8e5fa3aeba8e7a471d8963429d40e5431acc12f652a9f5fe82b62ef6b16a3a3c14aebbc9de4a77d8015d6bfc89fa6a7f2cacf7403f26f1b833f38240c49fe6fb7c4871ca9cc605f39ccec84db6f912104e6b9d8f40a6e511f3149b3100aa17e859f9e0db1db16deec0ad26a00e3e6179be8e1ba2d1add1e623706423c5b5413a0462a84dce8712731ee880667a4bc163ef6c00ad8df41c3ed7f7dc012a0e3c48e0fdf8981c5b5c6a87ac32e1f576f7b40eab63887e3c4c38e9564a37fa7a928d3c10a7b80334b802d7feb5e96fa80211d9b69856790a0ceada1aabde2ecc39c2b459428b1dafde9d78e741761f956c938b6c746091a20da6b89cde070fed071a24a62e4e8f3702c7c18bb456d973720fa6a40064d252ed4852e9804dc557a8bbd856cc62ff381340beb874698ab057e55fee70b8b293a8b55101960e5418168c7ab2dacef80d3936b35500600a73f058be0c9b876c37d84bc541b20f614429e6ca99bc9890ace559f5b137d1a2629dcc3b5cc5431979d92c73b3c89c26b0fe0a1d2a152f61723e066e97951817646213e5f45095374f98f4d9f3d0b746beb4d48fda2794a41ee75f56ef9d8e5a03836b61b506d973f8755c5c8ba45f8975d475972508112cc9aad872bb88d11003c73abdeecdddb15e220966ec9cdcd9e93069e6f6dd08769c44324ce35fe3d9ce1a36b466b7011b07be086f690f66f005e26304167020fe8aa87690a7cc73a1bae237e86623adee352619e4394496bea24aa4c8afb53e1696f3c39288d2d37cfa90ef83fa0625426f6d14a59dd4571f2378c242756924e1841a5763b625d3bedb98f5cb78a2c81058f5655c7054c95465a465c96f2f91ebfaa46973cca2f1cfd6153fe85de863c9cabd2aa3f122d041fb81ddb318fa44843adf48d4f9856bb642ffc8356f03a01e5561f75b1659370988695e74f70dd9c5c86365ff849730256d306a96967e793b79a69b1a8e3804609d6adc757036a8707cda72a4ea0704b2fc78a81a92be9b9642473920bf2111678863e7fd1d4ab114b02ada11967debaacc9e49578e34009bff583aec7ef55c5ae172729a4203539d430396fcab513952b21a97424c9e62ec92ab03d29e0cb25892bcaa8b8883eaf712e8888a9c5532e164c74c67619ca16ad5e56aa8ce5d73a18862240a4be56a8188e28ea38b4a415953ef49a7dc251d02a6d81349c0eb738c2e2071523b3a06a6b6c7179eefd1151bc17136e5f4ccc166da15d4961dd0b6feefa432f903d7d0b7d501c9344e33d97844dd5a5e9b4e09543d482016f7e8c39a05e94df446fae709fecd8ed76402f75a7c11f79e0fe8cb9ec322443018b4b02effa6dccc286f3429fb3d79edbba5fa6e24aa6bd9c34b872a704af75378da60b0bc84d87c5c47ac59d89cc1b17f23c78ba0066db39bd1618f8befeb5afa71a3fceed9937806b5763d694428b9d799961cbe7fbc2ee4f91b729605b06d96678cb810779de54ef9b06f44c17f50da9951888d3b43e701c51675745440daea69a60f72ed7c7e78468a1f62bd0f09328734dcd17b62c5da5241a846306159aaeb7ad6ef40b90a8e1db823b1f93b25be58d34d4ec010795d82f18a3262f48c91c08bac087a8fe0bfab8d8a7fd338aeb71699c8760df6dd5fc17aa13bede07a6e4300182c6371d41a4cf0a4c39bee146585238d6b6460e894b8265cf1112e32f3f965efcc5923b8155fc2ca5a5b1286e81ac4669138ef7142550d55b2fa5fc00dcfaec341a4a495d98f88ae317174ea6085d414162fa9492ae4a4cf15364c738c03c09433e69ad2fae10290e50361dd298dde7d048e9d425b7904942708694a93614df5e8fac4f1368c305a5c11fdd9df538f35e1fa621a771f78ac1580d0e79acefdd8590b35f19f78f18289dbdfa34eb7fdefb9e70614fa3cb830480afca730c2749c0686322e8396c37398fe81e4603f46cf63bd1c2dc8427941b521ccbe391a696528093332db6af39a0eb0807d35986e2f0243e12cbea671cb6072fd227bb8d4f5fbab1f8b9437693504a49aa24f1a1eeb08ece1c9b998d0dfe4fb0b696f21ac4cfbae4dcff5a9a6b6f7d198de127734f00c8f1aa9d06f670fa4a566d881f0163bc3726cf57c64cdf632576e89ed0c2e14bb81348f14a0467a1f509ca7a29f8e749e182b17698ebc2e6a4a8ac39c436249556854e11e33860ddcc2519bd9c4237f251ec03a6190d857a38f65ee550f4da83a7b9286214134c06c8f380d85e1249c4cbcd274f5830defb63d7e38d7b232c1706cfb3485270fe530c25e7e2ae8015b75cf272ee4cee22ce22bfd6123b877e3a6a6adfb1a01a23855764056f426da355ef10d6e8fed3de2a07fbe0e906a274e010f768cd00f687cef9b8407ac00c4dee92b5d775920ec5c8b027b0662bb05e4141c60d4303ccf91aee86e92f89339e4b91cc2f6b579ddfa8a329a411e05062a8ab51eccb7aeee9e78dffb2c43551d115ccd8cdaf62526a64454d46c00edb64c109f2506eee6bb0b273e31776a8ab869894b7b1a8f5dc605e13883768d3311c5f80cc42ccc9efb82bdcb0b2e8d8b0c42d8fba954eb5ef954d589b8b559c2fbfa1455ef58f615ece36ff41c6fbc035318a1977c74ebf5b58994e4a97c8c561b1d8a48a979fdfba83a743e30f266036746588edd6fd56b46457a9c25b94436df80f1fcfef2415355312ccfc52d2a201b7032d855a2e00f9febe84a112e0d2e29aa8f2c8f4d27c5d637e79843c84b8ce75b1e4d4cc5e2c8129bc05188bc2f5350dc3e611f91b01d2f9caf4786eb18f7367c732db7d2227da188b58e21bece8f7d7d124c595ea61f4d3cf2cb8c0f7200e5662769e7f9cb1bcf3d2f983eb0ef28bc52d79cd758ed7b475e5ca6be4090cf791fa26d350d8ec66255c1d9866d4d6914e4d0b087236a14fb94c970a95efd17785c58499955ceb2f755052d50d043a2a9cbbd93bd920a743a3065beaef2d9c12d57aff8d57bc16b814e84595f85506170ec106a82c01df043dc804ebd7edaa1f0158d78290ed5a42cb0eeffdbb3994042c6c2c0ee92002c5856ae16c7906a1096bf282e78083910fec9cec5610d04aea9c90c21bf53e5e2c1c573b058fc3720ba9b7de8a9de4fe610a09205cf260991712365eb076a65b8793f4cc4a5de715dbf90bbb8e5b33eb87184ded1490509e9c24d3b9fd0272fde430328d5a1d0fa9cc44b4718122cec5a74584db6360cc03148b689bcc2cbc1ddec64c3e0df24433af8874dc7a8ef75b80ecbf8be65e2e035c06ee2244871fce7acbaeeea497a2a1d3011b1864ec559f49464b927973c348082fc948a6d1b2e1c264bfd266c2b98cf4233896267a3eb00765095b2915e7e1c525deae4af70f12107f22286457630047e074626fa314270d9ffda6edc2e516728a913b0f14a96e6d342be9c93bf6f6daffd776fce52df7b8e12dc85a8f84c938430b051422635d18558b5f05ecef57074ea955dbd0974ec7ef95c9a9420f821df4b5f51c5aed05a011d860eb1fdd3742e2b73b500c4d39ca0ebc341cc9993374ea828523e195de1f3b072824cc0f38c8aadcc9af6af42bfa843f91753850d8fcf4bcc60d8dadbda3678401c3f3df00c4e3e29666736b53ca611bfe693b6179a2ba731e6ded199cd0304c739c1a6580e6eb7403c73179f96a8d27f89855d936ec8f69e022e0de0f4df80017e386a19a64ed3bc403951c75b58ebde3013db7447baa5b9884fe1a4711959b2b870cd5acf3c1d0e7adef5b0d4efde39e73ce5272d1ee9d8001ed47fab35fd015775a5dd6892146bdd93339188b7e3c044613f2494a1eef113f44176dd63d76809f2b4cb40650dfe82fd8470e23274722f6d890e6e57b6114297442661dff41d2dba7eeecfb1b0658458d3d50ded07ecf3a56ef6d3990504d357a4d215119cb021bf443019283f80951f835f66936f16e90a257c65ef277ddb41b06c24bf682f420b018a94de04fccfa67597acd9b4413aec8480af9f6618e8c006e2d8deaea33f0cd3fa13c69b77c6f54f9dec11b0223c3089fd76d2b78c58b7b2e3aa15321ad7380dd957cc705cd83df80cf87861a216e3fba0ebca5681705b9a8292f0b57dbaee07f93535547567b0a3ef3278fc13034a06f5fbc7ed3e44e29f017e36655fcda7167d774dd22443fb80d87f71ed281871857fb9f16d5cb033dcc6133913508237ca240ba9932f40644fea664d90af4834001349dcc5adb8785732a29a2f15c6efcb9cddab9df9b89f656f6bcab2859675a922b95eaef5fa6efef14c2e8b81cf17fb4d3acf633dd9001d0e377b892c603de62772936c55a89f9dfac4335b07b5572170a08d9e760f82b6b6adb81296b2441d7a81c4ca33300eeee2e5503e4d9efaffbb2fe314c8aa6b38d7794af377b259cf29b58d0d268d9c0488b0a6887be7366e8b0bb84ecdeb11a73d90f50d29983440708844f8781f01f609587a4ae0dd2e4c28847ac5120eccb4d0e2358ac82c303d1f20cf9cf190a1823a1e84ff897b5c0d4e3201b632d23948a38a166e93537cb30967a2b762e8bf115f105cf671b9188142db0c48084e283843cb4f692aa1be5e2a55c0c7599adb125be14c1c2400fd6b162473b6b03546fb6607065d026d78b07cc6a4d98d373fb8770ef317c911c8f8306c11fecbfe084faa33661b62eab7afb284bb24518aa9c4892866fefc4035de4919a400930c7ee1836982a7bf850b54247e35c09bdd432122875db1ccd453733ecbae4f0de0a0bb305c1130bf7780be6f8fa4c3d12a9782cda24b03947486331f4f95f91aef4be4b1a052a90d2eb5747becbbe77eebc5603ec8a232beb878f55ff71b22d3368015e43b6fb64b7aa65792374476d689c5d7d9eb3c00c609a0fb55985ea80f83e4aeaab1aa5af56f6ac0383c8f279a23aa7140d7b3d00c8df063d76d57d9fb6dd6516010d031430ef49369979d57a218f62635c8bd64b97d445e751ee6d9bc4b9227b9f38beb196ab183d5a238a5a2d95d120600ac4c8744a54a6623b7086253e1b1879ff3cd9352363b397799e4a4d98743bfcc282e6e42d966c9a78f9390bfc6e2fd77fe6dd120f0fc3ce37fe79a571c53a86bc5241808e93ac5095c6ec040fe310fedc2015de56c511bced6d90b5c63fb83c319a414790dd23a8fa737c72451d87d1650e9c839544545c827ec1438c77cffd7c97593e32ba19880ca067cd0a531a6f98046017c2ee4160f9f2c12d402026baa866e3eaf9141427e76ecf4679f3472d740e7d4b3c7218ebe61c8d05434373fb2820ef614475bd5db6b462dd9c89d0968dc2bbc080462c3cef52b6446f4f4522dd14e9576f58bb08652d8c8f3938acb808f0b77af6f41cb928eeab0b3c687c161bd3a65efaf58442cf4b3bf1c2aeb2abd6fda22a40d39dc8df4cdc3213a6e034368b9d25e2a2be52ddc8cc5d11e8aed436baac3391324adec6aaa4f22b5cf669da8586a1463a993295fe25c207a969d64e0b93e9fe6bbd52316401c16797f41feee5d12d4ed81ced6f98734da3dd702efa6c294e0f41f10d51356674f02f81ddd942135accbb0f9ca05e3b13e17bc0c8fe79fddae4030e5aaeb6c7e9b1354214a1231cfee978e3b2ffc3ec22ab79e914dd396c222183574b0eeb3c7754207369d0a61eca03a120278dd92374e9d79b5983abf4607a499c782fa5f1bfff2f2a5dc4f8c39f8c6f7b317e3872614389bf0d8eadace89c9a3b0bf00c654191a64183ea859fc10861e2dae374cbcd6888c0b1ee4313cec12d0cff5ac4a650d2ec968f8a2e99339707643474f0a40c0b97aa5cc26490e40f326c12afc3a71837f59f3933ed36a70e6d049dcd2ef356d9f7b0d166832560b4788aa966ea54adb1b90bc3494ee2cdc2abc38460158908be67879a402cae52113f0a013a76e6712bd451d5edee8124cb765d60608ea6131cbc7def97587ee2b1929c67e1a8bb8b6660509c05576fa7bcfc2647354a911f7e68c75cb5a3a7dc7f8270049a158320d4a3695bd57c497f3d1f9c01770c121d07658f3cd63ab7f0a827ef614c0bb38ba2494d0f6a6d08e97f017a6e00134cb0699548dc625b385c7c4aa3a3b95d33a6916d641069bbefa40098456cf6c96b1dd60bb3621a3b0ec6e031d9c2817ba09d39eff6477eacc41fccc80ec48e404aba9db0cc730c68950b9182a9f009842f3f3c97186f93f902433c30f0ccfc6fb97260c2e2a8cf3098b51d021f42e59cb3e6e3249f442b7e43d4d1e480464b6f79975887a5bf4d79de5ab49d64b88fe29a1c7806d4f032a7c82f67f56f2c63d21065d703c50205f08533408af9a20ef4e7d90edb08ab44d02a9c074a3b24eb091710f160c3ad86ac9e5d3163ab12848911e24ff52aaa469d595c23c87c4625097f2a2411b0a840e566597b58d803d66322c223c464b631101a892f86d051f7b12b6cfc0169f9c00cdae686d29911cf504a3b5f243fb55b37be7b9a9168ca85911d966c782064a331cc4e10cfce96d5eed083489a6d6d68d724c406be7a7ee7d1375db37e188ee2eae2b293bfefef97966c485cdf64798749dfc68d65363d37ec3418026cdf5f3c1668236d9443fe1354063233d838b393a4701a92ebb0c51d9b3001ec52108111f69ba5dc24fdb63e463b6b4f698ecb062d8c1ca8c4be95f12c44f8b896c33269c485db9f2ee43ae0a7669877a6eeec423af8637929ef315b68351af6ad7621255f1d2a3f15bfd1e3e534cd161f649b924066c92caaeeeca509f0a2a509ef5cdc9168519fa09796c6db0de4b739c0be11a0d9ba3e2cc4f2f06396fff7f932844203d25c06c1d1933985ad5d04e94fefd4cf872c63ef08e1d557cb5e301b031cf0c8ce55c74428c366fa8966d9ec81a19db5f81d2e9f8fa13b3bbeabb7b0b7de6e36751e1c5c5c722a62f56d5a3380010fc3ad0266ae2a82bf6752daa31550f9c4aedc4d087245a0023b8cefcca8ff975871d03cb82c9ac0b6bd0dad08e37842f827e1ae1211748fe7deebd9f5e51c6bc5ceae342fa204a9922538e68b33be6be53a3281ba6ff3c10326358d87c2406c9b0216d77fa7f2a7d369459f058d91170ad9d31448733cf933a722a5e38c7848ca4cde759c706c0b9c623ef59ef614d8d546f902ceb22ae9ac4905e9c9b5e69dd62184bcf808b8a84ba1d10aa5e8e9993d842a1b5cf767a0a305809be3bd469cf9d598e8659a854e6e472a73e5e641639ce223122a17c355ba689fd48ed95a153699e85786e8ac28cb4651e82269f4a249c17abb7bda11df2a490a93f74e771f4445f440cce194cc15fd64dfe07f7540d029eef206a9582b69e3801ebb6ddcb62f9831bbba7fd08416433fabe80ed051e81e9a14079f2d4e4b11b75b5ac084b5e11321ee4a7a32e029b97f22dc784ae74051f0dc2c182a90bb055f4aa99587f74dbabba64dc9203155e310e0e03e33ce5c75bf3365e1233ac17c471ae67b8ad608e3035c00eb15b3c689895b05a6a498e52490d6cdc02d8f0ca204818430837d748f903f4e556435db879287d8fbac82b1b819c877e7130a5c1e9ae443101702da3c28d32badf2f00b6acffe1f3eafbcf3214703b056629e5128527ec3e9d3dcb2f09e37abbc2ad4e5e2d3e31ad11f52c51762ba141a44245c98146c2a6fccf06f99d01f7c1b3946e48ee8560059b501d8989654a61fd8eb1f00a8f6ba2353e46894bf7cdf1fd297273b7e8ff146299ee684014b87fab114619176b7e669053faee12cff87d023832f5262f63431de8fa1225f3049129c138de04874132aa219bcba27965ce99f748f6261d8b35a9026be574bac1e34fe1f0f230b2699a039a976fbaeda60152c9cd829ad3c06e794d594f9d33d03bb10816074e3f022d38c0ae3897f13bbd0ee5cd48c3f9fbf747702fef48fea7ce6f650c4c1e9b1a87e88d8a67fd5717ddd1fed97b466a8d9a234cf4ff2c2d62e2ce30ca384125fdb5680cae84fece1cb5ef24083a20357b68c935b5a9b1a9e4479430ab8ec1ffe971bd667a732d48512a6108890607f731acd6cee7193a24ea01238d67979c5cbd14b628a226de85ce375cf9b3ea708f48008a0add5aa18bcdb0d4e178c7da06824bbb0c9538fc3c00a2e0bf3143293378344d030173623f188508b1a468c8b802a41b46e0d1a47f651e51343b6c388db6856548efe71a599082f71708380aa3133f1358775aa80f62dad57020676c1ffd49a0665ba42303b15153ef87afd47ec567dc4537ba2045fdaa15a86ff8ca1e9abf7f66f17ad1c2455133b74d96a787a4964789f248fb7d09e6fc896e648d8a411108c79cb028e7b1d8fe5bfcbddc46c2fe6f94aedf57a4c165de125785f42d645f5bef4fddb96de84813a0be82a09cfa929fb5beff65909edfbb72fbe26cfa64c5bc9c05de2bed5285bf7f28ca99b78d80e6644abc1b54068c2de3b3e54829ec90729f76d4c5d30f41d35136b951b63af8c62d4ea1e55230c7e5a6000b578ac000e73ce4e08ac0972c375c9a1a2578cc537ff505f8449c1a22b7d3680ba4a26f92822eed65be92d92d8f9a964de2db737bab9053cf5b0ba487a139719c0a223baf059af7780b74680764fd0c68b176ef62bf1b6a516f66d3f1384250b097eef4fede36be422c436de2067dd4bc207a4d13b252b805fb74b22cf1d724c3d751c583e269b96862aa08654fb28c0b03c5bd068e2b4e76338ddf4fc45b127f58c44c632fc9cbaaacfe0fac0d146789a4a86ca8e39a72617b1b1c6e6676b1768689ae4951e6819ca63f8a3eaaf5451fddcb4f081dc59b3eeb341c387c8e601e5769bf35e6706d61f993ef4eddcabc59179d1d7eec195ee2cc2d907e766ed621426a8eb5e9d033c19562d847fd9f8525e9e85d5f730df3abc0a3392ecbcf15076d580799b2fd996f4bf36a2322db4764e3cec5c8f816f4bddba0a82c8c616ccec1752f1147f10c0d916f97d8707bb02ada10ca144cafb126ddaf47255619da9d035d59bd0ea639e88e2752fde3ca2bef0420aa600b85cc28e245c6baa0eeea83270f4f51ab10e3bc849330dd79e6f32944bf930faf4fc02cc24e6deee139658b4cafe29473c82bafbd036e7791dee1dfe2d3d0e0811c1483715ceb8100c603f7b2403f9a9b229a31b32e5ba22cb81878b57d692b9c08c76517e29c9bc231a4aa656d8bb1f5cf09242b263b3e93f8d18d6ac058b33d67d9aa960e3c8a1b47c39bc694bd1634721d89910e1ecd81bf100288a3db4a9d7ea577d4657cdeaaaae634f364ee1c345d7430bba6ce3032ab04b91750379a196617bf3af95a2b089bc9977f7e45566612e77db42334516ae3582a5bc929342b46250a3884711ec312300938c4520037048db39c0803d25cadbe8652287c65bf6427a12aa563f9c7f6a4b135de8e4752efe32631d8ba1f3615937acffd24a14d64c50afa90359d1c47b43c63c196251c1943ce49dad204c19d110327e88aa1e1d889da351a1fa91d0279c4642f30875052b7304d3a63141f8612f43bc23564f3403e797407a8c101a1403188d391e16ff591da70718ca97a08f5d742e4664e4226b1c2c410e002e419d4884a12e3df292233fbd892fe147c8a6455f49d15aa704234144ebbf11dd5964395fc6e895c79362c7488d2f482cef3f875b1823928a890bd2f57df4c5a3cfdbc2c8c42d8b4aa2b6183f013aee0df780b6e87b47db683816070b73bfe06de79e67ae9b31c993c66d3150588e89e1e50647d20629c3de567ee7ef738b302e9cdd188cc3991d10ce3e3073336923653fbda73bce5b9047e9283a6b56fbe3f5268c5232ec5dcedfa6a6de3494aceed68a0a82d33b81a4b1c19c90025c8262f2bbcdda8ad15d6a68e700522d044a42f04087ae6d662659ecb9d83c0aecf18623f61a47bd9fb1128cfa9fb54f204f7453de8151d0ecfd434319ab415389b718bc1474d276ba0bbe66aa47b8fa5dfce4e44d6116004cdc62598d5dc6a795ebcf73b0887e1d4499f0887823a7f98e8454da5d5b383060140bb7f4a1f4ee0b328d6bf7de91d20ee9ea4234b59b569e815d797b8892eb40367dda2361965bed45825bd77b9b5d4329752c91c3f93237e16bf7679aa8dbcd9e2b67dc68d393a496f6bc699954b80c24c2e4f30c1a309525acc0c580b4f80cd99de4cd71f4864b2e48907869a71cf2d6b00d8db163a94990841f023e36832c0927ca825b54feadc5e2871c3f68f880e89a1769dfcb7ce58726d561f5810d2ec16b4b7f018476fa01a1ea0316cd051af32d983a5b2d67db31fbfe90a59d3553827090a4bd032bbefc526f356d1f2d7281b97752c06cd88b56da2b57aa81ea589bffa6ca3d4c94784e851a2e3296b239691b6bf42b6b86324190c598da77cf265095560b84de874ea181e8497d03582dfa0ba9ea6bc571f91750e8840aca2ceeba8ce0a46699edc0112dd70a78d11180b9cb00776dabfa08668464d1d6fb757ac6bcf735581676774eba0f15dcbe9fc592aebfc80a7c37e4bddb53c5a2db47799938ad7f079ffe55b79c5293600bd373cd85ffbb3b59cc3dfdec4123a5e9cabbd2223461f2933ed6981fe623301b30f98c88f8a2d33ef545afd633c29f5078c6fd4bb41f5d31b68420f58c004b01c5a06925bbb6c6e5c83b112a980b6c74691551bbb375125d78c0665a33f9731e11a3de5b61af2efdb678d835e806eb56f2a7d790acb0272e99ea9b0114e47572177e88874111026c9ce30f47d932c803ad71922b643f45f7b5124c1fbcde1dd68f34cec58e97fbabc18f7745f2bf1662ccdd630ba4b202b873356121b6513c28ea42c151a7a4474a78926ed91f7edd34964c106b3f513abc08bf0728d8679dd38b5ade1510174dcfc5b6606d77cd6557db21d829db5a117aac6fdb85e21fa25b265014df7f92f9250358bb9d99795d4e3bd9e11feee0d2f681550ebc0b9ab19e68380a8211b88a19bfe4781d23d1c5b51b0788197ee0b0bfe77459850dea5e4ffabffcc0ed313b7c008f0bf5ac9fa515870243a9bef8bf04a66d57d0f8304fa178a2c97919f9d208d0688c7d65f7635c5a6b5a16c166afbe59862147baa9db4b1fa761a71517176555826d6566206e92afec416cfd1b4b1f99798eea2d18085c2d4a98ba8ae01c9f1bf2a3693d82140e1492aa42e2dafaa4f06279eaf572ff4774437c26a7f2b3d5dbb964ad2cf6aacf2f704fba5996d95e2d99a0eac696e34d66c78ef939af0d00e56d9faaf7911fef5ff08262721acec53d59175f2bb257f404d242af036aa4f5b2e0e79eae43e044275a1e4cca73bf1855e22a37f8e86339bbf5bea3ee3d34621aeb2423f7a317e46d1557b37a650f833bd46b08512035791f36057d020f31422f54c7911de39bdfa5e0746ebba28c683496f40f77e04b04533ed4931b8f18c263f969e6908cf0149c17b66a46f724c2f7822fb87c7227c2bfc327569d8cd7ca5611ba9ce6ec52582caf26949fee319abbc69dfa6c1cf31929ca128f59058de375e9f383a457a8c1a7b0ec13b6bd8cb4ebd29ea6cd405838a9129340af46aa2e8169735e0ee2257ea842c3249ba61114e734f52f9e597bb356b1cf1f436d9d08ea9d0ad6ed2dec5478c0bb81eb6048744cfa1b54db2fb1d49737d28fb18e36d812babaf57462e49b888226a8f6923c0bb622c0c73bd14f2c25f31ad361fbfa95ba5854511b79e5a6b447d51ee54d19c460736080b96152e212f6e7c984af8db39fc00a9dffa4d50331fa9416abcaf43ae18ff1d7038f2acddd39adfe6eed0f320a73dbe58af16e359193fa9289fd8ed3e12a2677cf016be1ebb53120792238f0c39e562b19b3a97a1102cb61c3fca3af0e85d285bd01dc78ad887f23de4a5ede0fb04f85f4df70060bc83adb0fb2b0bec096968df55970005cdf989dd2ce7f2a5b5e3a9dd766c177897c67a6d846a4459c81ed699d65b8a9eb9c7f3bafb70445e583f28f2e084170a24dc1277ef11369c7a0f0342423d386782e135468a0ebf4e559e127e1975e524b7193022db4199bdabf3ac6a31cd0ddf312f1aedd78a5e5358a4d770ae4d4b42fbba5dbb2f3c680228ef49bc707c2bbe502d45bb657b95034df4007749939a2b44aad26fe59be843b136b5e46e1ea9906695277a5986ffe758042bb3c812b24d396eec384ee2e66216af500a6e47359b7a5d3ae6a59f7c970662279feaf2f874b60130693c613120d27140b8a887b78db0ea69a66e7a67fcebc84bd83b0b30b4f9ce20ecd80ad2fc12ffcc3e55a313fdd06a832d00f91ecaf949384131c50ce83d4e0d0bd94e0f2536be16f7f2ded88e013e5c63fb22bb44d7396c05c50f0f78d7852c828aba3241c85d193787d26132446ccc9110dfb3d880ddba4bbf184deed21e19bd9503b39f3ec87d80eb3fc8331b2a329317d64797a865a4eefcb081ce6b4183804b5511d5d0110de21057e8912958b038ac8e17eaef33de65069224d3c1cf51b969fffc6008b32633323df30014376404531c130ec937fa1f2370b8411faadea4998e2e898db5452741b7540440be96d499ddcee61eef78c89c8a26582dbd1e5cdbad3849d6b50ac4d3cdc9c3c6da3c976e1fb58b2b5f9eedfb0c0f317e948034abc244065442aab657de2603dbcdd333550074c098cda9f18b6921fd3665ae98a1a7802d3b29332d0366e4f5bd3e6d29202f17041500e4cb13866ab7bf4c429526f32082f6e744004c5b10a5c60c7e52382b4f2800a5d380f93b24f36b54c3c9f6ce486ed62883e317a3e85229c3412dada347861daf7a0c41a263ca8c361defd5a081e5f17ec6001cee4319d7cf20ffe4b8b68dedb24bc1d0b2f180bab8865e7d1e4286b85b4a335b08faf8efe79b7c47dadfa72d0c3927cb76a6745c2b2e5724e8fbe410e2d88647227ee6642b0f420d1966c8b1f4c2b5939249f93dabd86fbf959d3a4078048b50fdc65d520a0b89c8dcb3a3c4b001284ecc999dfd659f7531e5bc6ca0c84c68ea575a806fe3abaedba7330d67aeb8e0953110dbd1ad342127572183e7a61ca2e94c14c48e34840e10de948207b2fd6b6a3af38d0d485ebf0ea4bd36c72404ee2020e3e0659920359a6ef75ee38bea8b634de2de64124d50697268c7b16ed43ccb512b63612f9f1b70f2ca195376cf7707a6d5907d92d88f0d683770f67a67b783c82078c11dfd661492d32b1cb5623919b06b5aed5084e479b4bc23c68c4ecc99f104263fbe3b5e30236180bcca07655ba7a4db8a0244b0f3e600f13f67df885600a8c61493ea9033115ecd84622e6edb70a5079999742cfe7e556144bf7604ded2c46d58798e0860e2552ad6c73409d72a3a8637e067e6e587cf3e6f19d8d56a72a5fcef5d7b570ab7b00bfb3f09059ef719ab942fc24ce1a0489eb1ea138cbe692785e00d5873c412e32f0b337ad2fe2f332f24c87a5b79c2c7728bd4ade520d04cb1a373212d57a93172da50ece14b28162f5286f02e4744089f982c1ce05c1afd02fb061e4eec234d6edf066de9635ec36f4e62f8ee9b3d85196f468964688fa96916b0fc03aff7823e979855195efd1a3ac3eefb57ec70641077e35c05a7c741c2d778161808ac0b79cb9c4f19f45bc3e9f3913df677bf0916b37719605ab74194d020c69f667ba727775df75a4ef44be7f99616ebbece73a53fe2570d05a456bad86a1477a0bf924bd25613416084e2a709f49bb53c0ea4baf9dc4b3f3c9633c6f59665d8d790f266be23d41707d582d0179b13cd12ec4eee191bd4b575423339b771c7423e7485ba6e1bbb054e2a5a2ed84786381b7b79d8f946407343ae6a8181880ba952d9b447e87ed7987eda0c5ca92beb953f0997f9d436b87f8cd94efd251dac992651089d189af5ec9b118c88fb5548326eb9b652867ccdf9c933849ab378fb80b1c6ae71969198b3a439c3c62415fe5d767f55b086750962d39afa89e4c1341a681081f4a71a677aac46bb1ad03080014e6a896b0666e797a626e883dc0e824d3b3c326b703a5c3608fc2c8c682226a037227427960fc661cfe7f6a8dffd4551c82ce5689b9fcee42ddf029591e7c309aa5b0f29febff231c6ec0f1b169e4f7f8ee50afa1bac08327966d9e98a6dd8f1d69fc6292efb9d3ecda6785eddb2953ab1f04c62a9cbac9edbeffe9c3dee0623561d1c90520d7f99e97db348c2794764fa3b4cb8944d83c4073e45eba0b6a46be880957bdaccaac6e6a9b1c61e3068d425d441a3e4a14a3098ebffb39b2e1816ef718232b74c84c27d8c11bf559f76823ecd111266459c5e72d843a29f25962c830783f55e727df0428d35e46ceb7e2147d907ef5d7e09f9df158954d23c1c36831522f179ed887d0855e80a8eb626e441253e1cf07906da874f489bb8dde3b7b4c4ce3829550ec60e2fb488dfa1ed6a346ac27049d8bee310c10491ab941c7b7419672891a714feec881d1f201602ad470c6ab43604923b932ccf7de5a1983ae8504ff000183235c7e1d226c1e5d2ff8ec6092b6cb9a521f762326d65e5d3d6f58f4dbf364eecc9f3335da3c8f8e08ccd7da0717c20a0ddee705118e4a3689eaa23f77b0190438ff5694b8463879381fe75bb288f72e0ee552ff46c6d88f1c44026a56a8b52e21604b7ad2675b3e45996a27912ee96d640c7c5305d290d7455f52182f7d8058b787003fd00d4bc150afa8962a5529a28cf4d2504803a4d4ad0e053946476a164d6c0502e925eb2225a7b9c5e7298d4714af7db8e1a89d61570f41ab44d8c125d1ae15d4c2e2e26ed5e40abf1b653183d843d3e13560ed1de218677e03801348d938bd7e48e96118f8f12af077aa0302598dfa2a00976a70f27ea926a981b2c8e9ef3b939286506fd927406d03d48b55a974f437c5bd4c7652baeb32b3d2fb55c72cce128cdd983fdea88cc22b25edf2620f11e996fcb636914a924c6f92ff2af18c653bc9983b67fc4c274707541b68596df3b34d61bcb1649d0c9128605d570800bebb12c3ea3504aa2540cd87440dd428266aaa3bd398717b65e16b401f826862cc6c0c3e80dd916fbb3cbd9e259f7da83f1bd5f0c1aa18268eff92498b8808962f003ba76e9576d0b73fb845471aa57b7259a5264a675f933867046537ce14e207126041f112d518adafaea371da31d76c3526e3cb5a6aa5ad1bd3ca2a94b2549a837075f36160ec1951f3d33da36705274e1d1333e9f15a831ee5b572e381684e5dc535fb21283d38bfb2cdc15c514b4ae78ce625983f43d880cbac8a49932c2d6916da0b6ec76d802d8a8aa21c10275972076ab145fdd473d1d328fead9519b140ab7e9b4f6c2944e62e69a17f00d7bb502f7c075a53906d17060f5692bbd147cc1bce606a5bd4584cd673fe419cb9556cc5c639d1c64867db87e68244734fb34bf0e68b26ebc63a74e659377a8dcfd9a19c61e2322a694df928bd8d7c5f0489cae5bc162435baf7f4c7d89d9693896a2f4feb2dd8e569ed240e2405cef75bbc2e8f3b8e6b76db1d42f300d5b47857b2c68a29901a11637b9dbc98c7341056428d89b3f610f5dd53e2d1a0828ca585d1625738f28573132c07542ce05f120fa41a1ea9346ad807bec0d6f265ae05107173d4f1c5d73fa0cb9d5499c6eaade122f3e093892e9baa3ab651bff37d122497e758cfd4dcf3f5cc57f880fea6ddd6de91e1b89970148bfe8df0cf0143d4e90e5e3b134396cf490ecae2d65113ab8053a8e7e61bebaff0401540ecb0235dc2b5cec6a6182dab5a73712be59ca10401ff42e5e26b20e23527a85f5625fbfa6bc38a98e1116ee39a59f81c701298cdad2a80b182c9bd01229b3aa11b3ddfc388d83ebbad7092a5108af367dffb9efcfe6cfb166d566071c5a38782e6f4ae3287bf15bed078dc0203884cbf4c97f0f3fe758b710784bd1e3b3ab1a060090eec7b3842f6a9c419c4b54f59d7342bc236fee151f4a586a39a66922ddfe3e27ff0114b88cd5abe416de21ca905b26016251b63844bd2735795475c993780944a3dbbb246e04126aac6e5ca4f5986a38476f4006f0c828836b6005caed51d137166867b474202b5105135678929bdd1f2e8453e7ca5add17d67596ede5c15b9d923ad01a3fc695c01b26e66cce0e9c15fe852b79913366207d7077ec40679cd0641d6d203fe9a333bd1ec940ee058f821ad7a7c43f31fba92fe8efb09d3588492b8f25f3c01d4ce324b7ad4db8d77c8906f5cace55c606a3ab58fedd40121216658ca9b65e8650fef582970e92e139b0e200e3e5eae0ed102c3d78fb98b56a39640ad7a4b1d1bb05b3eafa18c5c79378f9f1d5724b80d83093e5abca3e7b81a62b73c6c5fa56a86239098312d4ad1c3e125a03baa73e42b500a590c7957b61f4065b906c6f60ac215bc1d774c360318710d9de88418b00e7f9c0892c7fe02b3beb843e9bf3c9bff7a8d8b023d4eb21184330d432c63c5c859e353136fb65b155d44ac7442b2248c036d669883a22d1417c1a7d17c63fb31b4cb27425727ebb4b81ebb0d634c1b783544604f2c1599ee9d1f6b85de074d2c68f6f72a00ae9372c60e1933d2e00a5cd02058c1093bac1d12248ba1619a4faf2eb64a0ea7e91ab7a12c1d85936c640cefb97bd033c77cd96f14cb4b811025ac0e6c8a35343bcb6c34378036c1a17680fd0343f15f206408a951e6d3e10db9797e938e54a3980facf7469c7f80bd688590dd072e570b15c9a2a4756afe5e75e5a5b9ecda6a195e24bbf5b34b578ae698ada57c7fcad4714ce7a0b973bea4da5f5c09ee15718beaf9800d7608de5dc354414d76a3dc1ba116cb5e309cf24ba744e0b3ec43e69e977ef1a7ed3524dd19a7ccbe490f90052efe62105083c6896fe440168cc788237a95f311e218f49491f2f0d19628e6f05bdf2512d33ee4c357e200aa8c08ce5f7397fcd687b4cbddbef50d0b8870c3af66a0c269ebb18498e0deac4969d002978a6c78fdda43064b72ea345934ad1f7f62b4dac5eba41a590d7e2318e5951c1f99e886780af7a5917c2daf2ba3cff71f254d32c19a73d35cfda6507d7bb5b06e53f12c875554dceb1d2d92bd31379899505e846f91946ec74638f59ba7f30583a2536f094e1cb9e91c172225511f255a4362729951868a397f1038d4f2dab68359b9c344ee43f9c7b430c66ee88bc77e36bb1eb0a7b9f720c5884ce37b130c77f69ca2e57bd1a6b2a0105fe1d52d0a5b3e340c9db3938c9ecaf98f431f61d7e5bd38eb3da308d4c9b1e299ad87b3d4d760917cfe2331cb292b3ccfb805ae8bf94239c5f655afe3285cdc09141090f5d323653bc06e39d75c220c9073a6bb9a68dca8baf4a6ad04826062ad5a149c050e8463bbc96940703ed0c871e1143dbd28eaa562ed18f82ff836191ef23be41e45c81301f14077e7dd2d395ffb55cb88d69b0380b81cafe00f21f1b5e2765301f7834485357db4459cc5bb1a04b6b20661276c29e5961398e2ebe55689cf597e81dbd095b173e253be02385c1f294d5283413bc0099f93f30b065d91ba4e24685481cb0f289fae1d6c2157f4d0ab2bedd0c840b4ec009049fa7d430beadc5fb351b8130a280b0e749fbb1d191a5324e2b3d1b8f2d21ed2f3a86d1a5b7de1ea0ee0b7ed33bd02339aad01e11ecee8a9d45dde717b968aba0583ea7cfcc35babd509999326591cd169c24badeb9c488f3d4e329a27e44a1e36d59b101993aef79347f18fd28023943b5c5d917fb0e308b2f0a77ab01149e39fee21a588ff24d28d3a0d443b1f5c4994947d8d278a00301f599024fa57d29539ec04431c673910897d88ba7fa152722d143c165798e195e32f2d71fd85675ee50a18a5ee1bd288f0783005a86018fc50b8b3e302b4f69be7d54f207664b7fabbd3dddd59cd5fe346b967a580f33ff5161da6a3d15221f014d969f76585af85e180fee073baf41895921b17264257d10ee2f91a17e123ee378a9b022169c1b7463ad3c82c3a1fd8a4b66c9fede5bc7531d7e98521fb5681f28aa7a9551be329edebb10e884e904a17fa6ab130392060bdec96686bee019ee008fc59443c12dde5789a188ef9844a151821ae5aff79700c552548f0a5aaa0d27b50368015a9288fb69dd2eb7ce0aef3787988e6530870631c1a90c41f4d5545a331eadaf038d0a219a03f14195605c7d85c22a57f119bd5bca9a78a1caaa0d467f3436a65e798684f454055433fa6362737782ef152b8026947aba38e43bfc9afcf2771aa1a9d01722ee7426b562ea65338dd5a765ae8c77f461101fb569e917fcd5882fd1069f630d47065fd9dcfe0f00003611647e76d05455275039c6ae12cfc345f3f361bc2e4a1b0796572a7ba6cfad55947fb40c1ac7646f06d864022b69f2b0839e5aaa93b9d2637591a7958ece77137a7598ad22394305e6d82f1bcb18ba6a241a9285dda5f2c810d5118e1dea21a70341ab5597666b3166508fa645dda4eb3d9b5d0cd5cb60fff6b49e4c81f4a4397b370e1e698ef144d80708555c79283c47f9fb501679f40192eced76dc9276c8714e26b5cbc76a19de7a4903fa68d850518e39031a3b42c715d53850f5143fec162e62ef8a98ff59e488ae930f0d17cc8d0e8be15b0568c7c1ab1c5c8d84eff5abbd7f8cd66dc94ec9ae846a25829e555ffe68e47409446ea039ca42854f3f32ffbbda08cac846ba2a9200f551edffdc16c4c563e416ec5ee079b38c63ca39aa18df4802ecb05604431f8cf26223da64e488efe283c20ffd91e835b359f9d219458eb858243b16d0a0138181691c234b3a473813eb681c6da441066b5f13cf7edba7da2e461fe7af4a1d8278b976b7a3413c50cc79a75f522e99f92d42b83c2b1c12739f7e36e8a906f50711d074311baed736f4c061bf74fba453f07bc88535c227549be1ecd8815d8a31f382cfac18e907f6e539aa6f7ee4b85acad9a660293c6aeffd17eae6eb008e5831ae0f678fd7412684a36f47315eb29f560d9eb399d0bc81ad62a7153cb1f05b3ae8d2ddc1fdf66d98f36dc6e2344c5c54ef28c853a0be392c48a6b869ed2a46222355e9636fd14bc61a88fff69f21551a49d68c4a5d97967cd0833d6d7d7ff79d09d1948c04ae96528eb2d79a01b5bffe7649428eeeb895c00c803998c3152c52f8cf741a90cf98cb24a610c9073a0339a6e9697ffe7ccea289bebfd800db5296947b5c2e30f9a1103369bd90848c53227baeccbeb6fb6646f97d4226d963b103075afcd0517d3bf2482174056c1e44e2c0b273a995121c9a0e17ea976a7ced848fdbe312bd58401858ae2aef6163f06fe8defdc0d22dc188420b2f7b5b872e00c6441c4f8cede95ce48f719a578252d8d4fc6d809ec4bb90b24d3bcfa8fcfa2687bcc21338a31429190bcd41074d836dd7a4d832db9ccf6f31759e72596c75df6537ffc593db012974087f28720f4c0a56486fe1f3cdb7c46f2f44e360e9f9cb07fff73c4c88b56d681bcc40f89b83d240fe13c8e1f2de6c4649c9a0b86cd8d558b14e9440aad918dd5f37f1009ea9c8bd0a7e11874b1ceb2eb86d04a6606471b0cd986f26dc0199acdc28f2d23b2fca4070d2f5812a57f5bca246a35fd7968983771e23626be7e6173a37a36cf9bff9687f46b4b652ebd9c200dcd1e92222c82a1a36360a554fee74e8857b38e30c7d540d74479526b422151c92f379a478b7096bdc047e991aa93accac1c668d63cb1c0e35b272d515e9b07dfe2d78288b7ed3b264285c452d942e74c1f7444ce428780110acecd485ac2e9f1353662c421344ae5af6dadcaeec03c31d701701e9005ec64d6e8e2c99f08f67e25d91e62af0354124af777526cc64ad4284035a4d7511762870f330746bc78390a6b666ac43ebbd33f3cbeafa49747d37c3aebc722e6ce05d9745dada50703827ca104057325a570c3bace72bda114c1318cd4b3920a40ac4ef8338d54ffd20f319ae99f05625be309f253d21e130a6d0fdd56c7c802b31cd481be822ebba1a2f9cf8627a350cb41e7450667bb7c14720cf5399d73becd0223a8e651bd12a8cf13cbe79ca6b4b27c3aad69a4fe8e38cbaee723e6578dd7215c93710196aaffe43dd81137fc769e2b4407e6c1c0df719f7e7e8db5f7af3af47f530b6a6e14d337660fa35da7c87032c46de691f52667fa854cd89aa02f1018c4855974ce1c18c2faf61d0799d20d14c7da3abbe86386c5e5e76916fb2b40fa764d59e47bf02d3968813ddb2aef8dfc08b3d6a8e65216d6dbcb6097cdf1f5244aa066483f8d87cb3c433f7b9a744a514b64691e80ed87dd50a104549de276c3b9114e7c83399f4d14e98a5f0ed96f5d96b12c6151d87549def2ae69441e305f306ed89f7bcfbfe9b68b5c27a881f72f9b817d347b3c959f7a5396e34c3aa3c68c266ed277fef0ed88c9ef4ba21bf66b3ff3908a38a064d8b132fcca71f87955ac0b594d86449a4768a340dd5e5dc78eada730961e7b614643b8b2de7cd2627d288a35faef6492fd08b3b436af11aa637ca01a4b2e96cc7311039abacbf1de5ce282ef929dbe71377a155b6e32072a4372d489ac53ac9544dd8838b9903aa2cc9c090a038092cb6f5d1cd25596271e2d7bb024c689c0ec8ac48fdf69ad2124637a1e852734c1d5f1a0ca5f060383649437ab4e52212f704133fabe87a44a539256de63b9a03a70a921f2fda4e50c3003ea4970846388803320ae79db1dbec32bdab2e5a0cb6c5dda413dcae6c233dce8aaadbd1db7a4bd7e85fd43ae7f6452b32561a2f1175f60374816173b6825d41007851c8a2b1965b41cc2d45d974cdcfd8f932282649bbdab39038089468299a7f293d650bd31df6757a71b55cae722f70375f63ab2295b5bcf528b36d49578ed23189eab31a5c6c56c2aba2df897efcb975494b0c56fd3c9e431f4c27c99949fc5f31d62d1d459b51e884bef9c49992d41e9141550b8fbf64bef096e62dea58ee2efb8b0d3a3d5c5b0209e86e90198f049cc262716157fad4972e149f96cc47c75735c5435ce88cba73bf31fcd74b45c48d89526738149cf66054a99501f4eabbd055ec8410698c0e33594eb1dc4b05188085c8f5288f36fdc0397b0aa23957570af8196288eb7dfcde0d77b2cae62972a6daa86214e22a64dc0a503e3bdc7d481ffb009286e494bcdb7f532167c862b7b93046f492282afb87a5d2247231f78086253a9747fb68495c42d88ef4abb41cca7397bfc060d29c36bd35026c84d5b7f9adfa4859873dc484af50f95829ef4cd4d7818db5a177d925b9c7f2ba457e276c7800e1bf7eff9ea36a49a62bca8db304c6ed1f5943784179ebf91daede0d540bca612c752fe2ccfde206e8b8da99e20cb5798bae1ac6b2bd649f2f270c38ef3bc155364ed83e4dfc5d56f40d97ede15629d1cb4cf369ddcbf20dd895d12688e66ef92e7ae574aec6ffbdf7fc2c90856a49053a78d8ea486cd797b8969d8d192522b224b7d86e22166d44716e34344bad363bc987c662c55835e4e1c16271b613f6822a06bfbb2913002879011b14ccfb4706b464d8f0905edb4f155905b2130c2cc7e144ce6141e53b665fdb350196dc459c5ed0ffb3a5663350d2017422b9ec3ed2c37031933719eacb4c0531723361b9ff1eb66e8a6c1afda60ddbfc9393f88197639394ea1c2fd8f370a8c72a4a1d645b5dd1febcb9e660208d1b93a98ed51635764be6b484572cf7a9c65827f2b7a242be0873ddc42b47fe7688f5b60e55ae8805b861ed3e2dfd1fd260933731ffeaadcb86b4066faf0ceff368c45a6f396f13f88af8da2f6770c970be58ae765546fb5bb5031266eac03cc99952c1e7259dd2c740bb8afa8ee2081d35dffe9c6df0de5af71ff1c521aba8e893662f9933234c01594b3fe9761147f3fd94312f523b7a7db5402fa36c0e7109fcb49666d567b36ea25f4fb4265e0aa452fafe2df8efc9e8429099bdc64a529f97e98c5fcf717100c4a0f5cc74a20fe368f095bb16c0a1d5350e611796618d8ed084f2056a80364cdcceb9d15490d57e00760a3766e528962adb2ff57fd51ed213b261529dfa0f1c38d34554860ff2e00647c3de69685fd34d8044d89ff5338d009c8179d99623daf526e78c06c1830e2dee0dd3d0b1136217d1d8f46db62fab84f7842ed6ac6b64a77e816571702560098a0c435388a54c96d0843b672bf37c79c15738c6c14defdfcc684315e0be2928631de01e66bae68b7c4f96f3a54fc609a7c9a8d2ef1fab40d6676412ec8c58be6a123350682b080fcfcefc2a39917609002b5b3464bfd466afa9968823a88d69b60930111c8c662070a621d97c5f1763f5302c534ed8c1d3b933fa6c9601570e737de361505d660323271e3cb6577909dfaad0b85351f5b8cea155654bd9a7d682b89923a9a1b2b404998ff3daefa2cdd0c9fea96005492a0a995127fbb10fe517ac09fc2b2c19f9fb47891d4c58fcd4a58a80de461c11d33f7e07c7a7d5eb09d860554ed99e29e632a7e2c017050ed0d8184d705d524d0fad37cccb0c12f85620cf0ab14a5a312fde28ffffb6349a4ef56ae400ab5db433f3f642c519aade076d4aa328405f42eba17ae34377ac8a0a2897b60cf4e9c3ad2c0fd21713a0a68e5b3a566c55c506603bf9ee3e6836619acc425e4f173d77c4d76045aaabe2af4645ae1f359e40e92801f79cee495851d602787eac38747b98d8a48b08beaf27673938da69f1eb2285c60ed24a8e24f0fa2208f16a35495e76dc08fed38b356141fdbd6b00d9af96239b8ae76f1f4c6a6625d3c12c962927491ffc4a610e433535995b775b2431bc2d923fdffa4bbbe292eb4e2ef1db8ea53b5a8b76aa1f052e26d6a08a290b9accd84d54bbc9ad8e2622b454fbf8c885b35a5b5b90dd9910e4ba291fe533dacf048c53e3e3a2ed87c4b5ba3c08be348285febebecebd9cbd82d59d8ee69bfa88b5beb60983b928d4fb7d502c2845dbfe4a4f200be4adfb5fac75595dcdd0c790bcf37d6522ea0b8ab1515396fd2a975873dc6b4f62bf3eb89d9f5d64c7a2851069a67a633d7be04b13d636833e2d591443b83a0fbc4a650a209091b33b7e43743d469829bcf8d72f1cf409725ffc1c587aacb10257ac1b840237f92ca9ea76322fe5deb134d2c88b275801f430066a9536c298a8493a3fed1b7c78bc97e083dff796b760e396d3f2a529634da59dbe426c124a7e894930a6e05a83ccc382754a8f5543493233dc8d3c4a25396fedbd33ea2892c9abede2c6693e3e9dae83a4d84e4eeaeb2b8a298b880f742cbe98aa5edfc9f4a1f9418ec8eeb34b7289a98c322d71d81ea873d45ab70586d7d7014ae9cc6988d8ec2b0df4fa07b745c4183f4e81dd3da750b05656296c7d28f78ee671b16a37ea78c1092e322224adfbfbb39121c471fdeab4c1216a8784d0ac9e53eefa862f9196d714c989e8e09d223ade89d58ea471e8d8bc352b313d5aea9e84306d40d79c4694ac20d4757c3282dc1b6c5901088bc41463da3a71bad56e8245976a909f2964c4d4e601e4e397ede49e8cca9c2cb35ca5f9ae726b97b78d4b46b4a0021809ddd445267410563bd4872a9835c8a1e9297dcc1f930e6523a33e84a78fe9770d2fd818fa3ecc6368e2457c8dfeb5cdf47c55f874d80c0e0e903f9233f4b56b6613860013df01ad18e94f84a625be0ca113297af3ea36b539b0fbb217e51fcdf494bef12840f4544bdb70c12c3759a1b332f6237d7b20e0cd100d2402f86c6e50e4f53e0472776661ca79ef2d2f2b64cc6ed36e61777c68b4cbef14f97e75f709e6f6208eab16c4c6bd7acb691b610cc9b5c9421550ac94624ec3c852f32d29fc43a5219fde5bebfc9770957168f8657fd0b2481b76f3c65806d9c7a732dc9b3d51f2ef8ca917ab4b3e8f3fdffb90b9eff9d4a1fd2df5ac7226c3b0d9a92ea9023c37be91b8f6acb203809ba45d17868b9f411f5811979afb82aa20a4c14711e2eed75586deea0c16e4d6d747bcbc1c216e833d8865a84f3bcf8021d46401aa5f022d668da7e402b47a39853e6919213b5f5a5df60d336de9951e933944fe58fff1d574057a3f515299ee79bff392db95e5c2b410aa19e4eb1a1f4ad003cab4c5888f59a16531cb9f62a90474550442b128e28b41cfdab02a153665a336900003ada0305ca63193726b563c8c546adf2d74a8a8fd8efb9a94a477b57b5110f03669c5fafe569e6ec243c0551582e7c73aeedad79564101abe62ee005bc458f8f2e68372a8aad8a58de0c3f17fa17a3ea7b83eecb14a14d6f187ed2807089081f8da7ff3e779c94b5f31b8b3f54ccc883960c384971515ad800d1708afeb711870206dd473ce29f4e4a6e14a63fe07d9fdbd7bc640c79e018f26df1fb440849119fe095b76b8c12e7bfa5dfa4bc7fe9161374ec5b22de5cc20064eaac7dd9d172c1d0a64934020271b88719aab664dc72d3cc60c6970021402a60c8cce4a12ac5aa96998b23255c6cd3cbd855f1c155c6a69f2c506eba2f666a9b8c16b493e615912eef0890b48f0974dee0500bcb3d2a8fddc3e5fc9b7a43c4e349562029f24681868ba79698c1b538392af7abcac69bca5883515793a8df6ea679f575c5ef0b7d05982b2b1a636ee1f201ac6a01a7b545aad84e937933442eae6f6368cc17d5ce48b2d54ba453b12c37c7271efefc2bc82a481429641c3cbde932a59eb634a4b1b5d15e39090c2d5a9648ff24719dea4a9dd154f42a9f9b535afd18f4daa7c50b6e8163cc59cc8a864bfeee75307b36ca5ee1400f3f62e300fe5432fd8e0e5f6cf4234aa53cf1d843c91560922387674485484bdb0ec9d1167849bf73a5c51d8f6fa4e94d78469392d62d168087ced5f6981b4974f54b46e9c8e67e9d02330c12ff3d1ab22f47ebd24c3c6a64a9a71ca88495eae3d115eaccb2260637b0df9afed6008ab18333c27df1fc42224c8cbde63fa0e4558e75c32ca8c0a47e9d6a18a8c73b7c467d9436c23f610d5ad2d8ab6a73d8534f9b4a101a39f7a16c29816b4ff0685149f2a75363835da15d3c55d31b990dd0f20ddef70427426e97f8dce5e984c3dfe7b9404f3d65ef3050bcb562b4a76381d69d98d2532f68afa671defa5f73cdb4aac9b5c3125277f5b7f24ee16d12402e200a75a9129f4ee0e7373b820084efb9296d4cdf2390a85f90cd95e01b96ac35e6ff82eac973b39279c71490286b8fdc8434bab04eee294ef2457286c70f8025c5d8bf07a34a262b89bf132223ab60af66ae1e251c7e426db7b71ca0a1ebb5b116b5f6ae657ade880d02fda91454d45fb786b1a788307001725ca4dbf6a9cad759ea3c5f22bd53556cb2e6e054a584432752b6f4795941d7fc3e8fdfc73c73bf4bdc5c92d51d62d22f4375cdc8a1d3ba3761527e55631fcc79a40efeaaa1c0946d5679434f7379df721dc23dc5af8b5442cb1bf99b04db4b3a257c890cd6c3fc881a41bc6929f9b3f545b9034b144b2821db0dcf298100a151e02918a20edc2eb0e372d1cf2ea23893627629c1a7c42971985fb29a284a8902787912740067d620a451e13893313915d83b64ef560222a6bec3167f8ee4def014820659eb197740a4895d43395f101258e4b4eb5fdd1b2b0159821e8c20dcd4c0a175d4c05b21f10d97db93b8832d73a10a2590c93d9dfb4ca9f73b4c77eb6acfef33d0d258203341d0be59cdca714630e6cb9bf91ab418f3396b443d47499e65033e3d1dae5368a6eb294790d01d39cc38dc277c85a0a51511de4af20f7a125e6cf97f024de183a225ab2fa9d9e680c78df833b62b20d17deb942a346b57d1c5ea076f4fd2ca6683e1e96330c587f5b7d9dd2efdae0ed07d35431ca38b4d2231ef5e709e0676f135c17ea4e16fa86ade555f3918dc3b6c455eecf5dc8af176854a0416387f161f60fe158dedcdd3e1c5991cf556969de68c32440b20fdfddd2be537172662daf24ffffa521a0324a93fd3e1ff8158226d1c6e1b23aa205d18aafb56c43d0ce153995348cac495c9668ac2ba17215ce2945f315e7c97270c368ae306d4d3c63c6b29ecdfb5087ecbcd3394344c8f95ff5e5397be2daa825ee79122c3328538dd7bef9a541462ba210cab7371c85e428dc037f74a271fab85932eaeaa5655adb2a7f78d89a4a24f345a828a7891feba11b5139fe4d12fd61d43d0c3e2ffc41156a0e322207572aa94bfbcf25e34157c2df16245c864b71b6576ec77827de9ba44165a8784ce0b4f7aea85f6637dd448c3a95447508a3405eec4a95d4c117a1fc4f6f723ae3e66200bc128fb4140bd933f7ef444b6f784b85713c56e8d9aef0fddacd3a3a869ccea9851c2b94076f092484a6beb4eb363a8355e938516001e1a1e2a66fb16e9fd02f39ad2342cc0059144fa83b93e28c62b44697227a3d5d882a781865625f23532eec687ad4ae78b146c6741cd75b6fc237fa46f52c0c05e53fdf52c0c76c03221dddf37b903e8f9052b477463294867952b9114c50da32cfcd972e90b905f098b55f53c77f82568fe446abfccb73fd61ac1c30a5ad4d8af41c38f5d6ebc1323b928cd925577a304efe43fc2a721c054ee44459e17a78964857109c2907264f0c5bc109e6b5b0a1c09c5402f97ccfb32dadfc60afba395af5af7c9943b7da80e2b853dc593316c093c496b90baf9eeab2e256beaaee0d7b96ba7405e9ffd7ab1dc31c2990f40c5023c24897340ceb1307b7fec21a5e27e88af0a7f2777e9b07111e8317f77294e11b76ce4ab66b4a8c442e6f9b09560b37620dc61500ee3d8e2aa330e2cfbdd8d7caca329113f06663c2d33964c5f59913610a0569ce7d5f91e6e14902079a5dd9699b4eeada26bf9ca06da4d73688f0ea715f659f252e35650754f3192fbf083431dbafd2ff7bf72135e42c476de7bd8e3422ad97187a368e63ba614e760bfab0445926a0c2b2379bda32be51a972884e800d041f7ee6fc863dd9711d52ace9e2b2f24c73fd191519938834a6c6eddfb1c178876a40dd7d6ae0ada222c2e531e23b0058d35179b28267b44a896decaf31757471176acb1d7e5120b5bec0e8ec5d69a68105cadc8597b9e4628c26861d565e571f62b1824319899d8ed87defeab0ba4e30faaf3cf762565df5a45575b69d14c48d40d716d1107e6eb3c554a337da647afe12e8825daffad8ebf859e50de7a13832fae36b24b974d241327e41331b75e33a5f166af1398fc441ef70d7f3d2fffae22ef2367c36639a31ff8022db1d9cd8ea158ca9c9167f9cd80f21cc74c2cf71164dd5bc4fdb1ee66fc322f0b5e16a4998e48e6ba98bbf3695a382913393f0b2adee18023f7db73bd3d9fe290848862db11e81b4e54c36da07296cf5bd07e77427c2fc21f43377e80c5f3bd6bd70d91f238ccd27bf8ec7a78fe8cf361d8ca316b0352f0b1b711d3db0111cc2e3c5443c0b7d9342207147c0785089e7fa388be0383748e5a8a59b6bed32c5e612418ecf6b5f54cb926732b3e74a32c6050e8b32a9ec4b36651ce1850c9d35881c7d90e5f54bb964eaeb131d80315b1901fab6cbda6792679efe1066e55129cbdba4ab1ffdcd2058ab4ac13003d395b97860a185dfec9ee8ee546bf5bcebe02f7868d141716e241095001534d67f9a3cfb39ba2c6d4ac9503271d0121222bf1addf46ed332bb2dbc6fd439abc913e13a91c33d1eb9f9938a5ddf4f6a90f3aab48cda762f375b58714431a2092380898ca367e154887dbf2232561ca7c11e787b1b9904549578baf764f0135c8995660447e66fe950db29bee8c69591b128b69984614208df484ec2419c55e14a097ab4238c6b748ff669af3b5d564b855c0c686b5b815a25af5670319e3eb6dc81240cd173fd35fc18062233a5c05a085176cab0ad8d66afdadea83a874692bf2cc91f1aafa9647bb0dc508b358f23426f78580d25fec784c1cdf0a8f51723d6da719f1d90828086f047173bd33128c4daa262b13954c9fc76fe3c7a1dae0aadd379f3e02833e708318f65e151e721f1c41268b3b1b4b13ae83736d08afb8d7436fc9e000f24af08236f9b3b4d86fa3585ca3c5cdfb0c00c01263547c677daf809de06fb8b57aee83f3646c8b60a9017ef6837b2adda3e3d71f00774473b8d7268265fcd8ab27b22c63bda4633f0e863e2492339a66953820027954b907d53eae31361a9e9fa2581779e29f5a5cda466a1b547db5e6745d1970ae4197a0ac9004f6904cda606baec21de282bf196abe7b9325ece3be25f18a71c3235d7c4a5b49006f0e86248790f1bee4efd30d5cee826f1b3d1b9adec993de75700df5cce307c84b6b42a324e9119b6ed3151f573714f6cabb96403aefd5d7fb41028c0ce51fa1b8ca7dab6c505be5947422de912a41b092e6a0f47e51d04f6254078e8d7a973ab9ebd62997f99a95de8677771a34d1d3d4219cde6dfd5c4c5e75cef45e13c0f574272f4a9fe3803388b307c292a7471e4aacc5237b82155c435fda0802537ffe38c3c698949f8967559b3ad4470b5723062458177218be19560af3426773dda98b2df7eb0e935548210612d827384437e0aef9a215106850252c296627f882fd22e2406b4a81535d8f600d3f48c64148cf423d505f567ab01303183e1762a3436561aacbb3a4e38bfc6fd98433b9ad874d42eadf69742ed188bcc6395e059528fc79dd2277ee10d272857a094ef94fd37b32b2c300dd979a54d9678e99cd07adbb21e0d6cc053f48884d57631ef182633006f5afdcbafd39d9656cbbdad65434ffdad4a3d29ee9cdc103fba4f05bb8826927b8b745861cf083452c190d7f4c9baec9bfa3c00ab8dc1d54467c138253ac6daf1bcb7f93920c22aa255f39ad95b754dfc1e24bcf1678c6838b680bebd1457b677d955a8999fbe351dca57f9bcb8b47bcff7917e81281bf87f22772043154783b5fd41eb9735b77daee52a3ac4b347a81b97148ecd709904de95cb3e26c4707409e3b01f5874e32ec4f4553e3f31330a91897ccec9f3322929b7c6eda6e7d6adeee3322ca4c3aab497b7195db753d42ad1f1908ddd1071a9d48f0bf8a3454cd5e5044455c5aa980673690be3fb2d7226bc12fc28459b78c13cf2e51a2bafdb51a033bfa9576714112551e6b203f41aee481372ee05e3f6ba746d3eb8f416ab96f9e1aec2b7e358ac616190eb89d4d65b5376267afa9eaa561cdd53eb3a436129339be8327e87cab80e16bf4aae20e5167f6153a92d9158f2ebf9768becf055ab5e52866ff8d842d97b7a123eff819b767c4ca40d8d600f5e629fa28a2b2ee46d6203a8f2eb1ee61ffb6d40ea8a6d15dfc986e49aafdfa0442924e61650dd7ecc2967977b887c8ff5afd57a393a1d18846929305f7fe3734f430ca14a3c14790abcf6c68e486b5178f6a29c28d11159f0c725f464e92feb9c72fd40b9328b9f414029e54f2799f39c27de276cf453236246960abe615830acdc203bc4dc7d8b2542447ba056704cd3f73115e8409c8804990c1ffcb1ff8070d36dee4a4f35237d9c6eba0e1ac946fe968c224e4c27c8fdd12f21d4ac824a2425b3a0e4ad60566999a0240017e2fe98dffae99049bc4b9c247a3b0c798d50786455447fc312c2f089eb588a8e829f6f30a1de5082638456510954dfa912d261dcaca168da97dee19246fcd05b4a0af55eb7e0fc004728802cc62d2c36a8ae2c859b5fa33ad48087605cf299c4b6fc3dcfde3002ab71233a8d5910aa45adb290781e58bda032d904ea34c22a4c3bfee6a465c5b4f2176c875dffa5c32ebac6e7b6bfa42b5992ef09a1960f7a4b1a146df1ee517afdebf178a1618699167cb1a5d8dfe7bd2d8ccd26df92c272a253429b5a60eeb585c01079e004bb35fdb30a157209b19925bb87052c39cfc37d0b672139585a7c95f81abfa8ac6dc2f49167dc47845b832cd562591dd523b528cd49d5f8907fa9a8c6c5f30a9d8028ae1171cad2eb0fbefeb1ba4fa1410c13d7f6a1161c50b7ad88eece7406eccea5bd384abd88ec1f6d41d5e18c3125b048c161e286670ced084110550c49b6e1f7129e3c6160a2c868f9f9208afd46cf1f4b7595d50412eacc383390734d47f4546c1ed281b420208cb7bc65aa05cc6ffa007cf8fa42811179ea1e137f0791a9b1937574c34e7f671471643fd3cb8dded962917dde8d98ea5d59943ecfa33d7f385f113fce682f2f68cb6261542f905c0f6aa755e52b929c52896644d571532304219a70623a898e8d56b25adb142a0f81875708d565f651f0d721c0a2394f220b0b5b63ccb1f7b081211c05e6f8d1c324a89c22c3daf09565f62e8ba476ff5393ed3569b0e730f54111333a32e2ef20cf3397c285f3f9366e6495e86ad187f7cbad22d8fe21b6110d308b5bda8dfa274ec253787d42668e6664ba0394b649cca3bdf1572115b5048ffafce2b8250615220739709d172d02200214b52020d57a9ecc372497e0ab6a2bc7e68aa98a8a5e9f450ce029053f75db7fdcb21e2be5a13e616e8aac1a5ba02f840f81eb671a982984e29a206e696ce20846cf805c3e1fe26e14aa04a8c907d7af112d897526d08b5e38695d88f010d309c138fc5ed39158e54aa7c2971946d561b89485463ada49493f7fed80899486d08a13cdd09b4796461739cb9017d3c815c93044c444699312c98d33513dbd462562df069a0856cb193a1319fd46dafaaf90c790600bbe060302eb6aec325198b366aa7e24264554194961ee3269453093110d12c9e17b89e8d3ecb48b7ecd5966f959226db6a6eafc98c4f0306d5c915717bd3a21748c34723c891c6c4e293e290580622564e2b682d6d2bada15a184543ff52533c49a29169ecf0728029f35620deffce7ca876ead64ecfdf76462620c6d93cc42937ac0d8fb445395e4f71a12c6b9ae054c7fc8fc807297c095cb40e2e13ec7ec3fc6d476f9ad4ffa14438ead2da283b438465acc4db4efb816ad081c102354611dce214bdae47a84fdc97902ee5d538337a4fd517fc3fdcedcfe298f3e02a82cef332fb5f58afe4acb682e95c7d350db8afb6b75b687fdb069f4a8938586e72caab772a46f45a2b872282bed220e4a77699f067fd37030c77ba20238de4447697f064001f0d7c8c41d110ebca3dcbe2a5f5a434770d42a9ff9d2cc16bc7abd1171006f52f532dd90691876f4ea4a17a0cf549ae95b73c93f8adee09f7322d42dc2986f538073cc3ea6e71b7e47c49e68213f80ea83bbb5c5e1d3e3f41b3d5902f9ab3fccebe6d3d7eccec4b8b0207d7f496a9a3e52238aa09b946be534430403f6f9f062c607b57d57273a64ba67d4564bb1a1448984c2e62cc92acecedb03d04296cf9a4d62cbdfa3790e0b4529eb0470cea6942b9764d22633cfc22f228482830fd4f08e1f30921115d3b2ce2e68a5fe2cedcd1ac2dad76d5cebf1b145d8b71ec365b53749355db5c48828ea3f21c01d8cd09d946a58e8c155b4f2bc7b2fbbe3136de5a03efc7b1615d1935378b18cbbda399e8cc6a5f83af67a7b3220e9a2727362e219da4252bd5464f120d9844267be9b28ee29cbf6208ec8c1f3ed3d7b0c4daeb2dee5cdb9504a28d1c23943ea7e78c82760eb35070cbd1545e203623934bc4aa826e88885d9c0c467074bd0887f4e03383962a6898dc3bc86a25ede78180c62fab8fbd8402ec66f1dbb309f2338a23f58b4e9ab45d6ba9bd647108487c096d2cafbb5992a0ce7e6bb6d6f4f2a064214749a273da60cec28681a699391b2645a5edfadd87739ceda5fb277eb0a4bb3d31d9c38d499c3bb3b9599a274cc99af7d68b97d12b2f62d68318c643158527a08df0cf94af4b7c184fe7bb8004abba99517b7cba1e8ee664708c49b9bd7c233188b6e8c64fae29c80b8fcc16df4e4c8660841947f4f9b80a786737ad7c51972c487f45591e75df8e26c8c4c86f39bbd7e104c6753a8a07cdab8b3a55c1e6221408bac653d1a7b34b1d7b48fc070cafb05320513a7928cabdbd97aa2f8272948379d22617e1d70754024c311a64dd71034497c48472b108b112b4a804561d8c790a06772e46923b43614357a2c6dbe4bef6888b8af2c8a96c22b4efab9ac4d37cb6e986947e4c1e532d78f7e437ac3809434b8feacf807c21b6a51d7cdaeb36eb8e51e55056e44cbbedf28aa25fc8e298d6d3cef884679b6a1d4164f4e6efe58710f3d56e9b55983cb50a8457c4ed6f7f8c0afa0c75cb5ebb11e1a83dc082fc97c6fbe06fc6f9570f292b046524cdf4d2ee034ab6d80d8061f56371c838b5ed4951e15a6b281bc8cc7b94564ee9527b6dc59e81044eb246783445d01a267cbf498e8680e6393e8f71ef314cd5ccbd7cb100a047c0d01e8f9ebd68668c199adf50b730858ede294ac588e19aeff5913beeba80fa360a42bf83a432434320b8f5c1febb99054eff8a735ac7c8fe587fc0fc2cc81e690a8358ae6b21e5c21965dbf3f0c1e53ff9d043285ced957d468fb99e72c965ac2a1ec46d65b67aea3b0b81fe67218d987ed7bb052ca486ddedf06826f760995dac8aa5f1517de003c7aa72cf803a24fe56a4d4e78369b7c2947d331f6c9de36d483f9dc9ff92c3d81e918924cf6d9480a042b2197588f473ec2f34d488eb2d9c2db5f3d4865170c975d911a411adc870f4bd0d25bc7d00a0031773956b5987a9eb659273e3a44c14d342373580b6cf94c389125d9de8454679ee73f33302dd0be7da05e99134bffe884215561c3383e5628a6d49f5e43800a5199f31e8e2e2b54d05e90e33e073fe44a47f2ddea307760a09cae7bdb1a1f8fea2d764b7c0920c7f77efeec60bf3484f3210fb8c0f51f5ffe8e0de45b24ba1253eb638b1fb785d94186e3d08f45e0d81163fe1c6114c04662688026d43c07ea153ffb049ec27769554786060ce970628d97296e9162b28d54e123bcf74d94f9145a78776ce6a33e6eae5bc503cdd8e7c56d145dcb31a24269133311bb5e69934a64077dcae019b2536bd6719b023b5fba9136c1bd374898ab859a128ee19cc2afa307b4f80d12772e9056a93b9d9919241f4473010ef4937dbf6d88f13a987f0906dcd9436166c3961c88afec3978ebf4ad84815326fc69d375f24841f4d8ead74d158dbb6310864ce6cda0d5ab22c590b35d07eef97de982da0e07314edb28ce35bd0ef3cdc471e5d7ffb40ae0b0d43db1acb211346ae574c8c2efb56a2c66b2e1d477f0e00994bb08cda0bd9c01152e699f926caf74eda38206891ad0db743b988cd69d6d3b15116d1dc590f1642ecaabd9bdf10be4fdc25f97ad1259ff4833c2089f428feb98bd649a72f0d89e701f20e635a161b22b580686084e8b95cee8443c7fdaedfe7107e02da0683cb4c891c1a6fc81363d45e9f9ee4d44b7ccfbec91eb017101bfd4c90b34ba1ca2ab4e96e7f607ed7a13211d43767e4dc44c1bc74355ef0456cc2ad2b93f8a98eadf3e1e10e7d6dee660859f315cf6c2bff0d30880a8e09e7928b8d116a31af4ed2f7170f220c1919d22d7b8c3f7300fd2f6611c0017181228ee376bbee4b1a823169d6409a3e8d74dadcdd6a0c1cdc72a6e2b130b8991bb16546123d49d4dfa0859cf3a1dcbe8b5d0ed6b32bd6573c8c774526abed0397eb5146a2bc9ea88e2e6184aa567d8d8b6f2e8d152d01238c2b7ea608c988229767bf825e9575fd3fc6780488d12de826c9815c71d50709a5b96ef23fb630e16a8dcdf4fb9df44a2b186bc990b5168015b629316e19371296eb018a59485b90cb45a1c6278bebafca0a215fc640941c86945fe5a1096a179954eb7e615a1adb3264682ad8bbad80892a358d932ead17f4b577772cfe968265ab8d3a53408683cc70701b3ddd1538a2630e3879835e228c508e8598864caccd4911f00d8245c9f7715b8ed3808c1ad0a6c2e17d8242e9cdd7e539c00f91fba4b251d733fd8470789fcf57bea8643c6f672d3c4610a47413d4bb701032f01df8a243323ad667a738a7500fb1108b0bef578d521860fe211c1057ec5a8920567443c6fcffe57e1d137aefbb8f3500a4e14623b6557eefc4397c5c5b5fc6f744b8f67bc6dcb9ccbea8511db0f140ebc92afe16a85a5604ce0db618454c81b47c381b2d836f0e7d5d4b940518a96bc2ebd9fc085bf46f7174e14febd14ed4705f82d0bdd239a68a70bc87a821cf7150835a4e523601f8a3bff260101de3c15563f0120393beb58b0a702b3d0fc4a6715e35f4f5345a035a73a3746608bfb0379d622330673519764cbde3faf6bdf28e5566d0821a13b50c6eeedd2d67ae9dcdc024b52e1dbae784d558f6658603e19224698cfa10f09cb040a855a025144f06e57d1e6ba580b88376ccc2427e95cd75b75fd56086ce36fd5d05f81b1cc32015eda4d474af88bb49c665b7a512899dd6092a30b816ab892db8a88dda22b582413e9fa6955bf6f27ccd2988816bf9168be43df113ade9b4cdcee554c473bd28b6dec2787d3b60e577faeb631208f929711d5e82e3949ae45a95494597965194d55268e400b1438bbf7dd4f317f160c071c3373c0abe8a8183521e0f354af949932009eac6b8565c6cfd294ec84722f31c3978b2e82d3362975b4f86187c82a1cb6e6b7435743298a1baf39325b64206fb93b9c58ed659ce89fd41f0e63a7993e34b586bae4d9df4a56ece238c25225febeef8abd314f168dcbadfe035002e42ab8474627cf6593ecd808ffeb9cd0462862193c0d7f05f5f0e1641ba4542466cc6f81b7337ab1d3956a77aa06d89b0c64fc009a1596d0138d7d2cf36f551b464da3368c3340f14fcbe49441f2f183d8fb0e4cfa2528edd4e5633f72eb6167991c4181c180619cc7f4a1443d0da6dd8e5d823178372692a969a2dccb7f97193e79668144b162fece6666d5e0b4996c2430c80adb75875a35e63fb80c6f91a65638687042b65c7b19ba7c7e3f30fdb2737851266d89d0a39aa5e325e4303c6732f821ccaad08ecac7f9f11b97b07108eef871e90bc7d9173e3c28b390748df18fbf1d5db9ece595224895b1d39f1f9e3250eed4cef36d491d3a3688e232855fd620875f779e6f2686a56e20b3710fb2dad827ad15de0c54827245c8db7223dd1dd9016f928363341375a9421991a63321cf567f389672dfc7fd17d2c391156c8221c63fa0664b9f3e671ad67ac3427c6ec9e942b47cb53c3139932c75d11cfce570c840e5599ea48c5879694e45304065fc3402ae42d967a08d3a93ba23ce2afb86245d887bbcdf9da410a82ee766e0cc75ebeb258aeeb5fe0b135164023dad97bea34b7cb065bbb142762d18e1023dcc5cbd4bcaa9980c2dec1241cf9fb9ec9560fae9a172221bc2157a9982bf52938e959f08c92a35aec130972404fbbbdcfc899a06c2c8baa19922e7c62beb84547731963d9d0e26e399200ad93b20e16aae2686b9e250cbd946e1dcfca7be5f157e8718a41616f48734c5475a50de140324c72596517ba7a2e0926ef08b07cd25c9e8f1cf1eec180f35b91d6d38ef169c8d63669431a1d11929a02915e02655f256a0f2fa1bbad6a7d29323e11e65ff7cb6f3cffbe6a36ed898ee58711bf70ed4010f720408ec491682e8f5d3d870b0c3f9f767379d042eddfcbc35af41625b1df992cb1261dedb77dbfd920191d46b0676b1149e5baecfad9f26f72cd2359bb5493108c65287feedadcf3c7e39054dbc4feb7f62f0a72945b4cb45a97853a9b18679877162d71b3ff88d2b4e892255a781e2307799560a47d9e777bcea1e96717707eeca0bb5fd72252024455375ae056ad8524e9e2a1852acaf97fc4458f90a97d68acd33c7dfe9e711cd23a03f681eefb6af9ae49fc23eb236b54f009bd34910bf4fc1fdb3a43b670c0f3e69ffd6a4665fb8b696a21036a030e4da8c2284ca6f4e0a3c760b63d6e53bb748e4da7558803402f26ed821f0587ce425e90c63c24c5416e78a95ad5b768f2cdcc63c2541aeedfa40fa644a8c8690f7ae2984c82bfc876430695dc6d810619cd35a58f03873cbf1c7097ab61f93f8670f81490a9f756fe29c952e7483cb2cb8bb87612b2f177ce25ef225b26a4c9a9a5539468528e2ac9d1314389c1c5a0a06f1cb54ad3e73f7ee05477441e17a262fdf64eefc892ed1cc7a5790750818495ec98f6e431d738e3a691e6f5e04eef8b91b756c6d6d26db7ffd8cbb7e8b9378712cff0040cf8ce790c4035c87f77744611f98fb9d4df3025cb05226e81b44cf3fefa64a5e4d08df9687669fd6e3be633c76482cbef8a00c316da93551b481b4715420123313091e45cdb5ab6c3a8c71c44d6f1c4da660d5b28cf46fee59c9152e25515a4eeb656a749796d83ec821aeeb5f593e21f1c331bc1a63a40a941cd540505cbc3357aaee85909c46342e171110704c7cd9204c3d3a628707d36afbc2b0995b52c171c63bbe2ca3cbc6726bf21df3fec28ac5582ca22ccb851a24c5f20c729baca01b11035f13af7e1791b10f669f7c9bb2da6d8290abadef0c18e5de6afa096bd479f976f79756fbcc7615cb858ef090ba376e82bf056155164c39f5d6b14131d7bc3f92d9bb30838209aa8641322a37782c88cdc5e9cfac7cfc7f0790ba1f9106f654b10283ab183080bb19aa044d131676be6b84b9ff616716874ce8f3c6a4f4e2813587694888f687ce8240318b58f06b600721c88e7e4a4abdfad937cd3358b837769759e3cf0b808960fca82cdd0f3f98b7d6a1567d236e400d7e8eef72b730e79901500609ff10e7f6198eabc7db1bb63d844b5e8b0b55d73464e794e2c1af20d9f74240baa774d83fccdf291e884b737f13a29dadf660ccc6db532a90832e30285d634691f6a49ba1bf2c715b7f0ed6da3373a7503d5e451d44818464186a9dc74c119d1f065cca6ec19a6531a7104e38f6a47dc988e6a01285640646d6def39538b73b1c27ce0465763bb276884a9480e141d25d21d927971905e9ead6a675d8baa99de2d449252dce3d2be3023e176f1865c3d72de81291fdff9c89e51ee8383e3ee78beab127f69149b05482ae1e50f27aa3f16e8094d8ca7f547fad512020ff7336615e5316450a1656caee35067165cd41a4bbb8364133f68b231ae97fb139281d60a6344ccee42eabe6c2afbe1fbef4725584574138d160f45c1c77bbf83f553f9f6c8e922bd6b9842a483f281ff93fbf3585f0e7bbbc4c9f96df03b1cff1a5fd891859a3f267fbd44c7e6b4bc5a0e38328c3e211d43a0fbe5c91bfdad4494f5bac2150a7745b23fefc25c2d249d1e249c3adccd38a7f9228ff3ce9b64b5d67fc90ca974d5735e7e705f84ff5daefad5e1447cc5f87e56181c90cb17e60d39a3a8a8f876632b75e0130a59633553961031a7919ec460202d3c56830fb28329e9d33e4612a42708588d87b8eb556c1659b402c934c98f167381a0ced3bdbf81f9cab19a5ffca67fb56f72c1789e49cc24ade4294cd085e66d3a1890f3102370b2281a75d30527179cb8e351a28c84a8fe7b9234e033e32aa94120c5feb73975df12a22ea8aa120a31520647c8f4f751398f97eddd8bac6e0061843cf36e4cc9bc2657881df9550855e2d1bd56eeade8b7b4669e20ef4c012ca1b46e0389cd50d8bc8b92bca4761561251b6129e60def31b19508a52c457695f7da44053e8e28bcb96eff17d507fa4ae273e17a3d9ccfb829f23cabfe8c7f1f77aef0c1a9092d3c9ed9c03144359cee285083790f30a106c59839d6464fac2b5469c4ade6540603bb78a5ae52715856babe99de209817a2dfb8819b1a561b83802ac6db7ca78372b9b16ae6c557e8b42e4a0d90ca94dced78fad308e832e289f81b5a5c6a813d0239dc9bcd9a4ae280e8d7694b8d3a25b39b4c836bb0f65967a4a83d0220ddd397f7e841db243f545a8fb3af947164a354ae407c175abf56e22672a4df343d43dfc75cb2bce1f7654fb39f65478f73eb0ae281234bdf4007bc353a7ba8c65acb2a78192934eb81c47a7a0f22edf3e92aa69274a04ae28d4f53d3934d41c4f7c98cf0d7d0c3356e0ce45b8ea0bddaf6de38ad5017a9945a462a7bad60e3cb571a22c6c1266d5f0f7e84289b7bf69716579dfc1953c4b76a564c0a053e4c7a1cae9507544bf91a152be2d919b23d8a90f42b8e5f11216c0ae7874b7fe3663878341e06e89da6de66ac810ba8ed9f6038e02cd32e9374979d120abaaa985cf0ac9e15c9172dcffb804f1891f28e82cb4064ec13f5e9b909a18c2808159666cd0dddd8531c7223bd9c4165186a1bd10ab6d704ec7c200d7df5e74256c417ad1959d870343c4e3c5380893adc7d754266c749eef6e1d8bf0a7140779f55d282805c92d887022066a4bb48844a884798d30fc946e8c32caf74004b8cf9b65f07b4e682db08001e8e0768947833065ba1dbfbc03c4a55240fdd7f363984d3702447ed21cd8646ad1b1be1946edd4ff50416b32fff0324259a21248c0e6f294333b4f9669acdb9fdfd72222bb94c4214dfc1878663a6020802c582369de5a5a58fa841b10710c4f271a1c1b233a72f4dc4f1667fd805f4c401baadc94b28f9e250ba3f15f62a95f37e17bd9d50ac71fdc8aa175a7fa54934a0ca0c64a8405e7f3756fec786993565760920205e04306f05b3fef608ea4c93b9298c9b8c25d0a6eccd92f7a631b56ade7ca330e4584e97972ce1173850af1164bacbd8b247bc83eaba660dcd95aba0671f39aded38c61df0a36edac2bc3c2763b75597ab959fb91d53afc6c17cfc78bb0e287cf02ea042f2fe88db81c629e1faf07ca1310cab0157154bd2e7730a866ec0e395258b68c9de1b34d7a8176ffe6e2f505b00b0659848d41a33558170088218189342d0120ae64f0fcc53ad51b3af62f9a63af1ab7d823160774283d10d0c6d513c92dc90c73b733851b946e9f86b300570c9b3dff395f60511f7ed608d0d066c4d26b9f6d3ad0a0c8dc56328df774ce0c34331c8c122b7e2406c4304bf5ec21ee43f811f7319573aec1be80bfb2096c5d2bd8c5887592435723e9da5628b377e22a896acd02d5fca81b6c236227a82dc5869431d41a814acf9c4e46a17679d69f5d2a5637c19561dc6c480da29185b126e3b70a2fc3d254a20048c4ee930143fb39df54ff3e0dbd2b1000075b743b02e9beac7f3c60aa6a5f48ac62280b9fd63bbaf6983990708ea402170015a29be8e0136907713011af1810e22ea5fdefb129e14831fab0a45df6446805ae2452ea3c0d36d6faadca2e3293cab068f2cfdd193057dc195b48d2cd6936ef630e6a5f4028dea921bd65b73ec9efb7dd3c9861491c2deb72231c339d22862d9bf0a20c4037d1d697baba4f64691352a78ee87ff565799641c4121630e914062414aa73d4584a1f3547d3bed0d69733b541251f3200ec530d5e533b3c4f42a6838ef98b868f06aadc860bfa30bd8cfaec029770959cd329121532fb568808b5c6e38c0f2c38042ee6f4e86ff32ec6836a2e910d87731cd58c6577ad9f68321ee300d3c8bd08a931a25a1cefed705ff715faa542b984b6ba92b056cda930cb2d66554cdf642e6df5ae9ccc6e4bccb670c1a92aec236a0ac3d4520fc4f15f527bd815cab59c64b66709e10ca1b13518efe78648b2e67c8f36bb336d208fa745086f156d060136d71dcec4fd6c7e211b796791d5cf8e05e4b3c899bd745733ebeb4ec5ef730b24a8ce4a3dbad5ee99ab33a9481468e7d027e55e100cce079c2aa9acf645564725ad3dc1315fe5cc10e28e7aa9a4a394f6dde1cd62c6ad1d3efea1ba476f82245d654cd5a0a8d8b97346c441b0f9637dc233b0ac270e14d2f4d304d19307af4cc344d5a03959bb6e6a13f2fcf74ffafae10edf1c03e150556047c651704d526dfcbb983f7ee5260923ec7f3c692a95b3768a63d94b5e4f32dd291fa583fe874e1edbf5f39c0c35d7aa148694ec673da10eca7508082a660df1c4818aef6f298b569aa97737a5fed5549684ede32a604145b82f94d86cdd68d8b932254c38d7abccf984340ab765837e8feb8eb8714a51dded09c24063319dbda5b09fb3e4b137be9752553796bfec83b2fd5bb438266b5b8addd3911145728af8ef8faeba9b2d278de879759b864f3013532e861f88ff5d9f83b686f8dfca9be1b90e5daf2262c159e6831053eecdfb4ee24ebee3abdaea12df16be4b923e8b7a326713a042956690c2517965cc4388990ce25992e6fcc93a71a3857c7277ecec69075b2adcd609b960112e9ea3054f940f1917553ce7b37030015c6d4a2a14c4cd1382bb7c6271d409aa4d22cd1590edbf547b87c38545572b828fbcfcd2fdcd5f1718d4034b6ed0936f4ec1bcd3a2424305f4e94b5698acc7e5f266afd3379f709977839850255b22955ec1980624ecbab61d0034b4b9efc0fb789c7dca82ef6d72e4c6acf30ce066fce868b05e1b297ca65a52ae407c426f2722a1464d7a16ab52a3f19b54440d0bbe68da21deb9edbc7144bac177fba415920bd2d337f3e03b6780e3f31e3a66371d7cce541c5353666ecad9d4e120f7622f8ed8f9321fdc50bda52dc1c60165205873d06b7bab6c99160a8bbda7854f73de45c705582b9dc24aead98da763169a42155d06714391e0f6bfa4f9b69d70f983f1dd5613d762d74cf5a9467697e15897d97e0f95563f8f2c9e929e9f89b502d338b87e1513dc3436390f61cb70dda777d8d68bfc3db3e1d2a17869cb70bf62fbeb5160cf2ca5b97a8d90b81dc21981e92277e7f4eed0a891dc21d3c12069ae8b78db551b5488aedeb7f62783194e9593459ceb86615e7895d6405d927fb14088a763b085304636e02c28d8efb808b14c9ce1662d9e241fb06e95fb27a8ce8dece2c5046a5e5ed70d6fead409a2e7484bd0e2a50cef8bfe73dd7d28db636853e6176204f1815249fbee9cb6b13a59fa9aefba19eb3dc5dec651bd0e54e7d66f039f3c38821c4f0114ae4da5448d4e2ea4713e60fc73e3b653e25a39653e8be7c322d410b5f338adf3b8b95151351899d43dcb325cc0e0662199cc2065c96f87973e91099ff6ca2debe59fa395e9ded521c8093cb7b78e3f656f43fd14f5b103c4b21408ec7fce68d29abfba79badf1a40a2279eb7ef5937d218837c8012376ef992c7b1252b740d55886b9db76217b1f4490e71f3bd458569b7b0a9306e963bf8cee85a6f0d261aad5fa3b52958624e7d07681f3c1dc479666549a30fa95d5b4682855f5489b4df6792d74f6d46c7bf412f4a72515e767f63e78ee0d2310e7fa09743c5db140538cf13b552d0c28ec8da0c688129897de21b7c24b7ab4f1af7175ee7ff3a9e162ce93b6a812b4955fa0bde791d324f3537a976b6b986178c12e768a05d5204065919f6b6521a407476f9adfdf56e1052802b0bc4761048c802b10e70ee7bfa2e22e626a76282f9fd1eef217dc3bc0c3b2ffa82a8de16be761af9c34ca17ab15eefbb73a58b4bdb81c75c1dae4735916b0a65ec5ec62ffcb41231aae430fffdef2cd0cdc4bb219bec86430767adc87c34936343127e98d1eefbde1c6fa4e9a050c24626dc97c30cfbe22a6275cfaff0ebd81ba0856a5527ec6d6d22e1518658b1b73a0057406e4f11f57d90e7a8599f146f4790a89e35bfcee1609780055a31ff9eeccaa1d6876a405e8c5ebbf97420355ee95a86324a71ddcfa8fd41e40f451262bb7bbec2f7f075c69ab4ec2263b8fd8b8309530abe0b5a6d687810c5a33bdec7b997fb92f4c5d1ee14357f01d483ee2d6bb802a8a8643e445e907745a66cef3237dad39b1672e016b25e1692fee08b78d5c98acfab5ac156d97edd314b5ce0a68b55fa3de0da0376ebfda8972464b5a120c90e45a181687f7f501949d62ead956fb4c029960ab1d8a1e9d4dd3d627e4057a38b08d77b14abb997169226eecef19af75b8f320a7e47d87199f5fdd907a40a4da30fde55f6f7cecd957bd747d1e98b58fd365752969a0602f13e6bf80251c2f2cc2862099c7837781693a9fd3b46213d91f3a88aa6faed0847c1c8c514e233c97885b419ae0d73847aefd7eb019ff1d13df69b2312466060f312e4f291f50c409c7dbfe412042526614da1341409d4cd36a356d4b7172c13192565f9e8e0733ed557750d44e55d432541ae0c9859053148ad8c9898c1b9358f73a153c935f2f13e4be8e65dbf2375984f060f3749e51f57fcf67a47535d3a6db9830763e5228cf4fc0b82986f08b5836f6f99d2ff454eab8708f846e37c89023388b9177efd50eb451b9f888a6c79b426146af0603c04085472d5d196b8e28536cbfa1c31bffda258c2a808c1eb061467157b937abf49c32d5fa76f960c1be28849ecd2a497fc765688f27b18fa36baea9150da4439fe5158738aee4a3a185eb04a9983636ecf2179e92c97f5a272739625fba232f56fa1b38cf705a3a3c8d2a9a65db3225df25f5ed5d6380139c918fb1b2d305c24e7e1c1efc0cb81f9b6c74a1adb1ee4410175c1cbd31a2410333cf370186990092b641a27f9f2212d0a7a23d5c5038ad643ccb46fdd7dec4286bf44b507b92ed1a516c06067e3aa2e588533b243a33e06a1ecfe13fd336ab35afe6ef6e2ef538e4807b0d87fe76388189e800937547e5f131c8bc123c39f95266dc479dac5b358fc2202b3cd67adeff1e0ccac6bc0708e237d83d4c9f83407d57c8c2507191105c0d3761d2157534fc0c01f048e52980ba8dc799b6979c08ef7ddfd302f37fc60457d06ee7b159a256bd6d30a00b969da8451993db2d831e8a1ba5af53e0e63b31d5c1c4c939c43f6e2f8e6604c4595f0b37674a3573066037db066434fc26bfd1b619b22d16b893b8c7d14d7ef42054de6d9439d5628de881cac0e506b9e8721f6006c755714cabbbb0a385da98f7083e167daa3df36df02860eccb00114892579d54cf65b01efc0ae10f626fdcc05c1ede0dbcaf0b5b62be923259566ba916f8266074be0c2e7c89d413eb3c4b1f6af487e0d81c7a7d7d9de6eb0f46246e3582bf63b63548130295a66c10ed2655a886fed6d5aa75bb69b219f4f3a72410570acdf408099fd75d4e944104ecaede144a18b9d44575e4c209332b964efe51735a249d50e3b0293b467fc02fa5848f21ea701dc3a78a8c498568c8bb430c5e7841ae384f00d28303073513648cc4445d0c993b17f6e85b5d8efab62e094867c0867caa0e3cfa9e69745289df84fbcd963f16b430e0be45bae6daa13c6975e7c37c9117316e30bfe187b7d9c74581aacae8e1539ea5073ba117c5d479a2ec2b2d29851c0aa6635434d244d324667fab27fc85c47f0634be1eaac621a1ed05091c96bf58d7dba6c57bc804b1cdae17c8005e93b94d26366a35a74525521bbfba721a660c40afb0dca0be7324f03d25fd67fe8003b63540aba3271f29f561fdd38a914a9ba395fa4733872451adf64a56516ca79603cec60675938aed77369f737956c954444827ff0ba76f19f36983d363b061803f16d84cfed134f6df39c2f1a4956ea41555f8c57b7ba327c8c6e2769a674bd82e279ef6e884e4c6d39b6f4ea747b05f9ac3a2b6011b9afccbb0190d55b67c622116d7ed969f842f3784aa648d8549ba27fb7f536f7a909c3ca39765a8d0076805d9b03bf2eca6358db90d20b9ff97b0b847334e21af6369171ccd198d4bfd70a5b60e30797c66c94e8ddd9cb3b024f36fa5666e231369fb4539b321000b3c21747bee495948592a8e6999d0a437afe69afc68720142f049d6311aab86b7aba20ac6d54d50adfb45a5b38be174366ccc7c1dd5b51fd79a75c6e36a27cc56bd2cc48f84902ba0c8c9d0276644d38379547e75760c6523ebc960845659b8101a1c95c94a8d97b13316dadd72649a9effa762765b5b6cf086e6c917d43b471169847c6cf5600ced74dd194a98074dd2165491f599ed403b0650626bb246cd66c85f7ce5a78931749fc34168ec4f7b639e271c55e4b5804f0ee43c6242facad5235993333ee0ba49efb05a2551799f06337591eb77d7670efed0c779ed020c6069c81bbf82d0ddb752d5fec1f09dd260c90235f6fd86b65dd120861a84aa670550876658dae0b538919625b1d83e1caaf6d8a745e18b43fc7e62add4f6ca4c5c0d0158670cf4467aed2a22f163538dedb5468379e4b1591683ce015f8f91d3c1b1d3ce78bcea327978206efe7394f14ed17b4a72dc694dacce651249f48cb326ea96a4bd81a47a0a9adab84d65f801ab4a0c04030e012a30c9a5b2646f3aef8f07e8560ba124da317b4aea4304fab0b4095180d776c72958102c71fa14de03f2d82050ea92977adf1e3563683db02765d02322f86ac01aef36bb03d4788e75f39eefbd82ae0f9d409935b75068152fae6361e1a111af3958e0c2cce2d459e0e1866123f82f3145168adb0d34ebc9f0dd7b8b93a9e8578d2f411dacf089be4ae7f20f1a1185627cfa9fd28323a8b0a8534ef365306e85d109cf113b9a391368b587b12431735ae1d06a74d9f29e23b8c9023f7dd9409e5053e50789a7df9431bd42fc7e641dfddcb244aa32c6c021b8a56653fe27fb8e4a3950be8bacdf1128bd031415d78f18d85ee2debd0972ce7a35113653f05e6c3510b2d97b60a0fd4aaf5ccc2d547a510e051b1216eae67d0db3793f368dce9d873d9d5a152a08b0dcd6fc25e9cf9615f73c70fd1e385d6efa51543fa943b3f1a24591a31f1f8bef1e1c81ea1624198482e21b378ae756016cc4a8bf6af97cefcfb39ca09f56cfa2c30876249f4865052c5ea98e5ac8690552f42adb7ffdd3c1bc1662b8c03036d766be778180c42cca3b26d6300c391d478e5f57e29649f8f61f53114a76bd0c7cb33d19102a32b067c1dff11a268696d27fc1dcbeed3a5f412ddd285e2990127453632336ee936afb12a3b4d922c1c57f024c7604ab8d3312ccee17471cd9d6141505011e96c81e54f6c8a5ebb7b232eebd00f70277567a1f42eb86d85d90013f2ffa09bcad4dd3dd7e09da96dc788d9244613b0d17ac594fb684c44c8feec7e57143bb751d8f3c0553af8c864f58b7305bd9c13f0340b83d1e8c666148235d065b7ae239c9172f8f0c857a88f82e4647899966506339fcaf2899120544233f0be6cb6b122d5beb9e1f821537c8d52b3841e2b36e4192cda14ec90f1d56a30e208694c8838077bbe5eb6f7a45a501f715a6314b31088f70aa74588a074a131bdd392ab07a564ae1a68838d9ba301536c38dcd0a9d88450a8ff65e28f1cd7767012c44fdd8a560a529128422a1efb76b95265bdfcdf7acd7cc1d466c169a84ebeb18bf0f8e77f7c05de2b7edf29320d1e7a7f21fc0e9983fff2d9abbb10504cf357285196dac216afc6232e7bb022e32e24f8859b788eb1c187f5c7dc04aae98ddfa0a209bbc32a074f1db87ec67b4fae0354ecf7d7039ac2c383651977733c6d9021824293328ebf81f2598f3e53c373833f8bd5b73bcfc51696cffbfbd20fa370d9acf0ad509d429254bfda425f85c0e98bfedb05b4e5f32a10177075a434c95c1845a9d8344c810843e83210dda2be2b570c67773e7313fdab5206d36eaa128da1e3f1e0119d1a656a2da2d0c0d8f808768fce95b3b50fdf1659c75e3be94eb4ee2e30052fdf91be87973c20a6f7eef72ec97261fe97ffa0f7a2f7f314d1a538e6c41b54b90c4b47669949e7ef9c050be70013b4aae306bbb4e1ac346c3a9dae0b7a5f3ad4bc631ba21b4b4e5a9a7c3b57a6d4f75f55ca71070b349accf8cf35be6bd9e2f858a6e6b789d0963ec699a7787c60a0482c358b557e0ae67f47eb2adac217d0c6c8010ddd96670fe18f0516b57d83c42c5134f81c6f85d4778f693a39cd06e80665b5347576a9af17960790116e63b64b6af9f6b4758deb52407462e045387adf05f2208b10193a4a0e52f1ee40a6e50443cf930d80ea8cda87d2ec86ec37e9807870a5ce26bbdb25c5e1c30e053c2373e8d7df4acd3941414298409ebaf463f74272d15ef9ef0338f3503f8b933747f298973cd2be0db84019dc489ae20d9e28e355169d53b022ea315aeceeed73c78b8f22eacf2f425b6ebb6c6f5f7f2492501b2dde83a77b464fc44327f666208f35448cb7213c093f8d08eb671c896f94b0236d4b2ba9e7c9722612faa3583791dea03f61dae2edab3f7f976e2a4d1586524c026f9516428794457c52255c398da94e568b0a7ee6b15431fa5b92d57fa8ac5191c42f8b15281ea39628e9af86c360565973f625ac381b03e7025edd80bf2a6ad8e025e008c3e101c742b3aaf090defb2f1e9b7b79931882754b559430ce12a06abe9e620dcf274930e997c332111527ae66f244d2290ba9529722eef0149f8354de46f9e7c77ce5768df79cfe8c15d8f223dbdddf26a338401fd6cb0f5bd209e7aa2b486a00de042f198fe42d19bfd42e5777b10ace23f85286931b73f707b6692a973f6fa86f354887a23be0415841967667e58f945ae62bd399f1ca6ed4ae5998839112a31cb354e3af9ff1aaaf6130f3ca85005ccfa1451b812513e72b81df74212ed79af0be557f25f8d32ce2dbb81cff9f30d49db151ce0a0f7d7ffb749da4a4a4d24e8c4982645cd9b598b3ee328680819f8ac59e99480dfaba345dead9ad93a11fa48c9fbbdb19193340c7d731d8c394591e536ebf260fe2bbc8be7dd907d287ae68fdbf5020a6624fc95d3e753b43c94e39fc7bea7a40cbad9325982774abaaf60e0bee808413e693277ec086f00f9f498c8b44942de9ccfca61a84cb9e20bc321a01f2dcf303ba1c3d2958538f54213e78287cba76517b39c7e30714c57549e51e6f88b2d5e20845afad8c0d32bcb003a5bcb117f6f2c45856c6379c83d41f708a0eec1f66afd7f9838a4a7ec6abd45bef5f6300e170540eeabb6996887ed9ce397b2059553cabf9e34427926ffbcf05ff7daf1127ea3018b3ade4add99b3673c5cdb9baaefb4a944474396026a1ee78615faef6b7a54afca6ac886aa3dcc08948424486917dae3f0a6bcee1391a6e1d057e337ff64e1c2ae251ca0874f0cc94298477e2364ab16d6aa01e14a7adb1d819c011043eb5d492946b945e685ae02740a4c5769bca0a754e1132266639d22dc9244bef8c1595708613dec5345ce2b8996a2e8c8f6dcb8f691d21b1e3ba00d73db98754360f132b322f9e68fa0aedc55c9cbd3fb0b5d9a5d06d3909ab270f359f422b0742f4aaf2cb3621d2f2065738071842a8882386b0dc915c70316985dd2fbe0dbc624a3bb98200132646fde7972aae994a75bf1190b15bc1297fd16de9091d535b1b629537120be1ff1b6baf20cfd9b2b6d4d9b4043e91debe975a8975f9f33b6e2b51de21a3ca02c624c253ace77c1c4d466b35eca44f37a6a17e2ef61ae2516a503b12a9cd8e59917150bd7b382ae6bcef83dacb5ada7d2a2225c12603dddf13d66bc7344ddff3ecd6ee91bb2877ac9352f49a1bc53bc5a3f789e13f266c099dae1a8e1f4e2806632edc93a063498afcf45e512c2969007a10cacd7ebe053b9088a479be290079ad37c630fa6806aa8187dc5e62bb2ac18a0bba8a8d8837152b26f12abe00027a68ccd66e9dcf4bd6ed3ed08143ed78bbd891ea41af05f1c4efbc92f5fab4cda4a8ebac032d3f0b0b61af72e57c67c2cd014c993299a619d9aa430cc1f9366ab36c30d3cd16e4e525c305878bdc6ba7e0cacb4c8c17594b7b8e87f7a2472769d226b775024e3894685b16d71223bcbb7cc6ee4c9996e09659fa58674af17380726f9a6f69540ebc1dc85e962f6104135985c427fa22b197a3ae2c3c44cdd5de6f72f6b8285af4c1a940142ffb4f10c6fa8a793d17da6edbe8ae01b69010b29cbd0ec6a34437d05fccc0efcc4699d3ec675c21728a8a9524c6ba310b72fca4ea39d5c4ff80cdc7dab0e2fa2a5c54862dab35167dd89fad434f0f9eba7c99ec6a3633c55c59af69f249c7cef4dd924fe897c6740a5f53bcb3e00627d759a52b457b779c6deaefde00f4bf2be0df02378c9428146f9c8f63637ef77e472210d53b0fa9a8fe0681be2266a93c2ccb08ccefd16e55ab0dd2d20ab48549c7e69af4157a9abe12b3ba99f30cf4f0708168bc53980346df93dd4087498d7e841688d2f626646c5edf59fcab4614a61916e1a213fef6792589984b045f39e0ad4e8eb429006b48a853f8e4addce767a0b49221d03f1a6171d9a78582c23ceaa171a7de6c3303ae9c67ffdfe99ef3a4ab2f51a086b11685d732bbc2649e2d51f88fc79b362ff3c325a1df12857b3f611fc398e4423f969051019cc39e7a0bceb78db84ae6e2764c425d927c56895a08e78aa2769ca17bc3c1f1bd23ffc7358525162340c64ec7d0628a035420f1dc750ab1f592218226fb04e95d04c6b01bac5397a553d17baf4250376ebe3a4694bef1a147f11052027edf49f876835ad0cdc14956b9806908ba7a7fe92fb67939efd596d6b1472a1acbbf421f6ac05efec6979c7eeda3e1391ba5c23dcb7bdf52e2e52b19a1c5c4feb99bc81bc6f2c86a6451d4bdfb4eeadc1decbdbd14ab46acd8f0a47b0c4b0aeab5a42c85889f0d935b28549567a126dffaf2df1cdf71295a9ebc5b81ab3d9b008801780c8aaeaab6085766de78d52f355359ceb6d4fd0a516514e53ae51c5039123e2b144f67ca24c7ea640229d0eeddd91a79cb0874d47ba683793ae16405d2bc8a1a11fde11a37842a854a6b18263baecf50153fe7bdcef4a66267fd14ebe052c7b1d0d198b0532036f21cac8d2d623f8fdefa01ed6568f3711c32ba56bb6d4600d4b3d357823d1be7592afceca247e5eced989cd8ba74ff9d1b9b6bfb3f079a79eb8d14cf3b60dd90309987e5265914c180ddcb1e1495a2868e8acb71380b9b80297e76a3fb19b613c9ff27ebe676bd573a3954f8d190a97e750b714f2c29dca44df4f52a7265be733e60075df0a1abcb5fefd6a46ad4375ed5233e9e2972d49c04852f7ab45008411e2325dc11509b134d5bbc5ab6fde407bfb327f39be1319698ac0baaf36fa14bb8ce79feef2f589fc45803d2b135bd720957b58558b53d78f171ac91282a79f1eedc3466a3ce1d91c237ce89128d384bd82a0f6cf37b9dc15c54e0e37a4315b5f0ff42af5543c6408beb8cb260da789923e3b5487443592dd6af0e11c7847f57e56a182637d592fc49477f4fe5fb339bbf212c1291fd524fc4ceec1804fa42950f1b8f03fac51492a5f7160ead41edd38378024dbb61c7105976a96804ae149befbd6ce010f37b8eef43c1dc68aa376b222bc64c8d45aec8567f2c470056c63c206812880568ae3ad5657b1aebacd82ec8d7e17ee29808d340133396cbc4d9690a7ca3020f66ce37c8509862553b8de36bb28718a224d1eaad0332dd33ed79ec5bb82e776a31e1f7b21213f1a632cded30eccf6fc90553c30d3e91755d7fe468a492c13da0c63c3a4292ac76ce63e718a945eb09eda4568d9d43dfac328ff58c60d7d926cca1d939fc04acf43f9b8e9a4ac1e7758cc37265660fb40dc3949429133496de5e4931430668e39194de023d90b931d64ee68ddf8687bb5bc522bbe28df1d5bd20a6902d29347424c49e2ebbdcfd9b9e14092234e5bd3795ac72ab8d203009573bc350a80b7ce11dd3044955804e1e848474282d9da59a24ae469cf8b689560645af64fd25a0df491b4c7ebf6119d958ada9236623b067b34a26aa6d611a01f7b71d01cda4f740817ea563a25eba9bf276ed731a606ee7095098891925bfe15d85c86482f2aeffe76d3be1cba7a7c29b1ba40059bd40b92c9206033297f406bab0c4ace17186eee924164705a5f2689215cf5ed772894bc17e572ef695a896ebcf3de72578d2424b5eb0366d9fcd64472657e633fcf7f6020d04913fd3b55edba11b9ca73f5173de61b2e28ef5cfd213b0f20ec027db889001d63c471a799d5b6d2cbeaaf25c8329eef73c5ec44e375de312b811c764a78f5bb9b43186bee62b9116012eaa2d6bd233e5eccdb138744f1b068e04b8687ada9e719edf769f3b705c5b9f11a378f1d1e0157fa1a6b19d2d461a7c19c050f2a60232e2f2842ff11a618b99dcf1ed85014d05e4fe83c5ae742f8049e5bf7b3b0cad0fd5d6635f8753cdcef56583df712525681c6dbf006478ee5c18dffd4285a43bc5909ed30807254674a3c339a7dff31577c5a6c3723d2d32d45834ad4ce8ca4923f2e464dcb395da920a08da37fc6a41e0fb2bd6734480eac3fdfe94bbd0da083c5d8cb3e018885eb8561c54d471bdd018ae46bfe8913718b082947dc973d072a84aed04d87e37370524ca09dea2979e0c48f1bbd2ac28c7ab068a935aaead1f76f023686c6dfe8abe425b0fe92cbc41b34512752baefc54b205ef5e8f589028478466e02a3fa06071ad518938212bb74e5c59e1fcacf337000810ab63f1a50bbfb6eea6636f4364a479ea685aaaef94f35d6fb3b9e799ed22256b9afa8a4c96c03c8d0b49ed0f5f7710873fb6cffb49654bf2e4171bde14296686740a5cbe3f5fc0baf4636ab74de20651a96d9f55d1560e22f8f1948086dd502b3ddc7b5c280dcc1ea7a442c2c822dc53bc6183e3dd42ef8eeeaee6ce02c13b02a60298de5b71f4cb58a634282329b9fd0def2f3a2303bd64b0391d43024b4df1294a7aa31e8b03a4a0a1a56a701579a9639d7ef8f7b806170c6904ce3acb21c157b236709ca95ec7e72ee39f727edddb226c201a0808314645fbe76734383dd6d322d236b9f9c0a48fa1d8d4adfe69897990a5db2213783f6b00181e3e87807762da542635136126a45a52780329f20ddf1f88db39cfb8a7ffdd43ec30cee4cd814d10f054e333fa0f2146e29d1742d77ac71072bd7731c77865ae9eb24c853ec0877d82a9b3cf6b0457a5dc4b6933ce307caeb939ddc9121b46644f7589247cd8d6b23a85930f91ed2d7131cfe343dd8ac73837f987f907605bf002084f20d2236f37d003dc327f2fbfea76956c19fd216f28939baca6aa0ef84f64a8cb17ebf9cfea605b77e63cb2a02177d6245a9633fd17f655c51e18e45ce02b7bb0e2ff52651410b48a69a8cd49a5e315e084146c3e4ba00ae1e6183976dd6d377203c32a8ce844c8465ec61eae6a9ef267de2dbf827a349aa8dd3f5a246624a73bd75ba8c001287566fdd9b2376dc5c0b5ad2ef450b7b38e96ab17c8661126fb30282f7200366bde636cb6fd9a65bc46c2adfdd1ea57f0d5a899afaf723546f9e5ec73a642ef0c5b906f6335c9495dc66ab23a421fed03848b67bd7c52cefd18b5202b01723caaa6c277dba4bfbca6c2f40f286921cd2657cb0d71aa8de40460559d54e38decd2de685e89ae3956ed425c0f53a0f42921334f6b5b64c193c963b945459e30a0d0bf430d4089670d1fbaacf1d0482070cc13d8eaa7de663eadeb156abb7650d747ac74e82a6065fb613a36d96b7d30a8ea8eee7b284995dc774798a03004276153c86d14920d2e799de98c82ec2022b6f371ab7974438318172baa7f3fcc824168b41facf5a53a88689d09e6f1d64a8737d662d0d53e0335327bb13cde62d79e265b3940070045cbe65ee7911ff9cdb9394b3d3b54878a2fd1e08b5be7f6aadc1b5108aebd024de5f317291ceb4ecf62338fbe86b53f70128aa03efa08634586cbd82113d9fb0a816d61341dbb37fb4ee754f458864e82a8e5d57ba8be066f69efd69935bd0bc535ec7903545f6d0b97d9bce8a3df345f1004540ed36c7c0f0fcd56fc58f0dc879d36b71f074c437e90574c6bd9d388a78600786ba63ab188705d9a0ea66588110feb6a4c5c462a360fd91fa07056ce0277c9282dd36639c7b572b5f9438b17f7009d0f1d97dd3debafddf81696a1bbc5677a34d1455a30fe7811e7aad2abe5a13594ff76aedc3d0144980cb00c1458377a482677fa581650823bdd93c0ea3a0070ed00e4cfa582c4e205e79a79254a96f127c721ecd2aa8e948f534f10127a87abad1c0309a050b8f04144f789943ccad503d641047e056f354ce61b8cbb9e582cd8f4d51bd4a032efc103e91cb5dd7534fce6beb4ba58d537dd2d731ec8ab6e3e82e1cef18b0d22e691c5e415f144c12744e7ad73e6523cc2ac3d3f0d34aedb924754df175e7caff15ee5c5c101525eddf648385a90b4e6ae2d3933cc89459543ee941a626ac316246eebf6b62f9d63d7c9981af534b3c342565579abd80ec5d47d2ed67546286bd75de63942e6b4ac0271ba54e947e6196a0fb4e586f9353ec8175a24e7f4953aa23b211c7f911fff3b4234b236cc0e312649ef04bc2b52ed88e9e03c9bec32922e46606cbdb6d29ebb66b52792b1651e69ac08c118c68b61ca550ecaae780e661c435aed594f846ad3b3ee856f844a6523752e2fd5ebac1dd20c407b602d46b00a844bb7cacdd3f8fd28e65acaaab531285413a9e9cd9d53e2fa64e0d16c7de1d37fa5b7e6be04aec82ee2bc9f94b4c1d91a117255596e842ab8f9fabd774584c88609e4683fcaeb6efec7a5dca4c8deb3d82b3fd0054da52e79408057167c4ba504dac1b76911efc778c6c8484025b9d45734046cd47b735de8cdaa87504440dba6fe6073c0d5186c8cef6260e38e5f9345fd190d694a3f95397751101d4b2ed923a0bd244e4d0709878a821acf44c42273d49f8db3b18c932ccc9b9ee64fb4a1a545b56f83fea1d96c6e9d59bc9f53f10dd8306f9f6142d251be92d24ac06ad1c11849402474958f2ad22fd65c50f763daf483fe3c639a9b0e5e24ca96e7787b1b1cfb2beac7a4bf45fc5cbef8c4d9a5caf3f89079dc3f9aef09a36662af9ae9750f76bdc5d957862571f1e1c4839cbe02a6c9b11a6852f2d0c4124d35d9411d2b216c8742b85e586f7e4c9d3e903170d48ae1ba361833a7996fd774af7554178a91028f28dd14f6d8ab586461c9d3f11140f1cb853dae4cc817cd66d28cb9254f87256368f52f2418cd458835d08414daefed5a64bb0f1e94149cafc79ed301f8d27b860c63b10493ed24bb789b6fd92ba3e192e365153c8cc87b5e1c793a56f24a3507c9d61bd5234cf1bd379220f18c7582bd7cf5a6d7c22beac87f52405dc7788c7c486795704e4425cdb406001faf3ae8d53c26489acbf490b607d662135a63a852779e6eb7d6977a0041168df576db9934781cd399eb81650982ebf133ac6da8d4a2eaa6cbd811e543104e035686e35b3bd725bb88767a34d8f662b2a232bc7cf2162f49cb5f34ec494bdf4f775246e739f89033db363895c6efbffa8e2748f81b58b5f6ca91217ba8a7a8849530b399662c320025a11818187bdbdcd06aced0cf6b0f86ebb6bfb53322d9165a49e5280ecf96b8d093c277c23d45e868116318487d31af70ca5b8a7cbe3e78e7fe33bce7bae3c4352bcf3fff28e17c2ac49b908fc3ba6b55212bf560514b4220d4f73de2c9c410c9f761d9b27de23b12a7bd6620da5d130b2e195ded29dfbfcc18824543f76b116d90640a50d20cf098197b339db5cff3f6e1d9ce10de5cd03dbbd0bfaea9ae41d4401ea31edd7dfd235618b3dce9b1aa61351f4f8ccdfe92542a57e96550ce7c2eac87ba722ca58eb9fa567550fe7ff1570943b5fabaf44b145c5361fa94e85e0a4a36cf6934daee331b126890f6a2e7b4661d7f399e1cda7ae4abd11c50089e85b2bdcda58626ef3749e897ad88b7c08985178e33f73219b2065adfdb040587bbd2db5207c4e78f841b9bba7a84f95f124ca27e6acc74566d95bea7108881451032d83667ebab2d585304dac7e791eeb9be3363a0eb2e879ce9ddaa5d1a8e6f64ba202b233cdf76eaa94e790eec0eddfbb6786c44ee77de668fe49a94ee53eaaa78793f3b05ac4df5acd3bf222eb189ab8afd8696d6b77aaff152a714e1de4fe0190844d19f6027254149b793068b3c5c63d8dc3a903feacee04276c8cef867079cfac8f029e73d7af913d84991178299f758dc00e48da7ffb137c4b5f9becfe748023b88fb50e7e7f0aed19f0dcc2853ca0459d6624e2409d80f7dd09384fc7f9abb60fe03ab410f3075d6c6a5cb93244920ddd56ecabab659b723bfb7222e2ac08fdaa8b714144021ee39b7910530b86bdf7991b464a74d5eed75bff911fc9406f50f3898c3c7e74e9cb87dde0ca54f2bfe0635206c3f1fa2d0ee0ae042cdbfdd86b8eaeb540cf9414fe9d3e2b5a274ad5ecfcc8f4856b52f71bdaac296827d73dddd958095c224057309828ae5f30824f2cb5ec927098151db301375449cc780a70bc687f175a63469a871e7d2c4bd242038dfd458928c14b6584ead6dc46ab1f58b6821159703a568f874cb7455e8a407dee07e9fd9e3b6a320b0adc6fddd95fd3f86173fd1605354614a5c5c33da316d51f55e705f4a830dc614b9aca6f3d562b07c7f301bbd083e544a1ad766336cadfc2460783a55836f88bc8540825ef0e8f7b0772ccd0e720f3e7349c81006c691bb256523a2cc53249ce6b6920e4fa36e5a64d18a9bab5579202bb81882d5e684691e970c56502cdec57a7c0c165da8acb428d0adb080275ba36773bb86ed72160d418235c9627046558281044d6b784a62394555fcfe0b04f0b610c461ff9faec5814ee787a0ae1d83c5f6f17a4605a7c434ba63636da9c630a04330ab4cdcbd406d9b53087540dbc5d3e974545ec4dbee1b4ae6997059a597e586a3906d7d8f0148ed64a56e9d18fb87cec85d9e39a85ad44774280044aacccf4416fe1dbc7c2b9b2f031f88756e904fb45a750b529873bf09fe952868a295b40c562267f76c9d48a650106c40396cc1e2c3a6efde8dfd4e2487855e84d8f3c85afa376a6205f3863b3d75debd0fa46536dae64d289ea869ee03b57760fb2765e322866c9f50fdc05c6f98967a61e077d0d5cf4dfbefffe1d1353fbf2f8d79a335d03707f84a49db21f665e93c96be2af932fd98d7e96dd5bd45b8ac8d42a689e0caae16e5fbfec88d5eeb4c881713a41e7814e157dd33a9c6f43919534b24936ebbda8ec85ec9171fc5158a34e8aa12857938304e649b7d386712dd435440e687025ba9bc591f418a8152b5a6a8459efe08bea4c52b57830ba69ec08e34eeee5efbe141bb5c30cac7500f446f8f3b2b26bbf4eda580e6661cc688ac8b0177cffbfa7a1155c7e4558626dd306d65da696820d2c2470974480b88dd50c9dcca0821064d8461cb770529144cc4472d18a3f67e0a83f70304d08c14b714d76fcebefe92271bf822bacd24351c97cbbf7ac995761409409d55a5ea9b3da66af3c21ae3b306aeeb7d75684eabeb71b6ce56896987aac1990606681d324874e78043e5076d612cb5a9cb2fc345fd6762f6cb0aaefc2c4eba3055190a852df1a95a93d3a1813dc49be358a2ddade34b0f3b926924a30cfe9477c3b29f335085c59adcff463fa11eb673c230e9567cc4bb81a7bda2f68498cb40aab5321c76cfe70dd4c03b6a1ba903162bfb31288df4a32556b1a9392a38570e96da98bd4bd6fbe71be2937044d94c942f036edd290f419ddd3e58368ec4dfc118cebaa1136ba1cbd8ee43a0fc3e5ace05284f0d457af3502d4e7d6d9c46b324dafc9a7e7959ebe91d83ba2fa6e5f13d4575cd9306d08c3fc2397c93b76db81671125565e639790fe34ff8d5bf19f5ade9c3d5baac3a69491b60b32de5781930879d79bdb5098bcf85ea9c41a60d6b71f2772ddfdd354ce91fa0c2007f2d925936c7ca659b54059076db64bc081fffcb41ffb2faefdf1a10fed6246c8def415191a8e3324ad2eb556ca251e79bb18c92c35ca0a1b121677d2d1180a9ba15e3c5a710bb4347bbf04c854fd00b55743cb382a43dce117fcfc15095f5b1ccb943c5031199137dc541b518834c6ffb5277eabae2b93c5aa6ddc8922cb6dec5b0a8daa412245f8b3eb0d6c2c369bdc707a6093e057130c4d42fcd154fc3faf58219731b07b4094ec398aeaa0e6e9fe01489aa7be3d9a2a2e5b70f2862464e80b46a7b7fd01e1b03c1cdb7d74be3f970bc4c15d22698d8e9b755409a314fcba8bb08b7baf3ce247e95a4a03828aceec47304b985abb89cbb4c773f6d68b1906424a2bec8f290a1f8645078f2e20528e0049ba3ba4c3572267116f7d0a617e6bc9da8dd62a9b041e28e360723b46aab85b3d10637040114ba85cad6bcb9b0781bd77ed10f025b41ea89ce376b5fb69d4b3362e0936aa910091e97de4524a282afa90d0acc8569adba17562024d70f0c757907898cb06eaed98d87325df7c83e310aa2f19dc21cc291b18299eac782dd95789aeee47e1f14879bc2452a97dab1865edd4d946b8e8cfbb109cedb101eb74b9abb513400ab4359b24f0eb53724d3b9ddd7d3ae0846562721877f0c53f7c2841421977e8d5b4b71468a9eba58dbe15409854759504ac871c0e5e201a543c3caac4ea7bfed47b81b30571477dc39f6ec447d6db1ccb536e3e0f05b9a201eb96b6238d804a2ebc816122c124614d2987609bf549de134d137ebe6aa4629802b8ec85f4c8a9dc87375bba217a7fcd2842fefd6d0e27d7ae1d3a334b5b2d7f17f51491b22146342d52f7aeb69387409000657031dfbd3996d98d0628c4138b50097a1e35c35454011098c1b5ea79db43d8b10bb4d52c10c34d73404a647c034c4b9cc624738c65e382b37e46b411e4bd234e4e1a08c99d9017cd3d1b9394dafcbf1a46237c8af8ccb02310fcbd21eaf170a4d7960ff8d398cd6f9c76a76c92a34bd393354b9535e41f307e275457dcaf8a430c0ddcc705af16fb37597d78d069b588a75dd265726355617ed464c5e680906e76a3d9d510779e1ba28d8ac029251b953c360e79036b05ed5c485bdaffa9d82fd71ce049c3ed44c4415888b897a2ffd75ae1c26914eb92cea0f6daa3542afffa0c11874e2a75cb50f5c0917729481e5ecd45d33a4aaeebbb09ba9d27537c86e503e65247c61006488770b2172aad0d4a6dc85aae4032e9995486602bfb2aef4f9506a8fd82ced1bcd88ba8c3836facdb9eec6d70f8ed529ff7f9d1b74b556737c8543e3364e573694d97b8b9074a34e3ebe61cf99e32ff061378a6d37eec4d022c5b5f9ee01af1ac48cd099f1adb1b080ccaf5c4198a98052b3c9dc7218e29e34960223912cd3772e028dc0f328235359473108efd2d3a509155975ac0dc6f707d095d9d0dd9b3170f40f3beb278ce2dc191dc5b2897e5d000f3c47e627cef64db355d3cfc584c1a61baf9fe9af81d50405914a12a283ba8ddf74e60c4d4e785684d62cf0487a94e30fdefacf4ba5c1462ced4e0c2ee722384ec8c27bb24b102e8b86e230a4f606e827d3f8b6ec162a7a397753e157e518c5224a7b1e96fee8280cc056f8063aa717847ee7ecee41671d65c0156c0bdd177a0507ee88e857a36107b3fa704aa52af49e10d31f75ebf2c636123ee8aad424b6650e728efab0c70e485573a9f79c9f5b609a29f477267b675c977490c42c4be197e14abaeb369b39c5e72feeb1f2aeade1215ebffb5d6cae465481c0e87a4195b2306ade01aa2ad7cc8742a5888266687808460450f3af34a46764e1bb07014d5782ddb6e875bc14c34ac71117593ba47f31d6e4bf60c4c90901abbc27d464b8da22867cfcd07c86faa4f54c7117b5cc310c3ba4e8c284501fcd447ab603df9fb191b706207dcd1e7226f3ae5c136daa07092445511a3dd44efa570f103b911b188d55859d24e272586a370243b4cdc8dd156d75ca402edada044ad2e608bd05c252d406a336328d79fd6703d76996b7fd29155b96dbb43a402de0d4b37d421db345eda5762270a4f97bbf808a8dcf1a7e01dac366e8962bd77ab72f23abefc24d55e9239a03e11089ba5de7ce87ee1ae7d42df36f935085b9a96509c64933c48b81240e8ae8149e1ff7443859feb11e33e4a1048e26823adc637850ce42f1e9f5affef54a3dc07fe814408361781799aa1b69ba8ea4cfdaae84d8c3d4be40a47a412dfab753cc0db3dd74409e3a5f65bb20af676f0d7302e73a1e06eb3a936b0e2f93ca84cb7ef6f10feb086a3c03c35f2c0cba7c04e0a4db9a6cde4f670938c2b347fd5f6d69102a89f43184ccb679f221fef3d9b0993e72f988472dfb4f9483820c22fb0f0707083aa558fae3a9ea0e1e65d0a6832ebf506e7ce5785d610ee5664fb786141d2c7095c1ca6a8323bb24f94733c84a1fc2fd99245bc31a710367d422e46e0732e4760b5d3e6e9353b16273f1fe17bcd969909b27ad36893b472e92fd0151e7427d61c6c5ac95966bf8a449d1e65fad02768912202344b6e42b239fcfe9d234af574e1238f357ade635659d1b8cb12e67f70dd0b7747f2df96dfa827cebc16123d9ff19ba34898879254f78df9262b17cc97199fb4c817f67fd77e48b52460adbf7d05be0e6de0ef94e968a4de8db60222baebff8542201cc2a9f594e6880c2fcedf2ed00f70a630be4cff63304c8c1186f712c92300db4d7dce0917ba5ea481c75dbf0a7b3b227931e5a2c9b42fe2757a0d81aeca12d85fedc78053710703f9eb669776e9308296a17d70bce204238e4f5e0cc3cecccac79b00d0e8b3b36955c9c0e081a4635ce564505add2d586e90a68519c340710a983c40c1cd04ef67bde0f0f1c61d6bb6eb4b65988e187abbca3aa80d4cd1bb5eb739f38c59fe966986a713263679ce997012d8632f537d6f3bef169adac8c64726449aa42ab82dcbb7df16827b9f17f7555d507191e5df2a0aec9c61c8b52cd3d7f130278eed8766cd945bfea35dea5891e397f8ffda8109c6e87d8025ca7a8eb359cb3a8c542254c3de4f60797777d989d042e6a3989040e367fdff22b626a3299b0c96539f02ba02422e6e5ff0fab6c415a660c4a6046cc739900d6440e7a69f9254dab17a150d6ee927579b319372563a285a75ea159b765e8983771304929d5bc83ed964c6f8acfea3c8a9d1cdecda0550b6fc9dfdff1a5d1c0e7322890362d4b028a80a6468c8868c285b4f0e8d1391f8bdeff5876a0e69aa17aea52c48da949872dbd8ef14b59e36c2bc30298e38cdf8350542fb312ea4bfab522399f5874f70556f8ff9106d82223dc4daaa4a8cf9d24d9f670fc690f51b203cbfe77b2d06ab5d2738a40d758b8d5855ea64d1dc0f1dc3a832961c9884c1205db8e247c4b9830cf737ecad525c01c1ad2ac70d91f3bcbddfbaaa1fab92ef863d5d1fcadcd47d108abfb4ba6a12391216cd8afea509bc303491ff512f5cfc08fc7f338136a61b4022a925ac3ff1dc85d9264b4dfe5a2e8c89b0b6dfdf17f30290d4b5cd266d2506267273de64dc1fb928ee4be94646c797bb93cb4631591e18eeb726eaf75fa964ca637debf16fb47d686789a37c8c8632a005f8c6a29dfec02bc5dfc6043c12b2260301d0689f6aed80cdd7f5a88775b7867489c9c6a1f9a95d3e538ea8ba15978b7f4d610ab987c8f1c65160ed5ae88a00252b0ac3a3f40173e411c5f5745b3f54d6174d64f2a039ed8d8508529d5f23695485cbddd7dbc179b9326388b0a142fee267c3862fbfa627e2b5d42b77cdee1e5eec2079d15ce6c3c919d946eec13d8c2a728ebdd864ec99ad5ec89a43f0f2acca38464f8b10b8b5b04fed6044b2728cb4f785ffbc886a42300fe37f780e2cce5f296282d390d9b88f5583d6f50956e7485049e1cc8d605cae1064cd50c0008d62cab60b2418a9068c688162a291cf682e0283b4305a145cbd16d43da6c2354914e7bebf0f6794589f7250c242f994f5f509d22544de70b17c787c3e5fdb22b719d83f3d977366847d186a05d486e9c3aad61f1411d1feed9e75edbf65ed31e17f42c65cc745df5141eebe5d51db6760605072252bf51afe5008947bc4164468a0eb69e3dce9cebbf96cfe10b3a68c91413e8fdd4fb5840e8b3a5750aae16a93b13dad37f225075c448d8374d1a327a649ff036ec4f30cc4aeb9a49f1afbe79f1feef03348034abf450b83d6fb00acd97e1d293734b0032d3e23ed412ea6499ffa5ee113e4cd5ed154e4242b53555dcf07ed06aa2a2fe930061638f65dde87d99ed326c4c80840746a39ae454fca9c8100e1d5abf22fee4ba517b5c681fc7d761d38e016e0960840689d08b7b3441f903ef663c6e96ca9e59482f6852434139d535169c24dba042c6b51cfecfbd79917875cfc441267ba82f6b6888c0d83ecb7c95176006bffa9a644ca342ac6dffb23a5506e05fbb6f31ce2b3a08cde6e13a4d6ae65792f156f75d2229a5cdb85b67089ae6148e0accd39506d734d723a0963fb85e08366bd1d1b09a047e918b2cbe88353152c7cff429c161b49318a46aaed0c4303c95fc2bb28f654a3983b442c8795d643c931fe8356d1c7a7170eab30e6b57d7404b4445f80ab8e628dbecf8379f561a9de9592277b306e5ee57330c5ea3c82454f094ad7ce2974bcc0b5ff1c6d788699f6831997357d563a39471ca7c774837a2367da8b038f63f43bd4caf32624e73a826ac2a3a9024f33e93e2cf4d1c8e9ce78bcc7a357407efd352d79587998f13edc46bebf5d9f23d217dc9cecd7600e36b40c89825f0d2df2f35a0aa908bec95d868871a83a81c82542355ce23ef6590b0d5262335702844f53bccb4db08585a86a37a46d34954d8e89661529ab55b409af465e3eefdb95d9307695849f4e5f88cf48e0dc2534e2caaadae05a9b2d2075e94d8ded82defc7eedc8ab5494ca244603326140129ae66c6bebac8a845632560a1929eabb673d49bf603b28cb1853c604580d499aa7fc644b5e6c6307b97134e649180419685a71c50c726ef4b851ce7aba3747e786a47fa4490be16204be1b4318cc9fbbd8de9a37d24d369f974f79f46d879506b410e660a2c55727c7bccc0d7aa6acf354dc55d70ca1250dca053c3f13c04cc1dfd120823ae073d1ebc4f2945fc676d1c28e92ee193a7e9d0c73bd74755bd0ed4286ac722a6954d5a57a494c78817510c333e64ac5f8f8c823745d9e3d49eb1ae2d1dd324e0ea27eeaa7ed380af83d6eac79ec0ac45ab80ac889ac2671a87e24d20b7c292180d2e579f534b7ab5fa631bf54686a6582d8deef095b7696cf30771e509f6833b898887b4dfdba64cbe87aa2f6bc53e37a79e1b396deec9848f9c9e0a6910c6ccdc0238f4efe58e63b334fb8c5c5c367e704ceee656f51881c67d432e2f04998df3c2c440fd3f4d46de8b771d4c337a5cf3e83fcb743f61a69fefbf9cdae2920e9a323be4323520657af76683068049dd846ab507df6402960f5fad4e486a8805c75564c5a2024d217100e630845a5ccd302c09ba47d780027b1f80b79bdb099bcbfbb9812dba2fa221a793c86bd079958d3cbf7f5e96cb4a739dbdeeec08c0792cb319b8fb38cc27b53b7c9b6b74d34a7ca058bb28eb29bf6415d43288294717371dda0726e564ac57a5843467e2dda9d12d77c4ce0202428b40474cacfda68fb1f1da992024406bde3d8f757c08b55b57c659fd607e229655478573552f4ecdb95f991e1ef24543308633ed2009be1f6b1101955677ad7c0764b1839df6b21d0091a04a69afa1e96a565b23896fb3098b419b799b6e5d017716dfd2fda7b130da001e94b9b2eee4374f847b05aa73f93a3347dee517b609e22a191df1d96419e3ebe167bc3356a3f67c24c345a2f39cebf25d60d07bc463e90bbe0488ebe42e658cd24d5367457e074b0770480735ad0743b50dd76ab8fd80d57b3aee0f5b039cc2bdab175a88f8e3dccf9d4caad057dfe7f4a08836b9c6e25c2cd4c93f36454b46423273e391599184a7007608d8703961da02457d80991a7111219076ce156d570c4c0292d324080b7c5014b7b9b4c310447a85900e5c9f89fb29dc6076442d2fe9570f6ac26964d7636f8fdb5fa706314bbc7a649211eda6d12bba489dbffb654d74396460724d2921cb5c4e70318ad69e728a073e95008101a1cbd9320ee37a45786d358c12ac99be489320d864fb5b3d642251c16987355c89c9ea4b0f12f57706cad840a3d308013272864439a998d952e9f6f20a4e6383aa8615080dd9a6157d3ef647e81b567f1476a66f99c097cd601bd5e4041994851544c91e2d35d7099565d4e13f4b96bdcfeb435ded361d0f2bb6b7971020813e7454db40de86b1bbcd19d92388134b32096fff4bded0d3c96ad41d15fdce2ba9253901eea24fea0154e97e2e247391f088eff304744138ed802c86c9e1d11cdff63cd65aa79cd6885b6253129e73437c044c6430135a7974529d3facfcd3e7e3ae27a758ea64c6242ff15b1b751df20d515ca0f021d33d9132158c4dadc7a77c6fd7d75cea875815b9e984683b67e1844303f5e4d132fd13d18da77cee724e61811166d9d656753ced967696e92445cae1a539284bd379850a0391a435401d1290c898db676cda3d8bf7b6d68c388254814d3124b2d415e95b6f96180e80c6c6a879089678a72b0427fac3a891ee83c6ead8e9f451f36b1b7747a8862e096c4feb1ad144f15f7f8fe2da1c505f68e7a56c385a1a9981dee7cf0e5850a8f810d0aeb66adfa60e035e9ef6c3f5d64b6e223c04b8a75aa73d8dc85aa303ec814fef9cda7ee8d273631f270c354b21a35a718f4ebb0a57f92cc990d1c1a5b5cf0a46f332b028fe5074fd62266a3825d4e887199956ea4e8697513b6b0de44d82041d51b1db1d8cde53ff03cbc7fcb3199c8304e6047a494ebe6c4802ac1b93bd04ecb0fa256bc1d840af5bcc5c6bd4a1d4ee917353a89cffaa5e5d679a9f9c5d8863d18eba4cd2a88cfcc79fbd14241a6dffd1135014dcfc3c766789cc2814681aa6439dc5e9a09a960dd7ffccb15a99ffbc8ed59b29a1b81952d9ba4281e678fed4bfafaaac2bbd95c3b99b75705454d1c079133941d72425e9cb7f655738ab8709099047dcc2d0e908c6087b16936872d87022e1dcc555e9d9e1f4491870d1ca2051d4d08487167c8d21194491a75f4b7da28cefe4a3288ced229accc39392a28b9060b4f61f6dbc70d90ea2d44e65bbd36e749ea840757be374d4671b427fe671fe9655a188d12d8620bd09dcbe1f7acaa25fbf065182b6ee6c35db0f0581a1a6f1bd4a5c727b4c0d892ca4f869784f3e2aa403bb25c248a496a2249f9d1a62747e3b53851a1338b7e7d11069116458a66089e05fa3a506326431441da041189508315b9f9691e27f4a8663bb8d6b04b69cb1d5a2bf8ce5f41f89bfdcb767d1af071487010f2b4987da08b4a16f9764ca4207e0943d0d6471477a78c1b683c5e5ed7edc4df516503937fe2430818994737ebf81380f23ddcc66d66aef876628a0343ca30c17b531b4a414d90ba6ae13a9f6c327ec3a9dd3e2a04b9d89060f9d3b65576d6e6ca69915cfebba81bb93970f6c98ce3897755c0aa43c9588c5c82aeb6d7375549fdf5a9892b1dfb477ed0c1106942dea0de2e4f4ed9b8ecc8ce2d0482f1c38969ba979dcbe2a818024cfb07e16ab2a8c32eadfd7545c6cb963f7539aefa34734ee7b177fc411a075c7b1c273884a0ec15530d0fb6e2f4389b42bb90769d17f69414b76e247d21ac6450917cb6eb95c930c4f4b9481ff65a4aa90c2ebddc57348df10fe5ac5245402e3d2227ee3212115afabd9d95836990dd8de20b5fa069f2295d1e27c826b803349ad984d551056b87df5806ec6e5acc23fa645349fffbc97ddf487e10527ee3acb9dd2e9de8fe8d400be53c0bb5dc23e4e38c1b94d077260b6dc9b16ec084b62cba0ab308c7095b1fc65dbac1b2ce10c10b0aeb6d1bf019bee5f4b536ba2915f61e7e2eca782edbfd23cb87241b6441e9f184d87132f93fa5d9676fa7f10d13ef7fd625a6bdd3bb21728647ae20fe92ccb8d47835efc63491a0f0d8f0490a679c6115bcb421e2662ccfa8769a826f64dd010c6b91c39f46273f55323e99537741501bf49484aaeb32db702119488c7646f1f164664e6a531dedb5d6e3fb7025abf146ebfdfff5ff1db22a9fa94a5583870427277e28fdbf31caf1045d9066239e583fd48e6a75552260ab989994b56a2d0b326264ee27055cf31adfa3268ec195dfbef94f35f0352b9d94c0d8ee9248b3fd438bd220be7d373212ee2c8e8e2f90787fc423f4581ab4f05f79bdf0cc60e3e75a198ba516f89ca64eb91dcdd66bf13acc989be5d4a6da03f317e092f04669ad1273ec17137ae2e4929f6e9cc117df68c2f6abe48c0ec6577918c2d67b5222bea8c0cc905ac62a230e7e149b50ff454118d9409f72577bda27d2fde109643d9b74691349396265702b71ea71b7f63eb5063175df8becf74cb74868f0c6565670a09e9493d04c95c56676609131818e045655d496258114878a8bd3e17f16880119ee2db630aee94103f13e38f4fe386fbac239c4e7899c04310faab0a57a0a4eff7a60c798e602d0b2a41710769c0918b4520154aed2314635119b2d6c5e5a2a96b962e2bf48b8f4fceb5a445e2deb271e41f2e686cf70d2bf33077b6c9ab6ea7103e891ad4e3d8b972ff09af688a25667aed4320939356ff1c10d7c7a9479714945e712f3a7d2b7231b5459348e14260cc76d192402f962ebc08a18832d17e24eee129b74df2fa537357503c65cfca65703e8ddc188d41b37d10f24ce2460c1ed2478cca40ab593ab8ec6218efadcecdfcf936083b4af7fd57ef296c1a854a97a4ea4fc16ed487b4857bafdfac465e87e130740a3b2952d18c8fce467e6580508d2dbc20e1d8143b4e502ac100eab674bf34bb88b2cbdceba98b4137d6ad10e38adf5b987ce340d9c5d5534b055d8786cf7276304ed9be626466ae357da2415e77a701ea9eaf5094d70a38cf1c2877f0de54ddafd252e5db4241fa5ff80fdff517d813331461082ed7357c737b969d500ade3389306c7208d032436231421572b83d025296eebb83d44c1b449b6883b004738cf19c51307da55f1108bd37c39ff9e83f00f893d0026c6a954b4609891c10f4bb6fa7ef17d30b105d5371992f849762bc37459f7b6af03e787cb1165d9546dbc1fac380e2eb99eb910b27e836dc1e9a832634a00ad6edcb674ad06c436a1dd7f86dcd1c5799f36dd6b135c2d05fe726340d5f847daa7f2704ba3dd885b58feee17fd96c73635bdc399e5f4b512646935d61b9051acc19a039b2323b0ed84f59a27ea98a57fba543c3705ce17ec441eeebcf3bd6d818a8b4af30c4e5354125ecc8a6a116020687d79174cba3f90c604bb40933aeaeb4d12d23afe6f2b0145ab9ad3239ac9e469b55f58037f421b21ac0576e7db57ef1ab8a9276968dbe480d9bb32b138d2f3f4872980f0a08eb5d1ce22bf52d00deb9f95d025294f7c525520edcafbfe024824eaf89abd22665e248c9bb32ae0cc230ecb00028b04d86f491c1d44be1b146d4b6b097fa44331b8d8c687683c0f525a6343a22f130b8c8007e8da978199209ff8b2e5aa9bebc6c2cd63e61ea82ac67e4e5f1755d200af401da3a1f25652f3195380614811c50967d937d3a588ae67cabc56228aa06da729ab806dad25128854b2a37b5108dcbc80a6dd53a39ba6bceb9ac42f330e336b35c9955c818602e0f93c366bc55e168388e8bb19b5aeb4d2850e193b67915eac091795bb2c3e54746d8401b87729d87fd36cbf7e2f190490b85ff02ff722b9965d85a898d10b405149f950748fb584374c512ef6010b8be7203a9478344fd80cc777bab5a20a2125b26c4e2fec03388d160c0ce2e5b0f62ffbc080b5e418d8a0bee5db4436992040ae0e3c3b132896d27f4ef89aa767fd976c44a54a0a0c670e3344eaf746c65a794d47dcdd5b9bc3ed99f242f5e6487bce9a12ba2d354c0a638d1b87652d52d6c805bdeded2235dd36ba52e84cd8a4b126d73c49f43328999e4d97e721d12395d99c3038f382812dd1983e8d682fc4054c163f2e1d33289594eab42f9dae9b91890f2ff164d3a3f86d95128458add3938e68cdb3d0b42e293e79c6b20c52a8b39d323c2b4a766415590ef19e78456ccc54124ebbcac082f10465e682bbed6a98434a302bd80b559057d75fb6f3387399b7afe4f98866f077ed8b5836bb3d383fd9f3aaa22e1f6eeae22180e5b38c035982b88f8cd10ef491e254d04e2774e455f258da9e1f7e4388dce22cf9d32d844eaca2b4bccff4cec39d1d7f4f5f336684e0697259d7ea380afa4b392478de3d5a2df3be76aacf7aaf9bc3b8c32db6b413d518eee5d05a312edef83fc922ab195a99ec2f5b4872da2ab93005a6835a770e4553429213b41dc064ade7e4d3cff963b59e441532407486d2cc2d442f753006127c360403543bd5d56080768ad0df39c9e932b0d92d07bf1354df8b564f28b5202da7a9a94e554fcde2d85286bfd11ab325e7dda6c98063c4fb88555ba7367c4c5ff4bad695bd56f201c0f5950f819d72f4ce7c45c7568ae1b53eca5b26bc1e8487b978e777d655b9dc6676c97c0c09dd350d88ee6b3a634f0aa44c7978a0c72b5e3b612f8afb75cca18555fd2fe323e09a636a727b6c042f897467e6f90eb4addaba371b7c4e0c8c4e8c5ad0f41c4c3b77639208bb3bc2b715763848c101ed06fcfe8e83ca3840f372a442d10da653164f87ae7cb5229e1cd25f05d1c8921c8e62d8c3c9245aebf40611526340fd35657e4845bcf45f64e5df15629521954180708b8c528f32fdd5073cc080bbddaee5857cd7eb7c0879c73213f01c8ddf9c80f79eecd5724288cd2dfd00e695185436694aa2f78e171590937ceaefd8c372ecd671aa026db998be9a972358fb0d98796716b8e3f0439abae9332582b7825a9d216f964dc30369ca5ec93b7473f2064bfe1c0681829f4e8dbab10ddcf1223c7eba2a2b886897f427df30e50f9cc23de45f651cedbe2da4fd8739acd53785a192e2f14c7ac39cc43421748bb691aa4515370f5f3f4f974a498cdc3396550ca8eb6a0c506fd06810daa10cb7fbe48ff4ecef5199bf179c614de623974097f924e785a418ac6448c1e35240aadd37dcecfad0ed6bf13533c2a54b5ce4ef2f250c74d481f8f5650b28e709f4efa12fcccaf1e362a22dabb8ec8f9c1c1efa055c74b06980af78e33f25fcdd08deffaa03f387ac0c367d931b31d51a645c35722965402bf6fbc7686c153d1ae43937ad2bfae85fcd3670ba4fe850716298638e8d7a25849c63773082fca59b02c179fff61bc357d3ecdfa3c0ac8b41c4f3e51ff15f239cf6a3acc4bb2f8d0f2f93e13a4d343e5642e23f0126a38c2d86e7afc3446ed60e3839df59d15f224894a6a228a3b87e350830cffbcc37eee967eb20738980e00906001ad7fb0ab8bd42405a59f1980c1ee7a08a27304dd61fb97b771f1f81c3ec629ffe16c34754fb6f808f85550890ed8337e18de5bcca73321bae25107096ba1cb163834bb6129c36ad8a9591f7f5a2288a6df9d0eba2dcc751104385f9ccf492ef16a33cb4ff1e59092154e63593230c8ec26d45133946eb63b4d8566ffa192eeb31fa494046eb23f66cc51fcded4b7fa6988e5051d20bc8a02a9832927b3ae3fb4bd68f380389b88633d1044600226586e51981ed74be995c413c36d956c04b63bc23deba051009325bfb1f3e2ebcdcce022dc272c96a6ae4cd8168c8ff3a0d8a1208aa1468d29f5fc9f259b18fcf5e63d0ce7af1533dec6aaedfcc80c5712c998005bb8a281dcfedaf70fc1edcec4605ab2b56435ab2e6a26f73121c2e61d659854ba410f64f242759df211be86b0e6fc072043b6d714020252a5e0612c0710f3eeec8803c1f9d6e884356d7e0a6caac5a1a41dd8e3929bb81f7cdb898a6830f6f742b8fb450ee156e4a08766878f64a8b70f5ab39814a939832ac5b5b1b68aab51affd3ba9229aee4dedfc0e0b58b705a66a9e71d51185c310230c3dd499a72f754cccf232a8d83d8413cfc1274c2c4603ff7ac0c9c5c7dcd049cbfe3e55ccb4e31fac3ca56ed59c1b981c4a02787157bdf631dc222304de5fef2f9b0ea11309934b56c5ae67971d242a84f97f0aed20cd19edb1c3ad2d987111fc51b9cb44cc41cd43a3524f20d5811e436783958f879cd9d19d9e9748177d78b7ecd6dc4f56993c580ef2898fb42c11d247f75c92e29513df5acfe7229b771e2b77d34de53af0c820520c165e235b7d5fd454b6593fb533c73957be36f8aa5d3c37d8397721d4b058aa1139fd469eb5fe8c7e9e39067cec78d0b0666784f3866fe1cac142e2eaa244494b478497a48467eaa402a5494bfc60d33e41a6f88acf9646588d4816dc2df7294195a439544cc517396c5be072247c62e94fb2fb828e1672c2a36bbd88f21e8be75a9e40805bafb7d4ef58e439909b78bc526af78d26082d59d4ba73efaacb5dc014acebc4341213a4024b4557eda9f4eea4d0cde0fa5585476a51d9958f94e74dce1108346026f559c38a0d569d5a9c655b6735823c64e744cf194c10f42b02dc6b77c9627a172f8b389fd18cc1caf4b8c9d8ec5d5bdba5918f98de8a3379e86865a6e349bda5bab7f30b96e7aca82b4c91362aeae42f5a5e19d9fde842e46b29d77897c489d5496f29698b4bd64c796647b78efd9f8c4bac600b558d37f3e8f927bc294a59eabc0e5ce9e782f27534b5e44159f20ea28b82714cf971c211526268fdd7530972c6b091aeee023fe61f77784f4a58fd7e135e7e88e1ea39d7f7c30c13f02f41beb05ec819a988472b0bdc63d08a3adf965c1dd9a1717eaf724cafebe777ee1761696f6e9b2dbfab595852a56cf5d2328e3e300769c216dec9a892503b3ee7979b92afba2acde7ab0d87e2385e5dab435f45344beb91526380abd5ae53659c728e8a82f9cece792f1ef4a1cebf4221891746aebf0ce037a3ef88518e5450eaec044b46ef542c3290fd77ba4afa69f8537e8e8b114e8929166e88a07c48221c94bb19b713295aed5c85957ec7476d7324f489a51cce19f8c93ee3c44e6450938048214b38375542402271c1da95723a4c4beec7b345c74a1e1c5001bd2c24eafdf8ef56f1828ce34a263a8c3372e590d412dd34b6ea54584d0d4475d045cfc61d3e38bd386a0727fe6bddce06feb80a73de31e8f57cf91a18236ea52be63a162caba343451ef5b84c424794b05c8cc2ead901ac53c3defdc460919add85b1ca805cb93b3b6dd063dbf99e43875108db6f7862b18559e66243546d75b55cd7f6e3bfd990f0326d774a262bc61f782c468ed1b5fa46268a54d88192fc578d7332caf6c9636f56503a3691081d45106ad71de75b5294e098a3d8dcd4dfbea3c4ed0fd958dc7edb6b6e06231801a39ee943ba6127598ce4e942e8e20aad0e9e3e8dcaeba39ef032d66595d8bf1564e225d6eaf3340b3e5e65618b1d2c1f18a667d9ae8b7a31f00f01db2646045079a5f885d05faf947cacafb21fdfcf9ddb44ab94633defadeab47c3d59d745f04527f6515c4e931c61206107b38f84077bf4a68fec6113d4ee44fc015bf4d7bb055078666da85dff5e1abe833bfc41a353cfe2e5684ea6dc1140cb3bb815489946fa5be3ab7e9d40326dea72b70feb871316971ed40e24ef260799ba7d21ef9df383e6b79b3b4becc9fd333fa2edb00c6817f42612545b3523a212c55bb2106e4cdb8129a00c68e8b0ac296f172493901d75df905bd3744affc6916e056493ca91c2001f58ea20bbb2547a25e990435acae18b74838a2d4bf7d525e2a482ecf815d4ba8a179cf775432576566cda54a15294129a444ddf1cdb73aa939e86ad365afa21adfb3272f1797d9caa4201740a25a96141752f125fd10046773c5b10d9440049cefdea8cb160b3a4eb8d0fc5aaa7cd73f682caed0244756e414ffd5b8590ca3206491844e6871fd8d91c0d32a109118b62620045d73b4c75147f3774a5ecc8fba69a4b18d05eb3d5e8527c35b03b3bde9b9a27c86e4a74a0b61b42b50d1f9bcc9e219f65a6973d70097f2dfe29379063451b95adfe6de7d3b786d9a8dae223c07519c4ba1ad1485288e5a9ccf675b48f6bf94b8e415316893561a3176b7384a1bdc0c1db464824f4d70dd6f5d30f1b47be05ee4aae5e8bcfe65b0b755aa126b9bb3082907520eead6a959fbad0833ba05403fd1d9433bf6467580208a55dd4efb56dfd8a9a366006326ab907fffb460553b7085cae3ed43755597993ac8c6e88c371b2b9542c79e8d624cd358e8c77d22d9872f90d030c3f2aab5bb30112b50202ec69fcc5afd6b71d473b717efe8723f240baa42884d970e52c212ea29556e5db6becadb11ed08eee1ffff88db8b23192ab23efd7ff6995fcbaf17b7ab1d22519213c8fb065011b2bf19fa5bbb5276c5e75f9eb077c7a0283a4129ea35a3c694075d81c0f18f7713a254d3711aee39054f84150b44162cdfeb943ad2b9c27db251049a2fcd854542aa934f7145948965ae6badae43d24f522cd6b068289053beb45497eac27829debace38959bfbff72ad4700341b9795edfe554c97d78fcfb5c52fc5c22df7ddb2a2c01be6a9897a3c8be30091a686c14a0b0b34d92d3de32b6fafda37ac74d436e38fd7fad475e752a5c1a03f29309f1c893509e5eb76b9f33c0492d397d13b3d9c12d73bb57f0e4fef3a74ccab861e13faa7e0f1eb105e34cadb42bcaf6d8dc87827390ade292dc88bb4e40161929d2166056bf2fca515e8e3f7988862e4fdbc98128b2e95a51331745afd6cb4769db6cae72b8fdb87869fadc4668dcbb32d225a0130678fde4c257be93da72248586cf82ae154e500d04e377ec627239e3698883929cae9e00e219e76bd0410a0c54df274c7c7938073441639b3891e6d07c3e60cbb621f1a69cb957f35a4b530c8d9cd80e75a67edfb0b80ce5401d9b001b4f59205766fcc3c1ef624cb0f256407561e0127f4b640fa0bf9591bd5e680bae9fb0e047ed4c4051ab21c9fc8acbcfaabd46d21279ec6d8683361cd011988d14764d0a3b950e2dbab0cd397a078835b8d7a1df51477fe1ba5113959babd46541002fd4cfbac83936ae84737d7c03f711c74bceb006204829697b3672d0628c38a6dbf52d3b82debb18991e12a454211bf81c7ab4a953e526b4475af084cda800d328b19becd865ab44b6c60dd82ad3aa785dd76274f2ec8bee0fe62794a0319249090b65a4751d4ef421efd46f6a30d4ba178feeec3419bee2089ca8f184d3ac20c8d3f0946c010c1785be6faf823f3dbeac81fb7a850800f5ec29e882163e2d2468364772ff16991c523583a930ffe62cc1355dfc8ad4cb99615926cc6ea85547fe0fac4d7c5cecb557b3c0e8049a8ae67529572fb5f05cb535322254325bff5071a8a9ac5b9a6a6aa960fbaa1f50d21abbc97a6badefea384c0b548b4937266957dc28de56e5fca1af6252191caae96735003ac9c8994c5b2fa19500de140bb1b55f402cbb59aa5ef3100f65483aa69bdb695f9f7edb2ec4f422e3540e17f1ba8a94e4afee0d4ff47e135fc35906f443e96023262490d567e3579e95e061b7075334fddf2944603fd671af0ffa6c5f0720883100e4df2b5aaba13ee0f23122d6b2fd84f35e8184c8b99cf6b9523b8ab678c2ed6b03fcf1fbef57c8a0dbf79cc6cff0067d0147a6c654fe541694a52d27020b8c642d2bfeb828615239d8307a78a0ba01333194733162233126e2c55564757f4ac07dc0df4f0237dbdabb8f54ff51196cbcfea1566d1e6a6fefa49c244627fd3cbeb3825cf173a1b83e2483354573e059107505cd0445a618af32578fe287b574077b2ddfa65ca41ea256ebd85243c3509c2b9725cbf0feccd1b14009497d9b0395e6368b286810fc4473de4fb5645411f86230f871e9cb7fd28edc68677d45b0dbca09f8c87be9b7af8f7f2d6444a47a4366e65be3ad8f312da60d247549e8822d43801732226effdaa3a42e9516433a44f9b0f06c9d27905c9332c9ded3ac5b59d00744d6a09e15bc6deb53e2106258dffa5baa52cc36483541f2b3099e2ad0cc338546200caecc8523905d0fa9d39c06dcecbad45390a1d8cb277eb1c8210b3a604994913370bdd70c36473a4bbe8a90b41111408b7912b1a0bb81624c08aa8f3e23d15090de10ee643eee26255f1f1315e2dfd027b18817675fe4639a3978124d5bb94d813c1dab185ed6613711ea35477597dee024687e0f508eafd82b80208d0a5f348d17f45761a86833004b941e084a393e790f2bb3725d39af9dfac41043e585aa5f1b181d47d142d8013bf7a3e7ce868b0e82c03c35d0c9c0c029f8b071620a617e690bad786397191889684133c58cd91e38ebfc4dcfba0e81332b45b5c9da999825afb4d1a87efa8f11dac5b081f75a3025cf306c901d177221dc8cb63f5c2bcfeb7526ce34caf7a964e003cd06d5236b1b4c8fec49ef54f19597d76592328403a57b9589b530444c76541fc5325a9817fc19dcb3755313096864f33d32311fcb14acfec095df5a30a457dc7237f7d6da7d088fd486e57e2d6d6a4bbc5793621b52f412ad68415bc952823d8edafa7204a15db5006e4ebb1d63301bf68a4a1b47314abfaf3736d711d32d27d6730b4483aebe8a4727cef0e680cdcb06e32841c730ff018a578c132918fed03eaa824aebce99a888975c29095387bb6bab7636d90728bf132193b209d02a25c4cd643992814e1223eed2b1c6146dbd032381d697116ff16bf7b88958570b7b32cd9a20955ae0666d7c76390bb0d44fcd4382163071ff28cddc9408424d9e53cd90f0519acbe0e254e1a40bfb4a01bacd90fb6c651d8d868340079c80f1ed32838ea09f4b9ca0218ccb9091573a474478b2cc501f8e1e22ed28e2381e9709330961a7e89131f36acbd258571d73748ca0dc954519a132b3519ece3b13443beaef3e409b988a241d1c5edb1e179123d476f85ed4dc7c3c4029906706403ad4bd90111837eaae7edde29f712da3a96d7640ae148d3b90e32c4cc46b407821a29f6b3cdaedd4cd9361c27076297425fe997c8b9004cf61710e9a7f73db530bfd0e530a0926789e6ad8ce1c00c0a2c4dc4c950bd70131ac56bdf3e9688d0247bd6bbe55948dc7e00d9764531d846ef318e7241d986ab5d5a7c0fb984150d4ce5952dd8006518292ed9ad0841e324ac32b8c31a35164184f12d8c4d264c206967d09916c937ba66411faf5931eace4dcedd59e9faf724f539399241319e344e5e2fdd1ae7e1e1f39a2224d2c379f92469e1fdab0bf705978004809b34db1da5f37d5229ff4e8cb1cfa842d4f95a13c826cbb80bad424b62c41ea1b1c94ff836075de1b64408da58ad4041a8df16c2ad207973fdef6e2846dbef5c38954f69e89f68e9c2f6ec1c4a358dde3ba87522a5e361303a88ecdf616e48c48ac837c52537c98b9a1d3c492ff6bb0859dac088f6b337796b80b10883b81c4ae945002f80477c4481808f7b3fbb2297979f1d84227bd0a74fa17be781b380f95951a49f4108111f51e2dda677c79dbc86c55a44b297f2b760d4885302cb8430ee1f408b41b39657fb4566a3f8911a8cc0b990a8a63570f0d7e80ba669b6b6386ba08294fc77f951e39ca292602d2e8e9db68b5ee586b3c7f9c5e664d3624c2ae0f168b8f0165cf37ff6ffb5b9a141804e8477f00bb43a09ec69c2ed5cbc344ba252f6ccf4eb79db6c797b3afc1e60cdaa29d7d5124420a21c2882d9906ae9886ff0a6ddb0be51572f5aaf11f7b370f013be8dc2c9d9b0d2c5cfe498daa408e29aed77bd85c8d64bfaf3b32034716db0a752b7d560b265e9a180543c7f6cbaa09676001e9b4e1d687c5bf5b19e3c6360d746844ee3c2efea41024ba0a65f61820d25fc74752dc96e74442164557dca9fd2aefe162ddcc9df6f15849ceb661b9c4b5dc09e2b69ae8c1b7a5bf8b031e03f399be7a52b3792f78909094349c82124e72b6b1153ec7107e2db2a7fdc19da36796d354a6ab437bbdd0429e6c9819cc7ca28c4e61e677315c2579c53b80a1460090f9111c17d0a93f6dce813a050fc71b57788f473e000d0b815834cca275ac4ded4aac6795ed8f0b03b0d13bff86fbca0578ce54fed1ade7d6f7c082e00eacbd14f904e5280cf17ba47068ce5613ea842faff16a70b960d9f084f99101a82f45786796e3b523ae622e322d080ea799951a5508ebb2efab3f352ef883efb733219afa3106df987f24c7868806a2d977fc1d429aedf52fe700aba0df3f32d1aee4c010b9037c0879bda2268f311e3febb3b6fb652b536cae75e12f93b1ed7bbb24d7742f589bef169ad1f74d87ae05dde5cc660d0c94b157dccff34bccd03e52a2e741e244744a6d2c162f8ea59d4a1328625ebe95f55bb3c859d2927254bfa6f3af20005c68092b60e1586ac2a00065f0eab3e2164dfba5d015212f4c5bec905d5b1ea77a8e4cfe305687ebb98d3805e4863eb50f6cb121eab5a83d06a70d17d80385812174a9d3233c9d7f333402d2e42a48e3ad0560bdb93e06db442259cc8e0d9c4f17d542ad0cb83f482f59295a90dab486438f08aea1ecdfdc994af9dd18fe22f02c8871827624fea4b30dd0fc81f6c743177d95da36dc63750563ba64aba97926164dd41b3b5e8ba42ab77496aed6bc701c976d79a2b57249b0b89c5a79be0f2368aabe836193ab0c40c3d2ee661f07421c5038c3f41703c8436a0df0240cb393499be011c64b69e55883ca0d7657d596835e54640f6a721fce235b5ea2d145ff1685463aa2023a0b5f9b5c20eb1b95a6a90704fa62512cfb0e8af94aa98c8329022c6295ecf30abdd4851e07da7af69ea0a29fa88eebed459da88dad709e83854c0a0e22ff120ac466d4819873978b3352a4808b82842589e335fa8c8b0b881e3364df8084cffef1b8303fa8452a2fe04256db58d423e4796c7df402eb83fe12e6d82dc305808500b8a996e44e92d54a5af5ab2159d78cb2e40b58854a324d7b1bc9bf3df4b13354a4f092a29ba226f6752de17757b7df9128b18b81dcd2398a95553c48062a12190fc1a973356346e3160c78f599573036744fdfe6807f12b7e4ba25b624d6e10a3cd38fa5d77cb2ce9b9c97ebd6b507ec0fcdc314dff2d9aac5cb58f3df061690ed9dc6750950b9ff5b5bf555f740c9991310fab23b993d4375dbdff9f7b0397498c61908c6c326510ade6e4cbdf99a29b7feefb4b89b4419207836edac45bbbb3d3ee3de1cf380c9732fa2e0a4df4672ef42a4a286b12bc98c33cc45ef1f98e59aa614c5eaedcff73e54629d00df54af80f44f12e0c83bc309e45aeda965af9b283b465de1ceb65254b0b399e3881c563a61a7fd3189221ac7d11f027df9a92050cab978ad95afd6f992782c161482d271aab493c567d66b20d8c478b37e86be205d9920f633d561202a39473dcde5e90927e408d1135234a2b4a1d2b0c08d501fd9b3d93f72999f0fbe58116d8e0913a8a2b5c09d9314ec166dc00fc4af69eb4e3cdc695df7ac71aaa346eb7f14ef4053a16b2d15a3c565f55981c08b073e1333d1bed6178146f0477400f6ecf3a3fe308a4ab44361d2061871f97099d06720e38251e48e8984e2c57b578bc94c1032bf994b11237b2347b2f8cf43019e0481d9330d9813b4910bff0e6a2260a5ce484073f4b539d745b2703fe7a3f69ee2388d48e8fe6e40c553fb65a77d11d202a878bd09834508d315a0fb2a5efe419f5824ed15c66c7f94087626bf8ca2bf14f17df5207eaf0c30b5ed1470f0485f90044666084bea695032f112f25bafcf9589dfef7bee998098487027c16b0689f4ab5b037cda84025a29ce16e437a6fdfdc1533359737c9f1eb04d3442951f7af99473b27c4b016813e0a8625a8ae2280a41a051d872f0caf8cfc7d6cad3c38c63b8c535a069192aae64eca911a5fb74e874708770f3f52341f5fbf2e89832a0f13b30b9f949919ec04f2cd026031ecf3772dfdfa484391c77221656fbae8538936e43472cee5b87da857447a625ada7fd0c28dbf57c2790f09695730aae07ffa455148fe361b0c7b47ae44490d56b558c4fe926c3fcfc1007015f2f50342563539927f62d897e58884aead4b9fd1bf155ca640c6c356c28e745b25bbc2b7e5834c60411d2c8997b73756c13913df41d13c0a5660dc4c130881bbfcad678efa2bb7af4bed98cb7a7cdbe59aed7ea07ea38ae1846c49dc7ba7bb37e02f79e8fc9c20c8cfedc00354fc2faa09bd590b4f354e45a322742f797204acd6c4bd65ffff94a682a08bf4bf04a10c726bfce549bcd04a00e49c8f5f2720831ea8836d8a53d72fa25905e12d4226dcdcc2d2902e17c6cb5b125e50469d34288311031d45dd549ef793e60c02d82d13cb50d367a38d623c17430e29b78b74132ecf3516479dd02507b9d462b4c777d68dc2dfcc3bb8611f9b4d305a6cbdd22b58de62d39ec441960df79e8d6bc203820a388a10ff964190d1d8c7cd1d98cbd9ca92bb862bad6f5c147e587dadb51a6994ac52d2395b5d2be390f3abe2c7f8f8c65988c2eddfa427b3a45a7fa799d287a4b6af2bdbea72edeac665c8158b53ea62aaa245558f1f8b29d42efea851fd28add3ed6adcce644ed8ff368779d9364e36a5b17452a7052c5a8db71f63c3871a2f21ec9388f2bbd77be52ee999673430eeb6a5b4edec8b569afb34176eb762b37fc09a08ee4f9a53737565dcdd604c95a0609e5502db698129c6e437295c7dfdcd5b5371d2c368d6bcd88009f873e0b7386f4a85e58dfdede6a00f1d1afb2fbd571850bbee9b53ea9043063cd4df50d7372905a7e0347663a6b49396f0ac0274cda2ba9bdfefcf19a541b399604ef60b4e6ea2632a022bb9792e193dc7a96937238c0385c48c0df0ad52a7512a1a3c2e39526a447382122ff2c9369ac45caf9584dc6a29d5f59acbd21625f12ae8a35c2314b66e415564f9e39938d345bcacc85afdc5976976019c77d07e4874128fa46a5baf3eaa440457b09dd4f3afc99a9edbda48e1e40495fbad135709200a6f7e7cc87c26368a09e9bcf235c745ec81fd627474cf985134e0b1a088635f39d845fc7596762183cfa2876db88867e8a3610099cc2c53f52af7f13cd07707dca87978c1adc705bbef349e65f015e38e23e6033e35848fd5520eac97abcc73bd8e69ada31ad560352ceece0d9ec5b3919cedff2895d1ff877ae252448a57c198be83c06cdbc96a03a1c650fd495e5cca7a38971898b4ee222c48e44320a8342dad5f640fc3e5ab1ffcfcfd7ea2d7f4727f8c328ba709b5c8a07142ca812e1846cb23e0573e114686aeb2ec0e65aa68742ae65dd5783f9e6af45c0b29b8d1acb77910473f0ceaff5e9d879441269ad6e1cb65587c6a3eb90109609888009ff9b13004472f434cab7a06cf7f430548afd63f0d14633e5264af9a961dfa500687f802ef563c0f9d4686611c0014f1216e98a8cfc4b6acaedac4f0352b3f138c94b2aba39ee6efef50a5c162f87c23e2ff11b00fec55b6369e385a61d90a100b97530668ba4b4847241e939f032e41c9bad8f5b4a4c132d4f67b004b337638f30c98a61a508e5846659be4d36e19564a22859f07d1e26879514bbe8901d83c2ee893286db748e3de82a3f1fe153d489e7e39543b2c16e97d3021719b817f9ed0d742b027739c4085c58b6a91408651fff26b26f0c9531f8f69950a5d770cec70c9d388aeb467694018df0f6283db361d46c339f7404babcc697255b21df12f475a6ac9740e6c8bb691e00047081ad1115117ad2790428bc537a2c29fd32a6d766237c38dccfb0c85dbecabd7751ca04fd4c38784bf37e259b03fe63d9eec0f23ab056499d512e4ad40d62592116d0778d5f2feed86a37bc757627f59753dc356b99c920a9633517816b1659b4ec1843ab6cf69c742ecb357c11119c9a3a3b278df70ba7ac39069ad4251f443ed475f7ee30eed8b0eab8d20ffad7feedbc2c6fb1e55d9676a261862057ec771bff84ea850bab7b754046caccdfdd7bb7c1a3d8b593e5c44c1e02b55dc9a730acb6e19f0bc1c148b65a0495397f8ecd8336460c88c6795256daa6b13712d561a1adad41c18bc113cc3c228033880a1e042eb99037fb578f73f9a143234114b809f78e38179b8a4df74414d2978dada356bbb7e49fd1d8a800fb688aee747d35deefe986cd878f4ae7148929cc87609b987dd4a6a102eb4ebe4cb8dcf1eb6622ef99c73b5335010e0af6c64aedc68ccd072d10f2e52f9c47df71d9819c252370adc372e8c280edab8b874ae23124477d5c10960f622930195b5b566546e10f95650b1d9155d118fc9c4ffc8c7ab30bdda348c6cdf1e8e61db7426654f84231a855ede6de478a6ace8d5586c851a1352130b61a0e42d6033c33abe22bd8bd1e6dcfece94934b63abdf5e161a30411929a87a383b9099947f54db11d11caf4b9f3c39f2ec96b46a69ad68928078841c9fe9a6dfa99e7ea0701c9f0a918d0dd200829368f106c8fd7ec22f0ae1b9782fffa42ce1545b61bf68e9a7dca0f8dc274acd0bc642a8e470acd413077e753ca077e60319f5cb3e26a85cb0d1620fa7ba8adcbc6521a37b7b3c03c5159acd8e0f8e21680f6897dc74e242a093255ab24b4d413cfe602c84a75f4d59d1ff18e5bbeba817c04ef39394b4cbff415ab3c09fd5c3af602adb676eab5fd5f5e33bf0b4018a9357e6d2b906d710e0a21f0b11f1c67a1dbcd4f2f3738a9d1349f1db4fd3a63c791b0e89927dfc1db214219405914cafa27f8436790247508c34e42457ab0efa28800de3a873878ab11baa9c6f64c19e76fc6c259300b3561d130f6ca878e1fd037d6602e66a21466d4a32cd362d2b0566847b1ab31a74c4cd3af3953148c8bf22a1001e11c34826fd4192f5d62209559e28f6897fb0dce7387964a04d92bc5be3e68917722231b5ba09087dbefb45832aca600a4685ef8f6e30355bf4da09cd50ea9399d33eafe80ee8862cd3d16b11d1fc9c567d9546dfab2f137a4345aa4469f4f1abf65c43041fe7d81ba97b6cf0b63a1125aff40e1088a0128d824bdfc251d31d46b34d3f566d130d092dc532c7c852de247e51f8d97318cd7ac0d790dc7a6c9e40fc8d26eb00a23be9e3d14550dc669536c7c47e2845c6951ee3dcecf10ed7e937ec4f7806cc7d2aa46db50d028d328ec2b8413fc7ec6c8f6246bd5bed6bf0b52db626f4801a6526cc0713880c8444d06849643c9f1c1978185a9bb424a725cf038e8b2738c0976fff651ba1815d80d55a2be89a9c5f77b53d1221d87ffe25ac2a5f831964951941ac589614bb0897f71bdb66e42762522aee9d451393227bbc46cf6bae00e7081c2ee74ba4d9978bda5ea880b6f51528dd8d149b49632d440b2b13d7a9a0542b6102438edeafe6d3e9df80afeb6779f57152aebba4855db97c74f888d391a56c021f2e73bb81c8c4f8fc2514337137428243b257b1baf38390f02a8e63db896f7c060fb66d871bc7b99476bfc4376b25b7fc28867970cfb3aa85e8085a89c9460729d2402024fe4fada1faba634ceb4afd03282d82415c82ba643ce969072746a040d5b6380c326c301c083df302b5c7075194fb1e90d2d23a7b717d78b4bd04e057ffa2495e151e5f6377d9da9660701439a359cbdb56aed646cf26bcef5d87caf89a5c04e87a1e51b8ad540a37935083b07ebe82eb75ea1fa2c7677e1e400ebebbd5aeaf9677f06545fb064329aac1f2c19c926b0b0f2812073790740cbec8bfdaf14d45c8b73658cb7f5d1accc2e0138c2a31030afcbcaa3d0d40ef2e9777b67d6e2de9305ab7b34bcc0213688ba1b5a631ca669bcb4a84d6d2c5a8ea50df3aadc75a5663b2fde699c2e8ac86ae4bc04f5936be5f8bee6fb55d9ca60a8f3e17a547265b312e49d2f846cd11eda6c1d954b0fd6a8dd4fcabf38ca2e9f458b0ea18a51ad94b94c67aa5e35db763de385707760e0a2add3fb7a878ac556c5be5d6303897a43edd49c87e4ae05cc5ff3458fd99bd3a5195d9a24bbb67e5d4b01c293f257801011480d5fc44ec3a26b4d986e262b8cc52b39b10bec2901bdd94fb2cc162b700801af3c72b7f6d9afaa6c9eb53fc0d05ea207f2034a2302b50b3acc29fd6b5a1dfa225b2562e45abb05cb128cb3ae4b114dbd12e536fe33a104a1681f300347cbad490a10dffb13cb231d61983a9f2c3d47f8f25d1b87afbcd79eed84f1f57fdd7eedeb251eb917f2548749b1dc584350092a523f44633359a05d3067253e9b9211b96a367f32661cebb668f1074dc7b2eab9d740aeb736a0866e9a8a98e708be64ee18f73bb437918710cad5a2eb4b5c7ef9225d578d386754a50322605e89d4b5e8542d7cabffc91f64e136cc55700a6635447208ebb478f5a7f9070e0957e67024ec21b0851fbb39a05f908ace1c1b0d8f0d0502e195e1d73dba5de33d2e34fc0f6bc53e841df1e5a6ea27e3d34610ea4aa2884d127b1fa13f758e8311000b46bd511815c96ce86130596c0e60cb9113d852683657ca53c0d25824cb281cbf8c1a1ac7c937a1042e64f5c72a31c707b5a4ff22e55415957603f17abc88263d5c7d233a572ba9a6a2fb47febad7cfd05702d1f5adcc7d81956d43479af327433a6756d7400bed15d2ac51112e9ed554b1d9aedc591796bec400e2829113a624339fb21e21dc051c831ab6b3dae38b409f1b97def85244518ec72dff9ebf5cd19b2e0489fd7cfa2a3fd966b2cf7682d9c7e026e500d3d4fa0174a2a292148431a765d4d220f30c05701bcf1b4e9b50c200ecff5f1c17f0ca5d852ea6a6249d5d9f0942b2c484153a9ced40f4441b9087b0532afc27d3b5ba123bc8feed35db8bd3ae710f7eda967381fb306b5a94bcf44bbc51c739b431b070f94021d1d08bf314b7f7320bb7bad377140cee2644de8a1a752c4055f7d10556b9fee6baf4f01e340eb79495312fb330a964558b46c36737efc91f5eaf4575e1c805ea7e453f7d1a1c824f61a3db6e355a3751c0d6768d91bc0a17cfce93d84607e651dc8f50746d03f1d659c1ba1f4b48cf1abce90d6c1ed0648d91313021723dfb3664c83954f52e2ce80b45b1ee8afef313e50e5a69bfa3d19ac95dab19dd9dc703590074ffbf7f59a9ea67d755027909149c64c711a854db87781d7c09d7c9e1eee61c25c612e5d81495c5950acad5462dcf6ad17116dac07599e3bf857524fd0282ef8e5a42ab206013b0194fa8bb4215a5c78a5ca0b529cd5c98716f2d77e4251ab54144e6f6fa2b46164bdee027596dcef1a365a27c0e6673c73ba343738c33058275b31eb0e1d2f09bf58f8ea06ae32947a52c26b547b446bab40e8fcebd0c8e82b29f4567f56c5b3aa41944803d60e01ded054b760e06f4b400fcd93c2d7aad50255df92ee59333115e876a915d4cfca97c19a8ab224d967996276ad9832f90a7c1f770fe72e41713a052e6986c3a1bc6e4a48d4f48d9922caf6b3fc11de5a48baaaa6694bddeec88df80b24c2cd316a42367c207fa0bbc373d11178d7c4273f58491df8dd3bb3c0102e2d5ef44cc53817e27505e448020fd4b5cf6b97396ff8ebdd15a6fdefcf57276faca3dcca35571f0c35755267c60d43f2321e87129da70ebe1e7cfc1bae86b3e91368a871d5cb5462fc938b529dab32a69ddd9fbb050036a95772cda97c8e2bf8f6c0a43432a7e441e5f04c2148c0330d928630f44369e3123c9ee2e193853b75467809c3e9c1467239bbccc4e8077068a918300fcf5c5f8719ad0567690e6ca8e38f3bc74e96149a4ecc873581637be22a354c36e3f4e88f6b3e509dc63646db93f2be68bb70b82e5947b82d8d05fb7f505c76c5d11dcea1935085e0cbcf20e848659e72803b5486c293bcfc348c2d822f2c730d44e549be114c1ae1b3e3c7718d1898cc03a015d67e01620989dd2a6478dbbb1577bd62c3a07dee8b23261b2534ca4091b9139b2bc1a56cca26139a4611329a2507f9486a483e3a1b77f30db1f487b034716fc93e6e0f07af708496837266592b7f5ac62602099bff9409aa70911d31a84b786b092b3de2a11f6779cc7ad2eb8d45175d5e81a18c787d3d903213ab05e0bc37c51119e147931e51601afa14516206a33fc45903b05f91c04c6e8a01e63f92c8044c36307d8fc32054776dfe1ae60faaab6821a5e949b2c2c8f1b57a6cd404d43a93912ba28abbbbcc8d8e963beecf4480e96a52b6a32e640a3ad9ced466be9d450860d58c2c19bb43ae26668befb255bdc54cfe2d494b41f464b99e360b5a10002e0ee77a8fac675ae54a445e32054a9e3f704c4ec8500c1fe2c80cb535539d5103d8521e842dccfd938188846e205da36e443114f334fafa85c6e2c416ba48bdad5ecec73e35f763dba5730e2243fcdb2fdd53ee9bb62732bce2fe39dcf31e07e736ccf8b69353dc51aa348fb6df6c358d72861862be900a2e0fcba68ea7e8a32d1108688a0aa7e1ef61f96d8d4c929a6da0e4a8aa862d1bbe99b012ba3b429e1cda65b461eb745e041e4149db70d73dbc077a33edaddaa0b0f7a8b17c285e68023a9de82d09a04b9597c6608a2b274c201bd8bc4ae7642997a11e517d68e61b6da6319763915cf0fbf0ca918b5a921320b56131bfea7bfba48ee6ca62c255b463d02dc7039e528e6c740fec0b8a02b22499deaef42d69942d9bc2feac2e8952890e0c382ef5d020030cc7dd2d42e7a5b0b62bb9ffbcf5d162063124013455260ec62d634a450e52a407d3cf9febaabd2130b3daf0daf894ada126328bf6009d813d4ccd1447307877b22885d3bd67797c0dbf1f6d56c01897d4a4986f0c0e9b07251269034a8a21b4ff20c669b0e2c323bfc2f57059ab2e2d039715566b888f0a560ce0e6c609bfa579fdb8c440b801fb9f21e34f0c7e868864182251fa553a04b8fe86ac74729a1d72152fd6363708fb8f2fcc97c2059f267bcf8eccf05df8eeabd1b040a5c32933fc1c102b4990e0d4cd0c9eb873673bf8c84842878e9230ce0e5787f92457a3895ac3c47fe0ac6fa4c91fc5ffb052a101e15b62eae9f8f8692d77fb146b6f449b8a89c04512dc179630af344c2f88b329881c1611c4a5db80240a27eca56dba501400ac333b4d9417bc996ef8d16b5e53189926c9c5c82fcc3c8bbbbd84eab8511d52d2a09f8d3c42c458902cfabd3be4759e69fbc43bd01a6018e7d64842586c5feb8778377562c2bbc565dff3ae3d5a98e45b611bee9e0ff5fce72b4d996927dd3f946f583918192384e43019955b976d57c024bba2fdaafc1650fe7c7ff20830cbd7b85e3ebe4bd109f5b036cf3fcb9b6af5ea47b3b3c37a588b06d1a5dd92665ee762131d15b5764b64bdd4e044b3e05b9f3160028498bab1de87188945e631ae926162927b27a756f3ce37591cc87d4dae9b1613d11d3edfb0420797976bec6b648a14b35d12ab060f7d5507d1b89f6cd19f2b5ac7c8d188f35ba49f8d54b5bd492d73b87e8aa8b62a519f44f4c88867e27fcf57efe33d87f67b9348a34c2683769897b980baeba5eccde5706c894fb20de9b1a2ce3eace7aa9e77d81dcb6085a93f16b0f064a144195903f6cf983a022a45769edbd2375d86627b1569ba9ab71f2423bea27e8b25dbd5d802051644972a9ce9fa85dac529abea894b5f1debbd67398ca7b543a5e1cc68091f5b1e5c69461eaab974c547284ad5d11dcfa768f8f19498f88d7893db6842d5bdfe4b3b41a5d60cabf28ff4182ce206c6adfe583558e94499363fa27647cd96f1ba2a83cccc64b75b7b74a7e7a23a026309206750877b4952851ad20b9eb2619b3fe20279618ff4825d6ed8f9210ccdd72c43b9692f6bafa75187aa0b93c1df690491ff4c6a409a589cc6e2a6088719871c37a353f7c88b79e3a241ffae7e2f23cfb25e45d5c31a88f68a50b152fd62d00b1358078e705a2d78a7017501f032ce8e58ac6e9886bed591f86135f17795f05e22a013c96d9c31cbd4976c646925ec6a7c303c10638061a1895f8bb12aba059edebf00656c59244d2b217a60c667eb6acae81ec0aa6c063c4523c6e7b3cc0d694bd8f14ad095d9a791f99eabe1bd9f131180ec720face62f983fa0de73d1895f804144164afd981c1890d5c139901c0166c333f27910a32dd3dfdce7dd41705ee4740356bf718dd67532494f7dcc9a0326b70a159299b8149b326561b11f094a4c4169ab262fa0320f88e808db60144dfe69db49dda484f9f183a2649123fda650d7511d5ec34a29eddf0fb595a3b32b6fc256ca87c52cc3471b5edf5d38e0e7f5e14426fd6c82ee35ecb2201792e93a7166cec23d1e545ac356d65263ca03215146d8bfdbd5cbc9673c81fffd09ffef0528e99f1e2f8b8c10080e670078b79fd580e30694e270a6c6f405dbb7748758c6eb1cec1dd42222c00b62454ad4b140ab8da39d40fd75070e934301fce8828f0b5cd75e6dd987c7936f496da4370c13b3ba8d5e0e5e1c32ed101da654127e703b8923fd09c8bfad295726e2b1da356d4efb4fd53b0c3e3e2407309963f36c313cf01b70ec7eaade788a8ddf88621cf108dc61f6a478fea2b8a86160d774c3d06e667c1ba1b5293be4806bc424fb60f9e660d5364a29d22619b3c36b0201193da70c5a6bdb10cd6f8711d527d05dc382ac8077a777d5e80e8f929251519b36df419a6e3a9d02a8432997aa4a5a529eaaba99dd6a1346c5fd1dca0f499c3e275e77b8cb2f1b6667c6fce064c268daa32349aa4bb9de4f035fd5ef65157a9970f89b2c84fef52baf7a186f8549fe2856179a3ed7dd1d968f9e9eef4ad590635fabb9f506cf32498b71cb95c380611eed9bc1f329ce946303f1242d36e5115da307e8bb6753804c160d26d7d8d8de7d7c0a62c84e452965ef03e7648888468f46ae909fc01ca1cd14de6bf9a3df080d2696dbce1929686da4021bacfd70752f05f181f3add5f0c7f8c9d7a5ee5b6763253aefb39d7deb07df665e4b66ec9f1af24c76670bdd8d60c3da318223ec38f4f8f51412fcfbc5e9ef094a0fc1322483ae59c9bf1b10c582dda3aff24fac52141c7f9f3510741a518ce7a7287c58e9ed403cd79adf82b012214fcfeadec1ba3304457755d73c45945fa4e08cfae227dc5c868d5ddc133e50196488c243a0de188aa90397a640487b26fa42e94aaea74b9fc189e216ac83bda3f063012d756f39dc1f114361bc6a7510e680c61474b5fbce57388b214e8cb64a7deac404892bea57b56eb035339a90010a0afadb407b8571ac0d51b5d6fe5f55d36f7ee9ff447bb52fb3580032a154e38f9c8b79630074de5822f3063a0ed62318c2e7a810beac7d7ddc325511bf8ffb2ae2aff9c6048aad528f9c9542b5746f0355fe92a3fe574c0030c600f3b2ed4e25e8db3a75a7d8955557e557897d7e95d990efea9d9ae411df7999a389b412064d09375406bf562223a1678636f7dd86e17f0b2528d4fcce2c6281deccaa0153d6f83a66c991cfd818f2115f60166db4f9180b37be252ced92fda512bbe0cdff65351077cc01e4927ce8992f6f4d99b379ea75a8d4fe143edd917e057139f6f05f8caa0d2ad7654ff01b7a7d303b2879d01a84ed14d46cfc0d7ddcf3b006d6972392f6bb01276e067c7f6c5e5d6a7131b57883acf7a32460fc5ab52d5655c9f197772dd3eb0ca4bc3f836f0f375de722f21b01e49f0d8155aa54efe84f10915cb8ea3ee011da326aabfde7713d5de0f2515796ba7babcb67a9e1c8eca7b0587f8acdcaa892cfab853f73e04f4a0548f2cc50ec6da16342870991086a301e59807690a420ff9765f7f35597fe36f7e867267f79627a481804d45bc4d1e72dd04d99443acb6ec271e2565abd0aa4b06d89fbe4bf6c1dca3721a67796d85473f09b386c72fa88a380a2abc0aa59b57d53915e5646fab8c8dd9413b65fe3b55f42521d2fcbc1e316984a93171cdebb045e809790ad27ea2e0c15362581df19e6c6d07f83bd5265d6d8579a32d15f08dcc1ed655db6701b88fee43d20902e2503c004cb8cd91dc135b2d97bf7848914563750aaf35a3a023d82e80110d14e7d2c98ad6b2cfc2d59ff573d00fb3b67911b4d6c3cdfc2bcad64cd17d2ad7b2af6cdd7e8e8e14236fc8dcfce60e240708b348bf16bb260cf19488ce0bfc93a9b37b81f20e1e4276e305150c5223691ab60a2c1f97985c12bab7d1a210ee21a2be6b66183ed8d4498e349416a4863059652ab73b6f856b6fde3118bbbc713d6f4d69cbea2e301f1a0b7f672091c3193d6768d423054e061c096cdc8e7326d9171c3b9a3c0d2a10fd35888dc5be4e6cf581eaff98b4a4292332f2e2899900f93a46cedbdf2c8e0f4793e6fb4ca69f83679172a5006966d9ed125a9f3e1d39f29f167611bbee3b66cade1946fdb8957bf02a5aa517d414fcbc020f857e0b03a03c236e321e64a02cf288fac259d8f1265b4c17cef04bf67b8493f3ff1827811111a1d3ab64e1e47091b5d65625883f2db2c6784c0deee06348d7184125961094f701284777b3b9ffb40c4d2b66d11c25ab173625b59177aeed715069963de9f5a22c4c6a29040b3fba2dd391ddc28458df307f4d515d3a3250c80ae74408488eb2a02333ad69a5bf975326f1787d88b32998d2f80fbc89a4d5b751036c36b371330e9802106fecd2fd61657b532acd24a55e312f6501bc16a9d46fba6100fc34c54b79add65d209ec3644e17bf21031d6e448c2f17c762b5168da20c6adeb42fbc86eb58b5cbf3951793c373ed44e8d5f9c3f8c6415649f494cae80daaa27ae2abe61426683a85b31711fd7b96e1e96ce7376f0b99e86d52043844a6e5810e52b1e2074666fdb048be2f0192ba610566dff0565c6ab841741c5be160ffa7bd2b527cd6b0e2565ff10e0b8e4f7fbc7b9eb353d71142247d9b4515190847f4ca1aeed5350483b6ba2e689a0a7ac58e9674cb473ba43c5d5ef677cfad7fed0febda3bfd2d39f6571f00f12b365eabdc666b56e718c43a2fbd9c4bbaf209a2d5a528806ff7d2518c9be89f699fbb6cef998edb5ed84ab4f914b05e608c3fd0fcc5d6c76bc37b3dd53706b63ffc0581d36749ab6fe067ae17f085cca959d55f419da39ef3f06db7b21d1b166db44c3770fdc90776b2c8ff5d6d4379668a49edaec3d0943ceb2ed0ee8b7dd097eb0ac475e3e4fb39e998d25d765f603af936199757d3ceabddf73b84a7f75770ea78702dd6ba9411c01afc51b0748aebd8aa9697172cfab1067425c061ee5885e8d63ab3bc6d09f78a72eaf25f78e142e0d946bf36de0bc8236d6f93b6b286503ba942b9d87e315be24598c702afce0c3a93d6587f38f25652c14d89d54f460b0ec629d937088052f1b35b8ad8962e0192e797f814c4b0097c439c6bfc13d5d7cc936b5d39304fb4e63fbdb22828bc7e02182141295e3f4b36d10c97a4a9dcee2e38f54fb122de1b6184a03a5b329f492827f759a54034c5070a31194141617b6ba3b60ba6c97cd70108aa548c16506fbeeaf1dffe9905c6215beb658ab9a82e0d075dd7120b4826ca7d608efce083d29ae9425184253286db24d4d6a4b97d070b0adb185812d57adb8b410d16799f74339007c7d2bbef082922e30bb3eeddd021c48f6cdbb537e547619b1a447dcf0e75bdd6d0640ed40d43fd6c272e7c235b51c8ce7413808ddddab4e142fb40d4977ed472242a2a9f27bb195f0fd13d458f511996deccb117ee20c95d3cf405dac6ca293b4ecf7a2964b8451bf458f66daaebb353948994c5328bbc09d45457dc33e97d35c5a9f9b1ea1104f86c360654bfa83bab9c30604e343fbcc1eac571238fcbdebc189b196a757c8c4512e2a282d135f800edb9f164d708a72ecfc9fe660caff7e6d02083702307e3b757ffa8cc1fafe9b5f02cc28bf6d72eec0137b81c7bfc29d278498035181c31f1b0782d94fd99a386e2e2d22d3c8061bf4dbd9246c710574efecb0709b42ab697f4a1efa4f112181ece258fbb210f450d759dfc04507e7f73ff6e73fe17eedca838fe37c8d7eb430185ce31acdcf5dd8fe2695dfeef394e006f70ba59b9ccc55a650231613355fd270ec0c08b92fcc2446f4062a7b2e948f62a35c1f8bb9da54f47cdeaf4ee5d6a4414e4649d8752fe65f3f4fdbd41c94f95fae4969dd432402b7edfa074fe89e6eaead26c16f0da76a2dba90f9c892f8b700d5a72322ce0f25b36011c5a1cc31caabe3f7e921a9fa255e87979a9fc661905bbf4964b373479352e36f32cd20e16c925e143e8d094b5af30c818e889e6184fb20d542a448212198e9213e999cedea0fcd5b4387cbb6a395d76e85d63d18b90d685083521b525e2ac675360e72e91688b89898f18e45d564e4db6f6445384a4b8949ca8b7a395f39890335dd10dfac60d66fe99d4b9b7768ba73654c05b12100196282f97e60eb094f459e7c7a0c0658733b7dbeb86339592ea50eafe1ad81d1eeaabf4d9f75fc7093f89e67a4959531c67ce665743df97ca8980d7cf8fb8501b9793c141b366230fdf39bae35ac91fb741445029b90fea27d210ee91d1ce443c9a15f4c9eaacee4460a9f56d9468f2518bee3d1d73d92fab549ff69ab9a531b48bd0033565cc22bc61e86ed4f4f46584e2460dc59bafb55dee72f38ef07fc0112ddfdf8a75d199606229a002270977ab727ba4e89b2bb3d3a2b493aa55de0d74aba6b04c33baac88f633a39da8223dccfddb194fe178bf4f913183ef23cdd303f7773a49bf41343beddf544104bfca1272bd2b12386c431ac79675ce2d3a8a5d9b0ddded4e754a6308fb41388eb8cab2727063113eb309a4d8eea8cee944fe04c733c947f4b0aa6b225f32a43be9a0bd769082e773f4951514d477d94333bbc7d108cd58b3003f4d8301abdefa41c3754905555bb8e234494529e5b63e6bc907e2af342d9f9c00c46a1f5852d54dce708b576d8600cccfccfdbfe50b983caf47d44fc944ac152b4fcb6ae3ee40bd411cc53416c76395952e168a79e70c9a1766410940d7e9e92bd6b7fc4472d42e08ad4840916eb9ef16d8a2816ede37e468bab5f49f4b67d59841e5b2b8562a40204cdfdbd2b31edaafc12566dc318d107ec8c806ed5d44f182253495400cf0a142248ffe91757d670c36e55527cdfae972ec73f6eef1507e5117be2bfc1eaf1842feb276ff90010e3fa421516c39ca21205bb49d18071d82f2db8aeeb46c81669ece486ddc63852e939ac37b61e5753c24a944542af1fbf2e28c9cf79dbe1a9081951d8e43952a9ec38937a77ac7df33cc3014d1a9dc8c5e1dbd2e338e87607d9e20ffee0bb02ee1811f1b3cea9a685aae0e358666f7d8a54d5eff259cfd04247434fd4c32b26c284d9109700d4bebb2bb9b93d873bc7d6e2094bfe7fb25e410fa406fca4cf7c854e85fbaac26bbb016c01eb478e37abea574b459827da6ad00e368fb247f29c971a1dd2cde317634ff94a97a7869c4a067c907bcf2946d05ae7da58eefeaf2c86c375a597a25cf0fc64995e41be7a4fb9bf32a8a4c421d1355670527b8de15190eb50dee042f5a990cdf6b9d70793f53450ff36028d9e064b17776001edd027c7503539667fb5c2e53307ac9d4a43504d4c4a07544be65827cbac720f03f264f4415760287a888e68f3ce6ebe51eadf2556fae692c2ff2f94baebd98d9a3d85638fc0aaeba1b3a61442c98d61739e6b51ec8a43959b73a2598a363473755a226a35e7d3bdffa6c8e54c765ca4c4ea097f908f4af4eca1a6be08da61bb1dbc6787634aff60aa3e6de9693d9bd0ad488acc171591a766baded807851dfb40bdd18ac46d2f2d6e05e88eb0ddae95e8cf57001597a125435248047a6d48bfd656febe0709e618862477e92e3d4260806117f8ee6d45a08ecd18fd47d8b677cd50687e0664b5807e345f9360807dbe8d6d7dff591bfcdb10567d716ea0ff4c3d67c9d58452bcca1cfae85461700e158923c7fcf9b89ea6e74c50ed951b2c3f8ad495504d4657721f342443cc3a128a5019b47108af395703acba2c073b30e1b62ad980e481b50ff6e406eecee539ea36ef020328c4652ef9e839ba1adf07766d2906decc41b4b6b642ab206f05df023723c308047a884f43d2c679a24779101d02f90272a26b407d8750ba1b59d6ade89d3f4576221ebd068d8b91a089a51407de58ab6981c08529614763f4194b432b825753ac0b202f862d494a5509514aaea90fa7598a78fa6aed4d02275fcc6a68cd3ca2a3fe9d45ac33e7005e5d29532021b21d278eebfdee4cf9b8e59c2d00e6c57c4993a55c88c373e4ff411d40953f64b97e8fac38e02a2243fcb22f46e5be620547258e5101a33915a83c0d9be3d94ba786e8878dd5273119e0b6aaedd779eed17d8bffaf18c9ef25fab47a5b1cfc70b545b35e7aaf478902fa3cc456e2be5f817cf9689775be4ffe76abf78c49b6a21f09cd3d4801db55a702feb7e9c744ab784dc21f92a36dafe6147f13e7041dcfe4049e46b4700ec9c5a88002de45df9095cf5443334b14eb72536ae637a8226b254525929043478f0a4137d1dc81b1754ab0377a922903a6192184031c297093a9819da35dd8275054ef15090b4448a6cca3628cd2d283f3e2d3256a6fe7ed7ee1542e90ab5c8387bbc78ed8116e4063646ec380b33e5e1baa702cf2973e093c55ebc555d2cafadff32ca09694fcc7e1b74316c6c789ff1484c98c2bbdcb2be9c01cef3b07891e58bcd8e0942b0bf8c74e882f4795f0e9e109184deeea5077f4a5ef4fb43ca1c68356a3661578cc229794474d67e91ae988906a4de82e23b223075e9afae8c9c8785f1eba032c2ab3bb54d1133fd574cefef39632e369381e718f5a43f5b7bba1e35f67e5555608a5eb79a76901ed04049548597ef26984808f02d7779576f3c04774cc6d1aaccfe40cc12dd1a43ae98073817887ccb118d6a2ea5b5f78a0ae7f3d96c2c62ea5fae29149cd0aab57b8bc50a56581e5f8c1f6579d17357d620c2ecfe02b28e6ebe821cc609cb2164f2d2dbe8ee499b763c75c8af10b247b60a971e0c6a0fa6e86fe686e98759716a98a6ba960ef44680b9aec8a14e1fcb826d839c56924b17c7add10fe4e4b7bbb0d512f37e00da4ab64418a357a30c3db7796ddac06284b70e07a82d49b3f08194a92cc8afbb28aac4fdedcf04cc1b06334da7f7c970e9931594b090f724dc005e29b1d79e94579cbb875653b0e23236f7e828f2741b160aee437c59c6d76784dd8d75e783e14ef17572792c352f1ff26ed549e4449704d0a43280159cc3c0fe013919d9cdfdb6ecf9bf3bd99ab8faf9977f8ffdde23078999481bb1843c4f6529f71e9a17223897bf4237e7d80a403d5cf354c3cb625b14b3e531a2708fe1dfe798d50f0d7c7a6cb18cd3a81ba2dc13fe0d658586e35225de810836ba93cd1c2b53b32c2f227391d1813466d8fc2466105b95eeacbf2dbbe6f30a2a1e930697a69dc0217d8b7c23b34d2a6afbe4426bdc28d895dacc94ef623e8995e905ea09543963ad2c9200d8592c00a0ed50fda3718011ef94ff97f9d2a6c5046eca484bc9cc4da629397ae1939894b00bf5b5dda7fd6f942544bf28525d71f919a9452035c50042d8130dc5408b991824c7aae30b89ecbd73290bf9bb113946ca9f871b117dcecb00a1ef5992cfd9748e7cc1490e64a66d1848364c11a874687f1bcaf8d40e2ab26c29f8bfdc3d47ce992efd8c235f4ba021be18741d448d978d3a5f5459a10ce0f487411f0644f515148dc4defe3262d9a7dd8ac8c975f2d1689e573613122a0f33f3b7bb64bd3bc430172917c4ec8f13f6f8d3c6ae4bd7d9a38c68928047cc70d63e13768e489d040e377411da0968f30e8a8fafc5f81315c287943ac98b5b4ce59f513ecd0be96c37d0c79dc6fa052509268654c8b393c1e663c270b67e9d5f69f8716fed8a6e6ac40bb4048c53f821c8d4ed00a219d5f5e906c75cd6f19ee3d101e6d6c116da35b8d9ac4700489879ae8b9604f0926389fb16197676a603e1c16c01b049e25b2cb51f2bb395a96cefd771a25a9d838f767764bdd259ceffc6142ba714b21db873bc8adfb3fd379e7e186a472268ba3dc21e4bef6677d643dcadafdddd2b81cca76664d3cd75c37e99f9f72d21a98934bcc7c6cb683a3a9706e5419debac277b40582b6a8cf4bd8cea0c5574dda68207e670db8e0e8e71a2099f19c3cfb05a519f771290ac47da01094e0d14ea07110f8b13d972ecc1cb53ac1292f2328ec2341eb95951ee62e274e8645f8bb78677feee81f55e886c543293d9a8c26a3af6a2413331315ada84543806d67a7c2bb1993ed6f062af8a5040e0fec8149f8c1f0c9b028567ac7cd40412c69ef5c3d91b7e87e20daaf432f122ffbbc1e63f4db8eaac9ed86782f1c803a6ac205d83161216ed9e845a1f7a32d646fd6e5c75e148ae40ae35ce257323c74647070da037cf4872a700fcf447cbd08255b733f1ca9fa0c8d1189b0aea21fb4b2da2e4a2f506210c3f9653e38b61ddfa5bfc0ef8025b24a9f3195b16602bb72e0c475a79385016458be221fd1b9d0c9bce5fef8a621b5e1b1e106d7426cc4c532a40c7891a36e0e609f11e17c8cfbdff14fa18474e328f30ea1a1085c87b84473f19783afbfc5c8de49023c80a3b25ea8d7227845b229055718e77e2cfd23a8c1f513d2bb6668052729d2cbae1870c96b1c465201a79d4363557453fb022e6180b80f115264e71b650c1edb96995e6f3ce5203484057939ec8ac3ae6d04693cde8c26b395cd21183e3b14bae7a4cf32bcaea171201aa9804ad9b4355b10bd05450b5796d95c442d315f92925fb499a2c75a15a62d53a0cc5d82fedbfa92ae96b1a1bc4c20afb89a1f4c3f6ea95a949bdb47335b7edba5a8cd160187fc63b997a204a2f0d855721c7ffbb2700c29f7ad1c9fa447a1ac4b0bfb3fd380141f887a06c16af259697a9ab68f89c9d9b2318788863b08c536337ff2c4c3439e068875a51197a46d0282c0bd29b7f13a9a8a8f65b296e08a90f738f9bdad84d079a1b92f765cb3e4de40ce583bcd4593c9e38801e522fd54e2875aaede46f5fcf73dd8691652a4489258f7c54840fca825fcc9dc375c51f0a42ca7e55d2502f6cbd05d27e2bb3b5d866f8b433ddec4ec9f3a5ba73ab0364fd8f11147c5a7a9680aae4aa9f8ad8bbf5a1e33ceb226b03afb8778c2e159442aa19e219a3e9bb2af7562987c23760c5119f5ce0bf35096500cdc7f49591d2e9d2d5c8a0610c9f71fc63ebe0b05ac8f3a687606a0e5786b417aff7a5c967d99fa5de71e968c077fc8d7b1a2995b90f68d2eaeccadb5515435311c5c6634f3fff501b05b6e230e53623714b08c530b9fad68458929472cea2bc31e92b82fd55515bd29cbeccdb863e67b6789d004bc5139abb007b173616b976685cdd56c1a3d09851088090bcaa2bbfa4b4fa74d62294e1bfd240ed5c6d326347d702360858743971d4eacf1914fc29814263b84616cc965ec0a7db5dfe3121ce21d3eb9954d2b724d20e756497ad15dc65518d5f4f9eadbc75b1e4cb30acac5e6231f14ce3971b87195ebbf522ed1434b9b03234d99b77fb8369cfb1b900b570bdf34a80d9af3421e7245dcc2651c988585eb4ada71716b2dca34f216717e0261c5ede37c015406ad2a084e149dd06b16cb6441d09f3ac3e731fa8e2b116f2084a51ea1edd022bc96e7dd475fc5a2c986f27dc06f604a2a509fd8bf6e3fb4c3b93d20cd62a0c27f5a83ff1d4fbd0291c8631aef9d791f140245f98549d6c63855b9fc76922412e1e0d5e3df822246a9f4926dc727a89f084b7561e2200cb2893c4e2cbe4d55647da136d45cbc9fc1fbc108040e31e7c650d88f88e7f441aa5d41a0727b3144b07467b0fe33176d75443cbec6e3fab9b919ec6e0c6e307592452055ec408ffed407beb5517c2a4768fd23d01a715dc425139bb0f27b412c269d41f4136dcb369de405f983b9dea3aed6971309801171ebf58146dd4cd31127a43d6cde90b5c563a55c0012c71a96a5471acc62bacad351cf6eadfd2adb22ddcd09a53f6be8ea263e92eaf6b5e4858c4ce70ebffa67a23c39c5541a61210c1ed9872be303a1e1ec8a26b725b21ae7e2fe0dde6070369115ab092f84e7d57cfcc9d0893798ae4bab61a6910ae0cd1df3a39efa1faaed2c3dc4acb023054991ad6bdf3a0324875d2cdfc42c970b84379c0841c8027e5ff9dc13dffa5f475ffe2f7897842027556c3f3df8246b4ea9cbd860f4a7adf7264153ccc98865d95bd56fc1da25f4f86f60c033f76c9ce9c50cfddc5a6dcd80389ba9f608e9b67d1e2142b22401f14482990e7b12bcccb438e120211c9fab46133ff111952d817a3f44df69d98eafc830f417597f59ec729b78cdc8bb8f4189a2dba081d721d0776c4d534ef3719b0c64a27ba61dfabce8e37d387e0707538450ae33be2cf45f1ac9c332b36b76a19e6c824f2c5dbcbf0780f68e00d5001bbcae73218d993964ee6db07f10ebb8c6a91b4cf90a630ffd6d3f50db3dc3b78a6a23e6f71a5376b044a38634527c1f274aedeec23efb17e8d22a6cd68335f4c197b329b0ea2eb3ab8b77b004338ced8ebaad63236c21aeb7507f8cb530cf72e00355f23d42b36984aa88aa3d1593a2a2b597b9c9a44907a8b9ccb18547ab83cef182ae6d9595bf3a5a8070107b3a6e46bd9be883a4d7676d72f96462b4da1726a896ea8713974f0941a38c302b23f65cafe03186e908f1b4840cb7af1640804a971542441b54007dc8651566a56690e98df011e4d1947bd427f83aefdffc3e937510a6355631f57be8b1e49f9bceccea5670c1221644e722aed974612884ea936831e23a6619f8d66b611811bf72ce2827886b5983435213876bb3af981c7336520f041ad4fa0e2d9c2f025cb758d370da6a78bbfed2eef0b3bd470404d7e3d9cc59d602975502637e3b85894b62684591a792feb2bfc68703e9e0389ffc1101d68e6c5cb3a1f921b2784848edb34f66d3cf9cbb163e415d492349b04b0c8897704e9fc19b6b736ca416a581e3c5367a8681a82cd7eee01b88a92260229f32211485ed23f2cd59d2cd2453dc1d6152e63713ff5e248c6ccf10da0ed51701208682379f01eb77494aba9fb915321d0dd06e788f64e9f3c03c14f11ca0ae9021ad5a7b93de5dd5e788aa966e1acf2bd31e75e9560ad942eb9660b5a362df495f74dd052b4f91ce557403b1bfb6e39d9ce4a5bb8056fd2f149a967f335a7476ba23fd7541c708108a07d54ef18424ba5914b44e0494fbbfada57b8a79a59ab11f0e04cc4b53afa041833b82513827929576bd57c00738b12f943c95dd5de51695f992e504915888669b2bcc33abe227f1117614ffca160472d6b94e552c62825f902b3cd17546d85dc0980824d697f5b3128347a496819c4116c01b33a63464744d1c4b8fc13659652d4b7bd8ee7cf680063bd9956838e168fe4ba4c52a412b53976b0cc2a236994a4c554222b3567a64be4238c0daf8561cb7148ad24c63f93881e1e2444136ea3bfd47de1ff2694e9b8a2d73011c766bc684c83a54e013324608544ce0a3f4e8bdb79031f8743ef4e86c3f09cef09cd55a4cd54389f172a5f2292dfb50497adc443e68c20953b8496cefb097b38065773bfdbbf15a6823a254eb371374e19f77ee2c880588047fc0784f2183f1a62768f8622d41df4d39d5b6547491d667e83a4028c4bffc484653703ca33d995b09f2bd142714e9e26742a83cc1de02fc3b18293d5279f3bfdd4f0eb1d40486e10665103b3e59dc4267b01ee8909292c658ccab54425df17a501d4402f174a9744e46647d77a3fb223990c5609501341e11bc7d97f07ab27b30f1445a34914c75133194ed1aa2b29530453e00be8cb8c967dc4f9fbec67f05560df2d77344cedac52bb74a2d501ca4511246b09c71ad31d00bbab8b90ab6d86ecf95a81fa90839224070b8fab23bfd264ac4087c1fd36b9811b1b96c109b849bb118dbe001b8019558db00bc5a1d97247cc6cd616bd2bf0658df11fb734276c9d2386d2a929c16ef449bdeb04c2135acef33b4bec52e40401ed1b9e3e3873f735ffa6be080acbdb229bef1d50884793b7c5f76d9b3ab60af7ef96d31ba05da9aa6c732350dfbf898ca483fcfb0f1a3162a28e218cc894fb5e13935ef848875c059d8cefd1a19c78ac64023c6224f3dd54e01fced27c969dca345b8aceaeac736e470fa2563358c02daa7e277febb939132ff8a5038ae3e15bdff489e91cddd40e3b3b9edecb27616d17bb699fcc4bec6a9cfaca04bf39b584628df66ea687edd86846a66e2209003993f2f58e1ee5442000df39d35e64d68b410caff30330ef49f20fa47b83fe05115b379b9a20671167d180f6b72550f0de0a07a063854d666faf3f69c219ea03cc9984b17a650f71b273490d8fafc5c678ab9ee240dbb3de35ca28e05821b2bc2b12d26cbff68581e74cf845bf756712d899b0e0ed8c9a79d2faf0da4bf50605f0248ef0aa2609515576da6f874603a3ae378dc15140cf79694c53d69ebfa4eee8d31d247bf516511744bdf8a4e9560a78fb2d8c7dfe616c7d3e76e962e5608c9c76d9ddf1e82ef52b084903a0942e5eca70d7b43cbeb6f271754099a2237e15f65dce31c1f497098968a216620832bed6ed23826e767fb58d2edee7643fd19b0e6a9591fa51d3ebf1f81cd1ef7b9335a25e558a86f82813e5a0957e9f0d5e70a2860c3c72e18748a5e5b44da37bfa1ded037fa20b648f2acad5ee390efd0e2e0588f7a4a1575f7e41a1bd5b65893f699c0449b6572fd3b4deb2d1b90e9c08c660cc874eeedd84b35d8c12aa311fd22469ff69aa4cd35bee0df03e27c84116f4f4637a45a7a120119344971afdf4e8a96b21758db88d8797efb2c17b77b06ed908beae7d5158eaa7f551ae3a05bd6ada9562f69927f6911d651bf789246798614cadf7af273bf8d948ea642319d8fff16648137b2d1fbd7ab95cdc46d0cb9655bb8eb80cf2a99c88f5b5699c7f079a0507526d0e5fdcbbaa35e2a7cc6be9a301ac14d3eb8cd5972cda64d9e038df591f1dbc657c249c366ed9c022b7c7534d84619e8060a0c67f741171b51565eeb85a8095143db3906d474bad25b4ad8ccc5a13c66e2ff7e5d98f603c0a97e95386eac3c74584c4f7da7de4495b3ffb42ef8a4e12c63f921665b55f44764da755e9e562cda2941aad9d439b152087c458701ed6d3728bae4670e2ae3a7e76cc0d2eb11674e1e5a320540636316f2d3188f0defe751de112e192e65b3a76a7e47e48791c83ba6651b0920df49921ba4e5e5c522cabf00bf4f5b6f5a132438353473a5cff81bae86de19f4648dead1da7aaeae40e16bf712c945cfc74751dc41b68aef67aab97e7d30ccbe3a9922500e342826d7d1aaa82fc7a866dcd2a49db2294eee7db875ef51860640b94a6e260025760b17058c98933a28fd1c525f71185d9b681dfe2d382c99398cd2faee807bbbda17922b4c6eb124fb3a436f576ab0bffb60cf5745e8e1042a6b7f797264d35bf040a38c10243a7bb8cc20848b180e6bd5e1ec5037013227a4d86926e13c341f2ea16243009540e5260cdc49ab935a7e1c9947a0795a49f990b662dbba052413f429bf50a0d1390e7a8bf6a5ffaa82c78ed4adbfbd64038f2523fa83af275b4a9edf822704d1cd3bd761ec4ec376c62019c4f8c1ff1d3a40165aa78ee49a81669c4c64078e9cccc4f8913fac5177c40ee3203655ad8e8bf907b3ee7d6fd8acc6b3bc5f5d340439fefa65e951ef4932a2f78b2cf4d28ac719ea4b60406d185936fc56141075ba9dddcb9b04cbc3bc3172dfa3748bdbb882393fbbc1fb430bd42e430b70b52721ed64b690f6fa5b4ca7c5031ff15f5d0f65e6fff6b10a7ac0859c26b3e6837fa2cff959677f34d88c5f2e512bfb6bee797c286d0d3e58391afbf7abe83750160da7dda3b8b5169d4009fcc455d15b34fbbab07802fe4bdd124791f42ce6a1349d0eb786608c2c7eb8428f1b56d3079a31f753b75282ad0e0a413bc94b7947636704c0dbfc624e55739f044e0c1b864d3213d7e5f876acdca31035cd81869d07e7951273b52ed70273786fb025b505e045e2a12cb71d0e11d9651ca9c0fa5b16843ccb49a0d360757078b6671f30e0d85a50c47f1f341d481b0ba8473880dd92d9a637538e39f72d0449f21afd16a6c0166696cd0074d5d785513b8964e0625e49507abf49e1915303ce5c45ad930bcb14f55dde5609ef0e698702bbfff664e957f8bdde1742facb70173e9dda99633af1117de66991f35abe440a16d25d68e8550544715a029d198ec9606e4078e241607f76eda71f6a6bbca4eef04c0ff785c0f882086829205119302e021e01a916050e6981ab88ca99009c93171694ec943b4dc7d44394f402e4be89b0a55aac1903fb3371ae6ce518053565f4baa20f602680b8d79f0ab115727fb46aceb6d111dd91cf90623ddbc0e9c27a836937ea0c1003d78b7522d0ebebfd9eae221a4f067495b3ef46c0186a37c75e799ca70791eba58ef9841f9b7c4a7c1aac582551e6327a3870774a7845830f234170c2270dc22c9ae2d55b7f725c36da26a5cca0a53fdf4d251deaa05f3823329811bb757d3928e777531bf4d65ac6e04c3f08fe349cc6e5258daaec19037bb1ea221dfe0be80ae17ecc610d95fb70d9821aeb30dcba277058f4eeebcd463adb1c7090910a720f9fc94986a5427a4cbaa91af2647ab8bed8b6fb4ae6fbfae412ed32d4845c57b6f36c673396796ea6c1351e5faa263a9558d1f5a57e162b230eea8a1432b0ec9ab44a1fa60bdf7b999bc36ad5252dc912972e0a944af99d4db42358c0101ee6f43a36a681f94db2b50953e23cdf38857f86ec459522062699995faee355ab1b9b3eb55b36bb5656316dc9b53a4a78321a391633420d9ca897e36a49b2b604d0236208855f89cd31518c525f28ad37580c59807905bccd058645fe51e5b6a18cbe7cd712bdcd23cb75f1276d4cae9c565a721a1cd3b132454fd2fdf105cc53300eec55789fb420cb11c7d0d6a9d932f79f53b6cd9d49849e78c62575b758771eb8f46b4837b623ac0bb72106229a80a24e5588d3a88f5b7519f45d6970f52692aa695518fd52e9d5033e3cec570cc71f312964d95dc37783c1f95b8eda7fe4e60d20b76351161507af53fb52be6c54def06e453f7c5e40754c75079f2dc3e55e05176ca78f1553ce2f3203c391947e1d963d3c2ccfd7af9856c3be50e4a5486ab6570dfb51816773713d8cc6f5cba59062c553f4ac4249b3daf115704dd81825bdff85cad66b77c1860cf10a35d99cff1821bb64ad0d1672da6b46f9ba5dd12ab536e82fa8df80df87f5f0ee50cb9774328ecf26adc2bd0b47f4c18a28da43b0bd548e7767a77c4ce78229c1b9871ce52adc0c9d384c7e15c40277c73b5c0d3aa533adb46d9a6d4d0b3e3f637cee6059477cc19434692963e3abe52889827867f036455c49c0987f53e628a9e8a21dee9d6e5fa91aafc861e8eef1a03620ade3ce7cdb7826d0c6bfadb2e8f2d86a55748d06985284a1564bd2dbcf18399981dc90c5667191ce003c281032d82b5442bcb895d89a9cfdc1330a7b5469d010d6a1edbc54ec434160eaaf55d29bde83e0f81040b618be223c09235895b60155790d7634da87b9662cee7dc6b2500fe870c5d067294ce3608565947107e93be79dceea638d77c4ef1dbb4b956386c72e0d4a428dad0ca551af72f6e34b682aa20d701610fe5f9444d0bb11dd5b133b6cb6c4a690df4faee6f613a09766c4552d8cdf900c971033ad8f2a1f0b924b152addbe6c7be809ce7a0cd615ac0b08f7d15b1b36a229e0bb0931bd82d5afcc58018c5b2063bd055bafa9ca9aad122a4b353056362fac0515f1f504ab463509067690500abd8e52ef6fe49b13b6e09122e75f025fe17fb6042e9342fd60183f213780d4a55dcaebe13cc0daaa4d646c436c0cc8f9ab2714784954a8cda0f46c55734ed0b7571f5f83ede5e3f621ca65ada12762eccc8ebf6f9abd08fc72447eb56b027fb7bdcdaf90975b03aced0c29d0be4f90d9d9bd9388a116850335b1fada879711dfc28324f6ed72a688be520c4cdb8d72b96946e99dc8442c71aa478baa10595fae9b2f2289b11f504981c716dd9e9650b79c6dedc087ea2c4c6e1aad8b6bb4da0a0e3e33247e91820d9cb168c54f9c8c39da9dd8255d56926c5c29da7c232a6d7e382f37a74aebbd13ab9823fcaff3dd28e9ee95687c2506c990b876093a1e2fdbc89351e8a62136e14e1be6736b7172252a992b11904d64daef73a4b73bbcf7d8ececebb6291c081d68c04c50b1d586ddd59ded4b8e1bf3ea94fd8918ccce312b4e24b6f8349a7c9193f5ba36b224cc60e6d645e27b0476faa97cc51ae33d8d95fff8a6140a7445bcabec771d0126cc35423ff15a68884b0a5002148c8fb219764169e334170bb70b6d632e2a04ed3347170ace7f3cb9f94ecf885fcc3a6801b137fcd5a6fdeb1d5e2abd966ee68d436fd9340743515b98352f38a055c0b683c0919d3d47a19bd71ce0511130c50e36873efc974690fb39848aaf8b8d4bd021915b5f386a12a52da80f9260720a000cca3a9a838abf7857acc2d6edca43d427e1e5a046a5f54fae7d3cdc3ed07d58503a5dd2e5c29c5237337d103e38ab0bc68714db84a711f712973c1f0df11923a33b93f2dc8fdc08b806bfdb64ab5835923d9632c0e5fcbc0bcb78ceea921d620b820be6f3c8dbdb95d5dcb7f0adb2091f3642348c5a12abfab2001edd3dee71b37ffe7a145ab03845e87a4836b0420d2789d50956afa7ae9ccc5998b6721908b53b4f50194cdfc18a3ff50119cacf74b5e7d516634333318cd744202fce20de61499bbba0c9eab2272042bdea4362faf16da736f46017ee49154d524a9163e1939ecf29de7d0a49d8a95b4f06f2ffc5e80388fa17f0a25553c75b5685dbd9dd476c46d67e4fc23252526b7b0c28ea08fcc808fdd6a3ec00c52fa2805760b5cc4b8f35004753e303ba3e46aae4699be54c343e7280ccbbac47a0aeedd1d8e48e38f39dff74b45c530e7567788bc78f6cf43a51ca9702089db20f2799e1a2c896938eedbe98602d009f8fb83ed7c9a90cd060af6aeb69b69f9be65d6d4810e560defbb3f5668c9ed75825864f2f0f2e65b693dd6a9dfd7ab99e041a2d023b063e0e1d3a59a9ff2a9c6e9d4e5790e7b0a32cfafd032f13569b256b0112efd02d88be8a882f01972bf5f41a4b808a98910c424e4a4e9bedb588da1b5fb632977f13aa51e8c3639487b72da92daafa271afc81187bb3de1af560fa9c08eacbc7c75d8ce9b2ff812295504748eee710fbffe9d32d229ae7b5986771d6576f01d07e7ed4b3460152140d85bc06aa21c8d25e22ca63429ec90b384a319b439cf1ca24810d5c0b1188554a618f8634cc58692fe880c4059c5c42a6fd496a5d48c59ae7911ed1c010936e5330bc03bfd63ef5fa62158a84fe182a36a8872749fab0fa936299e9f1709cd98b41bfac602bc1abd103a6ff70720c7c8476a1dc94e6276160408d873856b75ca6c92f9b9ce89412ff4ae9b34a74ae68ba3a5406e53cac916b5f03a2ad5c78c323461a13b855bd83059a99cf17d141cb04bbdcd422e105a27796bf44cd03d8340af20dca2b43b7557407b6d85a9e2bd70e19903f0dbe7a31c6b42557c69ea39f4377f120ee8a36834b637a959726ebae78fa98fbdf55d11349a3b81a10b3f937ec0332ef95f8534bcaabe93b322d33c971e420c89d6206ee26c579456cdfd840557a1f7579c261618c17ee2709d6baded47a3513970f787f8e143bc7029e175f5b3368ccb52bff03b415d2cd3443657a4d01df4fe5b8acd5c83f9a885e8bc211da7b223c27535187965aaa27d44d7c8c350e69965e418ba3f9fc0f4fce9e57a4705912174c957ce750dfd6e8d2143590a49c5d7d28d9eaca7a722ecc56a95e29ff4ca8cb352189030661d878952a958595c56cc28ca83e0f6a1af1fce634c54c60cdfebc68fde6a2ee08d644f3cde9b7e45154ce151e87637a47b37b535a80682d740d3b6c2b1b077b41033b8421d94ae49b1f81f09f027f1ecadb0895ceee50f56840aefb62ab958537e5e9eb829af25dbc5bdbfbd03226b52466dcb5390a3aae497ff27d3c8a2d82dc6660ebc4cede379df410bfc73ec8aa42da3d3c2ea9a9be353add919ea2132827353150a5ef3eec06aa562ed4f70b5201202e89a27d87b407e33f822524380b5fe66619e504d636ac0ea986db6447d1c5ce64e0f29dea24938c3ab5286d6db51c52a4482ee08cbf6fab0629e28ae2485e3b069ea07a57b9b951d6901a065b8524def117bb7551cf39d5943003cd81de2918911bd595b71fa886877b52309ae5df769befd0bebb0a7b287ca268040748bde9f69653a4bd35022a6bf4044dbf06face361d843526a31858076b54d0c1de6e421ffcfea38891e392567d87fc8f3a801abbdaec6188fa54939be355df8057d742a7227cb84ce005bcf01717269329f867430e4e59f01eb904d7d071ceddeb4df0d6cf045423e5e0c1753393a942a0d910a91a3c27128a916c8182077dc9472697850c92d198be973bf3d8a9e1d448ecce396811c8c25b346dfa4e27fccfb8d8a9a8a5404a802a503babca41572ea07012db6d7167087f540671b6a7ef7bef9cfe7611efb4f9a2c085c2f15c2589466eb4fc20105a33d939c49e693b49180a89d3927a8688b694150d145fd4673a13a6dc306401722b11e561c0c9e0a09c9099d9e21e4785d3d47190ded94803e4e5325718c924de904956f9aabf0c39a08a6f6273ab36c3e5ec2226bf97563128d1e1eb5de24acc833004414f632c2269d80517138c8bca0b1ffe29d02c084dda09d227aa839511044a239297a87b05db71a25023f392492716a1e0fa8b099c42dcd0059cea9ec9dbbb882b09e77c2b287d07ed5f6e078a84fb395e7e9b1d769445cbcf193270ae057b916e7df38e78626f26c489b1dc6755ec4c4f1ca0b14ace74f023f74784be03a2cceeb14c7bd1c9bd93d2d67e2f598a304958bec25083af6b35a4ac8646a71e96db7289d0f907d941df6d6506aaab30e60663fde4eaaf991fd0598e252e51e3a15321bbc610cd37af2c91fb608019b1fc3e091f0d3db83308ead67d3fb97fd4dca2e391d9a713440063382fd43e4da09a82de1a348ef51a80c60d91e4b9188282b0c7e38cc94cdee7cd7838867de30f4ddb3421185cb8b53a464b0306812e955213176351eda2f24af388b3602926e610dd6e5c0d4874ed451aa92ed56ee1a48e8242ecad07f88ae983171a9867ab151ae990175506ac461dd3faa1155d46126b2c3688eed887915008aebfd6a91c5d8b2504946a2701fb4c6904e7f9670078b02ec90b3d8c918cc73f53acdd2159e99b4867b2ca0c37b76b4119a978ffd1da3a1e0a941bd5a2c951b931ebd88e1f9b453184ebe7c18e1ef32618dbf21962fcd8e15f923bfdafeefd523f306b56f13d0ea9b82fb5fda9349831c1e9c37eb4de81fe9125796bc4a2fe06c1c2f61e53c32e4bf086effe2dbb5ee8640b0e466a8c1214df13ea9f87e3d83404fd8c471bb26f68c7bff22a02593a6f0af85b676913d0b1e3b0018b0fec2f77bee98302d0f104cf288d348823dea5b2a52b8ee3929154950a798b8268f1657493d1e62dafac0b89a137abc67e576b6e5f906c2ea364af7454383ab2e856d23b7c99b32e44287c04c7ae8a696ab5e6066aadde76655b0e8531ecb15ee51da2254ded1aa7c4ef3b9c0555dce1fe22df25ab224e87adf50aa6eed93cd4cf5f69d74c24aef19ff9a4d9a90d7a01beaed9ccc536453651ec6b7cd2b3bb049a4e425d0e4f8831d58e53d7890e7abc531407e08ba6ade825dbf17e26075e66243607c64d75c09d86f2854c449a42769f8c518952cdfb7778f1279ce98db7f8beee3399b3e7bae6edea0f09dc0bc0f8b64d19acb1d4250a3728bbda66005fcd1d5ad0ec5394b3f415417fee3092fc8a14e08f184bbdb77fab3bf30414ebf5be44104f3effb3cb9728e0383616f98ad91e123271312c86ab3bae2036c1b9e5c491129189a523b257accd614ebd5156e025fd516a4177483db6a30030222354058d519a53e06bd4cf58ea3e75176ac802bd7f4c1b3e64667e6a74c5f1f442f5dd036b33357ee487a8410fe937ae88fe9f0cc92004fd71376d21e92e55e70366ab7540b6bca28331d745a89ca8a6b89f30d830d5f0a50b9a0ec475389f116d3338a6551f386b9d1e78d1f3a38a632d9e1ae303c5468327ecb27f44cd1e3104f95f892a0a7f2ba9bf78253f4ddc18449bd2c6af943b9db7c28986152b55a2df4ff525364b825717ed31e12a1959cf6cada59e932a025b10e046f0aaff6eb1bfb608c79c10ef27f4e80c98721ae28955b5a25de0cd1d8c6156fe883b94f9ac0c6f058596624097545e81b683d250b82d0de8e480224bc3c4d76f0652aed99baa0893d96745a246f99c4b932445b6f09ba570bd82025b21b9416216efdd26392b27df31e04e1a99cac8850a642d5b593c85abd2a356db69f403d85391f677bd00ebd871ac61ec70dfb95223f41e65b668c47fda312909b443d3b0659a9aeddad697f0b3febb5615b66e332012da199035343123f696bfdd25560649fa389a80792df173da838da96bbb4bd65f58906b96d5166a5ac72e88eb9aae410c8d88b8f52d173c695b2720b6bce8a3e43ef259150108c9552e29b1f152893d953d4887f82731c925357a4988cd28d2553f464075947afec431d49b63cb3e009eb7b36afe363766866c7ea4bfd27e68d77c55d7c000b1533fd69d9056ff85fee6236da5f0f0a9a4f3cb04d745ea9730cf6c369326e301631cb447f9ba678f07acb0dd5c5fc112e7984abb44fa0326a92fe3afcaecea0be952ef06d49200df822d8b611d859ae7127d9cfa2aaae0a79d280fd4f061792b122cdb7c381088fd006b82a2bf86169a2b7c995eea5c0a567432c8333c1393ec24f7f45a7e01af41267d8884ac5c90472a143ab32be3f3c5cea86e9b9e1f2f2671131f9bda2df1e58c2476a698f9ef22ff4034bfc28a093883e89984334b50398d7dd8461e49a846f8e727b6b2ff5e436e5f047456ae2b0631ef1e69993a210188f9d37dcacc3e481a0222f1e4a1f67da11255dd0c421bff2fb66dfa2c984f08696cda90ab73cc0dd2224616096ef7eb2cde57ea2f96dd69014c8816a831c5fd21a3975a563ea6476a74f332bd6e9d20e1713055568c8bc8263d1502fa7b4259e2bba87369caa2d1a4e37ee19ba672fbcaf24dbff88eca9e3ba323ce80c5c1a2390b94bcaa67438abb6f21624adc93fe89240c91fb4cbcf89bb1f7a74d85f7e02efbecddae8f27fb5fe60eccf5121ce572f50adce8a17bc1d71f7a7f1b762719fa947c439b868e15f755f3b820fd51c20ab7fcdac2a3731586d8c92fd3b59e5f7a6315de6ba363897c8dcac2de50a8ddfce5872de397e63a7f808dd60463cabd4dc26e871849f1d42ce42b9f1fe78dbf4e7a512b27b1f550fa8d7c79d238f37aa78ee7ad80c9de061fb7cf6ac1478a41156d904fadf16a23cf9701289990bdbc5132cce70da8b43ce960dd87f1e2aaf06e04b2502f3a6d0e4db7236408b9539ebb02bed17140b9ab0825f996b5e83dd19576834be79c79fa5b60a721719cb3c0db71ad2868c53c33d5f699d8af2c4a48a0e8c876e83aa278a2811454a8342dd4dd50bb4e2a76aacbfad824b9e2f2815a5ef8bb593f86de1177daf1c168857f07aa56897bea36ed71a3fd30772d0227dcf5aed26acfa8c0d579a01ada6598f17a156eaed135e5f93c649cb06267418445028cd7e1c0cd4b7e5724f9b4ecd18d1dc2b00dd3e28885ab8fee9bcc4385c98c19626362795e1eab47a373e61f397b438893ff49b82f4d7369170bacf778c0f636288cdd851cbb703710a852bb508ca647e1293046daf621b614ca55f8487548ef3bb02d179e87690cdedf6bf775aa81ed0666f45742856eafebff9aefb7cb367982eecafce41550865c16ceec4452a46191fadf3f12c15e33fd635106a8b8483bd88940313e89779fd5667f9020a65e2573066a2285c9ca68c1d1fcc6133e7b5c2959df43f1f9e0f88cb54d44875d6f3d05f1c2bed3cb4c08ef86c468691b414140920c9d2b2da5500f3f0b2ca778cdf784d431350401e2485f2a666691b7149d6cde9b3a339623302051c55fbadd23c981a0c981853a30fbd8b9b43883a33c25a0eb6c037d891039ce1ed1417648907552f8764d2f2fc7bad647a556826ae1bb3c87076f41f4dbbcfa0e569f4fd9d08d2063284ee5b58c5cf3024e364acaaf76bdead983b4e0640ff9473c19925b42fb4e3c4423693450fe89e2ee069e23b8dd13f49f803a03891cebebfc642874de53599e87c7f8028252491ef1fd4eacac2545dd38c8c2c4012d34e73005838500ff077258f492ec247cf68cfa91f60d0871f697692c1f19bc9ce8cafc3f1fed8e3cae28590c66eecc811631308601ebe78279983efc645aa67374dadf5ae4fa11a1416cce227841470e2a145f07d1584b13837e6c07709d41012ace2000a6e7364fc78197b342f6c7d93d8bcc781e8f9be900d4bb1fd011befe613509b1825a347604b448927f5736a8fe43236330c1f9c23b3c5eb337be0f54770c7968ef8eb76c717246379ade24f4546a59eefbc5f899e7f932a1af0033967e593e0f72d771ddda3dcbc9073d46f77fcaa0515bed6e2f306892e10ef652ca90cf1af87e567faa2c919166e7272611c46f7c66ea5a4dbc3ea0a19d465b48eeb8d150aa09ac4387ece1f20dc8d1b769315fcfd26e9bb3a0b8b2ad4a0825d8fdc2728007c229e90b26c03ca4d3205afaa6b7af8f3834847efd4a31dfd3e44bea156204e9d0f99b1158a3cfe111cea980bc40b4cea11039a4fd8f27de66edec9203964772d6c1b92460e0ff6b332f53af4a335cf26b93c0e5251a5a74ece6abbd584ce3c3276c963add33d565c7759c76b50277fdb12a843453fa87fe7f8b42a25728b047fafeb918c77441df333999ff2f3db52b83382e03ac749765fa2cb70cf87e104b61f3dc96666e43d191809862f3c45e1495d65574ff05dc7a9f616ed6e2a6b797e5bd29a8c7681bc17810315c34406d5ee06f172ca9b3614d10b195aa211eff959f63aba971c4805da661f16d5669a002d0ba1d7c3082186ad49cc6f6626fd2970216424132aa741988cde94e555d2d3b0cf4a0e971fce33b9e626543459bb33ac697a1b6c1ffef0920d3927817dfad3887d0a370f3dd169003e7c448ed16be6e1eede0adda21bac15b6c89a3d452671994cac40f4b905894636c8f150cdfd968de2ba15ed810177a24380456acb2083e96d4c58ab102fc9ce8b9ce049040fd9180fc29e9e4a0954da7e9cb3b5b9148ec91947368fe8cfdd8926336fb1d55adc22b532ed0a6762c537e070a678f70ed80fe585c59f0fd6328a36129634cc8832243f4ea9a1466801a3c7cbb26cca9136a42c139302499192a7aaf2f5c5b0b4280824f593602a003246a503d520d0a8a932ec9691b6a138fb18ccfbd2b026148dda16f23af16c8af395bd1ffb411b93275c6cec7b1eb50da56ac91ba48fb9396bd42b32f83fb2f5eb4494d6b60d07840965df2a36b13ac79e54cf5f2a97597da83198f961d8b1fd70e27a9541f0d455322f091a51377e7061158bba502b73b5a03131245e1ea30e36a03111b37347ad16269959f5ba76b650a89d1581de3e6627a7ba482a5dd75c7a56e815160777b5214a74ba0fcd0564d18318d7a64739554b9c94980fbf55ea5290eb745c0fc417fc2915f357987c771fe32dd15eb01485cd5d49ca08663f800514b57da68966876608ca8c2e03b241f815947a270a4d4d8a12781af093103c735a3ee6d52380d650990241de44f8e1d4cca8ed71461fe49d9b48afc8da3b6cb2c3f06729573eceab0bbaa576450da29698fed6eb1427d9d29123fea6e46d583b09cb8c9817c4537740c98ae267bce0234e1bc8794cf0fac6e7f0e404e8cde305dcc0bd36561a76cf0157e1e8080dd4b6be193fd46caee3dd21650b140e7e9d110972e0abb5c45cdefd8a7feabef663f018c55601542780fa7d06038916525501948626965ddaf8a9c510328c1354b752fa1a1cf6a042980565d30f26248589b179e0e999d353d7002ae04e0ae93179e2c3f13cc1994e628ca3a0f9bf96ef12a31d502525a57ba305d3735f79ff17d430a39c9861e66e1418b3a1eb9cbf29657e67fb0686324d110135456fb24aa4c0130dc29c78709d06d1e50c02e6c857ed9f3ea4aaf9eda95f2c63d3371e22f26fbc78fb7260e5e3aa45e92f3599bdc098e62d41195d633a8485f44535f9466d176baff509bd8fa94efcf2031803ba7c4d6bca8169666e5ab1e5109db96330432af9395c2e51fb03a6c970506470df2e9f2612884b0aa62fd9b7cead671e35c8436bf504e053658d33808750a7308b530a52bb46a991df292ec00212b6c29eea8d77fac8e1377a9edeb892564bb778cab6fb7d935cc560a0da410f8bad3b7c15c8e9a3edd041a97a4a1176ce8968b36b143d86653cd03d4dea04cbcdcf8f38122b929ff2ea69a5349449d112681a96a95ff80502161e7ed989eba2f641b058837d3b61cd7577d2cd77c30ff64356b79fca93ee1da187477c3726a4090db1c5a0b2e93867a537bbe4d539bf880b8422da6127443dec6c508ceab712aaff2e1c451003b0f3e3db441326922a8764b9bd48aad758ccff17ffa0bb3ccbe190c733d76ba82d557b8cfec5be7dd325503a7c22a45dcd24f7ebfd6983f3d2913cd124301aaadc5b165ce897b3067a133aef1d6584822fcaa7fd024334663b13c48b24dc4f11f83b914ce285c4f686ba4b9a3f43852164e3de2d5d539f4a246534ba5c949c69f58e9967c022c264b39889d36b714993818b5c1384520cdceb8c0337e0c3fee1d03e5519badda3255a5e540c18cd7023e322f1c1cfc9c959570916fab95a7321fd2d0324d50d42933aa2eac38d475d92b7e0d6996e8086ce54d03cb8831a7ccc8380746dab456db7c5c08861089a1f6cc20b142b73f30f98b97add55f003926e595450e4e9060de2afcb7e7ecb36a5e9abf50a8257e394eba1da2e2b1c1db44016255e8afb00a1d174f6d5c6c25cef91a3a5a2264ba2608d40b13224baae16869f5f751dcfc54b07223483057434d91f539826635bb98b5a77a62dff85055fb73a5a5741c6b66845a60eac75024750eb9487d6a0e89ca3821b7d944ce57522124f3eec9f1092ab9428365eb3857aa016e4cf3a2a383cb51786b3601acd0dc38ec5188ddd893fdeb4c8821c79c70fe8e03c2b3466e087ef4522278a27f4e5e4c3eae0a7f93d84c494ca9e28bbe437a6486327ecac111859b5203a6994c4d7562afe0ada11c8444390d97141ca5c60f5e6e9ecf5081b25b782fc9b13ab702ee2ba7f17e399eedad31de02fa091274583bb2fb78bdc5b64688d961b2c7f6734fe65f1435b848886c270b4a3ca98c2d66acf84bebc964285815a06573195423575e42786e40c2601e8ba0e1fa566f9b15d8c5c8c9150e6f1b093092bf9a839e7aeb420a9fddd5ce62172786263d3313b0d2bb07c982c1a892ae26f57cde605734be472ae521d92e73be7198a798f2f50029ebf81571fd7e415688da18b940763e56adac421875fb9b1ae096b9566996ee932149883c7e6d542d3ed1192683d995f4c14512603415162f46d51cefe795aac99efffd048f761fcb467868f96967b69041e6765f6da686a4eac7f0275efa1b38ee90b652eb0f9ed9161e8f1c777aa77c662d9895528de1bce3435f0dcdc7c255632d6ebbaea2998251ea78f23c92c42002a2ff312a58419a4fd39d7335605ecb774ec079a3f6d79cf32db87d84b6284534e56e66b4043a67b5133c3f1a6ae477c9890dfb5ac425076fbd43656434346a3201e85542cc339a1b7fcc0b576c325cc2051469477d737984c2046da48a5dc22d6d020a52d2bd666146a21b395e761086befe23cef2409b981e420c320c589817c723ca9a07e04ddaa00bd8bd2447c8b5241ce814585df89001aa1da7d67974f814d3103634bed6930cbdcbd91b1626379784524426d766caddd079ed11616ecbf4874297f43392cf5fa57e157d33ad7f0ed859b4b5b2ed103caee119345954ef0dbd5f2f4e37c8325499d725dc22abfa8b3afb3e56ec75b65d19f58a462532ca00534652a145d8b37387fc13ece3407aced3ef54664a56e4d2cf0bd78f23d4d6135a9c8f80ccb5b6c1081baef30be91cb2430647ec9dfddb9a38731d762b1332e0d56fd55de3c27e410e24f331b7acf486ccd6220264bbd98953257f942dea6bae067910052ec8a50a9a0448ac671b7cdb2b9f1c865c3994d46335258ca356755f33d7745e654a893c098dfc472b3729ee5680131cc0a465bf9903eddb4d3883242321eff01c849f7cb64a94ec2b6105023270f1d2112edd326fb1d562dcd824d1ae3c8c1b5d3125769e08d9dac7b4261fd605d2c91001c028e972eec8ea0148bab33059953eed524cf1beabbae21fc2a306bf5c08ce3637a3f870146dac34f6f6e7217e0ce659e69158ba4e430061fb8abf26ca7bac9ab3a256f907844f1f232792952bb1add2394aefc87b2540a2d7e8d40b641d24ea6b6c32c4cd6e0b38e5cfc0473087d98ad5292c7e624ef35b0fd8212fb1737b8a7fa93b225563af7025f2540ac34f0c2cf17576335125fc3d9613dc658ca4d08d8cf5bc930d2ffdfbcc12e5e0aea3c65d32af3924e039bf2675d8e0780787f520273307a70e01e98616ab6b193c6a6417038253156fc12f5e2e9489b21a23e7229d1188993eec3c172e81c290aa77558e3ab431247e3e20de771a4ab27797de9ffa78eefa4c1a7892fa9f472beeac8b95c1b848cae2930360df8232db78644bb714ac927c76fcf5aa51fff1af44d7cc7e3c55364312813bd9de2b3f919335bede5ddb91f1136763ace546efd4272c7ec42850dd7eb871f2c7263c3deb792c2b4cbf3ba7778460dce5d4dc11d47426dacf04c93d6066a7a09074440ddf8e9668028a39bde5a6dffc41eb285b1e5bed0efc9398d882d6d6be8a9b53361e5b773605f748023b0872be6331b49e80c7b8543cf5c496c2ea8c75bee11c56b8f607623f055e8c6d45a9c45df0c7dd7df7c171171dc30d48c8be642c1f017c601697f3aa15c8afe26ce09a688be9ae7a64153ffe0cd4a5c1ef9ac42b4dd584bf4e2a7ab8e401f995ab94bf14b0ccd469ec72c23b19dfa5ab48d895a754ec2bc98f070387c5bcaf01afc07351bbb0412985e9d9decc4749a4a27c16324c36347b566ba4ca65e4525854344d8cb429b850b7527b9afd620d7122446e9792d3827cbf79ef68688039def1142c2ea9b3a674cb0453f4fa964f253aa084f7e08441adfa2085b831c855bce5f290b01ab82f4b41fdb469c3b7285fd0fb62248a260254ffdc703d44c8079ed925cf195fdb895f6a3c0248c4f38714ffb79cf7264f41ee5186b032f1fa734c1ba9d8d0f7c1e37074572e033e67011a6e990ef0bf13a15c67b378aea32d366e8ba5ebb92db57f7277213e9b3f2c423f3f7409cbf35d3fd58ca2bb485ab7d097f82421b0635bf5796b9fbc5af065166814c260ad40516f98bc07df5fe1066b95b7331cdec915491b4abed5079c3f6d44daa4316a88d6b302a8f18a71f19604b04fad67ebde80fd4204aa4353d0d46c8b3131b92ec39500fef68333e03a1f11c91cafc2cf0ffe94d00e7e18cbaefbe2a799e13961673f1458c2a91064b178b383ccfed3ab1a582a1962bb48437865c078b9bf61d923072c2044d9ae9a8dcc76a275f7f0bfa78ee5f33544d20c5257b3f20d98f3f8e152657cf13eb13a33b6e59f858e1fd2bf03cbd2690aa06c4bd75848f488350294da60dbc0fff5eacbe5a41be19cc5c0dbeb4c9f45ca7efd00b910ed4c5299caf75e4158d2dada09290eed40aef407f488abaca2af85f48e67a71be78654e70561fe749befa4edcce9bdb86dc624941e5664b9425237b433c9e8d541b2ba271d9cbce814853da21e7a81a60ad7162a8370eb118c81c33e1f987d887f3b0aab12005a9a1bdd1e8722a7fc6b8953cde9c5464fb5db5ce54ddeb7f9dfa061ea3fb4c51ea3104a34d7eb243e4c56ba6cfc8cc58a78d80e30eb36ebd54b8f6dec3ff5726806216ebb75316aa84017699db60e4c0494a33f04d0396338cee24b21f28e391a658098c33a03fbf18f2ca5e28b02f90d51e5a2ed7a0d233fd74527b6798f69e80453a5e84c760e2cf6814ddec313e1a2fc059cf6aeb3c167ce45ebdf7fda00fe95e513a9159b7bfc9505a0aea4c66075466d349d5cd4af60e91305f1189cf8ca4d6c07a026d6712cf0532b29a41e053766bdd0de778dc76c383b240f612ee3495b33e1e1ed009a56cfd6d827319903300c4992b92ba44b2b562668720e0508875baae10a3abedf72211f86c52c876d7a77967f34280f1398de65440f1049e29e8421fadcc9c131b5b3eac9cb83aec07f926471230ff18bdf8c1e6674142c74d78bafcd1a30c1b35d7c496520f34e5d193e255251a57c9423be5f286dcd8cd81340493f09c1f0812cbfb8d6dda458542081f43ae18ad1f9e95c02eb7bca4f4dd864e69d10cae41cf314d1e8ceeb02b33a3fd347e2d78846be84f7395d1dcbe6700d9e84459a7755e402b36c8dd9ea92adcbfbd6e1469d4b9b7f5706ba7b99384f5507d38c7a77e7e1ad10f3d33970b3b8d73b0c6c0de00e0e5dd3ad801d16b96ae43bec9f2109a5a3fbb4465b2ca2da7a60ae4eb588ed8cf2f07061e1185ab3557417ebec19e0407c7c074d7e199f99125f41d558150e3fc83115b5c5f2dad411b0da2ec2eb5ed8b9fc419224e7f6acb9278849640263877028f7effbc4aa788775eccc38266cb5a8551128267a1c053cbf172d757efa75f2dd952f3cac32e5c78b5490a310f02788209abf436061eb58535025bbaa34db0ad065c2850e0b36b42092acb7a635264c8ebf3e75486eeda875817060c34620edc77ff0648f48c0cb18c80de7c738e50fa6a28bfcfccd4026b7c27f2a28e14d1f3497636d5bfc54e7247bd1f3e10eea45855b1d5fa266f21d98cd8535e24e9227894d97ba6f3fc3558c453430544d0bfe6c4916ff24be53f79abd2ef235780f3715b4e09c465a0609ae041824d78b066bc75dac0ed9a4a95aa955918197ed5ef04a7c7b5d4c02676dd01a06eed4fa5247487044e045243c66731d353373d82ad69bdc4ab03a7c898686f38ffba6a3584262fb70477a5986ca3556ca2a56025ffec256096da206c21a679c4f7583d3c2e2932074ba6a894d2a3d177b34e3c3371f69805df313b94e31b82088ca3b20929464a74789a16a853823a145054d4e51689a57b224f047cb3767195f01d7775b62d20e07ac4f163a96d9eaded8afc3b2f398c280b0b3dfe224858502540b2c9de2de2aa7ae952c764af37a23148c3599335da35eea9c28f3bc2527b652088b180abf4e5dfb9dd72a385580cf2d1bc37034a8a233e85702d838cba23ced8b4e6432221365ee07d5cb8dc1f4aaa824978e23c0b66008cbcf61e4e8f52e7877c538963cb28cf480025cb3fb576808b1fb69d38954b4ff3b1d78d6e4076a7bc67afaad8f9be0a10a03e3e5457d48bc96349028dc5aa8b4f28b2d9c6d3bb26057ead5accbe6c5dc2d35241f26289e1dc7d91495f547ad516cba09c0bb89af6de4ee1a5979eb6e4aff98f4154e36551479e67b4cbc53daec67c033119714ab5ea602fe2b6658e7f1768c63e6aea9620245d551dc40896f1ddc29a526fb4010f4c79a3528c5b7ddfda1cd43e33ede62b9463f66981e9fcd526ee289ac4449a2acfb7a8cd352287ed61024f0fea859c3d746648e34c7ed571156c99d0e6c834b12f7897042026bee2fea1f9aca28242651977a1b4e47d91341562c5ffe56693546e13abddc5c8f9b9a2c8509ce608f8690b2717f1c96d5ab5a4483708b40f7ef2a169cec9c03980da0287ed1464a27576506598bd8e80d38a8b67f693ff8b85a606ed157840be88c63bb1215d6c3653bc63bf62c2374f589a99d1d7ed88a85f7b768f12970feee40eb0066b38024cd5b6c28b64f94a4cb88062a9763ca4138236d244ca0f638890a0d8f5d12166457f5b941b43a856c693ae50dc00d52504dc2a2fc3df42e2869e5c57b1a703daece6099d1541aa60a0d403b4d9ff6c510e41ffa155782120a85509a0450c36f3db1a62d040e14772b539eaab33ac4db6960c08fbaab74cd7cd09899a83f916448214af29551518e7d0968ecad39fa6c579eb668076355586d3d8e380d19806578b9bbe2ee2242bd07f2b5dd1f62d9a752474e1edbe058515e591cb0fbe9ab9d7669dbea929240f2be1def6e606908bf6ef575d72246ddcfb8b72d01cba890b0e3e80b3a792b099169fbd4b634e2cded75f0c7e2282041bf1f0c851538da622d9b4695c1c4448c3bb4610eda6a2d3d9f006e1ccb28920daefd053c2c141f9952b952fd69f78e30b7cd6e47b7ab4de7e57b0be0e24152f1dbcfd2932f6ab77e0a120e31d176644743e2726ad382798c22c7eea232855bd1790559816d447ce83de381ec91ad1c0405cad327bb1a6bb29d77daa2f688879e9dc921e33cd54a9c7682820126f54c5fd83273e0838bb661735f268057507d29a88e550a8d298e4eb7fa70806c3edaadc35250ee69a94cc55898f5dcba25a3d1ea0e637e16182b7b7826b1560769d081cac58a65b95d16ee7afd9551bf04d854a27ec1ffc7b85b9766f5a684480af35da289984002106aee839d35e7bd7e71e99d741532fc5b3a0d9f93af475d79a7bc51b84ca70144b1c26b2697ae5019d6c73e83dc0e9c34bab788700498231265c043bf782e65f70954e117459895b304544da77fc8d783a5a248daceaab2fb0c7511032a6cb63c808989ec76e96eaca73c59ff366e85eae5b4b9d641e13217907674b39cc8daf721e6e8de386c15fc56e3888019e1158e83b7c3e05261cfb5683b208ca744d2b847ed91858245db678e209b9c7222ea0734e0f71e4dae6f0c1c7abe44ba3f8cb86fa721fe001d3f75bb9c86b3931d5e811f050d4207a50f437aa17a634d3b0143015b888391ba6182e2fd4f7bc83ce75bb3d8cb68e5122b947ef52b366fdff9601f27813a9709d84d62d173f0e4442fc0eaba3f08417a0c6ccb33d9bce55a26a8e559c090ea291b667cf7d823959f1411d7a6b09834dd7ef673d6723652e838be8b056f77e10dbf5178e8587f1e9ecca4c41d319e03003747ffd16daf4af3122d98210dd647ecfd6cae23e10bff97ca11c3f87f54bc4d449acd2365bbb112cf885858512139cda1ce2d57cd009d27a26648e8802a051729f832261d16b3e28f5ce97ded50440701e3455c3249e9420bdbf2876749004a9b327485c686aa9f12239b840e8cc8fbba51dfa134e5318e9c2cabf7ff2463dfd615f3d172b8bb624acee2d09eeaf259fe3c64ecd00701074cb0672a86cdfd22053943ba95e664469f1ac17564bc781bcb4d9d682fd058f05fb2063cb74a2d1e43ca3adf76d90f94652ada15baadd5035d0f4645891039232cf8ef4d2a5f954b9f5ca4c001a0a824de30fc764ef13a8bb5a011473ff27ff9cf465a90da404bf3b425ffdfce75cd3ce2f9731791ca61ef1171d7b01336802052c20329f3553ed6aed5a64638fae8778e84a432a38a88cb6d8050a51a9005a653fd3602f824c68e999514548e5258de42e9b297cb337e8a3543e14581aa1aded7cc4d4bcff1d2003dddcc1d576d74b18f0e9dc517cd4653f4329d65ca88c53b4121d5bbd11782e08ac0d5f2672502e6e8f7480cf3c512a9ba4c4a0f24527e96eea5bd714f86211abae33417ddd586f0a799d7b2d91697a92b1114561538c4a97aa45a09a7f83079f40f7365f35da5db346f5b2b8a81475afd1e5fd6b96e16edc3fc4096efa4056ba0945a6d6cb664b329bf3f6074c16836a4cade3715179c4f5a824499e741037631991fca66d6d73c3e3316e2a8a9f7a50208cd11ffabecf1b17e85aa4571d97043ccba07e9eb2b07b0938dc9ddba203029b8481e38edc910c1c6dd1e0966fbd6dd4970bb098d18de4072be3f74bc23b95273ea5ee623040cd3700a681bb51c47f4ee423c0dfc3f05504c7a72fe28a24778e47fa4806b0c7ab73d44468f732d176ce68be738e2b966734bdfa735da78f6f1a513584055958ece1efabd7bdf510d46d3a6200c7928e78cd49d459644b1fb2c097340745e24281f87047880499650554ad5b258e5ed47cedc1926cf0a50ed93858a047b8be26db7f64ae4cb0d5c063620d56fc3d2ec53d4e0379129e2eabe91c05bdce30f06d219c536eeee15902b393910bdd86c7ed35b14d78bc8d656cb2cdf6661dd282c98eda2be1a0a8b35f0aa63137897d86e107abd03a740dc9dcc0c3425c7f5026726d8c0f9abf5dd7d33a69dafed64c115c118a5402f5b46db52508b1fb6011594a85023ff0cd6093cc8ae08060f7fcff31f873fca1f7b444b210f968667227f79de42b9d2ee73fa2b8e0db63d0ca722aca157b873418c79731f5d84fbe93cbb684b5e5e50af848a5b026963ff0ae4f7c9fecdb66f181e2295e4cbc788de0b262f362ff577e073dc4b9aeffa5ea619fe99eee33cc9ebbbda873b28d6ea07b36b3c5c69591b63de6d0212bedf9f87a9b7f28abfcd28ccc9ba86264e76b7b041be9ba27b2942fdc28db4c4b27438f40382ccc7d6b6acf78467c46b5ac60996d17402eca58cf1ca5be113e6ac845797eece398d671c8845d874d51e06a117ceea38c65039a867c26c38b4436bc2c6966677c89e9c02edadeef79495293ebc311c33b5541bc91c1d973790a6ba37f1d040afa23832c99f855a28fd2777f281017d3d877e59dd2e2ce49bbe71cb376a507f729fee856db3e4bdc1c919a008c7b801809c39e6b919a708704c0dee115fe541c7efcedafef5415314f9c3ed62d2f273facbcd471607deab895c3b173c51cfdc8b21076670afaf9a95b432a25be7e1241a76a872644935c02933d94e201fd5a63d23cbf85726689df6586e2a9119b6febe95e6a6dfc2d3e334d02cfa66c447d078176228efaf795021991bf765bdff936154622384aa1914bb437a97733f3c8401d1d8bfd13e26c2d041c8ab665d1d82f49d12ca6697ac3e0bc35e4378401be8272c1b7eeef6cd36bd849169ea8310498787b81849a8d7a44ccf6a6057d4ba774dfdbae67671ffa6d974ee24458c2cd9874194c49c15381025ac4a7c7b7c4acf297cef0dc385f7286eeda7a3f2dadda28283ee555df879fd4bcee8c80c2a4dfb567eb1d9dfdac83907d64dea1e788c1e5c96471deb7dc69a84fa519c094cd43b37b5196a505f9d2ff55cbcb58cf878734664762caf5a3f0d011ad5cb782f72299be7b8295ff1302cc39ca963f8016f52d4ccd61cb443b9039248f520859d85bc88c217bfb2286065de9d7b5bddcc12327e4a92ff07272c2acecd054c8f233087544c8cc3a1a169d40aa4efdd869c518dc57cad187c2b6a3497743ba80043d6d2f2798d72f64b28439833c5d729d1f321e899f378a173e762f00e3c2f2cf32e1d3ecf3476be4c3400933119184a073227c24d65b627bf5fc48761de3e13e9a05054690d9e21c6be90d7317be1a0a2c2a8562a3e7a28946572cf133c5c9cef9d04060bb6e51950a19210c02eea13bbfa4eb8c2b5d20c43ea27f2a0c57b8ce807dacde688e35e31253fe3838a548e88ff9c29ee749ce106dc565a7d3247243491724c973c09e19ab9b72944ca86ee19077d571806fc5c08427a37f606218a2089bb7ba4e1967c58c234e2b4548c88fa207768a49ffc4afaa743983d6890ae989a35c6da417315fc79a35199bb9de7b83a96c1f788aa764a7790e6859cef65c4bc2df630bb7706802c2e42c6f56bf8cbe5b7e6c321226c8dcd72cd64b368ca28fc9fe4b6d4ebbffb3f89fd47b44f850cbfacda40dd600b65da423d0edaef87f9ee2a2dbb9ef9bef454e877a77ab50d29558cddacc0e7ae3fec6664553adcd7ed09fdadd5f4249597ada4ef2b3cd9694238f9478ba4873f1ba734f8c85d571f43c143902fff6c4c28f67c1c938ab0cc109a65b713f21c775540513d38650e381879ce1a89c5c523bf27bbe26b3dc5222af09afdb5c9c477825c8f49c7b7a66d963f7e9bfd8d3ac6b3b082034658482e12c88b005e20e20402c4891861c8dab7df87cefd5f6190b190a50ea758b1ab81b149e867db3b3221b257beaec8c8fcc54955707c708407f7adc399fac07e3c6d9010e9ea406757cde3c704c437053eafa4cbcf88cb02cbd976ccc82af65ab33794118f79b99fe3dd4fb611fa167c90f3c62f01fc6f5b08ce1285722e5f820cb14c6cd78c9b7c88968102ad83ab51f07511be0272bcd7d4ce714543de7b9fb578fdf6eb3ddc94c39001e74477ae564aa83b14fb1dca87962c80cf60a40078e524d90c4b2f8aba4ed24e9d82043b28e47738b05b466dcb8cf3f0fb688accdffbf36b8e87de2a80f41fcb191dc07002d171bd93b94e8e0e096648285768e39e6695da7d113d024ee9156da8574231d1467737a71bc30f6c115fcae0b7f810d9f8891b6d3d0483d6809b186aca6fb78184678da7f41ad260d4c7e18bd9fcaea90e9c58f942c088abbf7f357f3c6d36d784fb969812841f29bc436e00e83b294a1adfc745a3cab5ef4f9d04a7449286a8de0f5fb20d4a2127c4b39fa60beb7d83c8eab9d11e8c4a25e438a8ad160040a98089213382e41e2f89b540a8a81a38f1c7fbfecdb7d026198730d3f4c23c32a741c0bdc81f636ca338a09fe625a5622e5ee09f187567c4cc668529942b1eb2295d8d879aa9dc419a9980e52a6afcf63db8386b4c15cb1a940d10abb871029922b8d854a287df32a2b1b7f2ce7d62da9ead68e25fd627fec42e213209ce5be98cc98dea97514d86b87a79c8207d9cbbe98adc55d3a5d6db2db5274aea4c54a81b5f4275c6736ca02dce78b0d78d2707bd8ad0ffac67a20ebd6cae029a1cabae2fc3e89b9e8d0d2ca368d70bce7b082e25dbd7c10fba381599fc3fd4f1f026ebab2dd3ce4eac902d5ad0119e41aa63083ed7f5dcbd353a2cc64e5ca4ef1d8b272298bae5fc79bbcde5bad3b2088c33320478f9476193b60130c50e4327c6d4fee06af0aba34f357e1d460ff4508a35791899f9d13754bfb3b2fbc45b1020a263d882168ca30db7024c7a3c89a228d84ea74ce9df117f162b9ca0ab69eb5aaf912755f939e3ab0a11f092037b8771fc9e8eca38707f3d086152537d0bc2f5d7deeecd55f83b044e7be2c54b120cbc6f0a5874b18560eb514bae06ee665b1b7cdf93963b45509ef9574b16432a22281e7b7d8ad87bf0cfc1bb171cc18196440931a92da261fcda496dd03945dfd744f7c2a5a2222aa639831bd8abd0e88f2511ccb2dfb05d6ba3f08cba41451af471e2cc03a43b19ae7bba5f83b636d18f432a50cce8f507350cb075204f5c21dfc423f52ecea27c69bbf8368e468c47e40bc9b960856c6e6a26f3fc1f15be5324e1cbe19e52b1ae3a72dd5876d633b52c6e7271989ccb3787f0036cab95a4ce94bad377265f8d57157b4a6d0053a935f43a7543205670074bd99e8ca253d2a7dcca812ce5b58fcb434d2810cdfe6b0db49e468ba5424cb27ed74a94703f541f2ce2ae5a63fd76a91c223efeaa11536cf760970f724781fbc805bab68f406d2ad5f5cccd10008c8a232303b547e662e541b477b29f7a85dad2045b0d58b1700882fcf7fdefa16acce350afca669a2f73a6c91eb83f655f3e27564b3005c6cda751e7358c0fa949e26f6b6aa4c1b65ab62c6ca77073ab7c4016f5e3c9b9615ae4e8134226a905fb7bdcfe41d4aae30608299cefb9ae4f553819422628a1571909a6db3deadd655955c3acf72df387622cfbe522b211a30742a5d5b25e6a466c7a8d7847692e5dec0598ff7d4fad8c39ab7cf28b4db00d3607da3797742a0d676abc7f4cabc1dda0b53f585b3cc5c05188ce58fa024ccfea8bca859ece1a2eaf1dea1155d7fb92210d4d04b547be87992b150159f4d0ee574c2ae1ff571641e54307db799ec4054d05e908dd2d50e7382f471e4f43622ad97afeabed1c24a91db1d606a1c3a6c21b907815b99cd53af51725cd9aef30dea4ee145c04d47741c7967330bb4c42969f724f79067bc5eecbaa4f23d75d4b026ac6d01431c04fcec9b70244156fe812aac3fa902983da8ea637745c56d827d32111ca83d2a57f4355e7d524203d6c63dbac50d856d14ba8cb3dd5a6d03eaff24b84f6943892a4739d5cbb6e9775e801cf0e6333b5516baf0809c8ab3d61dbe690f61f1d273ca9cb4f77fb4ce92ade7ba67aeec9faeb806f4c76e6b3d02a0ec8bea401a4d29b720ae042bfb1badef51b84c4d873da19d5101dcfcabd53b250edfb2c25061765d7590d2a776399f8e6f79a1730d2b802eeeead126d48afd528896571c488cc6cbfa5e93bb96ed06d49c191458649e66fd566929f9d75d94c9abb9c6d97336b24b97b0ed59168b4e89db48745ba6cf4c2348f303bccaf3c0c08588535525075acc656d90d3843e759d49e9f4acd82e5298c010ae7bc970215ec50ca3e506d747d048a09f58577c34d7dd4a7b3d2e3fb6cae892bfa205063fc95f4f22a2537225998311165d72d4c1f3996ef1c92f1d4b6f3ef0a9c9e4df1c041a10a6f5a604222387f672bdefde7346601e126766f66b5f354f80c19e30380497499412f33d9e9c58138686a879f92e6e788e60dc945c6dcfc1b499abae3018454f210b75ff090014d7a9e7cb62356befde3116787a679ce8e1b2e5017884e683cf7897a2262012490ba26d69ffb3c153a6d8b8d0622263f3a5d09453faa4e143082d063888f9090c2948a2a82397df00edc3ac8aa0fec24d8cd607648e20ad15092f463609b10d2a879215edb267850e06579732ca9ad807981a2b754146f03e4e221a5e0d38e1b1ddc4cf7be9f00474b55142dda7e86bf903476390ebd388155d9715f2fe2308c17c9d5bc5bc0e0230e6240d43ae71bacdb66f48d3b13a91f278cbfd5ace862f1620666affba2c9d804e4a77976129f552ffbfacc29e18663499e97849265bef07d67f394fe684bfd3d5c0815fc6c6dd5a4d675c2576c3feeae86ad07f37a09560dd8f0ccaa8a0f7010fb124bb277580081d23c89c52ebc578ba8927adafee0630254df8436bc6d1695407e5a343f17342ebd2cac72e4ecdddcf50c876ce7e8094307e8afcf29be9ee6108501813c732285d41fb09ff533e0dfa634df4fd7978d0e4ad59eb6da2d0b9d237326b60d5d2ee9cddb6a2ab238e976a00fd9ee2b5ceed23715821bb7e2ca3bb2d193eda221d1c105084197c7300b2e61c7dce768a51051d54ff5d89b7a50e55b5c8ac762afe15ecfdcf2c17ad8dbc50a61956b565775e055e60cf357503ff658855c44b8f9025eeb8ef4fc3b0fef1bfa965301e55749d1cb085fbe5e630de4621f1e249fc37327a5549faadb6cfcbf6b207041418420c98784411e6f5bea6321f38d2792d752119819025a0da4c2de78084d581c9ef51d230725d0ba520431350f19a6eeff713f4ddb9bf175d5c8fbf23efbb88b7fcb0d205f534c68b6966805c384969eb43273a90926662537fb8bf272ba0d7c7d06350ce5e2713c97dc4085845bddec666b08a63b5324faa10e37db52fd2937b42518521fca4b757885a01f69f9340430671ccbfb5879ee9f35964ed7e5dc2be0fe334ff3a88203082403d787ce6581c289c9b64298f23db1285574df9c9740fc04f36a01ec7dfc26f16b555a53797aeeff6b0c2b4a9f3e0ad7b9c53ccd7ca67d9d40ef7462be68b6d6e16c90bb3c9bce3926a78e333961a75483f5950c7d8a808bba794b723bb8d0cd8102f18aa1c71c34f87a98af84536007173c85605c0f197c366b82036e0de318392dae73126b5ad9cd08ae8a2da441f7f452189dc67188fb2009f83ef2846783478f0e50f7f64654aa06d0a5676a4527467d0925be745c960e0b3f8e1165ba3025e1b10676b58b534eefb475eacc8aa623f1c281089a3c6f60f5567177b94a3748eb5da9ed5f024a576e60ace1a6ad5c2776550f16134110f6b659dea69b58ddf9293f7260187d5e0fb54f17ffd01aa8c33085b170b5150299bfdc5c95f8a2a28f4db8a713d7e6781b2eafd6f48615d399601a8d7ad9df0799da264db5a3143c64c6e6466167ae30b8e651146d2d88fa2daec24d09c3d21262464697acb0138015233e490e97565a91525b452139e127d4b4d99e93753a4933edbfa987be62ee1a473bd72c54ce20d6c7fa9ac542d9442f706d376fc5acaf7c35ef9213cf085203e4006643f732605a6cd0a2cb6ccead6cd31fe00290f944ab67ab3689b76af5181f5b3fb3de9babf218231ad66b624441ac2db95e41f30695e572ca6986edc3f34285336e23b0336831bca17e55a8efa7e06850d3bd814e8137db0f3b35009fcc421a7df447f43c4e8328acfcc564b37c32d6107ff8359bc8c9f98f7554b4078d751fe23eff9fe3442a268e7d403cfdce6407d44d0cfd9e9c6d2d3714bb4202dc1850731c0cdc72309e43cdb49d9208ca571ba0019bdd97d7893d4f5fb8070c5aca133432d0779bbc7f22aeabbd3fc8532dc27404b3f2b6640a894b894d873d5a5d82d85e0a4257eaca77d46f18777a45e19cfc9b9e09f826a06fe0353646dd6cb96f9cc9139b29c6460c7fba8cf6be3ef8002af3e8dc22b3cf5118d7cc6357eb8c1825e9e4f8a6a0ff56b03108a3c0458b9f3b3d1f4b39a824fd26c10d11c059b8cccfc202f986561fd2377b197359ea0b0090563b640f0b166274081b2afffd712607ea1bc22b6c39de72615c74b1d62f6a4b9d59a3e7ff87360059e4159b45214b09833db8b0091cd02de5b73a0505c0fa5f997d1a347237bb83e65bef63469cc5161396386750f60e26b109a2856765b9eae60b9e9a6584e57f7033abce32332e90cec1d183241417ce639e8f633259e2e21f395d92b39c9b7840fed0e55c30da4c0ff8a7818354a2be3d4d82afea9bb8c8a4f18eab2eb75f4eaf50085cd10b48556c823dfa6124b4ed758de4aa856e78add926f10b56dd9270af1d401a3233580e1b823b894c716bbfa85b0294ef50a2c257a16efa1241a9081726b28eb52a812a74e8fb3667a150c72e8b19ad0dc7f34a586b27763f32f9b9eaeffe2915051c3830f998b1e706546fdd6a5bcab402e52becf61674b3ba3dbb0014142855f436349b12bee4218053f3d897b800a5c0d7962cc64d5f24f2b04378b951801faf4047f4c437ae2089364cbf0227a4f7ee027cc7d3d0420553f2cded1cadc0506ac9d3bad1086ea648bfd1b12c542a1af473ea9885c3e0401617508e5b3ceef558308f620869c3f0d2c8a3b8d2828c529d6235f289dfcc67dd7bf3c060c7e008a1439049f0c3081c24035503c169c42c03028625f17b2c97cfc35e5f20816bd541bcc6642bf4a581896c02833ccda2de85a5c018ada07b94d5c66610988e96c3f34a055b2815dc4ea5f830c92bb8643d749e847154ed75c7490dffda671112c1ff8d663ab8d94b07baf2a0962de7107e068ae0e527efd350283dcde29a6b5c7a8ff7bce142d5fe1a81ec83d592fc688db3ffe5b23c39067b457774e10f0106bc8a1c71bdd7de0416d2387e82579702fc4856a6a18478923d90e44e5854c6c6bdf37f65bb902046f46381fddd39fce28a48e87ce3b4c552bb8d737534d98bea741ab37f0b0df10fedf29f8c7afe58a9c9a3796a441875f308c9b6aa9eb3121ad8431226d0ed2049b7bbc45a71209efff9a32c25b44b56cccb7545a177f588bae0e7dff81aba6c95242d8b3f9e78b1aef27b70bf7472bff9a48c50077f02892c87fe96d514d1e1fb194c2198188acc8a2bbb4916a16a376735ca61ed8d3f040b1ae9833dfea6b91795416f13f4c996e1820fecd2b6652b43f1f7b6bb733fa713dd0d017cd7bdabea13ed74d2b8161e7ac9b2b406d3e0212b2ababca9fb3a1e8339b1b2b9180a1fec11b68c9122258befd6acae4aa37ca6962886f01b4ef4b1026fc422ac17aec55d38a1868e6ba92a7160a6ec5a6415ba025db502cfd2ad156b7851cb3175ffdb13ce48d167c167c60ffb5c840851ae0fd36856b8afe64e301dab69c78300531935b3ee1dde44a5d2f5218c237894b2ae93b0a65af2f4027183843011d851f52d46191e8cdab2d883d1ed411fb8ea27850dc3358109f01360a866535c9adfbfbc70148aad7f97825e22057af5765cf1849c63cc98cf5fc74f27567e71b624b385cc11cf07c17eef979f8f1bfba8b867dfa02853de50c00f1bcb626d75e6a3a9f33d2bf8d4ac78b860fa0872db658ffdccc2efc122631d392f9118fd127b25e1c3bef0b10e0f43b2f584ac9917eddab6fae3b204cea4e1de7748821c19cfd9106bc4ed8abf6f730d6f18d7ee0a86f6d6e8efd344708a498e0fef1e7896a1bc9c7f6a22d19775a0063a9c2d6e786bbdf80a3dc019d71ac5fee62e00c85a8fc76bb7a997f20a5635ad5e9a551e55071259835df6178a1ad7e25fed3a1f781f567538f5647dadc6e6d3cd3b5b5b8112195832d64839d59610c6ab30a94398f61fc40f398f6f8902122db8412ee6ab3767f67172832b8928806d041a12a3c829c8d1dde8141f1cd102603ac0847143012868ba28cafa41856ceeedda13b84735b83e32bbe1aa517d055f32548fe8722aba2d3a5f313b43eaa0ed6e12f92bfa4b5d8d8da376050b8eb0c66bae13b05b345b2ba999deb58d635b1ff5024be9073f5cc543048d9508aee2f1ab84b45345b6fce139268b4220eaba5b136321012582850ae51b5c8c25206b459f617000d456025d103ae33ee1a3b230cf3ff149040eb30a02b6238f2e0b9cc2ecc129382f76e3163e399f36eeafd294fbd1da2e5b179d2042463a3d2f011e8cd66b1bdd7e18ee5d5324088340b5e11e025c1be68ef950d3585a47e1ab1cde2435c1a29b53652df230651ba12fafef1792d89bfad5acc78d20ac028b1154ca1b4c4f1df48dc21113d001ba7f5a69953695b193f24daba87f99a8f6af55ed9105d705d20f66975616647d0c7fbb7b68b47ee1d0376bbdd7b1a9e71939ca1f507642000464058bffae366b760a823414703c57aef88c8f9817aaa4eeac656175b7957c61c5ff28f075539a5834a90d2abc9d6842e69ae1fa7bda9ac0e26ecc07cc5406a6d01d43f46b3da00bf3da2583f6f960b35d5cf9dbed66db1bca737defd75a58fe266e37fd7fce959f25bc2c73387fa2b08e07d50a57179b9bef492454758ff48a2efaef10742bfeaccca12165b5410e86faa6dbe7f4b66a5da2783ccabef5a54350ba6d0fba9d6ff9096e871390a3b9a85aca9aec1c20ef43abd6e33e99e6e08b14e01754c23ace415ab0c9d860ff62ba654c6bab2c2edb1a62016a4b4836b219d74474f72b0cd30e6164559d10d2e965c67ba38d3256ae4391b984724d679543b035f5d863f15eb32275fd71cd46798c4c6456ef478b9b6f80ffc6d3a00fc853b53bd68e1d8ab33a6abd407d50da7fa8ff846579d531c2493891f9867116526c761f9fc6689cda8fd055fd64745c7b8fbe6030881f1107c43aad7efa94165a05b1d17593977db5e51bee1ca4f0428b9f2dd3a4da900a5ab1950cdc2bce0a0f95a8a5cc2c292f76840fcccdfefebb60f57c2c9460b716d1c90f1e6c028255e841a49756674be2b754a66474fa0f36ad71afbf80f307b5ccf1f372782d2b95976352fde55d2bc17f98671a60220a198c7c7ed80cbe030adfad2993e16deea734014d0897e4f24c847a8adc1474a187588134b18862fc4109b4d2b7a0d6e0573da8d0a1ffbd1909795985b6dda34034adb53c7e39f566c62ba4b915646ec850303ada6b6f0acda508cc7a07944ab47133c8cb0e0f80ebf0e59ac6e3015cb098fa0c8af38fccfd429acc7246a92946fb21a1d2b22020924c8af0f8f87d255cecd047dc337db89bc3b8f36e265a2141f5b5fc17bc667df26d05122d6830791afb0a1cb4eeb73cd8ba51e34befd29efa889beb17384d8118b5ced82c3ad3fdce99f0ff5173dd126e0750306ea2ce7fa1b054be450ca15770d1fdc09b5dd4579b75440fa5367f7701acaa92fae8a788ad929663164ce466fb385bcc8576b1df3f13474db0a0a043f89654c78a9e7239cc4af07628063c4e621288b2e389fd9cd5e3debc92f84873c4b22f7f96ffc72fc594119125050d00e5d060ba7a77d12ccab5966ed66f5c9700cb33033f0db0d498c6d198824f87fad99624bf694be7766fd024cc7cd125793bb8dfca28b08acf6bd576db0de41f470dededa7b2b6d5ae9e86cec2fc85e28c8b7908e4d391c6e90bd9c21c80a60e66c3c629315bb437a4cf3b5101a242abc34290f0c863974011bb4f4d789dc3e6fb2b19a96e0a9bdda76efc349aa33c5de7ae1ee73e80d6d5c737d20903b4ec6d8953e80f0094bd75befa75b2a60f337ec606d5ad6418f97c8e0aa3f59b6ff4ec46bdcf53a76a43684b3b6c1e5fe053aaee0e9ffa78aaada0092c2ed2bbdd4adff36d7a76409ebad96359d28750d59a362d15a1ae8cbc47acce8f001e509c8c3b3b66b5514073895246274bbbdf7c76c1deab956bac7350591d9a80f22c513cc0a39c785f73fc837b544ef402b39a0f45d36275caf25c484566bb4b7b0ee7a41eae21147dd01e1c92f12887a05c90a3a5c35a745afc169ab0653346cbf0510f6e4f61a14905bd9aea69dee0ad5d23fbb3514969b1e722632052290bdbd8516c7f658177a16c62bb040dde73646472821dc4e2e7be89fb36a6708885685754d13e68695b55b76631fa234dc73db77b62ee4946dcc1445773c568bf12f11dcd88f7f04ed3a952961bece3fd38c7114c4f6e61a41278cc99c1a874a3c389a8cbb6e8fde70a34b0d232ee3eec4ecd616e5aa2153a8bede3d074dfbdfa986ce87d9ca35391bc09a9e4dd6c6dc2ca7178ab412896772d9655d27a48af77d99ba5c466a96bf79cd44aabd2133bfb6618d462abb541733e86d586c19b3d416b18bc0fe47f5e61e8033bda2ba4425aa8375b15a799383a8cdca9dbf58532bfd52ecb17b2777985e9f0fb13cfc05b7d8433adbc229b318d55de0efe3ce6db169b9ad8a42c73960de204669abaf643a5d102be5a3b17845fc77b3e4c80de61ecb784869aaec7fe542ae659e2ec02000cb02880cc1ca05383e5a8ebe46c8034cc794c950612650d28d40bee7bafc7bb839e2b10229ba11bd7271147a6d2f1d179445151443dd3140602092840ef9d54ab298d8e6b48815f70a00640bf7937bf10114204a27eb3ba25779984876420b3af9dba0b62cd70c914c8f5cc9755d99fb77c10deb6bdc5a4dbd1ca4b54654df44d4e8ac7319bd4f06c2dd2d9ccd1509eafd8bb43212e63ccd92bc70c939ccb8146370514bd8bf350ebb981f39daa772c1a002d1a1671ccf65f503032a12649c5dc9cec8d3dc496e47f6e6db0697d01a2b19ac74020a1e67986aa2ee847fbfc34629f7d8cac54a68aaa83db0d428055357d0ef5e34114112c0315998fb3bbdd44c8fe602953ae35841921d57a05db5a037a7619871dbd0dffe716073b87339e7e1fd1c213785d12a7e28395e148e5d24118bd45f7617f000a1314f01977dd816213d88922574c11a027b67e31a229c50559f1b4c1552f1254c376699f05bddfd9fac5b71153da4ff781306384720e606f6edc12da0b06f21e741519d93d43f46039ac4e79fc4b6fa9eb50ea1e2363a3fdd793236656745ba44d828df733bf4aafa25afe0b6c4dee9c947869ea80a2deec31c2bb08d3a4354a90c2096e2e0e982f632d01e69ef4caa75d9ff9bae0b97f69ec6c8e78ff74f6b4ee5dceb4445085fcc77cbb886c57c0b8ec54e5fd6894fad34ca1fc17791105e0f361e2d328c632130d9f00be2682ee550f860d77ddd78c661e80a1213a3487857184983d156a00e405da4174d152391bc4975b4c749a990b9ae746bddecd9140670d50cabf88f9d3c703e517ffc24dd4aeed8a93c20ae124f11da611c6db494532558599cbdd96af965ef152fcddbcf1e7c42dcc1ee2a570f891b92db04ad93605133ae00687a10c7817065c20eae55dc78f80aec755b690507c62c790d6531e211e70d85d79c7412673ca2d5a4bfcff90d2ab783c0909933d1f8e113c57d15f21094e7775b8a02b64b660452b13fb7da7302439fe42ad611e17746fc868c08be85b9f75687e9e1abf6c4c719c8388cb30c22baab8172abfe136cc5fa079ac4d3d861096ab866e123a64645cad2298e7cfd0b9b188b316dc796e7e41e63694199f58107f7d2df13da6bacf4d4d67ab7f1b31bc26b570997de449a5f29b323848cf2e3210f8146d7ebb0c75f86498bb71b1e60cd55096cfaa9edb41fa1105213a8e721b602c508ac29c3a1d6f831c31304ca07507867746d7bbd6acd1d1588bdf8c6acdca81938752f1c2bf4b3890fb54493ce915279eb1c597f67e07419be139855e81d1f63aa120d28abfb23ea6c63a7e752eae3f834173745cd7b87ecd465b4b402389abf85778c504b149d3feb000e67ac193fa601b87dd57d4e82b10aa5ea3d031fb05744bf125662c6fc37d7b5e0aeb4615922df7c938fd352911c80eafeb751718f0bfaf823cba8994c66f3a9fe7d9f78c21cccbcbae5825730967e23365ebf78a621544feef54b48c6e6170589eca953a98619b0c3fec3ed9cd371cad6d4f797511c38952fa38aca4e5592733774d7eb6e6fc69fd44ed732965af02be3c9d8bd385c8a3746a05f602ec86f572ada7ee12c91a01b5340ff230bb7f5a0b2743bdc19ef274ff767c6aad5bfa556d1d63e84c4065745bfa095d6811dc90b57ecc31f3cd720e9a5a4471112df1bac1b830e415a030a66cf3c93fa00e9d4cc490ecdff6e42c192342bb238276e7be13d633f79bc6f3d29d4a360ec656ea29645ce314b85a4a0d19fbd694f30867b3a87ae8aad77499fbdf55b792146e4224cd0b796066e1b7f540e23073b400b13e909ae2935cdfef6272a4fa90e32732e1401e413e6d0a34b588ad3cae1427ff51f00f8b9c610808dbf45952ebd655ddb602902dff6863510977718f4cba5cd4d41d30fd384f129f490a17a012c2c63d2463739e686628cfa6132c7a32126cf3b3c314ecf2d4b00522cd8281e03baaa7e14605986cd107efe09e0cd6e91e5fd8b366b366cd908a19a01083c136fc8479a43114867e0a468f99dc33cbc7a9afe9c1644fe96b67f5d0d02ea747d95dbcadee6ceb5ba237e7cac078d19c6295ff7b60681c382a0e7a548953ccae7cfb73d266bf287dd603efe177ad7e8c93795d2aee0e7b95ac4fef9013e87aae1f9f2edce468d0793e847a30526ea72bab99dc576e6883a003f424ad379ac077d75b5dd75627727d090627522d61d17ebcb445a7e57efca89cf1ad249ab19fcf883a6cd5ac5d06c0f290e67f97e9265c3618169818783b3866b2bbe0964a422609b19adcdfdda92af9b6aec7e10300c1060cac9721ec89abd227a2ff10d359256f588f962899e0298a8ee146fb59cf053412ccadeb20de18d488dfd86c856147381ca94325d911aab3126c00230f829880aa7e22dea69600a96801842ba6cf7ae07dcb3960d90261826ee8954a4df0a0ac6ca031d16da4407040a6db85b861921587784955031c127533559f1e99d84a9ba8ec75cd84bb7c8474a90ef8447b53416e9dcc49634533d1e8b4ca7615441c4b0497b30700125ee2e8eac8fd360477130ef4b9469e3e482edabef3ce0a2e409b6fcc82e0800980babd50c4525a15aef9fa266c1d0250e5ff8ac7ffcffb374a4bd2801dacb9eb913474682b5ee64be4de9b23ad9b5fe1356ec88cced214f4e152cdd7039b4b60fd15378bad7055a0ffe61ef67e384e84b8c217faf8989065394fa517e19b7e8b745415153b89fcfdce901b1f221035f060f8c91daa0eced30badffe3b95c5ce1e15de4673c523d52069ca16d62a89b6d8d67a48e63cd5588454782f31e6383ec4298929ba8a7cb07585dcb9451031e04cea0eedebe5f41ac73e1b29050112eeab182a8b966fa17ae9a51e4584e51fe0d739aface2d4037aacb416805774d95b8d215c183c11ba3df7b2da833909ba6d8543a6bdcaf5fd1b4a3e18522ad6fab7386190764cada92de0c28346606aca053f2029adf3523312e05d8408042bee31d79a93280cbb5f30bc320c7228f0f555ca1221ff132ade2c85c7bb587fccc371e05af27761fa1538a11480182f9a17646a140d8eeb6437c1fc1039f0ab4d9d7b598f93ccee47bedaa6e383d89dd2ae768edef65b3a0bf4ee862b162a47f9ef55ee46ca5375b26e8e9f245b4215d9326f9ce755dba5469b68d663ce069dcc32057f90c1dcceb854f7533975e3fd21a3039941209e9f6cb11dd9ae275ecc1551e0842e63a914b319a8ff2cfa45352e7e33b55af67f2e5ed9117c17f9aa0a9e92eb2d34962794f2634edd3632b50b24a0f51c39893c7613e7cb1bd3af3bc1c2b198b513c5c6dd26bbf8036fccc486e65f7c1f10ed385be77c167829536fea108c379710ad8cfc1a4d58561b61fd4dc198b99af980c08187d5444225add387e1261b7fd4ad0c73b9dc13ecda39b92bb4034efa02741ea0108ab57c2c1a298e64df3b11cac564552bde75f3aba21c4b6d74f1e92724eceb85d1b808909e8a4405fcc9fd5fd4b834d7c08e57629e750b191ecb3d3beaedd28c8ca7ffadf172a84dc74577c62576af8c80befd7bf5f18036074a7cb44a9aed14228628fd9675ccf8aca75d20909ac045d8de39bf4cc3ca6ce6205bc7bd9736e0e6ff409b8793b4a55c82bf6de8861a706c17b3e5ba532efe7f022627cc8dd2a30ca199131f7a00254a424ed767315ea04f2172c0832ecaf0dcf414e75bdc2fbcb2b5867bc52b8c86f1562930cdfba0848679c3ef89e58410c1be27886bc0600f678baebc7bd0e96af656f035a042b06970cd880adb6e8251190f758d18370937d8e7757f704c798bcf3efef7dfbe80db0e7d1923a93fd33545693debf0a5e666b314d814057cd669016a818208b1270398252472e746f45abac5f9671b2e77d65505cf3550ecd8c56256c7e4d1d237d2763f73f5303629bf8d3d0ee63eef429e06a7843444e31128b423e015a7d794b3fa779de99add8c0acd6b6af3ee83988ffea50f98189bc64152d88f8be889f638c0f7cfd55cb6fa855728575b42510d803b1951853e68615a4ee3f5b10c20c49ae8d763bba9a755b77f798dfa3b35508c0fa5678237b66907845fe02cc8cbd7f45973bf27161b95b9d3336ecd0c7726a4fe949b3fb287839bdd77aa5415732e83bfd19d4cdccb4f47a0687796f8256e630556aef42d2e8210c0a9ac7ba82dad8049e742b9310c37ebce273bf3747e8df671f05eec8a02734029a7e8004c5109c30be4a6191f2a21b5f904016f76c6e87cc88e62dee0dea64d8a923ee67a6abeab98423dd3d0e0059f051483022d239ca3f8ec633bb7becb3c9f00b44ed71f5c32bb5e9d5c14f65706f8f0411fdd26ec86807e37a37dcd935a17b31842891d68af64e04e445c0962be3100ebaaba3de3071b3f0c2c1ae11a82d97590e1f6788ce57c89789c5338829625f834ec52013e7a26c11c2e7471a37714f584eaf45b395b2a0cbcf991fd3d00f8176d5f17b268c245de0be3319fb28e333c302fc07645b6d0f5448ff19b125810809ad7420193d72a85b4e62e5dc4703ec9cff72db9b64aeafed02992d4b8763ea63b76d96056e57ce62ae79e645816766ba459829d5ba70221c686c3eaf144aaa044afbf0372f055b354f2a0b6550dc5fb62185a36ac4863a2fe68dcca807899401f2bb6b8cebbaf5735348a0ecf173c1dc69cbd0e3bb33d8ebd5d7e1571220fa98b270bcc860eaea1ad6cdcc82763d75116955512625ef3ffb011235e0359a0c0d99e6efa6d42d8fdb726a208b4ad905404b43ef51d2d5e58eb46065f4289a5dd76196d7cfc3bf6c01bfde925939e98c764187ea1e7ceac2d1d3aa17eda8df396a329acddadef5c60023ebfc392d81f18fd9533035b438bd29d3cfff7c6514c95137ab3d220e0cedd15e75c8ecf869254d5a4eba590290b770631545a4a47caf3cee0750a4b1c73147c867cebe1b7ab46be22ed165f03279583fb111a7dd75987b915804548e1e20113d16919944429aac614fcd43b55096a89cf2ecd38564875ad6eb5fd457fec1064d884958e5feb2845dd16126b982d99d604c028b740613937a0666dc3bc7aedb57df2b35293eaf8bc9d9691ccaa147a36639845da8c3c97cb8eb6ae5b26338e7d1ec146635286e0e674656e18cd179f2e5dfef6e8b146fb7d28ea55b5fa73a89a917415a89780efb8f7a0db37f00e9c857c5ef84d7638f04550ead2b2a351a1d33b354bea6e5f5c129eb6f1ba6cd89fbb19dec74c5c3b303c2c22711e5b813d6e9009c211217acef1a6c90320978ade0bfd60decf6a4cdb6f800b53a71dbab21707a38206d9dbf56ce15a5de0c35c13b7cb765d6546b0def0614bb55e93b6387ebd948f83bd5f06fe13746378c0d33f0eea11bb38d2145c6738af98bdcb225dcb1cdb729ace9ba00330b40432e01b4438926e0577010a3a9a60c64ba250c86b934d498f491f37207ed887a4f41867b3a8b9345814cd6f5c5d3ee5f599291ae513242e7a210e8fe0aa1b82b04ac0a35f5da65e395780a83e13d04fbf15cdd59024d05044dcb9295c955ac96ea71d28e8fbda507f502a09c5770653d00ccf425d6e70488443beb1b7275c69c215c80f33c2dd28fd6dd36f27de82e8f5fbdfd1c1a2a9d182503a1bcd46fb204b448a1b17aadd430c1b66052636c8c0e45755993b4b783b925c0c9e01ed5eb4c9239332622370ed39b2827942c41a7e75a26b93cc240a7cade1222256f1ebe762b37e3b39d92869ce509e2ef3c385f381c7edfd975f8fc2100cb81f16939238e8c22b92b77d6c75b278b110ca4f2e92189b7bd209a2b48b02b001c5f69f38939ecfbda23fe249427a640f389633a3b9cd668fc2547f590a984755d0b8d36abb1c96c9a87424277ef3fd0e45e952ed5b3b916782511963af125674ad2ed5bf608393903bfb8ee0e0f6a2f96415963ffe26e01fa764f3a4a8b7a6247e4d1d0d1b69d1533c686c01882368449d2bcffd5b514cd993e73868677edf4a2e8b782ce47ff2f0b4d6fc5898927c3c9640f4e9c054293e9f7d4201e6da304482bdfca2ee58f70934ad4de62eac5188d753565713aa472461598ef29cd47137cecc4a1316d4098c57e6b36aa107e803bb8ae47f85dc82f70704d1445d7b1c044e2891789704749e1d06802d151588373f2d1c56bd49e69973a2bbef5bf0e061a72311f5fe31602e03118890aa105259cff9e088482f5ad571c6b432b4a0d14e7fc47f0ed90ebffeac2fd0ecd3c65e7e4aedc314b5b341dbcca39373a7c51bc2093ac06988d88b167fe417a17ff84295c7614128849e30d9bab16119378b5e9041b743e6f0a762498ef1a2c658750d1a278a7629d5647fdf24687516be927e37c69ce607f2095eacf4b94d282315d84a6c0a3a6c2f4cff455f390ef9eb9d0def0e1efa444a94011fc3391d81c38973131483f4fd55c6de865fb81f636562f2c1280a4ad67d831a9e7eecf3b4b07b9f5d8d8d9eaee38ed6863afa2c84227a2b06a6a16fa32f1026cb2558598e4ffa04c0a2d67dd2278cadcf718588342997c4420378b6775896685a2923a92cc5afc66114711890e5f98d1ce33a28948b4c09a68ab1187509f424ac90c15f71a0d8dc73ab493f0de0dea447be6416e220286a46a004d20c2ff4423b89d5a36c93562250b44cd88443ae12372e8627cfb656bbb91b03665990be5887315b5c3514644ed116e801e7b35f04ee755c8319e3d686ff5086b968bf7ca9477071658d599633764f7157fc321e5e1a65a17835911cf85c7eccd72c4251be5bbd2e088bbdc6b62592d714a2d79c1c4c6cee7a5f26ee865632d7b975bf752aab8c0c685de634399fb28d63a5eecc1fcd3ce3ccfc29adaf6515c5360d425047feada11825d03d0e596b47e30ef302c04e9d82fc2f223ddcb27a61c70f64ec55988746cbc8b5ee217bd64a4b1f5f78eafc935a7cd23387ca805516ed5dfbd0100c0929069b1c5492d656db5d16dfee4583e4da85e6171d774bbce2459ef91303451dfd4feb5a21c3e0a67970054331f06b2d3ba152ba26a50b2d53fcf2df008f4a0f3db8f2b5375791d06f0925ad53b1a4ba269977cc1efd7d97453c1ae0d8cb57bba7a1bd9eb1a412f903ba0c5350a8799f250865445670d4605a9d972a13700beb3e9c37ae8f9d103c56610f02c6869f17802b7179b46df6572fa98e9fc4682e0f7097adaadef3099f895c3be6a7f7379b73cffbb923e4c0905e1fb51e74b8efa75ce9d1af17a4b2c4cb7171cfa6b8d81a4f7ab569364058bda4981cbd8345ea61902dc31185266f6aaafda60b1c4034dbea6e4321b5f36773e93f1181fce949f02c319f8fe453d6cde017380e571b7a50c57723de69aff56c65424c9659234c4ca9501cae7c231c1947612a534827dee9efce2c6a0a2ab7ce68bd039b43539ba64ed53c88aa18d3621df31231ec17b79b409e532cf7b4f08ca729eca3f67822d72d1f4286ebbb57bde35246d38f899d5f412d4787e8ddc6038490040421b131cff3d133d9601d8fd4a214f10506278138705351ceaf51b5b6d3345deaffc2890a90b701b21de8bfbf8790aa73d06a335653138e5ca8973b92164112e28e36d16705b8da2c36bce5a76187149a49b0deb43452442c22bbf4cb70ff959d266c8aa166b4e918ad15211dfe6b82494f78d8cda0faf70197eb1c2c805a028383f751a35291e253f355176b607107e62e3519e95b5228f900dda9e519b8248f4d89a002d9465c660e11894403d947dd214ea68fd57ef8d48f6bece64b4e06962b9b46a8919165a4212b727ef67c717af10b4a70ec7ebf3259570d4f906733724d822ccd87fe8135636e8f10be17e358475a5c0f6ef06c5ffc7e3c033864a2de5fc1753af2de33c9bb1da5b6427ed3d8cc94787675802be7e7d4041e0239eebe3c3f674c3b737dadf9667e50da27908f698f0ddced601111662d435d1edac4c9313fdf3c7a5256a29b691bb1c782d25ff12be053fda9abccb5b780ff0399c6f645aa8b4ec13c8987107ed7cfd9b82b1e0bbbf8159976cf0103c7011a3549f767f241b7d38e461edfbc24234ba961ea4600ffda07d15bf154ce86994c87223c065e17abd9715ce0e42e4ea2f779cd3c5ba4ad7fb49a9616affd9db9677b1b071304be01c25d4395df3d96834bf561471bb530d22b50fe76c452c0ff61fd9e977580c9c3bca0323835f5cbfefe88ef45b949e6cbc8822e333600b4e9077218d687680cc93b21cb70b1d9cac184d0cd7e92cec66a3cd8419985126a70226a7fc6e933a99dedb52cdcedb55af842559c25205556a6bbdaadc7fb48594870d163437345230a7bc90cc79975e216dd2dbb030a8be4359d3f08cd26c96db91029f02106260fdcae5bc54a7f393947f7f9d9a9d15733970b660f11f8238225f9a77d241b7657d12ac73251a1868146c31a6569e61ee9ee3108b62724a47c63f697d5620cc0c49c236a911048360f872b4ea3b546ba21c344f6ea5c6498c21ddf6c33df7f00da308b403f386e048ba52273573c18d0c63de8a8bb077a26e34cf09390d4a4415d21df2e2cc80a11b0b720d4f8947a586d645ebec6d7484c2b13d9db99c063c2d198400fb8596753bd65e63ab118107d764fe41cfe1c3d30b64aef1a6838162a3c0f2d3c3309e3a0a430731660cf2411a1a10873c1e8037bc382a91a39c132053a0c4a7396a56db8904c4862d2b87fe3da45d1d71c47b5f3299ebf648b12056899e84246a5bbba5ff801d2202185f1e0a2f31c77ffb2966562432f676e5e2cf176d241186ec8bbf8f23a0d2a277d34554b0ce267ac9509507f17129bd874bc7eba441100f5abb242de1febf63ed384dcd73fd8632ba3d7e192dcd81fee5732c287d66a478881bbcea003fce5a7b4fcb7335ffd3805438a5710f803a9f53d61f69563f7c0b4f4cdc2b63ce6bb9be231fd334a1f76e69b1d325b9f8f6d44d26807dfb452521192aa9bb1178cbcdfa761975102a98f918fbfe2e310e9c5b745275a21cc6ee44d22b3322241b26c51c394849c17d8a4608eba22b437f63867c906a2bb080c941c111c2089762d5b154ae666875dba28df5258d8eec79dcd981b85a0192d7e15de5932a13afb2113161bbcec4b076d2296424d84cac44e12facc1a0dfb6f91b58397e00856803085c587097e8070b391dbb552fb755940d8166d58a5446699a1871cfec8b31c9538eaa890ea6038511d2e1d2b26da5efe5dbdb10e4600034afcc4e1902fbf4cccc68fc1ffc3844b922114662b85cddad6f33c8d3140004823597597a7099336ff95f342789c0ee53a1a4743bb8a0c81bbc01fc3147af07fd48fbe0df15e3534edd2dfc3084f3b902e1438be3f18d0427a44970c0611972eeb9dc15086c0172454db8c5c09db739a111acbc9b2788bb6c56fab082c5c4b1f1fc03b41ee2c0260f50e32b8dbd6ecee14b9f0b5077e7bb8458e01077c4c7854bbd0a638c037d994e049b23c2d3ead94224841f3e9fd7c689c11f5b92535644308a30e9d05d4d764848ac49f1e68b45448bad2ceadc8706b1e0b59785b4dfe32945b5677651d4d5a62b0ed3fa23a1c50acf4297c119499ecddcf38de5fd6849dcf14783c03e7248c6b76bb1416accbe40b5a3964ad21ab7b727f89ff2a3170cdc9a0ca8fedb61ba544e9de9c42a157cddf4a61851bcdfe9f3f8b852783b7238a2e62a1f1045cf7e08cd00cb3cad4071b16384a69a020b6b7a1ce8991ed4cffa2ce7042f8ba36780159e33bfa624ce5dcf3827e869348932a79167d8d3050ddde0b602d16d58b7f65e3053edb6e48a8a283a92c875df7e561db9460bb29b8a6b70845c1b096b200361e1af840d4091d2e9fe7d132fa679ede12562f1229890b6f1693b423d1fa5d6263eb1848909a3ccd2c9ac10f7b51aa12f06ea553a32738aa49ef14b03d7da9ed9ad3be8a0f957bfeda122501fb60b0b18025d1caa1a30410edd87a3ce2598bdd6f0f4e3603421186d2af1e068d3ad398c3ee16841ae03754bbce2cbb57519593b440b2fdfbdf88fe1ba34a234d302f5d197e6bb3d50ee4af283c75460c818439c3551168c7166d67376924e997596b31bdebfafdd925ed93d126867460617e08dca592309e4cb45609a34cd158b8cef8d9fbb8dc1982976ae1e8b177d3bd54dccae9dd83e8c0300d2c1ff8ac2eba417d2fe25867841ace94e5ab7f1f1bac545111691534573c40e298775505a35e0ba25f377342864b3731ce09902c8919f5c7ff35edcf072eadb1b1978d6fd11921013171a54d5e5af34195d1ced2f5a9ce69ad69c08cbc0c385eeb15fde7868057925e3b8862f10dd6364f83ad543627c851f845d9fba2d524b56b0f0eb0c9311a3542ab816f85a0565d1385d72f7fdc3a59b8fa06c13499633fda9917571552f3e919ef266146cac6126d2fdd5794c6f27b7837fc5d3924733eccef190f0c74f3a14a9aff1f41680a78a1274cad273693910b87c890eda96f3ce48cb9ec24cfa543f3a713503ac6e69ab1cd3aa86a6479d24919a52c2afcaa4ff7016b04d579238baa407c811d5310d542c7d3c7d8cfcf0b8b0a6ea19e2d4978b55b5aa86c6837f9cac6c4f9a57b2bacaff286b52ec548b589fd7ff85935318c4c6789800b6ad6a9a17012be8f26e1dcad19756e963070b2e14e13f294455dba859cc39b581b5b86ff0de41a10335d762ec76b914358652dfc113e661ecefed1c57832d5536d044ea2029fb24adf431c78c71e1fbdbfc6840dcc5aa7ece733c186b1a38e11bd86b7dd64c3a9fb7d68b4b7ac51506cbf1474282cc0d811bbd5324eebaa700605e8095d8d8c19f17988e44cc0d6ec4e0ad03cac96b95da78888de9eb13890734c0b7dcea69f1e272aacbf0f83a175c0dcd8522db470371033a98d125437efa3e7e18ee2b452e1895e2df5e1e86c7adc211ff7172dad6eee96b68778ca18071e1e794ae74baf9dd84a296df4c261e66424b49024d333d3501d8e44afdae0e7869f5362ad06607adc88f9c86dce559db7b8b1bd54c4810e6ae60eb855ee01dac85d1fb3894387847e4d198fdbc243414bd4c6e12875ee41e3070196ba47138a4949cf1a4e28d7e42f3151ef1f552a90609b63cc36524e613747cf93441c0f3ccaa2e71e0b3e361e91593b4ffb0c83b966c7d8a6ec256afa812e880372dfea26eb48c70f3a60a39b1a89b9e66e3a459f868c9c7ca897358aea619119cdf8e9cc418da23864786bfd7bd7798ae427107494297929bd3d7c60d2b9bc3802eda0f6c70d8825f8b63ddf64b2a4a38179acb31fc53a16a58a062dd9569196db43ebfd2cf5de04b762a6695564cc7e7f9abaae312741f58f126172a35a207ad4b0b8d4e2e6bb1f9620f5649d3ad2e612a69bc78f4e1d66a4fbf6112b544034c1afa199f293c3775bbd0bc66dd08ce8ef5d2fcc8cb119e239d0bffbfbf028cda9969c5bc04ca56db60fe5356e6ec03a653717219a4d13fddc68807e6520fef9d0bcb8972b19e4e9259a89ab110ba63338a61e2f7f9051fc8f0e6abf07e7435a05060e34b38e49d355cb226cd4648f59d8004c339e979b278c2648348dc27741e2696aa89dbb427a95cb900a9e1cac7bb980545cb4b0beda29ba2d4e21d7bca718d799058e544ffa53caa9ebb024e160dd25a204ab147221c56793458b65aa53c7d31902298d2c27df3c50f0bd90be02cb9ddbdf0775ed38cfaea4b60c05da2a7fbecae2e4a74bdbdfb2691e773bbf54a5f5cdc4c4db507b1979e8f3fb39822f70412896262754d7b40e1c32d1409d8c8f4cf7134367b7ddaf0e84bf19083cf29c6c02e0afc07099673d345c6823db0c3bdb627b23bf0e8b72667fa1a0e481cf472997f330e31cf6efb45b17c75861be57b40c2550610dc05cb434360e699a0aa838c9d1139fa9b0e877900198091593c3d56fec8fd6cac6142c48f1b8f7582bb59fce0cfaff712602696126dfd2253d2a3b786af7364c8bb6fdf633e0ced1e288e6dfe94d448cc556cd7f5e366622c14f46bc8905b5f9d7fa28ccff13f2327bef2518e2a8dad6c1756c133ab347c43b429c564e04453c09c2560299dd15ba6446e23d4786fc1ed013ad8f5e4bdb45d2b3fef571e9cb856d1b7bcb8d24d6a84af6ae22f9b8582fdb8f47185a305a14b750adf4d078a1bf385fb08e41eaf8ee69ba07b33a6754aaf38d32fa10f377eb30d7d5a71a533466ec5566e74b16f3c6875ed80e7870f2c0ca8a97d2e80967d368842918c7d80104d7c031073d9f5647c1c489d9a954d3fb65e6b1e3fba3cd4390ce291b6a87bc77944e8d1e39344783c5106bdf0e8b6c578e846c0989e2293f07ce43288c7bfb679ff7ab29ed6a20c7dd08f6aade0dc2fa4b39c193994672306416f6b09e93f09f92d1423901bacef05a26e9e88572fb27ec05aaa1b86cc2e632b88cb1f7f4fa95bec8678cfb954be08584c34d7b2d91bf633a351ab52f3b63f0ca6df28d0c7ced6eb6310ae452e340958fa94a33be00176e5a7affba743f2ee500658d67bf797e056aaddad2cc86e9394358ee5eecfbea4691f28bed1b0c55a8fb24cb390ae05dcfd6b41b89c61e74eed3b54c9a6a8be8aa43404542353b7afdd57d657425ed3e7db809aa041b1dcafa58c251ddb7470452fad3051259395330aa676e1d81b7ffde14d1a7ef554dd6c081ae90c5e9703691e95404de9f358b1043a5593018535729e96fb3df1ae00c1f68339944909bb22a30fb784b7a3cbf664db43a0b94e21265dd3b63ac37dd6958d775707f0d298e7618eb06ee7b39833c580f8c5f9aabbed57174428dae9213f4214ef5d222120806cb3c08082b200d702f2b927294756a665a0c158fb88cc30c5ccce691dfdcd266cd5603e0ba761da11fca00359982eb53afdeb657b909248e98972be3296ae9bcac2bd680918875402dfffeff5cba3748469a6a17b2c1d1e807e452b25e56b7e3f68460e517fd744657639202797be2a501f992764870017b28ef3f32879e3384d06470e6479bbb9f0a1210e2062ec07ea9e3c33502f65356f9802412cda76177bc2fbf02b7d53f60b6c4a0f5cbdf9a3ba88031d78555a133b3703f7a2a8398d5319afb10011f4e0971e76766e7ce8adb38340a5afdfdcfafc54ae6596453873513eb7d5b277a10f67cb45ec55eaee06d0cf1dda700116ca5fb73d529af01f8f0f44a062a5215fd858e244e46e0e85ea422229ca50fccfcd74b9466aaa09927de53b042bae29df4bdbc03739c0fbde3f2c94bd4896abd3f8d821f5c28f5cc63252952ebf7e2f53a486070ed3152a83af11d7154b10b8cae9524f887cf2e3dd6bb8856b68432497b7e93ddbc375061082da4224c7d0fa6fc752f69c590c65525d0b174b97937fc1dc582ed3e2be05a1496fb996f0845a1f77f4fa3b753364ea5b25d1d553aab9a8f5b0a1e5cea006113415a76b02d735b1348cc514de19de584b16f4cf520c7f47eaae44afaec1338024547cdc48027588ca48a1154a6ad5cbce3d78879b6b067949e0f635d08e68b26f936aeb5602d7ccb576592933be8f55fec50e5f3c80c6cc7181c28c97187e3af91a9fec0e1b8b246d5b2d7f75c6774d81089b6173375dae368cf3a550899b6e6cd0b180043677afaf847a3276a674a143ae32868a5c0a6959b95197f94d9f7611e7407bd0c4d424cde30337ef4984227042201d524cb9519e9ea1c932391dbac870365892e4c5c5f92760be16235b565bc4e8ea1fbd5c9df1e84e4b7248100cd8e8006c517b81e76d7b30e396f422a3b16f811487675940ccb2ab632a14c4c9d061d1cab6af69f22829791e4c078f9b9785417422b525dca48c9cb077142a8ebbbe14db492e8a83f9a6abca0aeda7a6bcbba45a81a4b95473a0a81deb7563847bccf522b4035f83122664ca394e5acf685fa8502794c4e5db4d142e787de0b55d050baa8e6b14b90fdb5b83e6ab84b079fd4e74e01656047a9da408f99b9cf028992e5782b5f84447ced63573cb2fb73e4dd45dd14b463b0035e550ce38296982cbe351bbd54b38a2efc52d149b92d2122df8d1f4a92315f9ba08e2039da8e6ec667d7df6a57dbf008bb333cd2fae602abe66a70726243effa768ff60631ca3aad4acae87b8f8dbcc9dae9ad9cecf569a1139f86aa902507fb1e34b3c5b1238d37e9f11705277e02009f9ffd44b1cd3838a02e44e2ebd6b1937fa163958488cd3a7622d0ff4d1749ae17b2a00d2ceeb08b807b38a95bf1ff243a649d987546b0b49999b356ac546207a3d8478cd40999082cea798d342c796dc7682391af752e88d2776d7d3a7982ef7e71cb2aa17dc7640dd2b5d132ab177003b250f05cce5edb8fdf732ae1bbde8bf3d800910fe6a6c0bc80e6c3d6e1dd3904385aeb514fa26f6c341e15ef176506e95c418b1718090871017b5c26d913d9679eeaae106144f4d26363040075fdb37db408ff10a06650278c68d575ff9a895344e72a88bc5e71b2065509891074e6ec90db6a72c4215390d0a71ee06c5d6f9012647ae6a2d42ef5c40d7854eb65501a5ac3b8eebbc0553938c2456d1c03b1d922ecb96cc50e9ef886ff745067d17805147120dcbbd2b3fa70e98efd55a366c8c99199fc7f7cc4adf5ae3a3b5e44f5fef0f9a191addecce39638d3011f38189568097aee0d02125224385ece7788c8e8efaea30f13e65dcd4fa0434378e6c36d582422e47ae8e6809a94c1338169097a75c95caaccecc4f68a1b5ab9f093640ac208a97fd3e547a789efb8d197582b38b1f68dd867b5ad9c54ff6c9f07ef6083a054ea188c9910091554ae5aba0b9957d9cb17f70e05661d4a69b8f40872491cf50757f2f44bfd3a820decbf08884a247a9c36e75048b44a9d87130441310b8dc58b3b9131d9eb35fd986fcf0a2a0dbaec98d41697b656364e4e0e5ba72310a494bf5d46bb9bcbc9347033a4a62044efcd914788f5e56c8dba660131255d26a34661076ee3979bb087b7515b342fc445e5785f32ca04e21ef6a59d1f51aef77e00e204d8074d7cdb92b8d4527f919ae3a2cfa45584ee0f85f98592aa0831dfa3b082a6d3f468927d819e8d2e677ff5bf429e6e9a193f9a741329747f99e375ed58c26f4e694bda3757fba923a16bd0ec0110c5094d10022dfa0785edf3320869cca45c80566e959079fbb346baa9958d1b53f0d641df5a38d05a2480342d8ca3faf0c0649718f8acc0815c1c17af17648702295b75b0f02ee1ba248cb1aaa2e41ac4ca40464db89d137f57e5099be604df32062818cc37a68603200eb25e2836fd05c623516647f62ac93a4d95907e3881a0a025a9067cc620623a04615fc0ad6121345eb46a8d25058100aa7cea690df4df4ec37addbd57d39a5c2f75f7b5981e7804dd19d8f415f824b157d9e23429afea7677eccd1a27908142639e417c6675888d664e0e7a1117cd4a7f9d11a6fc007a2499134d7a8e4a92f97cb2beb6395b9c161c6f2ca19baf26390bb7de9bce34ef78ccdff165682e6e250aea9569a96e7e533b11340f85e8c1e3b3fc69082ddff16da9f5d33d7c405d6d6bf76e7741c89d53403359dac1f9df0f1bcc42065c9407d0226b24a342bf34d1208cb122caee1c887c49f7338652cdf282ce746a7b11a3da9cfd08d37c5a0bef9a1486f85ed2a4981d76709e78aa448e8b3c19fcb7789a1d0d7913308a619575d0430ab4a0a425551093891a558df222208acd26b98b93070ce62093acb62a67e774eae021c4161b4a3a0d998efe77df32eec490271ffe7f4e574cc5514b89b874c228c7da6403263564ce7e3e1730456de90681afb36f7308bb038717dffadb15c4f4586b7670825621413ee31eabaeb67a4ad34341d2f9e1fa49226d36c70b61388abf8271a263891079b98af68035b229d345a4b058da23a642d49a1abe449cab3e8a9c9088fdf6a16be9a5afda0a5eba39ee5cbed5ada10c6a553aaf6b5e6abf726c706bb2506a453b92983fa7ef67460fc3cc0d29f4ac8910e19dd9ee3893112054dddd2c005d37bf3146fcb9abe571ce1381c264fc4b547f1245ed5c08ae1434aedf18e2ae928d0402eca9b0b20f9852ac66a750775d207057d2245748bac5926a25a927457bdf2c440d8ad608d90ad785e8ec3f065aef3d71bcb895dbe48e085723ddaac4750c865c26e318780c74a1d836f73573b22c95a25238af3588527ddda8c13a2bc461d98cc46aab11938e6a3d13c7fc3cd20ea1169300dd5b4617a213854bf54bfa8716591cdeb2cb57e9b03ca7175be32ab1e3f0213d49d768dd23ed74d6273ab93781e82ad13aa760035fe418573c43909215e56dd49b3f9a3cede4a84121b038d055470968435e8e495bb1c328e7d2ebd8c0fb5c890b79f4f1c785d12fd773c20a4ddcbda928eeb46a356c02dc01b8899101a0988d843b66ef416601b20b06c7278acb00ef43948d90928025459fc966db76a25421769157e2e29ccd5a3b6df9cb0112bc02131f116e70aeefc1be1e53abf101a42e88ab217d5f128ba9ac51a65a06165495b84877396b222b7f386ad7bc6e5beec35828ec239f8f0a4e3ce784e172c2d6a6f0856759aa106858760acb191819d54f87953bd1a23b39c8af8b75b5c72cf690b1cc4dea969b82c41ade287e43e15d7da4ec8a03991e1ab5868aa86a44af182dc43c563e74fc63ab5b6e36aedf0af8a743e9cc2a29c8d92927dfb3755b6b41429f11b5ae6a88b9c73d32c40b69af6de3cb4ed0f9e3707db980f624d78c1c3fb4c6beb377514b982e9e7474185579f7a48e22e8fbcf13d1f42524a1855284feb657a0e8bdef79316e063e4bf973972002c7340206403930bfdf0657ea4fb2df1fc091107cb4359ad4c4fe51bd8e7e8248355b8967c209690a122b949ed0ebaffd78a30fed35f22cd219450ec927a0ebe2ea6f73f70d7fa6358cff6e67ccc879ca580a46c61e1616ad011d436fb0e42947485d740e75818a970ef72c0f98e8733cb68c7a8f58509f36694c03636a3bd3012b85bd18f5e74e5a5ad8a50d4d9ed18090054c469c4b56662c2b3316c241f290514d5a5c8fc73fece85be93d2596e474fabdb28013d2a63fba35149081228096015d0d42b1275b8fb11b399fdd1a59612ee05360a14850da542c0c7dacbb6494881f5e154f0753107602fb2d9fb1f19637776794c3787656339324edf30c3a8709ca42424140a37737a79f7a471d394c5031959490f2c00dd1a7b418db2809786e1d5975b6936b9f6d11489b658ae3c2adf65cd3321960fde3c81db8b5499325b3d940936b6aaffd7a9e16df2345953e87d41c742fd80f5d42b9729e3c950f82d61e9c6b850252d82c391870614766fe2339a7d7b7bebddfb9f92b057bc5f128caf9f32832d0cd33f41e0a296a5d801c52c212f256f3add16c64df24ca8c711fc96f2caac468f3c8279aab3105bdb47f978116852cb9c486d082d359de1b32b06716d5f1a479f782e3982376ebe3773973e1683aa4c5f7fa2ce329a6d7a328f8bce305aefd81337cd428f236eb76342286f8beb83a7ba9bbb7b5815a44bf5f89f92f8083c5ccfb61f2b1af23ed8bcf1b47893bf503568f815af532c5b9ba0fe5897d747216330af2db1f5cc1a28abe9380f9abffde37b425f86e32f7e2dc3670176d4204677ef1a9806937867a9a2c443a5c9bc6b14a7baa65baa2be20183250ac333bf20f52d5541d12c9a9e96e5c075e44567dc6c6ed7c4be19678ed9b9c759611b254517cd7b0f236c35b5d2ac81060547c711f6b29cbad30ac885aaceda0960f27b7c25caf82c37fa998a90d8b526b04a2c8551309974911b319721cb16696151d6bafc7a54cefac0d82fd7d2543541ea57576336b8677c0ce1a43688d076b8a926640e6b933b941e385741b7daf858014eee8cff7fa93784679ab3f4258cd1ef84eb4ef354b10ba8d9aea0463b9146e7ec36c5dfd645a42e69f1892ce9a1186f08a43e0c4b5509d09d94bf309c5787bf323213a972e970cf53e0472929ffbd73cbdf3f04ad874898a019324b57256c8582337259ac06c425d505722959371d0a41130df79e7b058f488e2d2fa44cf08496433c244127c54dfcbfba9721c5ff703eb3913770abb9bde41859ed028d509c68d3c7fd2b061922f1c92f7672cfe7f734fc74602b28e55ef4c0df04071558c38928db0d774022310e0cf35f0510950cff86a886d10bc5f1ceac20e82c7bcd5cbd2f54edb1491c531a81c7f8234088ef0710f3e0f69d0063f2ebc14e4cd3dd64c64e2a578d4c6a6833f6068c435eecc9736277324edee5c0f7b1d189ba892d1913f6897e0f44c11044329325929002867780618e14ed070e27726180af2763fe615638c5bc9dd1e956df67cbef019614461cb257d3d56dea004410dd4d08d4568eae003213b3853a1dc495a11a3fd184263e0ca0f438c533d7a0a8243b3a537e11a857b3a52884ffa2955e885e695626b2a018f7ec5d720a4268851d84c975dbe0da62f89dc31c826bb5e4f528f28af934848e669613672cee08ecf2bf53653819ded4898fbdd1031f2a2c2f9b69357ba3a8b5ea1a1ba2276a83caa286078efad52cfade29a132a1fb859590001c91fb74ddcf34648131aa497e3266ceba561791e293db5ee5ff1fa0d0e945817580ee4853ea2b5605f143ad0dbafc976d814982b60bc443e01c6eac92c2fd69764ed673c60f3afd76631a89c4b0d5d2562c707c62ca015176362212c429b486fc6bbb67ec94f4aca5d75b31241b18f38b8f8317a772cfb36f754621c24f0ed3d2ec7cf53fab195e9f50f77caef1fdcc4efd689694f413e2c1e2af8d6619f2bf8fd8242ce38b4fc91892adbd13b499eb3c6869178f4d338bfde22744e86a4466235ec2a5ff70ecd4b4b0e83cd84fffaefc7ef6d91109bb6b95161971f0b51e9d6bc13867fb352c08eef9235b18bcc9dba73327a77ce1d62304af1baa8d65b581d385861d9b91f1f022538a25045bfd469339196e2164e3b62fb25744503706468f2fde40625e534b095bacba3730aad5fefbd99cb194fe567a9890cd999780998cc027391d038cbdbc7f918fca4717246e86cf548ae67c3f206b8546f43c2c97a020f414aa25cf12357ccc69de97b6265dd1da3af95ae9c4e5ab0469af73aed9c8e8c32c02538c12d69afb1dae7b6196ef8fb7a4e791e30fba745f06e88e882cacb52f7fca9a7928b185a6d6677646ff7ce6dfc9497cec80de9c3449e33e9958ff7ad664ffab0fb616145649eb9c2af3039404b38bc653cc99f13b5e19545ac61ce76af99a493ebd5c321a356b754960becf4bb5e8c6faa08d271f47b093f89da4ba7e3f5847e05fc1d373564621b06922438eaf0eeaafe81aa801fe70fa03ebd9d83a1b1af72090bc16f70282b7a9138350a1696256357eb14dee4703edef6aa28db17376b539bf82e177be694b591df5713f9b5c370c7af612e9bfb0de7807ee2c4b0f50ff67698b90fb207bd17925f0741542686bc57a5eb72bfe3ee6befba521486bf518e7b6f2e8277b0f7052f60f11ab4f01cca1a55ea09ea4001e9e5bc22ed6f11701f13e24d71c3537050c2aa2a52040e4de39c1163c40b9a8d343e7ce8b5e6fc5769c9cf2ae2de9c6bc26783877ccb400686882c5b6fe323ad34ecf5b846675bcbde27d2bb0d39e42cb9ad6d2e163c84ef2cb09e94fc49db1ae0314b6692e1b787262ecbbb099b0f443ff6b4ea3842683a1b981ae2dba3bcd95129209717ef2c64b533628303936c2b49f4b028a84743b286b645857d252b585ad6b0a8c189e6a3cfbcd6e2da168d180d9f73f24f3a5ef4ac1ec263d41d20751dcae611233610a1382e91224d55505c64b622947bbf492bc6e1c80af819d0d6cae6c791a4d5b0056034e5f8c3d1bceb03b1e19c3bf435e83566df2b6e65827313fa54d972f42c3dd1837d2226805554204e0d388bae2bc3d12f4d85e7a8c57c43703f6b71c8b75fa55b751e92fe5cd56392eab003a485f1df4640d6124db16b361e4db9ccf280ab42874362d7c29a001d27f1153c15cd5f983074ead373966e1d0ca8434d1cace5b69a7f714bcc975003c9d2e117cc34187c4b9a39186393a4c1319753a4464f3a083c1b39a8eefbefc726d7fa147f3fde50210993966a10f7924c5c067ffdcd07ce33349af91272ceaede6f04b58662cffc643641f2bb675e42ae329a031341b95d633eefdf8e59da7d1df96c1f72f782f8c479d81bd102a1df47138c1b66dd9d9b42a3b07e4a8fa37f06a958250fc3c1655ff1baee51589a94a1ade8862e65ce34d7c3a4fed360ce432f4b92cdc9965db4893577a4313f1f89734d36c45967761a7b44723ef95d123fde576b27b2c71464aa4eb450d6d5167c6bf9dc842355bc375e4c5f80550eafb4fda16cd405e4257615cdddbe6328a3d3dd3013283201f19526a3d6502fb84c8e78a208f5894a4840b42e24b0b55967034c7d79dddba66b87c439dc6b0c9a17647664333986525ab6463982f0952a401fb8d4a0e3cba04f6d5c8010595a4dcebcae9d7c7ffd80e2ca664175e52c9f803747539d8cada98412537d0fa519631416b1a80c81ec018a33d03d24d6bd6f99911e6012f2dab925d72f001e3fe96949dc6c7bb7b37c2037c219aed2820552a305e4e8b0e69689bc0deca824839988a3300087dc3b84988d1faaad06c8f8e73b7d1728ff8c374846f38ad6a005a5820596eadad69ad3a0c4d269a1d0e3ac8551179e94228aae07e696bf58decb8a374779941bea956d60c3a687f4bcb57fbe97d129158e0c2fd0f2e72455d7616bd3e0c884fa710b601e5dd7d97f1da50f0728b2f775f0c710d80a3c9bf2c70398f66e0d279790138fa8837e771af0a0b61455a01e64138debfa1de3e7dafb6bad39eefea791cbbedaa846229a5a1e3f4b0bf270ae084334e07fefc4ce2a560a15ae6d116b0f3a03e1f93df2997f3ff14cf67a14d889d7d48a0859891117de3e3193dbacfbadd301caffa5a351d7b67deefa4b454482be6e8d883282741a767960fd05cd9dddaaae77391374d097f099207c4e83a3cf0e48b5851af085e54762c67223f3f0827f56b89cbc2f8c7376cb1b14ec59a94470b9fe0733cb1e5fb9e784bf0ab9aaab7e1e19befd34f7fb85abdfcd35347d03d861bd8ed19ba5db063e7a54a4cfb4e9aeeb9262ced41a1f85a03bc4882ca619148c791d714582aef91efb94242e677ff941b7704402b12bbbc9e3cd16e5ceb0b8c18d3cd04616cd33086a3fce1749fe702c6f5ca76a7194f6c6d145ba39ae5c35fa3db3299d2dd7ca5a5537b5f6559139487079764aac1806d036be839723c2870c830268eca922546c1741815f0f672b0491fa29ac840c44608bf473503c9e09cf18d61e48ee7133db8b8f490610fa36a459b5a9debc1bae0febfeca370e0878e992f5ca9b602c5fb83e51fb83172b3b2e341957d0818c7fbfe5b228f4c4455fe35e6e2dd7f6a8d79b19e8799970c71eaa2be0e83f726a842debbb8f3217d7391d2016e2005def16d932a667df18d327f329d3b50f775d7e39a66f4b1aa243f1eaa7bbe1966dec722849d63992917371be5d876de989edda394ed2c12e58b5f4695fc3962782aa726725f4635ff793d74a28f064d3acfb24a8b00f43212c28ca04717c014d03447e649a099e05fc8e710ba4d8ce9d62c33185dc01412c8d7bfd8d5aafdb2fbc6771dc4f3cd2d3cf9b38010b517506041531b8402cf9c9d3894121c8760e11512d49db1741c70a000bfe74519d3a843178b164efa2afea51bd3d32283c394ba4759442bdcd8a2d5c1410153b86a20b3681adb6825158153e9ffa583f0ed706d327219c616209550d98f95eb5be4eaa03dba986cfd6720aaf129f796c5481278b583964e36ad5322cd9e41cfedae5f7793c9aa2721f7d4af5c2b88d512937f88ce54a8a4acda81a0b7b0719a1b916a145382f393a0c2ce9620749e924402952a64b8eda9022d37f6fac4ca926dc1ac7d6954c17f8b7467c2a352b62698287e531dea1d7f1efb6ff458519efa1bbb3be815f35f2c3c1e9410a7dca21cb682c3f0b3bb02f1c49f884a320ebbe27edb312545dea2b64fbb0d4adc3cc126a39b9521b6df13bc46de32f85362e55491f3bdd47d2bd54d011a3899e77dd8abcf6f8861181d06069d267cf2e2ec7c8c0ef4704af4695b6a20054db32806140b0579e8cebd89732ef402e6464c5c244ed6289be82d82323fe26181146cf0520d41625f2ff234c404e59db580de1ee10deaabbc203c1caedca3aedafc5327da5e5066bb035fddd75dceed9bb7b4d4d5afdc5debcc60c80da3db938d7e87c4b0462612829c512064fefd588a598f82637313e83c361eceac403abe4d9949be32803e3b8e06bd431f3f5d74e2558c95932e6a1a4fdf1985f8b359602c84d17419c4dffc0270f3ec4bf06db770c7873768b2eecbe1c0231708260c306fb1e54e0fc20ec3fe64babec16783a664ffb6d5a9e29e1a5c4b7cb26e5ea12f349f620e52a16ba0ccbfb93d01e8c9b703854f680ba5b5589baa940fdc5fe631dbcc895218a3e6b75dbaf7da99ce4eb306d8290719c0c23c0a9cd73fbfaef5d0347e27e87ba1f495c150d62c86af20acfed7c931008d85d3baeb333429ebf8ce3566c4f965527bb73d356f44f82e18c79a1846809ba141fd4ef07d311aa315ffe2e9fb4b93c1ba65b3b562184fa0345b21135c0a4eee722c43d4681427007c4142045964615dad9c7ee7416f210f38d9b52aa7e5c99ac8eb87a35f9f16b88f224b2d6751a75d7333cca30b67f8d3b15605401e95656e65d401d0d2e4bab880e2c9087ae546fa9c06802ebb648e0e8ac258b6e23942fdd03bb2475a00928b45a7fa43cae035ec09895a9f55877e9dd9e4a9469d8acb3c8c3549954fb74f9087d4363f7f3cf46c2c4cf58b9f02a3e3af47ae18f416e9b5859ef0e71e24d5d78e4823258d41640c2d7860bd599d98c959287b78044c72545f031522b8cdab425bd3614079ef9e5bf63de7304a5b1e0453be0a4ef0db717edda7e6b7456c8ca189eb3bce0628c8183a39f8193eaa8d7bdc0cf9a6e7ce5aa9f78360307c7e273e203d9a2ef763785ac3425b39dafed4b62297802bae462449c82cdee666f1ae82afee01b5254d44d6b2e5a7c8160a1fa71a59e1daf2bd3ee075517879dfdb0ba0b9534ee4aee72d5a90d86155d5d66979a06dd7ce07fa602f9f8e3397edf9c298a4c11500bc4cfb0d18e11d95f7943ba272a52672756faeb9afc698fde007430ace84782a20dceab3fe00a409f4e2f3db0bad10dbf2d129a908c2662c55b9e9df7c8c01aed6cc629c023f1cf42d85738f70ae4ebcbb4820b5142b294fe7f91b02a2753bf259fda65ea23d26fead7a40cae5dfa04f61937141930c5874a818a4d1fef12500fe15b214f6c26ba5cdc525ead2a509ab0a2e9435b0fd448979f5033faeb39c8bf16f8c4dccd6d784bc8b72a16172e45e9598a0893ce1e3dbbab9c4d91fb3454aeb805a5094417c258eeeff257cf0a4a2054ce52b97045cdb28ae7f77274158565cc084b33be4d473f4b70b292e33bb462ffdac015e4f6480c7f4679231037c383ca94aa3aef77597b7d699bd0ec8bc5555944700c0c7a397d23a4434ccb426ae3ffb85f09beab4499355bcdadac5b432a0e1011e1cd2d07c099c3b022c5f0df1eab5ea708b6a3fc497f5440db750e833c2f83bcf6e70bda867c1ee4370d34e862c65e4e6a6c061960b0e009b67112590af16b015cfc98a9a9cc82ced1250aa4bf5249280cd577f2ec7bb3b2f052f11a4b0d5a5d1bb95e6447e917d184eb7f1ba232448131da151e9021fe91028a7c6de4996adcf43c212c59121fa204f46a42fc485188288195246626ff88f9d704442659b7a0d2b790e16626e91d8ce7c51d16b6e14e4e1358691f50954da5f4cd13ecdf332816cfada935c7c4c8cd15f88ebd12bc562c5c139b2bcd1df9cd8f6dce04ca8305aa94f5f2cac7c96a106618696f3d2d9fcbc9d7eb1ef550eaa8f9f0bbdd19e4399d5b78ae1aef1f121b5053176e5cbd2d51a11992c7f1bfcb24ec3341604d0fecfb3131475e95fee7f0d30506d52bfac652cfc355f8970ba2a91c54bb9fe6321f149d5c1b0cc685277ec23ddb120e6cfc1efcb16deb744dad80eacad870afc27a94d0b01ef6b023cce7abd5a85d765ee0d7cbde0d9976ba6314e6418cad6217149a395952b9b058236f0c2f3c76c50e3e88f186dc5d1219c1ce9f44a74fa099d925063bcf63477331a56253aeaf1a33a65e39afec8143751dc91a068e5bd807b9274792c6fac5f78ed10876f2cf1c9a08d78303f7c00c06f6426d40c0b80b35659267bd580e529f4d2775a8c8d311189b43b513053d8e0f10b5d274d9b6c7ab4e37bbc72de64c7baac8a719eaaafd41a779c86b7e8bca85c9b007666cfc1b62d5531385cb6ba069711036b9923ff76eadf426d6ffa06ca3585633949794fa59ab9643df4d620744c6d047b2c6dd72d270749d71778fd671ce414399ca185f77934ecbd866a80e22d28c4954614701168cc5994c85b0e54e331e4d897dfc9eef69054a162681cb0515864c7f7a9d8cdc73eb9d7bdf44836e3e68b2f73fa74711006d2fe0699a25c5d0716d93a9b690ee8230358c776c416f68ee32fcd50445e2896118be801aaf4657007aea95f281a06c4f1838e19fa43dbaf9cf6d5dc9b9e3085270caad618c912c0d19587ea6f5cf86fd4b2d97233793c007efa2cd4b203f85b409f97e6877435edafe798dfc8847d5e82a447dd2a9cec7cdb8d71fe92ea462d0331386abdf71e10d68ff181558029e7d9e3d24fdc25cc1a532c42ec24ad1d8e8d8498187c2a013ff7ab39d0fdcf264d265b8d9aa1300db472737108cea7495836afd75e200917ebb65cf57f22f11352c8a10848e8afb92b6455934ae1c9a7c8c0b7b9c23caf7551b40523c2156cd8e5f2eaaff818d374d49259360f4c7a5505688834ca3e621100e18f6761f7f13447437150854c87d16775dcc428610d5c04343922fb3efd97a2c7de04e3c25f6df5d87c7bda31cf28ba6903dfd8c38c9509b2461804c396493ce8c094ed27866781bf3ec37709097045f20d6138c76459614b0a71e94e668360b39bad1d7e36bbd7872aa7e00d51bda8142524dd2e91c4f6c163d61f6d9ff4b5205eb022ae972b516957eb4b79809e804c1fc41d733d36c1a22a0a3bb3186b8a316e197f2088714eb558f1e09e2df4771bdaa072f3dd6a5e091e5aaeeab832a1ba4295bf5defff7a30746fdd32d9d91611fa12c0f0ac4e530bbb2fe475d4f105b3e3ddc7358d1fd289f94df4fe0fb41a7b48241756176cc7847713f827fe5b8ec07460b4738280dc8a75ce682e5dd1d1858d6055de58a0e9f1359e13c2995f870fa04aa403a58ff512d610b179e7cf8319ec6bd2643cd3035a00fa148a7ca4d490ff007388ee17d7b67b6950859a82a85d8048f22b6c8ad01491ac0453925b335206da8797564f40ffe225fcfd285498c228fddbc3fe1f0d5ad3f42ff96f0c8b99d97c15803e4a457e886b0984909d467bb6eae4703b0dd8599c44ddf01c6ae06a09d676f09a89de9a68ebafacefd2133fb87f0f55f6181c42d9bba32452b4895b5f8dc22a5953cb6f159128d9a12d169079a8441a69eb4691550f493cbb3df6ac37d87efcdd3a7df8f1e2352e0f0e861d1ebac77c658d292fe0b69d907c23e4c11dc1f5cf15674cca89c73098a62c96f86d3ce5f0abe889216fe6846882277f5014d36cf44ff0ca6abf05f547a04854e2919913a2323799f099cbd48b5470ea55f527a9797e037a5f81a1b9166744403b7d9dae94ddf323365ff582eee761b028b0229803a40e7295f476ef9d596aea48a55beac889181e61ca86c735f65993e2ccca1eeb276d2e835911a28a328b48ee32b11fb2af684ea8aa532b61dd4edc3d8088966516cea4b841113e27c6556f73e1a2c93ab53149a825f57b97ca44f4ba281c4f57e2f291ef5e1612321672bf2c9922dee04201a81d3aff12b5ba723910e05fb1e8ebdaff10d7cb560a8df232388627d80dc26ff5efdc3186f4868adc7e75fb1dc2f64151aa2d4b38b58e24d2fffa2a8c23b7b58e5cbe5a7a409ae9e0d50c68b77791378662f65dd96d4dcd4d837adf928f257445f4b27aef7c44de97b466328b55878dd4417f6390e4b2b89fef142cb38869ffe82b3b3f17425d288b11f8b1c0834c08a14f8146ee05df6ed23caa865b750cbfe83a20fd61673a5815ebb480dd418c1ae9605b4a0b346c8d60371e9ad5daf805bcbe12222741b5a8d3f97c02a223f77f11ed3e079e8d27879b8a52b944c2990375714141b04be71857d0a1a5ccf2fe7da31a1ee57ad730c57e05ee5f825fc8438ef58611a12ae51b079790934e282dac9904d60e3f48b18a40c4efc1bbc27868ae7908eef30a07d854dd41c1fdbc2c60d34f659c0d7a0580e58c3f242ab4cb70e866e1cf2cf6a1e720038fa42ce6bc6828ebe49eeed477729b96207a4a5167bd6aae5ac9a61e32b0cf7db1adc337bd4e50815ad21c8297ce794988614cad046e6ebab07f93d5e7625f9bd759e687b7a6db6850d3712e85043849070aa3efbb9e932b8844b56fa8a5d0b56690c2c88dfe0e8577d735330ca4c821efc7279206a647459d185dd13bc38fb61446f66315551be5640fcd68d0e845b77767f2d92255b664e5b170bc0d9a73760c07bc98da41cde3984b460c033c72a850be0debfb80aa2dff8d2eb61e5dce0f4e53b2ef1ccf9fb3bce307c46c17c2e728e5967dd7779b80ebe095f351d9e4a869f00b69eb909fe033bc03b6d7c65a34703ac1f8c09987e8ea92b5289ab32ec2681b7b8cad3158079dc91d15c37ee3141a73753c8cedfd27f34e2a9cac8a226c8b64cc035e598d313aec5f7de93eb8557b1320e4b55a71a0f503cd86f3e90d37c506556321ca566a02ded0d4fb94defe3762b3d152776fcc91cae1c34652f6cd2552cd0f6be22442612bd789f1938f57bbe3ff6c4a7d556d7cb9fafec353b2930cd5f19bc492f37c3059809a12da6464f2215d2ff1f1341de3f3cd25adea51577873a8789dc3af1bbfbfa2baadc83ca60e5951a867007412c8eae87bd3a55a63e2c1a90b31cd333e4a5525f3b0729d5b0d828eb7707f5b3eda699f3f9ae4e0d77e099f7938bfebb62234c968bd822a4db3c4bd88a656482627fff86d97146ae012f25f76e9e7d53a334e5ee8a31a51aa4355d3b3f7343afafd9ce7dce2960e2c60f8349907ca4a61a7618cc300f88765dd3ea119a67852b641d1dec15672ec41ca8d5a2eb2dbecb169e64ff682ca33f04273e45178951e1d800e75e71f321e591e2ede277b1d24a54a6dcc3d060f5fa7aee83c0d09a0f4c12dc73ebfc77612de73a1b716a8601d7869d4e9dcb7bcaa8e1fe8600d6f77487ee82df641a380c76688d5ea7bb499fb969c1e25d853e3ec0878dd8a233c7718cbdb9a75408f10ef5024cb165e95857b5634f8a8f2941ccb9a79011348e359c9e4069ce10183c9eefee7564c80fc6d114eaff6750ac3c1864d24897e826b2a2e46492c74f7474e34357f2a6e07b2199ffe85d46887289e89274adc2e563b139bb0215a954225750c889ad61e9f6172f8cb6602eb6a4c6f35fbef9f0c0a15872e74b4ec54e7b55aff0fcf63dab2425746205b73e04b73648c519aafe86cee4829749604c8b4b4057204f12a3c7b79833f34f5524b3027a840580b55417ac2e31aa789f94d2f7d5a42dc690440b99f3d34660d8b34ed15c547c638608712e2103a53b0a57f4e5062a8abc05dac09b5d5f762b848d5df6e6cd7a7450a548ed437fa765f7fa359da50fcdf4d93872bc48b555a4cddb29bfe54d3bc0767c1ff2423b9b231a7acd06b90e2f084343e4479c4f7ab86f6e45309339a3fb3a5ba8412ad72c14ccbb38245c776645cd6942f59b29d59977fc35203764d16322d62123343a2e807587696aa9429aa41e88b427334fe724ad361127a5d6d4084469f11b370c19fbc8a473b3302c6d26e64db05dfed8621451cff3339e6c8d448378cf11462c2b86db8889bc16ebac87b9f9ba8337df8224da65459b1a9735cc0d96eae2c8ba545b872b0d5033e59932fbd950aba9b243102c05f11db6887414fd1fa5d48df3bf4d0471f1bf7919974932954381c248c4335e367b82159c6fecf809857dafc849d0c39a52fc5076f05fbf48783d770e392ca71c74cf44ce8816e1cd6df834060896f319e969893ea883df464bb9d4ebd4f18e220b5f6d431bb25199d8e09c0211374ce2d7041e2056e19c3f5e6661fcb84803eb1b67fdbce2fc87352240aeb4f32f96da40df944eccc386f16de9efee702f0e53c07d6f08d8d523dd7115293b6ec8cfb1b315bd7e95ec8b5a82b8baca6912b654e64df8aa602ab190ce97f535f343742d71c9e4b681ef7533f6d0deaea11545a7541633eae24be560be13235c6757f82844285abbd8bb6e742a2080836e2f621be4272e2d539652183b080f901a106ebded2def8f2525fdd4c442e9fe566c3b8d11649b9a7882a08365f4b3cccd7a40a75e7112a525cd772d2e6fba9dd798367add5a17d7e98381eda8fbf476e286b41d29cf88fdb1d34091920c0fb0c21d2cbfda3fa2a6f995f35bab0aebc36550e5b6a0a7ae953b7a14b7e69ba7174fd637ae9021a4daa3118ccdf6262323b3bacc3e322cfb9c784fef47ce25a176db51afe450f1ff0b275b9682433579217dfaa88bc858fae65293a393af3596e5de3ba599a7c159f968081ac15788315e43ee22399ee35738d45c6941420fc56e698168f815b3f885907368e7bc07fdcb235b9acab0549ab057e423eb5bf653af1b14538b1ca61b634d61ceb86c265923b8ff4d75fba01ea2f737d27e0699aadd14ecb64ddc527cc3015dc4aab44f51032904642490898d51ae84037428ccf1e2eeb38d7c3e23e4ad4bad5cf217c7f76bfb162bd99c0469c2b7fc7357064be0b10322211e5eae4e706acbd68ee46b681afcb2b7bce34d42ed9dd11c8f2046c44f61ae286b5e589bc12097c7b807c16038b87c44f595fc1977b0215c8d6b31cdef64ab783efbaf87de56c7db974c18dc44c8fdd7966e107629fc794b0cc412033e02df37efb0b75a003978051ee555d176cf7192af6b82908630972a3bd00590b551894c35e818f39458a2db5a7060c6deed3b9dfe1d675426b4bc3da4a5ab24bca2c8ce289d4b1ae5cedb16ba881fbc1f74d2c7e94059bcb923727209840c26b7f3746a0a038b3021ddfcb8041584f5f6e89a3545b032c61ba7b4d4d44ff7a574d66aca34f347e3e0b6bb16ae27224c716c44fed2dd220cd6d770040cc12d8348161915f14d17fb11419038fecf3bbe96df06777f8a7632797a7c7759a43dcc8101df1ebf19a5e73ad0f32f24577de5359c00a0677bf5033152c149e4c440c58aa422ceb59c82cccb3f7d3842b09583147b7e4d6f1bfa1cd5f67c1a24f8a10d2d3937ca5eb46807b750e17f9ef86f13176cfc7ceeef6fbc7171bbbe46c8e9634045c21123055f23dad72fbf639fad3eeb6f7861886b701fc2874385d1f115945814300f0a676253fe9b6387f421b4019e81aaf823b15a2faa3f8a0cf9870ceae6bf49c42f2fb6c08aeadc66fc27217e8c60b16e69a4aaf2cb3f65da90dd42584a2dafaafb46303e968b319ae3f6f26d6916e764939a332b6d2a8b203cc72ca9cdad82d190fcd1b023c907507c85fec53899dc4c05631935b33bd27b38e34f0bb0e51714686181e02bfa422d7de3d1429a0658d02d6fd3f69bf485e3d03817c91488e48e13cd8c708270c69b505be74fb470e278f50b2538c21808f62f4053d2307063ceaf4e930c7c84aa6177ded8e3e7f3348a0dac824a77699b9c37eb597ff21bce836520f6b84b8e09c2b20d98eb75c7214a311908f385a117b24371399232f965b5e74985dbd5688187aca4efee9542badfcf9a8a0a0ae8ccb7701104c85eb805110af60a34a8023c5c8d06f48bb2b27104b074321745ecdebda27231bcc73b0cdec1c5dd63ac5ce2b11df42c4499f5fb1ab39f5897a2d3dd5657f3d8bf5718275a475bdb131e76e08d1889ec78821b5445949f05397eb4cd3919f6182e4c76d004105dfe34b1ccef7a3a83882c6cc5442fa8c3cd5dae711271d0075fee54e53c260c1a2613eb105076be60121f1f4eafd18a7633c793ffcaa219d8f8b3d9b3862e81ecd87d19bc7398289ec8baf3bbc9787f941c964289bccf291fd165b9c12eaa6c9da6daccb27e21c10e0ee441c2fb899ea0634e4ecfdd0bd4319fe36359ed4a442087af0745b32ff917141ed58da1e72f561a5afdff570cf0edc408c7e4b6c3564cda5b9230f4ab25b16658d50c024d29e4bbe7873660fe87bb67a0bc8fd7c4dc1be6253583f5bd37e468a6da7d59807ebcee569555b86f5af6b8cb583177f0bf5924ecd3e5323567d37b7d9a26c019fc797b903a187093c29b2661a331ca0e2d35a2cef324a0f11ca77db42557dffd0b2f2ef0a6495cf0c693e5868da40cd6d87a3771a7bb53dcdc3675550fc5aa6798f39b62da1ddb10ed22a4a584bdcaf74cc719cec73bdc8399b75167b04e7af07376e185dd0e8df0f8e5fe3b5f57222ac35aa0b5b49f14c148d9d61e1c0b85872ac64b252cbf3909a50b969dea1977a8b95938fbb481dc9aee3d41407689b26727e3d2b474916c2adb648c18578004bd414f95211cd8cd224f4a341af485757adaa2d74b5c097e2eeb5dfda315131cff9856dc26109570406af42dd8575cf744a4052a5188a0f1a58dc32cad86b5b50b85e87b171c6a73715d79c533ee382397e4120bd51e5bbb4c6669b2d7a2f9840145c4aa9fef6a252e6a209a9d8e8cbd037ec95df806a0fd42e8913f3eeea805f2e108ee223abc402aefc0f8e360a0222d62b695d7a121b468d68f9e42c5c3189997c3cecc90935e188f754a43921b74342f76bcad765dd0148f7e53e3f9f3fa91ec5859fd2eae71c1c4388659ba58253177dea5b74afa8840f7bb61ea2d643839b057f7f15f501106f8a802078dcb05e35fd6be3339563c6fce1e5d02475948824cbeef4085214f79b447450e0b691ebb459bd164f99ee324fe1d35b5120c82603f0b3fd8f14931cd9f2f47f9b2c01aaec34c35e9530645abe52b8c4a5473778ab7225fb6e4a37f030249f17dd0ac54e33d535853f9430979ecf176e43d21ed255cc2d39f60122158afd8ecf01ff5b4a532eddde39f35dc7a0a00533db60f3c49ee85260bff93ca3146809a5c4e457029940967241621744ea0458bc17113d9e3d7c6209461b4619d5bf93c03cd917133b963d52a1df08a2ac14eafc8bf3923df788a4537b7eaa806285673bc2864b79dcf239f192b7ecc9b1eb9164bf26cd5971dfc45aa3b9b82f2fc1f01f5ee3d08e5f9e662b9ef666478d5b12520504fc0cb582006ee4d3c4152016eb84a1d7369fcfc6748df2b00ad1743162efea28483920df6088c4babeef63d5f41c2b3c19d3ff87b6c2a396e429fc12dd185a2e74c17d6d3414b308629a8ad42983e30ca1cc40cdb12311fc04c3f86b4a3fb9a396dd8c2106b0eb0088a373ba12774f01f3d6573acb92a0de0dd3912d0fad4fd19c8a6400e17842ff913b7eba0972f84a955f3d9f68751929976ccebc71cad10eb3655e874272b0786cb3d65c423f76a0eb476d70aee800b6a08242e87a961a78bc6a13550af75501bec84f9f4e252af169db69311e183581d809cc5299a8afefb5dc11856b9acb47a9405855c86c81b20e94dbcb1eebb7569ee2c236608ed44af0852be9be338b98d2561222faac18f289a13b4c5a4e849fab781abaab02163c10b973ec16702e558cbe1b6b0be816381d14d58d00586883d042dae24108c54aaf57ca3466e053bcc8f28bf71b185e9516013797f0d608ef03f1e36514d2e1121f0ceda8e59577613faee43b174c39495bdec5ea80c117106f2832b4e7af499849e2e420616efb183b66645049d11c9504f518ac6fc16c8c3fbbab25423db2cc93d5b4e2aa901463f57844a8d7739e525c756394c374b6c5f56585ad0a66019d6e0346ba892efaeb11885d54b8d35abecaa2721da6ac36eb1c9561ee5c52edca61cf9a02d77b5113f6c6ef717775a2b50520837298edab03d397f19e53e22cbb5d8de1fa2f666f6cd0890a6cd37f23dd1d9b7ff10780fe2b22e878c89f41621545d5de360bb2daad314f4c31b4c537ea8236def7b33b2191dc7598e9d480ac3c2c028411b5888add9c12e794e5a3f370f8caa22caaab218f97b8e0a9ca2ecb5c61e5e2444c2206ac95b729d8adc0b47a58205866ea158ca46a9cf197223cbdf538823d546b7d1ef6e3dc99c8252c68f45252e5ed2e5d3ff7b8c11bf1ad8f4a5a17b69b0106f343fb5e59dd5d13a3f7022b612a74ac719f983bce61943cf13e9328e8d552e20be9626f85a767d7cbad85d2be9e05246b045a227931806743758c579aae11c13b45729cff46472ead10a0d6930c1561b2329ba2bcd517309a83858ff00ba0782e533ea3cb7c1e9b672f668fd21a0a88141add3c2e2851d469eedf5a8d9d27191a1c2c1dee7cedd59d0e0bbdb37444a35d61271865aa9d57d2e1b0f0cbae84b1ae76ffcdc37bd4af8fa879664e28b02d4786542ff81b44b60983dac03d716aa602a47bf3a7596c116c741f5a23b7a805b0a308fb021ebf5f3d563859dbef2e7c3fcd8298d0f9e1370c8ba0f158bc7ac1b1fae6df833c771612833e6c40bafd9746a458d6faa53b1fa4f3371685d8778c9fad8577f94c79e80b61de2696255409a0dd151f3490e47f861acd5d65f51146fc29f68fb349ac3f6aabc9a96e0375aaabe0afa8fd9228cef9bc300224fe9ee8372a1f13a3f55d56ed5a76c425702ac29b73c01c2eaf873bdc6a3b2e5cbe124bcf0fc7c17d49af8d0079812c8f8dc3aa0276b71708b876679b490e461fb5cd00731c7707c0a9ab12e74907c9d13d0b2217a65bb0c7fb658a959bf305ff6c978483a829b5d44d016cbdbb6191a8afe91b3c1168c1e4d355a9301a487b419c2db5bd24e6dba38c36b642c4f89917519340a9ebb1e4a37d0dff96e0e38ff63eee3227cc32fada4ad9de1223fdb38dac42a0dc393039364e5d7a8b95bfca2217e3ede576c6be55d30b2d8bdebe72a974f679cfca6366f0982211684eeb9e5d51b0a33fd5fb980b491c1868047174473edaadf460a1f4008bf7a987a804c55932cb43ac56e30ba5decdbbbcbc95ccfeb6379cb321ccc057e7efa71ecfeb6e5d20b7798e5ac29aed2f9f1e7b604b8971bad6ade15a0c7ca10b3d97671476e1bd190ad3a6f06b5c5ff68d8fa4f1a2690724698d92b3c646ddfc63de03e40d58b41817454a4fc92d5ea972ef882c7962bc6757e373c45f17a2e3e402a2f6ea89c9ad1e9a94e7ce893e48d5ee792ea5c5569ff921646e56efca0a30f7bdebd0a5fba5e5f510e06a8fa4f0fd5452093c000bde67a404e0debfd7e30fba90395bc44c4eadfd60f2e80e94baed89bdffc7c543a1aa2ae08f3189ac526acfb629c82b8ddc7b473996d2c21541c11b0b66f890ae2523b07443c6e206edd7dd62d2d8e821a6188d41680344dd9f11f88f73fbb64fc053ad0099d35e534853a89abd18deed69193f7b601cc972718378aa87c6afab18c2063657b8e44cc72aa2cc6dad5ca95c2e9bacf8d57d20bfdcd5fcf5452bae88ca76e763d8a9595aa9ccbac0a77b56cc10a21a79703928596d9491002cd923e614895134c9eadb73de0bd897fe110b8b2743dd36aba1fb48fb82ab449f0a808c9e61f47e6043be8ad94b6bf5a037366fc54a5eddc568930d765db06f9c7d0f4179eeeda0f67903a0c319b2f31784d8acbc40035d5a6a9468b086665123b322d04d7a77cb56dc865ece21cb3c8cafddd3256d573a7767e092dbc599d07cd58939a41667d5611a503dc6c7eab3d2540b4f33e6958d45ef5ff80454a2bde87c6640fd3e746419f13c5c2947d2ff9aaacfd6036ab4b499cefdd6f54bfadb409248018363dcba75474c265bdb385f7ab2c10c7027b8a5539472aa2207e874da78d22606ce4792c33451faf3d6ce9e1aec953eab9db2d00292f2379a2f57f62cb7b838f377f73291a6d2ebee304e04629fa5a428cbb82cc3d8204002ba6506239bbbe4c78d9ea9a52d2e7aa138fb4f257a9e7c6efb5a0f16e063856c1f11a7b915c8fe674027df1c1bb8653a8ebb9a0208074354a7c5ca56de9f75817a5a0fdc196e8de1aef9eae903bca1ba28ea8050aa0f833f57f697f5828c7fabda5d7a338118853e306a5ab9e6879a2c0dccd018c153bd1ed9e8f766b9aa0173f8374a884b4658583714e7dee89e078aab77969fef55d09323f27e9e4cabd7de90827525204ba486aa95c218a95e063efcb022b8e1403ec022d9f0c880249193d592ab34bb50f82a24759e4903caf2de97f867c72658632ae31631f5ea30eb260fff5274cd5dec553fee6f14e2144e6c6a0c40493414dfc1ed1a610e3981b222bdde257221180fe7e956575528f521e053f11beb8709e6333884de9b9865c227dfd5420556cbc5807a7dd74400810b7972878fbdfb3de6f205d095b00e5083b039281f4e2b86417e343932e56a00226e8013e06213864527212f2bb936e469a351a8c143da23533e6b7d231eff1e51fe8b5069420c5ad7fc86a3453f1acaf25874a824efc1245f9c45e663c961a22050157b1a0cb8f6ef73c1770d73d73b54e280ad9c9e44623e57422ba853dfc7f3088b505bd01aaab5562593e9354c530e14efa6087271efeacadc319b75580de2475a46668d6b8d7eabefc8edbe0fcab396b26e0a23a73c09096db04f146ada43d186c6d476d4ff7f2fb570f57018881610a1995109d4a0d0847b3ba8ee45079eaa423dc27d4c2b0556d96699117a138f2f87efd290981bb297d0297b1b874979d5e1de0e74d16fc9c04ae21924882ac3ba17a3d7830e87b881644a146a3ce8d7e4bbe2c18e6a06e9c2f3599ebe5500ebb691fd5c46554c5de078225717e8eac90121ed55f8b8bc8ec94abb0124010b85534ecbffcfaf66c61f305dc5f455b21155f8ba07cf17263e5174a968cacb1272a529ce825a7576abd4a60628a25be8468b600c9cc47edcb0cd3c4b1a606ee222b75ebae77c1de8a439ac7c9ca033deaeaf9a56bfe9ef5387f25af33a33d06a149f4da2fef795088aad5c01c86e020f885fe75af780f4e16b58b715c16200f5c1877f16e3a8e01613c8dee519d4013d0bf24163151a47c404616dd0474fdf40c855d608c1a3fc7e7999af38ae63385abb5f9c75e4465ca210a299ddb20aee5fd1b06e89132b5d88cb0d3c40f4c51e195655d1a72674084c9a58d929b055cf733f419a5f1ca0edcd3cbf677b7da6254cf600921de0bd8bf8beab0a22e30195f87d60a451044608fd1d82f974c5fde8b7b4d7884c4d344b41d18b499563b67a183353c73bd0ea40657b7a6d6622642ee06fe6a601a26e9ddab1a5aacb72f684c17bd4fb2d5d760f166e1d90b8b15ccf4a00e788046c8552da5102df6dc8d32d2a2969df93541ba053bf6d04ab8d87fcb7bb0cd83c32fac98f4c74bea70a1a3746bdaf59b3ebd0680c4bc51f6361e0fcca633d9dfc92749d5bc65a40c22ceeafb8d56d31eea13245f584e181beaf6fb659e1904d0cff2b2d6066cffa5459d130e8323fb66e8297a1e946bfbb6e0144d8513b06a3492acb2a8bcd4e4b9706c9aa3d6bd42f57bf94620c32e4104d3a134786da2f2204427ffde711076fdfeee9cef59eb03ac0dfa0e5d6283965dde4e4f4c43945b9e678d4c5ec1f4ffbd63c4afa54f2e81373bf44ba38ed165622d7620db03531a32c2acb4e1b414c19c2507e94e8c5c9c3f8811321c86655fa70e52daf9f23ca80f51ea6b8ab5f9b3a353a9e74a4452fec0a16196895c321f92bd42c84a66389a96b7bf3d26e5996091707c43312eaec4c983cd8ebf09a0bc0e0ab78cd52a4f00a279b1aa1864117f163dd3e8f66369255c7517359acdd2b4d6bac7131e82e80fb7a0c15ded807896d2997acc694ec3e43c17999320319d8c32ba77b7a8976464bde4ee0f8c1c78a457c2732aac9141b9c95429da5e8932d74f16e23bd6b567e1033d3ba79ed900de28f98bb96cb7f6a82dfd6d8c1b628866f5cf450dec0f10fc9f076107e789de2f8bbcc5e1acec2317fc4821bd7fecc0ff4f358c49f380376c6817291f806c697b07930a40e9987ec54490e9b7322c803d10e070acfb83befa27401ca8290017ea6276ebb65a59336fba99ef81a3e5d202fe27d6f5d86f7495d4cb0be75acf394d2f302493c903e000bff43c4302741fb729bb628b8da381013cae59ecc242565943df36c1c1d6c53515dc56a924aaa46095b1e1d10e029ed2ba27f7ac16253d99c0c5bdfb42357cfcb457b4476246035a72b59c97ec0fab2adf8df1cc36b6e8df7b9405e3d304b1417d160a016ad724b2c066cc3330e35d87ff27b2a465792ff4dd16dc77a76ff22e1aa0fd6769e64cc377fc37bbae2a4a997aa4c95f1da0cae718476cf3ba288b5fa1fce8468acb9853e8cc9574b8b7b506db796d308de17b6ed9582ff03f336268c224dc6657c6a171a35b1b4445d2d18ec6b738c7e6f37da85eab6ce44de5a73d7ba83ce603a5786622db03e96216091b9c60a266bab32821f06c64d8ca6014dd0b4e98110096a41e3e4909e1249fa10e2a25d5dfc4342d763f569c908f90e87fdd0dab31093811ceac6f76c5713d0aa0c2de2fda9bf9b683754098fd08ea1213ecaff3a8f3ad66c844f85e090841172c90ad669272b9500d3997abbb9a5f08796c3d59e44ec05c8031c5885e764124f03e3528c96cf405045d3fe7a61965381ee736972db179ae0ff26a4c353591c26519654ca533ba183691416a2bca3b8ff601d385c75b70e231e6e69dbe5427968d7bec61c6bbff2ee94aba335eff719c65f3d635dccf04125707d952e50bcd2e4203eafc77642ad054e7cb68d85e3c9b97cca9dd8bef4d3d6cf614ddff17e704b1664605e1051821bd9ac07551eb5eeecd007761645302bcac843c4bf052ba47b920629a2422a2579516743d6e6d5f19d4ec0c2cfe7396393aed9cff926a1ab391ec98687aa24bc1ca45f882ad013679e290e703863afcc9c391976922d9e9c32a348b6a3ef23206388d4de4dd3f5fa5414adfe217d8c16eaaa62d23d187226fe8de07200013c27c0952c9cd9963553c26da6cffc3a35000403aa7c3495b54c99d31af5d0748eb183658671a85efa513bd4622d0823b38d76075d8245accd3e7c2614f4a1eb647564b4d1d5e4849c8acd17d9680261351031d6f8f01a09b60d4efc4aeef58d57368dc2380dd886e11c00ac092f0c7ef6ad389e68f20e8f002879c0c38a913983e631b1db9c8be45d2a67e87aa4dbda1a85b4a3f39843f29f35a2521f26e287f01d9a5a33d7b6861b31d2c8aece974f82ca930fd2c8c2c4886f50cb18074d6d5bd6efb1e5261b5e6f2c507a467bff7fedecf2d162ed445b08c90b956ef9a4c3fd34b082b4d189adf65a0fbba557e148d75c0688bb858b38413b77dfcfb5f6609086aeb8449eb5da940e01e7162573ba2c28a762991d15c5b06f15c0f0ba8e765da0e108530748adefc660fb099ffdea18099a53f583a4775da3bb27bf9737dc1bbeb164bb69fc2ab8d4e5b5cd4d25157823acf26cc6369dbc67e2000a1b36a71adaae8395705e891f52a8795a58c1b8dbcdc2105c1828c3ab64d0e7ae11be479438738706b50b43e98ccce52b7bace4396df1702851407f88a23c874b7b4fd458784771f1046ab9dade0cf0ff49fbe07ae0edbe7afee95cca6e5595224363f82baf3a29fec2bf7e7cbd410ad3781220ec2ad646e39489503deb4035a4d3a7b96d75a22d1a8725504ff84e7aeae461510f42bc90e9e41076cd0598f8ca4e80a1f80c944dbd4e1a396be3b8144ef2817a49ab52369ffe0c91b13f2faf6261fb6a02a27c76e78c61b864033ff14e868124465575f068625e72d73fe3522cfc6e6a28cca3ce533375acb3e466de52e3dcab25f11b12212145b691d47688e18f9227352efb470b64b2bc1ad5f2b912a98cb7bf0d88a3d8208a8702410eec5518f478a746bf6b9538bc96d7216eba8b9dce234ffdc3c093bac0f3ecc627d139cf741ef7639c09bb7e3561e42bf1124ab48c28b531e252dd2a4f7b5949346b1141292192a1fdd118c7c69a5d5c8776853a07ee73ed5bfbad441f12bbef0a7285eab6ca1f863e8f0820d5951a4f51b3a09dea0cad2d9b3206f18fdd50a38ab44ba1082101739445efaf44778c2d87fe70df8a5d699aed56cf515c1a743367b30385a3ffad0f94aa0927c33a4fe019b93b3cd37693fee79303f885c385eb84cf1a8f50a20e64a75f0ee1f24efcc936c25e3aa9d6b4318c91bc259acfc0f2f7e0b6c1427a55b997da0874cce6b8187627134232666f16d4aad53bc41da8ad255a9bbfe38193b151ab42b3efdca4f4146a7b76da83d57db9c43e174a46fc323bbdab6cd1ec72d3a3798fe1211326a16c69c3a7c04946c96f1f0854ab46f09823f8a6bcae3761a3f03981d1234628b45da14644442c2aa1c01960e43986963db8de2f9d62adfb7f144f3eabede4bb0eac8b6504adb621afd65926c51365960b1faf6517724e1408a9c3f5e3bf8e978356f85a6fcf39242ca9be4ad963ff7d2a851f54750059c2c38a5003df0a11824acb6b9f869c034810349ce8a73cfe3706137c8ec97d1c50e4438c65fc7dcb667c2d38430572c1c531cde41aeacf16705983e0c24fc2db77941e5fcc6494f89cc39b332ae5842e29f758fe9068ddea3bea43ca86670abda4523e510a7d9a18607868ce8de9803c9dcb5a0e2f223a62a299a330b5de3b56fd172223f3be848f6864e2d40917862527bbb69e86c854afd58031ad5fa9e47978fd592db258947478878290ea2c6dd5ee6ab1350b92a54258744b580860a82aee141adcbf4d8b69d27156bde1e0e8bfab58528c7373252dca117f8ac2ef4777e53dabb84794faded71214fab344807d33a864c2a0ce1a75518510393d3adbab4bb65b74e35d8f821843e8be31387bdad30608cac46dc86d9ef45d29cf7d9788b5e3d7bea6e523728487f6cf05e07072abe1971aa58ad5583ba9546795d0f491e570e3105d38f61a5226c4badef74f99d5b6257580d088f31e6bea64393bd68bb4d995a785c1ea52d19bc2ea669927f34cb16b91fae963ab8c7e821f19413d8b241b72d34a6cd5d692f6dc8d00e841795960c78076d678276807f1aae8be1d60c33975ea0f2804dbc27554046f74446bd0f21329d07e7e83732825e05af0f30a3d48832739638231c3b6b248f329d83df4b59d0e69e0f3c3db156c4ca3e4ffa60455d887b5c88cd1b84c4c60b98c149b5cfa8f220e6b9f5c66de9b0848289f84abc90c43f8b6f65feacdc4f96234e304a9eb7014bfafdec550191bc498375c34413f86cfbf9c2c44c08a3a05d7a4c17eb35347f4164da89a4db8619cb3466e8f7ca348d7a8b3b06664dc9bbdb6cdc392075e7c8e9887bcff615a2dcb695d34810a8b5fa1db76376874082bf4068ada6cc801aa03321365476359dded75efb7efee3118f839e055374cdd728bb6b1bdd47e270ca694289051c95f9e6ff87f567a80ab2871686e7a38538f5fcaf233ada3e6ec11fc3aacfc92b9fd54a3435bfdd592062f51bb0c71b1a9f1c267107579226ffe65fd0b4384809b4afe0f04f137dc1d827c5a1bf6bbfefaca5d2384f07c4c2c9f172ad8d970c7c3e88f907d2ca0881a841393a2ca8c62867b547b2812c9b3c83ed2d6ce85b1800cb41793bdc3e977569b2052a6e8b22fa56b540c8664223fd597eef2d397fb5a4c006fccdddd8eda82a7bfb85d09ccebd98a5ee564c7e2882aa99dd4fbd3fd9ee16f21169c03317dfe624e0466ccc6586fe375f108f7a35577f52d5719dac6da7df1c26b1a454fcf4c05c04783d514c3e62acc67926e8009809ba52384ef7d7247a955f5357935027ba384b831f0ca58eb78cb88421dae297bbb02d6f2a199bddaed1a6e16593849c762d6b0869287cc3b64c93d35ed399b20cb5ef48e04a12c7d34fb533ec74bcf8aeeb018ca5e01268d82a97184a5e5c600fdc3bb6bdd9935513fe60d8afb76aad12d0fd3929d8b23d9d73b334b4d35fa1decc0cb8e1b8c132fcb8ad00f4ef754481939473b9db6908da3ff3b167a8bb8da59273517fd31245b2db4c0bba2b9113d41540e66a10ff6789ebc1774291ccd718b1622d0d912e124e474a418a3f7c8a49f3a622ba3bf458825d07bfb91220ce002611992540bdcd90f08dcb2f86bb54fc198b57eb25bb3be6cefb470be42333272634f5ce0da08952b4fb659242f219db5606e3877045cd3499f6950c5441abf884f1e7c4c07e536153bf9f1165a5287415264ad7d89d42fae29ebf3364c344aaf9f7a569f9be226e24bac4e29b0bf95dbeb860ef2adce165cc63bad5fd9d2be76a659df2a9e310b1b649557ee1506ab29e8be2046d45a7b3b98f5c039c9520cae9fe3efec50c66fbf3b2022e4289d2e8d5f3d5b8aa4da857b3cfd86cb3a34bc0c67ea7998244c8eeb068d977815a89b47b60b64191b9718d63a0b7f54349ba2c39f991f70de497ac8c2158a85133b3f47e688ea7665a1e01e5c37c8188be0466214bb2e1e232a2569b9eabd888972b18509565de277fe065e9ad72b15bd40471f8f4e84c0c48f0b610afc0ea2418034538a5e619be78d8a8e7da986c1a6a4243c91993f7474dd8eb28decd0de0b8755b209c78a8c9d579bc02b1d8c468d719c758095c42cb5b7d916397ee1640dce437f71fd0ba1b0160e581d12d142a5f3c56c88246de7143700be3d9ae677dbeaaa1193aab66a9e9f704d4297bd393b9cfd41af33f443e9ad71ad75ec41f19142874a91ec35580a67e3212ad187f697ececa86bb76a86977c392204db3136aa111e1e237f051a0ae2d5ffc4afda668940f79235bda029759e871ac6233e13651b3dde9e16f7683f030316b6582ef9c980442b08484ba04b5f1798e0adf6bcdf18f592ad52ef2c106f372c5f7f71ecd7df7806b3b4c09f380d0db4f01abbdcd75ce40fc72aefd6a023117e5726bae07dcf632ae9c75182a26f14bce4f1351737e09728c0784c38489d4df5be27898de504cc66594ea0d5ca3dcf46460ce448a9092fc8f78c9d60eb1932c60e1862ee6b968bf6a77f5bb2884dac27a251a8a75e6c6f812678b9b070e38ce8dc54dc87b7f8c07c8c98824bd51e3cc5750bb076c959db9e259f64279b37f1ee469076063df99c9974561455832aed85df29a0fb72170b3df76d608ab5dcc02180f318fb3ecf849d9e46382a087287cecb8bd83ea0ef1f87d83171835919779ed8b656abb6704e5c2f900d919c9e2a34f442450554dbd9de19e5fca5de38627fc40f13decd4da3ac9fd61ea646240208bb5262545a103cba99ad5d3fd9ff3b1e4dadb4a2da60fdced55fb79e06abf415e8f06529995b129b9d4a1d8dac71413db9ab7401e5e1984c639876af63639c14e19451b5aa4c02349c844fc7d3734e07723f8865483f281a376295905b0e2c11090a533806c5bf818f601e6f99d01cf95cc93922329a27716bb791aaff1fa071759e2e22367ac2910dda8e4d6e736b02cc4237d7d6497eb08d67086710e5beebac5eb61ede0fbf7d0fdf165bf6ce9a9c1bb1f69d4191cf3df26a36b8dae6f476ac766fc1ca9c93b70d2eeaba45c156c277b1b2d8270298fd0b26c1eda2f08befb0bee02a093bf836e21e9f927cc4f2813bcb28d124a6ce308c327586bfaa6a3ee58fba987d9eeedb5fee161a1f30731ce3b1e57a821579daa22dd58f6f76af37b013672600db05f30ac3419bc8078936ce9eb55fa0761c6e06badc8873780d65c8721ef601c437d2cdd5df5dbddfed978118dc16784e1336273e35bfac38461f961e1a28bf7b8bb61c7e02dc29f052d5b3133328d4c4ff9f509d792ed39f872c7f2aaa02f6842128d45d964766fc36aafe7636d01bdc5a78fbc2b32396db661be075f827eb758dd145f5ccdf56a21ccda3bddc37ce3b3c7549880a988297842d21fb396b9ea456ec1c60ff89fdacacb82ebaaea60b9b043248eab47d57c22a543680df0222aee01eac78bd7743d90fe30b3b1187f294fe941c273c51ea8d23b8060892c66394f96c7c51a5a763e8893122676646d5d782baa10746323302c0e8d6e1331439123fd9c4a585b31a8c60eb9b67b06c71121a02b666d19078a7b2e6b58c4ae12cbb876e0e171c80d3b49e31fe52a95e49d2a837451177c54981d117ae07c0efcbbbeca2d909979136cc33f53ea14f283b2bb59f881aee37bf73f43230b153d8b542e4ad2efc5c38a5fbe594c7651b3f1167839d424e57a6b43ffcff52c1bdcab442ba883c139dc7d419176585b8a191ea42dc25e2472fcf2cfcf499d87fb103a54222d110c638f09cb67dcb9c98bc547f69713f185808782d33bf7c5ba425fb0f058c8acbaa7d774b28eb194fe2ef2312ebc7d6507bbb0743cfe1986b53c68509b2b73218c11e7fe23359ae33fc3bc68ebf58a65457eeb13da1652c5841a30ca3ec7eb56856fc6c222fddb495de2301563cb25712c2dcf9bc36e08c907acad05c48701c8ce10accba1c41df41c916acff7293edc05098a22c72ba0a48591c6a9d75af102853e24b2b7e8e121b8054168a22b395bbc4988d5d134a4a28a7667f048dbc6b96c86e471ab5de0724cc2053eacc480192cad60520c61e143932768a84504432f6d72abc0d94fa847aa8d5ee77dda021a25a7958061711943b1e9c660482cd3a17fafcb19e87bba6c03b2d54f2bb9eadb6f935c7ddd64438c9076b028062048cc8ef4131b21353cad24ec4548b4c0431bed9ab2351e6db80578f9c8f5ce80a5b10f5baa701e127d5ed0ac126817317bc7bae16a18c7ff8b8d6f357482ceb9ac63edbf73fd036a0e6c56cd3afacff52e508293e96dab5e96a1d869b8bc2fea29c423cac459583644ab8ef35c9440930be372816ade0d424526f3edb76d40ef5a9edc7965b57ad7b8cfbc2b462b837f0dc40f53fc674104d1cbdb44af67f1950960899b5389650d37a8a67483ea03c232878796552b58926999ec23c6975ff8370c73c9d6fe76e77f875542775d3b4e20ecf67a73b5afb17804516f9c422e7abc100ee347b7b999dae21ae20bbbf30909b73d4482122609d484af7330a2d8bb6a3668df077f2810d072f78f93ba25556f7d09d50d2c8e1431de235b1c4a770031fc68cd8a2280fdd710e2cf9d8cc661064fee77e1c184e6cdc6624e96abcd2dc7f4c6df7374b42b5c1cf2eef03aba596dd13b04865e6d2ec8352987dffbb4a077c4136edb2e1d47ecb0d0a618ba9207fb7908b7a0d5bfb62ef70c0743661cc2f533ea9a9a29dfd80c51724b59032a3164a38b48870d0763f97f285ce58061ed8debd4df70e552aaea3d0af426c91e69b6b2ce5838ec7afc40911ceb4ce5bc4f7b1a18e6f401b9bfe6a1f7af9cfb8b313abc1f580f4ac80341d4db51bfd27223c10bbe44caafc0f8657ff3ae1013c4aba5dc86b1ad06672e092f6fdf51221878eaad34f361ebf41bb7179150d7378c0acfef9e6aa819a313a7dd5fd8445249a434f3195e5e59e761060f2e17eaac5d7b49ad82c4584678d169ce6e33f8a653fc7fecd1b25c523ade68ba8c0fd4fb732242ede51b4866cc4f4d92be57779062f2f1c2e19f5f52e3404850952c585808967637f37134b9272e138bb546692e1c2d9c5a956039d3faf95026ae580f9c20f487ef35162a36c7488baa3a3a6705d4a9aaa6cf32a5a3bea62cf948b45f9b38cf497ea9c6d8bf31430199c10ca74cf4b697d067a1bdceb8e4a2d92d47f0c5b6f0ecb7a06f46b9d3bb01f2c2f45f8e178c8bfc1d3f4f8c27e50fd7158301f8efd9f982e4803d3ebdb12de01087d7d8c90712050fc6849d1320e4d5bd39589a6cc053ee81e749743dff3d6e7d99ca47d1c7575214a13967ff9f6a248fe70f6a8ec20429158b7eb487626c96f0bb001d959702e41a70b1283469959823180ef1c70b932d22d4c54dd7164f73efc161ecdc73fe15c0d8b17d8785278aa525b41f5df34e016d5c22080712217f72a17b80e3d111c59b6814dcd80daf08d01174dca9a8f38281aee571928a741a97947a1949f408bf0c1697182ba173acb802a831432ef6a74e54e80b3524827f9bf1297659209a16b86474d8568578d3685d580bf0a385b8ace9f44a530c09d7cd3a736a59fee7069019df90d506eefa37b9dbb3d0509f298086a33499352f9c637225c54cfb8869d80c6cc00632f6d8595a2e1f3c2769ac0f41d5ff5497b6b3d15efe2df0a59747de2fd2c33e6d97612aa7a4157df688f860234ab46c6bca8479e0305f685ff394abeb5158a887248629f10bf352c8f12b781fd1c50fe630d601ace06e27ef86b94230b9031a7eb65a88a2aa5a229389d2e9c2b3b3c03006dedffc78169f4566195af8e2450bf5f162be7142de5d34d0e462f51a2cad190a77acefa7a67441946875d1ec4331804055c849dd1c5ee164888e9eac8b19d836cccd7f59ca06a4be961813c74f455bf265e3bd1fa64c95e114d23df9a3295b39fe1e1cdc17121074ec582efc3d2a4a0304039ecb24d432746d2208d230f6befcd49cadd1ce74656d255ae34cfd78457db6d3b818d9fcde4877a45ed9dce6752fad51c844331907a92e83c6cc42cabb336a98e32d2dac33d9fe7dac0b836fa5767a7dca578308ae8061f7784538bf51960b45e47a25078d3677358960395a9c67e49812c7d1b9e26df51cb86249f5a591eaeef179c3794f9a58a8edea81c19dca7808c162500765de3fd4710a939c80dda38a86501ff54931d416d06727ea680e770fceee6e4eef6ee7dffb59928b0841b3a78c6751327ba70ecb443f95f3ff5ee51ba0d96d422f023948be2d01674ac8c11b7429f7bc0109ed5df2abebeb1d9080a15d6134743c7e6f62e103ae75a42013cc969ca196f1c9846c0b952259572fc622e8a41c801fca016605939ad7ef6c771659a4d774a67884d5c71b3804ada297c68d7e43706b26c1bb372bca84847e7b7e1aa0120174678e6ebc7bd8c94f07d0b033a669f9baba2a4d664e5c7a9f5f788398997c36219296454d6954af3a3b85ffd21d4881ce26d87c8525319b81e93f7d37eea51f9465198296cf038dd66389cdad0f837a0779d267c6ed3ca5a7abb8380ba3d77703bf258baad58ee2178ae1019cb42c64d1853bc5e78729133666ba24c6c628f25f185ad8bdb0b329557f2d6553ad4e7f18519d1cb459ee6deb3abcf2fee72e672fdfc98e84ec08517a68cd97ac6ecefd1d685996ba5595e9c715559f50bc6403da0e4bee14de13e3304b8e90619f6df58f5e583453ac26da480dd02fa1ae50fa25f7c2314f8cf76739ffc9ae261acd53be489b40d9ea7ea90cc029e04acb3253b844b92cf68affdb77a72bd0c90e3482ee5fc2666883ddeb1b76fb180a51de04f078082cf8c41daff0208f68b39fd4218554a7d3e603351fd90ca26de7fbdfa2cf97dbc9cfb2786dfe6dfd72198661313354af7bbcf37d366a416b963196db048b0801125cb6bd0ea28e324576205ff14c00eb957661fc0f2928abdb88f9da41c101d851fe384911b3c950ea7d954e0b6415edc0a1acd39c11f160da694aa0dc84c1f47f7e6eeaf3adda7f47fe29d7ade0b9ba73093d8a78ca06d3a10caf419f6da98339e0f54083d8d96fbcff72dce0329c064183801534d420c95b2f624a7154f4f803314d2aed809ee9906ea683f942bdafd2c8a9748ab35d40dec1992b0f4fb5f0711957f4ad825cfb2e4ab0f5868f76162732ad843f2ed34a0f1857750b6798aec150c30381544bb61367ef927a1a245b26d63fe7f95a344bf64bcddd988f3a847f4dc39d1f1bb117ebefaae3fc983aab86ef8cbb0fac00dd1bd9a271893bb94c6e8f4c72f1da275ada2b94ad1509ca00da7a1d7664a03b34a3ad39f366ebe53208a82f0576acedb9e6b1a0a7c0e80bfbdcf2f868aecf8835bf2f3df8fe58635ab4ee831b6abffd7b4760b0aaf7b19053c4536648ddc8a2a845c911f4a4c048e4b56c6085b4fba5066b27f3c5c4f31204d693f67b032ad4fafdfbd10087a792c122793240ff1027c5874f8fe5c69bd9bc6348ab51099f8d4fe9779db967febea85ef8c30709cf5d84cfc40e0b2e304740097cd4efb29a15a39bddefe7c8975ef0f6f02a2de98a17a629bbc62449eb69457bdb8083dc6dac6cb5b9ba615c88777707ee0f23d45a7a60558ad46b25da579bb3f0211e1cf5365ec87fd085ec6f802ba001b5325a5b4f574ad69ce4491ceac2555f54c7fdc0922e668226eecb2822c6d4e6704f502f498ec7609686e8e2438dc19a41506e1ad1e75f94fd1237ed14d489a585c3bf039ffea9617ab32167a7977d031f6045d9bfdb859bcaac8e6992aa28085ba8eb0af7b437e00cb860433db8f487b7119e20f3bdf6d2154955102892e107a2b642086fd4d902412a06e9d1f5ce770fa331568ebc3085266c864b12aa334852756e4d9147efa443ca41416f835d67c7d8c2fcb63b5ac26099025e9af2c2dbc63673b2bd07aea758bddf5ffdb2ac49fd06624d75098333f738281ac5067a4e8fd3db7288e9ec0ea40098a317553c35ee29d2b691aed9f9ebce4671bae8212a105a17f8398e2ff9ac53792c3390c7a24c8a526dd79ca60054bef8c0823987883afaf838b1de5d96e6f5d40fd2e1bf1ca593fa061a0f274a061be0e059fa816df8d8635a6f6fd5965565df5a043b546c42fc895e3eee7f93c21a8ac5e960da345d09770a6c908683f64f2075c26d09cd792e61cddd22064656ce20dd0aec643fad682a4a9fc4007a73df629b682fd10298d783baa6dd7d288a5f0c62f18337518e13b0c5baff0f84342e42e0fc4cfc1a7483e5f2a1c686e57b0f800459830c16feaceae3781ac93102ad853d619c56753cf1a7970ac3642d35f0eb263c7d6a367e891618f5f738b84cddf464da9dc23a5b5e6d6e8ec2949075ba28ccf3698bfcc141e93b2da73e56d6b4617dd22637be6bb1df9e1f41226cf40b54c3e7e7d5f440e78820c368af42e8b555959314e76226d4326c85657e446a99e1e054731589c084ea110b04d0d76e2c7d04ec847ec125a7982fffe472f44117f026f83cc5b05891fd515a1c802dbd6f78f4cf409779906cfc3ccde0016dc2118f0fc34316ecb9718ae8e8de9552a9134fb9d79ca0ad36653862a00aeb7917c5c2e91fbe09d5aaf2fce6179ea3d4f93c5ef355d4c93fd96d1b15fb7dca16011cde3554d7a132cc5f15477fb94ff1543ee0b387e1c12ff3fab9c4104d398aab68b9561225f7a5e91ec082382a912ea4496ca4d707f135789f842d9e308bf1a72c8b0f747bf7fe9051a307a1d1f3bab5b2fb8762246f85005424cd454016f6d1c09ca9a45df2bf49fd8f112da3f4db56cc90dcc03d73b9057f6d2275679586f2fc1de2b9cc814a4e855677bd9448c127fe46b1e318fdcad2c076f352447c50260c7dd1c5cf1e9ddb1a1016c9b67df1c55b4e4e11cbb8a709a8d7c54d496788d16e0a3493e1c004b63f330470555e200e0ad4f885e4a96f0ba91950933f897c9e8b9dbcac91236aade64d91965b467a4d47c7fa6372bd1faa120ac8b671217aeaf24cb1bb2b49c881d30bc6ba649ccbe8cad321095eee9bb5315d8165ff5afc208a8cce9bd3a29a63c41ec95863f064f79f4ba5340b8b595c955361eba7c0ed3f74c2785163e81a686cc0f7deab64557391a31d43bf3265be78b01223fed9ae04823fa5308ac7301e86057d00de7d4598697a1985215fe7e27bff5036f1f50a522f48a42af34ad8d131f3f7ab9c4f3ed7e141561be5422b9014246dea9c8f9adf34d71f249a7c3bc49020828a331272b27d113ff41f066ff5dddc751c51d5e305d9f159f1b8c2040877e91e3af11a6a27d3e4a86ee8d44adf9437b1dc1b8172246cc36341a200fbcb138b395554028b42ed58867ac2fa6a66039fdf187a86fdc6f8a50b309c05f891dc6cb6268e791fb0c2de61b99a51780a5505e942476ff2231cdb5f9e57b76d425e09d89a665cb01732cdb4447ee8247a1e8f71d6da03da4fb6ecb8071513e2f7461455f4ea908777490c019ca4782d1c5967744718ddb90b6fd842b5c5f84f203fb8414cf8fd2a6b43f4be062edd82fb2b47e0622cd726b717301e1916461fc3b8da709893b1f798515580e6ce7e66d4da20a374bb65ba8188bf27afec6b2a2925ba9361deef8286efaf0951cd3d4ec42f24fb7605424bb69eed96200e43368bf58f476fee4d4b947c8b110cd83a0eb66ed31cf845ed6ea24313396b3be17f26f8676918a96df463dc7922e7527f463cb1544f40f177fda36bd56bedfc5625626378c97068e83e813bf024d3faa9c34aa32598b27fc9da94900ce004c23597706fbc9a5e9289ebf93f5133cf7a19530c50206a75777afa0071e436404974d9606559f674a7011eba7dae3497340c19206cb58709dccfa5171119ca30faaa4f19abc5e245ee76f50669dd7df31ea871cd8519cc30b13852cc806a76a355ad0074c5130bac73ee9a0755d3901f10306a5f6544c2e54c51b754ea1265514e64140cc39e713fb4a4548958a38cb53d653320d41016f16468e68e855c6c20b9223743edf01570fc2c1b9c3f239932e09df85d07f0847879c5fde472bb1a79e6f7d32aac8bdbe4d33ed6a119f55f37b31b2229baf7e62ce37ecc0c23c11b37b4c8c6205e25235dd2a148d9bb1fa023f388de39f8e4f83c7b36481005732a4e3ab79d53dd7170d428cc633a0944a2e7af54266932bb10600493ab5e66cc606ffa89ba6418f5a3ce21bafb9b9e5c96449f07d3c0f2ac31a944d1e8de08906f8291e6f325101ebca775cbf6eea4dba5bdc143dae3440d820579fdf8a9883cba93c2fa80b023062adb0bba6f49e4834c648bac9a9459cc2478d8dac2ede59723a68647fc69e98d0e5ecfb0beffbb199f319964ac91869500d0e4bb6d1129d27f5b3a561085fca30f41e731d293e1f6b860dbb84f31daa97dc3ac5b3e70742d2d2834d194f4f9819c4e4c0488de36684b760a7eb23936bcca357243330fd299f37104e7d54622f3edf8982b0a0519de5e4ca6558da45df93424624131686e8bd784fee755e11efefcc9085604b5166623cb9679e7f8f2ab15a8b6f05d19186bec06d40f83e2262ef74ceb70bf9e04c704e5e740021a5d74bb0217d51b9669073dea9e809c8d5505f565eab0d8b1e40397779f605177d9a59bc665e46f454818ec70e0e71f42eb5210cd9892a80df39bba58ccdfcd72e1913e6dd2d5c743d88de15a54fbc9b97b375ed8b9489a0fcea3cb63228013c338d72e71a2660836b5494d62113f3ae86102c3781653bc81a094aaa4cf01924c524eb5828e824a3e3a0638593c9534ed0f1b30f762113d090a9a7b6bb79de94ac2812e004c8353c3fdd40c565f53b13dba0b586288138cbd03d1c1b633e9d75833f3f348ecbca8e59b35ff3cfb5eb51f1cd8f76c5b2b3e3eb4df71380c0a5591e892842fd2786ce6187b65c47279ea7a06313b9cccaecac030726ceeba1b17400cd66105a22fe1d845825994fd6cb962ef024743ce1e5d81da7f0da48383ba9c0ff17baebe7a25f5b01187419d70ebdfa1bab0430755d7b513f379e3297b8f08f0960a21a8ecbba52e2fa23ae26bbda747c7fab052894ebcad0616b6e24db169f9506641cbaad5946dbfc4844b88f88a917c588790af4849c3f6da79cd661d7e7c8152f2f738c6c0660be1b81aece5f47e7b161d707ea88de46eff6d60acc6693ac209021b37e67d5a37433d24805ef1cb519ce895cfe9a5c2a2c472d6508bf4f7b9e5f1e6c38aec4938f9bcc0883601edbfb8bd88bee23f1a353b5298ba9d845ed74ed1048d8fd8a9c35b80029d58a76d0b025f2497805af802f973cbd61bd974aedd3195eab65bfa4b29ac096ed6878cf8a5d9a2ce8f4604754595e3d00fcd1e0d7cdddcfd0ff98197008ba30d6af6ca5d14577c7bc7ce3a1f7e400af7a7258dee5c534ed6d6cee3ee9d327613d14208046a59b18b86790a7cacea2b6e490fda3784989d098296db8095c9836285245e7195bd2f88a2d7b9b0fb41c96001c2d7f6cca2f0499017b1c85005f04e073781c5fe3dfc14f0af7e7906bc8ccf9fe43d7abb20f7812685189e58adf471910d4412031b5d14a7fb2fcf217caec7b49f89c3a8d38d641514166fe152d642218fa302dced56b46a06f67ebcbcc8f39ff1e9c46d876cac3bde2fe1de4bb460a2a4cf7a44addf16867f1221125daff403ec657e2ef86d880df7f8d0454e3af967292510de2565cb1565de959a7fff5b46dda23739526d69301c656910af7fb73cce8d17bda6c73a7e97f590d870cbe9faa887848eb8c037fb6e2bcbdfb788c975689826555b8a885a90bae91fc5bc5fb44c1697a05e216c33efc6f9e0565691c383595574a003f06aca13c5c2c16d60f292895bc379de3e88ee755dec47c9d028e263c472411bf5db4f9763270afce0bb17d489141be4a859d4b7ffe50a41fd9b59d780ff4f15e1f1b5be13b9ae59950b37ef317d49907953b9b74b0086563a6238695e85f6d3f71254625309676ea8de39fdc2308d7ae315dc1f4e1fd6a30cab57660524fdaaa95a90211bca5d987c613a0f5c924ccb9190352ac3ace254200e2aebfcdf0a7547f9a7dc3e2ae4e7779620d5d9258b5a10e6311cce1882c48d5c675778204552bf71c3ad8e4ddbdf9beec815681edb398827af864bffcc40e993662b3bac9c5b8d92f3603dcbf52f92cbf9a60570e30909c05cf950a226d7a23593d888fa2463be8b645b3b3ce6d2cbebb2fb63949b11f1b97e15aa8eca3a62ebc58dde52c4c6071e20ff052dd648b92065a7b3b0904c858c18f26cc72afd00ecc6e5b25991974aba9ad4f3c475b1fcb8a63c87e17ed8a031d079f0539872c0e97ea2c5fde40adbd0fcd888a137dd5ea98251d94e2319be284c6c8d78d47f76090e2208d8546cc8285b7317899addd0fe4b6f55223871e3d7f59b6ab965f2aa118b75759f63f842b7052cbc30268c88e4ef6a57cc0d661bd2609a535d439c85231fe19c5a948995a3b9fc83eeb1c5b0280384fead5969af5011609c9c2f81573c0ab4d654b18ae01283b1d200c5e46788904c43eea790d4dd95c78a6190a33b1a01d923691c498b399094d99ecfdfe233cd0e33bed612d57e09d08ba4c5da2c5115c83651ba94771c5222826d9be0c71038280f2405cf95485afed846d3e29502d0ecdb90b986b6336478556ab716c64a41750835b79ee341c7ceee78130dea5d2e31fd9d7a93c0ff0db9cd0d8de7b805a6c83d38a3f35b91c336c309e0948741769af7d15090b00e34260ee5597865e05dc57b9d985b64437a236e4fe2fa49adb881805134d92f472334780fb77b6b1a3d5b1077e361a9c0901d6ed1c89c2c7003312728ecca1fed50e5aad0fe861d1b6c4be966a977fc104b1ddf23a50b1b213fd1c5f0a031ed568ce820f9d774c5e384ff5f9354d728085c8d65c7d1f24fba3bd5cf2a859fd784b5162e44d661e542c989a5af0d99ebc61add2a46110109054802547acb54064c168ca2d43a13c12f4e7488e47224101e4e50e31aebc127d8db47c6734e507e4566dbd99a8de190b7b399b88f14032f5a32e87ddbe49b658e6df3430ceb70217acfe3bb9dac75bf8cd458a4b87e6877d1561a77c4e865feb62eba99df7e1d2135fa9981767863f0203f1e0dd645b70fc4c2beccab7c8dbd226add5006e6ab9d9fdf0a87e01a3aa6eceee95e1b0928b2af7ed2ddabc2db1f1df47a72250621348402bbf763f5cb3ba12c815a7544893e1deb4388f8bd3c818841250bb848b6ae0c28891211ac3f4f39a2b324e7ee342e19c64905d4b3377170ec0a527e665b50b5b56490002826ce9105f061674ee91640c18c9a29b28e67050a493718e83b414923f9cac743a59825d38e8584d2d985346dc4101eb3ab221ae16eb47ea1934be33fb1ae611fe09448205950032f3082c3b0e70fb22c48fc998b80a10cd7298373149593cc539732d7519f5bdb71a02517da9227e282df8b852c848c1a872335902997c31ae137981fc60b70a6ee1c344f85a093e3f8855568c4d30857f652a5aaee8b5f7bb3c9e5873d3c4483bfc6c1b4557defdbe11864e82d2f3834cc85d741d343a3a3784803b1b398280df38983b4f43da3471bca647bdfe9bb7be12b35c65738572f8e86ab231cc2b032e2c4c01928ea5414e15e3d5ee2b6c6a25709e2b72440ca8c707ff5b2b9976495bb44500eee4bdb53be10d5f14af09a248cea7a95d74818a3be2d4a4c72c149de55719ba3a936fd80f0d088b5f44fbe9c1e14c286ae4a9e3b3d11096ca3985db8bf2c1d97d06eee9ad2ee7855e9e7df10717ad0d73cbf691b41c6c3f6410f81a5046066176c1f83324c56cbf41da6c03f2c3806a5f036c3fd3db3623d8b2f958e7a26a3a6a0a63a0a05988d4c3eb81411c3378ad93e4ba637fa87c245e1301850792cffd41c1bb1d480339f5ebdb92d12755164258f82042027a51c6a7415b99a4ee5f131ccd0d463c281a9dc5a48ee0dc3fdb8e86c57de244a450d5bceb2ab5055f1e239a51ae827210fa531c96cb622c1d141becd9d5f222c537f73148da718d026109655b135c0ff928220f1f5947ffa58c64e015609a03aca2819f69e2ad16b7c89f0ccded1ed7231ad70c944197c4f2c1a284ab4fc64fe26df1d062e16887515f430fc2154de7f8dfba5c5bf59121e7fba37275c8a97cf59b1de195a18d1ba3e7c61a723229acfd00daf4c142e0930bc2a5440da98d6b2fb96d3b6968de6556ab5ceefff70ecb7c909872cbbe192cbc7bbe9591845fdb4665d3dcce3f998dc58d62f4dd924a71e1884f2e65a51d26891a94e2add66b706c03255dda4f214463c916637b7ae18244416b02c799a3130786a7020e607c684c9bc3e8a6451ebb66d3ddcc9cfe4de4ba8c8e319ce05cf1e95f164d12e4ef0d37e7eb478589f575e1569e2c56afe0565ff80996fecdf5111e842da692e74313cfbe6120efec64711d8716dffbf833d76ee3b1e4217359033d5374972bd7e67f80c665945578ebdc8448a08441a1e48d715d981680b6a9237254ea14dfa0c8f7cbcc5f6cb72b6eb9ae6077ad1e7e31376c769559d752d9958dd4e0599ef3e2eb4804cece521fd39872df86e9100fb25201f894a6cf8d51f00bb22ce950b5e8ab50ec24acb80822ad9ae23ac8bcd81afcf88476327ccf140b569c403406062a9821abe6c5aba86a3f8e79add8834ae8609773cc88a82623331b4e5e653f66ba2a3bf979998ca784649ea033f9ad3f3eb4d9138ce5a5816003d95baedc22a00738eb5452708548f7046aa610891e6a324b2f7e9f42a41457dceb93f7497b5d4fa0c59561c451015e5ee72af755ac00689e5565d1648c9eb260f71701717dee8593929d459fcc44ccbda560139b2d2c9e301e6e22e2e32f6c665e0d2a9212eac3150da5de4669c74d3ec641c51df7eef171caf751492da5e5399a624b270e92afce294c8d37e6f47c2faffc51e8795e6c29cedeb003e46ef6119f254d12a21ddb6b1f58c6af71f6272ea87e5a24defe044a28f8554b9822dba72a7d0f40680f5b27511973bf90a1aeaea39f4ce7cd770e8c2e5c3dbb73d1a2483a4d5fec67b136de9a7a66ea61261d5c4412c84fcaf5eefacb7f3fc3d444db8488f42fa88f737fb90a5545bedc54660e5ed7c654c7b17aaa8ec17ffc812d492d370074f240bbce3e876e1cd51e3702baac8ab8b1a28a3799017d7a583fb30046f2a8a37b01df962029f0e963e57648f16cdc66a17090e7c68c79441faaaad95c10506bde4cff21484cbfe4de4c8c0a1406491655b9de87f889ca0b455cc7d086719c1bd687bab3f83aa6d5426472b1b249c25b14a27fa4af619d5c2e7d9be298ab92e88b9256b1884e08f3b5c1098f0316bd54b16666bbf5f106c2cf20c93ce7df4b0f6c11a070fe1bdb0de0afb005e1e8b86f1c0d78193e284d7f74cb66142c9443e8e6d2fa9e479ec62b019a568b997294d20c7008c3baad59ac8d63bfaab7f57829881626e694fede6c39a049b79cbccc9ba09d17cc7488dabd1fadda44a7502a1b451e7d766c03d6a8fa30694311e82a287ad3e056117261ec6b474a4659c7b6e05fa04fd6ac28ef5e642cd59eeacf826e749b3720d221ffee626aff21c6fb07780b0979165b35a0b4ce3ae4d7b8964e99a7668e3620e919ca403ab9cdcbbd4fbe86e726d3e47afca68f12eae2be18ec0e1d4dfbdbb0cbc5aa28b6365f2428bf4b964033ddf1976beb5bc51f1536396a795e0eef2ee3049a21bceb6e048e5855e211931bf8bf06027e0c723db8db15d4abc5a23ecbacd002099054ec658bb1324a7e48a6c8f4c4b2aa2c7bedb4166f8d08051b96f208fcb907225cfc99ed93c0372541a280136d60120e26a659bbf74b6d385b49cd5397dabb3973f63be54e2e507c29d453fba45c2b6d2b6e2a43913aede4888e8cd98b990a83a8babd400adb24b5fc1fd663035a8fb6ba86614bb3b790f0fdbeac638483956f54d113fa69458aaf132c87c3637b679049772fda0e07d95b55e566ac4566cc7e00a4e4dd97799325921355eece21201d7500f90afcb1169d98ada5a47961b6d4c577b03f96536b30e1ddd5461c9015f76c6f08dd25d7ea5790f5d8c3dc91e77f8cbf7314ea51178f2df8cc91456b35e0333e8b0e15d4ce36b38f78d962047848c3009942250052fac42e854dc8306f9c1f884f990cff80fb86a7dd4ce2b21b8b7abdd413b91419fd8db7ea4bd4777e6de9243688a1b3c3dff43967af2de23b8963769f54a27ee894bc52f8301114811a178f3a2f226de842ee4e1aa178ba888a24d8b49089e56fa89516096ccb7a06491611da9dc4c43985bc3cd65b008fb79889280f1b06fd7f14c29039de5b4df77902c9af5939a16b75cdc54a28be5aea36f14ac68be29007e0da539fa42e8e58b0c6eb181f81b22b061aae54ffe353a646d0312504b4667998a320fb59342a915fe5074267726fa5e9da08f7733fd18725abe96ed6142d869db0150a998aa78bbb734b598406bfbe50c0ce3c3127a47c6a63fd69cd07404ebe97e5e3a203eb736076d427882169fd0fa32c9ebb8d5e796ae16d0880348accc4016433e66c505fc48b94324d322c335f7280be16aa755d3a8b38786968c4b2009991e3cc2e7658a48c84a2d8a80bdcda7e71843ce3761b40ad72120e773c799acc8150e9bbfadc65c6a9307f453c2412805843122ca18ed60f21510ff2811b25b8d3e9e39424877c5aca24075317ccb4060f2443122609fd38cdb86f0b84138a0345374085d6b5341bc5d83481e766f850daf3313a194443d17c2750fa334ebeb858c1be5a49aa14d03f57b6f154f62756595fa9de831307b7b0f4fe0a119521f456ce43a9295c91ea4be9ab20a6e09eca6129bce0e14676c9f7b07ada373df0803cf30f396c8e58e939e41fe89c16e12de5a5b0b0f3c5027446f87225bbf72cb781663f031606df287ad59c4ba610ad01147558e312d82ed58ab06f2236566dc115bb719ceec2262c540303286293b3ed09928eee45d3767fbfc4b105af8e8389fc39abf75ea1b6d2a4e81f1e61bf909630777e79612c7f5b614504611193aa4b3185705dd5765f4ef2e1b53b27a37dbb287196f08d31391c816ef131c1c893b478ea85dd7db3be8dad4ffd63d0bd3576114412b9d016873954c3693fa117cc30b4e1583d149356e7b1842818f2ed7164ec3f93672a29e0d6d62c93c886fac2236107174755adfd6487282be37dc0b9d04323eedf1c3362afe8b7bb0390238195e301080f893802bc367642aec8e632722da24b0324438dc1eb3e6438c9f1dae8bb13543becf10ba19df6df0da686afc809fec8872b81249bad5a5e96252b7f5703b89f3809893117fd8dbf13f21db089c4d23308a06cf666941bb2ac204d3d5ec68cb12bc89ace0b22637918ad01dbd8d6be605bbb172487f09f30c45800203f05cdd84d2e8c9d64c7b3f7be4753671a794c9de0622a3ac0de8f591bef13b10edfb0f9ab4f0c02d4cccdf2663cb5c67258c69949390356441cac37e8ae71e9ceff01829c6250f176802c23f451893b98055b82424899bbddd8d6d3e3e3e3ce181e95f7ae38b0954e369d19ce0872be83c1f5bc0961319cd22ff59db78b8789809f6c6bb55c736c33c65ab18b0ec0f469ac4a4a800c52f2dc8eb37ba1c1525de3641fb7819bad53d389679990b79464f578fd56f14ef4f35abe85f395f482f51e7b0e86ce5761828530bf7e2f24d4d7c1f8a34613b46ec16948b6450ca558280a0bb72b8744afc749207822d078b4044e6eade240c33570c23b58b0c2e0929ff25b4ef4f05e87d997f055bdf36dd075e426ffacf564482f0d84bd8a07431ec7ff71208371a747e346ca0c321a705dc835a49cbd6e86f85add4435bb0f0fef6edb80360d107ff11ccc23cf745a0184d97b000d6270e4a42dfb88e0e1d9dffc8f006912201aedd953ce5ad2f72d1a023fe5681bfd93e9bcd4c798d088290615d0e60ec44dbe2a701d3097c95241f128ab87e18195b56a900d54af5f56e646a4a70500f9960f868b7238659fc0b9a73fcd8fb3ebf3e7f6ba07f1d3d05f4cfcf2104fe3161ea087a6f7221cebecd8aa0d7fddc2e552cd1ced3dbe6ef8e2c010076f94ad99cd4a1b2b6f176d2517ec3c8b5521c91fffa1fe3f237920a1b69073f1aef220faec9fe4328eca51167bdc563055ab6eca224578e479c26206fb245824b48c0ace4cdddc4ccd6db112f92d0f7fc59f3a826d32fcab528e3829fe65a02ab8469ad343c0d80137923d7498022ae55fd145370663b0a2fe064d3ce4e96581e2f82849c91a6681f86b2f52da8e3218a937f762c13493291a3fc43185f416e482710abf5a4b30f2280bf189de1d3598b9f23a99b6975886d093be0740d8ebc10d57f79ea055b9c68770e78baf4e70810708adf9d0714515fe0333ad6504b8f3b7f4ead3b275b68c12b986b0b8de098cfdc18f8d022bc6f533f0519d1484023a29cc9272838fe6565d5258b2cade510623cd9b8298f7135f5bb9c50110465b1a1c3f7002ed0ec73d7cec62ec0f380e30f2022eae0bfafdd2c80a64ee95da2689d2bc4a3089195ee3ae59678e580cc85816508180ddb47255b07480321c017cfb35431b187b79d55b7170bb51968e3821784da4a4f0bbe6d949787484ab2afa7908d5447954d19fb737fec263113d5dbfceb1c9c66241845a68d8d49dab8568dc42a0d92da253e9814c9843777ee9250ef1d5915c6283da8499280bd372e7f769288b8dd3a19c1e050c5b1cf0d7394e0b9cd7ad09a173bc33ac95b24cf17cce6fe059557d2fe472ce053a4cc6f7481d0205685849cbaed21c0a645728f334ca06a6bf3dcbe272247e97601966e3b190fb55573d67a97120bacb8cf0ee81b7a15cba332c54a9a147c487a56a03997c981c93e93e0ac409b35b94a8bee528d836c9628338324a36e18b53085e4980f47bbf38825fb459b26b042713621e66b45d6f8a80938ab449d08fd4249b6d035b5dc4bd13f8efb71662b884265a5303e3320198474265fb9ee62d5783ec3d3bc8a9c5391a258360665a1795dc8e1d954a1b295e553dd68adc085b41e1b79d361fd8c47c3ed29d7b74ee4f7c19ec94849dd2a21739221460d8f39fcf2b17cff07d5b8277778c9d4c4d4e540dd62e44dd30bfad85dcef6972dd6677a460809b4aaee53dc952eca484f225148e03f92647fa0ccd9dfe021ba53ec41a494361729fc41162163fad733978392498bcf8043774246952c488d86003567da057fe48915dd1e1ad280f5d4c66ce5185f0c803aee6d7a79115dc33f298b96491fac6b28d6050c415f7cd80f1a085a64a42673fad346839a42fc2e167d6bda1a498b0b458d15bf505d96ca572db8c2b7d50ef8c5ae85d79145f57fb64b3a168729154cc1095acdde8394a119e29156952486b542974a3656dd5a478bf1c836ea9330e4ce8910d71948d4fd81c685a36b259c4320398f4e449d5dafbb093cd44ccc14354320624be7593f0f729f0ba686f71ada7bb4f1db712f91365ceb594b022f8bdc73483444cca5d6be7827b82ab1b3669dc6388496ce7645ebc894964e2a323d871e32b37edf2935e9cf9d12e4ddda4d1f7ab6fe305ba77a44e2f94648390103009471b9c3fdb3307360427b2f4e03b9419d07d76cd2ab17795297a0d03c746bf267bd1033fe8aeee0d4b1557e7902d19735fb2f2deee82d0fbca4f241036aa30edba6d6c4d0a26aebe869b3a97083f2dc7e734eb806305b6e38a2d8ed8f16815fa54bcf87a94a99217a975052cb8aaeff677b96862823e4ff03172d72d370daf23fbfd40cda2eac2236e0c1efbb5168de3b9c0e39b1d3f33a05ec2a39e6b8a90aafef8c791bcfe486ab371d2c11224d9f15c02bea9e649631dd9f8d4392d8be4a9ebf396c194d4125d3ed758ecb8557fb827abac463720297f14660f7cf69e9776cf406f921b19c87462619e415b2fa27acf2c6a2a9521b4c2e3961e35775b803bb90aef8203ea4b80420509bcb9c91620a84e88c16dcd9abe132c57fc69d2e5ad923bc5466e7130c1ff4e09e5f6650acc48f8cd2773de78057a8aefe5c28d8bd003e0aa1b7583e02c15fbd350cc327f18cf3674f815fa87ebde814cdf68bddd151cabe01b10bcdceee94a74816af217ca1418aa1f53ff3a9c4a99348d4a4fb92d3dffcbeaee9ea5e277cb34ec0069b35ab9bdced83dd693fc8c4a4c0418880c998586d4d0a26f7166974d36684e90448e11437b2e7f25cc275d71b623eb43d45850754814cf99bcb6b1285c12e6d9d8e2693860494a777bb0e8e46146949e3dadfa835971e0cd8794f1555235eab85821ae03aa4204c44682a3911dc1f2486fca3a40fc375c4f35e0cea4cc5bc345f1d4eaa45967cc994bcf104098a0169ffb0ae57a9ce8d00e1c912c373b937126606ec8376261ea51fc769cdcd0d26c01b446421ab71c897ec7ac6f9507b213721f7b39416b92dcce495fef69e80dc54ec1960370e4a2588034bc235336cb79b2465881e01f1c53b24a24df893837d62bfd2897218dadaa10326aab1e2ebce8221572419a6f9dd1b4cce06d3cf42ab10e6b1edc629ad128a84b260cc275ce7f32542dd8d7f03de0c35f2f0d9e9730476e613ce7f1489d0f8e287687c5e4a3695139837af77908d8a25647c3eb4b713fcba839a9f1e304a0067c279254ab3155ba3cfd85c6e093b8c86503cd8a1f23c73f92b9a1a3a568deb3d8b60612cbe7ac5191dd7906249e7c8f2da84d5ffbdf5a14ec1f9cd716f2f2e7032c1b37caecd724344ca87840d6fc51403834d96771727ca30c75d043fa8eedb28c8419a3b837927aff171d10d476af4db0a7f781e027f779c5738042d349116c0f87537895957ace179e43a68ac4a2a816b6c5fae3234ac622ff7e8e63e1e2caa2289978755685471cfe854e4d395aefd99a66a688d265115af31c72f555e162ce8209588fe427639a70588a46d309ff2dc7898cc51fe52279450f5e0ef199199fa6ba8ac47c51177684fc435c79e33c9df606c823deb8b938efe0b7488acb1f4b133a8e81c4f07c01d3cd58f76738cd9e110a3095111f8cbc38d136f568da588b4d38c6c8a519675b12cff99290690e9408c63e5594d87a6910e304ce715ded62f5d1e0dfd7c3a4f6698eabadcc9f06aa266ce83aa7e71d04342adad53d72e7a9047cb8433e9095b51756662995c2c5e3808cb57cb5ee602be55b49595c85b7c503e7051e1deeddaf52eac3b29c6e40aae64be4395c881cecfa2233fca89dac502dd93366bc21987ac76478f6dbee5ed2def4dd14ee96ef4713d57dc86706128195d844c4fddbf1166f3d94210df714d9bf2afbfc8c995cb6600a7743abe77b07b9f90616ceead996b53e4afb320c450c2d08a5812180565b4f1f01a368d301e719b2c5f07c5e93411e257613931af6742e163b90cfeb3f87eb96806e79b19e09581ff16098c06a8e33b383551bfe03a1ddc805966e839f7226394dec54af4084d2758273e85f762acd8ccf07d80f6bc7215583c611d802d96fd6eb7cf4131476535712a649e683f79884c11cd4d15eb8d1cfd0b48c9cee3623cadd86878f3e0059a046b2c5927f48345cdf4cd2f5e056ab1a1fafd4476cee44edf982c658ff5798d4d1f0bba39c99db9268c03724c7d9d1e07520c95fd2cdb81d505755f133761699541a152d298feeb8424f282f1c5e758814e9055a5ef6a067b2f7bf38391e8c898eca9c0959ad49ac38e5f5beceefb76901cdd1fbe9b59568b898583da0b676f1d3a9ef940c2465befdbb1174cdad608a025c20c6402f5c1fc8403271da184729a2974eaa42f7f8803ff317744d0f70e71a79d30c9095fb2c60a043ef52c720617a80e0ffafc3809b9386642fc9de889d05f93232530596a6da1a4646fa26788870f305e586817ce700d90187160ef625417439a9030efa2be2e6b4326c650580b887be3d31aceea0baa3a655b0459a6ed6ae04c92dc17797d68d608f4294fa2e0eafb718c19e90397da7f396e4a47bca1fac82591898af6e26f8040a47f830cde7955203c847fb0e32398820479fcf4191514aa5bc44ad3a9fcab6a369df25494c58a1b29b4685b0a7ecf3d3fe745d61dbe1568f59c02287a58e5732fbc09d5a2783a9194d22da4f5f692ad57a964a88c4fe06d4a14725f44e5e41599769801e919035d9092cbadc5b241d188f710537708c6bbfb3421a6d68ac093a8cbcf5802f5312fc9a0cd5b090e943602a7b0c0903b75d8d8047a0a375ad675a1155ca2e0403ce7068adc305b0db474015c9ea4f75cd787d2b660b51b68fa9ba41bb2e29d566eb5ef56599b7a7c07671eaf6864fd007bb05068a7de04eece7dfe3b300a815956598077135b4ca3fdf9799fb193f984ee41580846196d08de37f9833ac84a75346f7d598ac66dfd53911c07ecf2ea983ad81e44697592856cc449691dfee0a51efe5e589c343d7ef8bf61b663c9fba45c215d99a4f91a8a0c387304a9186f6cb8c03939683547b5de04cfce330acca9b61f016fa7bfcebfb29d04e193a76818de6718540bc19905e3431586b77f4ef28bc4f8f61a87a189eaeddeb1047c1fdc1e07d873632dcf9db64e88cdd8c81e553a2583d5c57beb2ab44f4c4ec4c41b5b98edc8b6e6f88f160d0af0e2dedc7f9ed60e6a2aca8dd1fa8a7f51f53d326d306c7694434a07922926c550b79a94a12ff5404586b0b92a6d54015cc672066064a23e220a96358061e1f356d9c650ab5f91cd6c5056e897ceb0f9463c7f402cad86a68cde2a0981301ba7e4ad8148154bbbbe4d69f056cbbc1c6361430a2f12a8685da4b4e496c1d35a48113341bb30307dbfd6449c688507d64e0a13453e5b1701b9d12a82eadca1cf149738787c3dee1f1fb7d6311c3947628a3c1aaa3090c29edb6b65f8fba57b836f92a41feb7ec85489e64113a014ba89feca4011e76635e0d84b05bc1b5a9d1e9683b25067a1de92ef824f696ebf5d38be48a13799e7b4e3dd72023b8763cf9f178290509a5a78fdfa6097c83f1fc1101cceeb0999117bf8370ea8c0f5e313b2e2d74e7714c3e4ab8e642950c7aa5f736411e4aca857e51d7000806b88f87f8f593b547e9b8311e91a325372cd5c87cf7a769cdb04572616dcbe33f1116397d10aa1abd7d4639dd18b730a98c7fbe24314aec1c6acf2bdd4f4578e491f252a9127d4e8c65feb65973b168225d35316e17c117234c016f6ff5d2a2a1f707251ac20fa8acdba42a19078d39c0af90f12b599d56ff56a467e6b04016e53fa6ce2a6b8fe1c30792c29461057b2e0511af5b44980bafd8ea33e46e490867e55f387e0b07da4a23f26678c167a7e923b5b053556b417d71e3a50141cd603608c84be1405960f083bfcbcadc8e391dfcc58731b54913b6e3923a3d1373410faaea2de67236d49277b8afe40c50f25c01ae6c6fddb6ceb8a2e7f330a8411d3bb7b120d3c823242428ba32f6be7a763480abea60bbadab0d603ca5745ce7b476723bc1ed7261a75ac0c4c1ef7e1b767eb8fd705397d8937b3cc7d2f6cf467d8693a000c78443604db7ae53a9cba2003f86e93f94c58b8ddae91341b0f9521e58178294d918d6cc82e1c6f0962658dcb4e956a1ef1ab227be6b2c35ad8043456d6578a30a6371b25f4163c4be5885e14d02eac273307604c1e32e61d18dae06fae453cd2b0173aa05f8ce79484bc94fc85cc0ef845dd7da8d9432964c0fa166a0c000744f126ca644ba1063190d859a857c467b574c49bcaec684ffe1bd4b3bced3fa9dc0ad794631a8fc41af72f81b1fe7feaaeb695f9f907e09d06ce26f3174de7137fd95f6fee57c6d3fc2f3e51b084620485bed11cccb158f2dfd60048df259ba17867da19e047f25449cc14b30223ddf389760c81348a86af345d1ba6dd619f4b638f23caf2fe7ed1df3be138b2f722eb045af03ad23c314a87dbf76132b91f5147662472a8b838e4dafebe3fb20df50d6cbc26780b08cece3bc8e52cea247e90204e3e09a83a419dadf52cca841b8103d378469c09b35ea2abb01a517c8cc8c2ea8ce5a80d927b35f5636d6cf001dc27650b9ba175772295ba11268535403e49dd8d2233e99a31ed1aaaa0fe2c0c124e7a87b2977c112ac561b30286815a94ab7e8f11385fb5627bc1781023dc6455529e2fe6dfd3cf25c9ddeabd8ceed0ce5299f0c977e808cf25d4b8f44d8be0503aa70c665cee71cd18bc1e3dbdbb09d159a7e406edbadb5f841ca4b9282a0f78d6039636e923bafccee062846d4041608ffff1257209a94a213596bb416fc95f5be1a2e8659453ac31bc66694e5df55accf00573716d0189747cea08b818f7c4d60632cbc6c4a6925f5f0b43ee6ac2de20a70f8828175806abb3149ae01ade04093dae58d89901fe2b1ed9c4fe8d4a8a265312dc3e05a21966ddc5b6aec16fefa48dcc6d51e5860a86c82af0100e68457ea9b9278fac4d1ea47f49b52a83e7a616c8d0c2e71a2ab20e7c1c8fe136aa2084e1218489fa513be5fe9eaff48314f946673bfc7a6ac1fc2eb44061354cd258405f909c0fb0476cda6d8c9407d5293150523f4dee40d8fb021d4fa5d3b8acdd72c81c776383017d1b7ad7ca8128131644c7ae14aaddb296516ef78ec2d4269ca9bae2282eea599bd23fd617e6dd9097a745ddb2459697a9617f852c4cb4e8bbec983a1b799a51cbf6d551564d8fcf3faa58aaf2acb734e52c94dc0c05402858f360303ac3e99aa6ce7a9e82672941aca5b9a306d745f4161b95e12cfaaaaa26ae8c1fbdc1c4eb6194864a59bd45ed41d64ff89bfbf644dd80647a0ed7412326015a39954f190cb06b52e479f161612a58f288dc0147fcf85ba1fe4151fd0ea14ab210a1882defd9bc77f96ee06c7fa634446205a7822fffee1983a3e853aefe6bdf8d1b4859880439a26be3a2b3fe6f9c171477c55a5cf5982d32694713c2e4303b143b6ae703bc2df76a75595273fa96f6654691ec3d757097f34c6fd239480386e7a6440550317dea1228f9cd560314d4d796f44da59c820d7baba415407a083d1f746d5c94529f61f91b359f7126c2406d9edf6ff0da98de20041918cfaa046f2291b6f175701d672479f0ee68552cc48e1ee26f39125e7be70745d01b8d831600d5e67528a81dc98bc32bc52f76ae45429dc809d0dfffb9bb583879df79e1a9c596ff02f4d9e2178f955f6d245c64c4591c6f4d76d4fb81098faf56920b159ff5e88e5546615085f51b708a58e245d2fe6628a5a674792367c274c4b8a6f9fa49117b4b1984373a9ffc6899483b8998bbca41da0de1efb9980e72971018372ea08f17c360b719c7d13340ad101b1d21a1d06810fa5ef45383d251746f85cc7d0c0556b2b78dd76ca3c7737e5e2338ff01fdfb38a8f6432e09a3a8e303f62c02c4c24889f7dbf21149466be2170bd4d580f3463a3196ccc24464e1cc4e77b07d011b09b597dc1dcb48835849e04b546a30f3ca2d46d904ed592004a9e6920d9206e86bbd2d42dbe7f64887b027860f05a8285fe763727ed876d8905802b6b249b315908df3a4db2b60a485e45aa0d68ed688ca3ead3f693c151749aad550f20b045a249a8be6d247e888758b4acea6da54bac1af57e5799755844bfd9c2d5834877c5b6e942ede15a189694b4795ba428af55f4d821547c489cf70ed7d22fc911c96045b0a3333e4bccaa3e68a418c52120955a6ceffa8f5d43bfe1b25bd74de3ebf1e963e32ae309ec26e1a24272df2bb69a6f1bb5c56d85792d10696a778fa7f33b6d05ddc3ba533ee7e9a685ee9c5790723651fba6320d38ad17649d99b0a39f96daf237850bd5463137b4b0b6d50a3003462d20d1c6768c0513948f98bb8eaa476a5aeb00ad8bb3773464b0080d2ae6bf28e8844926eeb563ddecdf956e52c61236456532175f51850eb6e852e4f4598f8209ae1b31dcfe6e39ad7554602df5694d988775309913079dc43e189c4329511429475afa6746f3b1acb8d8e95788b3ca29085a6f18eac256ea979ace6ffd9924a049de9864b4ff9c2b74eba00bcb2b15bbbf180739f05e716bbd83ddfe20ff33b0256867b27ea6e7b6566dd28a2d8676019153c3fdccae4a4c990117ae203b6521fe5f91cf469eed7cde5a63644e4cc41540c2d8bc1e2efdd952c6c46b11aa8cb1e6b5be405d9e15c5229d0c494974a026c7a843a5bdbfca74f41075448ba3e84e0c06667577e97ceabb3a687fe21f0eb54aa5d13a3157038dbffdad4edb13d58c0191ec04358e580d2de44d0f97b3f2912996fdf02e11a7ffa28002adcab9aea3bcbcb3d7bca6d85ec575d246ecb7374cc8bbc109ed6776d8a3f6e60289334ec9a86e2ffc615a9192a2e6853c330838b02c80b8b440fd86d3e8d990dc7f00dfee4e1e8c4fd3288d68a0a065de62e03f2e92c8b9cd3aa84cf20e84fd0d5286c414302c9e1e6bbba1130d782a3e98555507d494cf2289dbf17e85cd2a50deb86db2ee43e3a64dc715358de838d7df248d94bc205a73ebbc602c75ee8e1f030353570d5e26df385129b4e4346c23b89b97774391151fb4203ef4660f5289bd89fd4499d6f6bf52ac8e593bdfda72f822e7f201aa4d2cc09e8cd7050c186ec8ad010da9cfdee369b256f1532b64290db520abe4cba5d6b870c96da62249a79bf42f78bfdc03e29b0f990fc3a29d99e3d8ed612eb12a2cf7b95ecf2ef81f0f36f1bf86f7dcd1c9ec910a8a59877dfcbacb9844b11aeeab6430e23e2e4c881d8a15a00c390f7d62868095d2d40818ece418002586b827b77b262d70dca7d915172e7646934d94c8820cd95a97eca8e2ecdce3755e3c8ad9b748eeee52939fdc60bb22daf33abab3b56fc336a9dcd06d103d97b65514d7f500b8575537518314190e8af7dcce64139164187da2b9e8e5352f7aed6e8cbacd586a779d31976b8a970b448ee28046027376d731505c8bc8250bbbbcbf6e2bd07b2082da54588e6c9e11b5ac8a5aecb2cdfdf5042b6bcaee63a3449276376d8971e906881fceea0797668e019839b46058f752e1a5208091c6c7269f5a6e98bb31646ad89726a6b88b97b8e471afdc6dc4904f10e1ff26823da9077e54ca9cb826f43df5901a7d2aa6ba4ff68f613b25378ca36ed85fd8bafbb1af20900c4f2d4cc18b697b6c0d93c4c914b07a0eb48c6d1431be2318efb3ff842c65336a94ff12ad712cde74b8a8bc95c57a617707730d32fabb395af470dc10c72bbff86db3988950282e2700f32da8eb8cc5b8a5b034c47eb57e54d46918e02484c0a71ee63ca531ab47afccbfb89df21b8a58bae2fa533fd05f2ebddeea4e6f8a3fa05aa117f67ef63ce9f225b86279d4ab8b0587a595d924bb6fbe518cacbb1992ac02e332d266385efd8eaeb300632e8535e5b6f767546139e5afb451c7736a581049898bfc0e4ac086e7d93a5785028d6c1b244dfc12dc880b842b6b2534e40b2609294a69557dec514c9d27462a85da1e35381becb47ffbc795a89c563ff7403a553f8b9e96ac28ed2bc074218272f69dcd4dc5cbcd3269e0f919d1b3967c9f7fe38590aac62e886675cd8c26c9b4a89567d0d225daca4f5014c614b9cc4ad31c49a69e45987981ea9a95e5afa3313fdcc5ee80b907f7f6c9d1dd6796c9238e78daf871bf40cea4795c51cc681597c01f1699d507303bd5204524e1508c98257c10ce7f0f324f4c40e7baea06973a017df6e75503bd9dadb1c293e676614ea96e5eb63c12509666afd5b3b5ead4a7e269f583e90f3423229d434a2efb1042893df8dec61b16c731d6ebb803f973ea56d34b3983f2f723666234e749791b31ab5e937d07e9c76a8688c8c2aaf28a6bc238e1edf7abafed7ec152ba10d43f35f01ccc19b63118046f4d82688b4092554f8b192b59845f09ae305d44d99bd77445239b79549f31dda02a895000004cefb16b739b4b81bc511c3a6fac489e12a283d65b17168e5582d044ed77df9e8b440381c689046bdf85a3e4f7c77e5e062566b2e8470b0a6cb525522a4e470fb7e26fc79b688d8ebaf8d8f82c4e526f046669cdbd65405f62d0e95bf3de0aa5d0adbcd2c5c1dbd214ad218baa92a1fdeadc695a033e57b31d51656e35a963e72198826ffe8bf5f7658d7513874e7b28b7d2ea2a91fd577115526da2aead93cf7367ea00008e67e88d1241ab92c99b9d3e5422f01571d62020af1c4d6a7cce558ff99d1e63073fc2024bf2c77c1924cba75700bd47bd70d947d0b9d43985ad27e2c3d8694db649a0b3a657454552077d4c52ef0f632da5c6de59e305064c2e273e986bfa7c9de608fa69a9e6fb46824272d4011890810342a602fe4f36c0dcee5abd9a24917f0bb4fb6114dc88bf347321bee25d45de5228e655febf29b35213d417567c58c69d7e1a0db8c81e37379377fe2ee4035b31cd7189110e1f4094fce617323982237a3990d5d7c12489d275e97db125ac2464db3625ceaf8d94974211986dd4d15572ae4417d428675edb28a2c086ffdfbe766337ca00fad20aa6cb3f1497d486c5b891daa049a724223235131da76cba295dc808390dd9577b88c1b06ce7c91579875a97f641e9c60771d7ce17c4bf8b6db54dab6fdabf13f033d5124f8ec86b66c6cdef97184a512faa687c8fd785bbf176982e2b96ba3923b8384abd8fb3e70dfb34f3ade18c14007b7345f48424a8c0998ad2df50908ecab315eee27d68a99fd2de42f2eb52675c61d1ddef05d7a2739d8cc21f161732db4a3ccb0e2e48ce60d424284567922404bd62a43aba8e1b63f4072c529a2307184c8874c5f53b41940fe46f57ca3bd13b764db08067a3c55f8e06c32e6ab679b366f56704c35f0e01a60ae38461382a7f867d3279953bb23fe97a15e1a02429d81b5e9a429e7a732048b0517505986edc7fc46cc30a41af4976f8f07c97aec5982cff82338350ad7e0bd4910e91a278a607057f81b2a8313949be2a0f1d5f29839db9f2ee82609d0bbcb36eeaddf7d1277bf40f3297fc38e859b02c271543c22bb18e577e1828066d77faf9f14f663036126f010cd6c211c3c394b6bd66428c603c5cc9d56507d89edf299ec08669c930504913be7637325ccc9911cd725d5d1d6b39ac51ea11afe814ba3c9ead37761b161928a9f0606e967d2529704ac801a2b8182337bf7e97cf101746658868f04f3e10da1df9c1fa2be6c83a98d721fd30e4ed98fa12d5dacf57d938aaad5301ba2b00dec1e521c2be05166957d80f67ac65d4ce98af7bca68de848a8b15659f9d379907911aa47722e47aeba0863a72525c372e3cdc627071c322c6fe98564c9d433907a8e3dd1b16a7e2fb25bd46d22f90dfa4de2a4ff30bd7ed2a3132b843ecdefc4a7bbb8e801bf282842df3e9bc32ae6c502f3241a6db8d4f688c51011dc389fbaabecbf4b57768079ae49c79c0633da78f8b31db2e2f5c91f5bcc563ad581909bdb507bf1d9c100f1b49e6695e65ec8186f12293fa23124a888f77d1b8a834843a85b68cdd95e8deaf11f1437168622bdced047308a94fe62b873399ccf23b5f250702e68c9d4fce90b6f65c15af69e1b1856daf1e9ed003d94efa05b8c0b9b212030ac1f37eb1cc8ec7924bcf541514c9a67a604c94e396fe1ced0263cda7d0c464e72fc14453e79f618b5e0d4ef71f5a2f608c9a02426d2ff5882e622727506318e86fde23a717f2cc8acee17d92dd388db6c69b6e95ccc7c0f7f7f02ebd3666049f7bfa56ce245080a7bb56b278d094c579ac91e6ae7517aeec5ec3da7b55490fd793e47859f24b7365e6095678b89ade51cd2abfc273823222940d9da3387684ab0a8fd94411cc18983c7f42ff6d667977a6b770bf36dd5547cd7c19426318c970a0e31dc3b2ec3b110653c491c3ab6749b5123d1907ad376198a01cbdf878d64e1103452e1b21be3e625247cc19c612e114bd77064c35e2a03c6dcc7f32ce0f07e5afe98fafaa5588911eb711e50b13bd9e3c7a8b54427e6da9fea842909c98d2971e3d6072e0f97066d5aa73012b7756209493731eb485aeb5b52334b7143d23e108d638fdd1c14ae0e35786ca510234fc5c8bf01b60aa7793e92945f9c5a6b5a5d9bf13097a7d0f0eb51a28f65cd598c052db78b6763c4dbf9f82b46aff10c05963b9a48de2f6d14f27ee2fdb0664486e3d548ee045b305290029eba3fe54a20ff3355ce61b0499ff34ab7adbbfaef990cf39f84704aad36259026667f9ca597dc9ff0000e3f78b56bb784d2b4150d8fa8ec80d7576baa0288eb87e67867f092139a4c82b60f0fa16e3d2288455f02cff08688728ca2e7f363f9ff368315c8940961c809f31728252e4fc5e9ca9cda9365dd3ab6e31cb4931bab8f4d8fa81466c400be0af4796925177ad60a9db23d02da9e7322dbf92a9e0a4bee1127ac0552c8c68ef79dc707b69bda5509b627f5ddc7a61e829d7c1b92ac8ad4a9da51c658da337f9d43e3cbf198eaf5886186d08fde95533dc6fa1d1b2b0e4bcba58b81ed7b17a20073c3e4366fdd18348682f1a0880f901a9eb0a9466a08021a7bd4655b0bb9a66957bf813eba135c87cf7c3bba8fc9d93913cf8735083bd272930b9ce245f5d86deb9d4cc4dc679ab7f5767fc853a12c50479b959b22ceaa4e056ce1020d34f3566884580cc68400cc233270e26aebc5b1798177f6d444d9cd33f78122ff509278de67c08211b51af01dbcf91978cc9fa98ad35c869e18775c08a77fe6c0eaea959ed0e7f423a312214bd6d1b382519811af317ebb5095ffe8978933fce66e980c8cbc645a3f20ebc1e594e137d09cff659970ed21161d8dfbbfa3b068f6651fd618463c6e0fad3670a212bfa1d6de20143101db2a79b03bb247ed62f7d21488b4c91718ea647f29a8bc2b8201469ffe61551fcaf42d4f9792d8508d7bef506d911347b7a47b75357ed4e8cdd88bd4ded857e05f4caacbd94f68a3ae853581a80445b29e95a1c118f04d28a812e5171d0b69e4b005a2a3d6eff5398f80360c380889e9173383cc399e253aa641ff088d8cd9a51eede364720b49ac3abaa75fa14ea3c15d7815aa69cd88e99d406934769e5ec62a613674184806769a08719b2e1b9c272607947741f2a879b3a7d7a8f751aea8038a0fae9763d72cb0859593e18809788f8b8cd70d267d401cb6c980115c0cf94e454d15364769059028e429c996040a5b6930b1052c1bc9881d32622a5c098bc42bce76c370415285bfcb5a26bbbcd77608de2ca786bc4863862ea68a0ab78c4c97428d202e78bfd7387828090549587bb4904f1223d23b139973139ae5c101b50f7ff375bc1699b54a71f6c78f3d5f91a3bb1d4aa0c082746e8e8463474495352ab6674a7b099102d341036abd47712b127cd9223695d6cfbdef5db6d0fd2f9a4336ba87133c6cb5980d31507e9fea2a3df79533204a479fe5e05ed767a5d17cecf3737c6b9fb1c546c9fcae69cd6656156b2ca990c6ad7a1e74a333e9a7daeb7e043da799a64e8b664355fe63bb226206ea5647aa63c678a634b7af8afd519108b1b97f2b78b3a503509384936203109a9b7d2dd852efeeb4e498d2149a6429ca2d702fc892a0f0eb403d00ff68d30fdc3898171574053760d7d2d9dc5d2ba6fb85ab85f985cf4cf3a9106e61df42dda7bd4381277a849b5ea96738b120a4cde65095a2ab6ff404edc4855e4692b7cc48a8fd5d35a71ba5b4af475e424a2be3e2fc69613cf2c74a47db43242467141a7bd622b2e5ac20e1e96966019740f6aae8fcbdfd1e3f5f74bbf27364093fbad52baf3dd124ce6ded63abf8d2164a9a019813ad3c8f28ae48e6a3a227f33afea8ed920956dc6a9863080d73675482899a63625ace80a1c8846e628ef0be93eb0f71ca4978efaa846886de1610f67153b9d9c98f21e5be54298fad8360ea6c3530cb67cdd467b64d11a8d34b47c970fa31f8fe29a249fefc4d2c418ca6644743e738e170c59c3167fdcf17588c16ee92ad2c9215efc4003f2cd8e632a197b178a5101e19007d1ac9930a6eb48f66e79653fb051e2f8f1a50fc2c0b46e6ccfb76ff5ebcd613d44ce13cbb8569b4d43e0ab07ac669e6a5f8a92744cf62a5ef0c4aeb5c9e3c3abde7854200218038e0d4fe9286455d23c164cfac140e8cb0e300cf384881c1926f456833b80a2f59385eb887a7d6d41792c8b610ee30b94750fa32e765955ff3f265f4092cfe442d3e8c5d323707f55e34b010e6f139074bdb0a962a5fa60d896c812b134769c8c38b7e54f36b37f9f6468011e63dbe8a63ea28c4d8b669761265049c563d2bff977eaddeaddb8ffb08e29448b4988267dbeda56aac5c73bd5aca0a89cb345d7e697be4c923b21ea6c9f5bdcfa15011d74801a15050d5c9a0988a269d171e583f99de98642a1fe9976b06530ab05c295e5f1f44e1ed326e3e0d60c802529bbec8ae7bc62b0db5db48f1674d92e667a479f14aff0df354a4f6448b056686173f8592a11346c710a8ec75d0e00447b266dcad5898c51aab2a99876ec077a01c3f63bbcdfdb33ef139fd6d5f3734bd97f38c7d9889f54267fe9eff712575f30559955e547b672cbadd3f08f685db788b50e4bb3b8704a330cdfa9df6541e78d55db63218afdd3c3713b17db3392776194c76dca9aeab350fa77120a6ba30de9f6bfab077f7e79ab3c5645badfc2153193b0e1861e3f36644cb81654ee28988284ecf46007e0d1664f8e9b37f63e5e4a8ab358bed5e65b7534e56d00fb8e8d58756ed80f15d63d5263165b50c8bc8bd902e6045e5b72f4d2b4d0e3419d0b11cb8678fe447a0158c465bec97359814df86cd794e9c484dd79e53215f48f1536dd20ac96e0ae676e18da25c74c8fc42538c098b88d9e7d2542676f09c9aaf214e97d1cc825fe543add10b883b0732e2bc9406403bda8c2a2de005a06468c08831bdd727dd96e95de1a9674bd5efd4d5c33e75f7abc3dabfdc382cbef4c1f78a5edcfc0b9c2d44b13d170da19c60f13ab3ac2d9a04f443e013e316877fb410cc4702e5ea60ec1599c113b06c1c90615da8f6fbda15bc3817474e537611054c04cd6f66569d850b4801f3160e073324271cec38895a6799d025abbf7e4b931ef535d4fa1bfa1a91a5498d9e4abb9fab6ec4f3d592d72a034903787309c2a6717b6dbb291cd9e4d834d31fb8d74ab4c092310bdc7af940d446b4403a5062ca2f7f9235552e6127b75ff9cf0210eb852e976c11266ce59684626a8bbb893e60b626ef5ae96e48b96cd4e889c64e3878d1e9f61f2c5759dee7ecf1ee95a8d057e77f1d90a33e213013e2d9580a38c1ca767a57b80ea7be3ebf52f1dddb6ca0668b02a9ec5efbceeefc168ac55612627ef97b6f59469e593d172615fe85f5c2f28d8d203e78e3f2e894df6e4a827ece629e5cfc1ecc02c7ef1e206cce0193cac93a94bf8bdbb26b79b8544fce6a9e98e2fba025804f5ad9d931cb02742b21b85513c716d59eebf3beb5ea50fc172e971db72620468d7f8ec6c9fe470f1bcb2d443f87bb70845e92be4f06f6834c857857a1bade51a2f9bac1b7579960ed4c2f4cb2879516ca784503ec1504992192bf8ab1985cd15b1d41c71db1fce9751af8ee009c216eb820396b51ba01c91bb4602b42fa5ece4f6e048141bd37d93a2c7bdd2ef3aae6c047ac635aef0ec4240e44130b659db093bf4e255bea59bd0fa2a89392ab8b9ac56c51272cbafeb5c715cfe3fc34a76d09159854e9f4993a042d594a15a27a5e511aa1d2fedd98fc40e889254e0d3e4c6296080c3d5353df5f1c09d4103d8e055e1f7f5ef5812999bf5df1d69ee9c53ab8aa26f9b3acc39e51ff02aac7145ba50db4253400447be314e7d6068967facbedbede0d2ceaf2f8d385aa758e09b4c410a435973d7c614a084eae0c0c382b8c24b21ac63d63d417cfcd2870441b7e10b34bb53245914851a1934b9b0df461efa047e0fad22b995b5db205cca62e06553ddbb4e8f665f2093942ac0babeba3d07f251ce9b481cfdf29dcdc85333051a675b8544c59beaa279d64b079c632985f1eec6d2f81aec483fe1abfcb28ed3535cd80f499c846db3ceeadfbfc699a542ebc7cc33c79d9ea87834a5e349984927feea3c7e8943a5d48815cc59d6ae57af3a121a08b55183b33b0b45db55d9d0de2a41add988be9d0250108386e04a129b6486dad1f2ad4e847b337640e63a48532cc35f1d6453694ef5a2c35e884e3fd9ab8693c61445589ec902c6e23a8ba7ad8232853abd276353cba55ef122799f56d7ba1c56785275e00a1de6f5ca6f387e2096e445be9cdf963891cb7181ab7c5a8518041fec67a45915c14a4c5567778bd68a666ae3927a98a41612391ed1155a103e981451c0e3d0acdef4839955d5022616d931da60bff88f920fa778df0988c6182f07dcd20a38d200df958a4da8d71bd06fb822336f9513ddbe8ac36a7e0c06ab175960128bfa572ab5ca632f0f3d6c3ae69cdd1e014677f787087b6be3be5e122ae9323ca10ca440d40299dd6220905d02a9e10da95f90113eff6ed31b40bea034b1eb20a4ce646b604733925abefbcd19197b25d3456f3dca6af55afe6c4cfc720bbaad6d3fdf0b88d9a355e48a43f6804c60f8f713255d096b506e5fb505d07b1407894d8f480cab6891f7b88e80b23ec0cc2c62d214134591482dcaacb545557dd71574b1c0af3b5b2b4d6e4ea4204b85168f61a3fba6fcce56f59da9cc46590e54c4fe2a952bbb22a70459d371b9ea3a9fe44619799751f1ee981f1078bb01175873d5cbcc9b8ec223ff08750cc58fcfd994eff68b9cfa03aa3ad6f02461ddc61bbd277ea07b24fed7e0da65930e92c06098710badba369ec5a2cc95b2104ea74e6fc421b4908a8dd4e399d43c5af2b2d25f2a16b0a55b32755d2f15d6b715de0ad5e90375f9e96f669f8a572c5abf2f3bfcae95216f9913914afc066afdff683b3bc8f4e71fa2d948f124fefdb6a0d4f44b0ee8e18fc48ef5cb432fd98e65a46faaa2f656323914ea605d3fe5395405df561c9d46b9ae6625f4229f806e2935f9b6f2c4e6ffe0adb2e207f6443841e55846f53625f36004c9782973ed08490cbf4a25be782a207271f28f070fbfb2cd480646353b87f050b85e48de15d341be1ae14e3a361203daf5ea5fda33083fa32b80e56571709c8715e1bceae7fce2977f45296f9dffe5ba1dc5e1e2e18e18a9aabb61cc625c1d512420f3e3399d7cefc52a57183469c08b5a69e1897534866833912f3301e0de90037a76c6b43a22d57f887c49745a70c785cf8de1c5a8ebbb6bb8e379bb1f3c68e2b3098e26d0752b08a741e6c5882d8a95d566e94a64669298613dcf69296006a27a6254af464467c34466b7f2cd9a541575e6334c148b6014917238b02c1c8f5e3196a53cfbca2897fec949553a10fa4f9a54b0deac9a2d9705b8530af1fc18d655cdbb43d4fe26997edf7fb2918a9ca7b3c908c81de49f446ba42034927324e1d768501b222c953753ce7358b0d0993949d9c83f1e8b848f3cd58cbd7abb62d62180a8a4d124eb7e9beea8898d53ec86c82c9d11a6d185fe5797bbddb56aed22643f0a530096a3ab23116cb45d1506cccb2f166849a41d3153c13c99a1626eac385692adcdddae06079913a7ebd5e0c9e0f92ad2ad6dd1d607b5bbc59eea8ffc231d2dcbb4ef3aae428bac412e5b5b5c613793386f134c877ee07f324e9ef256040698e0af30c7f7137835b4f85f6e779c49b7ed423a820286e19882674ba0dd4bc6497f09eef9d61056bcc07714626a56614bcdd6bf7bb79d41bba0ad91034dbab57da428a31c1f571fa13b39ca9e79f1dc159261706cb40e4327398965ce349e283279a70df3f1c824a6a07cef4b1b369ccaffda23a068011b6aa30f139b4bfdd7921629e235254d561cdcad3777a2a020c512838f9c0886157e57705e7025912e80abcc763580891cbab4360e86c32064e64dd4f5f3f1d5da6e0e84cdfc3daffc673832e629cbcb0a623fd488413b2ae750735455d1c4bea61e8c83136418eaf832cab6a8c71bc4a7272ed85a1df966da57d023337d84fb765e3f9da4bae7833864a435fc648ce690a56a12febe98c8559583c05e3f0cd04285a0edc92695b9956bc3078d6c852b3b21c80bb2c9b0a627c7f1150e486065f9caafbffc4b178f48366f77713076f1147297f9a82046430cf2eec4d601b2e89ebf4d06ae8f25468281f79adc0cba836ad82c9ce699b3ac625d092de349723804339293d500ef2b302c72df7667fb2183bc2e1578fd0aa01bc74fb3f475f9b234e2cde670d3b1bc91f5d7090a1839936ba1f3ad62602d83acab6cce246f3b14fe657fd6f5516f5e9cfaad220bac78853358eb0e6a08dec44af85419aa984f1868fbfd3437b3e3975f96f10465e97c42048a07891b9e278c617bb8960be2d401e76a7e4899f93caf2a35ab3a264f6b66ace2096feef70332357a3286aa74b35c93b761bb2c98a306bae8f422dd4b41f3c85b2df0e487e290cc711287b4796a8cae40a8fb5cbf46fb79e2b28232c05dbc28abb43844352c26be7b3a45bbf01690cedf486d6d5b94ff6b8477a6020571c106baefa1bd8d693721b84f0e982dafe2a7a026f43c8a7a6a4ae4fee96e2043ebbbf82d6a24493f3916f2944c9606bb27ce6b60d654eff1ccef5230e0c5fbbf9dbb3d6c0cac8837da2500e4ad82dcf2d959039397cf9e70d2ebfdc471f187aad78b567b01738c41ee04e282db08adc9bf7a1690ece4734901c8f1f6e5058ba193bb56574af129c797445ddbbaf0409c074285040f967f4750d5aefbe388f7149c632ca7883c66965e6683c9fe2e10702878d9c9f52cd9b70579681b85fcbcc6648848253fb3bfb77dc9c9cc4b3d9cd772dc2362c05423c5726e5bc0c2160d0982c098d986e7adca529bec0be59701270695272023bd044d70308873dbc85e0d781031062708533312fc109650ec9f19a331f04274931b1ba1bf287b9080fcba68ce981b2db04f1fb8dca6849b7573cc6c3d836dcc86807ccf1f1281532d16f2319c44b2252c2310410a02a0689336ce1a847d5e6cebbe256ec155299e4b267a9cfdd0aba518af5a2edb2eadd7c2379c2af11310619694a3dab57858fea500317a40359564d881d4f1cd647ecdab93f64af382a0a07035cb71e849e3ba40e52ba5561583f13b9bd0f62a110e5fb84d7d41702fdbd6f4e32f695bb7593f56cfb8505096dbb5b669f5a1fa020b7ab29758ad85d68a24250cdfe9c668deef56852fd0a0680f0d17baf73ee6f0c793e6d2e0ef28de28f8064a4c0bf273876a197535801aee297fd86948a292dc3a6eff549384e8ec6d27dd095dea5966ef71a59b481104fe852ae7ee29cdee8ba95b820c1429e7b147bf40395a6935bd712e84521604035e46a72c92e17710f69a252dde72202cc9f304a08a0a58d7e1ed161cd2287966de83fc7294608f9a7f72bc197c5abb644c2c23b6dda9ff7c58052e3521fa4e7d68de317e1ca96f51f0fe0defb6f18998c11fed4a5443f5d4e0bd0490dbb2a555c6748864628c009d7587974fa8b5d97b085e3c166e9b58d81d6f91c33de3bed6b29750b2bd68b8cc8c723d47781ed888115bd13636de9e202d6cf760e66faf5572eda9d1c19c995572617e441c0eb371e6c40418bbad8c5e25c3b66ad4e0701418dd7f139f160a47281074455c6c067b20fb604d1b9da093cc0bc481c4727790fc9500ad9887fcb608cff1ff515790d603382640feccc1e3313e5c14e6c7321769413600ed0ee2159011214c9065b62778804d399a9844f8b910097ded7a9e250d97031ea4cf409cfe3cb39de70e0f731914962b44f43759e013f0e92ffe97987f1dce425c676cddfecc597931dcff089b881135694f32886f2187e83a9f61206bbdbca13d93db6188029e8f3c526feec395a796994465fceda48dfd4df0ac2c6bf8071f76550c580b1443c16bd889d7c6b80ec46f5073d7fadf496c1cfb12610852766d37370bae9ffc3495716c678d1e4cae9ec57156406d97d9e90385544ebe6c0a22103d00f4b8c4bc9564fcfa3a280a1ff981b8bd37eebf10dc1ef4990d18c0f5010be46998f98f9917eaa2cff38b473cd6818ac115878520097c26f14118ae7d92af9f94c2d56ee2e75e22ae0ab65ea6fc443bcdc607327782f2ae3e1b29a2b474e5c36bc465840500d31852c1d0e191967946872987ddbfc860876d8d9a915f7581918c0a0c7bee326fb43fb451a25feaf10d5a154f24ab4249839dac8c486bcbcac9a5a14ce6150029915dd78fac28680548c930cde17c88f05237803fafa886194e385d86b095cfa8a7b17f520716c0efd0ffdaf9a0d81d213607eb96a342dc23681f133aa296c9784f7989f94398f3f6c85d49972b871ed8b2c01161c63e38166fed7efa30976b7e91700b9eb400b44e984eab423181b5598cb1b525bdd8cf8fa6ff801ecc29836a741248dfb24b57465531384394e2243e663caf22e6a91b525183e3863bc3dd904f2101b7c633e2cdf08366511e1a2d81b59c445d5bb0aa3e338b4ea7421024d51881cf7912702b9481f45afcb1fae053c3614e0530c3c4efbf9061934e9411ccb0add9ffd35484a84a94535a4d4a4a0f2eac6f8d3de831252264b2e6317f6e6fa529f418192420c939a47b5f9efe87e0b438d761be06fa22de308da03b5fe0f4fa4f112a42a7b384ef89386b3dbeed5bd97816cd2793b83ab3f124a27239e927ead8f10bc90c98d662b8a423258f96139a8ec9d3c9f9729dbc2b43ae832535846f3a536e8a8cd4739492bb68a5ce376f958d3415e3ebfbf821485bc774a6a21ccef337f5c9da29dcf4a6338c6632698e38b70f3d51c146fbbd90c639a812689469a10b020dc0c7157f85b899d74c990a82368d4c75e87f6f43f55b3e38dc424b4d0335199f9f5a2c8294af7a7c75a1ebb8968d2f994005b5208a2eeeb48413d778ae58a4f0fef88e72ce277c88ee7e8d854975f2932296c172c3e6d095c0ba6ba4b0426bd3deeac192cfeadec82f45bad2d3262f6f2587aef8286b45e3cb7337c3084b74cd9b4bc5140cf67a67bf9f2078f187c62188840c7304d88b1ceb80356e0305f8f5b46a4afd04ee6d3653e1c5cc6cba2e9caf294d180d8bf06eadea7690060cf48a6f7cd32b5b724d70a21cd67b5e8d909272eff8da4109a8580d3c79ae0036278b5b1008e01ff85f2fa93447849aa6d18b86ae0360515996bec3768801a55ecd1c11037944f93a5734dd0438bb49e7a792248094b7b6f6d5aed7c7a6d705e34ab51aa9580202cf01ac6991290c21a42f3cb623c41beaa209c08aa2a7146d39d5cfb0f83ba8c372d8f2bf099624eb933ae6b5efd34260bb0e775fdd0971932903f06aeaba53bed9881a9662f2a72c3570107c53c1a28f2d038a905c2fc635c3049e20a8b1628869dbb98ccf106d849fe2fef6e5507eb372bd5c0ec85e5c1cd0b92a13d1cca16f3b0931b25abe0d464ee27c15d7aae9f3a668ca1baebae90f48b45fecefefc4765a6791a7b40c74be473a94c7783f55d0b4f141995e643214c8f1417f16cbd15e38e7987b430099a42d3ada914a16b41691d5fa94175c7cd3fc5bb310101bf7b712016c30f7adc5eaa9f4292dd2e9670a5fb85a509fde3cc81f879b5dfd1aa4a0924a8dc013abfb07bf5d4d0a7715b1304a97b398176edf0d43b7a0d4d67a2bc6ba090a862ae4ca9a7f06f33d85a2d8b6be23eed822d3f0083a2a04356e33db837309665df5b3b28ab39a7517273607356a1d265bce8f340e8e8733e68bdf08559a200d5b21185c64e32de2a29969e7c9e88000a9b1b15348d382ed8c9e7e8909b85a153531cf0140eb95a2e8d900fd98af55e766c552399a51574713043f2f8c0fa27aa0ce0bd58f73ebb6cec47b02ddda264c796a37a826b6466942824cbc0f301b1122d54672adc68af857c6f08f3e9ca91de900563ba8c13262c87eaf932110c0ff5a3d76e9d6b629bbb73bd7809fc1b05c65592e93642f69c08d0fa2b36c1fc3d4428b686073311a320b1711147cced5959d85569c471afb4b0915117dd2999f0e81429e10316c6be1da35a17973169405b01b19204f137156cbf57a893d95b64ac58198f167dc4c6f095b9f55de8581787ce628c54f00b811a01bbb7ee7acca66a3a676603a269dc5fe5b79bfdb54af09fa1d0ca043bb93d8177a9c5be062334e2ebd730a666a353d4e6f9b3dacb2f1b250acec66d885d3f92d7f0e338765793ce859e42cc6e9c87d1bcbafdc522b956ed25ac3c7acb6dd0d1eed4ab25935fddce5498a599e69fe0908d9a8c858433de2b3b43152186256d1239b138fbbcca149a7e5d7df28d23d99bbc1cd970432cb07a5ccb14badfa102411c08a3f384907a6356a06fdcd2efbda46f4ce246a1d8f1e2364b555a6169fe6f6f31d7d50a4cc63333891f98eb0d8cd890a8a17a5cd7209c512e4a13b19271f4fc4d7606d6d0727fd3e85b9f7cce40e6060a7fe7a7b9fba6c9384deccec805db9d181d9d00f2d0368f1e88046729b2255a04db68be8d2dc2cea5541454ba1a4574f3bfbe39b6038c3b86fac8e2ebd8ed29e80f95c9da1b7477632844dbd4fbaae1966fa58ebf04899d647a741af5d52a871add36980b82e55cdb628196f75927f605a38a6dca747d79455af2e1eea8241581b10f957ff081dc293f2cda54882f4870c2521e7746f2cf4eba30a1f2dd05dc48587f082ce0767656a73174f6a24ea53cf22992894ef9af6d569197df7352cbbd2b9c1f82f3f0d4d2d90025c3aa6e6cac81bf399dff9d8f31d6cafe7fa6381ecead32f0671db821a927114504abb1632b9294d35ce60ceedc6d6bf9dd4ffd737e67e705b737bc35f158ace0925a65b1cb66830c861c07c40e0f4a922d9e32557ea9bf49a09786b8bcb878ec269bc7c6faf8416b0c0d2f716b2bcc2ebc1134930119a6c3ac9b51903f2cab7c54a248eca93abe8f56d47066ccac221dcaf9d690183ce05c2f07cda302e19d8719c399570b0c2c454a674d76467075576a4014df2866f4a3b913c8781373f5683c5d63d9ffb52c4f38faf9c1ef82f0e852ee40cf8cc032a2610c39dd3feee96e0ad325d03875710b0ce720dd6a301eb50efe53985b8cef3ee1f4408be6c73878be9ba7fb05949fc64cde076375ff3655275aae9b4d9674affd47448aa349d982079b2db1aedb7f44a3e5ac294d1aa89b2b48ce1eb33df85782697269911b48ea9042bf577ab8f03ce2517f653526a4e03bfb62707c70d5ce36ca99a6cd9773423f3cb0045a8fca77a3a0ffd4e757e6684dc6462a8a4867bf0aa4dfb8de06ea9f90a42a3f55846b534bd3b06c1bbd9ea445923f1c8103a680598700ca8676072106185edde77e7a73f68943338f265c46465d435b66b94718c95c9f61d182634175c642625362bf60b259aa2a97953396fb67a8aeeafd8b93c2fc6aad1371c095648bc0415280892d5ed9f8997268707076a750eb13370d036812f77b5a5e163e1d765114428e61c1e8e2f2b14333cd047a708a1c00b8b3fcf92dd14719d5ad3c707a62a38445e6bb1fd53b6365237a049a8d884d264423878742fa29c80184fc7a23d09e99f185ce2ff6394bb0111d40922f0853f48b8328bc35b24ebc09de80e7408eaae831a794007452ed14807cf968a9ab374df7931d3275b7b7b5c2ea451580f35b51700e1ecbb3500591a28ce7ccfc053a3c232ce6f27d82275b98e927bab0b161c671129148e56b51943a51aff1ebff8696ff402a94c4d9bda397c40bd60afc75ad64d23f0f2bd7c875469446f5a336113efb1b7a3d1a497e6218a463868fe27fe23dc29d42ff5a7be9ec599d82ea4e33e896e888e4502e5978c5dcbb8c58a99f6578aa6d63325f50255a1000fb6756a9af1c224c966dd83cb838a580fc091f959a039622689c5b05fe12bfa9364c44ffe0d8000da29fcba8154706af97fc04f36c3efab785f16d106926d0107a9860a524e9a9fd74611934a5cf57d401507cdd7a50a14111641c633b4ae5a7a1bb650ea122a69a2704a3a1ff51dcbac19dd3a7357936a99c0a30d1891d933c1eb2ec5e6c368ffdd722014847e5ef30280c824bc21df2d9dbb6c8aa0eca16d19ef8372b6db759436a37546976694bc23f2199752d26c52a798d3014f019f2a6cebd83f611c97cb28af45c91efb901314079b682b6a99b31e6ef99fbbeef3eeb853a1b7ca0d5b08f8f64b62c8525b608ab22be9c6e3f55989099937b2617b04d0353d546ea9a853579e8d9e63ba6fd68927e56f736bbfec58dc72069401d0ab243ca9be22cafc3944ec9a6a03b4b403b29de3727fe6811fdb802a88a71a01170877126d1af27450f750a8571ed185052a1a65b02709faf95d091675f08978a3a4e848ee7eebf023726d4913ea58de64bb0e2345440124cd70a460bf3453837768c20f87c698569b9a0c3133bd3c88e7ec0ae48b9ff6ff577faabb221496ba0bab107487ce3813196341cd3298bbaa3f1ed8d91435bbda5c2ae59b74d63a4ec92117599dff8cdd2006eefee0cc19584284a536afd016bf2b9e7e20fd9a955a31b142e24d513b5ac1c68c68ffd6c08249b7b3cc8d909e66ba1d6032a61c461a4dea6d7139f4ee01fb1dfb7ace0fa490bc96431d7e40eff47cd6265110136f9235d8271eb2687b7c6c6660d2e5620d7e0bd426874fba6429e44bddc58130a6d967837afdca993c3a8e8026e4e4ce49783dab5db2b4f0ba49b9704bc7ac2178fb07ab3ffc6be99b9d58caf74f066418c40dec3b43c18fb32e92b979049db3fa13aaf990518a7fb9fc8b3d67ec91fb969aa5cb7ac8bd456c1515e0d9eef5639bae9951456fbcf27bdd1bc5dfced675fc32d9d9fd4206de92a9f0d108369f2a4dd54dd78824e7feddd4c94b93072812e3b42168bb911551763da484d5651bd95ddebae8ca857f0de734edcf5b3e02d03a6311252ec66bafc7bba579a113b1f5f8f89f04af7c1aed63385f92f2e938587ce0e2b3682bdcb0d08e104a1bc39cecb2f74bd1947ca9220a01e06ca4b270448b44496d7bb815fc9f0890a61e17d8ff48cdc6c59ac6be5975b01921bacaa1be926a8391520fbf52c3655e05cc439338ad466b23c50cbf463eb088e7205fe17cec10cf32fce71283a8c71a417fa1b270b522f2fbb60b87457eedeb2b85356207d278fed41a2565aa310f2af3de027e3fc2deb4b230b61f8d397a078e1f68590e89213eba63e266a75ab301718169dbf5bed9cbd41ebb45a122c070d71e8f7f20f59a337fdafcaebe8f8690c9ea06b53b94bb87c3e69dcc1542f4c15abf9b76e1974e74d15dae8a7db5afe09778b804b30abbcb52956c77be540c782e8adc64cf177382a0585930db5f77e0afed4f8e4330b866018631a93cdba2a6dabceed1a29d629997d54f3c4c6a45035fafee9e8d74eae5b6ee223c5e5fcef44dae91ea328ef19486f9b1abcdcac3616398aa46c5983607fdcc74065f7ad1e3940267fa923b713270323612755ed5363c0cd5dc4750819cab48dec9645dd79aa6458eeaf0a495a2e3e8a245f2961078c8ca71eb24d0b6889543c4009a7c8692b73275be686073a986590ae1cf09f997db6409092d334c859fb301f0da2025d3888fedb28da6921dcced295cc147fde72180b711d9ada260b58a487fdd7566026e1c78d8cc8ba3aab7730a3664f9520f364fb27a3353d8a5bbc53322d7b1bf1415b96da1a99e2134912cd19eb3a44b8e7822da2ed4965aeceb959b735e4ad5324790f37551bad7c1eb1740e0a5bb1ddf03f300a352625820c8a2a5d88ae9e4b108f5612b5b1f51ef68ddc02d2b58e8015264a04c6f9626331568aaf786d40ec545ecd48267a7c64b5458203ed8b79c664a8eadeeef372ed026533bba902e4b529b9016e96affe130b49936de7eadb7e5faa4fac881a8185dd6ffc982b95b446fe7e3275ad9045a8e0d7a392cfb9c7ec97b93fcada4272116c1685e21707ec3111a219cfa76afaf0075cf7b25071dde0b264d9b57d1fc19c617b14010a90a7940e601d45b550544477e2d933822f25ae5f8003f481c2fe34abc22fab0e57ce67f7fc1d24d832664b5e8de86c0050a5d04efa3bcc56c8c2e080c06d6551704089d2d0037b13b84db87a0b488764e1494208a458e9136c3470634a6ff8835c68343b3df1c63800c9706abc4ae8f1a599574e1a1261f2db929fdddb8bce66aff96b96e3e4677f68cfeb7e2a75ac0059ba914d08aa1e9d5483c854eead8e28f6774f4803fa9c3b0839a123d2ac3e30004aafca856989a465ad223f04575e55941ef381795dcd829b87d8d981bf84e25a02659dbfb35507954ecd3a1ccfaf5ee5564f123b04f359849697cd5972acaefc1553854fdbf0f92e11ed204b4a66001ca9909f9bcc6011f538131674e4158e177271286dd13875cc9b6edc300d44b9ce58b3459bef6981f34f2afc61f7bceea1ea6f013c6626ff83988e4a1add1ef1e3cde669678983f855f39b3d39b231d0a4d1dd3dc002f87549f53e8af2c89f40566339e662378d6144f8fafadefc2d57ee8cb031965cb4fabd116168652f4a789f2d425abbe73c4fcbb5e1a3530302bf0ea8929ba1fb64caba6075c9a20a5e726737508480c2687243cc4a371d3e830e91e167c3282aa098e27d0df92b6b83e612b14a59ecafa6f355d06b9d838003e14809decb165c476d194b886cc0d10ae8d9b2ea88547028161af41f4f71e9325a979135371ae5f221e4e69b90c73a30c9db242bce8c6df3c09af7022707b2d56687f9d0eba8af25531f05d3f5b551d05ab52a4e2c5c7fcbbb3928b2c02fb553145c4e406f2bb3a5eb3b83f8344b67790f88f69d32b57acb039b710671d2a608aedf9138628f128ac360e6b4a477307b31e91dc8551a5549fff3178b4f8b7e421b4092099498b4a01a79c227999592133fba1f9d50601a189cb5f8743916d47e3e519c72197c8ed0407fa5a431a9a2b2f42dc0429c86091d9c1a8bc80dc2684ee08009e61c0cf4865c0697b224d503152bf6554fb77b20c5e42d202757a60bf39e2137506d43b695b2b19ef04381060db9814a1a52ef5640f4932ca29a61e0d7acdaf0e0e82195a9586023e41631b794108c697ba7672f928988ebebccace9d613f8dae8986dfaaa98ff61eb2f619e1dedb9fe70ac9d881b01f1f736333b25e08e7ab0b3683cb5c2c7fd07e760ec13f4b16654abe6abea1a28df0a2deb26f1c6dfc0664cdc21dea5cfd4bfa481bc2a84d5b0283a78c2423a9fac64e13a07b08482c5b4fb707f8e1fec79370623dc647975ce60cb6b223f34b54296c680f6731284452f9b89a44cabad7fc12620a2f0a006e874d095d6f0b2cd7637cb042501e0a21a2d74248fb23d98ef75ffe95ba880a5873a592ab90e5dde68c87169a693db9f2e4d9bf433ba18ed866ae860b874d6da3ad7a29f40882a71231a97aaad2e4d2254db830be80c052c743a95beff045e863a1b086a80556cc25e0eaec23a82ebc5b8eaca240488f056c8bf7bd8b0e1d364111508d6edacc5dd4ed8d8c93515886910c0ea1aa96c664f1b0837719fa45b735fbbe2b58536f196c084fbd9cab937c1c130f984c5191238988bac02cbf331c1d298b58ec7c5888d0e810bfe5fd1867a3e2e6662797bb14e8fd5b78bef4caaa513384b20f36f1340ddcfd21046e0f1a43e192f42a791f8b515b172f90f9550b488d9d3a874bb3f8e66a9f69c812740e19e3b5431b78d23933bc32cee03665a5e4b1e5aeef356b3e5e0af657e4db87507554abfece90e5bf34d47b1c812ba63b3b4597b9ea4a0c52c8bb1c7f6929de3c8eded921225bd3f98a7de24fa218f39f7b4139bae2f7d287e0339ed84e79ecc1e85fab00cc02b53aefb92a386e5208653e12df2a054c7ac57106920059011f2de5d7166ddd6c524bd2ee24dd3d492ee1b3daa10926b0bc574c315434a667e03be06cb416242849a6954dfefbfef8d53940cc063ee263453a49e82d7392ff69bd95257a35eb0314d0b1ca42b43f762acfab0a14b6acbabeaa08687128d39abccf219e37e5445e72750de9ba9b98085a48aa20b96e0dcc5ffe8b2acc4c08797b560b2928898f09cfc401eb787f4ff798bb18d99dc32eba201016a653ce5f332fda4bb32039cb83c23fa400b13fd79acfcdd173f26edfe1d168f4622810b889e4e144980d2d3076633331cd8b61d24a8f25a28e3909bf93d710021eceea09b7ee6427ef88aa65bba12ed2cd5572aa8b4ccbd65cb4a09ff9accdd5bb7eacc257a58eda2a2e59d17db8268a9ee52fd3187427767dd06f075a02a797709b8eb1e781edb1add6cc4d0190463f6e3d154f9191cee2c2ad115bc84b99cab83c8f61d90dfb78a6b6a74c3be319ca110f6d2dba1961ba52c0fb278eebdfc687eae16bd830759921b0253fcfe38318c821544466dd9f180cce87ee9f5e01b9086807cd4bc92540c6d917bcd0ad47c6727b5d30220455eafffe55598ff06a3c51231adbe77b9354648ede231277eeee03a4c463c375d68f023d5345a509a8cdff3211164fdf26071139f77014c33101ed84b6afc3f6df8955a3c5a4059bbba0d9e9d64148bc6ae34758e94ba66715277fa31faf76560dd043d7bc79e7442c89995faa55a777f2649591487a69227a40269d217e538972ce00093dbd52356a3aa66574a26e8de31014e74cd29a68d80ff813d7082e487cdc6a95071b9b3003a1225f85e84a40ba4451394fd95bcdb76c97a30cc9bb8ed3856ac4c47ed6377ed419a87937b8d3f3ee38837e1e27e18827b1bed21bb06fb57ecda7075fb01b5f6c471c37182d991cccf23fe32a2e2db07430e935afaae1d4ee9a2925149b2797c83eff637f3385f88af17668e884220c88072d0b43eaa61d35e35ae181b95dbba0c3c307e889e0c6f0a0ce5b6df623bf15281546577c41e3dce20de5b64208345460c4eaae3c4bdf1dc5efa0f7fc6a18b8899c6562abec6d9adffddc159472c51612a08fa0573159c88b1cdfbc252ce0eab0c139730ceba6e543157f0345e9304ec1bebf223725e80191c06aad8a0cfe6f7c3d81e63ec36130ef4facd078608233c8daa674a7615ef247800f96f1e7cc737391a406987f1d2b48654fc02e5b7453b84ebc10b82cf5d11fcbe8d3e0dec4c46535c60fb136d95ce1420cb7ca3f629bbe9b599a2e1d6e2cda9937bdc6688b3cc8909ba6b8d4586892340b55e3884c4db22cde500fa0e4d71e4ff22e1069fb495dcc8b644aee5a41c18107dfed98e11616af7bbaa4e8267ca8b084cc0f577c081114aa95f976f4b57e82c848be039b896ac3584738007a75850acfa36276b08c24d2ca7d9679c9bb62eaf3ac6e33d532e5ff74d9057d8b1e7296686249ce2e8d37afec9e449de3015ee87979ea55b3f49429b863a7d83fb11fe49cb4144c6e2d7e32b25bf0b2c320b5e4a9e30ac9219d39375453c0598f423b7612a01c797d4d2b9765b31b19ba766214d67b587269099f953024c27313c98ffdd529bf4292fcffbd2be5c0e56172a002ec8ced6390e49fe6eeef7598dc0440e42a80bacf5a960f51cca0472e9fa4a2fcd6f221471a46e93f13da32a7c1d55cfbdba17dce57367abc3baf3f920fda0bac3758f32372f524acc9915bca1acc9c85357b69391d5eeed1e515a45155f6d17d38bdebc422ba9cde1ec48d6ba75f9b6afe86bba57e5f9b7c03d757bfe6f30e60866f52c4ef57e55a94d17b6173d3bb8059572209fa505fe32554afdb9f3069a39fe3141a8727e025e2b903f8e40a90594d58b3315982f926cb06f45a3ad0e1644ab872392fea0c1153886727b4a925afa675bbe59349283c70f91fa9f2fa556227fa0ca539816751d95d31ed4bede6b918427fb0acf72d1c4cb0d9df6dd56ab9e40e9d4be3b859a7a84f69a5a2431c6eb3cbe5fa20ea2b6540110b527f7e403d971715c9f57cf1d188578ef28a085ff2c4383c5f00530e5352440ad35c226b38842c80165e214f552d43477dbbdb1cbe224c6a051d4290fd160402ad0620dd3a9b93d294040fcdb1e45c2f093745997d61f3a19b907ed581680f68ee9bfc86442acc490716f1f514bd2d210e0bdd326c1126fc081207d94f7258169da555075b8ed648cb2cf7f0491ebd7d6763dc67466fd42ed9fe4909a4bc3d1d7bdadcf38d303dcbd30e4feb4d5fd890371a060b1081868f83ca2a5ed0c587db9f9194d82275d6a996ce4b47a9b6931fe455fbcf1fc9024e5c273b5ed698d34f0f3318095ddf7fcb7e96ef025b0336c82087aabd4a0c2cc929aaac542b9364f25648bce2ef6674912788336fa2ae1d2c311e2eac3642d2c238926a456cdef9e4eb3f60e20ac99283620ec3ded93aed448ba6e3e2975ec405c6ddcbefe99c970c38797b182f43d66c2aeaabebef15d0aab6bf0ca7dfb51ba60bc19ec847368d84abd89bd25c2e2ff4783590a036ce1ac8f233cc9fa9dac8eb2f7f408f49da18fa09f3863d281d83f642f33d3f84717a43554766f685a09c04a2fcb7ddfc65784cf4a67eb0b37ce5f0af4d64c6073027bcaeeed1ccc6f0e7b808ba44833cf4ee1866271ffd9cfba658b1683d64f14fcda97b344bb5e6df744da8d1f499d6dd200999339bd68046f20a5dfdc4e2c4150aad9ac8ebd80e3d4606796a67156f75bd594c4317f32cfe6716c5f9154f811a9fa1371cb40ecfa6fbd28d2b02d998da94dea953c91c1cf6c1912b4e8042e4895bbe4be708c65dc4529a2f65fb731c892187e132ac099c584357f77c57f198d246d2132a1bb853295a4613de94d918875c94ee25f7a01a8e5e527adf7fb91d7e19ce5f5d1cc93b9bdbd21469e28fcfa4a0f8d4bd906c10b6ae346a4926aed7e8175b7c5de2011459c2fc0691b356f56d5f968c6beb21ad937189108b044c2e0e00aca80d193c371cd7a4fc7b7d0b34bf1bdf3e2a27d0ef7a3c3905a8d2b71b61f04052f515113a91afe335c7b75fba7117ffee27ecf2faefc58052bbed507db7fe521ce9d3f9b07e7e7a10c2150e12fbf3fa3f698e4ea719b905b613287fcf973ae58532020fdf42fe85dfa3990ebe76640f03f9402594b136b9cae962161a952e0a557e8950f2820fdb363653537f67b9222c761e6338f5225fb2f6491b488884c4d44d50004d29ecf195cba7bd06f0b944ec5f7c4461d2ede2602adc683554cf03a759b32c8dcd82b457e7cd26ceac15801ea9ba7ec316e6eabd44187950ed84939de80241191a4345b1e60c57d09fae575eddd266f5adb140100e7a3f047bee92da74cbb1ca8b8ead1eadd99831c1e25a8c22c1a6841431002face2cdb7daaa1de6d12706bfbe1e9ba754cfdcee504dbd76f34d4558cacb3bf115a1d09bd9d53da4a534914721f8a3874837c54e952fd10cb4c6e898a4b3b5048299ccbb346c49b1f3ae059001cea09092f4015b12eccd4d5a32042dcc82ac75f99364ed401007d7f08bfcc4d1475de8a0dec5c7b2240ae2c39f9bb624ef8465550860897e8833ae3f1de9c8eee3ee6fbb7027605af9f74f1a058950c0e26d4a70c9ba991fc1c02e1bdc40453df101f66aa773915c1f397dd02676a28750a7d53c4989169775e255148e7e7c15d131edcb700cc5bbb589a66d09b6b8bdf9ffda22bd55993ab63b93573457c2643f32130a799ea3ba81837a819dfa0863be48e39f565ebc77c9b476c330b70c2658cdb5bc1278e95f4805a0713bff8fa6750a656fbdc766059f523fed7558f51aaa8a3ce12f9c3f84357a9b0a4c8a622ea79af702fa0b1fedee2d613284f1b9fdc967876fdb6750549e2b6a9bc3f198cb8f06b8993813585fe444f5adf13f72e7b8b192225ab60828e16a6c428c2f1aaf94a8d5e6508f18c9f789020f44fb3d508996d2f08eba3b216c1ba73379f1c7a13908a4628f8da067cf3fa61077e11be37f63abe3b965a0aad3d34bd7c14a7f441c9e63204df3cf1dd7dfc7f2b357c5da1b00eb23f9f285d0140b42c2496f65c097de5c315c7096b1a7e29116d4eb0cf3491453f51488053b02855bab22585b1b51611c8adb326897fcc8b2940e77234cbd42a1da2638bd977319124be560942d39a804197d15c327fdfabc40ece8a51b77b96f867a4b39a69c1ffc59c5f21df4787a7808da877356c2880366ccb0ec7df927e6511a126386f2416ca8e922f997b18fe586b754bfc357263d172332a8b919e6f8d8ae8038b37e2df51fa5eacedb94c7bd501d0e65a6f1c6e248ab2fe3da2ada93be5f511425d5edb4a85fbfbac144c0f273c17ccafeb9be36ce2c00908508a75713ac0f332b99d70cc88e51ee06f35bd5b56b20778e0137b988d7e4032d9064dc50f79d60faf9cc0a9c88602c050e021a5016db96f07caabc2d39d5332e1b3efb9f8efff100b121aa836560223c9e6e685a7cf0ad0d6e8031cad8ccc0e968169b35c0767ad710d6667b906dcb40d9292f7983735621358b54644285c289dce8013021d6ff0a7f7516383a1a4624c8977eadd2ef104111cbd1291967b75cd7a00e39a326236b2a5b062c1daa879a08df4ec2b4f3c34612ab94558179fcd1477ec517f6d40370ca8e6de74a117f8605018126ea7ac0e107882875d57f381a0c75ead4886bc8fd15e3c11ae3fd1c760897781dddcd8e707d52cf9cc75ca9d53a7eb452c986cdc6a244d38a09268cef5a763b1dd6fbdf59767cb7e54de1352e70c9e9614d9c37c469fc5150e3daa666b2603e15e73c0f92da172451b9dd5885a473699bcae2ca92cbe4a16f47104d1d9bedf1f04aeab8f92d59ea1a566bc4678219390e19eeb18c25321db9fabe254bb0be7353a96c41e6d63b205dbac15d1a48bf2d427b57fe3937b091dc68cae4e5056629e3167eaaba127a972b4924e4ca6d3de71429cb95df72d55a927c9aa89b8f6a403ec71e336255d0383863a08fd4fc03c415669570030d7f2310a55784e0f656e1600a69edd1a07bd1aace04cf9fd38012ca74f751860debcb3923898fce96d33eff39a15d9245e8275b4880db3616bf70bd46109c18164ab64dd836efedfab965fa74ab2a50ee9992a80cb20a78afa6e88efb6b08c38bdf6f1ae7d760649727fa34ba68352a67f24bf13b6655d5d736f817aaa690534308fad7c08e12bdb66ea39a29744124774aaa96e9e78c35ddcf4510254b023543e16dc25b7ce081079af2db3897701128035c1426ff4797c4894ee34b25b556a0bfe14d734504f8655536d15cde1714189130b50091f35fa39da60cea826ea840b2a71cf0de0884bca839569ffbef93138945198c9dd4c83e7ca4fd9312bdd457bb4e2932bbad87e9c89e884a1aadc408d29c08f00ad2ec0ff12bfaa85e0927502aeb76347008619212616cebc269e3ee4db4eff79a015ba8d64000c016743348266f11b383e654e5e6779b696bc565f87533e60c13a46f42b8a46a836d6a3b190e361af7672aacc296fc6fdc19aa1157c78604bbeb061630383fbbdc4959254f0dfbc69be2767941fc635e1d202ebe87fe85f711649eb3b6d9839b7a968c81b1fd801a97c4a2ace7bd2bdc40efbc21d38686fa1347b16b5b84a34137fd6eb891f6360cb84f8d3995034256db353fc0f4b795c0972197440470dfb3b38dd7e6ade79fea6d6b670b6d3696440882ad53c9e6d606022550bbb55bd7a253eb8aefe0be2e7c3987f9a4970e62654ce85d730e2ce2b8c537ad1f403ed6e1ebe466d9c7e17ac204f1068e1733a394a3731487a82f5c6d076457b1b0f3d1574b95c35ff55707ccdf5ea0bc32369fb3e72c27dab8bd21d79463a3832c9d40c028da85de417a508d1b3fd5a404561cdfa72421c2a76af02cfd3dc43f43be77ca880750e5a81eb01cb03dcb1b203bdeee836fb81a2a7090f036e6c780314b4ad180fbf7de348f36a19cda3372358644d6527b86a293675bbb90edb17dd722a4f92c08e35c28b54a836b275ec87b400c4e1ab01bee751d7c3c9228e5f677ba9a9fc2aff9184ed39d6af34ae6b5801fd00a250d672becd51a1c558db431fa9de6755115990e9af68fa012e291307218ffde83f31d4ad49a2aa54d2b59487d80f434adf702efe97ef1f166fc9325aeac87d0d229e46bb6dcf79528a18c60159e79ec5cbee5bdd2999812663f58173e89c89f6a54fba2d7f6895ca578cd31a96347ac64040458d072918b1c5ae21c3b926ca99821b557ebbfc051e4469eda3bc9d664d62e2c92d96401d3c94b2ba4260935a29a594aff68ef34b41d002e58561766d052e047898a7cebf133ae0fdc40e30657ab527ad12ada3e133dfbffd5f60eed833b1a9e00a43250924302698ecdaeab30cdd6dd762546ddc65de6a92347bc5b89f4f900e9c4213945093b6b271d1b6eef2587be24b24be0cd083434cdafefc042ba04343c4de30719b17a85c820276443b10aa4d10b7b5742055abd1ba8134d272cfc25454de6dd22e85bb6ded61a74c1450d88b99a0cb9f9fb2056ea09752692e4f88177e23c9fdcde0921cb70765d0f5f8ba523babef9812b6a3e62c9176a3f9cf94d744374572f11176c58cc14b4def52bbf6a019e4a33582a7cb8df241c84a5dd2759a8b258d6c6067341604bf7817df80fd209285ab1aba710e7d1211c71989eeb32597071c1a94e7ab92a0bb903ac0b1da52e3a51acea04cc97a114a6e7b59989bc00402bf16aa910883e81b107529e2278b632513ffbd6ea3daa7dfd3660c13a5fbc02aa88302635f1364b4210314e5fb52da5ae76ef98d3826e720221bf730c61533ab228d35e0cf10cb931a3a361d065270ab7c6362cbc2a430d15a6f17bdde936072fb499e5c29a5f8732e48fb6f98a9307d222757fd2d0d12d0c4b29f5595dc93760c50ed95980f234f500645904e92b0ccda10fee83e641c5ea651197f71dcb3e1131448838466718ab161d29cd73b90ec7af52fc47d26d02649b3948ecc96c0e111d3a55abda79c308644c464cbcce893d1b0f5bdb7b57d8b7b1884ab097be41b42a140111ede56a9b28d36ea0d14fd496a585c367239cfecc61706cc361b869125a9153c0a6dd44fd6a6a5de87aac4d9db6e4cc824efc76fea3783c85e123fc559d27a452d7276627e6c9ac0f5bd896574d11552eabc6c15a885ef8e5f98d6c00f1d9e5dd188037780db8607c2fbc28ef8b5f72d39ff6514ce9622624f26fe6a4aae8b59ccceaaf412da38772140ac1cb44256bea7c7992181ee43679eb9653ab41443c0e8799999de389e43a7fb289e25a5a824620a20bd5afe782adfc3d1463b82a1e7c4f8813d781bed8efc7427470e13034c0fcad0ffa88ea06a71d4b6be14206e62cca5568e90ce943d834d057a79d4137d772d4169c43af53fc194cffcf6f5c3bca1e6f60147bb0fd103effcd260d4a782375b21524cd40cb949f3ab6d80d5152eac645e5c3fd7d6fba4e3327ec1d2db2bcc34bc375add81abdbaebfa25501f7b1c2cb998309861b826052fc656d4bfbf37c102313129be943eb96d4602262cfa482355c1cbd099172fde3199c553c484f60ef9c3167823229bf1cfd3a843eef5c9823cbeefda9a907c46ef61965384156329828fa34c11469d2b77da2557fff01f929fc806a618cbcee5739fab28ab1a8915422093b6a28443e1c1c26065cb3dc4473bfe8e5edb4a825ea717d22e80198fdadc37559a28932f893f8d61eef7837f912742a13341a057181aaad9c377cc0311662023bb42e1d92e02da7e4d1eab09e2d94074e557284449c78134d071a0b3ff4922089d3f5cf03143be5a13a0805fd64f8b71efba07f80f7d88c1cb6aa74f35d240bc8934f4471403e465d56ca0f275cb84ef671e477be2c302c4127d5d0b8d98de86f73cad9a846948725022baa8d283eb7e7869cbdf822094f72bced37a59d8a47ba55d837eb895b9f406b73ab614574968a1b132a3680ac23b043e15d1b891bb52fc2cb51594ca84263b3e878402cdffb53f706f68b52a332ca3f5a6c3f5997fdee7c31698c4da37dfa615e3c41d9dc97f294e890eb45bae6f1087811857306e81c69efe2f4f3e95faa515bc2702cfbcd9750a637655c1ac962e675e3ed78af18de0ba634e79f5cfe2e9495d0b03c7d1fe109783efd234995c034fa4c206d36130d33e7f17ae0b2ca2294610a9ca39ab6afd08ede738d30152b1dd9b3a2c42cd1c602b2916f7ce3544bbac7a38e1a18589780c007100f2d913f2a4c762777ee037a824b68349ac83109fa3d3bc6481b3e76ccc6b21b5d50dd44fffd3e5367413bf0b17135b5b98b6156a9ba6506909491a509fe98091dc532262cc9e9fa4d2cb9a1855e5146ca723bd1652ea8fcb7d0f06844064d6ce78d85c05fb304b80c478fb221ad045f944b7560ac112530dd71e0664e665553fae6a697d230b27786faaca7d0804dd0f340a15505011d759654a6188e38b9ae365d107b9d7f5ea9f0ab14b22caa218e5992c7a0084dde3e9aec18d1d4e8ea9b50d5e5d123bf162bfa22bb6d3d01387100f5a809b9d7abe92b77c6f02b0d3f9116b659717a671e73766cb325040735814188914731e6d6fc7f3f7b7fa5492b4207245b92eda2670f3795d972c0c44b879f2962d086108f6d7c27b3032e06e88ae0a5a783207c01c5072c74da6819357846feb5b6e7f48bf55be73cf419302f419f66a122debe315f1bcc2ccacc1514efa5ca89e3ed22d86b835b8ef04ee120cfc13e4d2020267ea3c4ccabefcaa4575dd65722655248ca432ad118f32545d2ea9b868b2bbf50f1f10388d04dd9fb65a14cf716d43fc0b2d806a937af521054f433a122540cff90b12ee03c2933d16823fcf8a7b92c41e3719ab4fb98381571923649858a0127fb0d168c6ae0f35b92964157dc5ad307fed42b328702b2aeb65e714f3700bb2a82b08ee41b3f200f1cef0b130316dd338cf1d58dff5626aab9ab9a909aa1e95f2cab647bf4849f2335cc533add8c0e6ddf5160506d8e38ef3eede313bfea179a53e3026c6074535ad08889b7f7e5a32e813f3fccda78d4bb37aaf429a6229e32350b30fbceb6bf93071c65d946d3b53a9cb1d152f843c0c88f5673a57eadb6b417363ae128d830fa155dca3560aaf3a3d52042b77e03591d9a71e4c83504e2356ec5fbc77434f1ca210658552e889e099a4ed8b1a81c9860b81c752445bfcea062cf5ee831426cb36da830078069bab2706d6177812b1eac386dc5ccff1805ac8208fd531955b87f62d88be6b1ab4a5256f2164ebf945e37012982ee7be38c06d3da9ba4b4f551f118a75bcdbbea1ac416733dd08b1734b9b99503d0d03c0b4018806851872afec05b332ee1976c8cd6deab825f5ca4797ef17c21ee31f6a78d4070dda0d102dc5abefe1ceb77538c0baa66c99b9ce30e716b533aee5f019856f9f9586bd7e71c349a6909300e9889e6fb9d065ede1bd7ea52cc9c9d009d5eb665d0b3f9bb80341b486309b2f20d8a3f195cbaa77fc99766fadd0912bbbbf53c98e4339c8f2c4ce266b0207f34c0dd087caa3372be8501a034d0e5a43e13f77c5da157f6131bc65594742576df6a8883ecd820e701f97b8c0b154353c94c150e06d30f6bd71eeac0cf28d73d316dda89a234440544f917a8289e7a1ba87daa059b58736016e6ef67c39c9b476a9161a5fcf2fbac772627bb04313eba4c612e487bbb95e06ccb5666d5ad6e7ae1b9c8c99fb1cac13395e52edf68918c8e4539f4d12a337b3e437d86146e19c076d79bc8813de3f732825b48444aeed690b62a72149560a801b29a337755d0b8d88f6a298513a7aab8325272ac168c710ad223296ff474813b1fe234369760b72d9affb934c645faf392df3c9679f9bd44c99b8672dbad19ec2448ebe615b8a7a545bceab232588ae2966a530f8a9a7c98fca44c0eabda5985354007d08d5e681f74ac3d7a84d0deea1471dccbe1536de7980b91d42a2372d56e62bc6e9d8bb991c32080bdecb79adb42f724c26aee44d5c197213bdc79c083f8ae0f0b9faea24c092ec9987256e985c1f9897017f3855659959cc207f20ac8a18c67654303c468e4281b32cdc3ac553ecd6902c4ba42e057fdfd0068d8a024e6531af8c3901d92fe468afd6ee94e373d97006a292d9f8912ccc36db5f8b669e5f763f051a4dedb2b1c497931ddc72f7bdfe418b04c2bb27688566055970a4449e22880f3540ffc692dc761222bcb15ef2b6a5f6c84c1c3a74cae18fd8a479d5266cc37fd5197f189e6f7cb9ac99a4048008e536b4d03a0c285674b462e3229bdf33330266b4143fc08252d8442f7a2b4219ff0e769620c8c23addc5c610cff83e208746102a82b68ea564d89c23bedd6d226de24cba6cbb4892dcf421e6f08d09aee0b71e56c85456615c9cf61597d70a7347ccb6aa2fa13cb8cc5571c5c710b4fffa154cf89dac8fdbcde0f962dd465ade231cffb5b92bf652c2c73d13bb77303a1eb32dba1830c4a219ad62c7d90585e4f40d79a5273d7a8b88f2b38c8f819156aed622c0c6026609423db704063a9061980c8095a6c195f2a57f013248085125ba67cf940cbbe0a4036735505a6b69da93a79295881416d34392d36bb328bc466b3c35adab0c13c1bee53911dc3c6ee05f0e5314f089aadb64ff788a849040cd7d966a4c528c08967a57d79b3c376c574977acad8ebdd86c655f7701b6fa9cc372aef3f3af8eb3b03434be60f490e67d59824a17ffbfbea5984b146cc6e252327185ea9d1e5e631b750c1b384482d352ef69ef4c5f4dad9cda216c8264c38a2e5478747c075f1ca216e071df10e99ba7e2ee25a3b4d66c39bd3b0865e50f90e8f4045b6ba1065b7e24130a8fb9a89c178313ba5b53ea0c47c2d8bb153a5020b4a26f0db964ad9da9f6b046c38dcc56eb36749f5fd435c5c4a9b082580dd04f50b407e225eb78945a5c22b0f59ebd5353d1d2afbfe4c17628637921a1f6cf3d7357b0b21247499a1138584921f1a3c46302b2384600ba488f3f1b3ce84e9d2c93037229d98af899bb67c267e6428654840923920d9afe3eacdbdf9fe5cb9c933b39a3addb417ac1b2b052fb1493142f3fc08e6473c2f6535dc31faccc596a5c14dbbf6a25c2bac0308b81c32b51cdffa004d86d88f32c815bcff96f55717d9d17e76656b5433214ca601dbec36b80653cda924c3e166df9b0bee6382c2539ddcdfb3c6dc7ffa9669cbb4355494593d083d6bf8dc1a13d7de74a95839f3812842ebff15e015dadba0a77e0c2e84b26cde165120c7ba5a4a7e3e6b9db3c2c7c4e9c8bfb78ce5bf8757edea44375a6b998f64c1450760e547d0aef16d7327e00a7811592c03de3b9797cdf55b7ea1f837dbb1bf2172f40ec7bdd01199ce0ac2edf82be19ccf0705bc3acb50928ae93913b3faeee8488d4784ef6fee81dc981da80cf1608c9fed503fedcaaa65275a3856b162c49e96b30e09b9f6d516650a9397ea56149dec2fd76dd4c89bce19fc77e45514151308c258ea3902e0afcc324d05892adf8244f6d41f2e8c305c421a0491915431c114b3525be182067da76ed519ef11d77bbc5ee77234aca9fe3fd07f7cb169a562d0f3e1de2c54fc9257a6a0d48909ef09954b6b3c44e455890a185d699a9a3a7e5f7b9d4d0a2373f0e4782625dd87edcdb3cca6e21dfc82c34d09e7350a7949dbec13c47cbdd2da15f334fbbfb09f1035cca104748cbdf5ab7bd888851bb4ae46f9c159f12dac07d198db10220143dfbf8dc199ff8791442787c99a9b9158570d480b5aec66628c133c4bba168af5c0d9752b32a4f00909c154b762089763b2e16730bb0ccdc0a38c1daafa4d72a1669522937370e936fd9970c631c79158f2aea47185202fa4475c241057682a934c4498e3b3ee9b144fc0e06cd87577e4a947b23781d40b8072967820733d95f053a6b0ff466a35f58700bdb6f51fc4fc9d9da892a63d69f22e6c876fe6b4ba7176058ed6ddcb0d41ae1569e881a26810d750494063d332e51ccc75cd467919f46cc48b26956f7948f4118dbbed87ad86fc9a0faa11712061ac35829eece980601278ccb40ddd3215fc84d82bbfa0d67c54ea59c78b2206b90906e79fa0c097582011af2c4b006223a8383db292116fbfa9f1ec5115a76d1f52a0264439a0e21f552713dafa6ea0a48c819883612d7b0514dfa1da88fffb69745c5b48f0e8d80070209f6620924d7816ffaa19a3dc72e8ddac36df4cd1f6f01e0e5448a0f25ff7bd5179ca997e16628998ba366ca424ab6016f09f6201394397d8848ff98dac031cac694c9f7ab92349d0793817ba08e92354924965fd2c6dbb81c193f5cb20828b1573bcc7ea7cfb625c95c689b7cacdd3792b401aefdc87ea03f398ef1ad580e1afd27d7a81398bed0c94395de5e2d38486b6ecb2cb5fd8a0dfb47c14801a27730dc3a6e6bc87a0902d440aa19da9bf87bda22d1701e14956d4dcf8d57eed2c1e75831d97c6f5417496cb6886a65445a98e8d1d63a702dc2739cf35ddef0d7c89951174cb2a9feeaf006d554038ad0dd1dc53e368e10aea80d4fb9ea84e049641140ab4d9de52ee7b4142fca56929d0b0bc539e8ba7eefada8fdce74628b1d45ec15c01fe58fbdca931499b39163cea4be4cb82e025e96e832c9d70db2e85644cc63c35090df4815d8a94bc6f67a4a8c0f7e2b51141d77f40a8df3b99d06f8a6fc1f2ae095cd5541c0f77524e38d648cda3d5b4f5c71fb9ccae10ab2c7c4ce765e2e08628fbc5141573d3a1d0cd3678af4da3daf211aee0a4cd8b785d89b8764bf7062bab562796e35f95dd1ebc464dc881970e408c271c6ac43ba27d410be11f1c23aaf04a0c1508e69d12390714339399a37e65dc8400ee7573c0f25f08ed9ebcb70aa3e5140c4b73bf6988ea6b5b9a6af49ac17fb6e9114d6dded966590218971f8bcc58ce6198518dc8a0b83c1056a18b52f523962efa26bdf465fa4a04fd529871fec51212378de18b44cc8d84b034366fc9001b93a9eca9345f022f61ce62fd30762facc394fea674004bfb77fa0e3319c54dc44a00c589f444936d41f7f1136df34cc7deacbbe63b7bb7688993a7797bbe7baa66d5cd37159ca1df11374edb3a98e04939a9761e5ac3e03c74704b5901016fd069aa45256a52ec80aea10df29a5bab2aa3bceb196772c6d9a0dd975edf68caf824af878addcb4d8e09fe386856ddeff9642d10651a6c7a16cc31ae359065256408404ca802da47596fa87373cc296a17c6d63217a0155a51669d8cd3feab4e00c84f44e7dd98cfe36ff4bd489bdbc35b6d95bfc48e5d8998cb1231632f3216609280eff97590080f5b4dbb6ed859711ebdb1e45cfe148559fb1bbc3696c7011858bbe08be32fbb363506d8607a92ec140c4736ec71e6316b6285af36bd4a0fa2b6b5594c51ce198be579edf3641182a405f40cdbfbcc05224efd27cd63a8613480f4d21c729ebd9ae8de05e73a4b3cba6b5921439bd15780cc8708b55ef83fd1199fd6a7908350400fcb92c077d2e4a86153287a5b7b596b65302727427064e24406675977e14a565789086d895991fda10e5d606288778fd7a9f4131e5705837543854db59c373da7046ce2cfaeaeb99fa584d0d1f6965fe8a1295b7e2676ce589b96701e1d9eb6cb34d36c3260c2a3717c1bb232c727c7008341a26f1125b95479cb2c9fef34b258ef0b07578f2c4faff6216f47c6a650e0e22b9596ac45e2346a880321c9d6d3dcaaaa10dfbff5212d4eae280c9941cd0fb67618ebb41bc38fd2690548dc83b1ae9a9cbf8bd5773bfce412615c042d7c72f23cde3eb538724928870b964f7c21afbdeddcc57b532c9c05966d08013c1982aefebd8e2aef16ba404fdac6d7037f08c909a29a5ea63918d185226c8d74dff4ae1afcad604c8f8baa822897796f36d290da33001044d8018fb4d759f773e2d7472543060ec19ecefbfba71c62ae7c49afe7af82125492117ef576bf7e1a67c957d57129be225b979120d50779d5e2d6de09b9b2c8077fd2cae3f3ca3a3d7e2c63aa4751748d24e5080013d4ce9fa704d3e4493e0855a4ff74ab8de8578e91510b1616c4dc1b15d35d05386d37f7a6547868a950f4ede3e05c80c5056453ae04b6525b084d957551a2b53b55db8484ed4625347d97df0ff768b1edb315957db709016d2ac923c62e9002185e428ec0f5ae7ff1a217512a6c7330da56ef531c3d58c91bbd0ac3a5c5492fd925a9667bd22b758860c9bb2c8ebd0ed519110002fc1af279dc383e5f4092b93c2835065a1c055b2f4fa6ef9a2493fddb25feeb50ab5f4f0a9c5c6c974c62724873b4a0b8d327145e7cc4d98db4d78a01ae3705e071bba5397a1e3641e172ef3fba04e7384060ee11f761ad00bc0bb3a5fb9e7a5ab00424ba94db208656012c7ddad62d91bf8f2067607abf4a006e913cfc058c6fcb1f90c867a4733f876a65df070594406b4904d4e865ec24507b2a23a5822cf68e740b88b05eb1e7e2a53fb0658061d8c80611cbbe90addb6bf73890494da0c6ebb526faed7c7c3e955db7bf78f485efa346d53b77e96e253cf1ea9614f327ed2ce9d1d39790ba61979843b16f24d2d5afebcf96f354ecae2952e52dbd870e1c967ac8918a0e5d89a12a4745b39d6d2d435c35e43978b5db1251f55e85f52794939be9f6950f7f2737dd6a42b596aa25d8d8710346a87406df7660be08a7c953986f043ba985b87fca48b02cf4562e1b890bf2349bb6a39721ce601b0eb36cf7574846b610bd457fae1fbb149d042bebbfca76b147489ab7e608ce6fbf52c5efb520d0d4189fc3323bc79a755085d2076406f68980a3a6b09aa6589d99a5347b56f459e76ad2b8b707bb09b0ecb2cb52a7e6eaa79c288884982c09d23551201588b732caaea98458efc766e25376f0a3956c952da68cc6c38e0197757b28a0b50d34a1350a7ff233880bff32b7284731184be454d9a69f44f2747b0a2d25b14e3a579e729790eb3e9f6d90a670c2e320d6370b0d8a2ae280f962bb60a34db41054cff55a8cd6eb4d52596045844f4b9d9fb2329192760bf8b077042ea7996de301fba59abe8a28e180a93451030bb1b6e35750bc024391072ec87a3befb06d459f04508149ebdcd2ee3e59c7ac4a3d534b7b7c5bdaa77c3c0058e419065100659fe0e79c696206f1baa30ba484ddf577d8028e65122d29ef9717698ffd9a25442370ea92d2f9e99100bffcafe40e1676c419f2b5e974340220ba84c67ee390b547ad8916ed3e834fab89caf455198f3185e5a6f33f5ffd3b6487911def2f07028e29d53e66ae865dd9e393bb0e221e41e32f981d318fd70a68486c3d55187533bc58c77949f12c1a43577bb4b7688d446ad2fd5773d5aa06f0c3929a4c2bf1d70f6fa731a2f36f45a5a6c6df4353027eb1306506078d82a940e8108fe540f8d330f3b0ecd6c0988758a7c0ea56c4f67a03d621300257abce6607cb172bad390d331076ebfedf5d45bf1e04c38d7605c6b4506afcb97a4f085df600165beb83cc0083ccbe11e41c8fc2a4ee78cd51bdc59c91e96f5fce80a8411826298b283edbadeb2e26a62395904de83771d9a0a7a97259331e0ac3f6e489850751f372c7d5acf96ec96e2c908f18e9d287d4ce529fc9e3d5a3c8f9e537ff55b16c1cb7811b36eebcd061eeb076cdb264a806cc25b8554f0b80e10bae00d8aa46f020a483845378e23dd0e01ea413ba9ad0953735007c8e034a1470a109a6f896b3845697b246f58ef5dc63c9d9ac947ac106f9fea47b26987c41c4c2075fa0309831b552575ed37ce672f505744809f74affa115488ddbcbc19ae13fab216e002143e13d39b86e0e5a70dd4197beda4c2c0c375a083dc5b64192d1c59a912b868fc66004a49892961416b89d2961c52d38ee6be6fbbdcab7240d440e30dd3a6bbb5bea0b870b0c7512e90111970aca4e3020b683b0a66ce899cac4de2a3b3396db4ac33caed82b9d5794a9b390d6e13a4b7bea51c5dc534cb3063cafbbb4ba79103aaf17dc67262b3cf33a18b70a54839fb88aa119003a95f42aee80101307d0a276a22929b6ee9d10260dcf4598fee04644338c2cbcc6073795a3907586f269a0a7201bd78191c3b9265bd779e27408570f1bdf9007f15b2f9d6d3fa42b8b000a6393194f0a063fe17e144153ee9a8ff35f834103b82bf6d9cd156b672c700de3895e5ad396d9b0d8dc5eb590556d8d98cdf6947b7f6b442be1530442dd4d611e650c496374510ce8875fa3c323efa3d6ccbbd4fd7970420935387339a8ec357b732eacd267a8aa65993848cb1c89c3500e3e4e91c6e42a0e48389b7b70af754bed8126e18c63e658cdccfbed38ef4681c2b3d0d9532f6564353097018f284bec87949495839801263dbce37673d73b679935f43737aee70acbb367ad5a46761f55a73cb0b7de543fa1d2f1ca989fd386de13cc46cc254bd174de47b193ce69ef947738f563c6985b41570afd9532346cbdf438fe93970b1f5c028a8f3562e8b0089a0281e1bad74724e9889a06c7060205f0a0bce834b77546c057f3e60526350d973654fc53e1a380ea0e836b5fa6a8fa42f9338dd9f68e46392ca313b585473eec44fd6228bb8a046f32e909df11fe09551562da8a1b8be6a762bb669bec60678b8a343f4dd4e79c5bcbca040c7e4654d584a856e6ddb1fc1a792976ec9eb90b678268dedb7dc380d8fc8590199cd7d412c3e927662fa0ada95b5fcb5b44d2ff78041380e280516acd144e28d285aac241e951f1c982b3756371462bedd34aae9b3b9bc603fc2ab89251bd28d5e1ebd7fb465be7e5813e73afff3dbe1f0ea086d33d6a03d67caded522532b443302302685fa27a9b778c2397a2dfdcf1e46e6d58f5b2ab0a1a25d60c3f225bbf46fa60082469a5825bdfe220c0d33f5d25a75ecd69d97d588c3daec2476dc966110062fafa85387b59b3bbd5a9c48a99aab4db4820e8ed780001a798e17cf38e299dde321317481788a7aee4d4b02197c01e02dd5cbf1ee66651cc0313f281b15cb17e346d9adea2c9a79f534362307d946adc3fe78f9fa31dcf1a99d7b7e7d8f7463a6920d4160e404f673a5c64e79ff44cee48834136e1e9fdf2e8e1c59ddcc1edb543916cc975b0ae57c5f48aec267778ed0a88b99dab29aa1f53030d24cfc49c2eb20cfd0ccf464d2920e78952e2bf3752cae3fc3903370e7e15cbb483e05a77d544057914c42e115ca1eccc64627649184080a7c816a1e87841e9a35e7483a7d65e3b5e23a57586bfb576672c1d94c365b56dda09e2d1527156265e880e051b8e4f9fa7157c94becc7157f34ca2d06bf993ce928b00f947d1df74308cb41358cbd44ee1ccf982f0ce3e1cf4178b41fcf9f918c169c521dcc704935a7cb212c4b92f58a8531df194acb3e6e5fb9166317f6847479ab97278daeea823b957d9b86fc4cfd4792b9909ba3c1b5b61be8b9ef3a11383f9cff25574bf3985f750377dbb89b62351b4bf0e2f368968892a413be0e82ac646d571f7388403030d4a467d21ab9e5c7373eba256d14225c7238e055e9eab9a201c621008c6fcf660bfd733817c3bc72e7d1360aef73142a7423e8e9ea4d06ca517a051840845f642b9c666a771fc19a49b6377e06c1339de146dcffa79a90625cf1bbfe771d5b1b2f6ba008ad011e7e2069fb7945f911b4acf744c8869a3db77bbd5c44a73e8f8b7b69b57f5bf07b661822dbdb5f9764dd301b663b83312e39c4534ce6a65d3152d9019786b5e1780017b309c02ea33868b5b39d7c8099aa3c2e6336e5bd8c41af57c2fd9b352c501463f88acc4332714e6f67103fbfc0f6fddb6f021c36d2982de1ef23d0a0251a1cdd91747311daafe2263904d7b3fa68c97778adaab497e0599024da69f6abd5ee5dee339e096e8dbc4a2f51a3097683b0237ea0f78c66e87fabff65b56bb1e1ade0c29bf2228759b84745321e1d228d12a9449421752265de26b1169a3b11bf7ae95469e99887f2141bf14cbecc516c33cdb5c28b7616fd23ea021ce59c643832d8a6de565501202e9b9985274ce532dc5ad64ac88b0b39b0eb0a1f58154f1779f31be00d978eb57b13171c698c626f89109887f47c7f452a9bfe5ad02501397df02277e2bd5afff61870de32722cd4d3fc290c601668379d7955445749165dcf578138daa879b56997cc3967e086f3eadab86eb54dec5b1c11f96896710bd401599db1189438e0567b176baec0d95ce50604173a24501c4a2338e309ab8388d78365577917415d7426ba3a04bda95d9d0f9ff156225c7aeb9b03ef76a9aeed80a32cc9b8bda034c0253865da8c271ddd15249b323bea9d06415775e7ed7b273a98ab1f533079d2c5b1c9aa4d0022c10f95fc1fdc67bf96ece83014a182d11665c8901672c16c95261a48855a39058917715da9fd42c11c011cb722925712fe4c1771de0109a240097e78c57df51ae068df9dcb50250c2ca8a1b9ffe43a9e202a228dfb625ce090fcecba6e3ca4f1b5ceffb3c50ac98095e54e3db5a565660644dd2ad13435d696fa832c33ba9f7ea2ca2c2c31cb86219822d983d8fe5fd55f251e2f872ab462f171de5f906d3dc98dd043b71ab71226e8ebbe9f371f9c139ede624c715a5e4e7c097a813ff3f09baefb7336e63f3f7aa7435a7b3fdd54bb297613c03d3ffe576744f09bd664954eb30aaf24cb23b19d2bbb771152db4207b66dff7328b323abefb739ba8d72caae15da3c4f36120314cadb2ba496228b67f1b1b87227cfd1e6275a788b36c68f48e2f94f59b97e317ab50154de5e1d140ce67ca2ade85f538a15358133a1d640f4711eaf333ea9542705d51f99d9c3c8c9a2bab6bb80239354671e661a8b6f4451e68aad6d9b1c2a56593d0f26e1270e8b157d19b9e51e926b4dd18722beb4db9605427da886fd00dc8ed3317973237723b34152742023bc8a67c43bd46fc3e161edae72507eb51fcaa46ec8aa94ab2f0ae01e7c044642c1f874c1703757335f99644f1506d5ac0d872537140db3bd284fa73cf8b242cdb4d3c02cae9efabece375c923c12ca1e82368dfd6d4ecd67a61d243c4552a3541a441f4de7e53e0ebd1c6fc270553c594f03ec35c44918aaf5ddb864bc4570ec24ca270c1848da9010ddbf795d0fc228f7e9c4a70739dd855b584aa7fd4112dd39f8419a441cebd838b3ebdf199469ddc223de10ab77ba93f2b04feffa6a9711ca51a6afe87206275ecb231b02482cf2c9117c226218c9b479a70ed88a430e6059eb3168eb8b2efcdc70e8d94abf013dbc21377673f2daa3c653ff2f4f1004f30f9b7ca50cd67cde191c396afcfd5aa1edaee601eca002ea100608fc3b9702922009fcabac0cbb7d3fedf795a683f70a96abde052ee3c6da8070d7a329feebf490e640977335ce2e0285a9747e51500542e838d60c789677cccddfef4afee1f855de1a594933dac24e73e8c5590ca70bcf2674c610ad93ae3b98b8d3d504f7ff1271d94b4ce810d6f817f4520e80aa6285c70f0cd22f5dcf62958c0eb2ec51d487ae0f0870afa950e343aaa024081529a71520fcd390a0e795ac2e5b10ef8242cc9696b7be5c8b4e75517afa9113e00f8d50411f2e04cf9bd94af983c595f7130a573d6065c6bef30cb44d8820e2a17c9a6be89a30c7d57fb627c5682c369d1fc0ab1389bf2109f10f70e7dc98b0b2927f6919baebdf6bfc59b0920735853f708fe5fd105a5708c53c9c3fbee77cf22c95a7964705002c1f7c4e30f8f95c125073ad164e309f18d7fe766950a4747fcf692fb4a1ae70b8a825292c18c90717f7b5b3226b1ea21042399556ad9aa2c3528f3eee42fd8e3baee39cf9f3c6d373f29c892b9753154452fc06fbb11a8774a823db0b3cea5570078455212f6cecf9de06fd1d96ed4ccf89da68bb9d5655d9c8c0edec2e4dacf48b5b514ba822bf447883b41dd7676ebea9a4721b30061f165b56ef20a612b8280d0fd4df1aa608cf82c9c22053f223db15943c110f55b5f6a58816d2acbde4d68b0e7e726074b1ae75dcda4d9e607fc72ecfba78deaf5ec6e77b288dd43ebef25470ac016c49759cf52bf3b18fc79d4189de4a45362fda5ed3f28871462e62f6f7928dda2f633b508f85d3dd16c1708baad91806d6d069d2b6ec859e4cefc3f387573d3f66b16c2fc9c371205a837284d05420b940c0972b0e81348d00602d8b09881745e5e8249c4c0a93d84a03acc9684ce2baac69e8f3d897aabdc00f6d78487f9cb43db602270c39459836b005fb4d007cedccaae3373e3044ac0172a99aaa666e986c4902bc88c163c3f2693487bf0619855a5419123b60b3a27ff486acc86aae2b33e1770f53e9a867fc73d3df25b7404e1b313694be2ffdbb63294c6c558563642bb4eac04cb3bbb0ec086e0bf68b16bb9dbe02dbbec14d48dcf95d2ebb49d250034b9c02a4d45c9d2582be894444ce1102ad4b85cced337064057ef3240b0786b455a2f1c7e00874803e8c00219d7c900b960f903ea5c2420bf099ef3e744f657a50ca126e8ebdc4aec9261663d2cdd752a9bb019a673aa71bfca5472c1926dfa5776d94319a05dfa22e8b4856a6e93bca3703723645b058301108284941fa9e39eead0a5d56eb0359200fb872219e5874f5b1f4aba9b5e8da842b6c76c8792c08b21f86596694388c00636446b87284e0df7a669b92ed1d90a62303510dc69d7d759ae1359343ac3212aee3cd58968ad3e0be580e4024927bdb21d4400ced41c6b119dc4f4c8ff33e35377869ffe4e404e052c1dd6d393691e5e99a4db81681994c31497a9b413930fb8467e6f5c78b1001579927bc649d6ed05441f588fd9646a564513ed1916211670df2e96075d8453f0643b135a419a07bc7c58849c816695906f068766e0c9d5c0e3a38e7dba3cdb2e2e8a33f258557fa294dbf6d07cf8e63173ca41ce55a4bfe04a7b9621768cc7eadda9d59808234ac500d095c376333c958f06102fd1f377fcd05bb0671134e9adbb76fdf5ec921caaaac1f8c4a9e5d7da0d4901cb6c207892d70933132d33bad6e5f57a346a772523831df095661af0aec79711c98b12cecda9f94eb81bfeff0fe84d203d04c95ec9fa2a9442f45ecd6ffa85597138c21f5435510ba051265d552fcdfab0ab0363635c23928ebf600b43b7cf9d5740613dccbbd64853d1937245abff1e578b30a4875a1df0a43c45ea4c952d421b7df5eb2bf902530afffeffbba0154d50953bbf923beec6ec9501814c7d9d35abe403fdfa02abb085fa5de850f60c1543d32e59a3d302cc5e28cd43ca01d0a445dced6455f0d81d62726d5d7aa3eb589f5ffb0659a1f3601924ace5c5acc80b5a873fdc07f935eedaee5c8b379669fe9f143165f8c03ea2c9d21bf4fc6c4c21976c30b6ebaf020f4c14a531005483415b87ecc8070b236fd1ad9f624e15a6423712e47b3a9cafcd395097ae8bda38cf8fc2182b6395166fa970bba3fb46465c376f9f0504bae262114e2b84d7157d8e552ebc3d24f2d786bf7b20154579d6266c72556bb5df06b1cd936c42c22eb62e77c77f3b001fc1d41070d0e7e1c9b95e87638d2b164cb380315f1599bc58ebf45d00515f1c779bdbe1fe47e1157ad51f1778323f500680b5df44b62beb6fbf26958c0554f467025c1e2f7a3253646c654ee2e8c1d05b996624e797ff77a888398abc5360602e6d48f566424fa4d00757a9768e367f71ea28899350873acd214b4726f6c70c7ca83a551a96a8dc685758c32b932ed3d4dd16eaf70b6b77fe2b08821f2565493330d31247601523e721c8c399923be75e2acd4947b26f34180f7ed66f64a92ee1a00a4dbd823955501bf6d1b71012ab0e3bee264aea3e9c6b5bbb5c7ad4d9a6db6a105e44e7a4664eccaaf93c11d18058e8a60dad564fd109bb835ac31a24f684afefc6bf4ef25c2624eeae6bbe946bc95b5939b111f4955b1728f883cd4a50c23cefbd65b25e37e09dc5bb55c5f9cd1776f9a165f2dd1b778f8145917f84b6c68da3daa98c3fb8977da2a41c1e7f80173588d74dc4f0496c6411be8f40048e2dd363ed167965514a7de1e5ecb2aecb6fa8fc50e534b90772b423fa952b3c7a7bd2234eb59202cb5d1fa429c18cdc9cb35aa39b24e422d1c0ea3504bbe43d22b9af5b6cb3a0ae3fdb651fb164df508b3e3262459d9bea3fd200de1071556fa1e89f4aadba746b804daf714f8a6256498a2cef2a0522376df338044589b91d98e8847530e97157e4fb0ceff9f19ff8359232860524970553781b023eb8327aca63b785066c88f6faf519accdfebb5a8ead5ce2df333296b7b52282672ec562520f6fc94ce62a5d73d0e8adb0f25302c602f0330bb54e010c75613099eef7da008a62b48287c2f57abd4fa8274d2b21d21ee604ef995b04a7d3cc36f5a8010ec70acba068563d346a770d764a33e2a455d1ea5f83cf1e24b2db38234817aac4b8ae4ba026c501ba3304230fbba87723cbba3cd4577a86ee740f3cf54b07515312508f0e6729bd3ad83a45defaa5cf5f4a66a93bc545bd50f5b04ff6fac7e4dcb774c77907d4bf82bc56b0d5cbc4a5eae3ee92b91615311cccb290d2efbc9746ee8e051cb6eef0445c32991ffb269b459f6cc22ce07042274af43fd356aff1856905dd2d7c0234283feb0bdb6c2f8f99fdd6577249fc7d7ec8ba6496202a360cf6a53ac4af32920255d40de683a1a667aa3ab5a0f2c0a2ca263ac2cdd0bf58620bc9a6cbd0f7f016774798b10189f8b169285169b1a23ce1da1bf0dbea149ac146f6726de3d675ec96a62b147694671c44b537dfdd3210a8ac1e5d79bf6630982a5c333fb1cbdac514cdac01006faafedb854af525d89ad757d6fe412a5af585bf7b0978982b13cb3d4d11d13ad45e6faffbd877175c298a7c9b9decd2301155338afab2aa463235c88116d0c557fe77f18670f1c709836b9381bc558033d37c64f6ce473f99864a5e155e6c1bd5c4130dd0c25330158987a96c6e7bb66918a24684cd682fb6d36a57944edcd6fd5634addb5410e7b462714fe169ff9b10534e54caac6b1bc9eb07b842c8a118761ffb3dec535f0116e3fe178065aa2c947a96b427e8a2a069275cc9fad1a500f2f8ac46c21232de2c81756fbeb472dbd6dbc4b1103d9f155eb1b35da6518a590f06716786ac5a7d301c764e0a163ad8846bb4d6b450bd3b72f7c7ebc34a796f36a6e79522609f1132c93cd2496d992a9b2f9aa82d16c3ab5a282e55813f54aa007e02811df8104fb2c483469c40b3e1542484cdbdcfe7c7a8de771385be677f808aed35c3c3e9c6da453d79ac81001226347e40a44c1cd3aee3e0d0e868f96492a4b911ae4f68f736cfd1bdd1c13f9378b9c1aafc55507bdbd8dcfe6a76ce78e8bb19f80ccc093c4a6b9fb95b309e0346d0ea118d9800610837f7fceee51e6f6cdc15e8ab526aefd36baada080d9d972489816b7c2ea2145868c4c3382bc748d46ae98cc55b006831f9ab8d9f07f8dd97f6dd0e61bf8593cebafea8b829f7152f2cf24acb2ad6cceb8015882255aad6f9ac79e582ac700b699607de9423fd78f78af8adbbda2967197f1e65945f2415e7fde902efdeefef4b24ba6031e679f03004b30294ea3fbb468d5e0b0b6fc69c84493a95f396a13dbf9a5271e5441d3aa29cadccb6d4592c24ec986156daa6516b31d673d51f68ae0ea47732a8da77211b2a7a0278cc58aeb95ae904d137faa62ce2464340bb248ca1769b11f47a948f8ae782f07d8265c75898ebdf4ce679a3c03d1ceee6ea85ad048b7e31b67772cadc6309ec8f6ebcfdfb20596b44c84bb10e998c3ae23af959e41d3e62badf410aed359af738bcde67a978ad1cc5be59e52782a6e4588d49ce1e5273ddca66ca442ac8cb4fd275e3e45938ed31864897faa4a0775e18f179229a60e088a447d114fbb3182f082232998c2e6782d0f44ecbe864bb36525865888ae444a75ab678d40ef3ccaea4f327ff6f9d4f5df4f30d388c8903af9d0311ecf681ae806eb4c4c819ee4b9e362351bf63966d84954f205d8c1dde5e3af89f8047e26f334d71a6c1f3ed9a35fda5448ab94bb42b57d58759490048c7886bf47d343981d01901da032856c57461107cd91ffd796e1f491b55096c9a9f88632177f7f1332e41f4fa3e9648df9e79dc027f81863276ee59333684fe6578be01fe2c6176cd77009b71235f4b44a4ec7456b73f6e02de51279ade301e83dcba489f77fe4018c84a25a30506e4ffda8c982acceaf1955588acadae17cc03fcf356e19e829be210b60267b225f62afd3108a620ee898879cad86fc603d25dd005a24878e27f570fa0a5c488807f366e32e06cf31f73ecca6387972eb06a30769e8e68e23177f312aa5dc174649b676d9a0be91d401de857cbc220b4a0ad3266bd6231e9b470020c70c9321f0faef9571061894c8b6001823c8105920cb4514c9b1f7b21e8ab625560b559ebb40a0a07f205c15e736513ad514714d605d24466d8b45bfdcde0180eac7f1362240e295d59de1e60ecb2deee318defe179b8dc155c2c42396e42ef3926da734f12728885b0a30ec6c9cd8e59c2fdd8f4632aa8f08c90965160ce1a7466cf624b730636143f6e786d01af28339f1f63bf754e77c27d711a896e8b41aea31fe4527e7f3daad313eb359be488f7c2134571740e612ec106cb160a4d599899ed5a7e2049f166c8d4a6f1e0c8a5fef1e8e7c59cdb393efb8d9d0568516d2aaaf22dc319f95eded38cc51398b0cd8910f539b93c4f9e5c55ea6a88d420c27e0f239e267e21c5f6f89783b8e308bf5c92c5deee057cf78311444b8b24ce5fde7b8046ecb6bf9d13b337584e6969daf4bf6cd1e7b22746af80bf339c23a16ef382f928ca0948251b87ca683ac2d804e1cab12acab1832c3453faf9a470abd7564550e0e7677df894a47415cce7c873d2a9ef1345aca92ab64e3298086f1f97a2d315d57a661f333228eed567b478740ec7b430d6e950e1e717218893a3bbea5a5a76f027a3780e0d12d36a7fe053736ead7636fba047bbf251c30084cf0ab6e04fdb1e1b31161baba633930c053d9f1c80a36e172ac7069a7a8b77dd77d9c2542c9dd467fab54a480878455e677a7e667436b58c4eab741f3e640180f54c509863a3c291f7fc9a57bf7b2dfa50276a3e11f783899cc67ddb2e39f8edf00f63e7e9d3d3d142d45df509205d6a365b385b447e1067d381033277ae6e691d4f9ecf9abc33645fc1926a2bd9581e2a429568cb74a984d99d49eb4736c6877e3141bcfa06dd35d66af1ccef0df7712693788d39159667f2f4aa0ba57cb388efbc22e4a3c2686f6e8683ddad305e4b8bed348b6c22ff20411e4294ece315a2c363922c02d94067a6167c398355d4cc32e7e2ad47e76a67ecd759c578482314ca79da972f118161f2a09c3a357105b248efbcb003abf8262a9e39ab7c42249ff9a3eb3c5ef574bded5c79a25f875515bbb8654ad18b6130c5413fd9a12ae7af1b5a7033e631c45faf99f4c5e0d044544f11bfd3e5d0c085e9374b73515c1267fa7e78880f68f0eb61fff1069f8ee66f5fd760c4c1547a859aa2f66f61cad4eaf613061f01bc36f685f33a8fbedb611acbde4c90fbb445bf2085990053b40765fb93cc680a589016ac470ba41bf781fe9f8ab5b8ab6c6ebd2729c4d95c05be015f9665130b8b3932b1a8dc15f9ef7f3f7b462e47b63cc7dbd23f4406b4994a936cafe87a4dcda8293306dfe7faa3d582abf7092881f693ab8b6fc90898658fc14bc85d540851bc5eabecac4e1a2a40c626fe5d6ba316bf220378cd5f582632d84e526b18c3a214c0e39179f0d66637e680c60243d50b887ac0355fd397b92244dd53991922fbf85420fdacd1e72c87fed6be388cde5669734c088a52d15f8344a680b4f2f1cd3d17c01dea2130684a870e044dc851494c6be54386e8f83778101e2f1228a025cc69f0cfa5c754eb73e9c0e75e06b313d4901d10dd5e7f892d4493d47b0ac2620888d69fa59d3f381d6dcf3626ad906a7b967a2a561e380e0c362959d4abc5a13be4f61a63fdae73476c582241ebc2b2664c1e3aed40cff3881be15efca3d1399d5cd759a86b1908f4d1845ade02af7676b6939fd9a8b2488ea1cf272e22a8824eaf64fdb399785e568eabe04efcefbd7a866917f4cbb8ab1fef649a191bbdac4ef8de9d305f62bb11ce09e0288c658bfb327257a3c85d14d8d21ff523038a267b4ec1b8dab9262b2a6af9d9a2678b88ac25512c84c40eda008c0448fa8dead74081d59177ef4e2ae6e723b0465000d11606536dbb282783f0710be559c4ba172fb8b37206dd596a0445d9969c07d9bf1a239c9d195fd59894d2953082625ac4c9a3225f51e82a2685b9f27651cc317623a558ed7fa6dc42dfbfe4485b4229f280e0ae7b7cce3eb4b6b232cf51ee8734172ff5b567eef484b8342731c16a2efe8ba66b899bd142bdd43f428adc1e39b92a64fbc5ebce5a9c6a59563b784f2491e5021e64d1e920ec4f88d0a34ca46e2faa55e8ed7f76b468647668e960c7dbdb2dc918a2bb57582f43f2f3e23a5fe28c422de126a75b603f3c7d86aa5a804c1fa807f212e4cd24f77d672f0cb2001c4a5eb323712c50f2f7c833d4f4dba9f1a15e66439f7338b05605279e524db5fd6cce9ef8be9611d91845b9155a61bae8c126184080f728726ae7f1eb71fe0da2cf8ad0c911b364ea1567d646f1634c2d86f07d698d33da3fec5138f53503a385b1b5bb42e8de496b4266be470293ac8a4705ed478751df28a9eb43d4f1ad7132d0568a8b7d670d7fd38d20a739c4961298f93822f48120dc8912d1b8192061310cc48e2af24d7255f81edc6d249130f6bd9871e2464b97c59455b5322439dbdb6171d16267d04cd87eacdb47aa2bbc0bfde2a86438b30a51f8d751cd1baa54c55750885a3ad517c70d69337029fd10fe2697b7682f2cc2ae0364580ff55ebd9d0d944192de7c2cf5001fa7fcfcf6bc9e996e40bfb8511999f34360bdb986f3f58dc993f67013f6505dd8d44f7399f33b53a59ff100b72b1d390d9f19152efa16a8c404fa21dff792f50f9362bb90275ae1746720239a480fedcf1bf75dfecc3f887874e3a7cb1edcf49f01fe26507a48796873df0ddb8b9482c4be8375eab2dfb862e99560c98dfda577dee7f373eefa07cbe367d03b576b896c5327ca1b91a5e22a9bb0d024efd3bb7b73c25ec163183e1d7f36ec87dd7bd8c2c52e9efe6a0173d31656fec80718ffc606d2f7260be866d95d47e998a77ca7ba972337e2b0cb00bcc626324e8083700b7bb8c95ea24fdeed2876ed21477ded830e9653c95b2c3f2ea1af31cf16203a61c9fc9678bdbdf6a1085ac5bc9362807e4f98c498dec6be92b4d858bb66665c44a2c65b4c57377921a6f26f620f3169886249eb66c2ed358d49b5e464f6d0df3d6145a9887d72a9e94e2029c8aceb4484a42217f02772286b5e30b7219abc5cf85ea1cb6aa1ddf2ad7b7a05529171470a1ea7af8bb57d491d9f7d30da9108feda83bfda2d4dfab098f0ec4bb646b32425e3f50d9408ec3f970037c017d62067865b25224e30b9315b6795ea4967d73590b6e6384b6115db1f300d89c8c27b7d62d6a82b12c51b1748ec02b3ed5a0ec1f4c110c50d6532bc36734231fda2d816e032114b73f97f9358e8b2c3dcf541365c57845738224fb70a2af078599bd259e7347d275f79be42580c8e7dfb65b146b42cb53c3ce20994694b1c1d41681e9e90c9cd0ede2c353d57d8b1ad2f2667070960d27f1a7cc2c3bab4f477d7307822881154cb2da0d26f70d81c5002e972c56b9909310c2153c8ad592d7bf82d1037ae5a35a1b2391373164401026d224a527ffd33390fbb1be8f0a02f733ce18361aaff7904470bc128218a21e2cd07db725d793d30bf2058a53ac9ef8b8a0ba43a03cdb0a35f2cef349c024516749e70e028fbfba77ccf348ce4c15375747f74723877b4ddf12e6c03a084af9756d0d509a8ffe5e75308e1a9a0d405b92069cecf171aba5e45ed3a604a83028b132f14279cce6be032020916083046031e8594a8d54dea6db6cb2fd7e8661b813b4ae03c5b2bbf2c73e666f956da0bf4e3c5fe3837850ef2c2f7e598b0696e5f988427d38831664c1dd39509d05eaf93068b84b8c0ffa07b0c16516b50d2132c03ae2420824f825e2555aac55de28633190312694f722ee66e0d031123364dec01b02ed4654939c4a48e1d493885245ca4c0de2395cedf456aba201e5e657dcd87e6498d2f9d60bccaf4b2cb51938d6f4b58588fa400d67e18fbc1e3fd83272171f8e824ecb4e759134c6326d710161e209b37af6bc712c448c251bf8916cf1f028849cb6b84840924d7f93545136c230db5191e9f24d44617fcfe41849e499b86984dad842345460a89b1a65ec305518110dbda65cd4e5cf9c1c51e40142a427a1383eb1c9bc5284bf5f3745427e2dcbf26328002d7b5706376031f27e5151132ea3c052d8148f5f0260e80fd9cbec59cb73a1e7d9afcc28d3ac53ab282423bc2c017cb805cb0730ed6e97f178316b283318f08fa69d2540508344e17f61b259c6c9b1b742e0329517732c3943b5fd623a6ae888893ad23a74d69922137ed7b88ee456845b8b9ab09911e62282ea14000f96924f63647dbc2cf2660b67bb364202e59a5520da540bf566473066fa55574a57a4ff123fe7c85ec2b013bed470cc9ac13401999c28ea10c2c1c8350ccdb31f04842839e973f116d2a56e3a726b282d926136c9cb8a19259fb2728cdf8a1e97935321adb4b902f53b0c272e8d4228f3dde54738444e82c19a420ac0f7a272a3ca46ae1c333d6e00ee35d23d1cdf32237e8e4e7346f92547650d817b2558de09e185ad8d97df09eda6eb157bf58bc33ce1a3131a22b7c80f054b5216b82d147171c4353a3f0b2069fa21c4036a1085b16fe2ba7ec7e09ec341a87ade6d30d27d1b3e2c0634d610713ddbff2af6aa293b31bed9619d09a13e745014c75ee0bfdbc8a49e5984a1e62e821dea685f83f2bcac5a8890f4f3af952b6ffbac70ebffcadb98c1ee180cb211d07ec64649aeab0ff0783c7032573273413b840c6570664501d85dbed718499517cdfa1dd1517d23e063fd1c6e61380bdc858e094b2c8d101ab4bf23c723f4b7e5606307b24f32e15b448fa793c46fd6cf856c4a007fec114e77774f6af70ea9703e85a13efc61ace5c0e3cb67cea8024fefe7cbb8e16300654a3227c0531e2ddbe6a2e65ace1dd819ee6f4a5b324380f064b3f6e361b2832891507f86a9cf1f1bec6fb9acf2a3a69b89d72384d13279ff49121aa6421d9779ee8428a445690aa3c7b2adea1b091325fbb2babed5a05c69844d74964fc4953447846e429c6f5ece93e817e0c01146fa380b3e4144a1fe581b6392a192abac66cd9109913810efdb416a4ba0e456aa875139e782ad6295b708d03dab23b77f55fb932e62642b2b9bb22ddd37ae1cc82d80b01e9bee80001f20fcc33d4b90691d653441f82b1ca9c35a90d3bb4b83ada52b5ffc7a6a836556c061b55af9d955619edd976330e939151ae262a0918347f64fb23b185bb32cbb9b4ce170a4470609356947994d8b995c224f86d80657d3834b14e3eb684fe42a31cc2ee350868ba45abc5c40dc54581e61211eca56b888695eb5ad7e5831649ec075f28bd5d4f049d11e8ec5f9ddd8c1354e58d2999b362a9350fad054ea80839c7f25f823e1ce1394c31a017a229237abfec0f622b30a04f1b0a2aade52f407ec3d472aec6208fb43caf558178c8ad04a2fd39b953f9ff5215b22c33e9601db98346de0a695cc1bde0be00191ec0fbf3f7c6fe3c6bdcc5ef60fa74f68a0a906cf25a1ee28be3ec2821b73a51e74d240592430ceca8db12fccf6829c8f4701286c513095c706c0168b6adfe3864df644933302f44aac5e965708269667918380e9b126103537de4f92ec89f57cbe2676729ca6c0c631bddd748d4f01466747a01ae1410254ed7cd1c94bfae7139c4d8446b74d03f40e8bdbd1f8e9dcccd5bc1d4d15a40cb9b659db8a60bed24dfb7a75cf349c2de73705a475a8c40f8b3fc91b3ab30ef6eebbf2dfb457f542fe68850900ac248aa418c37daa34cb4f09bc03df9dc0765c15ba0f7afcd283433f81cf822e5dfea5c9fdbc7f57c89583d5e50f860e858f79a12cc45783ddf379f632651bb74c189b458f604c51984d847fb67e2a953be5131dad9c4e34d3a91ed7b95c10ba0879d656342299ee3155931ead2c3641a4628b6de47efcc437582d90c19e2878a4945a6f39808a7062e3b4d064ae1922161237044c18e0647ccccf9853bb702109fb8e31c34505345ebc0aea0a84134228f51973a6f8fc01207ef53232059529d7d45f91e93f50df20e786cf6be2fc8df4877f8be32b418cd7bfaddc0f49549ee833934eaf0fb9a8239da976d7465fd10b8324501cbe353dac0485213195fed994ac4c802fa0ec544bdba4ab9cc5cafda4bda634c97246ac7fda7f2e48d7675586d598e8994591f1d53b4e6ec4e3847de993239c9686a8dd3d2eaf8e5af183c320a09192cdcf06dfbc5eeec7492e45c321c364d0139fe9201d62dd73a8c52e667a1d487ecca4bee460367f08ccb8ecbbccebdfb0fff0b85230ecdd105c485f3db690824ffad7d3c6de23cc80eecaaa8afac284ca00cba2f4055fb05cd6b60ba366a3899f3a8cd185448c73a0d2bfebe79b075fe67f8269114c50633610a7a18f5e8d8c0377168826ff684084124eee57fca6e06bfcdac2d23ec339130ec23e7507cce3ed391e93818d0a93ef91638d1b0e759bde2f0cfd4b158e93e7ecca60a5cb6a5c33354e7b7d725af23a3eb0e96d50bc8a52d873e16ad7b209ff89cabfe33af966f0cebe934b4ba430b9102128f322bae11de2245cfe0dd45b6da48841e2155ed4cbfd3c8879c93c1cc0bfd5cbd6adce0c53c5b6b05fd22d114344a0cbfcc0e9ba5a0ba2b339c795c3f62217e6ccf942854f4b29e028281a993b0871022bcbd320857483791422fc0f8ad22cbd14767685dc0f4405d4d3a698cb4b48f846a4354c5fd4930deacd8464dcf607e85ca655462ec375dacfcdeb138b08b0576875400014eaf920a4ce6dda95bde6d393cb64170a86646ad4a383102ed2c7a3c3e22a785793835e3f97728441a171396bf1a0bf9c9d0f20d772b041a47a43aeaa14390d01c7b0923498a1bc38b10953e1a26db80b28ad023764b422df49c25b7e21ebabdb4e678c96c14121829510045a69ab74537d71062c081ad2cb59cfe7787c8276d081e08ec55bc3125d46c0132e81eb5910a3bd4efff51749e19ec3b245901b8608edc087eb29340c42d3972d2b3afc48b3e3ea1a32211929b40c4be66d4e80340e2f6258a9312443b089f8c9797c24208e3a10ed7e2223c603e3103fd2ff8e101d964fbc4c79477c9b6e48512fc36ab75bf5fcbbf7381e3e823366f8fbe78ffc2fbea26ebeb24cc21de44ce63ccea0c12b55a6e9737533e5ccffef205b9157f7c4e1d91d99d8830dac2f79cbcf7fb1f1cd63a77c76fe7f3d4d5701947c58c1c1a5659b649008bdf8e5585bb82cd09243f55a0d8e9f5313c6028ceab6ddc9a4f8c40e8e25e6ada861f7aca2c5e6297f7d49bef37452d496aac893f49db35087db28f8df01a7b44fdf7800dc4e1e052d08169cb23a6befe83bd4eead470032524451413ce43cab15fe36f8373dd66356b4152369a557b7fe5ecc9c2b2f4d848fa9d24a8aafecb57057211656224c869ed0749849e55779b25acd84c0cc20d1a80f83e88981f1bcde6f26bfd1950e0250239ce204293c7bf0144c2b73248b42624b5b1965b46b57b019187932c51dbc9da0f337743d1814ef74bc2ed0e1e0b3d71abc4798b674daa4e8665961699f00a5b288703219845038ef71fdb33d35f44f07c214997984fb513a97e73c5d9dda9366de8297cb0ec6454253b0e9d41d17625e1d86edbbc37182dc1aaa354030b5e52e6b265bc4acf4fe37a57acfe08010e752a4ed85bfa6292c4fdb9894c1eb253211368513e43658d8c6f008a41a3d17529ca57067d2ff50cdc198189815973e9ee879b07e610a6b21519ecc4f28fadee0e642fdaec964030b87b95dd3df3a88543264ac7deff44012b18067d204bc34e42438a9cd8f8a4590b9c2f79819538f17bf329d0b360637710b6b129152c0ad1fb9f5b4d143cc2483ca1f96b23bee4dcc29a24536ba3a24fa7ee515b8dba1cbb07e90cee03abc04361457f6d054128494cc57ec560d3e8e596334d3ae021919ad5329946a57c4fc8950bc75f0cb53db8972fc80b48d1270902433d67b81fee4c86e02234b865fcaf96e010f6051b50edb552ed11cbf7f8932bfa03fba37663d4d646cf9bf2b1d84aaf6f75f9aa6602a28a4562bdb1d4971b60c0257aa20f71e0b9d91e1e5ad58c11b23fe304c433acdde42cb4778cb6f6d312e927352968e09801c7f011be3d897ab29ae3411c13f7adcb32aea02994bb2d4b397cbdfd3cbf52a7a1d5baaad5b075239af76e0aa7f46327fe14024b440ee6ede34ec07dd25bc008787e3891f59f8e621f276aff7b529bcbf52505ef7be888d16a8837984de6233dad034e7ed02213deffceab60fc70af052ea4145c72a2f4ca2f28d8ca457c15e0ec84fc1f7c59bdd44dd70850020d32e34d67f3843d7842a9852b23b97c6da5e8d351547d65fc6ba61fbd83d3e43494c9b53fc31569979abfb0ccc819ae28ac37ffde8743d19eda2e92f4e367f7a48ad00a5344f260ca1dbaed92e1b31e2d0ca976803e20ba2ab4cbed173212fa36e1344061f677eb7e04943f87e5c08209f615be6107a8abaf4a7e4a56d05c07f8b759dc02c8d3de31eb26c9982a5b2aaae411c286f7fee29b476a9e4c839342f6e7f2937a076dcdbf36c89eed536dcb7061b4ed0962f95ebc81b531ded6b486ef45fc85eaba11b2fcd5676cef4b56dc45efc64a8570d037287aa2834d023e5faafc927c3248e3cda1c06d2dc0b314019709fe1614d3ae9ef1ac253429c7d3c481e294e70c324bee7b2729788563b11b7b23c9cdf6243c71212142c09205b08a7e62279dbb10abf5505b9cd252ca1d7684543496e3780e1ac11398fe341666aed28f40ec1c0bb3bc7a4df6175ac1bbc97d7150cb3c800c71443b2a12643f0ba91849fd4546c3fcedc90710b90f036233ed5270bc8661b80a0fe078a0766c07c9353cab7587a1bf1588ec279b47f89451af95c7cdfa05596760b74a9cbc824e183788b5de97b53e33e528f9cb65bf152baf3cdb625e56b097195167e003a4983b915351db6edb71848e79bfbded0ab5ce683b3ab9e1ed6d8ab694ba4f07ab6851f59bc266c9f6842b220063f18a32746835642e4b467b4e78c50ce73c44747961e48b79e4e5fbdb1e8a4e0f38522a71ea4ad6ee6cb2407e4bce5640e66722d64ac5292e193b8c3463469acfd315405f54b759271805a008ee95e4adfb9b1c22fca2c7acc74a38dab95b9cfa961a518aef7017564fca35fd03862a2a9a5a6f7a1472c3711f1261b64992b8ef333cbc4c7e077c63a94cc18268968e7dddca4db4b5e0b5d24b7748d3e2fa44813076c4f34a16971d4f3222b4c87ebe8eba847416d1e7bdcf20a2a295f95c032e18d36004906f2baa6198e565e433b7507cbe5f6eafe4227224b9389a19d7d0c0d4151dcc39f7138d52fa89d2f7e9d0cfb69b0bca22b0c1bee3f003cd89d28ffd965cec7596bf0440c6719bb21ae94efdbf8aa30fdd3ffed75a0314a4f6f6c54645e384b95e633cdf9c682ea7d2d8cfde081dc6c3a2a51083e25e0c73265ea3d8dc10c0bfa625dd62627a60e7626f52bd04c22bfe3ad65daba7bdd3a9857e699c4f563e5c4535d162a27995edfc4957b8bf2cad90558eebd3bb671c2da601f250aa02784969eb829a9dcab1e8d84d48c189d28bd9a59ef2fc27c0f7a1d0b93413a94aa0c1c6e4c8eb0aa76af8590ccb569a5d488305e985585c3801500c4308b29088704f10892c680012b7755067dad042a6d0b37389fb0078392fb406bbf413abd8df9a7e8bb16cb8547399e5b64fe67d3e75e559f0f6b21110962043098288d71c3859ac2e4b0ff164eac74e8f459ed76738a7e18433bc5a36ea264c9ee8598ccdbc6dd96c9894e8dd10aa94543ff5b7f281055a8149e6ce20341e29711dab259e951795cc7e8081db37b4ea8d3c54c92c2b63ab1464c7746ea9458b1610eadaae21f12fc46d509af8274cd7e09aaba05487de44903f16f78d2db42a46097b78d8504f8e4991dbaea1cbd32d25c909ec336eb68825941a49e9e940ae79cee723c20d55bd838157bfd3cc12b307945a986776f96d4bfca8e8c677ce5821ee5e5240cef89c020ca522f04116a4a09774ebe8fdeda218bd03da4cc5cc42d71dd81b0453559e7f7fee3563513d9d07cbea4f662bf6ce33ceb841a3f4cfe5d9473ac6382795676c929565958400d5a38ea4799ab1fc908cbd1c0519ada5c0393ad167df5e93578032ef53c7492319c3c6197b75bd5442746b218e5dca2dba5b95bcc368de2d8453a2083b13f83b4becb1a971d091acd497fb2d8a69247c55a5c6204004f88da751828db565f01eda24454f154e825e0776b95d5d2186462cced2f974196fb05bda9d9df07d7ed6cfeba6cdcf0560a99d8b6c29b858e15478ae2248406856a434b12303c019f84c81677d0e1390480727bb599b348754169b1c75f8d986974dba9aad91f024a456c91eeeeb0333086341500431089f0851739743543cd4d285a183a6db173698b9c6c0fa4e99162ca69a5d37e01a3435b8d68578fa9f78bf78f68a6fc5e8fd2559190274b85baed67f8f5f46e245ee36c91248db1a00a959a4c5727df823e541e0c326f998e60d8ec3bfa4c1ebfb4faef5d6eae1c7a0f37f82d7f64dee2d02e0d33e18455e3e1f96702df4c94b1bf6e3e8fd75ac127f823632b37b4e6659b3c21f7aa5cec423714c254f1ebfc963dbb8b6323862604d9be0e33ac55529716f92df81f42ded4d74328fc6a8a1c2e7ed89f5f82a300be3bda9314bb923d472dae38ecfd591c71ef91c5dba7cc44a8c59f12d6a31a48422cddcbe1a3ffac52aec1b6b36121c1e5a2653368e82abfc7840106256ee3abd30c765414ecd31ee0d549d47d7c5ac93cd679b2241bfb3de26c8704a1501fca392b6e65344278a2e9adb9537ab509624bce371638a0b1adff5e3da5d29ddf4404dc6f850f892ba751ceeec5c24b03c5221ffc66b9b32228499227700d97ed96eba6272a3f6f20ae9422a63b75865165a7f9382879eec70faa1b33ae63442a46464aad5c47396dbcd2648ffc1812f060e00a3f1453ba562417f81f8fad7641a4bfed1a39eb06364ded0917aaea7832d5f7a749d2c52e8f8503686c03db86299ef4abd7b200cd8060bffd350c1673fd61975b6489ad0e75a21b20c77f06ece6239f7b4e64d30629bacefc18df6f88f23436ce72ea9902b7cf08164d209760db970c38e109139b845828642cca4703ff77eb06e653bed1ba177b8dc6550511ad1ddea2bea713fee2bd2aaaa9e3df0404add8a74472b665868cfb8fb752cd59e086fa83acc234892d4446868ff3d85a8f2d2b2d2b2737f8eb6166293fbaaad7473dcd58eb146f010bac22f3b76f7d89983fe32b6c5032282c14b779eb64018327f4eb3403b98a273b195f9c2884001de43604c3f803433ce0f1118dda9333c4ccc8a3d8fa2c434b6743b9149e1817814a1ecf5a951f09440f2c9869e12d6ac3b80e05b62a686efca2ef085cefc8218464ea195cf9f91606b294ba58230dc3a869011d1371b5c5603b53b7048ec3d2b10c1a01899f284145ffda7fa067b6b8fc6841cdc0de6ef30d4e8fbe0fcd096a636ac2edfc787640782a364055fc2a0b4d7a5a91786d46df3581549cc2c138a809f0118cd091733210c780e8dbc4d2ed6c5728d7b40c950dfad0c1f3a1a446a8d3def19d00ed605c05bfd01d7eada6a35223146aac8dad5d5ddfb09fe71c75920e7e846937e86e77f9c83a1921ff196e40cfda488b70bf5e5678d30af226000ca39d886e140d8aed92ddcfef6a6e29e82ea79e6e5282ac43ebd8cbf452a583f8d2b8b7876a585582ee1bddf13d32f8c661c68c6e288fd187c88e30c8b787f3ec8e98b5c9dfc3b03f137d2ede00699edec891782f6299bc510bb72aec251a2c7d3e4a8d96f817a599f491b898ab3985a0afd9500ff2f2987ac82abfd9ad0331aead33c919750567159b994f6d31a46885dc4c1204711b5a758affab00491a0dfd3c92037d06abbe9ff21ee410f24cb53b8242afaff13a593bbacb528b1fc2cad04c3485f86b7940c2745a0dadd561fddaffc49c9a1b2d7c7819fb260a8829ce3af30c51fb410b6f30e3e122909df643586bdb1020fa65bbf419712b8d5656a8fa6208b191d0c159f60767cd827daa58d17f4187680bc67cf75242cc28a446ce40ea38da9071bf6f5928d8abd277b0888f3ff5687b7739d7a74a37c310fd6d60dc5a134eee2f42252f1d6b970a39c3c4137f53972ff2cbc2c8749d02498fd0539c809670510d60eca3a4d3e86c47e7c3f7f17eb3fe0ad16d9e5b7d4f8d6223ef818dabac2c58db6d5310ede7ffe6d707cef8f841ac7ba71660577f006426ae9cd452534d93e457fd7c9543c22a4caffd9fc38cf87bdfa796275ebeaa47f187c9efe9f15eacb902ba684dd64ddc6086f6213ce3b9a05f158918b2c042c7a070b69499eeca050c850671071646ec0b5a23b64692dd4441b8a616ec4ee47701d2140f09b77f2431da64343cd430eb848d34543423e07eade3b6e78df58981476754653e6887d5a39460058bc5c014bb321b444fe0d90e726e8ea7c53ec338b82465f3f37d60dca7cd428cc38a13defd0de66f20fa3353e5348629616fd02f4683c785e29fdb5eeb6735b96ebadf675a8eb6e3e91e184f17647a1d6d78692043a00efed61ea8a1e4b23abbaaad01006ce26e2302e5262b6ade07446a051daf1324d78cf865b52f7405aa1d423fed55a2cc8be5ff4b2bf39931da8b0dd0e5fe8818b2717acdb8967707da5ae352a29d22994e1d51f4dd83e498738c40d2b60b38e199f0c747078521da75d20416ab830c0e4fd08ee723f690712e368686859eeb2f732946397216ddd7ab688af9b1fbce0d4eeb9a41f922ade2f5a5eebed155640a9d66f7c4eb34b8f17d80d96aba564d2396fb1b834aac0df94b4564ec969b0d7835e64d25469b7150584c80ca9942f108c1143e8e7e76d13496f1465fe8644d713e13f9f0030bab7760a1cd29bdbf94a9bcc8e4cb1c08d0d66c6587290fd6f143986894b633f4046134d806051164aca2bc642227bbf902a282e0129afbe6e50e9a6a44066167cf2048f63e211a3e56ef356cf2e35948c9afe9111122f13dfa34d52330b8a24c834461bb99cc333a4543fa6de3480732396493c2ed9ec1e63130eb9f6df67f200b30d3fe6010445ff0bd54ad58db433ef51d60834dfdeebf1b15eef985d38bb8e0f75758c7854fb206e1d918b3c18d5020bfb6ee58959a77818b4858df8b808f581fc7c4c6bf6fca06474480564f5e11830aa616c0cda9e8ab0a326d27db9e3e6e31b31fb4dfa4d9d5b3bbc2ed78e81c59dc5a55ccf44046ddccd7c8e47bb3d8fc684274d68455074bf888ae6658e7895762e21fb1c1b9912fda48eb71e1fc35a18597eef6785acd90b5d74b613ad6fae5d6a52cc5822f0c08c68e0691997157dd72ab9149bf9c291b426caa7746c45b16f7a25f8a009544e34707a8c4ec37f6fe7d50fb0bf489604f2d8a0a29e3331864f82d8338024dcd374852df9b54be162a8e07059bc4bd107e7d59a7b60af1b349b38f3b3e794351f636f6e96fc6928293606e16d87fad1acc254bbce79bd01449955d8820f27b9f19006c7046633eaaaad2e1b2633a22310bb7409dfb6bee470f62954bcf729d669084ff8025c6c1c1da4d2477c5df969784a82d2e40f17a2bf64778a656bc4ca902fa071ad5dbf3c6678ddfbb22959edc0683e86ac44b7b22a395cb05ec427187b153ff3ab6332663b37a20b5beb12f10f4fc5f262b16a7ddd3e2dc20a954a5c9fd9b7ea4d53e03561b16f2ec796c5e67a08a142375c50cae07d9b2f97f675267ff4f2e47e763920a67832f471bcd297955efb9573c59f36225e91e99362bbce159ba437dc24e25f6850021705f7bb8294a832c28700115a2165e1803373b9cfd7160adee46a3707532fae51c4c436cabfae7549f3cb93ba148c6ccb209b697df667a3cb9262cd95fc81fb492f65100c94a9c51d09b1b504c4b8caea326f4669d154b4d56679e4289d8a08c298190b469057060294c78696876d9b57153e62de6670eee907007e123caf86eddf0417bf7c292b43f7f62219092b0dd5205b2395f94958529cd2c2691a6da0fb40fe4f8fcd0122d19141f318ed46022c6e8bcc146dd8a1c6678333b59b9b68b07168b07d2436c2c5dc4007b7f5ab5e748936b3ab314b05c971a8e345532ec6de690fa1f6ec0ab9b873e04d57ace6e3f94858c8252abb8b00e1597c274e791b1760d6ecdd83fd37481a03dcfa621a3d4758598be7f7d28079494c7dea4399eba8633814940a8da499b3df089403f5fa048e1770b4a6f43cd319606d8fa30e85a4f87a0878aeaf5099cb28ad8239746a760ac906de4871214dbd4b5967fbaf04f6f7aff883f1a100a1603c3fde3bd55794c57ae68a850b1f6f6ba55f14cf598aafdfbc96db1a15115714ba60cae7faf68c1c39073226c79d0b0a3d15cd7c766aa0692a1331ee3d8b327af7cdb1f0eebaadf2b7ec8c5635d8a4f23d84bd8b2a960fc7059217c57b27d5a532bf893e3484c11903d032d60a9d0be518cd13c7cd5a52187b06db491b226d4dc9fe6e01885b24db21fef67439b54900f4b424489a40e812c5d12115168c3a25fffd0983b1b2a05d2e7848014be8d312e9edd8df2c4122006ac8a96b1215f7b324e46e217ca332a26f9fb3e97b1f431fc3d07f5fc1c23a480d5ceb31b71d919660a70c2799868648ea8487f4b18c626684f7296b0e876221b4e88f6d83b456c0fb4a1c1684b38179b3f9581f2cc227a56b22f138a94cfa1d2c1991593eda7828664f89f130b4d7a651568a891668c0877b2f272af9c28ae3cc5f3359d7bb3a713e3310adc1cec793fdeba328dd048d0fcfb13235767354c52c185604c5f2218daadec6db80a375aeb9f0da41cb6e491cb6fd3710da74840cd2a04c539b40f8f7c0c8787b8e30773d11efc75c661eaf9e920f5c8c94f65f31aba178383568480a85288e3f5f0910a49d483391cf088d2bd82321c002de5f4ee4dab5f0e8d33bb6dc6e1efc61e0e4d995c5361cbefb3c39baf83cc71c4877f4ce168aeac4c3b6848c95e1a70765b18104ad5f45d34e257d4c4b844e2be3ba08acd0ba4b7c5fff2ebd2b5a1ecd89e68d72551585f33aaca44ececf392f795371f59819d5bfdb4cb108a96ede22d88d2616288bdcd6a8394f0224af5ce1ba7ad927c77d57adc522a0d9a54ff7aad08fccd022f8a4b4a1d0b8b949c25334fb376941431f2992545ed90534fba751c9cd31d6a6800c6516030b76cff5b8774756aa7250d4d90af9d97de912b9408a38b1c72d47d0850326ed96aaea5f3d0de67fbe9a25afc81f0221bcb68c026a830431ddcd725bf395efbcd369132831b8ab422bb914d4ec2cd09e4597de398d96c887e2b1acbb79c36463517247af425f70fef858015f8082fe12fbd87b19ffea1db896773ff436e3b2a23a01bb07cea939f3d63b7147ead1760df505a539feaca8b9cca3a7e3903d8f430e38df9487332cee801ce13a3c5dd8791b994438cac25610a07d22af94ce82eb0ed9b3ab96c6a29dfbcc3706f89a93e032c15771602a8825c008c3cc2ac984562f09a0e7fed5b38ec18b55e3e41d6457b23be8d8a6206f6d1e728a902e8a7c33f1a18253767d500ee5e65955a3469ed76b70df3b2f5fd626753be34c12796713c16d1b39057760213f643005c10e9f113d84c8773e9758a9ef7728a261eb84662e3e4362cf9494e19326b85167530807106f21f69583ba67d48ade334596180c6fad7cdeb433c427a21ac3845fbf99dd6dd13d662e04c71d07618cf4ee37b6ee30002de3f49f99461c87fe5b6e6707d5dc65f0507507ecdc4902b16b4964cad67b60141085c1dcc8eb43a5743ca5779dd8b8947095d8e6426870e4e3fbc1963a61948f2e38d30d9967a6ad78a211074a81653f14c42cca6cccdabab0beba284ddf74d604f95a1895d9cd31233f8e315db4318efbed711d85ea3b431b1c021c488d2762ca9c068d15cf4e093746039d31f31930ee8ab7d80afd51b20a240937d51ef427c92ff505ebdbd6f8cfb82b523539caa3c0432869c5146e9dff0ebf533c90c51693eaa48a03b2c2de11acfb021b3079b8a1d15fb0f6fc622690cbf010dc4983ecb71bfe60b19e7405f419b04f88b1ffa46fc3323170f75c8c28a0acb189cc843deb493aaed785074f3995079d3c861097fd5b146254aecae7bb4d137a7e7e4d236bf9d6c4d0b330b9b59bb026748507f9b1875c48bcb5f541496e84333e78f912f528d1dfee778090d939eb73be35421390694fb81cc1f58b55d7b384ab93828e9b5c10d6fe83ba24ea356e30bc7322d6621dcff5b62a51ddc6ba646108ce210521c9602a5f7a6c0ffbe875cf06014fd28bea2a4972ec045eaff1195aa910e75008d68a32ca2c56e59625e4eafa7763118cdc7f43986576cc811bd7e99bcff86792a1c08c3ca212384a028b504c0463e0019f3e7be3a1df260c2a1e30c637a7b027c51203417ee51aa0cd82e8187332aa69b080f6be49fe0f61d399a1fdc105750f75449a89bebe4db3dc38a7f4d9ff45af3e1febc61d067b25460d0980caa957300c7bf30cd4ed5e70bf2f22b70055c53ddcd88c89e9d7c6d448ed0e9dcc9dc5570fdeefcdb52f18747de05263082c634e93721afac7793971c0dbc4a68d829408c4c3db98d546f8e07e44a10f3d86def1805051a53df36e95c18818c4e9441a9e7b010b3e639a3f5a9218f1d42d6693e7f7b86871106abc0697670d7241a5ff8a156b99ad256cf9f4871779b19dd8f665397505faa17d046a7b0235a86cfee3f24f4464322bb7e11108a950bf10ea25d905c684c48b6f837186bc02f489e4f7ef9697ad0eb36986df3685f4f300630b30a231fef6327dda27d098e56993a73753a05316962490e37822b6a5463f3aaebca6f1d21435b1494913272a5293acecf69bbf10c239b343fc0cff559288ab841a17291ab5cb8f8f2b71fea1a95e61bf9bc060c025cd2efa33a9e506aacb4a6a6d2b5cf27e6f504c63a012e2ca69b0aa4ae9e1f149515e1fe4f0471696b27931f28543302c1f8a38ffeb03d45d3dac824c4d9e5ab1522149086f136526d3111231e23ef5e037c1b83a535f57fa8a93c92ba2dbf8e64f45182b984221d73e0ae8df6be0be9d5dde353d9a35ae3e66c267ff87ed2c5c0d2b40360f9358e6d3e6228684eb5eacac33615ed4219842bb17253c41cfbed13930d3a6327756f095dec92865a47b2cd34dc54735455dc5b54b66941e8ac92393ff6fd02649c27b0b96f1f8b7c7b21b408ea6ac04f36208cb297dae4017e0a3d1b5aa2d8e5734b31eceb67dc5e1ea862ecda7b7f2619c160d8ea3cb53ba6c994e221d48a7b71a1cc7e1f6822901d362fef8fcea8f9b2773bc85fe43a53850d1e4d9995cbb49d40e8dad9f8d75a2f44368209f4b2bb00242861cd024a80fbe60aefbe6283c833101f88b5823f6fcdf64d6f52d0006ae2c4358fae54b4bc7365221c5de85da18cc98d58c0362e142c547c0b2f1d2c28c1a809ceac8fd28d2b3a809605d07ae3d64c2268484a2b7d0b8ec5bbb610d642fb6be3a1f5529e7e7e1b76d4ff4391633465d331bae55a900d84869199e6fb87cbc6b677a42e40ec469d370b083c277ba1558a2122cfdd6b5b2267559d356c08e8d1c1edb90d6250d68d4084001b8d03bd1f0e1fdfa9810bf47ed046935131e5791244805a482a44d16fbd80816b94f6d70ccbef28370511487455a753347015332f82f117fcf6948e31b465414cdc9d35e847bc8d005737550d4e71c432f6cb4d4f403817af011f6c09758c92868a600b8337233217b4f374f076f6efa21314eae220c1402c2f08fad62581e2eff153c2de4e5c60336b926cc00e68c01270e0a8efb8680b377a29c453870a786939724863f92e062069fe30cad4c63198da435c761aa9a4ca9ee4651e2e82dda27561473c96f4d12236aeb06e7643f6d5974e4e9d324ec15ee154f2a34bf105179e6ea5f7ed3f80b9ba0aab98074c90816e93caad0698ec355cedfbed6aca2b28e391c513ce6044d6e86a973cd574fac0609a57ead8a006d5b0cde0fa4d6265f41777ae0e6976b56aecdbb9866d2a8487291821167a1f6e1d4a8e03cd690b5e24f686460a06c230bfbbc5a30e6fc02aaa5cc7f323c4b1d740ac92e34cfd5b0f7bf4efdf985ff46f05fd4c18e657d8729d35222adad4dc1461c108a9bfde6f47ba55c22b0090b22f5e7e0730d621785d1d37b26405a110f528233f152eb2e670c1cc6a3f2fb3231be32aa7dfc1c074d87464f7f36dc648cbcefe21ca40544128b29bdcf506d2cf505833f8608597e9a44fdecbc1ed4b77a7dfeae45e79386e52e98ebfe49656c8415332afe124a25cdbb5a1a32c21ca23c917f7679bff9cb608e5947aa013157531d233f5709a7cbc88f347c3fa8ccd0f27590d7a7977f8cad89eb3712b5c8313e68ce1fe35c44d6d635751643cda0cf0f76dd8742c1bcb46cba0f4ee5b4956a5dc25ee6a8b1c12966ff8a8414f45f1d6e2edd157c7532b8ae164fdfbc522d6bd921cf06bdba9842e1d48d4caf62d2b6c5942b682e88ef2aa069fc98142889aff5b2afc83a5b15ed3de991580947a2a71b72544fc2f154aa70fb1ded267108f7af27920f2b4f7f6aa124eddf5d0b9616826ded4c0dd7f40ebdfd9c8b4912a9b97fe8213bb891ea573871533284878ddbb2084176689535f06fc549be0fd6f0c1d15e4d8ecb1a6011cae6a8a06925957c0914d3d23ebd7deaf2aa2d2b4e336b5e88efc40a37a7ef25663981492639ecf9f214d6dbdab984d2194594ca5cfe422e38929863f7897cd733dcbf5fcca467c5454cec4d95161dc7c1c8848f9b0e33b0f44d8613f2728280484549c09f99adf86fc3044383c9a8611d8a8e233fcefe1d5c4135367546169c495b84c54a77834094c39531f8eaed5889ab626c307d83cfe64a16c183887621181a7b9d23aa1a8131d4f771b3b741231d21fa1ea6225590a70fdb18282ad9f05768b36b0fd8387a2d29442e0402c8f313eab2c9a8ccee5e4d9ca69ce852a5f1fbbbebbe8e75debc6aaa09188ece469181b519c211663613b6449304810ecd8fbd28737dc99dd6d1eb68a65f5450f3a7884cd4b69b8587f386152dcd9cd6152e47707a31bb862d3fff8c2beed28fccc745c08a8658ceebfb0c70f58d985161dae48dcc1d3ef130f5b30694dbf73f87868837046fbd1dff27d4f2ce0bf015699a1cf6238203602dd7f3de829cbd9666cb93b8e2b38b6557736cfc769541854fe5f3959242377adf0255c357667e323895c8e55b18457a352a0860a7003923172da04db620f05bc607493be5308987137d15b330f71782b85918323c69a9c5877301a0a6665fd4016d1d5a4b9d257b8bba1c3e74c70409444719d5d59b032ea3aefcb3b4da4f45be4f1b6fb28f6d03746956502cf1453f4fedaee0a7fc8f245b070ef9411357780555868ba32805945d1f88f56de5378087f869b4cf5757465fa9b6817434e6fb8d132edff33defc0a94cb9c7c3484e2118b8a105cdaa68a5e90f295054e2c87a511aea679c0d536a6953ed3f816f0298d33c32e1de8effcaf2cb928b7152c89207275a941fe27fc81d637015e9570bc16aebc17b13b625b05ff96d123bff7081ad608a1e3c0682ea8542802fd9abdfa2b09321797d8ea7c20cbe6a6e41ea938ef2aef0f204243fb0b3a074fbc5dc8d0e326c15b5db1eccdccd726682f0e6c41bb054dc3b330b1809ce5e2e397c38bf65e195cbd51d0f39ba63bc9b2ff1c8bae55f5c8fd280e3a0f48c6b56ccc8598fa5b990684cb9eae2158f0ebde910c35d1c3d438d716c44fa1a5882f770044b2d05c5b5ba3e0955cc841b1d6f9eaadbfcf17b6dea9ccd7069794b67df71f183bfe06e25b0e5638bdce93ecd0db34f1ca4b0ca4611269f7a5715466324b9d50b4a73019239c1bf44973e358c4f3edd623d0edebc5eb5fe101213b792ffe98c09655c1ba456739a42e21c379d4131d93647978a14f6ac83c2c9c225dd119fd4a4f30c3229ee348af5048fd40d6be007ddae5ee65c8abf1b436b84087a733188fd9896e66e53199506f8ab3826fe6100c06d98c9a83ee9d86ac8b7dc1733b665d4cab996536a94ae3cf6428129ca421e0df1e4261614058cb716d94aadd4829bf18247da265fd6ad72fe83bc6faa358d67adb71bc6054f52f96238c6b9c4dc4295cc22ea23c54977f9eef4664af67e873e790e8203c3f8583a8c8a91f78ece8bbf22745f3ba6df0aec2430cd2ed6a67a0468dcfcb81b0db7647b442228c76cb88d5b286119624d8b2644bf5947517a223bbf3dc3a6ffc50e6dddeb690619eeda34491c31c3b0b6fdb3b9098dcc4c8810fd20f24e628a6cf0943172d059a64f1709296ffa935b4ca37f1d0d2854f9ed7bcde4a8961251b00b456fa877931a1d4d5761a80cd828b0e572249cf00a6a10dd1eae65b3f4866aa24ca0db35c6ab9aea0067a50fe6d315f1b0b778b647d8e77d2c9b337fff42e6ef4b2970e1c1be461bb5c8ba7807668b5a9073fd5ef232d469689ee59eecdce804c374ad2c48bb593a4762c9872e94c7c38edbfab98ca5923c012d858769139590d6a23bde13dc0264b2d258fc1375c33f6abdd0c40d2475c40e54f1478a1f364e70d90bb4e26b6a749b8946798f85b976516de06ea796b9f26a2bc50db7d4f271d79c5479c2f05f0da119947e44d83f818eb7f91b122ce30b0032100f9bd3231511de4886df79045b4254ce386a28fc8a0363797ea47ec9725d5a25dae6e32af83f677792556f96434d1a83fa90a37550ada9bb79f37b9fe717a40c599604e1dda4accce212664c7ce727e0ca7032745c9c03fe65d1703d7dad5c5656169364777017a07d8b119a476e3facc9271dffe7f87b41264a8ba76aac9b9ee1247fd5e94029af0fd575f65a075b6c129aa49ec4ae6ceeda5d3c203f519b398101fee5e7622bf1ae9d1375dc5e0e64eb6f561ba0eec014ccd3e6921ee2db9b86d2d2ecc4c8181cbce4c86d9f85be4a20d6a546be59a852dca7fef3aacd9a7d94ee50df64fb61c2a90f5579bcbe1f5828743ee76e10a48a28e3c496a471bffb898c69624a32635ba3c065cc1a1ad912ed93a1b4de149952795ab73f5d2cde87e5c5837de941c6b05b240f29bdcec3497d939b4a72baadca01dc48ddc5638a8be38c7843090d0822b683ccf5fd8cd2079148b605d4974e154350dd5d277e156eaa2502343f40ea02072de91814c08122ce6a200f83efb0b44643f778d9f1e8d77323a38cbf91f188471f1353b0170d94dd4063c6fcfe545afcefad5e785f10218f9d38c4b232c1d9d30ff5cf0fe4baf1942c88ea665bfa1967bdea47b50939d25728504709136933a15f255646c20c4b5711bec6e15be8191955344f0c938408b43fea198118caf7d7a991abbe4edfe9a4e716231fdb56cd5ffa947d355d459fba338c51d74c9cf39894ef2091e1c942c552f83bd2bd9684c01bdb94e7c17897242b726741215666f2c056a68f4055f54a03aaf16dbed9cd7ac16498380d636d83803400502297dbb0c21a899245ef4c0bd41d8c02ad67f7cd3fb5f384004cd8ad852b63b249d5c8f13a0b015400d591ca5e39014ddaf27a6d6aeae60f1985ad907ddebc84942564061cc05fa0a21c79f6a920214317576d45539fda2653aae8f70fc2f51df6217e1cdaf5eb93a9c5cd5a74838b274595bea4573a951179662ccc6610e160539f2f6d942c73341938db3579076866b385da3b4a75e24853e557b7be0a2162441f3019030a3475d1a5dcb7ec1b8447c4af20f2b3e43a87870909d8ddc9d3548a3ccf03e0b6fc77be99e75708d815ee9326e41a8c0e93bba546d35ad72b0ecf7b1e1f5b1c905cc6ba2c1c0ce3e3b14349a3da735f2554fbf9579c9af2df83a22f6dfca751306bb3154dba31ae741c4b2ee157804ba344667244b0192750169b14c1686f5709cb53e42bc2a72bdae2f78334b84eec8a304f8165c9159145035678f7c3daea30514f88c347be8197d97c55b7d1c2018ff3e4639ccba2ab29bd164f516a22e5eade9891de58cfb5df24dc06985b059841eed4e13c1d4832d1927adb46b9da4c19143bff4b83ddacfb1b00278b03a9f99df1bea9e83dc93a1a8e3a7a04f52a7f1ea7fbab027672a82d0440ecc2a6db7230b11ab2ca7545969b1b226af2cef5a8041acadc068a73ec2688adc73b28fecf668f96d765658484d2bcb692a621632cb21af6222fcfbd20714eb0b2902a06365268a355f052694e5dda91d14dec7071be802ceff64f65ee97a91baf092cd584aead49e5092058bff2b13d3030e7f9f5998b1c541d83a996cec307b185c48113d56cab37a64ec66c82d48c1b3ed1a3dcf1197b26608e933424dd90bba8950c25e0d2177140c9c0d938e5064fce413aa0fb128e9771fafc4a9bb202bd60d39ca427da050b9b37279d0f28b20c533391d7b9874a5a86348cc75b6010da3b67dc721246c28d6c1637ed5212ee8ccfada13d17bf23361dbdb46aeaa4d05113f32d227a542d117bbe461d818e6fb2365052b290793fa946f77e99938bfbabd5e1edfdaf5e40516819d6852b38645276c35a27324fcfce5da182aaeab8b5070569dea8ce37d9839a8614833156647092f215dc6409449990baf1e22551cc09c049794b79898bcc2eaae5ff8596611c0fbfe100e8423b464c228ce172ff83ab66e8173d2fd908b476017571fc3c6ab0c7308360253fa18772c3bc3a9dc5f07395a393ce1bd95cb96199a7ea88d7bc6cc380df387efe3af05e39ef6e317cf2d1ddd158ae6067c730daae50f6d4b69885dff3bbdd60f2b076c312cb53b6350f82615943449bc4cf13162b611bcdd9fe0f7bd0f1b52bcfe565199115675191c6f1cd7efebdde53b9e27182b66135e224b7808ed2a0c0f5b37739ee01a380676d5b5c4574dfe818469c357352af299dab6dadb6e397e5ce3dbd7568ba0789c3aa5fb85bf007e71e6e46999abe1ba8cefe5d92286d20da52c661a9c3278066e0a4187cbd5bd26c40dc139d42ff9e396c6dfd6c6bf2682035b533d9e8cf6169cd62b73e48148a0660a4e64d731621efe5df9cbc1a384fa6aaa319b133b69b23e19b6cb86a9d85d2eefc3e0a1bad798fde35970bf5ab6cbc870b4125959ef5278d0040cf8e4076abe28afb8aae4878111d2c493b40575348a3365aee909642f689aabfcc77df995d761543a7934d3cb4a30b79243a3b800822b5cd0cc34255a2763beb27b40aad14c0ee28d8f83e1afe84d74bdfebbb69c6d8c7efe8cc4432e457ef11c6374dd43132d5a039916d0fb2eaaf6126f2c1924fb4cf0b5972e6111b03d2e5b1d5c1279e2ab35c9e6999f3694646a01ace767f0bcab53cf5c9b8a3f7b2697821a733b3a11acf3328cbbf4899d0cf94088e7240de333c2ba24993773f679200920980bc91bc6feeeb7eb033eb7bb48d836f769630836d9404ab73d4e3d00df2de723398264dade7bdebcd6c1392be35d0af5280c04c99a4428ce8399c51909026bf6b6eed008217e2ae2f8bd49f33aa651cf8e0b018ada730e31198544ec80ab2b080779949386557144ae90337ae8a74eb3ff667815ee79b7e73b36356c750cdf08b00d3a7e8961c52553e8f6701e78e11994160a2a9b1d0e437645b955acb981b03908533d65763b46234ededee47fc0a917d4f01adb61e0f8c51e9cb47fd73f69b0e5d8b5496456db6c838dbbf6ee701b00a31f1f9c868a2611f2bf3891781736989e5778614e0de01eeecd08f518a3831cd5ccc9f342a3ad0c01f1b7693b363615f89d17440f50dfbba790cb4f551028f2759e52fb63e93b10686b5fd55592e3bee59f63d5d129f9ec35e0d55a836976e87211637662d0d686f5f63cfdba602c2dd3344ca30f6ffc11c46035953c75fca47e20e4cf0a8f6a69602e9f3ce258b351d0abfa6672d313f43fdf09f5f4b2f7d5ec76d0079e982f7d77435bf86d5f373d2605d4a6b6b836c5a83b73fbf3e39135718b7dcd5bd8517b4004c5fa94e137bc721d74a7a7aca85e3d139b8b753aae54993c5350e3d66a1560e63719d27a5bf5fccf042004750731f0f263a004dc3b84baafc18c7016ad78454771950b8e63766a02dd5e0845d3ccdb313248baf6ff301ac07ef223d8c4658fcda6b065c2ef6aba2cdd00d3da1c14dc49b3a357ba18156d845690b1499eaec21ad7db230f4ca40ddaf2e698d90006b586af6cb71486892beff1c0261c4dd178d8dabb7b725c3e949ab59e4423e894c74911fc1b64244f944178e429afe20441279051edfd669323ee713038ff6d73481ca6e9a251a172c4217a2668ba53860792fe28de64cbcb68af9dec0d58228a138a37d7fd3bb8076dfd4875056d2bc832018884bf3e6fb582c9b945b65a739901701e9db265f111d1bf66b93f1fee604a47b32c8fa6383ab470fb987a6baa0c73d195ffffbd3c8216c21564705a54c043748625f195b93808b433d20ef4e1b57352539646bcb6d8c080e6d01a2b3eb975d88f2baea76885faa9f9f4fa445beb390613d4bb9b39e320d1b01c0c0e3c1352f027ce1e9444054c348aa4befec4693cdf0f8f253ad135d416bc39315d1cb9a16f61c1e83ee47f4c73cc5547dc60db610575b184170e75fc9257dce9523eb38fb7ad85e9878c385d1275ef96fbb2721ab131d85d5e2faa7f57586679ffbdda8d2c000399e01957707fa47bf744b97c1ea091c5b91a977eec7a1dffa01e1f26862e092644850cef3dc9417bef87315d7c6be3854028548e5c073a7e528292b1ca917450b8435e1399f9fe4c87bf6c6ce6d850f39d941a9c8d9d59037983e14e29ad0a4b54688b8e73293bc3e607739c099a9b50deb5aabfe6095129dba2ba0a5ef32bc89dcdce6ce46f771a0b3f9aaec9527175a3f968e1ecc920abd1354b2d11f4c54993dd19f79475996b7f973febff134afe2c30f44f3fc4ce253bf3176da41fcb39a8bd36a2f23abfe990d8bb8e390dd6b5a656543d4b848f297c52a030e947a2ff04fa60b5bf523c4d9333e7d81bad72519dc1c25bfdfb76e91b047f3a658e9d9cea08c0660b5a2e0e99fb8d628a790a4ddd62e463d29e04f0e81bda3fafcfcab6d9459fd9089162e75a2b203013da2b8522797b10f1771166024c13bf1ec72617d5f2037d9db64d006367c2a5e3c7c87e3c46b201b706cac97233c38a0154acd5a46ac06715b911638f0b6d8226a20932421b785a2fe8643008150250eb6f4df7671ebd3d6be25c04dc22c7430a44d9ff0bcf26a0793fc070a47d8a7f8ee594afd1208dd812a90ce57242b41f6072bf7fe05c16447cd45c387d069f1ace4da8f252ebc4ad751c8b751a23edda8a20911d683518e3249c453f347e62e9641edf722507d09b4bcbb89854176735ab1d477d968e7022c4db3d77ffb5562a8d1de62be1f11ad34582c8a16b789ba992681e45645f5260176875bb6bc4b8cfb601959c591aaad1c1db82a2b2583c368f1a653ebf448f61ed9f24da31b810b04bfb9f75bc094e4bceedc95173f7d44015ff42e6bb511cefb6faff34fb1ef9ba0e03607cbd6139905fc37891caf6afd2f8443a2f145f3c939bcff5c62eb04a87190df46e70dd2b20a9608a6fea36ba520e3f1b412c0b4fcea224a12a04a67150864d8789ab61d8d2fcf9273e8b8de83ca1f96ed485d875f8a92f81c29bc6ee0637a6940b1013bda30ed4f0d0bc42a42343b42ebeb5030046479cb5e38c8b08c2c958ded4a62ae03f8fc3287af1e4ba1376527238182531a964d775555349ba8a17e8ba69876619e04037a131f43b8bdf80d7f36ecab74f6f5287d9bff7f7dd2006e1cb8cd44f159e7fbbbc84eb66ae8f7e9de7b2b67e6504555fbe8e536861871de9716957d56bfece81c063cee9d254b6ac5773e3ff0c5e0667a665d86fb2441feb27b62a1f88e773ac8b01ac75d0a4a3e4a982d1a6b406582eff14a39d0b80356e6604f7d5c85f9bec2676c34133a329c9204a1be1ebc341a00e3f5ae7db9e7511aa30db474a0cb2a7ad261845c0fa47f49b34d7c43b411e8a649a47df353959d11b1e8e31be61e11890a3eae69515bc848efbe9499edfa6355a203053c43afcdbe963f712bbfc393b74557ca66b1646bc9638674dc1f7c31fa5142ecaf9027698b194dac5fcd8e37e356f19d5ecc6ebabadfaa8915b617738438b2792f4508bdd3e3996b3bb42c7df1d073d04e6099c3f55fa48434665157f5d8465a399447b7953cf9c3af85012521860dfd449fc7fdd6ae1d9e8ef07de1fc5db5a10d2cb93ed4dc170a1e9160a3ee0224fc438af15f0ca2cac099e1fdb6d9c2142b7690c109d8d2f92195d976b80b1b8d4e052c705a5e3ddf201966cff4d094c43ab671c02cf5795b5469c2167605751d647fe88198136b18d02207c14d269f42367c144d37f39db4a3373b3ea7f877de7d1c87f69c0c7ef4346d2e33355528c08b019bdd27fbbb96f75f552924d366f1ce3e90e123d1d548d6f52d842e72c371adbe23f69f1eba54a91032d7372506d5bf0ee2057192fa1950787f1747bc763190b2891804ce82fe2fbe5a216636c1ca71b54f261988f95c8daa369bd62b64da6275816cfcd3ebee91a91e62073c78a8c4d1fe70afbd9528050b60935470e19772751633c36cf7d8b799d003e3c4c029c7eff6d6f1a3e42d038c896c534c7007062e745a163614f9ae74e1d491675b605f043ccc265d615ebf2d8c7d645f2e687d3f9fe3974b779a939f641ec83150dbc9d3c7813b4bbf3960c3f9ee9666c8dcf9a3d59bbbc36cdff0e0eb563a0bdbbfa872335e76af6cb8b6e8142fd71b3cca25bee0cfd309c6e8b3297d78fc84adf437f41db4029479979729ce827d787af883227fd74a6d236023cabceeabdb39a7fde65b0e936679fc059ce991260f5b51f9a6305071bd310eff914a3d822c891f093057b76976147e03b3c4c233e095f795f4f98681904d610a00cecf85b7acf1951a6c2a0f954ff4a10dc60c0b06c00bb397a6deb4f465f0c7b58a3589ee06240af8f1af4ae2d3e2a725680c281cd5dc2c60f8b480bc8363932b42d049a579168fdf99d348f2109a57d9dcb15aa8a8352e3f1814d884abbed378d588091501b0d4ee65ef08ef13a04546ac18372e24a7dcea5d9812e7bd20beeab7d333478a900cb1125432a47af383f34a4ad40438b5c47cd953179344e8cb2c58be6cfd15bd7056456036e60f230ce058d957af877dce0efa3ade9c48d8b76f9eaf17204befbd6f28eed61c07abebe8bca83ce467b25e0fccb29513bc9703561b33697c50aa800b7a2d8a152a7779df9c728c96b630d0a9de960f872977781e98842c85560a5e69871af925ce28b3fe4dc71eae53dd87a6477f6951382daff967a62e74c5016febf582742de0504b99069dd91ce2572a011b8fcb525e2ae642f69fd68992d0c13a41a6ceb18609c8274a8817221c5ac078393a314d63b88c4f1c991709ac90c66c317fa8ca55c31ae79ecfeca93f8f9a069797a3130782c879179ed28233864b5544baacb23ea461a0a7035bdf6efcd0338700cf23b1d546fe46f2aea14461c42da5434718f56cda978d637457350bbf7bc932735db61eb10b3ffc46655ea94d46790e1c1690ab7daa0a198e63616e4f52407a3b945341590d15833274864038f2dadbb47d4e560fd732799300f56a2e6972522b57eac46b92869f9685208342d4808a608edcee3537e333d81e8686c9528fd927f357eb3c7288d70324d5dadcf4bbb468a404b26e96d93f79218dc5d35cbbd1dabf659ee2ddedc9e04ccf430caa507b51f2f74aba146c515e5ad22c4d0958fc7ff67f629c20d22c7e73265b279fcf5505fffb5733c9746662ad36e59be45eb421f660581657a70b385686a32544998661fc5fc8f0c587f466f15d1c1f586d89e9aa08d0e2fd82aaaca623716ce3a986e423c90399872d26ecc431ae20e770aaa232a2dcc1f275eb8874aeac3986a703e274b598fc9e2bdfab8cd5e2b5943084c92f82f3b09e9cb5d95f93208398184d2906cb7e1652b7b7b6bdfd738ca9fbfc52394040d4f96dcbe091d87058d8fb3932b083b5f9ff45803028231a21b500eb067b56f6be25b73f8d7ac85fd0333a8f8f1eb06d7524e513cb8c7493eba2711a5cfcf7dfa197c85a91104f5889080145257192dd90b400f6ca35340cdde0da9ca5f3db529597e6e5f2d8669419327a022e1f6a727d0b8d5b6800e44415a306e40062ca208ac567f83484052d24982d1f1019f3809d08ffd72aa60d9a275559a488079439c598dd331be1248f6ebf7c3aa8c5a6625099d6db77251723d5bb22056742c914ec174b1d3f569e3bade47d968d11187acd998d5a3e717cab97b2b9bf2dd690b1dadd5b8c3c5b3a534ab8bb187446a9e45d03b24ffe78a8fd05e5ef68d4e02110fa28b476b28bf2a6aedef51172debf16d1ccf232c40eb6dfa612162a3581bfdd766e3c7fc2170479811d547bed1a22f19df89995b00f434d8ed939d5ffe05cdbe78853d342dfba789f3042f87f03b066726c2002fb69c756d7e120402a1659e9c874848daef726a3e7a0ac929a7840600744d1386412320bbe02c1f98efde84769d52210fe01e27733d4dc376ade0ab69fe32f62b5687601a98cf8c504df4ca8cfaa0223bbc0ec10a517b19d19b6546ef7c11081f759d0f93f899dd08bc5639fa445514f5e48f9abacc408d8c04abf44137be2ce11ae5dd3794fdc6386eb02e312df4b5354e4645e65b2edd9fd905558748342631f1c39b74ff4473d636a941ffde7ac114e622d4ba10226d2f5d7012e8b191ee2818d5cc4ad57715e928affb766feb9364b2b135f383f099d088dac2c605cc51b2035d43097add5c15c2fb9bb850539bd19a44a596671295c3facf566ca1d74440db8312fd66dab1218cb76945bdb70570ba59155c278828411ec6c2cb61d3f1b7f8215df2ca474e1b15bd2f767c4b3ef9cf88b04611ba61705530c7ad7701eedd1954cb5380656eaef1a6ce7bf96a3262b7e824cd19ba2c72e84dfd9f3bdc1ba029c5839c971d070fdc6c6160ed7e97bab6d2418f5c4a8622e0ea79a8f7ea29026855c9ead6cfe027455ef76555a1655475b1c2020cd064b4e9d25d45fe7c1c9f109acc0f9d31beebecc0b46e0313d8c22e5b883e7b075feb9b5677f4863ae4301424131d3c7fbecabf877c8ee9f5c78b234e634796b7f852ddb453290feaf0b6c5d4fd9de078256996bab98b9aa19ea801cfe2d7fa73340a8dbaea0c9ee938f6d6fea541249bc339294fa086733f34e3dd370d7f8abb46c4ab182ad98125059b018beabe8366a6684ce62243bf672003eab457b3cba6290f76ceb3909a6c336c5cc39a82b92af489437e9dae4bb6531c67d01b614e888364cf5108339bdfdcd6b81ed6edcea52d1b4efa67ec6dc4a46857f50173153a85280f236240f7083435ae8cb0a688ac3065a5d9794fba0269d04f93fa073e6de0de46cf5ff0b9435ff7c1cde20eccd1ef1eac17d5bddfc486c95a39112412af9869396f68641f19b97d8ec4379bbb0ac350053e8e968aba9362d72ff6032c3b84aab854205c014f94e4124709472f71f64a83857ccb7555cc9d5b2538708565d689f3cefba8dce47a756ad23021183d99e59952bb56ab9c0b116c2b41a017b3cad3b682215cf079673d5e2d2b18b518209c9ddf2be0d59ba46e3cb9f5af4df5f1f1274fe539a5ab5beb0986428f77155407584b1e60dbb5a0c341e71d3d0d4c63d81b0011ba091dbe6cdbd40656f592375ceda16dbd32d1778c29f7540e1eb40fecb448411a0d21bb7f2fc629800c17d20d2d431750fb3578580dcd886aae1fcd647360c4a5768be17ebc4511d0e41fc73110bda0ada060a6be160f6ae71ba0ebe2a0a1869dd45eaca614d0706226c9858a958f89adba200aee39ce666c7f469d483fb3404be2249ec66fe792c3ba8baf7a801bf12f33d265962612db7fc00f19b6d80fdb9f24d58b756a0e7502e1d9b9f76bde3ddfcc88257143b280e967e27410b3590f9fbec95aed86e23a607cd6a7b8f19adf20f2971c1a0f1d5cb2a80ace18dac87b985c2bac39afb354ae153e4c705e56b965e5fcecc9f696b3e10ef3ca307eda2459e9a959044d91b3d188c41f3a75cd4568167ea853bb4494a5e6efcc3de8aa6b5b8473fd5275120176497ad695cd59857290c61e00fb786d3102184be7299f4b70227ae3ea0c49fe5a45e37d9adc62f67ab73a792df19677d386f49465dd80e0e3be3ce6ce51e341cab33fcf0ae3af8e48ea3ede660a1adc2438927a4d51318c411f6afc41d62ed14ea1a530abad501c37cfb32da652d92b68142a6e221d4b736ccc1310066d20dec7500fd827479e66e817898f09cd7e794bc36b850ae65c3847cbc9c1e5bb5df573afcd88a04a83379df17da3a744b696170ab95e79babd31addd116d280946629bebf0473ef3609383e5fe2376df9afb627d477b19d994807f84b15fcae24f3ec854dbc0303db318d9b7a1f8b1f2fd1c84ab558e650f45c629e79d99bc8f359d0831de493de83b5d139dbcbb9434728c90c50eb029ae5f37a609750ea35f827a747645a1af0d7230ac56ee81c086e8104cf16f0cbf872fb48cae3b354ad17cbb825a7c4f780351236f5977b3ea1ae231c6fc3b8264ded9ab9e39f7060fdd10d5a048caeba065534de4b08e1b4c05bc7af4052050c5d2ddbcca1fba058cd4ec6034a1e730addb86fa377f0cb6928ab21f066923042eb6097daefd39bc856b71c55b146af4f34618b267f0658e66d0a498268c6ca4444f815e6d855e81d1806caaf99020e9f9067854e8c95514cb14c40c227ca386fa68cd23e3398ab7f7e34496bb1bc1951bbd5bcf0a7e38bf70948fb4c2071fd0561b203ee414da14e9b04c41c065c81396c0fac9e3f5054375a44ab15d5521a31904ce445c913101509a1290df82ec3660f0e8e5ab252ac6c3614bbc490a2da5c24cb1b8622eacb0e4b1ef40a2dcb3b06194b44dca87ed56710e876d41a8ac9b01d0546469dad343ead14c3d1977c54c7d8a984e17044ccd8251aa3e18f6347ed8044241ae7cc085717516ca0af5fca4f5c7550423db18a012017c6027009e94c9c0b28765c37df0570c25a5e3d5ed8f575556b0aecf746d4405a236bcc91697121727b674211ed7beffe90260c839b7519f63bc4f5e38dbb3eda03892ee3ba7c998b871e2c783f576508e8fe2f72bb6fa8f55bd7ad551091bbade27e3f0144d8a920b418dd03533bee4bdbb1b803ed0389fe307a089e6bdfc23f09f9d442b5200fb2f8049082b6860abcd49bca842f816d34db86a1fff410c1f13b869e24aa51b355e96ee7402d88b5472d794a3463b1769ab233b6db79b80ca7221c9790c04d458308c4e8458756e2e75bdbdef1c0ce1811b097e5e917d3bc762f47d83eb6cd5c41b0fb9a0e37788fa6025fe187bd3b78f88d8fa319ee9b02319e5845733f0897a8702b3170b8c0cacf39f79d28b6b876e81f03ea6f859f1b9873d3156b9ecfd3dbe7a6c80c9520a44ed5c870d2b8d7fa2d5f86dd9f2f25c42e22cbef574074a12bca38120e30fdf09c14478c7fec89a78d909aa9c98550790b7f076f279dd0f83d7268acefd04e6bfc3165db0ef2cee130e7ad5fbd99d5e641d6624320c6b4539d1d4994550ec786e2089c6ac020cf9006d9c37ce8ce547ad71758c54ff4a315385fd4cd5c6480a3d36a64c6685f601bf9e841de02d9a56f90eeae8909ecbd2df4bccf4830a1d142225538af13bac691e017b400b425dd8ca7502a3af09dbb5ee56944d627a6dee803342ccdb44aff840a976b063718a735879f62babd96a525062cc46a7ee39ca6f1751b3e291e4807125c186483af9b005e96876a607defe6c4f512b6b68af885cb4b529d54c62dc4e8c52b0dbd723a788acedd5b7284d1abe79e91e20d15ef34f07705fa49b3fd7bda69cf39d10b96d8887f5adbffd50e5c67042f7ba90838f80bd659516da0c08f11a7239227e06e9784f489f9a8ae16624a8c2fbfe3e3007e3ba022224b2772f0d252bb8018b0a2859d8db71271d351ba800c49683905995a61f43fcef04b8413f5a20af0d73a5d2c2f64a438a75680418137f8069049450fe9171f665b20baa1531f18de38b26e197b29730f6dc79294b3d36a19aa620afa17c9f9fab1dc6d1ce3a32e74e3558067e6bd21e6ada94fd46aa40d65f63c2773f30860317c9563d8758cb64d1695cc5e58e9f828f028cd5c7f19d611f313d9ec29fd26fe3df0eefdb92080711178c0ef631854e8492b746277662959a090789529bc4aaf33d5fd995267bb4ced6cc5d6fab962be0b827f82754db4d0d0accb26d5024c02af3665635c6b99eb87346468cc32100c2a21751a237014099257db3f30f811092b28041ae572aba7a3c215cf7605274a217b25150d2acddca5f1c3549f12162ebc55a8f2223cc73f3628b9dddd5004a2fc83adfad1dc539ebd47a5bc37875defe9734d9cd9fee5a4484efc238f27fc6ecf02e8924674f6dc2bd9bdfc38c07cd05e512c503c21a2353a19fe22c2328a4a316fb3fa105c90aef7de7816c85bb1aa915555eaffcbcdf6cd41c39bd55cc921309819722eda04971171299ecc887a50a7ef9c1f780c6e65bde316f9bde211250d64ec4190323b1f1a4793cbeb45fe66a9dfe275c66267b4b02bedd57febb26d4810180af56f891d27f62f8eee0d54eb38ff39833dc3c8635d5e609fe16623ff535a7468ae5fc517f612839b72286d727c4d4b6a371d3520193f812214c5c9b9ba089bfdbe21588e8a08872a4a0ddfbcd11aebcdbc0ec9370bb945833fe7bed3e129fb17236be32bef42d959884c32d8becdb0b3a6a81c6083f28a92ce5403ecdfaf7b26cc411335888b21e23b6659fb6376dfdef259ef04e05b1487a207324d5a317bfa9e4d274b290d7b4399d2294dbf68ce1fc595a623780011a4cfa885db06a275e7d6bc00fa7411a110579cac879efca1772a0241c6f300717e4cf59a1b4a70b39172963255121fcf78e8fecfc92d932add1c1907fe688cee17c0d204260d166eb1230048df616988463f2d79fc801a98032f2c2aace9f1f765541644349b4db24b8ccd0a95067910bb382cba31d19e184daa7996880b671373ca3fd9c7c099848339dd96d25b86caad1bcfa0d412274b790eb7329fee804e1fe5fe002938c4ad57c4abe9af9648853d49ebae66e4de135f0606c8b011afce5922ebd7dcf2eabac8c6da32ddcdb91b12145a66bbd7db7431b851bb8975ca51f4261079aafd7e32c830f42d15a6978228d930725e77a3dac5f3afe3ddfee439bdef54e247b392abcb0c4b6d5408ba0e3060444750b658d3ab8f0d20256e42e05007e0cf50b925c6486e01a76195450a4ca4b29e1c35d3fba40e6aca66cc3cc1f4d9024c91adf6d1b113676cd3c465f4fd61a8f19aa484484f2f2dc3b4085a754808e74316f898a6f47b4f05e6ef8c85dcdbce59113368566d371108c08eb680a055644ba7dcbd2769e2fcdc5d54c16e1aee8bae973b4e3124d37c6115537e6bde2885f6b4735692d5d97f1d330b047e214cab4738a5d3d21b6ecaf72267fdeb8c9429e2e889d42bc66cae507f1fa42982214c2978fa46312b7fc6e5c484a1fb33f4921eaffb00535ec7e1ee2c25267a5f4c4768c51cf49636eb4ba1186442aa1e7f082cc0f3b638bee475ef4b1014a765166bbac280f72e7299d743e755379bc39a227f1f12071b4118be6bf03afa88d3800ad300d2992419d5e3fbfe100151c401ca55d46e2208e4f02d627e4d4a338042ab0d94dc775f4aee64917ae3fd4a9454a5ebfa9394faf6118a66906bf1cc69de4db819848e7841197ebe97fb40ee663329b2da939cb6879ce03385d4d68d25c6f51396eb148041d638823164d9db3fea056429cae8da9d836066a7f0552a0ec41fce28e6bf13e5fab5f2fae0e9d2c2c29b9a0a62c7dc4feebc874182c64a1df3587b23761adf65697a4016906d09da4949d2a8b12902afbe4f01c8aca77680d2c0c0f422b106a4e5756db2bc47a5bd4464b929af42e5258f36adb4acf409d32a572ef63c8dd1d24c94e0cf0436e827ebbceabe046cc05d444efe0bee2a1642cb7632200740931073685615a9a67c9a1932b851893dbe33274ba2ce592747f471f1e4c7e30e47d6680b1725de3a1d6017b9a5706996b09e5026ed6665f818dcd3b59a376bc0fc96cd290155b284be1c3ca5d4a2cb8145b9a2fcf086bf320bad5ac0ad3431b219fdd926099f1407a1fbda882ebd7f1e28c7c0c6e27e94cb298a399de9329826af46f9c762d3f69668f81cbca9da5c8b15aff67c935801b72a91a2372248ecf2b4562056a04479e70ae62f83e47a011d158b467c55469dbdadde8ba11b3d9f12544e3e3fcc6889b55f82125d7d0132a8ccb3d0cbfda14293aabcad9e4a0a43f03521853cb3009d2e8180fb285df43b7b16acc8ffe440ee43355facfcaf0d86faf673f3e817dfacba68a3a26dd707eed517b0d918bcbecd5880e93165338c68c3c051eff7df69c181216d3cc8982eb8c09e3bffe52f3838e36084f39be37dc0f53c9952b5fc7f31f49d85beccfaedc5012eb768a8ee7efc3195e1c4b0e611f76249eec89fbad1b90e03d8eae572a35ef15d14f2be477b5c66053d62c12c010a70415dfebded29255e1bad7143fbf682005bbe4b3a37411727b99542c13c1df34d064c75e4c67c95878a8f967e638cc458796c2613fcc11a524750987e284c2d9c636c22e533a8fcf0bad0f4258f4a013ba8a9977228e490277660e5e38d61a195739b7d75fe3e9af023790523d6d99113aa515031afea635ed7025939f74e4f60d01e0dc048c29ce615260d226e2778027bf417073f1616e7398688615f040b709e41c6830fdea0f49fbf6fe31ae885725f968131040fcd280ef25fd1a0f5d7894754d02ed99d258627da42e27022d5f518a8652b95337275910aa107618f4275e03f0d6df27b1835eac91ca72af923e98c6a3547c7fb5077edf320599011e2d7e059a0ae99acb61ad3d8dca9789ac23dbba1fdd6c676953fa36394b2c1d6ea0661541dd9de0dff2934798e91ac72dc8a2114e2eabb6e98c498141e2b25485a0f9b96b28f2ee94cbcf74a60953f40863fc291c8ceaaf045ddb92dc098b357e0bfafd87eae2f1c7bc7f2cbdd97e0e3747be34d69163f8c4e4e9428ab104b7464c4a860ea3fccffefa59a3c8679152f68cc405ba2f779b5fc685df5d024f0d4e696b61bfdae77fd10b7542be05c66c9d14e1d3a1ebd8a75a69784afe7160ca5fee63855c26e4d8679728625b4c8686af5580fc1701ca629e5dd7b6030805f6f3ce61c873b77af2727d4aec6786324cdb8c7bfcec1fc70581eb31d1e3f1092f1bb73bd18e09c4b4ca2132c1e719895583de5332437f1dec6da431b27d5cd8c3e531456e1b0d47b03e24b6fd509713f874a712e4b1a12a2f2600663b073057fa6671a4a6087ba634ac784f240c29279478896e904a04ab007478df187b978399b0d3152770468f956a9cbee60e18fcbe7b44f733000e0a85a0fc3fbd4c4f57cc0dace8576a8f14931f6675f146ae80c82ff0acbd89de1e994170bdb3269b07a9cc690080980f2ddd4d20f8dc555b39ecae3caa1c9b5da69824e28f0e2d476f3ced5e4e3f70b8c1a742fe1921873bdf7cc12a24b800117a522bc4c620f4617a8ade61a0f3844b620b9bd70f48bc1e82e511a9c18a32f19de7612b7d80e983ce90460774bae4ba203bdb8ab4be608407ceadf3eb28eae35f75bda69536728e752f5f2b1de16d7283c9009920c6edc5a893841c5bdf85641cf8b2a2ff5df09a3313531fffd8a77d3528cdff056f8537b93cda5d589064d036ef635dc76148a1aed9e6d39ad486aafa7ebee19ef2909fa90086fa3c44376ee40064f2249ea89d2f58ed67866b04a9fbb89fc5aa1fe491cbf71085994fc777f568cc41161f988d53a8582befef8f13d2d0eaa9a15a7a3917f3562c1ddd828d6a4b05c5d9a53ec8aa2b303c274ff6e14bfa3b0e0f33fd99a626b66cc89011c578d4a6747133da41eadb6c1cf11bea68541161c501a76f80e5e4b3788778f6ed0b834cc5ecabf6bb0d1c1e579a734980d2df6db22cd6d4c9fb29d7230f181b7c85a6757fae239f9a6cb6f4dcd6505ad62122cc47e36663e64f65d90e502f1a3aad436dd8637ded3413d7c92bca80399d78f27f1955953d3973fe462b67e0ce12b668fe93b1a8f174c7789615cc49358747fdf283355eeb5d5755c46c8759e006ab643bb5ec0ce2a5fe45f0359ae2bdae083af4c323195707bbe5d611c5ba5b117abada9b5106f06cde59bee46d7aaec1877e0cc1dc35c36b8de187b196536865e48287061eada2c5236e42913b07aee7c37d8f2b00f9d9efa9aec89b018d6f1ddc94435b9b4795e3ba0c5e355a72e0665fbdbf7cbe3f9390435de1d601f7d6572b0b8930ecb0c0e4f48530231f29eecf6ee703204330051ca4c96a9ee8ffcc1c03d42dc2632394d62e6eea95465cfa3b1a4601ca4e69e7d4be739a147ff072dfee87d47779480ca7cd9fbb20ce56b7bfb34912268e96633da6143fa83a7f2dfa467f48e833f909cfabde02909961eea3dc814ac92a275e2c53499c444bf52d43b9c2655e8a699862dc8aaee925b79566dcccdd3ac67dd4f1db698d051dccfcab17e481d839d7f3d9c6d77cc2da5b8596c79c5cb5ed6b07962fbdfdc28d8a304000ff32ec954a2531c7efd32148c73d91e4bafb37171128def56507c4463b4fcd40b65b4dbc487df8be0dec6fc0baf0c3090986aaf0bebbb06a628020e45517a345eead08c9e422714f7dacaf62cc058cc13a3983b2fd1b2a2ee8e6759a9846be5b7132ac5dc96a333a74643d9787bad74e0fb6a9d9368c13014b94d673d80e8d9d3e40d205d52741f909cf0a9673d1c7483b4d015a83155cbb7cd7ec06b55c6cf419af9ba036c0144681e156de5208fe7aa88ed4f9a9579e8b025391a6878e9f737464a84d495fc77e4ad3313560485e4aba445d129d33c2536f3192b01fd776ef732180b68ec0e512f9e5808bce6fd99044e21b84ae98d8e2d38e3de949c0032b0dcd9cce70b3d5fc9d272834ec0cb001c98834fa7c7816f8f5d24554a701b6c9a1f72022e4193e99cfe9eef560573825f1830981858ccbafe97316b3f8f83722fab323686d7873ccad57ff821f7f3ecd824279f178148e8fe1f71fb30c2bcfc2729ff85ae86196fae0a67b703cb1b76b9ab384638a228696f4f94af1043fb183eee1bfc861c82a45e03753ef8f020494243d7ad9ca02c51219b613424fb767db7ba263a88458afa608f37730ffe39dd4a4e66f5558e4702bc68e285b5b10c2f6c881e4db33289cf9c9340f77b27ebab9f84a875a3b957f2c8a38a507ed56b0bb7779ed3ee1f8ab2a5b0972e68b8d67fd97a8f868aa983eecaf3adca4e907e8f674b53ca79f15ea2a20efd556f43fd84ea9f0255fbfc45a61561cac6466bb861416d0d761cb8f1452931ba6fdad11ab23702851707ed5ed8826e2c28c9994f2573259c43c45b02ad9fc26c085006a1f3a1e4fa70d74c531a76f41ac6225ff418e2db6e60ac13a8cc8fa71ab631cdba759729ae43470d4b02d97f54718d68b32198f93eed633601ba542d75b90a58fe94ad40d1c1f3c7c630965ea822038f687f613b26aa9cd89057b2a31f59863c073925138d488af841603ef06d8948362593a97438925b670906d971292f0561dc439fab397d18115280a4428f299f7fc50b1ddf6aa87b492bf5f97ad7da9e031fe6ff385234cc2025004cf75e0a6e8cbe640612459c89b78a9700aeab8691758e55ceaeb9b568ac8d1d22ce3666fa52426904a8abfcf56e4bdffbde667fd10628836cb95b4068c5a4f8e5489eac3dbdafe3dcc1c6ac3a0898a56fd46f4a3afd71f3c07cee98e8f5d46f5c4136c24553c7a37bb6f197619cda7b47a8ca9d903d277828e25dd77288530ef8bc4911434d96f2d5010eafaed2d1c29d264a497b5480695341372c3b5d0c7181e36bbbba65fa7701935e20ce9770d6a394e947ce1d720e7758a9da374018fed377a4f988ee0ed73f86ad50b0ab43a9f8ed98abf0021d4cfdac763d159a3d2ed2de3cae6f38e4e3db874c3e8b3a2be5b205b3b1ff6b319b1ada6ee1b530e0b07c0bcb5e29b50693fd1f8203efcb985180d3b58665ed92f05444320a1022c62f4fa18fa49df5549546f498ee0fcb80c7e4d27e174a86b0703621053dbe19b4638a1eb4922ff66f083775e5ea310d6787cd5776947d8eb3b6b9ebcfeb24694b1244cbadd49bec8dd62ac4bd1df96b38a62ccb584c69639b39aaded59186d88fbf0055a7e29d21e2bcd53791ebaa84dd0d02fde1d9e18b549b6555928336b7a4f2912dceaa52b9087df9b1fe73b5eb305d4f301d33c26e38853e6e0d32c3f65e2dc9c000ba92d45e9bc57b9bdd8ea3f2fa3e4563041cc5fb3db4910ef6c1210f15e328201619e7b0e3c0f1c834deaa887fe829e932e80c3badf249beb973f9d38f5ac76597cee25025e3cf6a55549b363dae5d94c42ce28e70a84545a0986149f6c8851a1b9b76620ea775305b09689d4c179c91dea78bfb1d929caee59d11c9750cf2fa0fb0ebdca551c76aa13fbf0dc7420ab6cae90354dc27f3f40c7425b216118ab21cebf0c0d08e965f9082b05c7259dce9bc3f785da342c4c675a3267f008bbd2f22efd826ad4dfa23d59ef1c165d07ce6d97a1f3af032c1aa76a11a02a52f5d3a1fc018cb26618ff1ecfd2ea16b7767992c102a9d542794b58842ee2bb426b38bb94bf3f203c69db434c74dd8784ef8a081c0a5d32d58cb3f865e5d24fa0dc89e4d6ef3caa8623616fca03c3ba3accca3f1314d60eb8112bc473bc332646287223a16675f0799cd62be4996243a1dad293e2195d09782374cad395c936fe854f9fdeb081d15d2bab6ae9f2153d508ca2ae014949e76bd705cdbcb4f47b9b6a59c76c72b6dbe8bbeecaa1b3d3d665f74f5a724c1a5c14f80596cf181c934fac8d576d216c8a5328e3fa528074f812c14e409a78f2fa0d58f5ea55f6f9e94b9f083fbf0aeddf1ef3fe6e64b15340ad4225470e401f98587ff5d735a6165ce76b77f3a5eaf425186aacfcee7506ff15f6a86ede1426e4896aefe8271f8cb2680ff4d6be634273e61eb2010b5858bcd0f15f03ff6f5ef4b2b88dc818c83f888f8cafa9483ac16d5797c40d26cc553421ba128aad83a16d18c617cc8adc560f64b7b570b461d8d312042aeb8ba2ec27f0a827f8b8eae4b8b099add8ccdbc80be44d01b6d26e6171a749f93aef01da813acd49a9dd178ec7d1f614d44d4c6948bbbb86c298cabd86303a822273e088e1d9069e1a48cde25a122b769d92118f01fbe933c119111449983da3eaca080765a34cca6ed3eeb7c23063fd0484d5989b59e30e04e06acde1a90d741e4a413117662fe0de473144b03fc60a2cb8c5682708790517a84ee459597d17c364ed7d7682fc4d2b66fccb058b4d2516f0ecf916b3c4dfb9cf3e7bab41f92e9c8f1bf0aea0bcfd7a7fda69f99d5765e1cd06496201f960d8c3230a92195b47892bc33b9c33fba3c5f1d6ebb913bb74834fbb196d64c97b6b7428e1669016ef56ff0b8e05c6bd316a327c292dc430f84d7723d51e85672c7a525b1cc324a3d8ef0a6342f25bd19c03b4d20694e54226f3950d65a3dbd47a78c19775c9e75c6faf8b6118ed09bd571d68782a2fc62d176a1085b498026dd152d56d2756db9063fc8ec637588dfd32332dbb05557b5d2e9652f5d30be4d273372db26f2054c0a90ac6d6fe57ba8ecbb427c6d9c1d70e63b889dd12070b2318bdc51d5d255c9835f9a16ff3276e7ea1dade25eff1767217bcbffa9bea89a5e0f190d9c81f2a078eff6a2d39619e8c9ecb2248a24adcd7ff3e875908a21143e339b6a2a4ab0e368688d12e6de536604441a2676398527e71af13a09264280a0472997a46cbe06a194c0177d56e8d2e14074e1b10d2dfa0ee42f1e0581d1e25f0ae1a1ca75beff1c84ca74630bb7a08ff23b2a0dd31ca03a6a0e16e3c64e243072292f66b98e8a76ebc32e02f9a93d7b6d1bd582f24c872d56d9beebd410c4065a4d87478a427b422662b81430219f6f6f8267cd17433019dfd8999d6dbb6a3911b15c512e1fe69c991cd9c4efa6a2e490830b81caf97c2f54d9476a4bb3ac5bccd862ee1b5fcd994109796e24fd062c165e626398d5bf26aac028aefa4b60d3abf39d33ee4b6c03579b432b09d2a3b1be98c2555a19fdafe2c4a7c7f501ea2f7659a2ffa52e3468d5252d3e31d89a953f0625b52af27c21e64a1e62d2120ce7be569d77d413e2c466a48920e4a7e64dfbb9857aa8b215ee12cd3540d313394d9d0854071cfad919a322ecacb85353c17d8d1b1d5ef840019d071b8408fa0cf322c6e95291e5bd2685ec5fe34571a5425faee152bedd9284cf538efbc2a6986b4ecc712ba2187ab7fee75bd2a43cd2664c246046e61ce3c35e2ac642a667b004c770517f0f4685994e0deab2c75bc2ac87ef8e8caee756ba0daac4cf35bfc3f324b61052ac346a29afd9808ae74f250c63c34d914ae9271a4a6f19a89d0ee4518793830270ce24966ea9d4a80a22a7e2e6a5553070df7395b4c238e883a3e00dc6be1894f5b62482d7f3f8ec6ae5d380474e83e74924388a5b640b903c2ba7caa6577ffdc44cd490ec1db0b8d6c5ad805d5dc189b473c2ba4014a635083b7fe5835e29987c67956e21d66fb16c37db77b91c06bf2064606925d80d5de6a77cafaa5ab88812e2ae25a0e512871aeba9bb3db9672fa8dbac1c3a556d6e70def5f58e0d68dca2f98eb460e6394bbf4e2b94f7de73a5eb80422e83633e3fe971baec2e234498d04be35d5ec8ad4a14f62452b43281883ca5f4b05b86f7779a99f0b4519c155c709a1141394d7f8169e0966b35211789787fd10704d8460fff4ce9941b107eb1a7bd4ce3000003f988c4e486030f07d6105683192d3ed6b20c2a6344aaa262089b12f80ccdaf7f5eb5877a9b7bdf0eccf4b49e9432164a2fa1a411e6391f4628a47126ec81024a21d8797f97a140e9c05a418dcae3f68b5e305b72fd89629eb6e8759531de903cf43a40fd9ccc2a3e64b2f87ef447402579f55f87b7264dac1375790c8fa1a7e00526d5c8e99fc0b7fb7d7709151fc0db66e313b00992b0e394f136368f038d68a52c9a90f4dfa5b66943ebd440ef1763185c721c3d5166ef223af4b8f95ca348216b445e3384e736bd69f0442c72a168f01afbc951f42a5abbbf2c39eada5ad27e2c93ef0e81058c90326a41f11986d554c3c86f6e380558157b09896af8adc3b391f9ff3a9d67bb96b27628cc20cbcaca6f64d4ff590d1a0c82481a26ceca3b2ff03f222603991b6fc83b25f79e2c36b54db49abfb294da1329d85074fa11971d6c363ce9706f7900fe98c69ee1ef851d2ee826506e65c1aed9c8a48c439065811b9af9cc6b3d2e95232e957bc509ded852877a59a9b4edfdedad2bdc2d4d390e8003c977bebe920004c4402eee1ea8aa6aea9dbd1f6366097b049dff2df7c706883b33b1898695780c9055df9ce8f4f2857e26711cc9a1f1739d60af951837a386f289c68fd9cc18ff5025e03144c0f4d4506e7b0711e83d41eeee2cf26b21df31850f64f1a7265133df718de8874d9eec215d550377bcdedf6c55a6822a2ef451ff139fffbf16859299f60152eeac325e5ca2a134e1cafd67eea75aed69a6ce1a2c6c73ca0a0a1270c3838001f8d60c53f39203c570bfb46ee8bc38a89c356e05aa3423056e53cb0d6b9429f4b263092b7abf0ef91dabb64a310634c17f307d29e220c1ebfe8cdbdc6831e8c624062d0aedcf64e780edb35f03dcaf5c0a84afc44dd442fb9aed3ba501f272b86be1920fc8e3dfe94307a0d68960c3b1236e71c81dc1e5e97cc39a482dd5afbd571f23f95ca27660290d2b376855b1fff7b4d8b4bd6afa78b91f9295f4f32dd09a2339dbd088f12453b2b962ada4c4365200a78abf1c945c32f111071a972e9ba1da216b5e5d16792ab951eeace6e3f1bcebcc0bd13969229e3e1f4b540851f95362e887f2f934c320156bb43ea595527ae00ccf7f466626f11dc3fa5b07ce4fcefcd1c39fbc81d1db01a871d5a784d68107cbde2c08618edbf37ddaf07f1953adcc1bd9b8567142ec242570ac2e48b057c6573a1296b891f586fdbc5a04cc5f2511e1106318ea26f05a9c56ab2ff606617d0bd28e89ddbb4cfd35b8b4512a3afa99f8983b346c583a53194159714e02312a9d3063b62f2889596f1b51a679fc7e23226c8f2af774505f964ebf713ccc9dd678548e885a92808213d7312cfb79c73c91dccdc525270abffbf81586deb68b576a07ee73ce670b6bf1925c6234dfa28f60e371807016b61e8dd1c15b21f85b849c6fe245abf9e20b79ebaac4299d0dfd3cd0b01e4160af270c7866555a196ec859d11bffaed8298099e68670527e2e3f2b75aea753a6d056772f42921fc45a6110415347739a23ba2090a4aef1024f9098f99879da53cf7ee371744f1287e25783d62f14f877bb45c40321700a6ea34a037be3f7fe61a3baf231adc3e2b60fff7b7e4ff2e0dc58ab3bc0ad7b834e9e6127ab1d5b08537abecce0f4d08a4bc3dac7aaa0f3e8690d3883a5b932dc3b322a9153f20e9c890eded3881cf1a4f71a728acc206f487c23f857e7bc1e6ff2ca35fd2e7a6187cae97d90150ea0c6759c0c30590051cfc19178156f2fca1f8871c0be85b5abb177947a0f8fee688a37a49ecb3f407cfd0ef05b1b69dafce5f6c7101bdb59c0556e3c3bd1258c4eca8732a0a2d2c510064ca1b73b25a64384061b97a1f6bfcbefa0bd4311dd2c392e6888237c3e04643757ba72c679ebe43dab1b674379ac5aa36758c61f71a257757027de6d6a4b9a0f14d66c626b5cfad54d719d899e1553254526748919d586a40f33a3af23061afb24c6004832e8bdf7390a4ae4ffaf84a893c0010d8d476104a8ec7c5d3f0e471f6848a11749f506b02ac45fb45bb71ca73c61100b36849054fe6ce6988fb4241fc7c65be5ee7c46d34e9089c3d2c8e9016789a51c6de1b0eb577905202baa1a6bf54d9e5eb69dc48584664088a5a799aec4f96f3aab24c0e86d336534c40bafd00a515fa579c2a74719ddb73a165076e54bce20eb09e8b7a2873a5b956cebc9aa0270801c281f138b5d883d09f916b72ddeaea3c3fac4ffccbc86f53eca65ca4c1b2134ae8c8b0a9d665b51a70153aa49f1bb0c2ba14b673e5aa05ad9d05477e4a78cc96258f2d10e4cd0d492cf5171d5dc6e7caee199f84864cbf2f98fad3b29c3d55bbe42bcaf87dc901a457b92d39d745ae4624a6bfc0c552a885144f4126bbbf0f3767904e094fef1a62959ac1a8ee2245b07fe956e997e96fa7c436c4df699e3d9b927b32e64766c446a69388f21b53f04ddeef95f3a42867dfee2302d638321900a07da11f64a54eada30528bcce71e9e893ae1b754eb3a956a08f8a7c4f37b8941822345e86c9a079817a2275165bc6ad9d0f8b83e439c28a950ddfb0712a821437704902def5e27e0555f58de254935b34abe6f1e3ac511aa24a33d895e7fc41815761691a6a6dfd2b12a27e1ef102b4ad4d370de8b5baec99cc2071bc09c3b567b8fb7e7c0df7b4c8651ea04f530c6b0e7a51873a185a34eb9b1f8e8af8391d844b34365903c6e74b9885706a5f190cb1e43d1dadde41d1db31c0b794aee4c17fc221ec568da05e7f0c5d54a41c7697d0abc6e241572fdc4b0d6292683f99d1a585a713323f481ba3bb123c35f7d41a5def7850d815663d996048903503585afc97ec8df54d7f459d705ae3c82c88a89d7fdfda7d0c8bc20a7946238642ee716f27f21e00942d8b2eb5cf79cb5241fe1d1746c21d1e3793b04e7f61add1de0e6fc38547138a26708fedaa77471767c68be21fe86862279b0360ecfe69bd0844acd25f4d57335e01fd993ff08caea4fa6c7ec5eef4912aa58a0f9d199c2c5c485bd7fa1883de7f9f4cbd8901d66400e8de3223aa0c65d820216b3cad8a916330ec29605f7d9cfdd96464e5c1336c695e559228953092becc16d19b56f8f692ff7d07d82745848fca37df7b3fde34e19c3fd900cc0774dee6549cf40c25c7b4958886640fb9e1e133a09acdce1bb7e96b200b794b33dde2d1e9ffc5184aa6688c11b60f0f52a5a67ad86901465077667506b001fcd3943517f1c25472bce653cffe955d96728e89b4a3d75aa5968f694ed9fafbd2a8c368ce74f91c04fafd115e52a93142c73e4f2e86c3a85a011e015344720d0f805239c621e2c7887432834002929a7332e38ca6c5d2e84034722ab31b9559f97968526b928bc366fdc9b80a7ec060d4850da9f548c428542a5f54e6e86269784c49ec5740556af2b911397c48fcac0770935b07da39eb9200c2406a9159a11b503e579a30793b3272de435a770c22879824a96d37a24694cec44efb150806a4f5b4f147cf38a2dbde59472a1df90314cb05b1039968395feff7e6c60f14cc94b1246b5c4d790bf343d87764e5d1fd07eab072a81172908060da53dda2045055ec91f076e7107814b155d1972ec441f14771fa6701751c5487ed4338b8adae6db0f58de6a4ce285a76677260faabba4b63bbcc7b0749da018cfa8ac7a14c7e83cb1bc84b1417d3980b86fff512753f7c21f65c8fbada5d46879c2d331c1c70e6395f9108ff4d4dae73e3f5144d47b5d2be193a6643ba73fa6c408912271eab47d55a3d19ed5cbe0c407c225a338965bd8eabf4e4fbbc12cd58bcc78798cd795a7fa47622ef592abd14cdb54dfd465b1258c5a0c7a700be1f8da7ad445c661dac865ef5ced47c99199f5f7db0d89b7905d86b972a3c28c6b24aeade20d3c0fe662265418a91b7d570bfdf06dfa33d151e57603884a622e43edfcb81924ae963cc9ed9a08c3710d15d250668d505a72ad4e3e829486bcf4a10763da694a60fde0ba0d7956958cf80fe6177c4a203c11c5fa8eac23d29d91e0f18d1dfbf0ba1fad66cfe6da44dcfbb6379fd2b2af7060107097e02211745dd1e9a9e7b8cd32b27952040552f48e158fef079db2c15cfc83b6620bca6ade3d87b6bfcf1035843d5b6c865821c8c42e914ddfda942399efd7378e2eb78f38b7fb0ca1e543bd74e2061ba61e41a545a0a12dcc5550d706a71c482421ace60daadfb6724c9b1c51627809e974cb803a1668bb6b00862e7c8fe33b513c235c195f88568741495943fa4e7eb844841a90f88c23fa77ccef81cec3e0c14daa913d92d590330868fdc694844f4fdf113a98b8e34fc2f20b5aecf9a5d7a7b34847a5eefd37f96fbfd3d65acaf48ec3bd7872f0c72fde1b026b5f6ee2408f3a6605bddf7181ea34ea72692240d6bf3e59c78e51ece9725eb176145385e121bc7094dc1f45c765da0101df99c5238acf74fbeceaac1c8a9e1f81362e9178e064f2a52c94a39c9c128c97bcbbe95d53d5d93ee5816538e6f92ff6b79cd88a9615d382d6bc256efd40ab82c6ac452a50b61ce7ca3696e4e31a0fb463f80c0664ad9c9bb88fb80b55a4b5e4637a88870a694452611c020b25beebaf269c5e940aa90daf0fe7d0c07ec0b48c8d5b14d6b2817bf98c04715f804d8cd9c1ebe6607cbf3983bd4413669748d0cff56e1ea8e01c2a99ed43f6555f53f65015ce8c1c994e27c1b43eb95c7ff4211866f08d8c3edd8aaebed75fd61c70196e076a456848a1c921800e3782f6836faf799a95ff0c49839fe90060c175a4cf203b1be38777f2d0050909cff6b76665244630f19b80e83266461adad4600acf9f3ed92abd3da0393a016d474853d95725a6713d19ee6c45b9b4e2f8d575abb8967f814447fb7b1cfdc95abe76490fb2dd5982bce371e64f769e76768594d20c7338e4d85e440497b41bb618ac558d97dec70f2028ee8f1c78656588cd96a2813d3953efe3590867e38f95d35d3dbf01dedd7b39884e4fa7b9f06f78f6d94d3425ed215b90b2381de974511962fa07d99dd74996a21abbae6b87a260873d65e3ae7e96f339f7352f7cd8cb02f5b662b14666dcb617cf4d4f2ad1a5e5fe37296cd45900225a68b40b2df15a42478f78445365d2a796f5dbad8ce6ff3288f1d35fb6b9a41b9a61a8b6e55ba2c72e0ec49d47bc0706527686b9af63ab423b08d6719e79f9437bee40925b78fa2258ba818d28de859b6cd59a27cfed66af5caa782ce76d5dee7d54263fd7b6a89f811db0e0fbf59d01ff80746c683f984b2e4ae6a81d3cabc4834f0cba3b975a38855f7c1d385300b1e54fee7f86d2a651b8a536af84e291cb33916fe07401d00e837b63f5a97aa20342f667e935da6c93a0b4a8bc49cb273937269ac0a3a8c3b0af5db3efc7b3956bc32ef65b8bfd6459dbbaf3ce291d7656176eadfa58dd8f20bad5bd8f0b9f34ba63f9a2429de7941e7ca09b72ac55d78d8bc8635c0ef8a140e41ef94c0e1976f86faee4098261415ba3b453112881e2b884d2de58a16a888ead630f68aff5f75497e0a7de6cbe0d64f4a4911a806a51c491a3f3e78988fd975022956947be772357bda8e59362e5b48e9279776d8c44be0d292c350e462ce9bb6b8440b204535a1b17d211fc5b314f3fc2a8831945cdc954a1cd544df6641deb0cddfd5c36060acf70a696157da8d8b61ce954e2e7ba12a8a7e6cfb4331ac674452c595dc1216e989f80ae66f7701ae49c96856d578588973c300d47988af7ab239d1e1d0cb8e3c2fc75f5f1d45d775864573948b93b7d5862505e039f7380303c2fa64f65c77b049db93d16dc8b06e3dd284533bc36fa7cf2c6fc04faa2bb93191dcce179260f103f09172c20f52a8dbb3116ce25d1b96d51e88d01127ac8811a18ab969d81529745a2e0dbcdd558b478d5a4f570e233c4c05a4e359a3c98be9efa0cfa3374d8c97cece69439ec4eaa1c04f9e7860f365add4c408cd69cca9296d587a16ff673bcad3a297db2bc63972104169193f9f659609f8bd6a7fa8c1143a7f503f8cbfd93168b8b55ac98350081684f051f37f2991bcf6dec0d18d47eb830f9802d834434d31e3330a308cb517466fa1b1a6026db081b101670cc35bc965172e96484b9419af264b110594b2e3ce4553750a8ad682b8d569d513af6420f6bb51b5206eadf6df25c4cf8be61c00a5cb95e068d900ec5185c676c0d6c7d535887ccf4caee94121b5cd94d8b0f4cbd41ff6c336e72c81fac81176e5ba8d8479a6327cb9fea789ad81da05c7f56c3aec739da8c6e53323092e5891a39ad3a14c08a276e7773b5910e960c83b0e5c9abf053974a48e7e0cd8dac4dc9ec09374b8e37378dac0fb100d448cf748cd5fd9cc317b019a72e644c2028453e6e98da3c42305d1810133c33bb7cdcaa659279962c618445ffd02768a2f4927033f32e94337afbcfd480a3f8816ee71e117b313e44d79042c0bfdbb56d33a446f4db7e8a59940920e3765b3406135c99aea809922f141fb4541ebd892bd3a6c9fc0b1aabf193c2d10bf942921b5d1a2389b1f43f113ba4db1163a1736b899bdaa8a1aca8e2197d680972a9a7a92b2e190e1e165299a340e35f4d969aed1ba2f4a6ade2515f730a2be60b1b6d8b5dee2644066ac23151c822fe158134787c9f788def5f9c71502749c1a37c3626cfeeb04cd7659010dae4518c0dceb54f61b22e4f69e215d3ce5a77a9ccbebec79bf80a3494ff044b6db9173ba65ce526d001da71bc8523ad046f00a386b7bee88ebd7b7b4a729fe909f09ef2c17fae2abd5d0aacd22a7f78fd096ce149b93baa5662d67c65e5562fccd4a4e84055b4dbe02607f216be55440f18cf4745052632510c7419c14bc8a2c1b23b0f0519b6955db9a22ac6aa1dfe67b5f4fd3e35466bb3c874218126249fc41337e3e21a375be5cf05a6490741414be8fb25ef8040280e31903f249addd5ed73f2eb2cd9d9a677022a480e223a3ef50a50966839b6c49628b6588319152525a20c7abdfdbd66270fdd7a06277742c63c41d2609b27c036535a1844f08327c24ed1c4932fd138ae49bd941aa9916e8010a4ec4ff9a32bbf3f39b6d6c9085a44edbe77763a1002d8de3869afcd9fc69ebf14469935a5d2a137d44a30094dd754a5da242d1a71c61b20a25251dabc3ff4f00a10a3a5c7347f11ad15a3946376e8643fe3c57a53da7d4a070b5e440527edb6bd7631e29db2376bbc80cdd4cc54c45010429c3e4e7095d8495e251b53f0d4880fcb0f639a459f4f73dd864eca158289a70b044f932378e6873a69de90e58700ed798ba1b617b88f5ff303750b8f1e462b5ab1afe83681af5b26cc0f8d3ae0217922f0a641aa1c14e3e4bdd5873c93970c73320e32aad13a90a783ba770c4b26fa9329aa5b09492f728c15104963d9fd8f2e4c0756bb0a6050843f4eff9d4f8fe68c1ae2ae5866f9f2a757e0760f3a6c728fc8969a9d92c4707e117dbf733b5380fc747978b8bf1fd03719a75c6e8d2cd057c7cd7a99fbb8d4be903bbc47b93a5ed11aed9c2191285c12e7a3a89155e3e823794f37b74b72842a0357a0876e48e293d67f820711336421d52af81e1f2d05b252bc462873c1c12711077df4996d82686f90a26839a2a79618820fdb1eb80a14bb745e8ebec07c02ddef3d177a483bb5a7de2cb2fdf38a611b32eb6e4546897b13cdc123614c79ba6a5639d879891b821bd74d88dcc28eedfde956af9a997a4172e3b6f8191cc992ad8fe28779539a27f73db3156a832dd1d6716e3ffb414dbba9d87d3933ebddc8d3704894d4071d8c07b0f8ae99df842594ceb2aa68f02ae024269df6908a39e7c298a98b58289922e441c590a3c9e8b7a42e5d125915c759c53cea4d90178a49a73d3e552c1f01c1f4ba8ba5438a125bc211bbba3cda1ddfc7725aa8f69fcd2f319502b2c0e0f6e0dc0535fdf13c69a09a2f72c9028211691e6c8c3a66f566504b8840e99aa9565d1f5bc0e516abbbf79f6f13a4becf39b356f90086a909cc529ab96a504a625be88810ede03fc2594fa180bd51a221b2acd45395f2ddadc46028d86a449ee7f7656f5852439c0182b39e49b9c702786aaf6517ebf4e51cf902c38b7d7ef42bed9dfaca0ca105a68772bc7e702db59f634091e477caf40b78db6f55a9df0fa52088ba388284dba59f7845c3cc24193e797de76cabfa5a83e770581f9a90312e12a4dac8f91177137da1fdf3e348e23a727dd02937477af71fad763ff84009b39b1aaa559d4078251ad799e6f4a4cffa9ff8affe1f9034bfcbcdb767a005472d971ec1bfdbca8728860baf5b2e48101eb2de2d009109d934ac57b3815b352ad8840defdb4d9238ce5311bb5b04b19172572d5e53fbb9aa9d9bdbf7fae97b40db21103c8554f63f704351caf44cb4a37eca610df86bc8c18666b26d7372cfad9081e5289adbeeea9663d0ee426daa0ac507c8f71a6e52cda0709ce1185f837d430b10d43a5e3c65c16cc66bed2aa530d31e558732beb84589062b41ec6513cd7f5c3258590b728a0ac02c30d060dae53ef141eeb44a18e5f655a721ac2a910bfb0ddb5b9e6fa8a4fa3070f4c1474ab614f6258b986e2108f0d6cd1721b51957d59953715a9315952c4fec52e425ca09aba6b55d943141e8197f7b8285fffaac44ad7eaf53b5070e648900f461569468764b93d20e8512428242b48d0e55f0b79857bc9ad264adf44cc7c3aabbd380a3406b803de2da11b375061406f19246c5d2e794cdda3891585e03c2b5e663c2a3b1981cedaefcced82240729cf5ddc4338f677237014b10a2ff13eaaf952dcf7d1386b2ead035f686714a98a7894b1bf4d51a370ddfdcf894d03672604e001f015a7c75019117c7a4fffe802037863fa74b63ef3a8dd2a9c91c5b212989c30476bf100d2f6920a89a8247b5035a3286c5a4e978ee93a6a0cf66e5d946d4fc1ae91a9ccc06dcbb8cd4c0ed7be5dee4edcd738accef8857a7b9c682176dc30068a014e5fd6c45a4ec311192cf146b67c583fb77669620546ec272d68c4dc9489129c7ef3ae0a49a04181d21ce95bd2e892c74dcb5353a0acc388a9fd090e7d633c28659accddda2f187ded8a291f142ae54f6a3133ce6bbd819b76bb6d5ab85bfa9ac7e368502c57b78641e379383d1d921c8f313e78b2a9f82749d1b3e35c3b9f69831a9fa7f5d13256450760df203c3ee2f5efa902f1cde6a01fd3b3e7ce1227d624f4aa9785de6f18c8823bc20f072549d7316bb2f46e3019eb2a24b4081bcfbe790b2b601a3a387113c3c07b2894c84a1b9faeb14569df091de480052cbef64bc7b5a7891f2f026dd977092dc1e14aa692fa52b7dd48ea78022671178c3bc8a1df17e80fd5157f11cab657933279dd6569d2861b306ba3f45c3092e111016f61fc9b0751fde5cc5c92481ec2d75b52ee18aadc8b5a68c8e11a3d0d81e2ccfb69e9ef8a611bc0123cb56edfd14107ceaa53132455853d4645a64ef42d542e7647f27ad6d9772c10397a8afe6c65f8fd713cea268d1bb5724d69d70879f016dea7528f8217bad2c0d80558382d461740d5e030b1fce19133a1ab48838983ec40c371fe4d773854b2d26b7ffbad136ffb2b9496c1833ff6a90536b47e0070fbe8f8c9bc51eebfcf2053c33dd6c5c4ad7bf829b184a802ab1c0e7a39766910b3126510eea9e100878ce5c45c66aa65a980dd38fcadf41e331d4e86a282918374c908e9cc65498fca86b251ca5307a441fb77028682d680f99bb208fbc68f491fee47c88c6eaa4be5ec848d733593ded4d9706e7f8af899d5dcbc62a74e266862cdcca867029df0ee24e5fc7d271795cba1188a544a19ebfe71f6983ec329a395938f5a03954a0adb7ed391e8c24796f6c0f0be56ffbf5a6116ec850eb980ef5b0801f2b3b92af1e82bda0ee74f3945d65394f3995a56114167beb441661e0433241dd1b8804bb86af5efb4814c4c06d305fbf78075e269c11e032f26332c96b77f13bd8575d39a6c1d4457c723b51b937d66a0a4c850c55773ca9aaa4347a66badf2bcb648775e00b732980692f40603a290ab56aeec99f3719c3322d3621bc75380df43e01f0163862dce7a5894ee45a480b69ede512ae1d4645e32ddd16a93e6e764585db33779b9f4711fb366ba25bdbfd26e0bcf84d18457f98fd6cc9fcf1c6ed64a97b38e20900765c09500266b32020435bec2108d3de5f9e49c90271492cfb5bd02e3354a48df3b8c33e6c88b655e529c258027f2fa50b49676382b7040beae7b776d37fa6fd36147a3553f4c3f59bc129da4e5901aa9e56924329979746c40d8358c48959e9c81d365ba6f27d36915ed7d0629905500a62c282e63905dc8a580001a839f6e61c22594299df31c4f5e67b1194d5c4f0af2643e610fe64ef6e59d9449cf81768dd9f2b52fefe246a38ed53ff90690f1cf59ffb8e9ccffc230b723721b94e057034ace42cd70aad80efd9be6d31655841600b23240c8e3eb3d40dc84e706b94be9c1e030d3cfa34877634e0595e7391932cf81b653c60176fe23c28ee2c86b78d31f47fcf3cd8ab50f0e6bc4df9619d92a1b2792e30eeb26489b36b45324d6770fbdc1be34cc7f711560bd62244a9ab01c2a15e4e8f2a8cf94a4dcb149eb447f8361550a3305254f0e8025527d023e4937489874eacb56bb7b2d200b058db9f8bae0db0faffd8aaf47edd0e9f3a7bfa9cc60b1806d166e8da2c7ebb3daee309648eaf6b0054ddba1ec0614f50c4dbb584a96eedc90a83f1739fcbdb3753f6b10d1b3c1a1d6b33fa47e5fa8abd1f9874cdb3cfb3dd5ada3f67d31245d263f551dfd4e5909c44c775dec6352207ab2be43bbf1bf367cdb4e3b13ff6ca51beffeed3819b07b795ed40539b58dde7e044a24bb70e252a5b000974ada82c28337283e07d0411bf1109931d7ff002722a3022622300428d6fbe66a1fe3a903fc361329ef32ed5295a7436b608b8e30e8207f05b0a3ef7dd1da12a0e670a8256ceed518495f02f923656beabbd0abd383755d9ce33e7207ecd14b4471e398e4753182d8ca88c186894a12e8211000792a09f391ce01d27d28c1b1a405589e4834a47cd1dcde2f055186ffc500fd156315b6276ab69a6cf6a20d9f2a4dc0a1b30b4a4cad1117bd54258a1be794ab16f0fde5e85d0aa026bb06130d3a04da3c24528676e36b54b973b6c47e9973973627200a94e019e55a849e78802cbf2610c3bd09b3489014dbcdcde40d16cc646bd727e41fe3d7e2c035dd4794a4899a1ec69729825c2860df4f14b7500a3f5630b848afdbfc9ed12417c116cb53db367fe1ff7fdabbbc367e991994434453114ebcb73c3d961a8d55b5ad43c562be50379699022011850dfe1b6c4b8f0c4f5a7d14906f02294c315682e51e494e991daba85cb61b68ac4193ab94fd4dd21c58e4e619e438fce64f21f695a5d11822bb46fa612e3f3697922cfbd2a8b940433ed6007020ac621e5693b8035ff27f8dbbf2540a85e7a4e557d6d182e4f931928107af3ab42df1257983052e54ae3ce0c6fbc344c0db5a01bb978062997ef16f4e3220da1ca77a56dcc70fdefb373ad569ca1e73974e2ff54a00bbc81862de9363ac36767df1ebb796d8490fe5da428f5380be5d68ad2db82408b6cd90c4c0bbda6c9a49493ba2f51fc8879b16f0514fe13db1019ab6a9348ffe125c9837c0e6318ccf0fd481212f4ba2c6111341cc7641f91c580dd46cbd1923b91459a7849035501b59407e797877ede8acacf4bbb96b60d14947ccbad5f6dd8dcf4c85e6331e321d31a4231d181c63c5768189274bb7e3d849bfd9e75d471fd2d44d6a20d003fb7fc9d9b4260b7175fd1fb1907c85b4715184970970656238ab42e3a7249fb3eb3ab7136efd67a3da8f23bd8ed15693346b76e04398d814ea8ad7e7ace3035bf21cf33902d92472a771a08f8fd074db18132e77bc4c957b6b680c1051d022957806278f3e668ea2744e249a8c651c8e304aa8b27c679e52f96103e38a0466fb997ef10e56b6a7bba77f18681c6d289ebf0201fc026b5f76b16af5176ce43dfe2191d360cfe557f9972d56062d9f57454c360f4b03efc217a683eaca4346d5891a68391ea33ff1752e8eaf1a0fb1ebfb3a701a549f930ce006bee0f2c28c335e86f1441ba6328938b72eb48d6030a56bbb4b1af1e874550bae0f7b88ed8095dbd0ab05c713cf5836488a91c949c23a5b994e66bcc64453063b647ece9aedc032b68098a858f774da5d679df3438eb81bd7339955b086ae979e46897c85bf0ceb7e2508bfb96aca6002fe8b721e6ab34133b7b9d268b8ba0d8ec9d24543b63ce364383aee5e3bd435758f316ac2abab3182b210aee6a179deded05b8627ea7cd9d5369bf2cd28879d740babd59117ee3c21b2e33db0fdfeccffa1d7ca6d06b54daa70c71b30e5f7bd21386a9f0abf63528ab1153d692d36e9292eed7f51dc353e8ded6500dd1db8fb01bae628a899eb25665e7855b953458d90b64a9256d2243311b962987f81e42540819b0d28e015b24fc4fc66663a6c84c9c89c5bda4c7192f23bc200ccced302bb7c3c09d2bb89aef8785d8556556c9f3ae7c9de90858fe728104a073134fca2e3144f8c4aac5fd21714132fb765231a6641549c73fb7cad7fae4b329dfff9a281ce905378bc812dba58cde89539b77ec1d614b5bcd7ad91289db5ecdb13cca062e74e8df2fe2e28f8627eb8eff395ab7c7787500a56d54ef269e3508557bd4dbb40d4f80494619e7623ae6b2ae894bcde5d819a77d29eb8368b4e7a53147482029a8124ba733aec57ad6f97b73ff8ff4e3c9f8c457edead8c28631c7bb31db203cab356d59f4b7dc41070b7cb3d41a647fb49b666154909b666637dd1db08c0bd4d28f2809060ee36384589588069abd80e3449d9ec049a567f6164826b440d0038cdf31c635c81e9b1debe237568ee4aaa7ee20079bed8ebab8e7054af67f9836c10ca934deee6579d026f8b8475c7e2a278855533e53eca226f4dfe15bbea81d05f357cf97b225a316b43288cd3f9b8f128a1566689b84dd9c738d3a4c47b791576be4db8fc23e5d389331e263e41ada2f09178498d3f05561c7e76a3265f0ec9907ed417833c604fc5080c523730a96688c07fafb9f0e5cbe8d9927e069aa7c32652f316dd07c4f8da3d400c9094ce78393d1c057adc10bbd6724c07a2d2abb0cb847baaa79f2f5ffa6f90ec4534eb6e37cd81793b6b30c94cd3a64d256c04318d0ba5cbbe577b2c5fe6ae3af228feb41599921c57c37fe418b1c2784410bee22eca3534a5e0759c17c04ffa7a2a4fad7fd6cd83b69926c0b43afc07e38f7e99f36096e5b373681cdba2b3bc8f67e20429e912392d96e26ab9b416df6c05f48bd4daf705db1838b29981861a633f2a535a80fc62b3922e1e5b59ade2eb557920b8ebaedcef6edc764d3bb1f2d9d43233ad2ef4dedf0c976685743769aeca2a677d2d4cc588ec63051d62c015f4e97c200ce012a683f46991ac94a8db43687201eaf81286095e75f9299e45cd41800a393fed46e162dffe1abb24e10744852e0b3e97db8764d10304e9317871c444fc765774961f51f1f23bd80f29247cc64f7d19fbe96f8c6b14bea586c1024f6d9a820df97812fd3651ed7a22de204682b6c472b106a1237a8b5516baf153c04871e8e54bc1306d9704482a7f66e43e18e7273ebc01d0cb543329ad1a01dafc840cd269f3e0655f0be915c9f9e39cec2afe5d2aaced3edffb4b4a9374f0c7844d76ad3076063fd37105311010ddceb7e57ca68be5ae0d0a6ae0d6bd2adfca87b49e1734a87d4f6f6a2139c9f4230624ceaebe6ecc87549b19c161aa5ea6e643e914e7bc58d3c21c484cc2e25a0d093ff2298392cd40c715c9eb2da82f92e488a9700136807236fb339cfa4854f8d862a0650a13edca70ad0bf02adcaf800268b36fab965fe809b7bc3192f31a7595fd9443038e501d4364e0fb65446ec452fc21929a5cb3a6546b8a7cb8c9a9641b8e4b4f50734fcfd72b79d0ca1d68a43acdb2b85ae34c3e1b5b21d53fc8a8626f0ea9ce53e48cc6cbe00934ff2185d578f69d0988eb9b1ec20dd7c44d30c71bbb261bc3eb612b175307c08b0bbe182c15ab630159355e7008607fe5d508aebff9ca4592cc97c0d6fcbb952942d5d70408422807617d6b525da74824fb92466aea37b20b33ff8abc016e58d02a35c5c12871ada7a232936498684b6f5689fdee05ff7b23f966e917440beb831c417cc73eb488bf894b505c826bc12ab30fde2cd4d673af517359d63d48cd2ca4a1eefe559dd3c6d10622d9df30efd02418253ce1d8a21b3ab1787525f39a0a947b292e3329596712d5b2e8e3d03e383296ec18ea9c455ff8f6bd9c971cbe8870ab713349ef960081a92a6129e2166e3dbfccebd12eb4bc096c52cbaed2b0f01991de1c480120f6342e4761779e77a3a67e00e2f93e81a5540963fc0bc70f8be50ae6de8488ffed93cc049662a10d1d40f87c77e301367180188e3c2cda0b02333e7e952572e2becf635a401b2c5dbc6ab7619182a518fd32146ffe62c209f4aab9cc18ecb0138a90373c0ff522123e1f2abff29585144136b30c8f95875f95a63ed16cfae445730dce5061ab73309de64154bc02cdb81dad8fccf2cfccb3eb9a467000af3eb677bddc9a0afd78a75bf87807c5610fbd318fd6df923a1ee8ed09c40c593cb5ec80e2e3dd2bed1b70f27283a8e3c875280c34d983a9ea1f6e8ab9ad437172887d38988c98564706416525fcd2efac8c35ccf9fe8af5392b05b31ad76458ce0bb21ee08e39bfa3b68f67c40c560a0f28a89c9e492c399ec558429ae28141e7bcd48d5d7b71853c96a108b740573d75a2aee8d8f1f7cb266b4054753e59d8d8af0c6c564fe7e0a4843a415791771779d627f7b5253f172734102c378552b818777fd01ec7432329bf1132e4b0d7e35ed58054134fa572e73cc7ef0a0819a7b17a7150ca54f66c181f2b36639421c21618596aa0a276f7452a54e0b6e684ef8abbdca9aafedc1b51bf9ac3dd096f6ef0385b51270533b0ee95073678a978b3b248e20222da153696251d3e2c87bf1f8096cb82a1f1f514bb7be726343ff3bfc42e29facd94329a9a819502cd7f0cb94a0589cfe28f44fee442c3e853d4ff70a5a7f0beaebcde4b7a5e5e3fc53069cbbb166fc1cd05c10088306c3484547b2a732180d640e9bb9d9b37203485f1805409d59c4116fbbe4206d7ac2d06c59690e2c17be80c3b2bfb59f099c8f594c92e412dd77a2e3d1771e38e6943dca64c32b7cdd76aa53ef7a18298193d7621cd75da33dbf4380d7d910131b28281f373d8dbcc785f6f077ff801fa97b235c44043d173a6d48a4c001559bfa2c7e7ebcd3f16583be1803ea01abb403748f8d66f971bfdbfd863eb2cab35ee7d7ec1996115d0bad02936c1dff15e23dceaf7edd679d6cf018d9a190a7e6685f5d69aba096f71890afc9c403a6bdc08b46ef5829b5d35d2e162634649f5fdf8466efd6f6b28517f7d0132ca961f4dbc77d04d9fe7ad297252b2a75671cb61f6fb505717bf4468a21b52f51bfc90dae4cf0ddb5639e518cb743756e50591308fa46684b378bd957dd8b9327df4b014c01a17b89bfc66864b979cae1f4682154f7029652b86e6af19c20c7c6fb4d04980688110d5d328ec66e5ecd8f31d09c26193dce9b0c5db72f98f1b54e99c0a41548546a0efada0505b2db97f52d3b673dcbc28af35f716af7d78a13bae0bfbbcc320435ae0cf5668a89e89235d80bbff37ddf7f13ddb7dcd40e42bfac875f9aa345843547e6ca3f6333ee1566ec2780ffb63268d0b9d09c1d0917da11daa84feb0c8058d3ea333ddc79ba7b296271ca4d2b11d542b5a223f486d2a931e759e7281a471150232f3099e7e4ee24c8f2bd3e1d2a4f692c6c006a128d3fe8f41a14937bb693ddd2d15f118db390419d3519f87059615677b48e86b37caadefffa937bd575ae3a00b01e0e54047d8eecdb170bfd79c8472e6a2624336304211d0a2e19ba05c3a166d63b5bd7208a0ec090909a69aecfc7ce4974d5803b6f9a2237940f61b70ae607bf1a00d3789e37d14cf27a954e5bcea88001420972db3ff136bf3c7997de8b696ad31c837d8b90771b1aae08b13435ab0dba16a42227b7a015d0bdf6818f3a3017e1f4334e1695c7cf95860367e29fe3cf3ceb4b13576e6fe12c6dca5f6a95df1b945b8addaaeaed482828dfbd16d9faa657b03b70d1baf53be853a42b2256e742d5733a562a1262455865548f681da5e84d7e6b6b79eaf5eb6b863a3d42bfe67ff544c2b2f5f6f2fe3a0ce2ddda6b6203b57b655988d33d29d27f4cd44ecbc95c55202073e92d18faeaeac55e62371859094fb8f2e1d59aa8673f6b4a9d9a8cc33d2f69d1cde14caa48ec9f99c2153337f620533d0a56b69c2c72c992d5dd6c69d56e237cb8f299725d5d5d3f9eefef4f8e194946dbfabb4bab49738ea7a16ff8baa60bad46e2b63c1f204621fd2d11065264104b308dc62f9bf9b1f563e8e9a8e353c91e9bc0096f45544ab38e85347a3a3903572889d0f2d0818ed6bd056ce935f6c3d7ad1deda5a7bacdd7287282a8a1e6bef0a47beabfa346c64fa0f8d600fc0e26851ecc76f0037512a0be36ab85a9a4122b076283625f91353a30bcfb3b2697123e9ca15e4c347ae65496be6da5ab161493607df0f1d53d789716b850f5da45cf63f28c1c9e9f46548988012c4d7188852834e5d855075f96341b1d3960a2e3d271cb954799d169c256fa824a288c6af1a4498df0a03c21fad1ca597ebe9a48c3300177da2eff81a937b0bdb08308fe113cf3452cead130212fb9bc4ca0baed0120af620defb13e68ddd46b9003a44fedc85a8606ef4492b066b60d874cef1e83d52a962100d4e259586fa720c68016620021fcba5b3165f389fed4b9d0c21a3e75fa0e4d102323dd465be500147d1fa1c8807cd0d56f2c9e6c44e681e0411c10f458b3c88925b4fcb755ee3e30c71399b364f2020fcfc3f2cabd792335c39b8394b8dfa9d18a407010dde2f3e7fae6d7581d90eabc4e1ccd04fab71f0ff5deeb7d0767c641cba63fa1f04495af6606b62084d39fa126ab07bac9ffac41309ba95edc3225f1f0255d144337a1aa7305672bb9d7d552942e177a77161979a68c65313c16a12ec88bcc2b8639fb89806618c40dff30458354e8e2d2e80208aa3cb3f1fe20e24ee7e704b307d8ba84da9429678c4810f6efcd3e094662390ace9332c734bd38c86dcbba09fca436960fdea6ab153c8494c030d2ea68f6d84fcdda8aef312a5793bfbc7da01effdcfce35649c5d756a0a49aee82372a8a813ca0a6b816c65b17af4d7a2eab7849db53bdc6e5648d5269512da9cd0b80b33c73d31cf781a0be26a634732788eccaa0d256056a81c41304aafc04c6cf4b6b658eb7abf2e95372b51f6996e0d6112b2f55e824121a137b23081790b93d28d4d7db17d6163307a54f5feb0f96dec56cbaacc39435482085cc12c88a95f65c4bf7f800b484c398c8ef829e465324472d44e5b4b4cf970e00a3bae9c367ed318d88b5c4585cf346416465428816eb773ac43683119586540096285c2f110ed65806123611dc7b6a3f2fb2560bd440cdb53be41ce76e5c424e46ddfbdd1775733a217d3196725c0ecf9ba172c03e236342ddf195921f0552f566d38bca8d7647a0a692a0d82e415a7e03ad63dccc05b7769200325cd75f93642c206338977b4a88e4a3dde054675640dbbaab958d5623a87f8c7c6640c9f3516c42d0118b856ffdaff6c8748198373159c7a22ea5dff537ab3254334ca1b30d8213b6b18e5db60c6ceaa60a82835309cd7b5b3e7b90281415c54d4211a6b49601e0eae7de6ccd34e026cbd56e5f4a337cdbd21f41853c4adcb503ea1222e2db994dbba449eb23f3e3b5b1d383a4ecc2313b2c3959faf1bf2c8a5b72a35c10a0703e9497e2fb878a7033032e9c1f38d46d7480abb5b9bfe459c64a680d6757c8ca942aab185f88e68efcca8d4ee3d59bbcb1bfee16a933c1d39a871a8fd0ca7337b2e8778962ee260283573b5d824cd33b44039e54e7e6a39a2ce0c3c6986a91cc21e83fc52e0ee54aed995c406e31e25db14a23837e07fc4918d3cce4c7575b0a423e4322217974547b4b74a37822290e8b917c4484e0b75bc90b9dd3f542869142fa43e84177c38cf682f5339faaf4e82f7b5217cfb68049e86667732ad3e3b4ac48dddd78044869b06253bb45a1b62ce112b2d91a31f84c44476cb32f664708fb37264a20c76db2cd4357fdd2f39397fa2503aa20c3fce1ca87420295f25cb9ec5688fd24bbf8573e6588a3fae7118620ea1ae22957430f5f26a66d66661709e69bf2aaf9e2d71c9f90f06ee57cef7ee451fce489c14fd52bd171800aee8c1868bcfbf2a120dd7d9c4d358cfb6c38adebd1a537e9a4db214aed9ee57d3b7f012e2dd54f5627ae57216f1b4bb2270150b43093ce8f4a43dad28615d203d6f0094570ab5a97a1c1bdedcd5cb58be69e7d8052b249ed62d334bec8f266db22e800a761eaedae18049c09ef2630a68fa3286bf9bc9ecfad486214cc4b95363e35a26c9ba692e9c369435d88491998504a5482840cd467eb0ae71d6fdb6f6e4c11729afca14679a9c206d5b6a53e3a5dda74a02df1bfbc5278467c1dbdfd156da07e0689151d1c9bae91011bdcdc524decdcd8b93e0936d51a4ede94ce1dba7f4d154feb14546b8590739642250a31acb0ad64f9a144342772037afd8b4b736da19f62b059d8f858e798c336ded7fa60a6f36cbc53b9e08606f95033e819bdfb79fb84e495f08a452a1b8c2247a6656eb3aa277c20c435d3b739443505711095f691934e9d153041d4a3118acede2fa5d1fe31501546f0cfa9a71b6c65afa0d1072efe9813d7990a3ebbee794013ae27ba485cb78912628845b916d92f9780802ee786494b9d0996edec9037eba0dbbbab9f17f0862ec1e0e9f997a82e4efb33f0ec13b91361e642bc42cd89471ef6ff39414d970ff71699d2d8897edaa2f716199622fc4d2daa0b76f74e8b18080f5fc1be8df7ec722fcafab16c225f6c8e325300dfc89236eafc1bb47f4b3eb4aeb69302b4e69a0f7c638d8616f9ebde2ae1de58c4d4d5ba9eb10d3d74e05afe36aba32f955e80d596972f41251ef8c060fed9f07901df2c9fe4c0bd2bda702e982a06b592ae7fa679b3345bd0e2e47e145ac99a471aaa2a85e09eb8e30b23bd01e2eb9df3105b3cede1d6a08b117b93623d54e4d411bef9c46d5eece7f446b562f20b7b4fe09109a830d39ad78f8d3d9798d7630d3334497c27ed2977b211d45f68485e151602167a33c566943146113805bf4a19f76430031b9eb74587d46658ab5efb2a6fc7b4ba4734897b0d96c2bd91cf108e386232075780547dac978c5b9b16d3e1ce950481793d8b0b5edbd23d35ff1cb895468022368e9f2d62dc65dc8610143b4c9cb1be25942669f9e53c360ee668179b30d120b57d76f43f60ca7743172611c71644b38585080b1a48f2d72880a0336f19729bba0d1a5a4c866aaa00b39fcbbbbf3700a1e3f5ac4dff6f565ee3122372fdfbc6b5d553d29f7bf9a4609c6b56278108280f319b0d9ccbdf8173eaa635cbdd7b593f8b59c6ad65d4e1166f5d5c6a6e7b369e0ff7d49775162a66c1a28ac8a8d9bdabc4b4e1e81ca6969fd905f94e527cee98403728ac8f7960edb372e0f7328c023512d27437d004aaae5303270828eefcad1c19dc620fd3127344aac911f6e03fbb1ecc0d184b49be78f1035f68e2a6a851825281a9aad3c311c5aa757abdbbe3cf940d8fb4fa30eecaffea69290b2db52a2a12c67efc25c7c7176ad18a8af62fb8e016360d00d85a6258925534e992e3daf8f22626645f18c44774f10e1ff701a5f902b02ffb005c572dbc1373e8fa46c48f72c9bd2bc0c9146ebfafc3545a89ec8b08df2b15640590db61638db91aa2cd920ee9841ec50e5b310a05323847a86de5844bfda1b46f1e717be46ca6ab4c4f03765a1cd614dd8d6f55a60f149ace49f1061c340a22ab3739965bf9691d8179df8d583d63d6b34b84297142ddbc3134c2bf25d2b06d4221a62863a35f1d71a77c7ce4c1a81bd82197f9d005db837e13729a0b809c0b7caa2cc29db0fdc81a090cc8aeb0da87b3dc553c7def6aee26cb643a6b2eaf03eb9b5a4c92806b32e26669e57eebe50bed3b4759155f04c68a8e6dbc93db495e3786bdbde1af96f53b85e3954e6fe98f85f1276c19e5aefd618c72f665c0f0f934e383c0547b487a4c5f1a16b75e5ed81d4d25ad3af8de42384a790b475a6679dacbbfb8890465bc457814cab5936d1c5ce17b83584c1d12b0a3163b50788f44c634a60d15eb3a588c47bdbf53a67ba42a3b1dfa7a964087739e72847c5e204be09983eb2060e1625f1d5292534b51883aa767f9334bb62de704b55749477acbfd6e4fce012f07858b090f586b0100e55cb9b8a30896e9e3360250bd782c7d41e12c94a279b8a2cebda78287accf8be6ad8e1ba5b7597481867da569d30499cea3e49f082eb76ec2069a5f6d6c2d44811deac4610e9ef13bde4f8717252362fea999b4b79b65874aaa4a780649999d831bbfac2d8136948aa67985a81ec850ff8d7a6767290b5326da86bf86ef789304126ad5317c66d30fbacb1c125a2f5233f27be2701476d55d6b22e1aa4d524288231a4dce866444e76ec2dbdd3a3b0594b8031a4d5ff81d971cfaf2275cb0b107252e1dc53c641c66cd20f3241b97b6aa7e72caf2a83f69b4e2dc405e1e6d6203551b9237f55c30ef4a000a39b7ebbe413c34f49373615d4487e149f64e9d44d2e4a4576a2f64b34424b4e2b59740efd6ccd2444599cca3cd3b8ba573444cde68b6ad8548e0f54c13e7f7305c664fbbd9e0bed95491a572a8678b9dd6ee312409075665b6871a7c51959c843de4db06448d538dd0c92359a3eb415ce8791520c4d47268c2a05e724aadcf81c856788b6de1ef3e54cca1399ec1c07ede5e2e7de038684e085aa49900dfbc0a5ec25d41a61c8ac3335f027ed5a1185c0a3d68a79e0e9ce24d9102741e9459e1f7fa11d1263ec4b00e7e5c721a16b40da5116059104df51ef56366396555218529364b143d1b63c4c420e771bb981119296cc6a0274edd017b17dd0f042261eba3dc38c4c56f6dfce51b71544a06f09755a080ad0a6ba34a9f89dc662bfe6ad34fdb6e75598727ea6a68b41afc747f6825c305f26e61391eb4d225842e537124f9c72c4bb4994939e7dc37c1ef4a65cbe5241964eacdc146fd74b950968726b845589484f5a8dd2b96278e33811380036f771ba4732c6b918fb480a89bbc137934606b87e3548073c3860be04b9fe49086cd3f0fab64bff705a812b778039da35a4db2b893d47eda40bbb041a31322fbbf9d3d7b2bf79435cbc7bdd0374ebbea752e4da7f5fa33036fb687cbb647bea2b6a7713a797d95c78484762316e10764ac5884d12f111ae3b7226967ee702576948b51fc70f1011f7b0b1b985e33effcbe2d5633d74fef27ce6803ba347796d1bbcfa050cc557fcff5018b6bdda543939b4d68e474d987dc9e1c2173a174b737c885e85b6facfa8ef44f397c8fed66e519083766c521da88ef75b732d8517080d5b4f45aa1ecce17f85ffaf6537e355f7cd4cd46b7aa4a195c2c8b33e8404e626c563ca4ace85547dd12d71613980332567250aa3bd459282399eec00e0609b0f1325e8dc900a6edeabb1fc43b7cc96cef46722ba946a485d47b1e12c8aae651fb7b802d74443a5c6b441588e60f77092b41c2d12aae2545edbe5a86ad737f79527e01ffd047ffe4aa67e3ca2e91f3ffe50cfbd26005102326a9ff0d0742e5f87763ed67120f08a8e64651fa91d80f0b1641c68e4d3f37dbf9f2c0a9a2245822870fae5102f9217820e3a67c63cbeff498b0b6c8f138ca3b6c072e94b190fd10c0bab327aca6881781559b6eabafd16adfc90ca0d9eec68381cf42082c62aa522f35172ce1ee9d1b88a9aeabe0eed66974a0d672de028098f274599751ff71fbbd123866935955fd225ccb412744261738df4a1ffdfbe246dca1610f01e07d6335e73c170596c401e153dd1c6b11ee64e2f4cf1c8a1236eea05880c834d3daf96876aedd56ae911513db824940450e28707835807b3c514753f6680c2afb7ddf05c84dbe4e60c1176f5b9626e5890ae86e5961dbd6704c98553db77c22a2d0d0fda33aa20f3d4060b5bb07cefeeabfb511966a16b6c3d51ec0590afd3454a1b36e82e2b337f6f8b17ba42bef44d15c978c2425f477da2b091d88d7a9dc0c31ff33c5e974f955184a3c6a27fb3d26bec0b2124ec6e4573eb51600cd8990449b642f383d2fb9b18dc41b5b90bd6e4e729548b2af496685b758484f092f884b914ad23d40fa3c9d9bf201ae0a32fa7751e5089f96a71c84db6bd11b0b9fc1aa8730c95f6922074c93662b92d6e1f94c5a3b837472cfafc2d3bf14809c1d28b66c6391908eec02921f85a765406cdbaf736b8ea0d4abcfc1dcab0352294b6d3abc5f3d09dca6b12cc724c529c7d398db550c62b389b9d3134e2ce627c1bf3827851dfef666f56bc74816e48787b921c4162d5840e7b93f1ce0daa270640979b28342ada23b22b655e08a7107c005b4574348ba8943759f500a5b04f7b2e804989f8a6e1706709d619f47485e33e684f1726d0afc69e9d4974d5feded5d06876159ee2d093a4c94d9e25d0efbeacbc78f19d3c73dacbc5643576fe6ce381b12ee02c694b976747e77ed16486c2c36409bb0d44f1aa55def60c69e3fbefac123651e412fd513d8a5ec1bfcba274075474ad6a6e76d8874ca69f39831d2984f981b451911ab321e3ec1b6470399bead94b56bb9c69ef31cfcaf6acf22d8e83bd8814875837833cbf3a415e7c93981370d8ab5414a60b0894c956ccf9c7f043eee3a6f3b053b3b3b4246f33ef4ddcb6e15a86ef72bd148262840b760b47b13efa2068d2b60882e4ac246018d0df411b8b89d3209af478ddc18852b2c77aa3d7e96ed9f8b67749eee0378d6681a5120e810854a7f7860d2525ce37e4c495b73b4f12ac5d3d56720c15881de4525dbb1c60760d50b999dd7c925ba715c7bd08ce0c1a992eba17c751c2a36416afc81627768a892c9775aa162d0d92b9dae8fd142b5d2ac05eb0847e9b5eadaf2d950c93cc8e86cb3ab6b89db2cf58778941583f48d256e6cf2b9309b610c8dfaf9cb9c5763ce3fe0b1d3fd701b2a89dd15f7391f0b225f46299b175da2ea764988735b773de45226975dedea6b32d975d18b9c7bba97611f35f4c887c937c76e242a580aed355104b89d02e781da3460c4de4c7c161c15b951861a1c3582dbfcce6064273848c2e10a5b075c400a9ea2350cdb6b706476a9bb6fbc095448ba2b0f4f173c40af5ab03b602f179b49dcfe1693a09f5077e612b617430c7fef3894c02d754e49a359d7a9fcd1bb6519baca991649a722f128908cd87f5e36760b701b27ad2aa4cbd13921ef199541b6ead3dc907bf976e1e32fba06825e9db2a7b93c516f735f679753ed9a049d99fa47fb4d4ba2d0beeb3d0acc67781ed8e0fa86ee9b7053331e3edd4886892ae4f012b0891d90ad6f5b541cd9fdff60a298b1e6f2cd74c052026bf3b82ca3463689567eb3499d604070116c370555a0e8f88af1c20c40fbe63e3fc75d8a94f90a8677c1b72c68023622b497e2645cb1eddd93cbca50049a5b65754bda52fabbb48efdf4f3927f01a65c53479773bae832585ba28e72db43e92e8aca74603f69a1795e239330f9c2a6d651ec98fe7335b2838de495d5c07f03e84aa52b7f7fa4587f2ea6e47b0b75b202f5849634057b7deb83ac0d3e7e0d994205e9570057982906e0b50a914eb85dd18e032df6dbdc071706ee2f682e0ce1a97ea2070069c76de92304fbd7e7236f1fb3b7e592c861f62519a054190c145e7acd8e22e6b6e2ce352be6b7913514a82cc91672fc7a178838cfa27e0bdb5081832d0f4722636acd223095cfe83c2b56357468c304f72a4e6d6ba0add0eaa0a72ec1a2c37362ba391d10696db4394944098372140a9699e821792353733f47354d54188cbf16c62cadfb85126c53c1b1ed165b7d7fe6c961123072fcad35f1d8d57b32eb0bfb7ebd0a480194fdb1f0d102d4ef476a2c7799fad5196e40f6935254dfc1989390572c2c1047afc620a7afe118971d95416061224d3e60f03a8cf37eba9ecf4fa499726f1b3bf771a852deea28ed545accc412a4971fd30e63eabe0b9b0d0a3b8e2352fd728bf24bce30f4eff7bb066dd00b6b089e24afa1a0ae811ec2bd2232efa2c00bac742b732fcf5430e227512d3e237294a595763a02a89e0e7d6245932577dd3f9227b9dca5698d6abf853feff592ab6c2ca365eb63ed669f96291b46b292733adedf89e6e29fe7d4a3c683b737965916feb42f59f67a10417c8bee4ee9ba8a74ccac2119ef2629f48c973cadc01eb7b2528439eafae5dcabd8410fbd351060ff2f0e1d1f5dd5f41192cc11a2ae70604c2ac2c0353916f2c08ea9fc2db4180db9c671467ecfe10f5ec681a5450dc9262b71fc5b7131125d16b19d3cc69195a82ca2b66653aa9aefb9a6b7918addc2f0eeaaeff7ee26c24ae83e18bd519a16b74da70b8445b998dbce6e4c83f9aac586c15d3d840b9b115c93631934e6be278266c17cace421c00623b2ad0b212132332ec95f77f57fd5dc068a6bd28b47021d3969952f9556b8c3f1eda5588f6b8e92dfea0c021d322c031228df24f8909e22983c416455c8009b41dd685c9e7625ad42afc04917ecd356f5f2f09107872962494d2f67538e97bbc7a59e1c9ba851829760071e469ccad3c6a8920419935856766d730110cec18c78980f322cab64c92a193caa311f46bd7c9fbc4a17eca1f09feffcf8e452562f48971d7f98a4571603094780700041ba1d82fdf2b5e811761f08c7a2b0350b9cd5571e93a65c26f21f8bc7637e370fa1e8f97278487dd072a82463eee2d2946ccf4cbaf0abdb3b6c3e278026807b4eede037f17bc7c5c22514402b143a5e68342af13d4cd56ec71f12ece8f115fb982b020f113b622c1f14d8519d5a000f54bf4522ed566ea7cae0ecf1170bc18a8a5516ff12a214b1aa786b7111dd9cc9f837296a05db75d6ce20a222871f4cd8f15fea7626fa2f1013e154c1af95e21eaa18f18d4d2ea7fa5a775e1918fd0fd1512d7a33af8c75a6dc3d80372037dc9deda424db34e2dc6a2c85441d80f39234831b822ac19a112b11df4145955ad70b6d0c91e2f2fe1841f4427814309cb22c17e3b68c93a85f59cbd17c0cd63a86f17e3489006513623f99bd263a1e79d54010a661f0edd7fdebfc8592237cdfa7a76370117ec2df2216ce4d17896ed610840dff2b3ac397733168d883c73cf9888068f432f29b8c253627ba1b8644c7af442e0361d9cb5cc1fed2a1ca646c255fda45a6786f31835d7217ceef702496682c04a3ba2c8636a201b2d0b98f1e41ce45d20e45193e6188b61c4b5324aafdcafe17a6260707c2d67916ab14394368fa1ba46c13f2ef5518c1a2be4924a382604bc503340b20d2135679f805d91175981c4f7f665b690beda0c071fd46f16d356469c02bcc11b2e6bed88599cbda2a150d2bbac2b76f1e4e16f8446b7724b4d50903e7c376a68aaa77ada7f7f60ae8d7d1f6e5708bcc2d9ab91ffe7a56399d890396a0e1a0089ede1132ff1d21f41647f9232fdd4be2f9a79c142268ac853823158203ec171101e3eff8eba2714ffee2c5fbf36bd4c88f789480593ab2712dec2da9ff7a8c8157f0e2e0960e1cfbd7086bbcdf6a373ead4ac7d32018fdd77e56af1494a5c08acd8191ce065d2537407e100305b1f959abe1e64c9f7d01f6bec7171b5694bfe8dc9cc341a5feab2e6b2b23146a5161638b97ebf8ec569a4903aff4833841f8459e134a13058fb7106af7c444ff873f99dd1285671bfeb9c809325c544da3a9e96e239bf4786ce901fb875a04dcb1b393231feeed7dc0c013d5cebebc6ddc060a6455244ecbd3904d4e4167f08e6a8226fc38fecb177dd3b088cdc1c973309483ab1d3853e074fba13da2b134c625a2ee097c07cd15e5c3b985019c7499051c06e71daa13b8e82da1fed59ae7c40e7991ff85ced504e8e6d5c20d53726b12a570f9095b0c9b5cf587e7c42382aa98210e2f6119eb32790d7824169192345180fefc42d6b900f4261c5ca376e97521afb3c876c8d3341a8004880fa5c920a54d7121e5d6e3e7231098a3c87078ffa5c8cc5d2d287b391d427b7db6f7ad745dfe0ec5f9e0be9600c5a5228386e2aa9f5649921445cfc5f203fd30335cf189dde9f60922bbc8d24b125415b71186f9614d747cb3c7bd19932b45f0e35ae105c20044f9198e4db663308ebb01a4dcecef1aae5bbb51f727d59331e04a5495e99dad62d83b41d332c464dc0760222ba3d8582819e059a96468dadc9259a3e9c9d10740cda3cf71a6597764a72b2b64b9e68a807911309a09659dad481904a6ad56e2dbb6cf60f8e40a326fe446fa52b0e0e72dbfd6aedb20f33954cc811848a074d753fcbc28f95ba67f5f18c5c36374cfd329ba4722e9c5615008dfd56057b88be91bc202149e91be172858c71b38797c57fcb135ad90d1a9f2b59b3b58391576b34f45e1e458314e76538a64da09ca8e3ddd9244e04e48f1a6c1db40b5920cc2b6dbd316450f25e5be29fcf7097dd87d1d387f0fd2b6e1e5a967be8694120e421eb1aef5c50b5282d0e8f620045127c1f041652f470dfa72432e01975f9a12b13ecab9c2532dffb1e5ed13c9b2d8fb956c3e1b9f640dc2309c8a5ce07dfaf67491840cb6de02c0709256e735ff5d86cfab71ef4f0171411b20f3c123c3ec42921b62838bd92155728d2eba0d9b67ae2067a35c1d7be185b39c8a914d9c30150503ea66e674238461663d3b2681153dd24c1bd56dfab06d75583f236c760aeea58b1ff9a20cf8fb78c742b1236084d911cdc29028fb08860dac6c79871d9b74bd5067f34e0a226228104834523d6c12cc232647c1b1775a9f1d8b43934519e665562617a9ad3591ee176f8bdd35dd1972f771c4a0551ea3c7158a480437d89cc0c9a73118e84358ece3e05c8106708d96933741fcb15b5c7d8b396672eca4651cf91c3860587ac5bbec55ddece74dfeb06b861d9ade151c878b2a048ec8e4cf0bded72a6318e9bb8e3a1116f88c71c95f40b1729bb9af88ce84612e4c710dccf37c6f58309eb09be7478b1ee55bf54e853817abfeba634bf56967407c1763e9eee5f6f86c21d905ea46783a0a10e57710b4a1d446e7132d52b7f0727aac858ec166c4a6a1293b991120820f3e87f32edaa25a0695bb0fe0429b3735721b44b063f07027133e1915e24b5891b639e6914d8ccb42a3cf58abccd7c19707266928aefdfa1fbe40e37d7f85a3ebf2edb48b15180d6d4d08e138c39a20874d3427e10e84c415d50e7780209b513f7e527fd066ff0cd3c2ab7be84b35275130d3be8c647bbf01ab0b6347c6c6387e33c29d3ae35aae6e5da2819de79c5bb48eb812576c3e4d9a4d9133105fcda25b9b379e63b1b4a398c1ef36de8cdf6927d59c0fd0670906107ab1a50569b2e3b04699c43bb11881e78fb68ca4081c8974e0e73b0a6600938111f134c29c4eac8d738ce9e09e80b69ef1530d7a66937a1fd548010f02d5260075fbdf8a605430351dab1eaa55510866a31eba55f80577e8b0c66e5f38a28fe9818cedaaee5f5dcd8b5043bbe24e83efc0a78db8bea1b6a78ef3b56163a88f2c16c40b6bc503dfd36533c45b473cb6a880fb50d1b7480528171cebb88b49475852a2e7d1f42188c2b6f4d8ffe006e275f41fccf1c8755bf22234cc82b2996bd1fb136d56b27cf96c4124137140b5665d69fac864c7d592c985db39b500c3e8d99195bd28b7f48e3b6f0d5020298e3dbb18ba2591440f3e4c676cd28f49187afa6aa0e5dcae28cc3bff45436288b0abd504d848f2fe25b393c8f0c0fd76c70d754b336df11667a46b4d53478d1cb18ad9a29a8e4d91d6bef6591360c1da47c892bcf940bdb442cefa1e89cfbe60187e8804197cc739030ac0499bac73e0d04a97e103b3e988335a69bc293686b39c8f4ef3bb1a54cd8444dcbb0200c353e93f9a8bf7832cddbd067828265030cc0cf47847079c9f51ac75b9761ba80f9d93d8636a61c4eb32a755d6cb517d518290bf0a83d94fc3e1a89c0d600015e1c1de688f22522e35d538dfca16e4f91959bdbbe75e8ddecbca696017c52ff495a7ef2b7203999497233af8b219b5ab32b73f7f10c59882eceb71cadbf8c15cd8a1c946c9c71ad3b1c8e3157fc060ce44c1add3b455bd1764e97d8ffe755371b389ee5f57d084f3b0eee87b4ad08059c4f27b6d7addbc7d679b74a8958963302874561f6e11c2a7a2ec14d7e7075ef78a1719a9a064a61d697736fff81d2217d3fdc910ec71f8c62f6527e9c443cf373b85af877b721767c1e05e043bc0c6a8271bd2491af0264ec8ee8aae845fb0a7e57ab77c40acdf1f87904bb9ee78b093a3b02643cad2847ffc3396063447ec036be158004892fe7bf38ed9181abe3ed5beaee819053204f8a4bc179820b5c676ff9306403517e071ae14dd873de10fdd1d401263685e617442491bfc572e86d674fbfacb63de0015d31608d7f2bd63b20da76b85418f793370e9d53dbb1d64abaa26cce0f492b231d59f1dd45e9ad71aa53f66ab809a85dec33e7ac0ce6afad051ff3c303f95143388e976ad4c64b5ff76a9459bffb42c7476a24abd6d42cfb3c125086cb6f7a104d9f480a5cb8c95a4455daf6c5324f676c002e2a3f08ae0cfa7455b9cb114ba3e237a3c18c12e79f4f6551bf09f1ab5faf5104f3f4f278cd215e30b40e99f40ed420bc8eafa27638d68d25393290e5bc31fb0e6c076a0e8fe72a688ba77237e86a9f8b54052651c39c503cb397f5456c79fddbe5a2baa65ffe09989cc1e76e11b8e93921f110da3ff276ba921891635308832f085f17a4f55e26dba7ccab7a720764e1f1076e5b74759bc76db55e5081b3048a680455a64c4ca652a5d6e2d77a736d1bd696a3da49e1642145c678009f5186989060965f9994b08d448663544a235e3b266c644617996c5c6aec17dfa8c1a749397419967095bb7e48dfe20ad657771bfc39f645edc2ea182250932d16eb18a0fd0c0f6563754f0dc093d84b57dcbdb96f476ec5a9e36f40d5e080d23d92ebba11bb914fdd5b414d0e43948c23d9f546e760b03b68f84cb3a026cfd4a7569d56c2853fbc5f0562ae6e30939296f4111cce13c4e5fd0918c5a8ec5167be787515b2e0e148f42df32798726a560662bf0f0fea02bcb0021eee36c6dc3f46105b12d8d7927b358b14e63c3b92d632b1fd17633aac4ddb091a797b3fc796c9a7cb1ceb74ba110060d0ea6be5ff613e5af5722546b2c9eedae0f36b01731c421370ca6906231e8f4a17f1c9231f20c6e29c0ec113d495cd1adbeec85e2d5b0e1a07309440edf4a22e6a337b172412f1cf1b826d3efc933817dee1095be44f9bf9522a4a78d9d2def48bd8ec2421cf9e29961e20bc256d559771b41c470b13c35f7fe961fee18d8026973b3a9bf5762b938a4047d74ca538791179f08bf0a081ed1e0e6c10971c37142b3f0ad2293b0c469d51366ad82c10adf25ac0e4aa12b85bb4d90706c9f606d812f482279a0ae9ab931719f983dd15e363ace7bf5a04a538020898980550575e1ea09e7f39d283251be7f3c4f382446afd6eafce0a4442ab00e01b6bafe5cbe7d06e47db118819d95c155512800d2c6761f95ba6e82e9649cb3e47ae291de40411c6810af57ba96e6028bfec622faaee5352d23ee83c8fffa3edb183360580143d9d1e525858d61b85029d6ef3efef7eab94e0ef3c733795b9e71b9c8f148bf4924a28cc39d754c20cd16cc17ead58143a34e7d2585951b9e81f6c24e63a047ed8586e11ccf5c3701fdee6e5102d513b4bd3cf428a906d3826ee94e4e84327c7ecdc9f0871e9e8af545c342189a005a082cfabb9943c4d96ab96e1a8fa86f24653b0e3af2dbae3750b4a0bd78519c0f7b0a30425e0f67ec794b45efb2b38a6a68103d8cada15d6183e790fd829a1ac2b0c11a4cd1cd4494dcdb2e223afe391ffc871ffca6a8b745b05aaac8f6e9edafde84d00c430c3470502dbc23960fba0193cd6a321fbfcd501a4d5d225befb2ab4d56dfdcd052bd48a9e41dcc1e389df481af4342b1351a7fc4caa7c41528a93b06a12dc2be30690b3e1e5f5c1e9f45ce6da33350c6c6aedfc89a0022f21261e065b33f0ab2d51a00d6b884f406eb37585cf5aa377c8cfa26f9a5498516e8a36a2f0ca85c5c770a4b77e3b410c438de50e05d225ee871912de37d9901f9f7af1822a71a1649f722acc058d7b522b7db839c19a75298bffc4310e6db22f2622dc2e838181f8bde54947c9b119264ccea6ca62eb60978f20215990d5e5cf874ea9595d41ef71cfb7245b51cb04fb082c4b32f79e98a4c15d8545a67a5a7a91227d1fa3a1ca88e52bb2000e55077fe3e58931aa75649548393e8c5aa7892f547eca90476371213f68dca15ac752aa787d39641cec84b4e65ed1ed1b93c83ef473777ec60de4b2dd150765162ccb36cac63436217e7df0e192e3f7d5bee1d6cc759c6310c49e8144830dba27e7c1026917d207bb6bafcd92e91d25a1454af078d980189a2d5cad5be8317ce5517f60baa47b68b0d555815e591ac60035dd62d7205bcf0df289ca29f5668d7229786cc48b2e36a58954b5b94070c5451082442572f0f7eaf29df014d2af31d7bf836db6e31fe03452598344474289d36ade19ba0d6ca48ba5429959bd714a81a170ccb6cdf86f5c532b1dd7268f353525f5ca32807438ef27ef9cfc4fa5ff2d79d9b4d57e59e42f2eb8403175bb75599268ad2bee3a27e8b3d4f4ea3dfc8d1bc90bb30949348fd645eb870bc4ee6b819c21543e4e78edddc7d6c3b3230cbea76d0f3f70876c88cc605d04accc4f118142f7904411e4e3f984b28ca11fcbec8c950957a002f15667d0a6a37a0c381d7154f88f9a6bb6fd75ac19cb25e97da2d2077e46a938d6887cee15f279aff30f0e4f32b09f3acb4ac3cede931ee836ac5bd8080550ed20d6467c2385bff81ca76ba698c7f452740a98a21371b9b7e78a1503e55d565e4fafb79541774ba6fb6bcbfb7718c4c4a67c6c2253c85befdea36e8c86965260cbfd1c35ebcf18d87a84b94c5710d754c845571852f583965ab4a3938aded5b8bdacd3a578aba578218864fcbbaaefc1194db2d37e024244c83f6fc6eeaaa39e700c5909868d4dfc968b9fd8575da819bb6d5efcfdebc4432fa86562630fe0e91d297e58152db4e71d73030c3325cfcff6c050d1591a081b4d0c9f8991d8a88b006ee38e9895b281252d01386f359b6f6db35d3b4d2dbcc41bd4a3d98b147057008b52027b944699351492faa4355bf8a62c43aaa5c5d2d11d4b83037e33ccec6808781da1336f714279481c55f26523e45ce6a3e707b7d2c29af19f5a865829dd9e841ff5403711fed24c2a843dc9f5f60b83d611d3efb84b345830a94db8fd9abf978a53ad8cff26c3f3cb6d465b3419d22a6d6c84d7a85b5566c717910342ec3dbfe252682b246f185b845063400a6fdc65bde1def4b02cdeed566b9e0f0cdd775d17e1b20f4bf5a938d642a5be0665a5f1fb771e9eefa8ae3eb7b262f27dda7d12a208eef110e91d1769ff49c01d842d10ad21ab66cb1fcd6ca6bbda75db2a9cc640f37e30faab6357fa56d370e90acf4b37d4b40a5973bdb64556709a28cdddd3fc7f809db7de804248cd173b85eb1ceddc130ecdaa649d8bc3a7bcec423f9e91306a4dc2bc649a4ee561e43f7cf66ccac598269cbe69fa98d5ab82ff6ce08b86b118283b376874c5289d3ad2bd06e25aaea2e8cbd664d8cd81579e3ce3e9e713f6aad396143999ec810281876b5da849ba706712de7b8dec11445ff621161a3add9bc530859911bfb18297907f48d08bfefc0bc8f0b0f1b3d7722cd97353123a9773cbf93f411142b0dfda7c1e49d24ab92b0399e13e607030ead829202b1ede4932faaaf27956be11453ccbffbe2c830815933acb7a8ad71f6234103e1368875678a1f2bec449da97534afcf112ae4107bc3c585baf6b75ba67c88c35a359ba09dec178c2ebd1327b946788600069ceeaf413b938daa9dc132dd6842ee00703cca117313dd48eaebe4b3fce2dcf2f43cf8f13b1e1527311102af8c7abb1208d32e3b62f5f84bba7c85109fe0f7b6d00001fe05bf250e841fe766aafa1fbd3aecfac7249bd7d468ef42547ee072b284aafb36d8b84f21898aec970a605ecaee8cbe0e0ce32b95d1588b567b7432f665ba7c2517def3bd2f018956f7876d34877bc8d839add5c221401b69e8b006d3e90fbe9e2d9dc42a239f30c53e92a25ac208f06ecdd0c510782ab6fb07a83f92cae5e1f559f80c0c4c044bce8a19afbc696aa57c9d376e1e6d17d38a192388d3b63a69395e3b053b6f447dbdd6dd30575a0bdca8ac17d0ed49100706477cb6b437da402c215755362072227b7789e23cc90500d93eae2a16c0ec63a329eaf5603180f626dde7085502da3b7be5f932b2a38d9dd06674ab782bae9520b31e1e055bc723f80b85a1e178ec7b1e4ae8f62acd3899cfd01da34454182480e467d2dc367974a9457f214c79bfd698c50860dbb942d5ffd9ea16737eac403eec904df0b0709d007bcb402818829854d4dddd7979a0409d5222749666f6b55ea729d4e2e641d38da3f2a72663b880c20ddd5bf4e3bbe59114849570854510dbe2517fe5c4bec1c2ef0cddd29a90727fcca44c00c7ecbc14263fcce08f9e7210db886ce95aecf1808db59aa519ea7281ee9ff6334bf8c8329ef54046606a32f1013bd3051935f3ece82402ea866083faf30c1b6aa31ca116735d53f0ecefa85d73fcc04d42bc7a14234a1a8cf2638930f47916226fa54cc986e0a1d452f18d41caa7d8ff5168a20dad9129feea7384cf37235cb55253706ea563ab2cd9a2fd6eff81884c4daf5706bad64082c812df57fdf0afc87653f25eb6d9fd162884cca128a1cefbc6f599812e686bd8560f0647f74fc0943f02a58957a565b618724db1becbbc954207aa771ce3132dfa6ad5ba4da430b55e621c3f863a152fdad15b9f42fa89ded2ff3062ca470ea2ff723e142db6d507e9447f70e246fcd5fffeb93fb2d846c6173519c82833e839767ec14c7610ed9476e943ff7084add5e7a04ae1a58770a1910ce9d154bd77b4ed816cbb31bb31d40ee1beb63e22f1936e5c9172bae7771d35659b2bf8fb77a4b81b73d2788efbad8ee2bfb67a423fc2bf8438b4d86a1077d136e64529dec89a5e89b5f9db1dfa4cfe6cecad4d31c636530bd82fa9b212021a77541faceff4fbf53eebeb7d18ab43ec4733b3aa18cf408170f8d4ebf81f67d77308872777e8def90d5deda980e6c22910d955e58031a87f1c2ddc0f15d9ae3dd2505a037835dd2a2e5c79de5fe699af1aeaf05920728275c9a94684e27960cff63a4e82474a70f00884b7f4d8cc932cc1ddbf6e0e4b7e16a8d7b3672b4c5d39567ab2f40f3b81cb99fa342d8db3d856d2504ac057ccafda6bad73794cd5b9687eed010981ae6a95cb98c70c1647e648909c80c1f592944a3e696c2b9d7019b99d4717d49de2e85a9f3fe7b807231473ef8e4ab9ef09118cc8da7a619cc28785dab7c6b90ac922b87437055c38b67e76f83bcd12f25937a5879eae65a7dbe50b1532219c77ec013dd605ffcd54eced1211b1306134dc1209acbdb30c38f9c0a2e99ea70ed3bfe140fce432f0972a74b476912392bf5bdf4e19ef3780e445c6f37d22eef5e56f54c3491f59ea15ca228036a0077440c5c0d99bc579bdf01ace258929c3c14482ed44d21ec6980b73894ab2e13e4d5356f2a85379a0472a9116cbc463f08b4dfc4681f5b58e6d96c91e7fcafd61f8dda29231bcb53c965e52389df81c67eae63a8e130860a7f2b529f2da3bfc91c35c70151d16a9e0e9ed3188df3056e40eed79e3625ff9a9ff9847afb22e2bdd4ba825a9f80a57fea509408fb06652cf2cdcfa214646e8241fda54f039212a80635ba8a820d6ca56de36779f59ce6cbba26f4b0635771bbc4d5599e42d53f36d34dde3792fdc91c608de1f3425bdfb48e74779c29c901c36cb8635a92f9389d149dab2be6c69e8be26ae2394702190f428e7ffc23ef47e9b1678c393ce542067951f526484101368e31478de826e713af8a8863985aa63c650b6ea2545980f38e2d31335d89c279923d99248a239d4ec68986903252ed95557cd9fce86caf69a3b898280d715786402108d46e213d88d501930fc584aaa251f5815cfa409fd539992ddd3ecac4c27b178bdb16b5d07666331edcd3746de0e53dee96d0221cfcb97e426ffc13a88d874b27a8dece24dbd67d39fa7731fa02285578010b73f48534a75de3d2c2e8fa8d3ea33ed2e5d727daf27832859a81a16e75e6e9800e396c6ef9b45cc5ce78b8ffd07da08d13f87f94e4a86f621ef9136df297b2168ac90db66e416cf1bdb13c95a599ff5fe192a0385fae3dfe2ffeb1093d28ebb1a2b13b04275f380cf191d5f50b8940ec3419440a17a2616b2b905bac03f444494c4cb10e0a5b6867f2a4634b7946be65298fff257066101a1e22dabb1d4d58984f5ddf964f606a19efd0731c120d313184399c200320536a4c857745d4c83f67b42de114e497ba8a3646773202736af11b8d57a6bddf8d89115b11796ac8519c327f9262a9ca551e57a54aa22812f317a580688c6eb78cba7a5ff7f7aaf47a05471c50cc6160248b4dab64cc6673b9a87e90aae298adf2381cf8976a3fe41df01dfd92d32c7b379edc6b191c198c7284cfa803112b3ceae30a12dd66c5445470b105c79054c9a846eaa4550cfdf49a8b790cc28257083d9ef96c00cc062adbf11a4b26236c600e37f554f5be1ed9714e5137e26b2133db1dc3ed75b6d77bd86a4420b26726b8dd925aff30fced2f83784e88ee5bdfc03122e4d1a5014734a7743ba900c915841d887a8811ea4b6dc1c404f7a3ffd9fd6689307c5e52007e7b464956cf1da9b9a93bcb9469f1e69497002ad651e88feddd528c0baa93c82e5fc67a88ebbb0ada1c005651135b9d7ce842ffda6f3941d1afc811dc66d0ae63690fc97b23c18bd6f7c917eda9aa1ddf9d2455ca1fd563cad2b831943b3afaa25ea10577955d7a981dae48d31b17d59bb7472b0ec45b64360c8d8bae9a7e21ee1a42d3cfcae55faa1add6b8b3ca434f830386eb396ed287d97bd560460704b176bb0234fa8893cc6bcae6335ed98e46e0b67c0ce88f9fdba93b1828859a39ab868113134b53512b011a2a72cd846f2aaa437b60e831994f19f6d5bd3b753ae293fec4c89e11d03c4785184184130297a7a8161c26bd391c5b6963d8ed98afba5eac43eb95b853df756ff1010e6f63ad2c9da42e22f263e4c45ed96c48e03b8469f42199b9f912707974e51e6b3d31c62f4b0e7c3d663e293ff4c6530b07ed9a9ad08880f3886ee725c98ac0aa6f8bf36d1bdadf240dcb73964b6d3773533398b98a67e035c82eb1582c31de511090f52e9946826141924a1401601904ba578ba2cbe0fdf6434bec793b69fa946ae1c577e604bc411df7d33b3a6a081dbcf8300bc6379ba325092dfd8db3c128a7b3b62b1317d413a3eb5c678cf1b3c410e6888c0cd29927faf45360423c886ed1a5d9eebba29c6bbbefc40410a48db7d1730ae23aa642f08278c53980ae12d914875e8e596cf9fd49ceb34e2a6cd5b0fd1459166c15fb59be8f587f3fdda1209ca0ad08a5d34047446d6ff7f24fa0f7d6314fb6e9079c26413eb52a5b9eecc1a2b254afae2335f4953cdcf84a4a40fb66fb598dd6fb9eaa02404879da97c0b42a29a8e0561d096f8170816525a8de6167665faa28fb6775f66ef990e0d1d04dc6c4f710b8e0be0d4e6671d0c7b285e0d4e8309c82983e3b863ac753acf0fa05461cac735163c24afd8e6059017fa248850da2980eb647537eb6b89da8fe714fcdda6e5cf59054f4a6cbf3ed888601da37e02bc26353233858cc89984c6ef655824111018e26b253d3f7d9de6aa440208d7629bdba7dde44a460ccf7ddb34801c419f1b501c86d9278997c79c9938dee115953ac88661158d1491d8a80a72681f68e7bc11f424648ee459fcb39805eedaa8f176dfd255a2db27bc56dfcf4a881769f598ce1b20b6efd34b306476a94a8906c921f4875533c18fd2b9c22257e2d252b74137e8ae707f02a638e5ca2f57472e18af29a78d18e0c69e497c615c3eb92fd9f73075ccc44f282b3f564cc686a5f0938734ff4876dd9daccafb369557c2b841918d4a0e3e775b73234905432b070e83bf3120d2e5d5ff4049d27e7b5217697697558c2fcaf9ba093ae8a5e39b8bd441920bae0cbff9e3c9af2c83c87209966ab211ced1863a8db558d52a3f8d2d782dd55d42d5d3f7d23f2368547e9793e626ee6ecfe533322cac1aef634fdab263b57d0c87c20e479199b4f5bb56ee9fc9468663c9c53a995100403771e62d161ae3643520278d5102dc71d17caa640f2a97e22e68ca45fa27655524f29fa5eaa5f830e5808f7dd993de3a6ed86a96ea4b3d65285cf4ce849b1713de269cbf4c1ea24b17428c30ab0614fc090419433bf5a8e1478b8bad6da602f216e85896fd168971378775b13bd11a4624fa208547cbd70a9377e2a6d9727850a0582e64e58b065586c0d03833348c8858187450be63182a418f60a37b06c31408d2f4985b72438578317a82eac38d50d6e95df31bf92cb85821bd59cc53ad81dfddc1dbb7c682faf8c77b886386e817da7dfce8cfcc1855d55d8e45eeca27d8f7227e4f7de2c622cf6fa8d98e17e2a335e5613803e0bb491dcb069d1eaba890d79fb98995d0320e03a284a8060d62398b125bda618a1430ad3969e64333656cec4fea6e3bbae0fe133eb7e6d185e457e79c7c3854f8863165b8d5e38420b5fed28442d68d6b90f7e094b686ea0b108fb6fd5e3649340238549993ef8389daced2e7a052bb7c815f823143c5cd305614f37a979ce7e04e62c15b627b520ec7390fc0f2203742c32223e49b759dfea1966aa41eba8d48d078da3eef38239cc5e84d1c6e34a360c7df56a6b240f45c922fccdfcf54815ee4f880e83a8d615a23b4254430f1fef62e3f351cab221c84b18813229c2ea454cbbda3fc98a47a80e6be17cd7cec8858d3d8a2af371aad766e612beded879d74bf7a9b6ae38dc874be802299ae1fde62bded43a15a1a21a98218eba4a128d313b3c208f328bb6504e2d64e671dd42e1a2f94c416a128643378b0048a3942a23ca6f2fb19aa66a93c4b38eae2544cb479cdaadeed0de3cfbafbfe8e5918a2cacb4f26a0fd078fabf6845592f6dded060f1f9036910df3386a2fbb4de835c03f2b20658c0984a7d0e4d32f8683ac3646901fd943cc1df2ee6a2bb777642eb4d3e9df3fd2881fdf1c3d2de8b5ad5c6a16fd1add2effbf18155849ebef4781cb5e369c374155d6691eb9d4d36aafe8500c75b3f847d6028af6b95ad4de6acae3268a4b3e35fc8cc0a7fd04e2e2618d137fab69e24a355fc4a29b8f0792b52063b35d999783481f285bfe967e96c29bc526709779497e9a34847c899a545625f2f7e3509d24d00c921b2e5978545ef8f1c4a7471474d8004c6a64e783f614581b64750fb74cc2bc58aa3f8a40c4556b779e4804ed9dbc2f71c9f29dcc31e938d7725f6f3c5e8327bd2317f8fada607145165a2dc9df51c86d206b9d7a7398ed9292dc348668a4a0cba28f4c41b147a21d596575e825ecd9a60cb9207c07a0c30e2c72922abcaa754259bd5a1baa2df16c7f16dd6d805b486257b08af06ab3a99dfda950faa24c99448e610b7b2707d422d772b1d3b3bd616bdbf8171e0dd86ea4ae1c2841acccbabe5b699e83e8da074f0c22ec012b17597cc4871a6683680693ed0e3b14afe9fdb7fa82a4d2217b2b4011ce3ac08965f712b266b517ad91b90bc26343c0fba6d9cb8e5f2b592eaff2fb784a1e36925270e0196941eb419d7860ae3591ca815a25c77a669c8e956f7c57da69cc45bcb02f34a9fae8f54028293456d9f19a93b9089d312368fd073ffc901ca71a51d7ad05d7ac0f93f8b61fa28e6858603d3163e4706ab9a257a7e83f43bb5217a2948fdd8d081f129a07458bb3aa3efdb7147cd8dac23785a3006bbd81b580de68abb52a0afa37334996ed2aab0f929aaa5da51658efb5492a1e8314a156bb35aea4d85a255761d378488ebf49a1725d86d9e55194732b81da0b115c374607dbae304a6ced162395e2de715c17c8aa4745ac0da18122963b7f8fee485836db9c938b468b7b4884d2c3bcdb454bd2a4e96e20f76f9d83536aabe5955eb0cc9121dd17aa4d165b1d6cb0553e7ecad22b68ca4ce92c13ec762da8f3fdcb0d1d50f3e2bd859e812702964961c00c001d714d7cec28ea1d4fb1b51695de9404e7b3a661a352f6f5eff69a372d87f911cf66f5bc2dfdaac17a8cbff34ba6d1a04689252e8b70b5b3e706ea770e8bd13195e1b100ea793313f4d91159971b39ae95293ed85a14d4fa45cfba2e0664bc49d30bf579cb58a8c199052918081ff6985ce17b2da301c9ba5712d37a6eabc07fdbd1cb0d837c934c997a9a2244221f965d2651d49ae62b0a038ced57db8ea4f9655251523ffffa895a8fae7dc548aa4e33af163f391f3f0e369e990ce42ab701531cef024b93a98d68b31efd104ffd179ded1729ffe52c0d11bd3beffe9eb15332a75e9a079ffef22e7c71354de5f68ddd0251bb2c8042ee1413d0fc1bd3f1a95d0db55334ba50aab8477054faa8522e31d929ee56e822e2afaf6c1158c4e9c19ed1137d631f23ded9a7864a537fae60eaa470b1e95f79443cf4393db7061c6f8ebd418fd0d445563aea56115f755893f1abdc6fd219a0057ee008b051f8e2eca515f28c613245972db43391a1bae81946d21272c8397b39306724b09f1dae7586b5cfc1f9354b2406c5287d9ec526eb8053c1dbe3ea03803beee58a50400c35224953efaa8a6c022f85e4471ebf0b675428dc4de829c4f90ad8de0d3958cea7f1eb61ac97d8afe63f5b9ded4ae0e46f414e608857c22d022e5e41dbd96cb9e57c3431c32aae38a16a9897c62eeb1b55dbc14ef18d510f5a7b892438ad9cc3246f8e77b1bc18e8f7aa67985765646b6077433581ae4b123e1e3d953bcef66db28800fc2fb1ff9a49d421f38671573a45f3bf79e2b0d0ce21aed6c94ccd2d2e89f70e7a8cecbeb5fc8a9ccbbdc87887eb08dacab699c05fec96fa8dd5eea5a153296c365033d94f5cfa7451faed0616b93161e33bf09207b78260ae2d3fa01107c9cffc8c52efabf840cc4ef3075674cd68ad03b59664ce3eb944c720ad41bbb721f368322f197d9ae13b2305193fdfd2a3d3e26f9db9ecbf4468158283b36880bccd8d29a5d70ef37a9413e67f69dc266913192d83700951c55298a809b010af42e50faf916aa5c22b4a10226e1084ee71d1c149852857396916ae1343d3edd1075818ac186bbe73cf91f9845e08dfe91678e3e6de75eee41e526e3f8ee1903a98156a5f21b99d0aa77044b2343804d4b6a4498d2f38e4451c6e64974c95894938b2200d00ab313895d27b5f6ca5de57dfe0007675af86fe86526b92820298181de409b5a67ba1988a640408670e5de7231b578a20221a563240308743ca6395f0092941057f6b1a6c0b84ca09d0c7977827a1ac18031fb0deefe74a944bb556fd2255cf4eb55e524d02e589b8eb92d029d75dfb2680a49860245ca9916106815745f6cf7d7187ae8c3535c12896109e30d9580571bda098f5965125c82a93e20d8ff6ed0777d5352474d0f0e94ac4941d74c6feb122fd00edc19df2b36b18b879b73ca1366a156612ca4b2d4b1a91bded1f7bd9c40ab5b34a1667ad4c88dd2cd096486dc6b2680ef15488fd79df1460fa18cd9501958e9665e252017bf8d4e325b0d8c6cf8a088142f736295f96c3aba3784a9c2041b22c93a1cc9bd9fa5e831e6e73aaecf9ec9edd9a0964e83800b016014e45d9ce5d83d1e3a6a33c990155d3ca53b108a8fa6a74ac5556b02cedc2606a2a5b1dedf133146bd87d51913a3596b36a43b031bf8e0348b542ae004c9be05dabfe4a60f1e953bdd0933cf46cf10413fcb21b4cd5071cd9f92132632100a0fc820d74dff11a00db2e101cf71269928e1b7e360455bca6c1a42311e2601327a08e9838037b2fa8b7c95ca71ffc167b60e443965343f2b93ecd5a4d42393d1dcbd2318a742a05bb898865ff983e2e5a2f58a0e77ec01a59583ac9f77784b2e28c3bde803cf229c4f06d9999e86216c2a3cd808cea21eb5afaae9da78dc9f693711b096ca646d3b5ac9b809c6ee2c0d5a2770e7a56c4f8dd2d569c2ebf7ad70e4770b616a22ddd4f082e4564e6fe2a1773f945734c5fa138b73487f20d862fda09edc7beebeaa7052f41efb9562255e7aaf6e7abcef4da601ee8b38ee03bfc3fe4d9a7a4a1b03d73df502e6672d9b8a2e9674ae93c16178294bf9ab7dafbd9b44230912dfdaf553a81e78557f84b61bd9551cea2ea0526081d831cb5c1cbe4becf3c20977a24668d76257d5ab37fbf70ee475672f2adab68e06566fadbcabd75634da2080d33a91b9164fbc4e8dd23c478e0463fb5bb0a4fa1a19ff0efe61b9a6938ba05e5da5a09d4e70bb3679ef2e49bfd9eff15bd59c118a560d66651378024496881322fe91544f4179c987ef016dd373fc958e5f6c6e7129dfc3fc61c003d1efac531691057e891dfab5486650d765ab7313618d1a47accca6fdbbb31cb6ac1520e0f278e216cecebdba3862e6738b317c4668da87497707ad586dd1eae83747eba5b6408069d53d5be616ec93db87a57a4e5339fab679e5385200188ad183c38946ad7288087b4fc2008ed51ae70350b69422b908bdc7756f84dbc2d01d4d58940bb94b17ceca139445fddd93cf052bb514edefdd4121104e4827439aab5751061aa9a7c9515bf0b18d87e99ee627fbcbc49809fc541ab51cd6b1dc32df457d591a47dc5b6fbe69ae0717b0c61674ca87fd6dd087990981d434c285c0983fb60eeb2208deaea0d1487d84d26f7b4cf655a853e7fd1aa74b0420b7449fcb14869d39082cfba5f607bfc4ae25accdd8a59e2a06f2fe3311341e66927cb3e38474ec52d5206e695d96903625fd0e8ffcfc56a6d5685fbb71f3f627ffac1897900f4bc856b4208fb8ae715609d488e21aa66616465a267008027dfe46d27615816f22c05fbd90afa179ca41fff5abb01cb6ee54b10c4a0758a2dec55262f3f89ce57029766d9ee71af90973ccba4841e9b0626fad4f9939d857b6dc441033d64ce50c2a4df3de4fb86e9a55e5708864bcfba4a812029c7aca91e3077c1204a4b35c237074c64e9aebbfab1e40955e5239274ffc7f9a4a0cfc5f7e09e94884a2d9c94f057de3dc9dae65edacd9ac4cecd72ed7c9187d5e9d571772fe57695515153f35df67f4504c93ae8c60f28e22b4639a77422e98312855bfb233304f03ed8b614769629966bdb054c63920e1a4f25841375867740e2922316fb0552afe21a723b20fc1e569ecd21a90425d2dbf584a78ae6a494c53a030e140aad4cecbdeb0f0edd9afee57ad13d952cf2979fe9ff0d60d5f663273d3c9862e5aeae0eb35efb8473ea892f374d02bc723915170b593aaac1c527f29325bb310b6752880e8be254b1a881648f46e3312ee33f2031d36f9ff880137a802d09f5623fabba06a6d2e37a32c2814e11eb7376856f679489b4fba74e171e705a98cdf899b6f9d2cd30361215aeecc28e5f56ee5f4424163f6b419fd1e637c6138b81a63398748fc1bce95a81865f620dcabe88912a82faad8eb2fc7742d6e40afe00eebcb62d4c1825042a718df3ff8dd381d6d827121f4db3d993c5af6c24465fdc3f60b45ac00968a72ae7b8509d29c48ee382f95748ac6a561101a3f1fcad6d1f8d8ece533dc551078d2c99322ccf197afd171edbc75e4d4129a33de323f41a897a32b1198745fbd963e6af3fe0de393689d320164e53107f65eacedb354e7214f2316515ba145cdb76a5ed783f2758361987e15a526a16dafdb70be810f298c68b8620a606c40af4bffa62f64098c3d3eb82a071f95ba74af058d149af7a670f52f3e23af3446136b54dc77a100e1320e48402b2d7d2ebe2c56b11befa9e1d4490d2be1784960fa829822bac73d1d9332989d0d65f571133b37d062a19db4680bef4e22299ac3eac46689ea1c74b8b2abc422d5071bf429de44a0e473ed274c66ae2725be1a039f6f2d089a06e03d1eb1a6a1f3665642552ffd4b5fd94449c656b076592c6c8c8b0ecfd02f441253539ba628ee04058626dfd5459c49d210ac50ad11364e7cfcc0d9034449635570ab03b6ef570c8c1788f6cb9aca67738aad921cfc3ce7f87f77e29e19942164955bd264d5982de7e2e3595c8d9e0360dab24002bc9bb9691df666213583f5feff9d9041f1c2bf130b40e606bc22ff273393a9e093231c84fd3b629129c9c4b112b12d517a7491fd330651c12ac100e3988804530fa8c04ad0f8babeb57382d28607d00d5f5d0955a5380725c1e74141656b417a25f2f5b03162b20d6ce75244fbd01c1e2231cbcb4654f4379cfc439476e9219ac7b8314a968060af74bba290c0032cabf0d59c553ad2a300dfff67ee08c2775ec361ebde0b6448a1aaf802c18aeec84ca92420d1eacca8ff8a21fa32ba6a03871a486078d9455858afb880bb08ab7347b2d7efb1637258119126567299196e8fd29089d7dc4c0e505f8f041181007b929651a67512f23535ec6fadbbcf1c479df7839fa805f5e0a3477ff6f2542322d2283dd7d2b2efa0f48278b74a1dc231d0166ce5e821db0394e8d9280e341f51b1dd1a9dba9886e16bbe1c002fdba7bee5d578dc8906c0ff8eaeca518987751bf0817b1c8b8c9fda913853a741e7100f5f8667d83261a0417b7cf8f9bd9cdb4e927a69905e677fa2ad5d85c6666e44034830e325ae2653447273ae0c930288ac9a477e9d3d9f43e856653fe13e2001ae7e548c3b3c597ffe99be80714136c2ed7ed186fc32fce62ce77620d666a298d858cf5ac78a7d747aad1ff56326348e72a78487dd6387722c23e494cf6c779d00e047bacb42bdf87938acd3f5b88ac530e43510a5071aa7e573d9be6eeccc8a34999a09f02c95c699722fd66d3dfa133a4dd48a125fc2ca9187542a2df413740e15ae0355a40de44a6a1fe4254d17929ccc162960425be2a4f250eeaed1f1e188eefb96c7578324373ed0e3f8c3f8d7ce1665d3e6a2c85b8de525f0bd605cd3d144349636dd0e5b4745f7bbb31dff570ba480cad6675c7d897d7776af7059ae5d1be7defc0b257599b3731cfe271b0bbe787179ff26c25df9cd03e4395f83ee90ddf97b19f5052aa2ecedf1a7e39d99d6db896058f9bf33e29fea00fd3c9060648c28139cdbf9114e1804aa936ff381e6b6d039377714457462595c7a55ca6d796a164a962bc3dd6004873ef5a92e29018d63b655efa04a2cf6b5a6d4e3eabbbc3329c45e7149afb51d02255110d8dc81b6c3bdb44ba6627556628145ee14ac778397b956c9c7246d67df857942fb09713518fc0c8b73db444043d782a0b5aae30c3b56fdc20845ea260fe863870b6d06f6b2e79ca4c037abe311d038d533550767bf40a898020c3981f065a0274251c637ab9bf3fff7d09ba224d1d737b4a66758d0bde50762df47e82524d35ac63d880cdd72da0a71920ef191c85c9f56e9ff0e70bd87d6e1edcb2782e07b789e4d2d4ef0a865424290064a64df8f2eef192e36cc54324331002394f6892877f3df2330aa4f95f1b44e8ad0024d8e38ded6e3aa8d8e60cb69a3d171c09bd83c012095f44865815e9fe6003a8904d093db9d018b5398ef7ff67a82b51df8a6c4c9097c8447a9045d3a13bc8da4056cebf4d8e659b03081f0056284b9f2880dae1661541975978c1a7316d95195bcfd9be6923093708f2818644b3ca11ca2ee6f175d46bec51416b04e1b5085c5e03539f3bbdc48c09761b1ae3ce9c3e87eced5952e2dd5ed952818b471d4c1dfc2ed6dbbaf51d3ddda77577aad643956d42486bffb463039a16e26065218b7e7476f6393fc901f82a5103ad4994fc3e183151a5a9e74822f7904570163bedad78f0e6860ceeaea8ba7c1db1edc5eeebb2a4bb286d6feaae9a57040a5f7b5f2814b177d8081584e7fc0cba5b5b69e2438825559d5201ee959bd77402d6e472b3651dbb518353a515570939c327392f6f84a111ce3a32dc92c1603bd5a799218d46cb3ef15a5673bc9d57c88178c3ff8dd4022d0acfd5774cc69aaf938b61ed842710fd5802cd4e4858b28bce74c538c60b5a919718d101fd7c3c4d98d512a69ad8ecf339f81423d7f8848fb47ea3533b90c3ad1cf11046db6cd83fef1708dd23328d6c97b6698d41e67d6a9b94b243187be638740f1a3f8ad04ecccf8e5533698ff63b0a1ce4e0a2f509351e7acfe1f5a827af6df175b5eb04acc6d2e8263825744cb46c785585702f6ff74f86b61375eaf12b76771abe9d618de0f78fe62876fac365f5ecaa88db686059214a040122050ab22c6ee482cbcf2849e2fbfc114b488cac94c4c0a1b2e93af8cf8bee63424da92c1d2a3e40a970c68706053de2e0e5f931942cf10614f411271c01386a71b7e624058a92680b80301a5d891d77883d507fafbcf4dfe41d2004494c67cdec0bb8922a4a74a4ce9b5f3bfdce1e9ca47f9cbe8fa6d2269cc5bba47577dde1be962a7254915a06799569de4cf561a40ad6980e41a7f3b289adc12158673c364a803bca88d67d6963f39d01dcf845b9c742c76695d4b31f68b58796cb12fc2e5b9e925936f665fbbdda2a75471d6e1ed319ba31042b40797cd59660e7f08ba32a6fb2adc9c361da30f6fa72ebcb84fdf28c5d8bbd9e1e237026ab16c7170e887820f913bdc7a5812061a591ad8ee70961dcec7183b4ae70757d992c48eccb0772d8c7f3affcdc03e7605293f329a1fcb33b0f93d842c8fe236225b2b166665f388a7e819b663bfdf10d5e15096a8fe0fa5aae774ed283eb870604a69a95ef4d2018703492745cb5097e2e52646ea7f1c7a3b2e607bc0772c99be8fd003a332e8d84c6e79a94aab507e36f1abcc3936104d593e426333f7f082870dc1b7643fbcf920789ed5d44bf213de4d459bb81ab417949633f8c3f86fb98064e4768c0d8ecf7356cfd81c4cf836ca5d7ab374855dcbf1022e0c17ca10030360b3e48e1c8365b59ba4243808f1dbcfacb03688dc8ddfad61f9749fbe86c3a59052b606a35b360a4c6ffe567b5032cbd5650c0b65f707cf5b4f4395aaf1e517e19ed5dd13bc95d3fabd1d6bad2018e7cd59dfd5945ef6a71fc0c25bbce210620e2c6958ca7c184d27926f050a6a9bac30f664fcc6fdbec1c700476bb2d630e034a540d646c5fbbb4ded5baef3cfdcad66ae7fbe60378eeef91ef9e45b3cfa6129f14bd34b0dc9f101e0a6d6f1463dac7af81bb850c424ca3819890300880fc9f53baaccfc520029d5bda1de9375abe2ab2b9a0dab6f98c405ff4a993146c65cb206178eb3f45515b9f60b8fabd7b17bc248e789da5d857b927a10171aaf764b05b52645494eb07135e987348214e87786ce781696f0030bf4895a333320e8644252f2c42f151b5e94df29e70e84fc307385da011fb5d82ac3bd72c4234197890d0f1ed295a44cce23f39803a7ea25027f50bfbca436380749a138a60a35d051abc8913ccd556015b6bfc63e6050c211421cfaababab4ba68f57f0319e85b19312e54edea6096ee9d8811ff42f109e8588c4039564a3130149893f01784e2d89d01bd10dbe7a9a3656c83627388788b78ef51e960a7129237868972dd3087e7d74f3427d9d4cec2f321c74a7b5879176db72149440aeeb3b2eedeaff5170dcd9ad43df05789518296af677859d0d0246c34967cb601d759d78ab8a19943006fd856c33f1e6a32537301f7974e55a3f92a3e0b88d3db3dd58bcfdf348a32207abd8e9d58abefd451175b772ad970a9e5efe96b598b944f6ffbf009c74a319a752089e81e1765edcd30786669766fac3090b94160c41c5bef80f146667d3ab4a77ad3799108e85ebe159d817eeabea160a17a810849c4cfc3d8854e4ce7796d6b6769b2036aef222ebacdebc0a8aa55720e3e3bae82c953724009f8d8b9211ac9a374c94b5252641d7a84a42698acc7faaece11706701ca04d98b6d7a804c9b6f727ab60eaf3f0b5637b7763f16e9e325baa41c42da2ae47f8153de5e13b9e02518916d58459a74703d61191cb29caaa48ea6c85f83508aea8fb7f72ce3f59fea9291ee4ee424b6236691b8640fb7bb18896051490d3813660c491fcebb61edc536367e017ef37f00806697da3995050ee965c5900f69a3095a9a4668565e6e73bb7dceb75db32c4cd662de150e053d275618d95f3ef3b34d892ff4521caaccc5c329b787a7ef1de7f8f3422e879e6efa8426f6e9171886f9bad6f2a1355975eed6ae5633a73d6e6873403214cab76bbd94f7b104ca20cf6f44de87e0879798384715074ca5702a7f2b91c33a0ef186ee58c30ffeaf396253d21771f953805e4b4a6d0ab08e69ff7698708aecea6b17686a69102fc464b6fc7595860be8944cc9e2f7c5d4e74361974838632cc74c96fc63ddadefaaea515666b526e2c4fbbe6f559c953a911b536c7e2870370a00e8b0b5df1dd11554c14ba32f79550a712aebbd82839fa7cb83060d5b2d2cd5391e38633b303d872c1e7e6ccb6ce1920f13609c0f1076c6fc13b26ed2239f0b1b12d6e4f4a9c360360de104137e1728cfebf939257e5d9b9eefa1bc1b89cb4a481e09d5b6e438f0162eec8892c51875f1dc02f20df825150df2881ecef531a1b752f05eaad3992f87dcfc03c8dd0f145915046ce77e07aa6a4f7e4fd31764ec4a9162188e25fb960a62d25d2d8585a768371924fd76492fe9e04c4f19eca778b2c847c89af240a0ba892acdc92599481c3d379a95443fff69790a5d29536fbbde59b43ecd0ab2043a18922bd130f31bea2db55423ec5dc693a3158f3eb0e83bd433956b9cb6c84e158a1ff39117aa79dc1aec73fea9dbba9854caaf42c912530f44e10f0cad4dc8c0ee9167c48515ba64424599f0477b00ad605fb9efa6e4142f3521135cd251b10bc8e561d1c19494550669bcb96d3889f7079d07b19fde25716751f55ab56c4765d32d729b68d1e78b79dbb4a9581df1a8502ecdd9a9d5a4d5b3b84e29410b551568f8d783eab22c728694507192978dcc223b3781c51c86181731d66bd52b1c62f5b32b39a14329ca30a1c716029f80372506a20334a085a3be5cbc27495dd0b4c199624fefa8670d084c2e2da1d99c37d9739bec5a26336a929cc7d3d3955aed43024515a6458f75bc9718f5042d007256c6dc044ac25398ebafed57fb011bc713f7db1060aa0863b023ea0813b9a6375f47ad3babf1a95ccdd7384e1f60adc2178bf451c17fe15b907da93ff2a151bca04738134db4fe4d83e2df399d2a2f1d20699f2ebfdd86ff5628fdce6460344833b8d003fc933d5115c71598816977e88a916aa3f9a2b2286c6e932db0fb47c3f900f02bf8b24195615460240c250ac5c64ba6c85391dd6c31754f9f9c4dacb7a5580d076dc1ebfe4f2808166d4f2b69eafcf7bd892f6a30624c808c5305ce0b4940aa1525dc3ae67cebe851b3277252d9899965456d4c59a5e8883da4f4541ee47fa571153abe00f95fbe4a2e9cf8dffec7e646fd6e818e78fb00ccc019882476d1556f01e9d7e654147ae52925f3b14312a0f2f525828b718703d24394b5ddff4e011d9789e96bfeda155cbd2bcae2f9d5fc8a2e3d42e1bf4fe9c167a6e982ccc7ec3eac88f345b596cca9795c615c6a8ebb196fca78fe1db70d113acc3e12d6167f679857098689887bbee8fd2af91dcf92b0528aacc3a1d4c7a0cdb38740abec314a38cb1dcce37b62ff031936d8b9ff6880decd1dc454631ec87ab351311186b7cc462e0e7625f837a306d140025436e725ad864f20ebb2c2fd9ce1f51b986d607f1310375bbae96ae40363f1c895d931b94256b7d88d464f0924360605177aca92b22e7b7aadf1e653e0e5fd2e0df1fc10f683874f02f8fb03a0c15d112f99367aa503d0bbdbce54644c73bd07efdb6693de957574a1ba5346e407af832346cdfd98349b41d57ea247ec03904b154c07473b82f4f1f86bccb7230c327b506ce3b17c869768ddd72980b2b02ad97d9315586eb7eb8b32e51cb38f32cf2bc24b4dc28869b9134bff1c1323b9d71da24850f4399cc4fee179cf3fd5fdddd92ba7281d9fca88f79954eb514afc893d0d2df9be8ddfec1adfa5166b7a8512717bc060f4349ccd55cbe57d3659eed19107e9047fe876433f4aef0ef2684e5b77b44b9c16025036cba6ef14f8a2cd567e0ffa2f3b8b5b50fd37bb5434ba8322a14eca8f6eaa87cc07ded689323b94c7ef75f56536e2912b07717f27dd9eff9316ba742ee7ca99b46227f2b8ed095afe04fb3bd1539c1e7a86c958e6046963eab9c2bb499ee704d17a6b330d2328e9101a27afd2558174ce6fb398d5d4b4a82e3df9ec41550c18c591006fb169acaf5055b0b556f6ac6d2b391e37419fc6e5e4652036494186fb9d702ea0e2829ea231ee316d33dc4847c98ac7c841433fcc17f5256d3afc8810f341c45994670b92410cd10a582c1e7b25c2a670cef3c39121c077574e1dc8441b45025944807c4565f71776ffd9f4f5ae014d81c7950634d4e4d99f57e0ae19f25683aa90756d0d6b0ff300c8949b40c92fd85a62e76afe87d61e44d566e643b4210a7cbdb4d187787f51eeb53415f56bde6c3aeecbc438d55b0ca55282db2e6eadb56ee4c53ed4f6cfa4560cb1b663df32fcc82479d77448095885df282a41a34ad08af06c21da0c0136bb99bdcfef48fd9cebfe521f90766528e3743ea6163edffa281495ecaac672a0762b3eb8fc4373cc933824d0f2918a5f96af77a277d3686c79d26cb2e79af3aa49b0519d5344430b93d5e4f693fb8e690b69e52740c5b99e0bc48cb631ef5a389d4ce62a32aaa3b2093980c600b7782e4ecc010592065ade871ec21ad3e54958865971eed49c141542f52c92d2cf1c4b3cf608bb6a8761ea78f9b68142b9e5f6264d3077f9db30f88d09cf4fd27e641b15ae7edeeb2509cee38d77b66fcc07a6ef0e3f13c8fad42ad1e0b387d62053fd296a3eba4121a84b260b4736dff9d38a61797e512c7853f7eb4d19b49abb4d82443a4c1d857f0388dbabcc88c5b4f0f337375414188c56b5e797331f55077981aba131b2bc2f0d283a5182ee9e453a6794ae391cdadabd47bf3280c534d2b32912466d94074fe5a1f8db93a916341b93c006327d466b501142f1b2bbc5816883126233cbf3c3f756fb418bf0274e426f944fa85323c67167911724323e882941fc1b49a60cbe301ddf0dc18c31cf47d50247aa0599e5e1f8ab467943b1e884c176b0cdae44d12fb1ff1ab412619dfa87236bf9dbac50cc8cba27ca1c25866eed3357742f89e25766e2cb7f8b6f392c2850fc74fbb2708d837704a12cb7f6889466e3ef73f8576c124a9a3e401ee9abdc0c0904da3f0ad19b84e38294ebf8be97d4d3a42ac6351b48927c49b0aa77fcd3d67a39a25b6cdfd9f2ebef8c847b25681af4d04ca24b2e0792876a0ffa88521b377a93eab687ffd3568ceb43b48a1ad0a9b33ccad8a53a42ed390f6bdd8a0af3977a6603d20e62e23616d02476cf1d5e27a35dbd31d21fb916a39b71650fe30c5e48bb0144b4b0201809372d833c791436f31337d9f988c75ffcde66297152a6dbbddd4be6eada9cd0bc3aa062a77ef76b9404519ff2d9e21869721e14e4749acead847005bae8ef0da174a31e0d6118451de444613fc5b45c94ea5482b963ee40f8cbf75d004a07bd7842fb6fd08cc4ac61976abf22b10695938217510bbd3d0ee824b0931373ca80382150aedec2a72b5011d4417a31cab9ffdbe461c8bd8d9242dc63fef9e7e60614e094154797839e43c93bbc22636239dd11e6421459daf706008ef071321c75056da7c49d23ff7addee0e920abf87545671b5953326667816cee995b3023e8efe8354fbe12af2da6ce0ba03faa60b479f1f111e3ca4e1212453bd1727f2d31c5e6ff915201a3007002a73e78fd9adef9e0adebbccc22a7d5af5d989b2df5200121c69bab4624e2dae30756902e3750288dff89e4d3a1d3e293681da0b222d557cbd3f526ddc2bb3ddfc885d790564ea919179281f557c39bf54323e8c9d73928a87c1b3b88c029a873483ea436d85e652b46e4b4a0381bd87cc777b85e64a24ced59520b0b6d35709717a92890b73905961f277955aa4db94774c3a79c61c7c7afd756b4a1b8bc5369c3a8bd3ab25038f2e604d082e0dddf8e8d730c228adea0e50300a0aeb9a442ee5c21e56c1918879d948b2958e74295583a55cc1d4c106c7f90f27302df8c18d076cd20563b3ac4c4f1a285b318609a1a9c265b82cfec5faa4fd971b6e672c4356fcfdb40da8fc502d06e27fa05fe92587c1b7b3c9abac6bef46202a9d05b7e3f74f806a2e6abd36011e3dce0c1b1bef98c77f7d49979c88468a91c1682125551b8fa37249a4b8263d4ef379ab8256ba43fedb1137f7333a3f71f5073fe1c6aee387c34f1e1a0d0b954e9e3212960af53dd68f7b9deb583c030baf6660a5c9db8ab7a899e13752e38a0880717670e878a244cfc0e9aa6e82d4cbe92d427e07c7963b99358a46c9fc8f3f31f686b261c422fdffdd5a367d2fbdf28fb59ee3a46363cb6fa10dc2f6a21ebbeb65839676b7e35b1b109378b82c76cecdaa6f6c74f615bfbbb8ec542c104696f0a132d0bb33de1691494a45d635b78ea1961417ac33f4f2d8defe8bbc2e698eaa7878e8c9700599874e79642e9ba7e18beff805d5ea58ef0e082c60d84d323d494dfba3e7fc2199a07702b230218a5dc072248a9cff280b58361d1433d0f4117891eed75f1b87db4eb5c30bace01e350679ac5bbe9710042ab9a733624532885892590c0d0d00d82702a116f3146f8333ed4366f05bcf52c6ca65703a02785f72e5205d81780c4f274d4ab4a0a79ec1cdc477c5656b14151832477a2169786b26af94ab8ea5a394375d610b69b024d159db1dafee791623595428bbce2f91ae874eca742f4ace044020b5083d1607f72e7cd6ea1ba19dc29a8e31323d8dc7de33ad1fa46a24c796ad1e790b971904e41ec7406dffd95584a54b0fa2e57325a382263c1c845baa897345a1170c1175bd94daa25bf1791414f11d211263443127868c7342cbb702efa940ae1673efb7427fca7ae47c226c9d4d37b65f0f6d772546437b8440822bf4b711b0544164b7072c4855569f60baf60c61c38b7c180107342af0c2f62bbceb6d73cd86823b6693895fdac41190f0775c41a68db2fa7ccfabe8578ed1284756fe8ab922eff5320407c4fec76d1fc3e007569278d35a3b6515811cbc46490cba916e76ba209c424fd8a1fc0629ebb1ae5880a4609cf532e02c8d897374353be3d6fcc8b070ff3453109fe5d337fd5488af61ce53fef79badf23178a371f47145195096af2785ea7d5e91ce99929191db7bde418e6a2d8a4b8ef203e9b9988f9619f9490850ea56aafba02b322ddc4fe5c722afb93a2f6fb2ee1a819d47e61cb33b0fe64eb55278dfebe4bb557a15035bd39da652a7b558915aa4a68daeb8a154b69dde0db6bb4ed27f62ebafbd6a27cd79cdff6010a0eccbe83512c84ae7a36810af826bb1d1f12b1aafb990076e20a67df324bd1c2dab6b0be24f1fa786b848220654e1194ea41c06bd09126b405c6512628fd8ea7d0291258e72413958b320a3d2096acce7de090b7eab06c533deff2da431db2611298d44feb5c1bb655fe446f12c1e7a45f92cd5be9681068543746f9c8a84695d2b7532f0dde141bd2921ca2fcbfbad78a866473f979bd68a306fa0fe45e21d8dae0cd0630bb4822c5f4212faa3cbd9e5bc7cd2f1ff76adbad8c75dd2927ac2ed15750df5030d76dcc4ff248a867c872d8b06806eead2d8e68982174aa753775f7b96fe6934ee8102a45adb32af16d45c1da98a879f1c223479deafbe415c7908a67b211e5b4a3824274bf648e55ce3f3401acc3fb1730ced54cc6e3b9a6e91adf4b6420ba2f3b7a2601709af703a6e41aea486346b22b0627ea4e63f8feed09bace2acbdaad72e5f03febf7bfcb0d9b2b29987d365a2150a36bb80979b4f2c0f3c84c30c4ac70fef4ef03e421d9e598bce63014a3dc5e4713fef99a4c30fa2d6025f7dfd0a8da4418226a20499294b169e668a18632f62f12da69302f3a2c0fa852a31acfb1689678bea9752e752bc4850a47f46f8d5d1ef9bc676dfceec633ad77ce034d9b881790a856f12a56f0ce7db15f23b437f32210563f7cca98237d1e7f543d498587de555c9f0efb913e50a1eb197ce89d61ec5ccf002a3cc7ccff17ad4762096797eb5b5a47d073420fe9a3db380c8143d514ced8de760cb3ff7344247b95525f9bac00d7d4137d2e59e85d9832ea58f024b2ac564761dc46c70d333bcf9d3da982b80424746237b991ead6117bf493d75503288bcc8c0ab751cc6a84915aa474d38b3aa5147162559dcca7d048bb37e4f8804bc1a58ac0373c0a1eefbdc2ca1f4db6cb392946657e9b44b7e202f57834a110037720b0e26810cb1ef5074ba74cc9407fdf2149450cfb93b23965577cf417841fb1c3a1860145baaf7881b920fb7e12546c2eb6ccc0caf0b29faf1d54b95479e1464319780416480efd80dcccc727b37b9af796519eaf9386f7cd3be3c4776bf27cd997406f77b5bacae72e1b4b560cdb941eb0ec3c7179c4b3c267432ef891b1bd8880a117eb3ebfebfa7fc134bfd606900e1fc50d60a04d8d097216d09ee9707835f085915b14b6d0d4d4f940a255a3a524cc15b83be40d23a31a4db9447dd72e58e45891f4c8350713a80f4c03ea73470cb0395fb3c2842988c14b7d21a2efff0e347b2fce4c87c2ecc5f2eaae9558d87082703e855442bd81c95c22e367b553d3346902c48041717a0c5adb217de142e7f96f6ca8d73e405aa2351a6b47e95f752aa0840832f90490970e61acb1593efbae87381a35392acfcc2ef4a9b8ee48f4d819b90d978011fa9979934b9e562c22a77d2f80fca2d9fcc811fbb8ddaf4967acc7beed0458eaac6a9d80b840b78ff945961a08862ce041b07120a2a515991106da038c3a77d9c3efadab997481ff63da1a4c84176fea96a555a1203adbf1eb6887b4e4e7371a516f10ce92198236edc1a0f472ba0fb5b8c7b4c16ebd76e9178debd668b45ab94f42b1bbac12e9f128a86ac6d08b235f823e3f06d8f5a750607a74107d2b99f61aa4f051248bf7414bb4dcd8e2556eedd31317162b4d58f2d0be8e64e078cb38c6b3b6c9e2a501063bf4a3b8bf8a72ef779b591e4c77c2ccb12f1ff776c8fde9d445525e4ad5d64ac15044f9e3ce1bfa015824faf51f52a384d6d1730c3d8ab120e50483188fdbc09c576ef423523409341c17693d7021fa3fc206824b00c114c9b9d41cd8d67ac0cf0cda236ddd2e868b60dca047c15865556ca97d5d0b9dd49658e4f8724f4eec5b4cc744bdbbcc5b154a1bff516c0539efc254bdc5a4393fd520da75441dd4458156e95622d19b236168c622426c9a4f79f31abbf80580afb4644f6f91bc277b91a1ede8f78fb85c8cee76c1cf6f1ef53e09280ae23ee2526c587df1f4ad81560efdaa5d96fc3fcc2d3a37845928c75d33d2b0a8c4f3f8f3a29cfc98daa60f6d190437cd73e7f180d9315e14e12ae8a83f6eabe3414ad0faa41762f7d726cdfc5119692f8b71e2414eb2514948bd367c71b08cb8c94c953cfb79081364d060ca1313bfb1cbd99a2e010b23b973f9ce0964b8c3d79766767e2bc10979fb7d3311bc681383555a89824781b89881e087b6e4d0e06f7baa21719f94cc67b958fc11d8771d34e9981e94aab53dbca34fd7c507cd8a813c783859447bb16afb5aa21a13e3dc57ab4768a1b28f04a1ecc7b7e4be43b53e29eeee29c4b54ca756f1d5e6f14fbb1b3741da78003cf4e77618b16a5a1bb06554714accb119ddf04477f27324101b9891924ac28214f43611af7890e24cbc5c87c2ab57baa16b0c1ad42ad99eebce8f052280e55f549d0a1319552ca2d2c545f40828861bbe5f74b151d0bf929b880f2435e184955bdd1a62af4d7e159df169b244c75a01dfea0e7957e4935d3c0c4358f011bf7b9688364e0b31039ed5f270e48a25d508396a0e523bc1fd54e9e051f6d4834ff30e410360de6170254bd56c783266890517dd82ac7631c72915b87dc4ea75ae5d3696c2be49f5ad95859b5da663ce2af0a941877f300e1f613779d0edf99ea3e10b6c54f1b17c9b7f0f162648da44fde01ff230148e7ecb1a0b39f53dc34965a350fa5b1b3e6d7c52a144b576e704b337cebf96eb33a2fa5738d3e29a467cc8f145efb0d8971c725975245fa1cb77688814083c28df4085421d4e66ea7d66aab054ce737e8d7fc03defc904dc3302317c9d4a7de28038d197c7b5f82b3a1f04c7f2985c3086ff539a001588473c3fc2cf8569a6fcbddc9f0711f84eded4f62577ed6141a93953fbd063bfe0d2a7b5c686deac359e5b709f22a17543dc299a137abf714975ccad3a437aff41d0a135279c38b8ae8dead583bbc28264a895fa7a60166cb38573f67ccd1c061e33b61d65a59cc963329ffc69776368a27f88149d769d653e83ff81f4094b9bbaa787b7324431dbd4e32761c47b827d26173485e3608adbb4180c662ed8a71363882be5b83623a3fb8f94ff34dadcc5bc865877bc4d4251b5d4c2b0f6a82acd556f88997b193cee1105a41c6d0af96ecf60c6ca215206071502deb3e5f65f80582fd4cbd543e6a93aee08950fee8f13f3de56eccd497f73d5e5ce5cb4d4de29c950c91ebb18591d8eb2b6783d8151f5305823140942bc1800396711a9647c4fcf53477d17274bc13f4d10a2b489484fe8f625a835d2743dc4a3b97a71409d0628ca0e2f6dc28fa7b9d5f20b7d381b149d660ebe5195759dba8c68a5384a078c37a0b4d2ccf0d479b08994423cdf77ea94a70f05afd4cc90e64e3aa45755ab2c14a651f61d23fede84563fd31ece98d42e3883cc95d0dcd4763d4d5fdc9746e4c06d772cff6cbcdc4cec2acac2c38b7c48d08ebc957fcad7344292d62978f1a6b83a74114dbb3415de9bb444ab875ae1acb115431cbdb5f329623b748f7c3f43c9abd2ff4ee7845230eecea577ba6c401f5e7ae337c862e3c1e8528ab28bca05c15e68192eef861b0c6193c64caf61bd024f89a2b5316645f3d59f45c80a7bdda0261ba0126eb5d57553d0df36ead42d733508f53389abe9ac31926d5d06ab98b3756462388deea1d581ceeb31d7fa4f752e4641b1382612a025a6560463772361c433c2128280272f217845eee3fcee5670d4908d7726a9799bc034c0aab4dcfcaa78d14a7a1af01a51283d6492ef66e18425f136cfee08858e9ab55cde5737558cb45c3b2f15de4abcc082a65ac09b1f843f3cdd03c7fce3e5f5603a606b4df9824dc3fb133b9e3566faff651fb79d9382bda84c0579ae2f65340add17a312b56e5ccc3549c309b2d260678968d1db4da696c5048639c078864db9b4810dfa793096289682de2e8dfce0647ebca097348b29d5221314a26061588a7aa5481568e5931e74db2d03cd0340cacf1e4bf783d05b366bf299c68621794fb89b5ea9050c862e8a5a604afecb4893605b736b34c05c2739a306fa1060606f605d5ed8c7087ee6e0e80891c5046bb9bee19a28136925c32b38f188a966b7831c41c2b4116338de6ec531e37ac753de9ba12dd8163f595e16f5c28114dc6a0a370da2cb64d4ea6f232289ec483a6d8c89a9e16946d1fe9ca49efc30bfb72a201f35459a655a5b4983bff7b1cecb230330b82d0ffea5e4b075a858437c03a2c59e89a62dff9166af8bffff7ece9ff331f07ef3dba4a235041c8a8c68c299de327f2653766833a6f6fbacbf7e3b17f3fc0742eadbd785c05b557fcb51fcfbea059a89c5940fed3649bc12219eacd3818df0cda7794525613ef238f7dbc979f43cc25f65da9b787bea52d9a105f51ac9dd5aa34851bc45573f4a02b975407bfc2fbc1503ed9c14f09c4eb10721c889de47e149157a86897940b1b148c2929c5d450614d8d8ef8f68b32ecdff5471a1b0fddb7e91937a54648c5e0388e4ca655bc7435008468932932d1c1f245c5fa1ce33787cb1763907468f65c2a3e6d83627f77e3821bac8ce3848a425f35d4035b3b19c3dd4e261095091efcc8da6d3b5f3dc748285b95c8a93f3fbf363d800955b3e9783f32535a47f725b14b16e5aee148791a108d5c60a7eb88d88ea5846640427d25e3dc0f86aa2fd71ad13eaf9cc0678a817224268ef69ac5ffdf75dc50f17d85cd33d1d2d4d20bf3daac580f89fb1a7e15d602d5df61eabfbb3c645fb405bda115ed16e563403d165ff5593c0d7feae6dd394d5a881ca34e828118acb06f14ee93ada815099faa56f146f9245cf94d467f20af0dbccd149f6576f0352b24415e5e344f1830c9e6303b5d0ed94055f723ae040f010d2a087890b55112bde259e67afc5c3a3d1cfa6e3ce37d297330273f16d3a2b410326cdf344e75366488328b96b9fbe7cd37afa9b20904d001dffb65090bb7f204deb290102355c2d30fa141dbe4a36ba1020400d272beda66ca8a1b60f772ab37832755c3e3eab6101e9c37957f79701a5ec2abb709aa015654633a4ac3388fe8dc470ac817bfa7d360267c7b29c508674d315f02b5e03889d08d749ae9d9d5f1b463f41a51c1fea16631646b01a49bf067aa4f49847560f6c9231218bb1eec042b871ceacfb12230748a6413bfdaf2313cec190481693bb9854d8dd9c310d7e184140ac09753f26e56cc004e2c9005d425f08f79dfe4665113bcf75395e9ddf90c1544d2c595314809c96b61b5555908831417c0233468034041b9df388aa630713054f9817984e48c42d417f38929a13b266b2320c3dc60900a52879a7205a3b1113432f4c1bbe1251e3cb0d3f0805c1fe99df0af517cd0eb045d1acd34166f0c224dc0b0c6249b90ff89a0c4e9eaaa71bcb14cb9e38c85e1ff5230d3010cef11450daeb6e60556fdd0747a68057a6bfc6a8a10ae101caf13f3ea5b4b88b583ed137a920b42fbd3f2abe3ed3047a220fefa451cf4d0f51ed5c4d609cc7a34963aac3a706969606b8b9bc1dcb9f640a9ddc18f5897cb367a02cc952dea28b32fbf0351bbc08a1855ab6245cefd82a1a070015c40a351ddf02f0549a802b3dc451c12cab9a8408a88fb22571bb15c907cd98012c55ca8d5d30f1ee7c11498c63db729a26334821283664a5659c6a477ef2002c975e02ce43c9ef0299fb37935bc0ea58fea9cff192b0c521a797064e371e0cfd9bf868d4cc0d046b8cc4a8f25003a0519ad42d96fe35e32168c89e5cf1eafaa22a1e2236cf75658d15d784113f8ca78c2e12fe0349f5c72bcedb78d192cf229141b359dc39e8b407905fa775a906b3f98159b475b2582a9e334afcbd15d0e205161b74c3897b6f416a6bcc9e75a65ae33fba18b86bde2bf30b6dc6e25bfe7e9086867d9a03b10b0ab59c69516a78cf1f0636d8f74dd5bf54c0e5d6c0d6a77aa0b442c39a73d915101f2350bfd933db87446af347d592808d82813b0e86c658690aa270e9cc9a6cd5ea2c25da677aa1bd893579d9a131703b3beeec9494b2070c52c90d4e2bef9f1786a38341c9b824a9aa7dfe0205de921671ee8c533959049e34e5f122517643167878ca44b58be03b29649af9af2be8203e225d385044200fe52ab9459e832998a87460b322ef93205edbce93354b3e4592b162e25e0035a44ef5c4bce2466983a4211f6849013ec833f73218e5523231e59e8c85f74a55bc5db2a183f452df069885dd1a1dda5ac9cb41acb109e35af6c1bf27435c19c9f5a83b2eb7e19ea3bef8bc511a03ffc7a532fdb6429a85f131378a7f81537761a905b2a1447bff42e5b5d7e93efb82c38be969b4d3bea7dee2083ac95080fa518c05d18e4d93cb4f42b9ce59160aa1fa8e2c9d5989d2bb952fd58d61f19838b9c056d73d49447ada38a4a911ea3b6126ccd929462cee0a4f598021c11b51621611ecb1c72f2247c8ece3631d689adddc8198852a7bebd33863689a470b58d1f6b2a30c55eee5c5c0dc220e853163376b8b29790db8434587db1fd79eabda992495057b1c3bc022b88d2e1be2594ddf88d1147f7dd403370d5413fed2d54038c3cf5015b45ef8671f7b37240cbe71ee11b25fca4d7e383bc837dd71dc790df2623d99c42134820c994bf1e4fbce0d3650e26e3e6a040cba1fcc76e84abbbd0bc94cebb6c542c1de378335da37da0f138a9be6ed65568435d9fcad2610d4348ae345c120b5bdf12952b43ccb332e67b7452c55b44633217f5ec9b2ccd08f61cb38d62de8ee4610b70211e262c606748f07f752ef5ee8e1160771702afd3242848127cf1f31cbe02bf3770b9e8c5c486ec2bdc7e16a157206bec6c6ac9dad652c41cff0db978c18da682faadbed71db05bfb21c6a64c253f73c6cc63f5036ebc62402322e85373626d08a3e8a828d198e12f258323568fb0c5ee787b6097731e5b8ac93b2bdab97155491c5b59e762bb31594418d9251021896340d0a7ffcbfbd72622a5a0ed4b66df37332c2915fd6cb763be8ac5f4d8bd7d0e14bfd3f992f5a734a0bd35ae2d9696e39a13cc17e4624408e616a23d540fcb521cf22fe70e4a12d148131922d2bc7af758f5083bd255dfe2c203fe243ab31b8afb16f20450c0c9c42c594b7d09356ec2937f04a1eabc0860e7bb52b15b32539dc0c78b07b305cf28aed2c1f69037d7da8a97d884c2e3761bad89dc5990c16f8cd76a45be06bc06942494754cd1e5e85d23a5c376295ecf94978bc7ea0c4877ec9ffea3d701d90d2729f4fcc91cd14b3aee68d23d2cc05c9543cd38112de19079230a0f9bd849f2ff57d2c8388b125b8f05118eaf211eee60d91983eba840877621c1df0901dca6ad38f11b7f01d1887bc9918faa1c6532f34d12458751eeaa7f4862f2e44ad90a4104ef752d08bde3dd2230c3fc6b98443af7293601357e1a51e9f771e2fa6432e8bbe02bb96c87f268b069d6c1c47fc78d8db86115e9c1f83fb85b73ce32955fa1a1c6fd53dbb24ea6e604cd207ef3fd000e9191b402e6a02651ce84c47ba1e00dca2dac5c7d62656cb2c79e0f7767fe935c221de0d9fe352cc650940b637844d9ec88959cc1037b8d383041173848f6cf8acf35e74df1915708d9b8e39c743e0531d75fdc128f86cf2ecfbb768368ebcc64c2eca71370a0c5e26560b54690dbe732e2855181d2b355e11892f99b2dfc1697df1751c96e7441f868cd6525790d90a3810cd06c3550cf5fd395716bde4166dad893c5778a994ecc67074d92718fd9eadcfac5444e81086c244a2084187d7e88e9815157798d8eeb86f550eda30ef12a61e29f60cc13939d58ec8a572a1f87c519fc83e65258a740968861253bfda35c7edbd44fe34a3893ada9a3229d53432dd801791b389cae10ed3a5504dceb3bb4f9008f744e0b08a98d131a44c4b3cc7267b2165d6842f59e8638d4ff467b894b49b68d92d66f00876d73bdd0255985359869b7b543fc155c6390433c3b8ea019a0d5ecaf0b982a9646c05014d6132c502d3c1120d6f2b14290bff8af52accc0bba4f9321411e7a6b86fc7d3aff88df78795f0d0e4df3a3332945a8dfc30cf0acd0e2121878e2b0f62a58b7b66c30331287baba5c9a02f971514b29effb9062d95abf95fa992e2687de6868c84eb918e803bbc9738cf9b190a106c49c151f3ebd5cb6eb9519a3f4d538e7534438e53e4b35f7f921b7217d5c2493bef041b508bc719ef0493cebffcc4ff778c934f9c6e45de28345bcb3f00f058ed6b05d9394c870903f5ceb3398ff8528d7391b9b50cc45846969a6e9c3a3e4d62d61c4325999ddf385df877e5d3e0dea4e6e3ffbf8470bb68d2be3da16a0b18c6e90fa3d20c43548e93db55d606542f763e655c04b2f51bc4bd9d181ac217940a862428b57afae87929ad329867b0ef390f6656899f38c534e64a28bafca60f838f4b1c5cdfe786bff3d1e66ee2d60c660353d54a4e7711c254e607a2433db830001fd8a2a1091735ebeb80e044ca28dc553d919c4a7d7caa10d59aabbe235a54e93970b6bc35f4ea9e4b4c6e4e79663d1a1a179c67eec2c20b4f246f5503948f41e5c81732264ca287c94527bbe5889fa2ffb4eee02831b7e49d2f5727e14a73cc389b98b5b963312dcd66390eafe5c3bd9964ccef443594855a78d7a86e1dad39a76dfcbceb5fd3eb0a26c9824a3baaeab7d74e7fa21976864325142975bfb20d77029ee1b966ecdcde2ea4306a939898a578a329717937367cbd54097b9ed77ecde5518d90d11e8943626afbed51c7b79f8106273a0f821e9ea79302735101423647555cbab1d5be82a035359c710f8f9048abdc4b3b51de1519dd933de79108c5fbe1c27fc5fb63e68aaf1756574f6a81e8d47aaa12f90295d5feeb415229644c9ea476c9d48fc02fc806e99df55172f9ecdccf170226a37215142b5678716345fe646251c8df8985c01ebd1b33554643ae11cb666be8d6970ded797f57dca24220aa3389f02d8976ee7df12d325065c7895db1b195712e902e1934a740881997064a6d93d4d39d6ed7dfc2236a22edbb0fb9b34fa968dbe0d1a8740a69ac42eef434941207136f1796e9ec3ac87465fa466c908858d20d07460921c0e722faad76f3ad8f0f50a96395f8a7a79ed6b56f4fe4a5c3650987d55261a0f074af83a21b28e4d67800e5d50f05f293b0dcd0c29b3c5886724a39839bb07e702697d206cb307cd93040b6e0105a37395ddd34cfb03bb26d640555ed15494436053b1fdd8a6732e758a2ecf8fc7541c6c64ab066aa037ffdb480412ac61fd720c2b72b1f24f264a138789b2fdd7c1925aa460f6339285a0102adabc0754e072a502b9a8dee56562c8e6b3c64ce65b73a439a9fc83178da76b906bcf2195e1b6b6e4073992337e761176afec1869b872c7b0f05c8d621aa9d47f7b28ad783f018bd807ca82ac286546adc42fd1041c60300adb929eaa3823d4017838e4e94c438cb343666ea28c56469c611db1cbe18487105e33d09d31d2538efb7830936dda0ff3a55f9e97699687017245d9fb27d77dc7ac95e66eedbe47fc7df794358de1af04dc7dd23cb6ec44255c6814bc8af89a5480fa3c80376936932c97858ecee02b47f7abfe4ca916f3a6e278f5412d0b291aa8dd6ad26fd63d99b80e741326d6a5d831b485f279d3cf5ba32a24bb3e641168ee51c2dceaebba22a752a80e833dff0c726a49faeb4dc0f54cfb8c2ae686a6cd6f70e72c965a4e803e73a31ea07487510bb681254d750e67addfa95ae9d1a4a194c3b861121a85382b4665cdee5b9530305bac48f5e5ac8b49b8e4f0a7a4fa895ee8e87105bdf778bbaff69207d60317a08dac84b52fd6dc1e931627275296bdf1e1a58fe78b78df1ca2fdee9948eb0399f577add0b6f42e0a03a0b9c9b172dc9f9f710eb51ffdd326f499a29bae9173e6ff4de617ef6220360fd9e8531eed8d2b62512bff89718bdd12d35cfad20bb4b9dce6116bb049d7a2fbe1ad0656fe16578d167352e3a67b2f798f73acf013dcd133b7d54b667f9e4f1516dedb507b9a136c684a676545ef1c29f37860c2f50fe639731deffb985dc96f8b94438373add783add64bf89f646b032c2258509630dfec1f1c3cd049f81d08aa676fdfa86982c91204718dd899fa631ef3d52ba403db134ca0bd1a5e337435bd76913edfdf523aa7fe3e96ed593cb7a8ccad071e9fc632fd2f418ec62105f27e1dcc2302d4b60815f78703b95ddc7740676aaacd00f0a914d2147e4ad571b36c77a0bb8af8631dc4ec9293b6cbd1548db9e3e746d5b09f7d200dabede9a10404349d856fe0c52107cdc5a5dda623dee3c187e58eb1ec50b270d71bcf6141e350a00fd16ea52cd45068cd673ef84fdd8d55d9e4afd5c18b9936209c371927e4f6a0fedb3d851eef6f411e448eb2b1776b6886bb580dca3cecf2b565a5a6ad91179ee117a413f5a45573713766d3c548c8613f1b30ba132d0bd46b36a1c77738c0e5f097a32687318d5c99578b87f1781d2a23802163726bb639f9a28f74ba3668cae3a53e8b384364d0ebfd7f12f74f32e42bd1f3a6fcad21766d47dd76bed20d448d87c63476f61df0f1bbde5f17cec026650719dc385fbf2fb0ee9433dff4de6c499ffb599618df149374df897587c590fde9f281e594a432fb25433afd13975a48d54258d15a17ce5409e7c43fc3e8e78d558388a6a2fa3ca18f483f8f1247ecfed7ecb9f32858d051abb2f65729b96192cfba801eb3625b9051bbf118a4194b16201728c36e622ddf1285e4db4396d431ad0db3c0975f7da8cc3531111d3dd48bc1efe45485d7ca08d1dd87d652606590ad225f01677202cf4afbfb42a8eaccd07a0b41d7965b93c5d9abaf87c67586cd926cd75fb9aba1a7ed3453f35da99a25663ef95c40a654a1ed8e07ac6b4965e2d6b0ff3b0cd20f004ed7e302224847c97e16038279183a4cf50c317b6bab764a524718fbb44b0bb1304a52da91d87d0daccc652c5e6087ed69c9b55e6b0c2a2e3f75f563822b2987cc4221f8d9fc7c727ad79ce2f17271a49a006c1ee718369f2d9bc44469902582708f55a0815f398f8d52361da3362c0ae3f4d63d3d16f2a8d134750e9edc7914d4a9e1b63e5272cbbeefe0af4e7b99905ac035d34b0299e7baa3d211c1203e47ba1f9c5a8bf5d50a202bfaccb38cd0d2426d69cc864bcf2efb8143cf8bcc8ba321c768d76b36fdd6eec203592da7f45d2acbc11ffd3920af8b04d4719f44f50bf294e487874ce3fb0563454623ed1a3f84564993b7ef39a2308b4332185eb8921fcca4a12c8b314eb3499e36a4faedcc79dfe6dddab129dc0009f0338cebf03471f4a3bbceaae02830eba148ce51b0d6fb9219cce949b36370f6c2e583f9f408dbf1034e2408958fc489c0b0c846145db0cc24a75583f1ecd4d18d8e5473f6b42fd3f614d21cb18df257cc662a6ba8418b0725cd9ed9e73a2ce31464ca0ec6e672bf6d4aa9556cc22ef18fb2793e20a428639a73766211524a169e837f8ba4bfef58f09a4b40fcebbd5ac375702d89bb4f99e65c315ae28710a803c5de29129c98acc64e9d35ac13ade1ec1bc554ddd92c4354684a2ad599218b623e64a6b9afa8ef7e8b10849730e1a7cbd6d68763a7f8924c40fbd7e1dbce94ebe168731f564831d0a98ca913852e05a52344158bb098fb0708a3ef3be1cf29d310aad5eaf5a15497eb3ee97d691920357cc67a24c8d8abfe74047d67764def1365307c0b8d0b65b9f63807f2df5529275a429d5cecba82c3f380f5b031f4b59484b7871d48eb56f73eb84882cac57e2cd983b4d5db528a98ad26e9fc16e152a797008ff36d48f0944971035923e198f00a4063759a100d6f70e58a5e3321b05b82e98e5d939930a317e0c67eda92ae1c3306e6a473469f631ae49b7b79653c7c04485903297cfca832c34c2936a6925b681a1c62c6fc235495476591e027823662f80aaf618d8e2501a9f7c981e9202e3b5ad3f26f70f699cf605ceb0b44f108f7c76028c259db299b032eb9fee79d88278c61468afdcc3461d3e66598c0fac03e349bd5a6887f1837c8a6608e4d7e71fe6d301d733dd0577b5c1cb0f8ea2aedc5496dcfb2ac0ab2c0ece20e66e3ad0c95fa9addc187f457e7b495e6828fd626c4a39af087963f141692db9ad77e228fc3347ffa99e2de774cfe1de01530348d7f46c336f81c146b7cdd20f84953bc0b97c80ff154928d9e2e4cbc366d33ed38567d4a2b4285f52ed4a8bcc9785dc3e5c033394a5338c677c4c04d00a3c920a97486048f7056a8fe797905c31de1bcdfb35c47ba40965f3fca687449f9f76f916620016c0543fec1cdd61d98643950bc66a21e2cb767cc05a91e0ef607057d6e2444089dadac9649ff1fd58d782aa441a9799022692cc9e24707ea14c8890858097bcf6c01b40b4acf161f8adb8c9f393535944c4755311f68c265318046c3bc85562c9a230dd0324b863d37ea35e215d2dfad597f0a8df00a40ec585a4fb05758d5c658eefcb9f621c07aa80cb3fbdf409fb82f39c70529e292a1c30ac2ea11d4e7fa326ae4adad693dc018c86b2c3a1b9963aef6b443e1fd0940f3d13d4457f265ae8f998be98539734f6f7618135ad55e33dbc080cd3563315cc19eb676ace31b7d1c0d7370e3d07bc7d93b1eb6b3f861b73cc642bc41b3b0a3c976a5a8d50e5fe26400c26b1d542476adfc88aa5d4a0fb845f5ee3a98246d110db91ec5d3e5e8eb9d08d09c8f6dec5d3958916aab51f9ca5af7ce921ae51b3e061dacbbc7757c68829ae033b0a11432fd3946188becbb3e7d03e1a2b3b33403fe479f2877101d599e7ea128c0e41d15df3ed1de34d01dc753698acf192c09e8de844a06532fa98c18487386a08e9306b587dfdb1110686f4cb93fa85452d294919077b2f4e416e45d7538c0988a8f14481ca88e160aca1e42afc41c31d2882651045da2f2644382098a1b54e1535ed375648e897f02412a99510e38b67cdcca64173c30a9c038842e7b5df7d42cba69ebbab31f8decd6eca5d8a0a1404c54d17bc91ccf33a34f02b261040ee6a736b2eeb7ffc59ca7e8ef7a6edfebf82052b18998217382b065fe8d5237d94ba4566a4778647004c5abde6d906d230030aeae0916182c8d9d6c38b8603a0c0e86a31c2d30cc7b59abc5ce22aca39c0790b36a105d58941a45abcefc914f6c2b9ac76682a190f05d2d19df4911bc464b33e37b228e9552dbb842a9730afe7ac0a989fdc09f1cd4d85894734d866a11f9598762c70a318222ec70e6a5c7cb2bb94563f262e160bf2e4006ea52b299773a14014e42ffd628c72cb0211ba0e36428684a78ac128d999ae62499f70d4899580756fd0d97a49c51ad3c020ac4434e358d8f1194ebf237f4b5c9b8a4198837206205d375ace2870c28eabcc8411df0cbcf1ab61857027ae24011818e51b691233fd2525d7e82f52b5b51e04727e6066d071aab7d51cdbb0c35d4bf7287d755992143cd7402ef459ef1ab182718e7ac35eb2021d577fdeaecd786c748f2135380093b8ad5f5b19801ee5d34776c7f416daf43bfdc2703f1ae7f4ec96595d3649d6e1fce9a8f6d1b1c3bf17ee074df723a36537b35f1ba83d26648a71f3b983c451595964533b0d7e18d078d0bbac2dd42b3e0e18c9991a55d777e2a934098b2d63291cab3b15f6887461881ed966b56484970e4a1d484a26c48be5ff300798aa4636ea3e724c99850d67079ae3955e5a034479d1bb8b12d267d261e28ab11a03b0d0f5e006fec2e19e9a3c233eecbc7b5e9946e070e5a4110625620d3f4bca6793ab1debad99427746b3fea4d1fe0827e1a89ac0bc91a5ec7eae62b6bc0b110e2891695c57ee4c24c20217775a232eac8b8f3ce8deea6c507eb300ae81b2d5ae3b7e45c26d9b3a80fe5d92386f6235981307ed12e82777acea43f126208e8d0752b8d48cb59b32de1914e770d213ab6195df1d2f5d335c5b74d036de6e97c24e96a3ecbe11bde55fd04c4edbbe5bf5165af71f1a32e9136322bd2d924af23c4f067e60b6726be893a6f54b21f94ac675e5427dd6c87942cacf342c3b4afa4c554ec6e1319986c78a99fae293de0221781193ab2d381115deb94bbd0c4c1f37099a3ed90d9eea1baa76cddb683ca330f14562932b4aeb78b8f96deadee9025375176b906f8ff1da10ac3e02b200b63f5604fb03e460b589d86bae6a105ee0da407a1f410a409e6baedec15644ac810c0a7d22d1d6202ca9c00c806b7f7405e91760d5f1e1ff42fe6e6267f2441046ae3f9d1f3d024e631ce56da56c9ff58f4205b48e07634ae2c1a67ae30bf733f334e93940aa0e100f63e0bffbe9306074bf94590ef0619702b2fe819f7012b2ed085ac053927a2afe39d61c4979073d9bb8264e20870f148558cbe25b41d18aa066af9fa47de645cfb8a85d1ddd8000a2bc78845cf67f52b971937dcad15d311dc58d9ad9a4a472127831bd11e9cd6264f4053eca43eb64c490a39ceb1b483f3186b39ea10dc4758d90fecf761d55a56ebf14150f1f1c49ec315657ecf4e4fe7e6d8ad340ad4a5adefda4d0fad043c7fea7a4b7e31d36bd4b38219aae3f6a8819d586599e541531b2b10d84d2a8ddc6ff07e9ab8bcc9f9cb28a18bd52e4e133c99d066a725cdc945fcbc1b613ba4e904dec3f77a9c1e14af4dc9b92b3b30186d49f41588110d523598134a5637273a1585e6b8adc8e7e75c38c65b475c200e0e71548ac635103c55745c43f85db36723d0feb2be492f0668be19e3e94057c6e5b2d9720244ff24a77eee702604c22e355b411d4b9789557fff6cd422e7bc437a72879d5af738526ec2eeed73bcee65a3416851f9db82346a6820b153ef0d0191e4cb900148607baaace510dc32ddd51e61b33aa429b034a1c6a27c77c8c98a13c8e9be11a0fbae569e0414003c6e325e3478c67fa15715dd5388ce71d610842cac1b58964d672ad3adfb17bceef850cc5c0bed38bffed251654b90c82092e277e24fb92d6b13cf972e70043681bf1263bf66a12d971e770dbe66e14c5ced5a73ad6d9734da827fc27463be3881e8eb426d785ae3d7b633c31500eb123f7ff05daeffe0be1a1cd0b924edd7d5b01de595ac2384b67766508fbad218052bd2188e4b9e0e01589306f580e3995ad005828832a0cc7a4e7eb72d5d267a264f297718a74af5ae483cb51c3d285fdf1672abde3d2f94df017a2e834dd8708a57887bec2e7596edb0e4acf2709fa0b426135a957aebbb77cc906b1a5cc2c12504e4aa6489555e52d53eb6490f9e41f1ab7c96b8b6b1c46b6c0514ea726608622a792987adb63ddfd9d65ea59abacd2165a90e685cf0fd9270bd97d8e1ad195ca194343d383f6177e11316ec358e792a533707e33b29d9202989df91439ce9656e5afcdbaa1085153b10db5384c581c7ee638b71f137904a97101d7bfe1e8c1cac137fa63becaaeebc662c8c3e566c8e6ca4aed221f5679882604e578c9194c3e886c74ccb1db27d5b916f4284b8d0771f9b1ef5572d0ffcd93177bbcb110fe835a8b2c2b2e8680ee906a0e8f5ef39e65a60085b00d1a24d358add36e5d36951204f1b6270db209772baf204767f229b8eb2da2e38c05bdd2e8148e40124cea55e63edd8260840b845f7cc704a8029cd9293e4abd7fd194e47cffc2b2824bcd9efc8e92fce5be1c1f86e1332b7dc8d9f2b577e948fbed7eead6ad40a68059910c826cb36f0689c49478722fffa9f13111c4bb8fca06b76c377fb1c5179ec9c99dcd6fa7b33b879503dbba82b7c640643986471083d1ebd1eee6e8a157bab79090dfacac0e9c4e6b8921872e630b1dbb4ab6b156afbf6410ad52e441a59d238bdddda8906763efabffbb4ad1e6c45207d9acae7e77eaaa34544ce0ed996f60d6e173113075d0efd6cd5777dd03dcc079d078f87d4d7d23472db376fdc3b0a9019f8065c37bfa91f6b0a289443fa067564ae5fa510cbed43a2f3697974b686b44d277afa7e85222d25552462479687c7817f3ef7e7c4e8b855b6a287e52008dc3921589d701e7b3be04107c652fdf9291eab1f56e545767beba0f370ffab4c7d877c2f602626b8dede9edd5338e398bcd69b394f50c7507b63c18398c22a636a0157cf3d5afa09ca78d9ee8db336fad2a0562d63d144919f9f110cd263ad68c0da86133d43daab498fb9a8ae4a74e393da0de5b6a6f6535d51fbad5d63515fe42e74e864a9ae3d5fa713e695b24467650d35c9fdf888b5f815fcc14ac021d22384be16025a5143d1181ee92896550e0bf09d829df2ce4963b702ca4e09608f3aace12fd7abf659922d6ecc883bb6b366ab36e8d94f04fc4decb655f3226f3bd89db65c45a47f5a440588ecd5396d27344fffb1f05700b13c7fd58b91e16c0609ee7f95ef28a8e3b8bc1552847ad1429864eb00254cb136250053bb2224a431fb9351e57a133f37b23ebc24976a91f76fe9eb25a08dba55ee7384704898be99b32f67631b0503addbdc8e2fd459e5867e542d091e2aac13a2c6218d985d2169ec95b233547b8c2cc7fe1ea5118cac01a255be308448a5e2e8f7074d974c8bef9b976bd24cef301a2261680172d11226f24ddf5637e15b07d6648067528b815f6b33caf95130c8f795d26cf6fee7a2db284df9b4d789fdf12aada71e10068dfd2b7b63814cec874a5a266301799de3a320e0cb8c3cb81ce36e7e489f18de94fe2960b380beaf5d330cb7b5f7f7cc3db8833b865810693920f917adcc09980b2a116a24f50c3bf913e65c77736e6ab32b3f6f4baa5e9bd112191e19b30cb998077f9e9a77dcec806a104237249589f5392deafaa3a4ebce497513e5225c8d66b71680c4f526d0c9828298e0f41c5c174a15d9f9fee66e6bb930ae5c91728765bd84ba0e5e9e1be25829eef9a36d696712e63a5357317db17e990e52ca70364c8585945caa7227173f5e4bbc33b3dba5e2eb211047ba0cec75224259dd4dca24965c40010622c9fb5034b0b1a5bdc9716e1b2420a522943e42068cb02ca20d3e7e4971735a3a181cd9364154e6af77736b15f1681c1150b14ba95c857903ea6dd87720f3cf6e620e495b22489320b60ee1d0688c2ef3f39a24e676af4a92c2cc1fb3c5b7aa78379360fdb51c93938ea839d373e835271d53b5998a3eb600ec6f7d6b1c474d9c9bc15dd4db183211555b604f7ace0a85f8dc55a24d208f94d171609300e0368a3e8458b17d9aa9a39c327532ba76c6561000c571cf6d68a73974bfe0d4199e867f864cb43f01752ff8bed86bdeb8937332cc52273de3e1e1054b878d7fa7ea151c2a02a0cf00c806db2402d275382f9c26d51cd6da0bbc290acada170d872883b4875f2127809a56859947b4eada1b2188fba4c276c93d12c0a4b3f44b24db76afc7ca35c60bda35480515e977ec7de37df516abe4231eca9603545e74dc39261d6a530b94433cf8d22d016d5d50ce180c4e5164036997a593adda6b26726e027e7f8bf44355eb76f70b5f645ad3386846843fde6a69adc24d8e0302a4abc4e1997f2b7a8fc86aaf6e567e2d0d4ee936e876d2ffa93ee010a8b2af5890e58c9a39d70e0432bc534d296323d717864c4c8fb6ef4c80d063861e2249dc1747330f7f5319a6ac6f7d8ae695ebe3addfd88096de50a3bb5054854d6dac7f532f8f64f6204c0a28e3dc7787cf316535e747a34f288d47750882b1a009cb7a6eb624a7556d7f089b04448979cc76d229d131ce8ef25271577c883a28745aecf7bead07c92c8ab2f75ed72fd11f7d00ec30fd312a6b205c193219ff6bc565d7c57117c4e83073aca4be9a2d804f9291d6f9c90550cf1a60da9e98d4dce340ffae0568b50131569fde0397ace46f158186913c954521a4b37deb7030d5882e03a9e75a13229282b4b6472a84f6ae2a7edf4938772196820e0f204b8b902c9ab3b5c48f850424e33d602bc827057c126ce6492fb38ed28e985de7a278ef266b832e7869ee57172b1288423454122d35aba480d0005be86b61f0582cff7bdefdeeba993dd4c33d1e173ab96ea56bd6f3df8d7f7581277f97abe351db6ee03bc5c549a63de082cb7272d2dffb0c35e6b16977ffc3c2dc29f1c272e7b2f0c72b4fc6dfbd315bf7e6b1e50ed52898e2642201bc0e5fdc63e2a954ce6ce0c1d3bab76b254f3682ac9ab565d7c4e039176f3d8c876c4ab105a4bd3f21cb9dd01a3ac3714a8f5c91f5bf40b2ecc091459061a1fb5fe13ba0d3883a79086fe6b4049526232529a7a81e7cfe8e81b2f3aa2e20efdb8f10947b65c1e3a0deac1a0cc36d0a40448202fb290fcb96784893ef65e9152448262a76d804f2126649325986ac671bbfbd91e6082cc72dd64c3723aefdab42732dc8e61d664ac7bef5b5dc3013f49672bfc641c228dc48ee0759f195a90a147cc71df5af853c26e8fba1b6a4bb78b245ab9e00f78415ddf2e2415da36385b415be47f6c601dd8e53166aa595c9a5833d2e075cea60652da75ed5037458bc2e105d053ff0697b7e5d4efe3ea25c8d2f6988aaec1423e832136f8ccd54e6b3cab455d9db684b5e3388bd191fa73624fff3a19af5c5d1090335245820aa1981ae2204c5f99ed25abf00291607ed0ae6f0d2aca33449e02546db22be7931304afc330d5e99221ca2bf60b952718d72c3371ed58477d438aa88e955731d34974bc51e56c00f3a6ef78d25f508fbf62b76c400730f3fb90af196de12d608ebc34c37da36ea9ea11d9eea3093735974f0535d3feee47f520117a0a6d840a519486e17f09bd8cfc45ed23e3adebca185c51c79e58f0325b4d2f13a7ddbb5f05700bcebaac9c8e3ce5384280e80786151d9f857f981ff099053e4d10684e21f93ae181012320ff5dbea73e0882533084e6889ade9fcfa192541e9dde45ac47096010d4b6af16eac14529f65d1954a93ca6d77381144fd193a85f38263f73bd4b7aea1442c1223361ffc79c7453216b7b501159109c9cd8240f1794610728c6b40969bd7738b070215e67378961633944535457bad222fbe5772ff25e97b72e88f50b1840590b828b17b91bb6d38103c5b8cb6e32b93034f0310d6c4e5cfcfd78698d62d0933145fb653c926332f695a3eb04692febde8bb73a11b5dd50323b68c797e66871d21cbf1eb0992292ec64a16f473dcc5629f238a193d1812e7bb927e322d94f367d3be1190ca0071123954caeb33487908b758e7f72539e9331ee28f7fe83d5a910c81465d0163a62eab7fb88ef9132e95d5328be8d8999bde24d6b139410ec6022806ed3965adf1972ba03eb8feeb756fa4d35176952080d696b397c484dfda235ceebe47c9dafa3c053271e458b47b909bb2a4c8a9a385ea61ad0f4f8e081a542b97dfce707cbb5041ee54e74d74cdcb0d6654544db6b9a105f0a6aa083c04e6ea952202079a0cb5bf387bc47a53c6959a73d02bdca3f2a291b317181dc4657e1a3c2eae2c762fab2c9d3016d55f693a7e912bb3276a01d32871d348cd7b544cfaee101b1643c5e972ed142cd6ef68adf21fd96a78a33173f80563acb2c917bcdab413128ce77eef5bcce71a3467fab2cba9410de416be0967b39f0d5f8cdc2a80a307dd19d2e33fa795cfa94367cde8eb052112f4826820f5c5dc31e51efd539f4576dce539d01c75ccd698659bcf0595e6df59320d87577d1987ff28fd458ac5d08b0418e6cf3cc5a18adf2b31d1731da9aff1b534fe3eecc741728828225120a31b042b5233b226a20d2dd1f860c2877124d57a8b8c4a559a4f7317bdcc2cb2506c46ec9c186b1dcc2a74dbb15c32998e8fb35379e97e5ce76a58edfee135a54ec8e08b6cefbc153da31fd042e28c3aeb925dbbd1a9b28481c9eae9c6eefa35792386a4f1e9e66d5c9e6d1c89d54f120f4b784d0e8322a431f2bb9864167c930a83dee4c3423144921a90ec609db1e29dc5061254db15eb998fb5ee69c33da2fecb588ed5331e24f78751ccca014a201ef4d4ed354e56d39d3f5aed3275bde803b1a55a4feaaaf5408bab9604b735c1600a026cc82d781b7742abba86572b9d600fb905a076d2e011173fb9b8799efb31d926b06a3cc42843d64214925e8d226f82116da257e1592948907d49c32aa9221240639d1ac6a8a1a70c623e04e31ff5dc8baba5ffde5ddb8a7982f9f71008c6e7807884b1a4f1036fae5512b8f5b0884f97ac27d4fa9f9fb236d8841b1f57ef0b7cc590e1dfdadd458a47ec992b3e83bae1e91620a9d487020e9b807852ac46ffdef5e837b26e8c5d9707611157a54db953d3dc7dda3e85b2c82b5f0ceaf3bc3967440ec5af05db965c2d8985b4bbd770b3b9d6ce5da37b7e6877f59571e83616c00ad6d11c0f56ed62d40ebb2cc89299604968227a957e4b51839c7bb5d998e7882a4091fd0d4589a31953643766df105bc52bd5798dcd10ce930aa60f29f96c067fff38e315420d9ab5b27c0ad74fd1059c1a12a406e21f389a40783c842958ca9699f3eeb1a6694a67dd24f9e9b5024c5550ef04f16bd28f8fd2bb340de1819445776c17610abeddbc5aa2f00d3b508864b5c163494b336307f598e38b33e653f5e09662b79b3e59f1520b2333e41f8df46c9686db9ec076373d9847e020c414fc46e30be85e80b14b71315e4599f8b39dbcbdbafdb033554ad4a1e04526dcd1ff1373c462e9b7e81e34888ca4994838266f0eebd6245b3a736fdf24a0b681504e0c013a4c0d9750cf4c4d70e5768ee23dfc98b3ddc5584dc5c8b4f8a5eb3f9a00fa6c9c5ed61d73761e7f1ec30fae5820dcc425eb62a503a84080b988e203932f0aa76a3f3762b1cf63d7bfd353c0ac5840740772fd1701c854bcf8ba65dac159ddc330fc2c0d166eb9033f8be426d8ac3eda58df5c8e34aec6051413c418cfb168397f893dd9acdd81e49a8a3fdf3dbe2cc5d747192d3c01d0ec3e1f5da773d6dd36d786b6973348593dae1a96b5167723f7b445e6349cb6a251d59c10b38e5e762278fa5b955750cafaa546b008aa7d05b3c4a3dee203c4634a36c9bd224fb795c3bb4bfc99b23c668c0ba601f68e53e58ca8d45693a909fac84a1010d7057a06dce0b437dcb5bbdff36e1f49cd0a60721fda52aeaf83098982819734826a3dc0fc8c26145f40c06f9c67bc2071dc4ba38befdebd913a519fc386ff019beee432c75cb6143f8fbec21422f323e48c85da2a795fda5487d38cc22ebd640e12efdc822301bf90faa4532e4b84b34e11b5d5df014a45dfdf5688398d4fe1695dd6fadb5722817640237cf84e3807b1214420b013bb9079c3d1cd54de14415e8836c5a674acda5dc7ae9a334535d1ce7e9523964fc99e276e3f31257ec10e3b294ecf88551a2fd4180ee625a601315482b04dafbc1afb078b951e3d40870a8cdff619cc06da28cdd797619acbfac9c1fa4efa65afba4f7170db87635171f78c18c482fc641d5ed4cae6d9556f5de1526ad58dbf095b2afb2c66b85ca8085f2cc16902bb697c606a8daefa7ec1935a2dca24769441f4d06990eecf3412d441749f5b6546defe208afecfdd97d1dfe2f7d7e3a67b1628ab481bdf94669df5c34b00eb7c5b95d756135ad538ceca855e73dead5bd52d844fb226dbd468e57cfd76c6bae954137e6d786023b4a2b68850d6962891349a02943b017de3f85a43dae49d94e72a33ae8f9d9f0d795591c80b0a6fd85436db1478bb8e1bd664be1c6cdbf4b9e7f0158b2904b4e841a165e1ee540a7a45466720e7e5facb2054b7c5085a1b7d550a9a3d3472e78b1b679c4eb25050e6e2ab284fe57dabae6ef24d21212ca3d2b00b7640a23e629d718dd7f854c34c3336e0cda8841820056f687afca3103a9fb579fb2e5922de91732390eeb5d820d996d64aa4fd5d9090888d8218795eb6a8fceb8dfa14fefc950517a19b727f22dc552bb75d5cff603c868b4301981b49055a84b96c79ed5ef6aa6dfe804ffb47ce64665ff74a8158c3a2896d34606c1ca5c3e1d0519d07d45499010baae08ec89b59bbb99d5dee2a8cc2f87f3759b9be478d0641590202ef3a217666b1c4d9cfb43d79b6b1022d4de00752f25ba7b1e00412fe7a85aac1d6d5c259e1a4d60759e8b83d1ae43fa32879a11533f07bff8577db5e303427d32e45a9eafdaefd6b4376653a51d613f529ddc9bd9cae10a9af59ade3e4de7073111c8be6b0283240e96a4fb84c7960c21cf13af0ca75d51e6e8c6cb23b512332f816cb5fd7c8177dae3b067b56e5bc703d3bdabd937139f0b72195d32a5ec3da70590ae79db9a1a33c5a439d90543fee2baf43e0844379101727dd40d2d9b461c5153922def8d7a2aa651bb5248a1d6f8ad4864f3d2b93c80f369a37e0773a6d056760d357b9d915c24bfa83b3f3bb037de54f2d6cf1eb5a59460b3bc61c8bd8788bd3908b4cd742053592fd09528fc7340318faa1650e2d8efd3b5cbe076d3e7846b53c310ade8b044bcdb65c051523b1864e8307149163de2bacc18857634fdf8b11e40735e4545cabdab6effc5f50cde478b0e84b4a06fe6bc8b8b03cf07b31968f96c059d521d91214fb92d0dc30941578f2e782dbf1df70ed59015dae457eb440a10fd94dbcd5bdbffa0ad518b6f757b87f6822da1b106a357bcc5ff149c74b982aa156cc33bd3ef89b2d0858f48d5fe7676d20869a01aca70d69a4590cfc69a4afd9b7ec0dff1ed70dca6c028e933141532d4e63032ab3bd2da876f2c036756440ddf02a4f3956ca8d370888567495aa39f6b1ac194875497ed9d24848a8e73f5ff02abb77150b07cab7c60ff58bd0bba67a4651b5f81912ad198e697c40c91be9b037eee9170286f66545d1d3c26c9149c6177c7171e1e4e85f871d271de29b0b3c9cfe1a03a314de39e621666f7197ff463cca0a93cc6de2a8961aba4a84bbb571727712d9e321914974ea577e38049159cd710206466b45ef853f166dd7b62a91fe97601346c59ea3b9548972fe59854aaae8f15d98c145880373a61d5c9f3368680953f31011898e871ebc1e370fcc09acd086fc58842108071f6d49421ebe0b49b09a70ebe7cf8713bf803e73381882adba1bb870a7cbd1720799f75421628a2d9a2a4a16214deff7d317c47955035bb258aa913a28d1b17bf08f8c9dc76be09b4c8e966ffe5e731ade3928713a1d29498ec7bd05178014c44e31b6379525c0bc475ffcf69a5e096c5425ef72e42b3c2aaef64da2f92eee28f834c27533ed36bf9e732b3d52b19fb40775f35228f4951f0ca983b1ceaad7ae0695a11d87c6b2c50fbeaf6351f84a9b2c9f56aead35708a2cb4dd331c7c65c22d69cf78586405227532c0f6fd006630fab336ea2c71204ade1af3e632cbb3cabff71c8d6185d20509de76a15f88541c79411e331cfc9366ac4d71ebfda14e949f848c057fa96ffab21ddcf91d3cc067b242cc17d3c1f917ec2540d2de1b20216eba1ba151cd1b6a80cbff002b666b996a5d026048d1b252492700504f4c0d6b466fb94c745bd05e8f9851366015301340fcd8bc03baa04d78199ad464af0c3be7b4725aebcade9c66cdb934c045bf8d589762206d97f1fed50173f9830901653935ac59649a34183d2a7e86b926bb53c52347bcc35931a24ee5691b158a1a87711c74fc6422f47e2210352f3b7e19afcb0895e748e11496ebcb61be4a798e454706dd34e09ff23169f3793c07c30ad18c0a865305978f951e7b3da1bd53f36e13999bc5393ffad415403993f872bc65aa2b6bb887aa362258bdf3b4a55bce333457d626d7c3201c54abb0eeb2ac388cb70d3ebb056ea49f8b547f92764f6e4b21fbf51ce38a225d5f081576c2b201127b41e363c658debe69eb894d03818c368fc35df39780176d776374592babf1ffb70fa29dbca1007af2d6588f2819f2172d906719a04e31323c91dd230ab95c9ec55bf3877b40dc8d456a3d322cb6ceb664d5240060001a219c13db2736843dedd19a713367513c0d0df9132f3f542285d4b57142acd1dec6075fc873a0e9219c4a395fd71e39d2997e5adf1e9d349e996908f76715c9160cbd9b6ef6eecfd3038bc6d0271ffb040c2a520f04587283602c8f4adc70a5fc2aa72200c7a6ff640b140d4397dcbda18cff4a734463054e21b6b4ca96ff6148ccb453317fb52ffac84958bcec8a6257c907898e3a8032eff442b8b35c614b08739855c823805c936ba67e4fba52ad05a4b2a0fdf14d6723d76f3e55e3fecb440dbb35d10161b474fb5804dd3f283324dbb8144ee1fc657195407b89971a26637d6502c5d77a525a9a321cb96216ad0f4ab25b1dd56af91b8ae1044df99892569c8939bd8f9566f80a85ff230378b4a5b9d2656566577626fe866a1b42c74c4c65965656df89a44e85232efbb80bc97aa0b0453f314847706bb5fd293a4c8b61d4c71df6fc021ce4d5cbf17043314316205905b7dcf7a1340ae69a1508c8e7996113899fd6fa6e3921eb74304d30ecd2197a24ab07b6d7b305105e815c99173d30d61f140f56c3082e4f20b15c6190a657a07559182ea9745d88a5bf55e375de033ad58c04918489abd81093778719f1dcf0cdb8cd6aef6f0b99214d296d6c9ec6047bb8b4c44bc1997a2209308a888c8d40fa0eb77d1f7852a24ca00c77d70c595e47084f7658a87ded85364cf32b97814eec722380093025e6b6e5b9d2b5e7c3578f84c65ee4ca9770b947b508cc7e32cbbc27070cc2bdbbadbe91bbe650bbefdca97b050765d74e457512b4a492100e9fab67c01e2a665b21efc155a9ab1c57b7dca7741937a6738b13671955c0410e09616d74dea0d6cbe346df34c00862e61027b655add1ec70010754859af3ae648cf277191ddba1f057b74cbd62bca74a2c5e84057d0344c9e4a7fbeb1f277d94c117c1e661b51e206057e38fb6f4fec2b68a9f5f24a10f71ce9b005b00eb6dd0744c25de1fce3a9bed0f51fb99b6e20ec54d777475afb1b126cdbb5b776bc9395843ac4186c7e685cc2e9db25c9aa39cc59e645fd4332c37fc1872fa7986545ff857fe662af96c48dded9a4e4cbffd6d76e1abdd75931237aa500232f0cf2e40e22117d79195e875c22ebddca6361c8ca31b7a23ea29d446364d7d7b20462a8107f6bc9214d3872b9c85c5338b1f953efd044abf77b37dddde33bddce96b4b0d4b545e7652cf089b883ad68af46637fc6c55ff44d6799f6d5ad540a74ac0fb60493816443965f936793e028bf471ffbd7b31a26dae050a0a302b3301db4fbbc950b6d50bc6f897ec7907d8b85404e74ca477567daf013d471256be7a789e5bc5f832b27120401b251601be1be8bf7d4607773a33400be984b584bf434629b2fa17698cd3dafc0937e6a21c33b3a2ca31ce833447033c7c600c2f99e07de4dd8ed7376b3b588a09173223bd17c945872dac48839041ba368e3466810129d6a34a9f6f640f9e2b0e02d7993cdb84f9073fb248b7d94366d19eaf3319dce6fcb69c43491e3268a7093bf929aebe1c56c211d36b1c00d62cc4e4b45e397e1bbcd2a8f7a42952eb5c3ee50b09ceb54cf085d728019a7ffea0765ebf0f7564b50053e23e123c664d154ad1ec07c8ea3898ed638d8ac536b320745187557208ad6aa1d4ffcf44f2102347b0c570478d6a608e4654e70354c86fa19edf6ef51bf2e50deb5bf0f8984aca0a254a930ba36fe8cb7644bd1662cbdc9aacef623d1cdd1cf7668c12dddfe85ddd3516c89768f69e60f7b4ed384e2cfd9fbd35c20ad3c063caf63400542f080b69315961e9d911e663eceb320abed16d6df872dba9213aeb1be01606c454621cf11d35eb825e12d51f4899c92698c21dd6441a2a45c7344961142b50f5be22a34ccf9789593ab6797269d57f30c496c6ae3f4defa06ff8626ee326f59195b1649fe28be882f03db81fe4d5df599e57b2b96829ecc21694be1917b5594430c299d2fc622ed7ee77079007556f4d873703a60fd623892069ec12d9255424fe124a6312c3dbc1cd932ed6e892a2b0455a131cb5516931cfd31b901941764bbcd5d353728405b172af85fbb947f47337fc118d97dbe93377fe66a03baf7c5446c84be50c62bf03044481edcf2b154569ff6a5ce89070356175e7ea6bf41ae42b64c1a8d30a23996646cc66bfe2e8eb016e81e9547eea274235a96cd567292c2d32e1c917d7141c0b5796de555739a28507f7a464d9ef4b8483e47e43ae04c31afcc0f3bfa1f9280766cfff5f38b80ea42e7dd548551ce6a2a058a9eafbfd0b5d9c1dd64ebe985a466fd715d4808763818148c92000c4225b6ab4f5e7b8683d899bb57d71ca2836d0352b42a2bcb687eccf70fb1836afaeb4010f91ac91587e71c5c472df1cbbe953c83f4e788cfc601584f9fe5f2ec6201d964a6625f8d469ab2194fe3d98a736c54d43f19f86cf169c99ac8e899f5d316fe66a38e59c33da581a11ada393ebce4dce23a2acae3e6cb19ba41b1afa09e049a9c943c6fec1793e04f9a340ab0af8a1cc4a811279a9b0abb81b6bf1c53d3b1f928fb415720ed6d2d71dbd20fcaf3649ecebba6319534e6246958f1fe20a833d39300de1175d8e859e6182d45af37f2e9bdeed2cf4d6926a624a74cfa4957737650f2950206fbaa4f6312642a8c76d297de2b3e26e5c0148313b9ffcbc6696ef05cca373d040a2f58c151d02b48b10ff21a2a5a1d989d9e14f67b9d707811bc37f7f5c221b79e2131dd54e54b82d15832dd95256d8bda0b579a31e1a0b89618b4cd6d8a51731304da33ed80fec091123d165b480c777863660ef44becd47b7d5605cacfe9a25b2eafb1555fb7a6255b4bfee005ba97cbbf0472a6dc434e4c84239e7785a32aff7433829b7620d15c5ab6ed50c9ef10493e073f4f7aa4c0a191bd058c6e58080aafc27d10e98da5d89aeb7a0db6c7baff8c7fc3e1da59ed37e9bbee62609ad67c9de4703b045118f7abdade130aecc65e7648c9c36243938b3160b8e476617b795061d24d6b6b63d5929bf6660dc08536cabfc35582af2036bbfe5b70c03b0e5377cff188b10dd8de9cafffdaa10edad9af539c4524f6a246e41003f997cc7dd5c46c3615709303d6fab6e716545075f043b54a3683f952afa2aa93303dba405736c86f8ce1f4ab9f48bf687b21a578e65c08c7fcdf522a1d0f594f89faa7aa0e9aecce1c202e677e57e93d023fdfc6700ec994ad2ab3c2621ba607aff0b655bd7fe53f3387dd2cac774c4806001e87ab19b9cd01270c2832d47a30cd71e677643aef85cbacd360b351a154f10c5cc68c332cbe9929c2a29b1d3c817b766a53c70724cbdb0437be469332ccf09dc6aedf2d660db10a5f2ae59b04c4bb87344ce209cbec67ec955c4d973e45a9fc79aa7576e74835467ba62afce1d616da43fecc237ae1646790d7abc3c3e3692910351ea028b3a159de89420008aac7c369e732003a4bb200af0167c804004b201a2162e450f324707b426222f731787d587266dfbb4a6eb65e0bc9ec6991fb6231ced7c0c3e1af8fc39870c6574d74dd0bd90ecf2842d6928ff1d1af19653b487e5300680c69782a6dddb002ac6beb2d6df2bdd9467b4097a3035a5b18c265a6f49f8678fe606130b210b13983d8fdf5016a4827f22d6088ba4ee23ae3682929f5e4466ac3710be0242e0724ca6725e46c102823746c0ddbbe2d1bdd09519541e9966a274f9787fd184e948881f83b902a2054fcb69048f51f4cc8ee9bed3a7c0dd3624312fd3b116cedb0e986c00bd380b33b04e649160b1a0e276eb5f336f8c53f01fdb4ce4f9380d4fa0efcb5925bc5ac6dda6ee8634ad530b59d497ccfb290325cd23120716fec5303d1288b7bff3c56d9325f736f553fd5a5858cb0789cd77590d44b16c496fe5c60099bd160c1a0d67c36e6d14d87d6943ec401b70af5d1249e1d014f8cb7a909798fe2b7ce54b6cd55d1a2cda6e5fb212d4eedf9c4868e50edac57d21aa44836a880bab0ccc1460c6fc7347e9337328d5659f892895287d8ec4e5fb5df92a9ef05a8e9035f5bc6b96617955d81f8ef924cec301b12d5ab2e620e70b56a3acc0878e0b5dff7fbd90f19a49858b647e738641c03eec4fef66cd0f547d294edd440b9c39f9a26e03d705a695ebf434e0d30d6922a114b9c8ffb84ee29b6bf8feb68947cf545faa9cdc647e1ef459f7446a371343dc9ba694e1457a2a6b01b1bf42bacb7db7254360be29744237c8620759845614f7051465298d8b6113bf4d26e3fac04ef16dee04fb8a736d99734408f4d0f959e66fc2e7c0e27e0a692a3aeb889b6c46076522b86f7fd1432374b192ff9d9c183038c4956e1e9655b887261b057ea00a7c986a6deb7230b0d1034d2db80802c576b8d2724c54cbad6c732063cb3498fedaeef92b77e2780ff0a57702592f790cfa48fb143cabfce290abcaa37e42786ca1d9ef8093b8e441c02619055655b0f68266eb30d7793904faf9a3ec9d47b332df09cbf825d07c57ef40c53bfde824c87b36089d94930bad2791e62dae4cb49506839eaa7c4c19095b55fbfa059d1b2193c5dae8b19ab7518563c27b0a0730949240883770a24ec001e508783ed8696198cb742c285ba2718499cd322bdb5252c3cd61ff91c37efe7f04804088dea48566bab39f33c48dbafc3933f5b744f9e0047864b007049c7874ae0cbbcfa4ab354ebeb10195433914523685fede969b042d64327016711423a64b92e4bb715ab0b5563d7eafa5ecad0412ec99ff1b6e86d6f59dad0e05c5dd28a4dac06487f62c6eed9c73dd50ecaa384da6eac47a3f0f0e7176287a366e8ac4af2840870635c9eaf2d875cab514456afb901b6bfd16e47d735b3fd7ed31a325e23606138b7da01ae960d528328906523e8b7fe1e1ca84ee579709971503c5c64912e55f41e3b3b1f674b2c884997a9d62e3a4602c2497d86fc1d2e7811e19b3000cf40dba41f495203db4415f95fdf61903d5342fa08348d707176fbd1d708263d090700ad38831d7949a82fca66595f89107ce84c9f3fcca17ead7f199cc4d9ad06c58cc9d5d431bec56a9fbfdbf0e6ac17390bc806f19c642dd4e085a82452f75d59fd7972787953548ad8b0632d9494618d4578b83f547796c71d151496173f698964efdfe150347a93a22c76ea8391df92f9d97960a3bd7563146d4fe32cabe2b734868d3da320d56cee91151a21966a8be4978b89ef33275223ddef3c6a0c94f7400faf363ebb026a7002030527b16f915f313a08b8bb50c6fa9cf91a255012dcb3ac246c101967119c540402b67bddb453e2c382cd0a919e62bf472f61ab340b217ec7cf744f6195c36f6707fcc2e21f5c3f1617392a8b3c61b9ca93bef1913ad701859e1eb0059944263cd50dfb3b3009627885de3b0d3f58224126ffafed2e7f2306b741438cd34fba5e2f4c69f5c1e476e928d423c96ddeee58c4e5d8cb75df6221e18ff74748076a2c0d478c61799a5ed54af5b6e8f02ed874ab3e7ee9deb99f146c8c5dd95922a9020d5eadabd109cbdc3868b704a741c094ba29b26d8956f59aabfef5c8250d6c658d1658f7653f33bce1b8b96032a6b54da5e8973ba6a1d3ad38b1d45b69ee31bfffee1e99a01caadd2c4b8ab90bbe525e3627ae5f5473a4e7f9cafbd15d14d6f208a2b985cfda265b52164ccf0ec2aa377966fcd0d7b9b7b74893ff5731f00b1ba2b343a9d4a241928839ab9443e6b15b36643eac23a48587f0a3f7fdb24e7c91e4c23758cc3135dbcea5903b466bbc5e383c5da2fef642023095eb58711363ca7d4470db14fa460ad23288dfef13f1be0aad70190b7a888b8f23f914d8c483430ce62b809713d35278ec01f8f3f6d912470fef734a8d5dcf0f491809891591d86285c873514c95928628d282dd1162abb48af43c67496778a2a3cdf7817df4beeea2f40c7a877eada301fa68cfe3d9c83ec47a9f1b03487989a6858c502fba16c74d0f79604fceb06e2826aa12b82a9cfd8d2ff5d99073e82fc9de61b03baf40bda27d971ef6b17569b7faf9faa899873c4ed9c14c7bd1233f1ab0d6fe2c3bd8a06fe7586c1a2860a4af26df51ae04b4dfabbef8a764e2578500b9614adbe85abd8b581c1cfdb2a0d876efbe13061ec36e80a9c549df9163c5aaf32626f954454f9b02fc128a739299d60d0f38d0f7de4a050925fc8316ff87358c9b3682a0a7fc7a6ff3b660f33ac070b29302eff6e5ed3c3f1b490852c45327cff0da4d8042d140cf7405dd0de96f0e965e17876ff65d68ffdd0fba289dfefb272b5f7e211eb9bf86418244cadb985f33e084fcb2453ff17d4ed85991902f4012659dad82208d4fb5cc4217e911d2db05f41600f6a9049b42d2842bfd8694bce53b5d89b1d08fa2b7b7542829c1ae5ca31c19c21c54707408d04dd7cb986bba3ef0ff403a4411336a11fcbe0dffb7144299f02a3faac418b434d706a46f8bf2fb208ab48c9a1131716cbd9acdf9b351af72f27fd6d155daf84667d6192d8fa6e04e530f5615a93aed802bd13d54da94a7e860799451d9bd29517ebbd1e759e284e8dc54b719adb2ba45b07d099107e8708d13d9a9fe19678e55851d1c67efca5782a2e298df0d21967da2f80971672ad8aa50617f938a1a4752cdb1c2f2fe64780f899bc2f4d99618ab1a029bd09248453f511f4b6b96f202ff0c95d32940f53dcfd0fd1349f28a65a46e3cf6ebe6e141c069790e9f6913ae2e22faa05ea48f01e8851855dbb4acea7afe624ae8ad45a25e280f0ef1b3d7bc3952cdf814e6c0484394d998c7d676c74b3741230f5575d1c7a9ed2f5277bf6337bcbf47b9c07398a5f183827c2854f1ec574f647a2176a6f7a16ee649638cc0d9fa66cb2499c9ee28a96fa47cdcc69f208439d690c57401e141226a838601323da6c53705ada4565db1e8bfc70072b7b447b7544d3df6ff8082804b0acbe9f205facfe2a6786a1dc3bbc6e3ca920b9217d99be438d6bdf4b132960f5e0714c12c4e72034796c56e7e5f691942cd4171346d1842da8fc1c2363cc6f92620a33bf9714cd77aacca782ccd732d8405096e255ef7c2433b882d3ba245387bf7bae7aa5678b33cf2e1168e8a61ea32ee5fe9a4ddc597853b100d463e97721a1aba4e737bf1c6e40bb953504cd7849ad5993fcf5bcd1a4a5e58c1890fc181ca4e51db5a13ec1572f577bfc8250e7dd00d276929cdc76ffce383dd08916018a18b444ff7527109fa000956fdfb59126188f6d783c69575c13fdd3ad808a6099cb7d4e26bbb535bc9a2791c859cc65eeb179b62aacffe17954564bb9e2b4e2773035a149572c24e9b96a1d459eb2e5827d6a8efa36c440226de7c79a865c6dff2d1784766ee5c1126b3abea227d17bbac24ab878db87925fbb502d8d8b785935f9be7a84663cd92600798004142dcbd56d6532d51b155d1dda5f36c5f1a4d4dab70d6f91abd333d3bdda2ca98ff788b78ff6ffbfeb278e49b00413885e0dceb2ff24bf2ce83a59c41e661a692b972b8f42973b60b69d80cfeb4fedd6295e5f0f2d804b7d4758780e7065e2a781f0df070a339e3e419bd81ccefaa0483ca161101004a1ffdef7e7ffb398bd513444d43fae53e3ff9fa5217512ddb63c5d54ee5f7112f26d977a046a2fc0818ab3726041441448845c6d30ae4e756b8ef573d4865efa31903ca6cda7a2ec79ee7c1f7c36efce10c6dd2b1b8d2f1f778adc0ca3c96af810cb6b5662fba8b44a4bb9e3297842d6ae1d85aa7eca1e58f6e0595fdf1aef1624344a140f4a42ed72ffbcc1ee374fd9286a4e223141fede03cbd3d2a2b7f232199d4e469c6b5eaca09122f392500b3c0ee49a2ddaca2c81911e6b39f44d5c99d26677b05277240c85da878e353f8b08ea676955c47d17684e3477c102bbee1bd1561e898930a0ad9947c411c5a1114a2228ca9bc6374b03ab4c92dc8f815a44cb115abbd965ec3fd05efab71ea943ea9d2b61a2741905edcf9e84ee1ac53cf334207f4c6fa10db9d8157080d34a93474aba53bfef0b243b708c801a465a306e870ebb1ee5a96854474cb77340f916d549f357e0f11d59e23514caf004c0456ec829f09af77a16b4e6999ec2024236423d22d618e0fbaad6f7a44e72913abcd961258b6cf59682aaf230b9f051bf0eb3650885ec6d18456ed30eeaeab5e3f90176605fc330c100f2622230ec0af097d1aaa6330f7336a344900df781ddea015077042d8267fafc6193759b6cbfeea1eb76dbf83b800fde0ba67b79b612d41c8ad239b68b1085a69134825d37ebd3cb60a5d6605589b75e53d4fb24e90fd2b9a0cec46c0586865f3c2a60afa089433b1cc0569a4e2bb38cf557a4ce0140a42f27b68bc2be9ff745289e2ed822c8cd9934ea240b5dbb5fe40279bb7094e18cb177ac99f9b9f39f807c1f78c7e1ce233e382e0a9cccb23d8e793535ddf1c915806b659ceb0c1762648b78d924c91ff6aa32b7b353066c503cb2c60d8258c2f5f1f88669d8feb4e9b6153af989d93c60be57ce8d731bc4bec2d9c2a3037941721739414eba41099a7bc59e7ea806f3b25d3cafe41a387ef52923f384ffee4cc5d37d661a54e59197e80b87a409728c3c3fd13643b08603347254b01e2aacecf1a0df842e261c4e41502f468eaf43893ed4e7786a2a509dc331e23a8d923ced72de56b3211f37669b592ef384fdfa05257ae8d0d34955515798d112a2c9fa521a1f1dce741421bf0da202da2a2ab95ac553f3928d5ed5690cab6f2e1d476a11c17f258b54fec770aa6cd6aee77aae170142abb344ba59c0bfb0716431c70c3db8fe7fda92949b9f74084a2cc0cfc531c841c66a441676936dbd6899471e02c262f9dc42a9e9d008d9df8713c9a3ef5d1f30947f01f326e3d89f93c5867b9b7b9342c8c422552a88cc1cf6631ee0ba8f5fceb3d3d14593e9079e236f039659ae341fc2cc391ad3b2ce769153fa679a4870bc1b76ff70a3b6e9e93940f161549bcbe16ce4faed421fa2bd3ac6daedc491bce94f59f0842b8a601ef57798fe830b11f15be3f124bc6a0c2786e6bdc003cdebc56b8421c468205c6a3c45aa589d78817facd99e116dd9884e1335c31e1feeae2b0cb820c17fdaedd2a992142180284d379758f669c297eef0cf5b8a13895b712014308331518f9c2c7ce9e1f2eed15d386ceea0ecca26ab3596845c219ff7bb27f779daa4620072412ea149b6be5eaf5f9eb6ac9d3662f8f90b6166d7626af523131d97dae10fa11f8b406fc9004702a9b4f864b71ba89ca89b3c262f98dd761430310afbc85838555b9180b005e7a214832c2a4da70c119d952695ea9f694a52ea1eccdabc431f26142e00e02926884053746c1685ffa72796f5300ca2db0c68b20ba1c9e3dbafa35d2d65dd5e10a7fa37d97ce920d106ab09d025f98fb0f6573a0eaea485f05f322664b032183a1c34c3e3d195e25d5d9ea5a142ade674c71fad619ce182b1d24e4e2a463f42d6772f002b8012dda0de4d9a3db33ee073a7d7dc3306686577006dc12a0573020ecee8ab3f5542dd42d4f185da4535d6de678baf729841b571f8144995477ae85d81cf8a7a303f6500ecfec80addf79983aaa64b092182f6682626cd46ce3c854c4713fe1c25177382b43fbed265057e8c1b2d989ea99f024c15508c04d8236d4efdcd70be2506abe9cbdf74f88444453e84d4f88dea8e407322021d4d0fabd00bcb95104aa0a53d80a81f71f981566b304ea7e2a3cebcb59f6b43f34a3c99c57ce888e69d2a599773174f77ae1f5fdef9f9f4a30af98831becbd9129177d23a2d041663e5b7ae2954a40e024ec8dfb4a55b074f446541b08db85e08fceae74c1796852a5700cd39e1cbd470f62f864561b3030d6ef843ed4fb343b7c84b38c9b77ed4d24d128afeda76f0a2fbf7c48b1f706c8d6b6f0341ddf264a3e318fd0c4a97b822eebd7ef37b3c06ebe774d702c85f353a14fb1135fc39bc8a0dc30bc5488eb87f4611b3cf055306a50c5236a738ca1d37de6458b57a835f6281b41429b67ecd444a70f7fcb6a51dc0a4b1eec4ac2efcc4910cffeadbb2401b83c813787c65e07967004cc9d25756d2f67613a7588a6b56a3cce27b1fc44fc46e14b8b79ac0a5b14474d127d6fca9d6626d12a89056a4a95094a91352414ebe7404b9266e0382427c73a6bc6909d8f76a505f3d68f8cc5c070d8b8e7c13613492d87f2f74dae55e8214c952ebfa3ae111c9a1688e09a2a3dd9344009d5bd9d76dd800dbc4906d205a82a3cfd1be42b8d248ab372a0c62b3c1d5f295691cc5a7ded919d7fceb45737ed0376a27531f0be85650fed49417b08a9a01da6d1118754180213c772f4248ef1a52be63ee8030080ca8aa0afeeeebdf904bc2697b6283344bfac7a4332ea99d7e70b354527cc518f993223304407518ec9c4abf50a09c30f57f86c9c35ddf082a6b491e99baba6773e6532c81c644ca7e71c9ed04108a0e51661bc82aa8f6bedb74fb58ff93618196b63357397e8268cdc108293984506d2f03816d9fb737b6e9f29951a2a86bcccd7c134c5b0376d9b9664d22f67540366ba328958af4ab0f1d2dc64c98cffb1dcfc31ccd360b85f18bfb9c46a0aa438219efbf280d4f0fdb8d45d41b0706cfd03224b59ed5deaf902939f6bd4effaf8e1ee752b5e596b8a3115d409329291c7f7a88a072a257765313bb2506ad1e595ab1b71f6119883733bc552715348a503eb98db44877edbe5abbe5a4acd82adf98b8048da847b9a85e60a3b0a0a3f38f30ef57f1637d32a01a7febf9d15019fe2cae3abbc3babd158d347d2e87ae7abe90a400a60d39d8c7632bbfab419d512cf790a6d54a869735854fb4aea99e45139936386f818c4852e8402b480a38175e8755e170a65064ebe4d88f73be2935e35090f8ffa9c2553aa18915a4bae2a1aa68c4a7a54186468d16bcca297f73674fe1ca7b4e7952ea32d7e76dfc589ac500542f3ceafadaa66683866ba3bacb279660ce5cc0aaa4c9074101d0ef9c40249536dfa5037e52d819879337048241d5fc3830d54184179e6167cf99743a40e526cb4e3632190f0785cf491814669e70979ff221e2c7c024cd55ce030204170c146459290f5f029707a3fdd10bbd61d6f4b8a5584c9ac7b434f1a5da182718012a677bd2b5e6febd20b60db97409ac855b323fa64099264e4df7b91c6ce0e1d0dd9e9e73108ff151e49ade3c067254c877db938da94fbd0b3eef74e72e48e66b3010e5f8fecd5c6121112acc149d884718dd14d749f6e95624234105baeac9c981f7bac8a9eba3a95d98d6958a65a02df123dbd191ff0b6f0eb390d223be8e61f97cefa5ba5420afd5aed325ab171313833c6ad504eb4b2385df8fdba298449457c2d300217ed96c79169fe0fb9fe39c2dc90393999a391b9a85676f40355d9a0fff75f3bf10e04aede125d85d5c9e41fa13c848a4dc926cda090b7321eb8700ab1992f821b7207b07b4063acc0afb5534832cf684ba6fb26e68dbef356dac1560f262f3cef8a7effde76ff044c1c7af468a576ff003c9f6a66634207cdea92dd17c1130ddaee05631ddaa083f7231c8d11c318c6b496b30c0dd225c55a8501b3b934a137cd10a3abbc5a0480470e8f8e1d69f26a2d925cf062fb43e9b7788e5076667320835592b92ada50cbbbc2f55207a26ccacd2421491e9b16728851b98586367524568f9c700fb36a09b2d2c42b7d1c22e9ec3ca13f2c8440719607ac87605f7ab96131c812e55416d3897a85b8315a960ba5e5fb8cc33eda4f83fa485151a2a2ee9752235ec63d8ea05567220e06d0ecdda5707b4e8ba4c44c3666724b23a921694e755647372bbf7d5dc21593b5d01312e5eecac924bd5690162fff09438a5a685b6d527b7894ceb982cbb6820855d75524aba41eefbd9e9be93ee37bf69b0ca70a2dba20865ad5caefab7b79913b7664cbe082bd51d43902863acb4418dd829858dd9bbaa76a6f35103bd6206eb4228e957116175a59a3595576bb4ff3a82fbcb581ac7e804812eca35a8b0c5fc1aa9edd9d3a6d79a6c39eb0aa7b48611204946a76bc1bd32b5abe76b532aa948852f2528328888c6e89ea226d4c3f04077715d614a7bc6652c397a82e7d12dd9f6d3141981ab3f70f4a1a1dc8e4e882ec74e068b3d91e0bc690412f0577283d13e13a9ac8cc15565c0cc0c34dd26a6a0bab0da106c88774a23c995ab4ee63175cadc5901e57d7ac14b89ef6105c7bebb754aa86b5d78a741c94a5d8ca6d415b1c15ae8f895d88f44620cfef374d4bf80ddd81740c6ea3f187397901f3a08b06d571c3896ab97cb8c3c28304a4298b6575968dfddffa0a21da5e6f119d3a6a506a525a13530bbda51fb79960e25fa5d93f34a5e887186697f12e31c5ff2a8861736f4a19508f0f572376ff597692be208dea7a394d1e692805ff359b9ebd9ff47a306895342628dc934d42fb8c866242c604c95e3650da3ab8e4de184b3799d8040692ba3192db4ceca159f33b74a7401e8592b9312bb536b00e162db975aad2ebc982cd8be3c6411b9ee1d4bbf05e14720ca07d0d7ee2655ed3b67dc0fe50405f5ba1c35abe73a9de3a6eea7c8cc63ac3bf5b959e52760d4a48093e4b6f4c02c8de7b34ddcb446611bfcb0e2127a78c5c5b18c6b008c884463870589a68670e18079a4a92eb52b7e10774a113309d4c848dc972eec420dd756d1c9e1ffc9780dbba8e6c8059ba0ef0428b036bc19a3108763ce887c92fe0ed9310440e33d7b70412b42ea4045f5961985084e57721b6d6d243dbb1deed7a0630ce8d60c1636eebed4f7e7c35e05872237f12681d83982e15d0c280bf4b4b3d1ed99e1d672ea98f845bdd53443a618e5fc3299a93298bc1925370e391c296b827d53eedab71164bed8569cbdff6e4297b3fec6e79a838b85feae8f29a388aa2a57e4d6c8d5cce216fc58afa3b9510e37cf90664d3fd6c5819d05245e3b4f314f4c57c1152f58b0028dcd94735805dc0545cd92a774bf3625ec1ef0336ebbff7e3bc0634e6a426322c422385ffc40277a306e63c5b9d79ccc105627e09eb7b7f0770253c33335859d1e334642151d4842280ee0be90b80060c57eb1078a11eb5a3885ed8cfe5e61d3e06d7c9435470b6710ce5b5f51b9fce77ab2b81d5d444c5d55f13c13f182d052e57c49ec0fe26abc28e34413fa5b52de6b0e2102872e208c2516ab542f8730a7326310f760ffbd5ec955868d34e53eee8f5028053189147a8195c3a9c375184f9b6b581fd9db12d7491b9822b276f9a17ab26a60fc2e64e9853b2e660be5505ad1de251e850b06fdabaf337d369f5a0a26b99586650c2023e25b81608e089aa251569723e60ae8dccd0c5649cc4736fe492e1e9ac6c6a45dcee60e0365bb5c9e1ae91fc287700580762c576f40cadd247931819a184f5ff6b1c87e8da8cb2637b9f3bc31be08e55688489dced88bdfe50a7644a2c25e8328aefcc5915edcc43dac8e8cc40a4d731c4a86955e78a66257d07b725151588add0357400929ae7580abfe21ca346cf0f89c40f053134167ce607f1dc2108b7793d173edfbd92bef399939624611c7b6b066c44a97f9f78c9cdca2f071eb48b92dfab8b0180167bb6f8174bc0ee6f512530be3cdda48c91174721d3df6ecbe6232998c6055e50e6e8ab8f447fdb4ef584704aaadecdcd9802ed3fc05d2dfe72064c44e8f436f163aa0784b13f684191290a3f4feb6e0ad03e9644cecfdd02b9965c22cf88d9173bdb5021e92332fe43662c5c1b2a5925b12e073e71449553ddf33bc758bd7ab4bc995b73cbc21e6c43902ef614194f4e70d8a20a95a1e42431a88ca4a6dde48cf604a916a51c20427f83e293f6a5254a12390d3177b68db2c4d90f771397a6ec7ed739736983ba3ecf7e36d9807b9177586f2518df9c012a3c96d2c5b2a15094a1736e921c0afdcc994b9c5cac38fc659ed3d52480a0e0080a6d0756be99dc2d142ba469ea6bf79bdddcc380ca0ae023d14b129bb112cf70e6b5594ea7a7e124db11de84530733e9b0658ea208a4f8a66aad7f7d95b7ec8e7e8c451deea9cca9b1a7e5c59c4440a7bc38a80eace75290be551e8d9bcb46082c4f9fcffdd1828f8d5f15b8e7e33b739db059ddc3f8eb47ce6578977c32a26ed15ac36bf3a312b1c7f01b1743b62030deca688aa2ebb89a6cd5380302886be5b4cd32a857301573ad7c0ae3997240d000719196dce1613db1d9d7b029e2e9977a044bd075412c46ed186e31492bed811ffcded0a9ed46564c817679c41248f963659e494ecd0fa706ed26b7cf39c48f91fe310da308c7a0d03ee042759e6f66d1fa563b470e3827cd03db70c022b916f41f02f3ef2d342ae089e21b8a08ea709a5dcb76d0136aee3ddae409023df17df968b750184d65c2a5a8bca699d9e9e4e85ba8530685524b556e57d67eb32f5398aa0fe680f0f5f3f66c64b4a826c5d9e6550c2c1e6ed64280e2df76470e5166a8cfa00f0cd10f52f7f8bad5595bb480eb8e0496cecb307346c6a9f4616c6d576377f3039cc7a500f6e7eadc419e8dee6090012a37dc299f11951350cb4caeb99f6262e852c8ce4967afa3775fd9a82c3249fa62ceb6c3e28c3ebeada300067b7a7717a485476efccdc50f6a41911a7960e8977416b6212a0b8d0b5e178bb4b044ea790bdf6cb8d8cc97029495553af0d223121b1254a619fcf0f4dd5ab6ea7a6186a6a9246c12c97219a6d7710d4f8de8caccde2c4fbc476309cb76dda1c5fa3550e9aa0140fe638b38c67b6a0a8fd7d3b470afefebc2e942c34dad15e3ed69ee86791b561a8b01da607bf3e3770cdfdb56605ab48ace30a80b34a960e01eb9077f723e41a73ed3b18b7902dee1e40daf5dac6909f0864b8145cc2d29a15073714150d7ec78e039d25ba7372f33b42994f5bf735211a1bdb47140441175bb1bec534c5467b107f5d557173029db931cf258119177c501e9118af6faeb90c3ce83aad14ed05197babd647fcde90cd891a23d448352f18c98c54ec5e30534bec8aafc6c5ae74e7c2dde5b74046a54ee3308274c2d1de762e01f535f99eb7d0efd905cc0ca5fe2b2e2c674c2c321489faac08fece7a9aec913fd457440029aa31131d87965c66c0e02f796e6f9956bcfc3c3d190e9f2cea5092d02bb67ffba6c6701a24ac8ef9d4563f9a7f4cf2fe0acdfc936437f008ba1cd3d8a5d8599426428ddd5c651b805b55d775d553a3a0cbec850e4668c29a1a76cfccc377e5af4afce2a55238585c66cd3aaba3c064edacba5f5cb5130bce3778d72dec1e23f60819c35d8010e793e4e8d7fabf15ee5c094382a5cac104d24213141c01ede7c0ba77f752674097c639c871640d0dfe18a3169567741a9b8ce007425ba7578991c27ff2700efd1903551b356f7544af4addee4c68a03950774118183e61469b43f48f8ae6d71b4e130aec447979efc986e04ccc57fb0df5e4033ca9aab9204edd238d75a9827f1ef3e0d11ef7ed821792e9fc865c004a5098822b3b5fb434365af297ff6bf51876013dd58545a2c3f0a2862656c2788e4e0dad50b6f98c102fa89b4d11da86d264a4a27398ca3e06cbc9dc33cfd7cc37cf52a451c16b5da9b9a15fb918bc375799e5735b348707003023b496bc382ba84c88398e5c32c1db09a024edf85b32adb17e2f4287491321500247410a014ca0f4f7f2774ed2dbd265d8311cea373ce9b92d28128e63f8576286b2f180cca0d8e7270f4d6af5d4a7b13ef084cf23077f1975f00e219fe9af249094d9b01d971c70b22253ff8d2cccf7f628380d52eff77697c559d458cae8dcce54661b897a78de283aface695573c49b36d38315879eaa55ad12399d7db6f06209853f0d42bbeb69a4f5039e409853c4a3a8ce3c00db2aa2007697ebc3014d34faf41473cad89a922d1c4f64941a3acb35900a5cf61032089f4d1a4bccef04ab86c2d63463645436c56bffa146f2860df18f71c18f6207ee872a647b604301262e5ceae00122b6eb48fce20a35e064a6d585f7fa1d1a14595c890f130d538739b9a1087468f9ebbb7d032b39e9c78526e4c6546d687c6317673d6e0da07126ff136dc174d351dc36928ec7275da8b476ec3e0bcf8a5c81d269e4345f736a4a99683d98364cbc0e6f022798feba095611c65f8f0a863a654a8f50403cf166e246ef4f4238d5d1bf1268fb77d3da0dcf01130f2ee8ba4ee78dc1378f1eb79877357fb2004843879982b6c2720057f10385cc347513a81abc4e821b364308dbb4b7f3881f9468844233660765d22ae00ba6c36610e5962808425e837b28eac28ea48bed34ec62866639612c983e9cbfe9b5bc2b0b31d196098613c60b82f62559c1c573bcd1640a245eb35a25d794f75fffddfc9a59a238d460babc1f3f85a26d67d4e6457ed89c9b24743f4dbc8c857b929c4adbc2b761675f14e74fbdcd14698704ba8012e7062373dea5a6627bc74af7a3bc67ad23039bcd1296691ef033b6abdfb20ef67d38db4074fb8f8d7d52aa616e7b9fc16c4d4a75afd402d9a71b0a76ece0cebb200c5545df63839f8f3bbca3d239a6a3d14e7ceb14cbc3c49eb2251a17fc3b55f95ba3b8298a5fb11a1f97f13d778384646971026830b231aa5e6e26339a2d22ccf08607864821048da4a7cb6c29f4339d4b61448229d8c5064d6791c6da0279d1101a302e69e0b201fca4df59ef82b189f565f30eaac59518282268e95c2668ef1f4691c7553c6f69ac1adb58b6dc39ded3cc77cc5e0e0b2bca27a4ce8af3698ce72befa4220c918a0c35719a820234f7e5ca3ce744deb6c0684ba77c9f9b6cce5f28db60cb4c0a2010c6fe9c5c859a21a12e55dfbe50c6e5d643e273d7068affe55ef937afebe385f0481c9ecb4f4c6a20af462a64b798751fd04d189ee777522012f1e9829299b64065b6b37f04cccf61ac26cd883b713f843f08dc10553767591c61faa1b98ba0a4383b4a60528e707fe905a1f2994b21dfe27d65c00613665b42796ba205050c1b245e7e8610abe6184b32bf2a43e1797ddb7bbace3585bdf5054ae65110e2f116bd14202d9a02151ffcaf839bddf9aa2f4089270c4b4304cc6a0eafeffee00aec4d02bf55f8c1ff02fc3203bfdcde7bcae2bb2bef74fbe941cfeecdba64f536ae5c79c17c56767ce614d4c519febc50e304887ecadb314e2cbd7e225e19cdb6d8e8715f12ac3ad04bed621be01bf9e2025bc452ec50a8b8e2d36d92a88fbf9ca315cee010ea42987124fef2ef7871fb25e5d3fcad59ebfcd3334250c924a6e387fc5651232f42fb81da60853901df271d087ff8f8300c7b478a74ec56fac7dad17c4e0f92cf174c7ce8ea1cad61a1562f2664661445e8521f8cc86f1c6bc608aaa8b17c4cde8a3a67befb41ff8ead69bab38c5bbd4bd9dd1ee7fe90a1468f4ca4ca1a74cdfa77698b35ca18991a876ae48f48f293ea03ec12af5f7ba319db560a99b5f156a958da64923fed328a189eca35b0bbe0749edfb7b97d9ca5039ecbec9ddadf20e6656de1ff4ef5ad7dbc43e524827187479e42a94dd7e2bdd2575069f05ff172b3e423558f9d60f11ee751f329703e5f9978ef664f314b45f1a0eb54810fdad0961a78b4d906d599eda9e8d28228ae055c8e8a743c2fab36e11b1dbf496ceb7f4df8f371eb071d6ffb962f0d609f56ff11c296aae7c16571dd316c4dbf05b4c9f01faf50017594ac3c5b4f063d96408db6c784ee39a921ce3880c6a786ff64e575069e56c5ebe3536fe82f21f9b313641ece6453877f2b480c78450ea821bef48f2fe83025f018e855a392f454e51547743b4c4200e83d369523d989f391974b35fb35554d2f829489c5f5ae5adcda54a54954fb11387cc9f3ebeef82ad221c028132b72307645221ec25b40a93f2b0b8913584acd1641acaeb0f9942217ad5593217b57bf7e7b6cd9f8791a9eb6a1ef2297ab9b0854226bbdcb6ed395272a5157d6dee0569e791eb7257ab35427cc855d6760426d8b0db407e6dc268cb0037b18c98d91bfef268ce2b7d26cd1b3d15800f00910b4d8efa426d2a0832047848de658edd7fdc8d5f58623f8ebbd5227f06909204827c4eb5807860e95c40b31609f9199459cda5d85cc793e559693d7412cb83168455d3843f5ac9608455d21a9389f6af9f4304c202bb81e3c4522cc2b3e0d005367e66a10badb854943d330c3fdd7dbf457bee0655daa6362ebfa13867174df2e799f451ed8c342ddd64de7d8eaf950eb3cc079183721c50616330f5a906da2b1275400ea95a52e369fc0cbb6232292dd0ad1d9e5793880d7bf12c37d634478c504dae5fa9bfd2212aaaa3a1fc64e555f981cca8927dda96e6e401d1ffe4c152fffe0667b7b60a3f8429af18c4279cc045f73a17375f785c6696489ac721f4032c767273481cf0dcd08ded366c6995a80b0445678b691037ba1fee69e58f2daf1c6ddcd2d4e76da9c3dbf034704f25d3d2f3e1525fbbd7bdab30913c7fdc88c68eb57a628101cf68cd1625e9ff1785bb603cbf08fac194eb744eb7bc7065eae0acd61abf76dd20a41953059221f63ffc8e57bb3e423b24abfc307aa6258192f79070f5616327508f6b54f2fe88463f061112d1529e35ccc2054796afc3c11400fe8c74842fba0ffcb36adedcb4d9f2f8b9d43e436c70955b7c63a30c4ea134b45f364872b65a68cac214c0d79b3f00bc0c5258cc391b1b2a12ec9e30e9e4824f95aa6faa3042953d3a07a4124e97f081a36f52d782005d6307c323d2d4ca9eadbd029757f43863e459bc11ded7030a3826c6ac0b92bbc00946d10afdaed3508d9e119821fe8e517e604bb9f3fb474d5b0bddee384d5a40a627f925685b8e3a54c184d3c0dac3b7ffeb4d61ded0984e29edaa2612c7e61b65defcffa0684e1e2bfd9592769bd42da4db563c72b0c6672a10a3b7ab20727e77a27c2fea1efebfde63e8c06c6b12f59ae54d868920fa1032a7aafc98b222f4c209645650d867fb56515c39ce26b9dd50d10fdec8ae50356bb335a6dfe545d1e978bbc90e38180dfcf3514c5135b1fbd0a5a418aaa30568a65c8d59452bc84d2609ea37bcff57d9a564528b5698e02b8a9cd0be4c221ebc77af7b4d244b9dc7ef1599ad0944ddf764780522b86b72f140560cfb8dff34d6596fbe6a813d7d25d8c7848a61fe163f7c8b4c897e5f837e06374babbcc44fb5bae7c307606f9a19dfa79b88a8caf87e81938df69d0e90f465899f0d45caa211470139c3954bb4ac73ef3b7372e9eea73e5c72fb480dc0bf4365aec0ac640064e84d3083a899d475599319752e1547bf974955db9125820bb65bcae6b2cf6bb740ac21abf64b6a121efab80f276f98b467e1f918a16848fd30aee40927a3de83f173f234df905308e71df6ecad8333c91b4f5f6a82ed74ce771a93c5af5063418347334c5e367fb689e4bcc815648dadbf8c65df9c2ca16da66d322cc7d9a776676a9847eef234509fa2a622f23b644f3bad0482dbfd56a2af39fbf40b3b91db01494c9dd7f0a70c5e917fbfc695478d9ae109f971fd83a9d442a5fbad23c5df33dd876db45915e23c27587f3e3d68d3700f4761ebafdf49177886207726c89fb0b604956137153bea4469d768f1095da0a01fd803305664c6a0671d46578c6a8caef506f88263dc4ad683b2a198d25fea6aa3748d9bef7463de7ddd05ddee29ad7486b8da4da71865ae8cb7c825d70924bc2904f632d0b71b6530f63cbc2fb4b13f650e19c26f504c089d5f049ad2c3c7e197b98f5e2b372bb0be809c87cae4d517eec8937a70d404ccac71ab79a0195c4b362bf6e4628b56b52dade1b1e30657db88b9afe9bb0dad4d23055b3156a911e6264dbed630ff811899565500c7590b6eb838af82b591a755d504678ea122c4cc61f02c846e46e084349549aaf8437a9d74d00c5c84718ec589211ead7a5bbec2ade4f28c0c6adffd697439457f9eb64cacaee6755f3a3063d9d71833889c42f996256d9c09d1cfee7ccda38d2494f11cf4bd57f8bd94092f29d461f34d8bcefd1f66ef1accb1d16bea9030a188ca7e4a62b6c0324a24cc7008d3cf95b6d785f10bf0acfef81a0ef17d784ab1c05741da34d598aa5963f38d85fb7911f059ec0bf4569bad0ac7ec56796e0db43fd8cee639134ff60f7fdb5d884fbddeaa4268484d746a4d33caa940ad10cfc6e82c2473a473370c4e9169f41296ce81632ed64b2922582d782e370cdc8eb534e0b797fc065aa5c0911ee2b081c0f0935168fec52d4092a69a2dbdb62d93b8003dc0eb03aaed89212d8b6cc8446450f5ef5de665e6f95e34cefc203feb01efaca523a528a5f0f8cd0e04eca99a2c73295c4688cf44bce94e1dcb8f3d2fc0bf0850d8f5bed2f71a706847bb5d3fe1d7fbad75ab5be68ff88568343664d8975bde9041221c856cd01277b29ff0911f23aa7dfa44d7e3b7f7510fce6eca2de1c77263dcdb14a661c03fae1a28612b8bbad70b5ce5f67e5c220807c2b725848b2ecf3d8ff9d8c23c89a792b837d05b5b56d57bb1c6deaffd1904ab72e31f3b44e8f5444c8a7bc5e1fc5ac753038dbf25765e0ed4bf22f8c53a0ce5cbfd665a151873a112ea623ecb135c9e3532f7639e08cf270d22a60af3bef737066f9361368dac7fb894957765c1f267e91b48d0e79a7b26d6e55ff4cf9615287ca6d0664869815f1a735bf84fc05d29b39371c0e36f19680722a5c08a138b485b92c50e22c2b45169122bd3b3f39e51c4e8901f1510074762a4e4a32c0168092d36e72b09868fbb64a9ad287914c8ae73464990189ef145679e7c279453c09a8f17fdbcd511ced930f4b12a3971a4c0724601f236adb93e73b03ad03e674052d497256d66338ffcb44a1458342f558804c4c481e31207e2322313610c321477253b483e8a8a1dc78c987f5952b472fb9d4262e6ea8baf26765342e537e39de435e7140cc57df18a5599cec1df4e98f8303689e6b92861a668964655f5e5be0469840ae375371d59e5cb58a9f6e3d0e812f6f3c37f1eb85263cb1d90e28bf9f6dd57bea81ff2ea54aaf2b4a418d3ccddd10375accd4e93ed6f2faf0c3f65091991244234a08ced22472765ea454d01c688437894904219b7c6428e9d14139519b2845391b501b4cbe4a59cf1c21b126fdcad77febe2191b08cc22326e130c2d6f02b2f4b578205b4b0c491b626ed58b2fe5c7b8127175fc0086ffdc4ab37e2b58a46c1d1f1d13ef4117c79d48da1a75c5082031cf8a49b3377ed5dccbf18529119f187c8e6e4f4545a6c03f7ece9ee6cf8081165a9634271c91071bf31e77c528b6afae217b2ed4a3e1266a8c333f8dc1a77d8deed5912ad8e52d0af4c3ac5e3b8c091778c4a1eab0c40f9a4fe73750eedb22b0f09ed0eddf4ff9305f12abcfa5177cab04b6ad6560679cfeae17204596189683663a5118dc65460210d44eaa34eed041a903da22023a1264fdd80d63ddda499df09d70270ea5c49abba041051d7ff1c1eb408b86d6ee6e337bf6831f26adb1bc025e86c206cfbe29a92ab0d3c039739aab0af3daf1bff87c722cb4c6122ec728398ce59d1addf81467bec668da9c65922355dac4c423362420c2bb51c7350ed2088d603bd54a6fc576c9f8705eb4206f6d07e9f825e27fe0ef0ef9632912f4f77ba6c25e3420bc6da9a076e1195effe3ddd5b13ebc3e4ee89b05ac4a2762670db0f784c59d085975578527c2f8a139408ed8bb3885f2d5e294d4b24b78ac7ee4eb7e4e6294a51b8cd60c3652e2a5063bee2baa244483c3c35ce9fd279a4b2c84ba341416a5d13eb76263c1518a4f607efcdfb332f43eacce2cf2b4276c55d4d3c8a4ea3a9775a31c0a7274ac29f8be986fed135f76a87c8cd32b093d1d7a9e55ac95f45ff428af84c0d0d6841dd6914a9e65c4881e693f5e31441ae176c7fa00eb047ba0a2804aabfa72a4208a5df1cf434357085e3791fede9d790cb4914004569a49fabe9c39937936ecd111a5fb3854e27fd6b8ab59b7d010520018ba43452a0d895697610438f606978856623397d1dce662e534216bfd8ac2cd00a28bfcba3155cb54b7f810795139fb035be2453600264e78f822be943c57f12576ee4fd22269eb84287962ec5caa1ed3eede1fa2350e7940df59a5afda53a777c020db2da1256e007cd1203d2dd158fbc9f9746d683fd435e9dc96f4c85e60f816cb1f438ceec2ca653757151b5da82135849c5f7be6c86323b172b62306c015b4bcbf7ef45a50598ff96af2bd160c136a458de8f5143e3fd471e580c96dce5f227a8848f9f96931ca07d928e4fdaf2798768d504b3d864749d50c213952ff950c70102a379317b22c2cf0e43190aa2966dacc35d389fa64a381e25f6cf1dce04b21cf3cc1a8bff3f2132aa507b0d961e7d9af2c95b9d89d14e7850d605e1a512dc19bcd65ea4640a1495134f21f10af81f65d99cb47574abbf531de5f64a3d1215f5023de3995e48c8fa410d6887647f5bee1148d128daf417f5be1d14d0c698f248b7eb21c19339d8ef5c00dc6c169fc6a4b1e05f1d88a03d937a0beeaab2bc187d1145dc9d191a37644700b26a34c7fb9b0c2daec7e61ea7cd78981e834d97225c861648f8a3f789b402109eff77e12b54fc3ab9001e8bd46ff8947009db9ac0a1d70673bfabe38c0e923d2d94f462ec50e3868b297c6b42d07e5c785f8c3e8cbb9536cf4fac4abceac643502728957c10891762953a07bb479011500d74dcfca4a24816867580f3b4bcafe533648986eb7562d48dff26a4755eb3fcbe537c81e718199e06d2b28347806aaa702fcd5e771299583efed892416fd8fc21c9a4d4a69a1675ecd36694e3fc9f6d1df315b4c299e98fed73ac39505399f9e18e2ed137862844cf586d6b603fb23b8f103f216ef9274763e670a1e8be8e7935ec6b4c6af943788ca577b5ec40615becec2a08efe0a303793048f84eab7211ed5a6f57746da888c86dfdf9f31a0611a6acab2d79d9dc48013ded5addf949eee0c10c867683ece24c3b3ff2318180b03eec4800c1cab4f4dbdc5fc8de5e6da0967cef159cba3c1014910247a986518592bb5dc3410b4bdb14058ca21056ded5f09400397dbe77ff102e9258fe4776c9c306f1a1fe9df773d38f68d9e089fd36408ecf447087563f02043281fda686de5bf69657b4130cc71020194e2ec613e4fc3be4fd1ce24078ce10ed4797e014227a7b39807c1c78fe227ac8a8885caec5425e8347c838041040db5a8f16d5734f3b3dd20d3e29c4f3d517435a7cf0136c93b95fc1ed616ca8308e19b54b86c8c362feed62852bff0bceb8e67c0ad2fdac00297b01692ed4d7f1580e1e6bbc1a37d9046e72d1883e6269b18220f04ce0c176f8489cb7afaa82bf22f3a4a3f7d34e22ae59f9ffb8928651a10bcbc82110222e37586ab3331f9ac3e7c51c69513bd265361df7a4cd73340f815b316abcae51bee856dcb84af7dd9a91cb94f5868b1e8bf9929ce8cf2820679179ca0697579a383d6715520408976cf7d6f08248c434b6d67c31bc1da3ad60f2df3177d0a5c6291a2f50ba708b05af8cfa8c1205842afadd4fedbeeab1417b486372f5a9099b1e694274a60bd8af97bbf7e077cd9fb711d3d01e3d9925076d48011acd50391fb28844e1eca967791f59fd7a5fccb13405068bc00ca27eb3ce51e4f08676a0d193099104ba44e91756eb4d882da27a7e113be887d906ff4b29a3ab2d2bca505225807f8366fa100ae537e94610d693b8fdc4d589d886630f9da3d4815cdb81e9290abfa140ba01e0ca33d612bc04b3217a874ef246081b3ac429ada95eb085c590320ce5f8c42922f6619d2433ca3a6a57e593e815293515981f3c25c375ff229e40dbc80d9ab576fb0225bcce19f7141b806189dd530ecbad57648cec0f1b6c611dbc772642787daa14c1c5d5b12292185a86341f4d4532ec795f0a61a173b86e2ad004c5090ee81367627b2aabb820b19dc290fefa92c91a1b8a260b07e9a26bc0cbce5f55a184e9bc90723ffff106ad619de8f230f40de19f0992f8d7d7f7fb31f1342426ed2dd7b616fb06ede3740b5d043608cfff9382cbd66c415d0cc84c7ad7a89a08850c66144f27ce54933749e9be3973cedbb9cf204fff5ae5ee53772664aa5425648edebd0bc042b07ddf691f4d5600f46f89446dfcc9428626d5cd71ca47150e5ed8c1a540513ac3e7afe598c72e4b6acfb516619c6e7f64ef7ada3f7340a4e52c8afae0c4ae382d4721a77253344c4e852701bc415623e409b58bb2150d33367946b6088143e9ba3b9a6d57cf3939db5e2201a261cfaf1886e5d4b8608d884bc2699043f58da5a2688c2b3acddf4e5c62c922f4007b170017c1b5ec733b989d503446eb050fcd8c99dd132398d46ad4e3d733af275ab0193f42455f561551d5ee9e8ffcd8d225b79c0e609805390d3732e12bf2804e0a2cd755f413eebec0b4418499458021eac8f9067691ce48f1ff702dccf9b3831f00156408b16a54327a008749ab1745b322afa852bc56f845bd99e87ed73d7e513bed8ec00268c0731426c6961b96789c8f14eb65baa5fc92ba697d4ad1efa41831e9aaaa2bab60df47d75e0335edd2c04e0850bc16f12fcca21e9884f8381ba87e31371a9ace7420a0bed6c03d4b45de38df49acb6b5ef53e4ce3267207575273bf9874dc53004014ca8272e0631ea1635c4c3e2bc74e4437a3599e0896f24b7664e40dc7ec8ee8bbc12e599fcabb96c6d9782c718a86e0aceb3872379107e8909daad3602ef5bec8e820137cccb22a644b8c25b58140b203b9fd50ff762b94a0ce95fb512da62f9d969121311cd411208fd18e2c2323d9ac56facda72661b6d21bdc638e7dbc4cf70ae4ead26c8751cb7dcc7e844692e0370b6b382bda3eca0284339ce5b884c60c5c7c1ec083d0e349cab55e2133fd938fdc6cc75da17476530194f3d845b733cd28917b6ab7d082e94a4209cebd6e01f121209240261b6719fc1f88662520c5b3844db72cac95ebbe08eb66f890094153c0ef2ea55afdf00e48f1cde52ecfbd33ba7a1b99215ff1975b3d693e6ba6a22312261a570ae8dbe4f8f7a9d85ca0c33cdee2b5b62d6e755c4030af700bcc12e8b4a80c6f54d6243c58d90b771e89a482bd157ae69bf48451f5a69074cbefec41fe4ac1bc9fefb664b46b1bd94917c1ab4f686279bd204d070aafdab054aaf5c38c51ba9a9d5076ab723892bc5c85a6932af618beb2f3550621065f1dc55af5ad3f68e5da84000b33a25053916113041ce2e8c8a5b0253855e491ab44caa291c8cce9d1db5aef9b71fff108713f0dcdf3cfebc39d513d7f5b7ed2e249427d385d95da27b5a1eb17b22a5ea6616ef2bf9d7e60d7ffe6a31f911b7e83893a2b2dccd4b5fd91b25d448198539970895b5e67beb919c37db26d7444ba8615a432a900a47b5cee30d877f43bcd38ba68bf2a15e9a344c1f0b93ae0cf8eb9f0008228700f33c5a344f2258d5474c92f3d9a857876faee139f15913818923a4cd6bf48783be825dc0bdebe182f28e6a623619fc8797769ffa5b93ef3908bd2a25bb0ddc05941ff61a6a5f85109af5fc76a95315e9996c87cb345a261a75c9236f5e9480a7c0bb7d3e4b0520189f5bd14220623d1dc1327dd7debe89dff6779e88be90527f506b3f5749428e4cf74b8e8f12cc0a74f1d9010cd6243188def987ac0cd20857ecf1addfe9d60314530fefaa7edc0bf3cb29c97be76a26c8dec065c336db7305ed3587ab1a5d289de63a8421815bbe3ab464400373856b13cb1bdbcd475018a9cd11c7e01754a9a1209c1635c91ebb4acb0df096a814c631b305072eff9656a6854538afb8032ea0787a8fc4cbfff9304cad7764b450f93374c7a44ce629dc74a4fe8fe40228fb3cd99e3b00edc4b6679cb29790ec80c935ff19c689f04ddc75b09928b8a4143f63f54d2279590ce5d7abfa6fb2112f53f52a299ca2b33234006f31949b039643eb6ea22f4c19622a02f8768751e10e7b07b682d30e6c15afe72015543578890c99a2d6641d16bced4ac48212e9c4b8056649ed67fd0c39b1178d75d8b525ff51762b512698e9059d723de00a40512382b2f234bf96338edbd61c4f514399a8472de50ad4c8cdcf2fc2c6a1ddcb0144eff671fac0f829f4a53fc6023b8bc847064702aefb589ae12ea78abec9c864ae0af408c4f67c35d21be476bd1bf5c247ced45aa9ca317efeba8e791744f0763dafc48f40e04721276353f0b7b508778876ed5375b865f345e2b0d7a0811331bbd80ab731195ccafae0bfaf088c56c93d6a73121a9dc5344c96dc7de691cbeab9ca0660313d8a01746af8f770cc7dcfa724b58088ed1130ab1e0f370a05026e21ed2d50d2677257f6b3bc6a9e687daa04234a5aba137f47645b71df15fcac618f052e1a4e6482312d69d83d5f3c586d1f31d6a9dc82497d41a5251a02ab594160b52761356715e1584638f0c11cd80fd312775335b0a067fdd776627cd5ba248d3fdede6215d8c7ee64434f578430ea92fcd30bd4a4c5dd2f613efde80f984f139df1eefcdfe4c30c4b1afabe8b9cb1f69cc992757ee53b06975b280ac705f44c26fba330d23d35050b284f3513c9f2fd6bb45985bf3cc0d5b16427984c79b7ff76572424c5c10e27a9a1fd5e28313bcbf6d6c6ee025095569c7b12a0e00c5fd7f8e5299513f82435c9f0aea51e765add96764bd8846c8672c9c59562cde31f50bc6d89b2f9adc088dbdb43626d0905f9465fa96c6fa235bdfa1bccc24cf783fc1f0c342019fff338c34ce8adcc916b74b8c1d5bc6727e1567d29442b26c117a80f91e7e13ff5f0195ccf9f4caed147b3a36b8872dd104f405b5d3aea1ec9c86f152f7c2a95cfbcc39fecba5fbee5282a01e5363ee5efdfe0c2623e4ac3aaf58c7396c31444cc21a56b391964fefc5461fac967c4ac6e3455fe42e6963f87d16e3bbac5cf4700977df13daad7f952d0ca85e53588b0b8692c637a50df1ff16065b500188a8fb3ea27c9cbe2a97c97a0f016f97fd388b720e7e79d3671e9abc715fd7306cbf50984acd2f7ff709133190232515d75a8fe12dec9fb554a3f0c5ffea36ebd2108b22be171c57a715c534237d2aef03fc362374be5d479fbb79df6a63e6af22da8b99eab1b032ddfffd5bbfc4b237d7639632c46c589bc6235563f8958f9c592d36c7e91e5c0fb7ce5d36e7fe4165fdbf629c6985e1cfc2a113c0352b9bfcd4c47a7b5e7e119615764162ca51ab9ee04b94b1a7b7a2ff8e984aefa4c65d67d90849b37bd791b438dbfe24d436b4c91cd100889e2cacbca32c92f8af093aaa3e89fc7a8b4b625587be7e8c5071e5c442d699fefbc15e1a7ecf63eb8e6e796bc788479959e9d67e4bccfcb814f3c6a200bd04c7d38c1f94c3f383cde308da4591f005bbdf76034ac3bb184d8b20032725c865347edcb8a4133528399024408c932329622900b7bad68b68f1ab8b8af20b340e3502d7f04ca5ba258cc6e5baacf1bc7b054d79a715eb02118f454e97b2d9b51029e05bd8d42d7d238caf8eedb5c3930f477a7288cf2096b4454d83c384e79baa04760ea05ac2e5021a55b49557b96570bc4fa4bda19e0728a12e9c8dd35acedc21ee9402f7390e198e431c915edf41373cd7d19c47e83be5d9836f877867619654497b3e63c17dc8cbdf3faac27ae62ae02be46bc3da96b14b9151b6ddfdf50e587cfd3681fe786da4efcd22fcd20ef5f31f439fb74d9f818d54557eca3723da4941861855ade834c9b47feeba5b73adbf2e7bb6b2c90cef9bc500ef49c4dc4c21e29f857f4840ae4f2340b125c55a6f2970c34c898b9cf44950a62f6aa4f14e5cee6248a44fce8ad7e0a5a1d9216afdd1c3dd9cb9e937d5f43401c8e03d050fb03b079f445f610ad0020504a8d475bdf799e990b95f9a280e639db3f622cf006f03a2c563e86328f025172f9b6452828ca3cce8acde819ed3adce5d7c5ff33b9b1885bdf3a5705dc857c4e9b9268d2b99ca6fb80aebdd1ce250028d5eb22716dd24ca1c2bbe7af1d0a702adab300a4e1d01587175a68560d2358ceb5d08ca1116c2fe452bfa5e683decd098ce185d2b10d34fb34237a334ac33500efaad808f2f273b618982ed5ac5a346b81f864a25e06574e99f3bec316cd8e24625e6405740a085e077c178fff0f2cd1c6bb09ba1d481b2968a324bca88d9d2677aabf7691e36dc81e06bd007b45b2b9ad1d65c5f6cad2d3d77b363fea90abb89163bc38f709fb1b81c75c560483877ee26fca96545f4c72ca51829bac0a30312fe615d80591e9d4fe997a00825412dc1d99b9f3ada856cd3ee773caf047418a73b37f2f1f0300e8886fb656b6e0c8c1270d17b91eb2bf207ef96b047fb07c6b73139dc05c29f6998a047df96a7943ca4b31b71962318fd3be9eb5a3c8756e7a0a115e4c170dcede1864cf25bb44c7288c21652c4a01c63665d622f464cf82fe46454b84ee83f35994b8dc00147b0c8c5bf6c25e8102b7e51527fd781f4c99dd2eee51cb3bd6961dfcc0a707e5c9241dfc867d99afb9efb276bee7d87f555791265ef0396dd487c8d6a8ad8a80dcb42dc3c49fec72b705d18e6fed5f8772a7e40e22a461bf017d91a13906fec8e695b4f57c16ddec03609e4a91e40ea1fe6743b30d622a711475642a17f424bce95740e1cee3e8ecb7664320b61f4d777923c2e0b081d9cd18840561d225f1f123ebbb3d44e0cbbe0f846515d57c72e5208f75b5138544f2e331a3ebe42999efd60c467f9b9599a100926df01043e4ea8ba1f30688df881b5f416c121ea0b692ff7fbfa6de8fb469cb4aabde85a96c8405664204e944863eac96b42fe86344ec5bfaa2beb9e2b7cbfeef5fd54ca7fbdcf55541c2e28be1aaceda59e3fc374a567a50fbc499817be9c070ac016987c5a33cf5c23f2ae556972d2be0d44e166d4ecd2562a8066571d569d18b9364f5426148a5f966d4fdabae7faa3c6909b135f6733c1e1a6af51a3e2e3444476c5f4e43c764bce36d3aba5f51fdfb3806fc62dccf0bdf7b59c1f401a69d9e7d657e50538162b0b99d2f198b3982de81ccc0c2c38734c2e0b9d31f104078f290671e7f4e1c342953e5aa398dd6402a3d8e5f3a962bb127d1668090d4be862be3fcf790b54e7f06066303b41cd8830aefbf809e22de628426a443580f93b78941c0785db3285a45e8ded7b0aef53ecee9e713823f96e19d0ddba9047201476adc88990474d72c1c17495e50eb576ecf46334cbb610e2af5bd272d629d4fa99c1647bafbe366523a412f8565500323b0ad69a8fd9facb62450424fd9a961fa9552542e61b861ae22fe8b53da88e328d6edc428f2a505f96502a4e5eab14393ccd79dfde9b884112ceadc2b4836994622ee7d0bc7076fa214a76ba4a9f096aeaf5947457bde45d9a29a9f79f2f63d1579529f1389f858b344b01cd68615fe1195b0c55130fe3e302eec3554543df2d2233fa70e3cad6556b51bbfb229c855314e6e0b9cfec32839d86758b642bb885a9a225717a633dbbbcd3b326b74f589ee17c4abf8496d6e7487abace1a51976ef198ada0cc4fc110356e7b92271050a9072dcb5662ab175524a920fe80e538f4bb976266973328d5d6ebdf32639c13c6cf0c90f1b253f62b69fe9cd263f824fda2debb7a3645753c05624828ae885437e9b89a484e5a788a4b6f3ea20c3745a6ed4f1c83f0e233097708be28517788502b75c5ca07975b0821562b33af452c8daff78dd1f6b5e252a5ce9dfade618b934cb8b13092fef657113983939eacf66a72ea9dbc39d45de33138ecb3b95a851475642f4565a3f05c54651fbc7f6caecb8027227624a81af24aafa1dcacd76ea60e81c416b40bf79b29aacce5856fbff18fefceab48a048e7e15a30fb2ede3668803c379acd014a33933fdf15183ef93b6f65515fb150d20f4938b432eb389c1869740d1a047b5ec0f9653d9c29d65e8f0afede2d07da21e407db524316530ff0c9ad93898fdf79f1b816dcc12bd02608ec2b5baf0110dd2bd6b304bca38d867f375671abc39b21926d15da491ef0679c5bea27538239504102ba9abdba76e2110b3b0ce27980750aabaa7ae4e67d0a2d261a8190f7c0793092579a83f34687e0c04e9ba40b0d6509cceab4ebed044b27cd8fbd403d2cb8227d5d647a2a1c8244fa66a228382847a511a426b1ef67d38c44f9830889a1d441d84b61e6e8f43bdb89727640623e6661dd7472ecb710aa31518f3e392fc098ba788fe76958ce443d9b51ef64ec44e2ecce26524cb2dd17d8bec40efffedaa1cce3ca49daf24e5255e5d7edd55bd4bd7fecb069abd7e7f5dba72de601291d1c5423eb4e65b38da6941df4baf1e76cc39761c4ca9d8dfe84fd50277c72d667bc836116328081d67da43cf593328fb50f9342b65096fb496d525834181b8501b7d1c2d8c794cf821ee56f18d82163a60ec69b8a91998e62f0c2b7d8932c3fd3888889c6476922e1a37bb1c8a6f9a6286975528caa0947fca4c6cc70906e880e7db68d7203afea86aecb72066256237e3e884f7fabecb213a9e4c30c151ad342387bb0a46568094b2a9d7e51ad855a79163d38b9404aa56461ccefdd2198e926494681f6a7d67c7f7a131405f218aa51101c1fb4838f81035112ae6289f7b730905507b6c6f940d9aabd580547b11c363dea12c2de046e87a943b0a20b2a1367a7b053faa40fdd1738c3251b4622cac623f02366039c0d9497cfba96a4126a3af27576b60883601f1cc169f6e02080a069b5020ef200904967cee24f2596cb11923003c4019865a66036299724ea678ace59eb249c3514509af2421d70a0e5bfa4750f6fc65b14a844165d07f0886f84a46e2d1c2db0e25fdd9739d69a0c3f31aaee59301558f0cef476852f7388380d96d08fa7452b86fe7534a90a554b6b09409baedf63400baae5b24ea5e6e2d6c9ab94e71e1dd885e377b211ae8f67c92d98f4c96341c01631cd6a21dd566be017663b9fdd00febb430ffcade46be0ee6fa5e6c775e9437b672922d756369fa33e22f36a0383179d9679c480bc95b78a99984d4070fd8be188d509857525362c7df381def7e1aefd28e988f2138e255c6a0dc4271b3bcad7b08f5aedae8846a9bb9ad0b98629edf2a9a7b3db2cdacb92d8d991893d062200ab8694fe79894b0664447b9b0138b388246becc1cee657d47116182da3cfb0e1b2451b64e7aac812718ef6a284168f23aca957cfa17e6fd2be59eb98dc8e4ef7505bf628ce14bcc1de2fd37321bd6906ce7a8215056e73e659afba0c4ac72ee96d3c9cdf812fef158395cd12aad6d8607f4659b5ab8738886671a3c69d49590d1e43a9cfa54d7d7006048dfc17600820f33ceda3030215df35de9b99d106fbbb6a6b42e51524aabd8640491531c7b4036616b6dd8417f8cf58fa43356eca9f4fbaa0a6355d81d3f1f605a0602e565d166428fb9ee10c943163392843cd24044e2e807f2ace4c869c824af598614a14a17c3abaaec77a3f93d12b66d34a10a68d43e3da90503ca782ac5f942318f76c3999abac9b6b973362e4af7143f1cf97f8e4f04d5d29ab580b6f57c4e096fa24f4ae1567e54b9d71735d63bde8af215261ceb6b33cc8093b3dc059e51972c99fe98b471e6e10bd192d9aee85de4ea8c560ce114cc49edb4ca9671b1e4b598f2cc4f2fbaf47b429dd04598b223b4baa696be4505b8e4260e335e43f036d0c07e6c199dd6c49d7bd33abe1a30957b4324fd14b941b7438e21979269e865044a89fe641fd0866b9282695e95effd1a0d0a6867066796aed4dc2de7f3f0d06cdaed10022ad49b144fce9d8ae3f7491a0579094f7ffe58565777811f283904cd6a83730d104361436187dd369cf6bc83745629d3e421d74ba3f6ffd8e673c162f16d91390e3da55cd744609f851f2d8d39a2fc780817779c5aa6063d727b78b9a6c466cbaaf3b6a462b3f195616e99167bf0a4c21eeadc8abff3e1b7c2e2b42b07673b11b1b52b607b00b8d6114dca764845636d7819e35766be3624c9cb652ee6b160c0c6251dbf0652c73c2d1f071146e76d182614714b0c50caec47bdb6a190c7285e8821bbd741c152997c31f77aae45913d3ca95d13c4d45843eb82e6bbdfa3396dfa370522cc203705986b75c4baa18ddee89172ef3ee3b3aaf5834ad753ade93a48f62bb8e22fe277c877deaa1819c6517d0b243434d8dab03dfb35e60fcdb9792c5f070dfaa0543af547fe97a449a1bf100b174ead01c619aaa2b53191ff88544a0b6e450b507def0d6bd165fb8395e1f7b26485cd811e5859185f024c59ee07e456ed9c7011e931650726f37fd7e3961e4aaf0dd71fb503972557c548401b21bffbff97e665d08dc686ffac1d226d086b0b922604b8c010bcc36d8f800b4eda7efd68878aa3aa8c2f64c2b420ccd6a2b9b9f89b7d91a70a72eb3f9467d1fb0cca632070dd110b5027359142713155ac07f94d725a8626f6378f2fd74fa587d148f05c80804c3e08e6bf20ea026dc439ab972b20d4dffbca60d3520c4e21c870c41cb6cd8d468e9d72d1ff69977cae163b05640737ce199df59fae9a403c90384d9aec6810acba72356bf69bd32713beb4c35d7359df276fb3368be2624c3f2266b0f4e31dd81100643358670eee1d5dd5595d5017b88f43ff6d2d152e0e34f00553b98fb0b6d94f3f028ed98b030a955bf3a89da4d3b07a001a6b4457aa05372fb9dae6095b3f954e5ab7ada3b80a5062f25d91937d2eb30627b9d2e75e742dfca13d5a83354ca2190c1fac365cf10303f098a27476201acd0efcf0cb7e74b491a1cff4e5056b738fd0a63a149f5ee50fa894d165b22b9f79d142072d975220217cdb584af733163c253651d7528f086c520726dcbc85f3acd434598df104c635399586051be1256d128e02b59d0240cb633529d9564c771edf6978adebc8664f317e274a58c080d777446ba04c7e4a8cf31f0e7c5f74a008a527e11a4c4f8a63e2603949666c08599b5c1b35d19b6fcfe007753dca594c953ea08acc31ec1fb869dc2c99b8f23fb8df8601dd2332d651599ee4b05d554099293ad621f212fdf9415eaaedd9a7162b36e9e5f81d9153fe8b3bed410cda40186ff0f5260019b35696b6952ed5df45a5033e02945dffeb9029139693e5213a0af93604de3684e7d7ace494c777753b2df45bf7e79ac5d9182aa6d681c9837f2287ed5f6198cb814de193444fed8cd84e2a7df815eea92bbb036c36cd5f951b9b684ed060823fcf188a509d94986b5e5cd146b45d183c7c532ba426950981e19efd15b80f6ad3e9ce7bf4e0679da8d041d24e6d5b992ef1086855e63ea380e6bea93c439c39d18161ac7eb5790dc1490d71a39d1d16fdcf81101aedc388050f65864b7f7aad882979ca7670a34c96ab23609309da045056fb4ed35924ce79eac4da188707ec86446f14bc6edcd6b434f3e844a53fdb5f28672fa7a85b7180f3833d952a4f6f4808be39a42f3fb29d6bc6263384c040b2a7bf1ae9a5c4c4230261096a071a8b9feb6064582b04afa91dbae236b6d4427504786fdcfe1e1df50d8dda87a078666ef3adeed21f464968fc0209423a57bc5e044b930f69b07c5145ed3cb12109f4da7fb40e2ae5318638a397bc8cbcfeff1febb1a9962bb090e533be93f8681734a5c30edc9a7f59ae41c6f628d0a86fdce20b0d5b2b84725f0db92fed31d85345a70c72c648729cc74eececd621ffa0325d8cd43483d91b510ec808d1e568a4e0071cc22e65445213549077dde7d86c71180e3b4ec154e78f114c0f341af217a552efc33ac2e8508f8555486151c3c6330fa59471e33cd382caa1d4d408124e53325a4a9a2230f53aeedbf57276c676d536b1cb827d0835bea26ddcfc5f8fdf9645a6f315ec6dc9162c22189c430bec368cfea5da123b47522ef460d2a6a8eefbd6a66cb4f35c2a436d36c4148021062d4f8de6dd6777d94b6e394c52b7fbc53ac353a8a56f79388a07e81fbcb897dff16dfc9481298903f564c2144509fe18b40f3b1157cbd8ae1046bff202d6909d0da7b81b46a288c789066f208878ff55ce892fbbf4871dc1aad87a410260c458d14ae9930ebda42da7c341b620219aa6f9f87e9f0b9ee3aa231514720a6c1cfe1b9d371decbdd505b8c0eb8b51d3d8fe0b33b21ee485b9e8603101da0d156919c34b8d9b3ffc9dd98d659c45af74947da6d7283b8cb6a83fa72a98e7697f5696d9debec19aa13a5ce703f77e43fbb81fff68e68d84d5e6740f41de50e87256c9377f9132e5979889577dd697a46769b396be80c04e114489deb25938e6c85a00ef7b01094b5d4283be878673ba24425e95eb74d4615da2d153aff8b27434f2520f353ec2e9581aee433df85020b6a95b197e70717dad1031d6d09cad8ce43cbdf1bbf6b4499a5a8bf72c1208a9c5adaa5590ff9967a61aa22c42b7ca436a450d9ade985cd6f10a88692496940f1f7fc8b9c1b2a2be222b53ea7e4d107fa056ba5f3c81aaec33fa45d679fec3bb19ac6cc5f700fbbce38cadd9e14fe5008a05f5dcbf3e81d83d9e4af67c3807a97304e6caeb2170a96890532d7c2c1d86d2cfb70cc27f974d45d5caed65ab1f967904aa92ed5f10d7e1dda3b20af8e5ef3a141322109adddebc44c50d4a30d77192caced78821b333d6299ecad63c88050c980d271b71b32f3f183c0a50fe1bec4105d1f1e445ad168b9b16f066c898f1e2cc444f2b916891e9d94a841a8446e38cd84453ed12d12abc1350805e25cadc1614f1dbd0d24b107d42597aa51ba8e29a01788099b499cf7f8b39c76681f525dc0dc2b02e278d9873fe41ba729d050c31832bc45abc35c1022cf6b570a9555dc4937112b074e749d76119aa7757f29de29289d97741ec0d276efc2c699fb672d904a2fc241db9049eecc695ee9dbe51fee6cb8a823780390cc0cead406021427dd2656386802235d2544c124a98db93c2d818a03593054d6b48ad7cc5043d368a28567a664d77eccf8c2948d637901f2a0f037de40529eecf0ad7894e4c49a71396c481cfcfd5163b131ef6ab6a1f6061e52ac8ec840109c0eb3f527949c79a1f78f1339177fe5a41613919adb1bfc20514a5d7f99ad0af61eb6c5529ca6008f68d68444f560c0e77baceb06991adff0ca222eb635dc78e4174ae7ffac6cf5635850c13f24f3de9c3e13e0c24ab5fcca209874cce7e9b43f2610a0c8ab6648197c0dafc3c6b769372e0642ff270910d2d71dcbf956b7dfd4452790dfb58769f2edddeecc2ca4917f5088918bda95ba6d67f881caa575a61511bbe10dfa879d0b5cb58cbbb140e6526e44662ef6dfb64e35ce0d8367684bbf438cdbe950bed3b0c9d96df3bd8d49ea6ed09d2d8b310f0ee8d7390c0aa889d025a576e6dc553aad176606562a7850dfbd811da73261cc563aa3deba3c6894556b9e0b4c0c220c3cbd94c593f63714a02a686dfa7ff5ad627470ebbd319766cc8775933a4f953b5428eb3ca3ae00cb83fec9a1763eadea389b148f7df00a86a285699d6e062325ba49c435eb8dfb0080f8b34650f332bb1216d70c572aa7d09fbb7ca20d853031b101b78371a706bc042f3b319826392782b74df97a4c4915b9bb6095f4b5b6902a29f66ed4e5ef0a4be244b41e4865e8d24ae9df72a368ac344355299b2383e84dcadc8bc1790b115af919627450776789b5f16d5b71eb825c3414625e179cee6196f23311e572f6e70883f7aa2d8d813cbc91f97d2d1fa7211f8803809d844bbaeeedb4532b094655f3e543e70d06d6ba3714ff8431812ecaf45b1cb4d3a76c15a1c19b63ba48a28917084cc1cabbea78e1eb3af080dae570e00ad38a3c9f65d7ed9b4eb2042feb6b3a312a70ada0ddb107aa693df7d225f544f31948d6cc361db84e1249d70d9acc75f591209a6ebf22deedcfdd131f863c37ee019ee71f073e74e8740af0d3badbc2aa16b2b573053bc71a755e620d7d0d616ec4c94f6c97a010de21ffcd57ad7ed21f249bee168ad1aaa751ec45ffb0d5807c2734b8a108101d61164e6320f6d3850c6500efff9b831021c9f77222d3c5cdf6f2ea41c4a5a83f09aab77c60914f3b8557ba74936fa7504d2f17a5eff01b7c5d76cfa6fc6a671eecba2822337dc01b65d32d053d8d5aedb9f5b4659348e5d1aaba3c3b73302520551a1e0d3ca68f1c0400511fc2c8026efaab6fe9245fd29c3788c24adf7915db45a7312ee8acc92924cf3a2df7249b29fe78ab21ceb478fb8b98488bdfbf4da8c4d0e7a66ab0bdd751d92077b734bf090d174f24c794b7fb14f28649ee3f2bbc0a81929b942048b05c66803c130e8eeeb372d3dcb2a6a6055c62a54f42a814e0b99c783cfa56f929c84567f23161970cf2f27ea979e15f2214ca69227f93cbfdce0830bab09f15a1eaf5da9dd0483d89f15b5ac339f518a2d7f1b718ec2d68fbc352e1ecd79c377ca1a61b3e0493d848d3c17656257d80129081ab7b299f899ec66fef176a6e3353e13768e2d02de70303fe4a6a7e28040f4c81218b5af686972795d92c7085b7a445abbde26120e64408f24457e7d2e72018fc2a1b4380a5f2db45f43ebbf19c60a6e4f8e781c31e4aa13e02dda28647c1c6756721d7c8968344888d588735a4147b239bc3d5734b471c56939cf0a16cd886a5de3151e5044713e24507fedddedd7ed3796ea7168f2c9a95cf86b638d1d2be078050fed901468545f5765efec84a5d26223fd0fd81a697b2985e60fd0c8d2c03ee85d02af017f3b44311054fb82fcdc790eb49496522ec0fe8b6424eed2d34528614e631f535fd02f3866c6234a1c5de1d990365ae04d86f51cdf9e0698118d57e5b5418bdbebddfa4d93b1a3576fcf5cdfc2684a2bcc11baf72b06769ac7c2ccc271780bea1da3c6b32bed7051a98296ea02e18decabfd93dc896749c2623f14ea2ab0c5badfb16172a64bf1713c332921e87da72b7309076ef2090c062321ae47aab5a119e5ff264dc2bed1d23d38092632d383da252392ee5771b28ab0d63c7f66b8c75f914aa7e3c747caee7a7af3778e57e462457b522bc4d59e13cecc662c4344a290e14d942507f084ec7bd4d09050f08b4b40bf572bc5cb4c4297a368d245ac8653af674ba277b697c1fa2cfcb8693106c125f1c23613d9951a0fe31a1372a758188fe49517f8dea6b803443411e79e0f0347f8179276fa2c784b17323d9358e765a59eb1ff6d7e5f1ecf57e1c561eab8a2d5107969efa326d4ed64054d74748f702b04dd884d2cbf03a0955e257e8ea09bff9d0b8ddea459b7ce2ce6831a4ba494b1f2add9d3daa266a565ef6a424a6b187dca5a6313c78475cda33459dad86d24df55dbbf74bd2c92b6aa04410a53fc8486d0eafa578a35b4533cd735e7e3186a15019d523bb111627fd1e2179f6e5c62307e3dc80b3a8efeffdf60276a018f236d5a5149863dfb9ed6d9e6e671afd0534a04f50af4fbc460e50ed4d33ae058d26c398b752c4b1daa1ea5307aa34c631b784b8deb53fb1b6f0e8f03bb926f78048680e58dfbe4114f4920fc53e9bf519f0329934fa30e8a6d101b5285bbca3bf68e63fc3c8a703ca303f4ff78392a5fdfadb01a06dcf7e309f6e9aabad4423aea4c4a9f664d210ad6873ce61439acd96e0529ed9bba03e2576939b71c7bdda5ada2ce01a465eac392f1336a1d73231172e4948e02a419be9eaa545d9f6340d731fed5d2b7d556067c580c2b1b3918303755f83e30d8442e30aab59a3d7874eb6c38565fdb67a55c3aaaeaf09a1ec84f6641f3f0247cf35b0e5b19a778d67185cb5569d687a084b7607cbe44fc1f142c459f4cc35f21e2aa6998ff0f8795ce5ff1d6d1bbd461a8e44cceef83760a48bbb3932b6ded412a2830b31dc61d22eff6e0f9f0253c16616910127dc5cb64d2ca237bb6b9b5f0081f93239b104c336a261cb29425ba35f297e61c5d25d5e7c3f88ac22a9d1f5235939832165b7c1ef624ed71f41027cb01f5abac1a73db58e21366df996ee40f95af386666365b1b05b2fa80587dd2818c6651beeb11d2809f27bd62d66d85e34cbf42296ee3c15f28c7e24226bae6e58d8c6f36be5ff6095a862f0432bf37fd1098216c9318c46794e4cbe4ca057401a018d6952d6c429eec6e0fea8a75d196b291ebf2542a19beff72acc348262c4e1726f8a570f8f696c8a96ce9d50375091b8df699038938e5a5b1d218eb963fb507e7e59fc777f889a462e506b361f2e3338596793bcdfe096ae9680f51bd5af856631cf05d3d40f3f4da79acdc103c18378ff19a8aa554bb4c9578989ca610d5ffeb11d947ef69fb91e8b418e16f7f3bed5e1269ed4a7c39d15d74e62f4845b115514c9cb00d3c8175e359a66d5f9cdcc285c610f4f79ec5c79edc9f45f2d4de23d144633fe867e50c73ab18ee7163f0d70af634b6c90f4142108a9617a23efc93bb035b771fac844b2766c45752789fc79f79b281ae78b42b113236d9fa66466ced9975115e0534e2661bdf33c988d540484b3d1d2cf01c2f7a51af484adacf3d192b870b277f2dc3bec2f71b9909457f89c7e360122eceb9800a50ba1f8a63f581cf94a4f470bb5b78303765d4109306748fe47abf796f30c1ef8334f2efb5cc4f3c12254e4e8e274264ce8f99e1820fe39595452b5668fc8e8cea4db4c36dd21c926b42b90c27bd6fe05d9e220d8a1bd866b120cdac7c9cccb076e1a603f544975bdf4a4f1cfc1b2b64c11418bb33df6331bef34985b1c8f928f45cd24102f6b5bdae45179833b97af9975eabe314fc961599458d845e7aa953b032d78518a4f4ffff6fb62f8fb04252cd0a6a836f2bc79908825aa4fa04a7ed601668c59d29a96368a8d1dd63e91f19164bc4149b9bbf648cf72bdae200ea0575b1e3b217aab215504eea33a3bcf9e38011c8c0c57b4c3fbe141797f446e4aa8101c4675b3195f4fbe6a5593774e433b89d1f8b698be07c649c7e27275e11e239e85df60de1cfccae84b7d97d9d888906b9c63e6b45000bfcf6d619e639db28b2ba942d2a4a2334fb6e71bb161157e204ace445d3be1e8c1631847d0b0f86a1414dc0e404a3387bdde1ccc6632bee23f8bf79413718357c6642bc3b7f59cf2ed990324e465c5ddd40015ba87a7430107b83c61d4c08900cbeded6f07abbf41b62cbb2cdf65ca032501590c24774de69fbccd2b44c10926fcf34e870252a3601ac1d3718019c2d159f039dc3102138ddb629493763c738b876215b9234bda01dd79f815e3537c5e69c92fe158bd2e6882e3a0819c63a8ba14cafbd05b19f7f0ae8f1ce7c790aabd8160e83c8f319754934fa94c0b13ee41b389411ce69cc63fabae65fe1eedf9e1e230fa4e23ddcfd99b6bc177fdf6a8fe7ffc67c4afb6bcf804990b98bf3bcdc4a9a840b011ac46321095eb3fb08f4a2542feb4a527950e334180e477bdb2fd4438acdecc26b36f3b3dfa2a374da912a0454b9c7a93cbfac76365516848b6488e1b9f0302c13ce0927013c2559b1b5ec9e4844958030d27d958b503150a1f381d85910d6e33ac4ac9badb3803b7c0333a4569df39e3be77e4a331c9de0384b9894197340bfb5babd6d097ed2623a632355ae54852746bb2385b31289b11d971b9c16a999db88799afda603cf18971301380436eba926d61a766e768ade9cd3299c924989c2917b753ca5e95e66f65ff9bb4169409717c2b404cbb50d91e72d282305a75e9abbb21639d7c44f07f7dae17fbe7ebf0f73fa34989b6e8c941bbf28b0e0400610666b7b9a16131a0e484bbbdbbea52357b7a60686e9f69aff424a0da761836318f27dcaf75d90b096ac02668a5a03655d297900da0963389dce2d3d7579d74549a47c87bb3efc06cdf2b10d50fbd4d8a22beb8b3d493a4dc5a242a015a572370457b014da93eb0082c4a46a81c6bedf07083c5841ca31fa6cfbcc889c2c79aea58ce82c0ca0b6c637fd7f76effbdf9e26537476a4e088c326cec56c8c88b68fd33a24fe6c5caddf6702deaf1db278f640177434249e3d25b8e91fe39b88674c6029b735556ec98a20cd77b1d7074bf64c9f90ac9054aaa7268a00fcbf75cc64ae2e5ee51d800a082ea33a0cd196ebdd9394118a44bcd194be6179a2ee2f356c8d85caf7ca1a3b77b33c5dbca5612649f3f7e1bc7c43bed3de98735aeb0f9d304ef0701c95c55c05c3297855a5fd5f1d5e61794d5020ffd067fa182759cf1bf5be813d8f7e761dd49cb128e269d3ca19ffe853953c6fa850059fef067582f4d6390927bedf245faae36699cea02a7ea44d41397098659d326b9b86dcb95c64212d6d9372913b8ec3d35e87c291bec58be1f3f81e3a165850bdaac7d281fc018b8f1ce9a872ab825eacb18a11d7c728746a5b1f31494e9a1dedc3285948287edd3639b3f8dc3268baa8b06f8918820b399adb0f62c059542bf17f0a09af3baf8c2c25bd7702df2d9c4600e9a4c6117959cf7cc9309eed9c8dc8b53628578fe2247fc4bbb1cc5a853c6dac591a3efc320f024228694e647955ad2bedef6f00a42ed454a5d3281eaa0c0baa6f1f184d7b864836f53899ee352ea2881e482843acadf0e9f9915b4e8293892986ef6eeb2e6502de69d7116b0e1d698a9825d53ea4f6e3531ceed28d01014d434d7b29ea83430e53fdc6152b742d3f0f353b89c5dfb17029b4c0ec8a1cb2b4246ee5d9617fa0cd7ef6d638d9627cead7b7205c9b24fed0859779907e166c4dde8a5e089fbeef5abf839335af5f9351c58fec17ffc885f8108a7b8f6d381d3d6b10c5bebe692438d0c539cad95aec30facab27dff6fb9c266753cf23b81442f0f9ab705274bf1b8540561ab3b5fbbb772937180f33f941f9fe2cda670834843afd9a6720d46acec26d62d90e4fdf1bffff44820fa5e5fa4c6a0dcb847dd21089c8c0631d408411150b55524d4f837a623fa8e2ecbf32119b5490d2135bb421eea9805382888828f1474be5ae7eaa09650f92f60f46d1e52ebe37d0ba212744fb66525b504c2d61a4ffcdd595d2004e28a0bddcf585626aca76658b33e69812bb1ab87464323a7071f477c06ac20a0ab78fbcc932eb4471febff2f9616ded6244343ea8c6dfc94269140034c452d4044ffa1d5e27548dab249f8e8547144b58b99f004ed426d72158fa684120e0c1efd46a160cd0e4365115753a1e71eab6fd48641b8ecaa10e0375aa0bbbc5361e6d1eb3baa1ca2b996545c9c1fd48d5735259b039d4afbf12b9d63774ff60cceca5bff486a87645ae707ec0c53479f6e1a068e4a01603c5a0d28f89ae48d9b778a97ddae432a1f4762446f7fcc00b7508c1a0e303ec44006063b01579a90c7e690dbab41bec7d7cf498730a96f32ff3efc458622fb03ee208cd7734cf00ccb7117ad1b98819c677647fcb3b28695f7c0a6dcfce17c39a1ce5a79ec359a297ac85e7aed66f46a3b7996e0067cfbb03a9f910c3e9217eb194fcb33083a4b9df33954bf732a3ad93976bc8030faa01a1400be2bf47dc1dcfb99249cd3ddfbe69425d24fc06fecc13d81968cd69dd5f618c936357d670a6b1b68b5ecf987e376b13e80bc42932c27af44d364ff9bba743850afe00d6a1b44ea05f0a4c3380b9ef98c469454c15c4cd5bd09dbd081c74885d7e901fca92200dfdf547db3cd9cf63c57315c3dc14fdad4547f30b60381f6e45480577fba84a8504ab38ed5e39311d20002749946be4bb96bf5f9116fb1d8ac458bab564c810531c3532e47ef7e50144c2196eceab772a5650ca1326d628c52ab3662bdb087c36ce109ea408548bc0e3c936008e1a630c98ec44960f7cdd62df797943876bd702b4414d9c475a01da79f0972113bddba729909b4268ead4a5e23d76bf65f1a4233f2e014145e29697d468f73deff498df2f2c92f6a1ec805447f914b3a706070041a293a894d8820cbd4b019b43f9116e05210bcbbbdd5ef3580c51519e56c2271c55b543618aefb40fe71519d6353452533d531cf7686d2bae2826e3d383d00281d81f4e99d679728445e2be1a078b36db346d2082b198dd689a517a38769c2ab36e8d139080f95beb78d42a2b421c5ddf6d9f559ada3180ca382beb7700fe880f2ac99d195b3246cacb7b54b4dbb4561e406b3c6660a360e4658586dbb45ecffe446461b6eebbf700291e27901810261e6ca97ae9cc71ba4de4648b45786317299bc842818255a5c627ae5d100c9535ccee6be7ffec1de99d9963be1082a3d27df48d7ca9abb25ea02537206ece6df41fa1c454407968f285a2ba0733ff82f511711b9b1ebd431c262bc456df352faa6dd08ded9f77c358fa558f375d74fe8aff3109a310fb2dd63cdc025af83a4846a23485b2f7ee709cd87a076025e763bf30a3af515299131c089804d56fe5bb62fb691c46e31742f4eb3d54b8afb6e4182eece6cad2b18a821f1e2ad8005958851ba2f76f8ede0762275b4bc029e1ad60f4b1d01c4275777dbce11f6f893b7e97c8755a6ece0c0d78fb13cecc2c78ed166fd77484d1bf62137325c041e4c79dff457e0b9566bbbdc61172f176c7693784fac486149e13a7861411222815f7af0141079292e100221af80c1efe347755b70a29d650434773605603cb6b4fe07dbb3c2ed6b3376595f7f99bdec518060007f31eefdebb5e1ca0a30a0d4be99fad94d6a4b5aba2524602c1d1b84fd39d7697458c8c8c154ce4ff86295ba74663d227990ca582d2b5e96f1187f283082c51f49dae644a2e195e6970d3529be13fdf624</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">您好, 这里需要密码.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
    
    
    <summary type="html">有东西被加密了, 请输入密码查看.</summary>
    
    
    
    
    <category term="加密文件" scheme="https://llzzoomm.github.io/tags/%E5%8A%A0%E5%AF%86%E6%96%87%E4%BB%B6/"/>
    
  </entry>
  
</feed>
